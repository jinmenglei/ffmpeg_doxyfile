\hypertarget{xsubenc_8c}{}\doxysection{E\+:/github/ffmpeg/libavcodec/xsubenc.c File Reference}
\label{xsubenc_8c}\index{E:/github/ffmpeg/libavcodec/xsubenc.c@{E:/github/ffmpeg/libavcodec/xsubenc.c}}
{\ttfamily \#include \char`\"{}avcodec.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}bytestream.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}put\+\_\+bits.\+h\char`\"{}}\newline
Include dependency graph for xsubenc.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xsubenc_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{xsubenc_8c_a3eebd09a9a94c914de17855816e6ac45}{P\+A\+D\+D\+I\+NG}}~0
\item 
\#define \mbox{\hyperlink{xsubenc_8c_a277326f2cf6f437d1dd15e5d1ac25489}{P\+A\+D\+D\+I\+N\+G\+\_\+\+C\+O\+L\+OR}}~0
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{xsubenc_8c_a73dd9301b24f67b222a9237c4fc1f267}{put\+\_\+xsub\+\_\+rle}} (\mbox{\hyperlink{struct_put_bit_context}{Put\+Bit\+Context}} $\ast$pb, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{spdifenc_8c_a77124bd5f7e31e6fffc19f335da0c23f}{len}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{structcolor}{color}})
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{xsubenc_8c_a61c161cb81e239b6b0f0d2206617bddd}{xsub\+\_\+encode\+\_\+rle}} (\mbox{\hyperlink{struct_put_bit_context}{Put\+Bit\+Context}} $\ast$pb, const \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$bitmap, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} linesize, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{sw__rgb_8c_aba9ed0487b0aa23eba534648df8384c0}{w}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{sw__rgb_8c_a1f1dfeb2f802fe99f37fe91867b84456}{h}})
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{xsubenc_8c_a63a7415b2c8ab5c9473e04268331a85e}{make\+\_\+tc}} (uint64\+\_\+t ms, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$\mbox{\hyperlink{regdef_8h_a71234e05f922466327ffed37b019c7fb}{tc}})
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{xsubenc_8c_a7d875ad5c19e345ca873a09bdfca934a}{xsub\+\_\+encode}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx, unsigned char $\ast$buf, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} bufsize, const \mbox{\hyperlink{struct_a_v_subtitle}{A\+V\+Subtitle}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a1f1dfeb2f802fe99f37fe91867b84456}{h}})
\item 
static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{xsubenc_8c_a94efb72470489da254316c95fabd8c69}{xsub\+\_\+encoder\+\_\+init}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{struct_a_v_codec}{A\+V\+Codec}} \mbox{\hyperlink{xsubenc_8c_af4cdc8d363ea01ac33619a983b51bda1}{ff\+\_\+xsub\+\_\+encoder}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{xsubenc_8c_a3eebd09a9a94c914de17855816e6ac45}\label{xsubenc_8c_a3eebd09a9a94c914de17855816e6ac45}} 
\index{xsubenc.c@{xsubenc.c}!PADDING@{PADDING}}
\index{PADDING@{PADDING}!xsubenc.c@{xsubenc.c}}
\doxysubsubsection{\texorpdfstring{PADDING}{PADDING}}
{\footnotesize\ttfamily \#define P\+A\+D\+D\+I\+NG~0}

Number of pixels to pad left and right.

The official encoder pads the subtitles with two pixels on either side, but until we find out why, we won\textquotesingle{}t do it (we will pad to have width divisible by 2 though). 

Definition at line 34 of file xsubenc.\+c.

\mbox{\Hypertarget{xsubenc_8c_a277326f2cf6f437d1dd15e5d1ac25489}\label{xsubenc_8c_a277326f2cf6f437d1dd15e5d1ac25489}} 
\index{xsubenc.c@{xsubenc.c}!PADDING\_COLOR@{PADDING\_COLOR}}
\index{PADDING\_COLOR@{PADDING\_COLOR}!xsubenc.c@{xsubenc.c}}
\doxysubsubsection{\texorpdfstring{PADDING\_COLOR}{PADDING\_COLOR}}
{\footnotesize\ttfamily \#define P\+A\+D\+D\+I\+N\+G\+\_\+\+C\+O\+L\+OR~0}



Definition at line 35 of file xsubenc.\+c.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{xsubenc_8c_a63a7415b2c8ab5c9473e04268331a85e}\label{xsubenc_8c_a63a7415b2c8ab5c9473e04268331a85e}} 
\index{xsubenc.c@{xsubenc.c}!make\_tc@{make\_tc}}
\index{make\_tc@{make\_tc}!xsubenc.c@{xsubenc.c}}
\doxysubsubsection{\texorpdfstring{make\_tc()}{make\_tc()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} make\+\_\+tc (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{ms,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$}]{tc }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 101 of file xsubenc.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{xsubenc_8c_a63a7415b2c8ab5c9473e04268331a85e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{xsubenc_8c_a73dd9301b24f67b222a9237c4fc1f267}\label{xsubenc_8c_a73dd9301b24f67b222a9237c4fc1f267}} 
\index{xsubenc.c@{xsubenc.c}!put\_xsub\_rle@{put\_xsub\_rle}}
\index{put\_xsub\_rle@{put\_xsub\_rle}!xsubenc.c@{xsubenc.c}}
\doxysubsubsection{\texorpdfstring{put\_xsub\_rle()}{put\_xsub\_rle()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} put\+\_\+xsub\+\_\+rle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_put_bit_context}{Put\+Bit\+Context}} $\ast$}]{pb,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{len,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Encode a single color run. At most 16 bits will be used. 
\begin{DoxyParams}{Parameters}
{\em len} & length of the run, values $>$ 255 mean \char`\"{}until end of line\char`\"{}, may not be $<$ 0. \\
\hline
{\em color} & color to encode, only the lowest two bits are used and all others must be 0. \\
\hline
\end{DoxyParams}


Definition at line 42 of file xsubenc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{xsubenc_8c_a73dd9301b24f67b222a9237c4fc1f267_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xsubenc_8c_a73dd9301b24f67b222a9237c4fc1f267_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{xsubenc_8c_a7d875ad5c19e345ca873a09bdfca934a}\label{xsubenc_8c_a7d875ad5c19e345ca873a09bdfca934a}} 
\index{xsubenc.c@{xsubenc.c}!xsub\_encode@{xsub\_encode}}
\index{xsub\_encode@{xsub\_encode}!xsubenc.c@{xsubenc.c}}
\doxysubsubsection{\texorpdfstring{xsub\_encode()}{xsub\_encode()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} xsub\+\_\+encode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx,  }\item[{unsigned char $\ast$}]{buf,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{bufsize,  }\item[{const \mbox{\hyperlink{struct_a_v_subtitle}{A\+V\+Subtitle}} $\ast$}]{h }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 113 of file xsubenc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xsubenc_8c_a7d875ad5c19e345ca873a09bdfca934a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{xsubenc_8c_a61c161cb81e239b6b0f0d2206617bddd}\label{xsubenc_8c_a61c161cb81e239b6b0f0d2206617bddd}} 
\index{xsubenc.c@{xsubenc.c}!xsub\_encode\_rle@{xsub\_encode\_rle}}
\index{xsub\_encode\_rle@{xsub\_encode\_rle}!xsubenc.c@{xsubenc.c}}
\doxysubsubsection{\texorpdfstring{xsub\_encode\_rle()}{xsub\_encode\_rle()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} xsub\+\_\+encode\+\_\+rle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_put_bit_context}{Put\+Bit\+Context}} $\ast$}]{pb,  }\item[{const \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$}]{bitmap,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{linesize,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{w,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{h }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Encode a 4-\/color bitmap with X\+S\+UB rle.

The encoded bitmap may be wider than the source bitmap due to padding. 

Definition at line 56 of file xsubenc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xsubenc_8c_a61c161cb81e239b6b0f0d2206617bddd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=280pt]{xsubenc_8c_a61c161cb81e239b6b0f0d2206617bddd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{xsubenc_8c_a94efb72470489da254316c95fabd8c69}\label{xsubenc_8c_a94efb72470489da254316c95fabd8c69}} 
\index{xsubenc.c@{xsubenc.c}!xsub\_encoder\_init@{xsub\_encoder\_init}}
\index{xsub\_encoder\_init@{xsub\_encoder\_init}!xsubenc.c@{xsubenc.c}}
\doxysubsubsection{\texorpdfstring{xsub\_encoder\_init()}{xsub\_encoder\_init()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} xsub\+\_\+encoder\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 216 of file xsubenc.\+c.



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{xsubenc_8c_af4cdc8d363ea01ac33619a983b51bda1}\label{xsubenc_8c_af4cdc8d363ea01ac33619a983b51bda1}} 
\index{xsubenc.c@{xsubenc.c}!ff\_xsub\_encoder@{ff\_xsub\_encoder}}
\index{ff\_xsub\_encoder@{ff\_xsub\_encoder}!xsubenc.c@{xsubenc.c}}
\doxysubsubsection{\texorpdfstring{ff\_xsub\_encoder}{ff\_xsub\_encoder}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_v_codec}{A\+V\+Codec}} ff\+\_\+xsub\+\_\+encoder}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{= \{}
\DoxyCodeLine{    .name       = \textcolor{stringliteral}{"{}xsub"{}},}
\DoxyCodeLine{    .long\_name  = \mbox{\hyperlink{libavutil_2internal_8h_a3c0fa12fafe59c44d4b16e60d8385637}{NULL\_IF\_CONFIG\_SMALL}}(\textcolor{stringliteral}{"{}DivX subtitles (XSUB)"{}}),}
\DoxyCodeLine{    .type       = \mbox{\hyperlink{group__lavu__misc_gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831}{AVMEDIA\_TYPE\_SUBTITLE}},}
\DoxyCodeLine{    .id         = \mbox{\hyperlink{group__lavc__core_ggaadca229ad2c20e060a14fec08a5cc7cea30dc7b340d566342595dd6f060f1e897}{AV\_CODEC\_ID\_XSUB}},}
\DoxyCodeLine{    .init       = \mbox{\hyperlink{xsubenc_8c_a94efb72470489da254316c95fabd8c69}{xsub\_encoder\_init}},}
\DoxyCodeLine{    .encode\_sub = \mbox{\hyperlink{xsubenc_8c_a7d875ad5c19e345ca873a09bdfca934a}{xsub\_encode}},}
\DoxyCodeLine{\}}

\end{DoxyCode}


Definition at line 226 of file xsubenc.\+c.

