\hypertarget{struct_a_v_h_w_frames_context}{}\doxysection{A\+V\+H\+W\+Frames\+Context Struct Reference}
\label{struct_a_v_h_w_frames_context}\index{AVHWFramesContext@{AVHWFramesContext}}


{\ttfamily \#include $<$hwcontext.\+h$>$}



Collaboration diagram for A\+V\+H\+W\+Frames\+Context\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{struct_a_v_h_w_frames_context__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{struct_a_v_class}{A\+V\+Class}} $\ast$ \mbox{\hyperlink{struct_a_v_h_w_frames_context_a70e916d610148748f95147cde35ce7c9}{av\+\_\+class}}
\item 
\mbox{\hyperlink{struct_a_v_h_w_frames_internal}{A\+V\+H\+W\+Frames\+Internal}} $\ast$ \mbox{\hyperlink{struct_a_v_h_w_frames_context_a69e956e8d2d73d65d015c4ed895ec642}{internal}}
\item 
\mbox{\hyperlink{struct_a_v_buffer_ref}{A\+V\+Buffer\+Ref}} $\ast$ \mbox{\hyperlink{struct_a_v_h_w_frames_context_a2f3908bfadd569103b67ee4972ee7305}{device\+\_\+ref}}
\item 
\mbox{\hyperlink{struct_a_v_h_w_device_context}{A\+V\+H\+W\+Device\+Context}} $\ast$ \mbox{\hyperlink{struct_a_v_h_w_frames_context_ac9a7dbd0cbfcabc0b1529cb34cf53b6d}{device\+\_\+ctx}}
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$ \mbox{\hyperlink{struct_a_v_h_w_frames_context_a54e38c3e4355321e23e0f4c7411cb8ee}{hwctx}}
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}}($\ast$ \mbox{\hyperlink{struct_a_v_h_w_frames_context_aaeccab495e5027aa0402dea10bdcd166}{free}} )(struct \mbox{\hyperlink{struct_a_v_h_w_frames_context}{A\+V\+H\+W\+Frames\+Context}} $\ast$\mbox{\hyperlink{tests_2movenc_8c_a93cc7296f13f507c1fd7abd0db36b898}{ctx}})
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$ \mbox{\hyperlink{struct_a_v_h_w_frames_context_a4d6e4c17632bd6770654b7627722222e}{user\+\_\+opaque}}
\item 
\mbox{\hyperlink{struct_a_v_buffer_pool}{A\+V\+Buffer\+Pool}} $\ast$ \mbox{\hyperlink{struct_a_v_h_w_frames_context_ad67ff3a5828a611d1b1cddd64fc1de71}{pool}}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{struct_a_v_h_w_frames_context_a9c3a94dcd9c96e19059b56a6bae9c764}{initial\+\_\+pool\+\_\+size}}
\item 
enum \mbox{\hyperlink{pixfmt_8h_a9a8e335cf3be472042bc9f0cf80cd4c5}{A\+V\+Pixel\+Format}} \mbox{\hyperlink{struct_a_v_h_w_frames_context_a045bc1713932804f6ceef170a5578e0e}{format}}
\item 
enum \mbox{\hyperlink{pixfmt_8h_a9a8e335cf3be472042bc9f0cf80cd4c5}{A\+V\+Pixel\+Format}} \mbox{\hyperlink{struct_a_v_h_w_frames_context_a663a9aceca97aa7b2426c9aba6543e4a}{sw\+\_\+format}}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{struct_a_v_h_w_frames_context_a9e6f29d0f744930cdd0e8bdff8771520}{width}}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{struct_a_v_h_w_frames_context_ae61bbe1d8645a0c573085e29f1d0a58f}{height}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This struct describes a set or pool of \char`\"{}hardware\char`\"{} frames (i.\+e. those with data not located in normal system memory). All the frames in the pool are assumed to be allocated in the same way and interchangeable.

This struct is reference-\/counted with the \mbox{\hyperlink{struct_a_v_buffer}{A\+V\+Buffer}} mechanism and tied to a given \mbox{\hyperlink{struct_a_v_h_w_device_context}{A\+V\+H\+W\+Device\+Context}} instance. The \mbox{\hyperlink{hwcontext_8c_ac45a7c039eb4e084b692f69ff5f2e217}{av\+\_\+hwframe\+\_\+ctx\+\_\+alloc()}} constructor yields a reference, whose data field points to the actual \mbox{\hyperlink{struct_a_v_h_w_frames_context}{A\+V\+H\+W\+Frames\+Context}} struct. 

Definition at line 124 of file hwcontext.\+h.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{struct_a_v_h_w_frames_context_a70e916d610148748f95147cde35ce7c9}\label{struct_a_v_h_w_frames_context_a70e916d610148748f95147cde35ce7c9}} 
\index{AVHWFramesContext@{AVHWFramesContext}!av\_class@{av\_class}}
\index{av\_class@{av\_class}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{av\_class}{av\_class}}
{\footnotesize\ttfamily const \mbox{\hyperlink{struct_a_v_class}{A\+V\+Class}}$\ast$ A\+V\+H\+W\+Frames\+Context\+::av\+\_\+class}

A class for logging. 

Definition at line 128 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_ac9a7dbd0cbfcabc0b1529cb34cf53b6d}\label{struct_a_v_h_w_frames_context_ac9a7dbd0cbfcabc0b1529cb34cf53b6d}} 
\index{AVHWFramesContext@{AVHWFramesContext}!device\_ctx@{device\_ctx}}
\index{device\_ctx@{device\_ctx}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{device\_ctx}{device\_ctx}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_v_h_w_device_context}{A\+V\+H\+W\+Device\+Context}}$\ast$ A\+V\+H\+W\+Frames\+Context\+::device\+\_\+ctx}

The parent \mbox{\hyperlink{struct_a_v_h_w_device_context}{A\+V\+H\+W\+Device\+Context}}. This is simply a pointer to device\+\_\+ref-\/$>$data provided for convenience.

Set by libavutil in \mbox{\hyperlink{hwcontext_8c_a66a7e1ebc7e459ce07d3de6639ac7e38}{av\+\_\+hwframe\+\_\+ctx\+\_\+init()}}. 

Definition at line 149 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_a2f3908bfadd569103b67ee4972ee7305}\label{struct_a_v_h_w_frames_context_a2f3908bfadd569103b67ee4972ee7305}} 
\index{AVHWFramesContext@{AVHWFramesContext}!device\_ref@{device\_ref}}
\index{device\_ref@{device\_ref}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{device\_ref}{device\_ref}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_v_buffer_ref}{A\+V\+Buffer\+Ref}}$\ast$ A\+V\+H\+W\+Frames\+Context\+::device\+\_\+ref}

A reference to the parent \mbox{\hyperlink{struct_a_v_h_w_device_context}{A\+V\+H\+W\+Device\+Context}}. This reference is owned and managed by the enclosing \mbox{\hyperlink{struct_a_v_h_w_frames_context}{A\+V\+H\+W\+Frames\+Context}}, but the caller may derive additional references from it. 

Definition at line 141 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_a045bc1713932804f6ceef170a5578e0e}\label{struct_a_v_h_w_frames_context_a045bc1713932804f6ceef170a5578e0e}} 
\index{AVHWFramesContext@{AVHWFramesContext}!format@{format}}
\index{format@{format}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{format}{format}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{pixfmt_8h_a9a8e335cf3be472042bc9f0cf80cd4c5}{A\+V\+Pixel\+Format}} A\+V\+H\+W\+Frames\+Context\+::format}

The pixel format identifying the underlying HW surface type.

Must be a hwaccel format, i.\+e. the corresponding descriptor must have the A\+V\+\_\+\+P\+I\+X\+\_\+\+F\+M\+T\+\_\+\+F\+L\+A\+G\+\_\+\+H\+W\+A\+C\+C\+EL flag set.

Must be set by the user before calling \mbox{\hyperlink{hwcontext_8c_a66a7e1ebc7e459ce07d3de6639ac7e38}{av\+\_\+hwframe\+\_\+ctx\+\_\+init()}}. 

Definition at line 199 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_aaeccab495e5027aa0402dea10bdcd166}\label{struct_a_v_h_w_frames_context_aaeccab495e5027aa0402dea10bdcd166}} 
\index{AVHWFramesContext@{AVHWFramesContext}!free@{free}}
\index{free@{free}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{free}{free}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}}($\ast$ A\+V\+H\+W\+Frames\+Context\+::free) (struct \mbox{\hyperlink{struct_a_v_h_w_frames_context}{A\+V\+H\+W\+Frames\+Context}} $\ast$\mbox{\hyperlink{tests_2movenc_8c_a93cc7296f13f507c1fd7abd0db36b898}{ctx}})}

This field may be set by the caller before calling \mbox{\hyperlink{hwcontext_8c_a66a7e1ebc7e459ce07d3de6639ac7e38}{av\+\_\+hwframe\+\_\+ctx\+\_\+init()}}.

If non-\/\+N\+U\+LL, this callback will be called when the last reference to this context is unreferenced, immediately before it is freed. 

Definition at line 170 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_ae61bbe1d8645a0c573085e29f1d0a58f}\label{struct_a_v_h_w_frames_context_ae61bbe1d8645a0c573085e29f1d0a58f}} 
\index{AVHWFramesContext@{AVHWFramesContext}!height@{height}}
\index{height@{height}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{height}{height}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} A\+V\+H\+W\+Frames\+Context\+::height}



Definition at line 229 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_a54e38c3e4355321e23e0f4c7411cb8ee}\label{struct_a_v_h_w_frames_context_a54e38c3e4355321e23e0f4c7411cb8ee}} 
\index{AVHWFramesContext@{AVHWFramesContext}!hwctx@{hwctx}}
\index{hwctx@{hwctx}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{hwctx}{hwctx}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}}$\ast$ A\+V\+H\+W\+Frames\+Context\+::hwctx}

The format-\/specific data, allocated and freed automatically along with this context.

Should be cast by the user to the format-\/specific context defined in the corresponding header (hwframe\+\_\+$\ast$.h) and filled as described in the documentation before calling \mbox{\hyperlink{hwcontext_8c_a66a7e1ebc7e459ce07d3de6639ac7e38}{av\+\_\+hwframe\+\_\+ctx\+\_\+init()}}.

After any frames using this context are created, the contents of this struct should not be modified by the caller. 

Definition at line 162 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_a9c3a94dcd9c96e19059b56a6bae9c764}\label{struct_a_v_h_w_frames_context_a9c3a94dcd9c96e19059b56a6bae9c764}} 
\index{AVHWFramesContext@{AVHWFramesContext}!initial\_pool\_size@{initial\_pool\_size}}
\index{initial\_pool\_size@{initial\_pool\_size}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{initial\_pool\_size}{initial\_pool\_size}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} A\+V\+H\+W\+Frames\+Context\+::initial\+\_\+pool\+\_\+size}

Initial size of the frame pool. If a device type does not support dynamically resizing the pool, then this is also the maximum pool size.

May be set by the caller before calling \mbox{\hyperlink{hwcontext_8c_a66a7e1ebc7e459ce07d3de6639ac7e38}{av\+\_\+hwframe\+\_\+ctx\+\_\+init()}}. Must be set if pool is N\+U\+LL and the device type does not support dynamic pools. 

Definition at line 199 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_a69e956e8d2d73d65d015c4ed895ec642}\label{struct_a_v_h_w_frames_context_a69e956e8d2d73d65d015c4ed895ec642}} 
\index{AVHWFramesContext@{AVHWFramesContext}!internal@{internal}}
\index{internal@{internal}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{internal}{internal}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_v_h_w_frames_internal}{A\+V\+H\+W\+Frames\+Internal}}$\ast$ A\+V\+H\+W\+Frames\+Context\+::internal}

Private data used internally by libavutil. Must not be accessed in any way by the caller. 

Definition at line 134 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_ad67ff3a5828a611d1b1cddd64fc1de71}\label{struct_a_v_h_w_frames_context_ad67ff3a5828a611d1b1cddd64fc1de71}} 
\index{AVHWFramesContext@{AVHWFramesContext}!pool@{pool}}
\index{pool@{pool}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{pool}{pool}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_v_buffer_pool}{A\+V\+Buffer\+Pool}}$\ast$ A\+V\+H\+W\+Frames\+Context\+::pool}

A pool from which the frames are allocated by \mbox{\hyperlink{hwcontext_8c_adfa5aaa3a4f69b163ea30cadc6d663dc}{av\+\_\+hwframe\+\_\+get\+\_\+buffer()}}. This field may be set by the caller before calling \mbox{\hyperlink{hwcontext_8c_a66a7e1ebc7e459ce07d3de6639ac7e38}{av\+\_\+hwframe\+\_\+ctx\+\_\+init()}}. The buffers returned by calling \mbox{\hyperlink{group__lavu__bufferpool_ga2c745ecb4001452423e775b06b20fb7c}{av\+\_\+buffer\+\_\+pool\+\_\+get()}} on this pool must have the properties described in the documentation in the corresponding hw type\textquotesingle{}s header (hwcontext\+\_\+$\ast$.h). The pool will be freed strictly before this struct\textquotesingle{}s \mbox{\hyperlink{struct_a_v_h_w_frames_context_aaeccab495e5027aa0402dea10bdcd166}{free()}} callback is invoked.

This field may be N\+U\+LL, then libavutil will attempt to allocate a pool internally. Note that certain device types enforce pools allocated at fixed size (frame count), which cannot be extended dynamically. In such a case, initial\+\_\+pool\+\_\+size must be set appropriately. 

Definition at line 190 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_a663a9aceca97aa7b2426c9aba6543e4a}\label{struct_a_v_h_w_frames_context_a663a9aceca97aa7b2426c9aba6543e4a}} 
\index{AVHWFramesContext@{AVHWFramesContext}!sw\_format@{sw\_format}}
\index{sw\_format@{sw\_format}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{sw\_format}{sw\_format}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{pixfmt_8h_a9a8e335cf3be472042bc9f0cf80cd4c5}{A\+V\+Pixel\+Format}} A\+V\+H\+W\+Frames\+Context\+::sw\+\_\+format}

The pixel format identifying the actual data layout of the hardware frames.

Must be set by the caller before calling \mbox{\hyperlink{hwcontext_8c_a66a7e1ebc7e459ce07d3de6639ac7e38}{av\+\_\+hwframe\+\_\+ctx\+\_\+init()}}.

\begin{DoxyNote}{Note}
when the underlying A\+PI does not provide the exact data layout, but only the colorspace/bit depth, this field should be set to the fully planar version of that format (e.\+g. for 8-\/bit 420 Y\+UV it should be A\+V\+\_\+\+P\+I\+X\+\_\+\+F\+M\+T\+\_\+\+Y\+U\+V420P, not A\+V\+\_\+\+P\+I\+X\+\_\+\+F\+M\+T\+\_\+\+N\+V12 or anything else). 
\end{DoxyNote}


Definition at line 199 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_a4d6e4c17632bd6770654b7627722222e}\label{struct_a_v_h_w_frames_context_a4d6e4c17632bd6770654b7627722222e}} 
\index{AVHWFramesContext@{AVHWFramesContext}!user\_opaque@{user\_opaque}}
\index{user\_opaque@{user\_opaque}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{user\_opaque}{user\_opaque}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}}$\ast$ A\+V\+H\+W\+Frames\+Context\+::user\+\_\+opaque}

Arbitrary user data, to be used e.\+g. by the \mbox{\hyperlink{struct_a_v_h_w_frames_context_aaeccab495e5027aa0402dea10bdcd166}{free()}} callback. 

Definition at line 175 of file hwcontext.\+h.

\mbox{\Hypertarget{struct_a_v_h_w_frames_context_a9e6f29d0f744930cdd0e8bdff8771520}\label{struct_a_v_h_w_frames_context_a9e6f29d0f744930cdd0e8bdff8771520}} 
\index{AVHWFramesContext@{AVHWFramesContext}!width@{width}}
\index{width@{width}!AVHWFramesContext@{AVHWFramesContext}}
\doxysubsubsection{\texorpdfstring{width}{width}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} A\+V\+H\+W\+Frames\+Context\+::width}

The allocated dimensions of the frames in this pool.

Must be set by the user before calling \mbox{\hyperlink{hwcontext_8c_a66a7e1ebc7e459ce07d3de6639ac7e38}{av\+\_\+hwframe\+\_\+ctx\+\_\+init()}}. 

Definition at line 229 of file hwcontext.\+h.



The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/github/ffmpeg/libavutil/\mbox{\hyperlink{hwcontext_8h}{hwcontext.\+h}}\end{DoxyCompactItemize}
