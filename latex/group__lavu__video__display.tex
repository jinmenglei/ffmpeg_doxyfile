\hypertarget{group__lavu__video__display}{}\doxysection{Display transformation matrix functions}
\label{group__lavu__video__display}\index{Display transformation matrix functions@{Display transformation matrix functions}}
Collaboration diagram for Display transformation matrix functions\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{group__lavu__video__display}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{group__lavu__video__display_gaac2ea94d3f66496c758349450b5b0217}{av\+\_\+display\+\_\+rotation\+\_\+get}} (const \mbox{\hyperlink{audioconvert_8c_afd12020da5a235dfcf0c3c748fb5baed}{int32\+\_\+t}} matrix\mbox{[}9\mbox{]})
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{group__lavu__video__display_ga5964303bfe085ad33683bc2454768d4a}{av\+\_\+display\+\_\+rotation\+\_\+set}} (\mbox{\hyperlink{audioconvert_8c_afd12020da5a235dfcf0c3c748fb5baed}{int32\+\_\+t}} matrix\mbox{[}9\mbox{]}, double angle)
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{group__lavu__video__display_gadd236b7ced34637aa9f0a9bceaeac5c3}{av\+\_\+display\+\_\+matrix\+\_\+flip}} (\mbox{\hyperlink{audioconvert_8c_afd12020da5a235dfcf0c3c748fb5baed}{int32\+\_\+t}} matrix\mbox{[}9\mbox{]}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} hflip, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} vflip)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The display transformation matrix specifies an affine transformation that should be applied to video frames for correct presentation. It is compatible with the matrices stored in the I\+S\+O/\+I\+EC 14496-\/12 container format.

The data is a 3x3 matrix represented as a 9-\/element array\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{                               | a b u |}
\DoxyCodeLine{(a, b, u, c, d, v, x, y, w) -\/> | c d v |}
\DoxyCodeLine{                               | x y w |}
\end{DoxyCode}


All numbers are stored in native endianness, as 16.\+16 fixed-\/point values, except for u, v and w, which are stored as 2.\+30 fixed-\/point values.

The transformation maps a point (p, q) in the source (pre-\/transformation) frame to the point (p\textquotesingle{}, q\textquotesingle{}) in the destination (post-\/transformation) frame as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{            | a b u |}
\DoxyCodeLine{(p, q, 1) . | c d v | = z * (p', q', 1)}
\DoxyCodeLine{            | x y w |}
\end{DoxyCode}


The transformation can also be more explicitly written in components as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{p' = (a * p + c * q + x) / z;}
\DoxyCodeLine{q' = (b * p + d * q + y) / z;}
\DoxyCodeLine{z  =  u * p + v * q + w}
\end{DoxyCode}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{group__lavu__video__display_gadd236b7ced34637aa9f0a9bceaeac5c3}\label{group__lavu__video__display_gadd236b7ced34637aa9f0a9bceaeac5c3}} 
\index{Display transformation matrix functions@{Display transformation matrix functions}!av\_display\_matrix\_flip@{av\_display\_matrix\_flip}}
\index{av\_display\_matrix\_flip@{av\_display\_matrix\_flip}!Display transformation matrix functions@{Display transformation matrix functions}}
\doxysubsubsection{\texorpdfstring{av\_display\_matrix\_flip()}{av\_display\_matrix\_flip()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} av\+\_\+display\+\_\+matrix\+\_\+flip (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{audioconvert_8c_afd12020da5a235dfcf0c3c748fb5baed}{int32\+\_\+t}}}]{matrix\mbox{[}9\mbox{]},  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{hflip,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{vflip }\end{DoxyParamCaption})}

Flip the input matrix horizontally and/or vertically.


\begin{DoxyParams}{Parameters}
{\em matrix} & an allocated transformation matrix \\
\hline
{\em hflip} & whether the matrix should be flipped horizontally \\
\hline
{\em vflip} & whether the matrix should be flipped vertically \\
\hline
\end{DoxyParams}


Definition at line 65 of file display.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{group__lavu__video__display_gadd236b7ced34637aa9f0a9bceaeac5c3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavu__video__display_gadd236b7ced34637aa9f0a9bceaeac5c3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavu__video__display_gaac2ea94d3f66496c758349450b5b0217}\label{group__lavu__video__display_gaac2ea94d3f66496c758349450b5b0217}} 
\index{Display transformation matrix functions@{Display transformation matrix functions}!av\_display\_rotation\_get@{av\_display\_rotation\_get}}
\index{av\_display\_rotation\_get@{av\_display\_rotation\_get}!Display transformation matrix functions@{Display transformation matrix functions}}
\doxysubsubsection{\texorpdfstring{av\_display\_rotation\_get()}{av\_display\_rotation\_get()}}
{\footnotesize\ttfamily double av\+\_\+display\+\_\+rotation\+\_\+get (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{audioconvert_8c_afd12020da5a235dfcf0c3c748fb5baed}{int32\+\_\+t}}}]{matrix\mbox{[}9\mbox{]} }\end{DoxyParamCaption})}

Extract the rotation component of the transformation matrix.


\begin{DoxyParams}{Parameters}
{\em matrix} & the transformation matrix \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the angle (in degrees) by which the transformation rotates the frame counterclockwise. The angle will be in range \mbox{[}-\/180.\+0, 180.\+0\mbox{]}, or NaN if the matrix is singular.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
floating point numbers are inherently inexact, so callers are recommended to round the return value to nearest integer before use. 
\end{DoxyNote}


Definition at line 34 of file display.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavu__video__display_gaac2ea94d3f66496c758349450b5b0217_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavu__video__display_gaac2ea94d3f66496c758349450b5b0217_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavu__video__display_ga5964303bfe085ad33683bc2454768d4a}\label{group__lavu__video__display_ga5964303bfe085ad33683bc2454768d4a}} 
\index{Display transformation matrix functions@{Display transformation matrix functions}!av\_display\_rotation\_set@{av\_display\_rotation\_set}}
\index{av\_display\_rotation\_set@{av\_display\_rotation\_set}!Display transformation matrix functions@{Display transformation matrix functions}}
\doxysubsubsection{\texorpdfstring{av\_display\_rotation\_set()}{av\_display\_rotation\_set()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} av\+\_\+display\+\_\+rotation\+\_\+set (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{audioconvert_8c_afd12020da5a235dfcf0c3c748fb5baed}{int32\+\_\+t}}}]{matrix\mbox{[}9\mbox{]},  }\item[{double}]{angle }\end{DoxyParamCaption})}

Initialize a transformation matrix describing a pure counterclockwise rotation by the specified angle (in degrees).


\begin{DoxyParams}{Parameters}
{\em matrix} & an allocated transformation matrix (will be fully overwritten by this function) \\
\hline
{\em angle} & rotation angle in degrees. \\
\hline
\end{DoxyParams}


Definition at line 50 of file display.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavu__video__display_ga5964303bfe085ad33683bc2454768d4a_icgraph}
\end{center}
\end{figure}
