\hypertarget{flac_8c}{}\doxysection{E\+:/github/ffmpeg/libavcodec/flac.c File Reference}
\label{flac_8c}\index{E:/github/ffmpeg/libavcodec/flac.c@{E:/github/ffmpeg/libavcodec/flac.c}}
{\ttfamily \#include \char`\"{}libavutil/channel\+\_\+layout.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/crc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/log.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}bytestream.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}get\+\_\+bits.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}flac.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}flacdata.\+h\char`\"{}}\newline
Include dependency graph for flac.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{flac_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static int64\+\_\+t \mbox{\hyperlink{flac_8c_a82c88a79430ae3cbf1386a69dbd0b8f0}{get\+\_\+utf8}} (\mbox{\hyperlink{struct_get_bit_context}{Get\+Bit\+Context}} $\ast$gb)
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{flac_8c_ae410b9a071186cb7526c4f5caa3c68ec}{ff\+\_\+flac\+\_\+decode\+\_\+frame\+\_\+header}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx, \mbox{\hyperlink{struct_get_bit_context}{Get\+Bit\+Context}} $\ast$gb, \mbox{\hyperlink{struct_f_l_a_c_frame_info}{F\+L\+A\+C\+Frame\+Info}} $\ast$fi, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} log\+\_\+level\+\_\+offset)
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{flac_8c_ae177c295481c2726c93c1f96c5ea9b94}{ff\+\_\+flac\+\_\+get\+\_\+max\+\_\+frame\+\_\+size}} (\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} blocksize, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ch, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{movenc_8c_a274f7fddf13f456309bc20d3fa2b9a80}{bps}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{flac_8c_ada3b7bc7ba95bde1fc0fa551827a2f1e}{ff\+\_\+flac\+\_\+is\+\_\+extradata\+\_\+valid}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx, enum \mbox{\hyperlink{flac_8h_a4faa83ab8170cdd34eb30ea03ecfd97d}{F\+L\+A\+C\+Extradata\+Format}} $\ast$\mbox{\hyperlink{filter__design_8txt_a7d537039ea0e18164d9edb0b5ca984dd}{format}}, \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$$\ast$streaminfo\+\_\+start)
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{flac_8c_af1e0f4633b69e61800c14f52494895d8}{ff\+\_\+flac\+\_\+set\+\_\+channel\+\_\+layout}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx)
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{flac_8c_af4d191f8ef90ebd9150783f4abba7668}{ff\+\_\+flac\+\_\+parse\+\_\+streaminfo}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx, struct \mbox{\hyperlink{struct_f_l_a_c_streaminfo}{F\+L\+A\+C\+Streaminfo}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, const \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$\mbox{\hyperlink{seek_8c_a5819dbc2d305e99e930c734a0d28bc3b}{buffer}})
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static const int8\+\_\+t \mbox{\hyperlink{flac_8c_a97396cf88d984ca639e710424bc64700}{sample\+\_\+size\+\_\+table}} \mbox{[}$\,$\mbox{]} = \{ 0, 8, 12, 0, 16, 20, 24, 0 \}
\item 
static const uint64\+\_\+t \mbox{\hyperlink{flac_8c_a33b2ba0af3ebcd42a44511e33bf754c1}{flac\+\_\+channel\+\_\+layouts}} \mbox{[}8\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{flac_8c_ae410b9a071186cb7526c4f5caa3c68ec}\label{flac_8c_ae410b9a071186cb7526c4f5caa3c68ec}} 
\index{flac.c@{flac.c}!ff\_flac\_decode\_frame\_header@{ff\_flac\_decode\_frame\_header}}
\index{ff\_flac\_decode\_frame\_header@{ff\_flac\_decode\_frame\_header}!flac.c@{flac.c}}
\doxysubsubsection{\texorpdfstring{ff\_flac\_decode\_frame\_header()}{ff\_flac\_decode\_frame\_header()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+flac\+\_\+decode\+\_\+frame\+\_\+header (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx,  }\item[{\mbox{\hyperlink{struct_get_bit_context}{Get\+Bit\+Context}} $\ast$}]{gb,  }\item[{\mbox{\hyperlink{struct_f_l_a_c_frame_info}{F\+L\+A\+C\+Frame\+Info}} $\ast$}]{fi,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{log\+\_\+level\+\_\+offset }\end{DoxyParamCaption})}

Validate and decode a frame header. 
\begin{DoxyParams}[1]{Parameters}
 & {\em avctx} & \mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} to use as \mbox{\hyperlink{tableprint__vlc_8h_af38b91523053c244564a94f1ef862c2c}{av\+\_\+log()}} context \\
\hline
 & {\em gb} & \mbox{\hyperlink{struct_get_bit_context}{Get\+Bit\+Context}} from which to read frame header \\
\hline
\mbox{\texttt{ out}}  & {\em fi} & frame information \\
\hline
 & {\em log\+\_\+level\+\_\+offset} & log level offset. can be used to silence error messages. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
non-\/zero on error, 0 if ok 
\end{DoxyReturn}


Definition at line 50 of file flac.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{flac_8c_ae410b9a071186cb7526c4f5caa3c68ec_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{flac_8c_ae410b9a071186cb7526c4f5caa3c68ec_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{flac_8c_ae177c295481c2726c93c1f96c5ea9b94}\label{flac_8c_ae177c295481c2726c93c1f96c5ea9b94}} 
\index{flac.c@{flac.c}!ff\_flac\_get\_max\_frame\_size@{ff\_flac\_get\_max\_frame\_size}}
\index{ff\_flac\_get\_max\_frame\_size@{ff\_flac\_get\_max\_frame\_size}!flac.c@{flac.c}}
\doxysubsubsection{\texorpdfstring{ff\_flac\_get\_max\_frame\_size()}{ff\_flac\_get\_max\_frame\_size()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+flac\+\_\+get\+\_\+max\+\_\+frame\+\_\+size (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{blocksize,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{ch,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{bps }\end{DoxyParamCaption})}

Calculate an estimate for the maximum frame size based on verbatim mode. 
\begin{DoxyParams}{Parameters}
{\em blocksize} & block size, in samples \\
\hline
{\em ch} & number of channels \\
\hline
{\em bps} & bits-\/per-\/sample \\
\hline
\end{DoxyParams}


Definition at line 148 of file flac.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{flac_8c_ae177c295481c2726c93c1f96c5ea9b94_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{flac_8c_ada3b7bc7ba95bde1fc0fa551827a2f1e}\label{flac_8c_ada3b7bc7ba95bde1fc0fa551827a2f1e}} 
\index{flac.c@{flac.c}!ff\_flac\_is\_extradata\_valid@{ff\_flac\_is\_extradata\_valid}}
\index{ff\_flac\_is\_extradata\_valid@{ff\_flac\_is\_extradata\_valid}!flac.c@{flac.c}}
\doxysubsubsection{\texorpdfstring{ff\_flac\_is\_extradata\_valid()}{ff\_flac\_is\_extradata\_valid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+flac\+\_\+is\+\_\+extradata\+\_\+valid (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx,  }\item[{enum \mbox{\hyperlink{flac_8h_a4faa83ab8170cdd34eb30ea03ecfd97d}{F\+L\+A\+C\+Extradata\+Format}} $\ast$}]{format,  }\item[{\mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$$\ast$}]{streaminfo\+\_\+start }\end{DoxyParamCaption})}

Validate the F\+L\+AC extradata. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em avctx} & codec context containing the extradata. \\
\hline
\mbox{\texttt{ out}}  & {\em format} & extradata format. \\
\hline
\mbox{\texttt{ out}}  & {\em streaminfo\+\_\+start} & pointer to start of 34-\/byte S\+T\+R\+E\+A\+M\+I\+N\+FO data. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if valid, 0 if not valid. 
\end{DoxyReturn}


Definition at line 169 of file flac.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=260pt]{flac_8c_ada3b7bc7ba95bde1fc0fa551827a2f1e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=302pt]{flac_8c_ada3b7bc7ba95bde1fc0fa551827a2f1e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{flac_8c_af4d191f8ef90ebd9150783f4abba7668}\label{flac_8c_af4d191f8ef90ebd9150783f4abba7668}} 
\index{flac.c@{flac.c}!ff\_flac\_parse\_streaminfo@{ff\_flac\_parse\_streaminfo}}
\index{ff\_flac\_parse\_streaminfo@{ff\_flac\_parse\_streaminfo}!flac.c@{flac.c}}
\doxysubsubsection{\texorpdfstring{ff\_flac\_parse\_streaminfo()}{ff\_flac\_parse\_streaminfo()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+flac\+\_\+parse\+\_\+streaminfo (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx,  }\item[{struct \mbox{\hyperlink{struct_f_l_a_c_streaminfo}{F\+L\+A\+C\+Streaminfo}} $\ast$}]{s,  }\item[{const \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$}]{buffer }\end{DoxyParamCaption})}

Parse the Streaminfo metadata block 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em avctx} & codec context to set basic stream parameters \\
\hline
\mbox{\texttt{ out}}  & {\em s} & where parsed information is stored \\
\hline
\mbox{\texttt{ in}}  & {\em buffer} & pointer to start of 34-\/byte streaminfo data\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
negative error code on faiure or $>$= 0 on success 
\end{DoxyReturn}


Definition at line 204 of file flac.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{flac_8c_af4d191f8ef90ebd9150783f4abba7668_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{flac_8c_af4d191f8ef90ebd9150783f4abba7668_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{flac_8c_af1e0f4633b69e61800c14f52494895d8}\label{flac_8c_af1e0f4633b69e61800c14f52494895d8}} 
\index{flac.c@{flac.c}!ff\_flac\_set\_channel\_layout@{ff\_flac\_set\_channel\_layout}}
\index{ff\_flac\_set\_channel\_layout@{ff\_flac\_set\_channel\_layout}!flac.c@{flac.c}}
\doxysubsubsection{\texorpdfstring{ff\_flac\_set\_channel\_layout()}{ff\_flac\_set\_channel\_layout()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+flac\+\_\+set\+\_\+channel\+\_\+layout (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx }\end{DoxyParamCaption})}



Definition at line 196 of file flac.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{flac_8c_af1e0f4633b69e61800c14f52494895d8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{flac_8c_a82c88a79430ae3cbf1386a69dbd0b8f0}\label{flac_8c_a82c88a79430ae3cbf1386a69dbd0b8f0}} 
\index{flac.c@{flac.c}!get\_utf8@{get\_utf8}}
\index{get\_utf8@{get\_utf8}!flac.c@{flac.c}}
\doxysubsubsection{\texorpdfstring{get\_utf8()}{get\_utf8()}}
{\footnotesize\ttfamily static int64\+\_\+t get\+\_\+utf8 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_get_bit_context}{Get\+Bit\+Context}} $\ast$}]{gb }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 43 of file flac.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=218pt]{flac_8c_a82c88a79430ae3cbf1386a69dbd0b8f0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{flac_8c_a82c88a79430ae3cbf1386a69dbd0b8f0_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{flac_8c_a33b2ba0af3ebcd42a44511e33bf754c1}\label{flac_8c_a33b2ba0af3ebcd42a44511e33bf754c1}} 
\index{flac.c@{flac.c}!flac\_channel\_layouts@{flac\_channel\_layouts}}
\index{flac\_channel\_layouts@{flac\_channel\_layouts}!flac.c@{flac.c}}
\doxysubsubsection{\texorpdfstring{flac\_channel\_layouts}{flac\_channel\_layouts}}
{\footnotesize\ttfamily const uint64\+\_\+t flac\+\_\+channel\+\_\+layouts\mbox{[}8\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{= \{}
\DoxyCodeLine{    \mbox{\hyperlink{group__channel__mask__c_ga53d6da2dcd56f5f87c7afd8b33fa15ba}{AV\_CH\_LAYOUT\_MONO}},}
\DoxyCodeLine{    \mbox{\hyperlink{group__channel__mask__c_gabc6d6651bba254cd0fa2c42a57228e65}{AV\_CH\_LAYOUT\_STEREO}},}
\DoxyCodeLine{    \mbox{\hyperlink{group__channel__mask__c_ga625aec7f2285dc35e3ed801e91889564}{AV\_CH\_LAYOUT\_SURROUND}},}
\DoxyCodeLine{    \mbox{\hyperlink{group__channel__mask__c_ga0982ce29eced939dfcfb5b52416810ae}{AV\_CH\_LAYOUT\_QUAD}},}
\DoxyCodeLine{    \mbox{\hyperlink{group__channel__mask__c_ga10eddec555bcf849efce5158b0cbdb50}{AV\_CH\_LAYOUT\_5POINT0}},}
\DoxyCodeLine{    \mbox{\hyperlink{group__channel__mask__c_gac36a042dc21866f9043ce930f300d0df}{AV\_CH\_LAYOUT\_5POINT1}},}
\DoxyCodeLine{    \mbox{\hyperlink{group__channel__mask__c_ga0b63b18f49c294bfbc22afa8b59b6685}{AV\_CH\_LAYOUT\_6POINT1}},}
\DoxyCodeLine{    \mbox{\hyperlink{group__channel__mask__c_ga2006ce652a95bad74291db52fa346464}{AV\_CH\_LAYOUT\_7POINT1}}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Definition at line 32 of file flac.\+c.

\mbox{\Hypertarget{flac_8c_a97396cf88d984ca639e710424bc64700}\label{flac_8c_a97396cf88d984ca639e710424bc64700}} 
\index{flac.c@{flac.c}!sample\_size\_table@{sample\_size\_table}}
\index{sample\_size\_table@{sample\_size\_table}!flac.c@{flac.c}}
\doxysubsubsection{\texorpdfstring{sample\_size\_table}{sample\_size\_table}}
{\footnotesize\ttfamily const int8\+\_\+t sample\+\_\+size\+\_\+table\mbox{[}$\,$\mbox{]} = \{ 0, 8, 12, 0, 16, 20, 24, 0 \}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 30 of file flac.\+c.

