\hypertarget{mediacodec_8c}{}\doxysection{E\+:/github/ffmpeg/libavcodec/mediacodec.c File Reference}
\label{mediacodec_8c}\index{E:/github/ffmpeg/libavcodec/mediacodec.c@{E:/github/ffmpeg/libavcodec/mediacodec.c}}
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/error.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mediacodec.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
Include dependency graph for mediacodec.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mediacodec_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{struct_a_v_media_codec_context}{A\+V\+Media\+Codec\+Context}} $\ast$ \mbox{\hyperlink{mediacodec_8c_a55b70ac1dcc51eead87a9d208faee92f}{av\+\_\+mediacodec\+\_\+alloc\+\_\+context}} (\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{mediacodec_8c_a11017813a418700a6a80a915c8a393aa}{av\+\_\+mediacodec\+\_\+default\+\_\+init}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx, \mbox{\hyperlink{struct_a_v_media_codec_context}{A\+V\+Media\+Codec\+Context}} $\ast$\mbox{\hyperlink{tests_2movenc_8c_a93cc7296f13f507c1fd7abd0db36b898}{ctx}}, \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$surface)
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{mediacodec_8c_af4195e0ef95ed3b12cb440c9ce9565b5}{av\+\_\+mediacodec\+\_\+default\+\_\+free}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx)
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{mediacodec_8c_a36761de99f3b4c76f29cf4039a1f3eb2}{av\+\_\+mediacodec\+\_\+release\+\_\+buffer}} (\mbox{\hyperlink{mediacodec_8h_ac5e9b9aba9045bc7c09f4309cecd7212}{A\+V\+Media\+Codec\+Buffer}} $\ast$\mbox{\hyperlink{seek_8c_a5819dbc2d305e99e930c734a0d28bc3b}{buffer}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} render)
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{mediacodec_8c_a3b14761c6a139598e9f28353c19ac899}{av\+\_\+mediacodec\+\_\+render\+\_\+buffer\+\_\+at\+\_\+time}} (\mbox{\hyperlink{mediacodec_8h_ac5e9b9aba9045bc7c09f4309cecd7212}{A\+V\+Media\+Codec\+Buffer}} $\ast$\mbox{\hyperlink{seek_8c_a5819dbc2d305e99e930c734a0d28bc3b}{buffer}}, int64\+\_\+t time)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{mediacodec_8c_a55b70ac1dcc51eead87a9d208faee92f}\label{mediacodec_8c_a55b70ac1dcc51eead87a9d208faee92f}} 
\index{mediacodec.c@{mediacodec.c}!av\_mediacodec\_alloc\_context@{av\_mediacodec\_alloc\_context}}
\index{av\_mediacodec\_alloc\_context@{av\_mediacodec\_alloc\_context}!mediacodec.c@{mediacodec.c}}
\doxysubsubsection{\texorpdfstring{av\_mediacodec\_alloc\_context()}{av\_mediacodec\_alloc\_context()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_v_media_codec_context}{A\+V\+Media\+Codec\+Context}}$\ast$ av\+\_\+mediacodec\+\_\+alloc\+\_\+context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}}}]{ }\end{DoxyParamCaption})}

Allocate and initialize a Media\+Codec context.

When decoding with Media\+Codec is finished, the caller must free the Media\+Codec context with av\+\_\+mediacodec\+\_\+default\+\_\+free.

\begin{DoxyReturn}{Returns}
a pointer to a newly allocated \mbox{\hyperlink{struct_a_v_media_codec_context}{A\+V\+Media\+Codec\+Context}} on success, N\+U\+LL otherwise 
\end{DoxyReturn}


Definition at line 125 of file mediacodec.\+c.

\mbox{\Hypertarget{mediacodec_8c_af4195e0ef95ed3b12cb440c9ce9565b5}\label{mediacodec_8c_af4195e0ef95ed3b12cb440c9ce9565b5}} 
\index{mediacodec.c@{mediacodec.c}!av\_mediacodec\_default\_free@{av\_mediacodec\_default\_free}}
\index{av\_mediacodec\_default\_free@{av\_mediacodec\_default\_free}!mediacodec.c@{mediacodec.c}}
\doxysubsubsection{\texorpdfstring{av\_mediacodec\_default\_free()}{av\_mediacodec\_default\_free()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} av\+\_\+mediacodec\+\_\+default\+\_\+free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx }\end{DoxyParamCaption})}

This function must be called to free the Media\+Codec context initialized with \mbox{\hyperlink{mediacodec_8h_a11017813a418700a6a80a915c8a393aa}{av\+\_\+mediacodec\+\_\+default\+\_\+init()}}.


\begin{DoxyParams}{Parameters}
{\em avctx} & codec context \\
\hline
\end{DoxyParams}


Definition at line 135 of file mediacodec.\+c.

\mbox{\Hypertarget{mediacodec_8c_a11017813a418700a6a80a915c8a393aa}\label{mediacodec_8c_a11017813a418700a6a80a915c8a393aa}} 
\index{mediacodec.c@{mediacodec.c}!av\_mediacodec\_default\_init@{av\_mediacodec\_default\_init}}
\index{av\_mediacodec\_default\_init@{av\_mediacodec\_default\_init}!mediacodec.c@{mediacodec.c}}
\doxysubsubsection{\texorpdfstring{av\_mediacodec\_default\_init()}{av\_mediacodec\_default\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+mediacodec\+\_\+default\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx,  }\item[{\mbox{\hyperlink{struct_a_v_media_codec_context}{A\+V\+Media\+Codec\+Context}} $\ast$}]{ctx,  }\item[{\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{surface }\end{DoxyParamCaption})}

Convenience function that sets up the Media\+Codec context.


\begin{DoxyParams}{Parameters}
{\em avctx} & codec context \\
\hline
{\em ctx} & Media\+Codec context to initialize \\
\hline
{\em surface} & reference to an android/view/\+Surface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, $<$ 0 otherwise 
\end{DoxyReturn}


Definition at line 130 of file mediacodec.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=316pt]{mediacodec_8c_a11017813a418700a6a80a915c8a393aa_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mediacodec_8c_a36761de99f3b4c76f29cf4039a1f3eb2}\label{mediacodec_8c_a36761de99f3b4c76f29cf4039a1f3eb2}} 
\index{mediacodec.c@{mediacodec.c}!av\_mediacodec\_release\_buffer@{av\_mediacodec\_release\_buffer}}
\index{av\_mediacodec\_release\_buffer@{av\_mediacodec\_release\_buffer}!mediacodec.c@{mediacodec.c}}
\doxysubsubsection{\texorpdfstring{av\_mediacodec\_release\_buffer()}{av\_mediacodec\_release\_buffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+mediacodec\+\_\+release\+\_\+buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{mediacodec_8h_ac5e9b9aba9045bc7c09f4309cecd7212}{A\+V\+Media\+Codec\+Buffer}} $\ast$}]{buffer,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{render }\end{DoxyParamCaption})}

Release a Media\+Codec buffer and render it to the surface that is associated with the decoder. This function should only be called once on a given buffer, once released the underlying buffer returns to the codec, thus subsequent calls to this function will have no effect.


\begin{DoxyParams}{Parameters}
{\em buffer} & the buffer to render \\
\hline
{\em render} & 1 to release and render the buffer to the surface or 0 to discard the buffer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, $<$ 0 otherwise 
\end{DoxyReturn}


Definition at line 139 of file mediacodec.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=301pt]{mediacodec_8c_a36761de99f3b4c76f29cf4039a1f3eb2_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mediacodec_8c_a3b14761c6a139598e9f28353c19ac899}\label{mediacodec_8c_a3b14761c6a139598e9f28353c19ac899}} 
\index{mediacodec.c@{mediacodec.c}!av\_mediacodec\_render\_buffer\_at\_time@{av\_mediacodec\_render\_buffer\_at\_time}}
\index{av\_mediacodec\_render\_buffer\_at\_time@{av\_mediacodec\_render\_buffer\_at\_time}!mediacodec.c@{mediacodec.c}}
\doxysubsubsection{\texorpdfstring{av\_mediacodec\_render\_buffer\_at\_time()}{av\_mediacodec\_render\_buffer\_at\_time()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+mediacodec\+\_\+render\+\_\+buffer\+\_\+at\+\_\+time (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{mediacodec_8h_ac5e9b9aba9045bc7c09f4309cecd7212}{A\+V\+Media\+Codec\+Buffer}} $\ast$}]{buffer,  }\item[{int64\+\_\+t}]{time }\end{DoxyParamCaption})}

Release a Media\+Codec buffer and render it at the given time to the surface that is associated with the decoder. The timestamp must be within one second of the current java/lang/\+System\#nano\+Time() (which is implemented using C\+L\+O\+C\+K\+\_\+\+M\+O\+N\+O\+T\+O\+N\+IC on Android). See the Android Media\+Codec documentation of android/media/\+Media\+Codec\#release\+Output\+Buffer(int,long) for more details.


\begin{DoxyParams}{Parameters}
{\em buffer} & the buffer to render \\
\hline
{\em time} & timestamp in nanoseconds of when to render the buffer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, $<$ 0 otherwise 
\end{DoxyReturn}


Definition at line 144 of file mediacodec.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=297pt]{mediacodec_8c_a3b14761c6a139598e9f28353c19ac899_cgraph}
\end{center}
\end{figure}
