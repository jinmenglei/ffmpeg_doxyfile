\hypertarget{group__lavf__encoding}{}\doxysection{Muxing}
\label{group__lavf__encoding}\index{Muxing@{Muxing}}
Collaboration diagram for Muxing\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{group__lavf__encoding}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_a_v_output_format}{A\+V\+Output\+Format}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group__lavf__encoding_ga5396ff79e3c1ec7220765499f2efc74d}{A\+V\+S\+T\+R\+E\+A\+M\+\_\+\+I\+N\+I\+T\+\_\+\+I\+N\+\_\+\+W\+R\+I\+T\+E\+\_\+\+H\+E\+A\+D\+ER}}~0
\begin{DoxyCompactList}\small\item\em stream parameters initialized in avformat\+\_\+write\+\_\+header \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group__lavf__encoding_ga5268e4fbbb73b5ed1e4083f44f565ffd}{A\+V\+S\+T\+R\+E\+A\+M\+\_\+\+I\+N\+I\+T\+\_\+\+I\+N\+\_\+\+I\+N\+I\+T\+\_\+\+O\+U\+T\+P\+UT}}~1
\begin{DoxyCompactList}\small\item\em stream parameters initialized in avformat\+\_\+init\+\_\+output \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{struct_a_v_output_format}{A\+V\+Output\+Format}} \mbox{\hyperlink{group__lavf__encoding_gaf31ccdb28224d5bc7e23e308e0dadc0b}{A\+V\+Output\+Format}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{attributes_8h_a93f17e0f0b53a66e7b5eceb3dff2918f}{av\+\_\+warn\+\_\+unused\+\_\+result}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavf__encoding_ga18b7b10bb5b94c4842de18166bc677cb}{avformat\+\_\+write\+\_\+header}} (\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{struct_a_v_dictionary}{A\+V\+Dictionary}} $\ast$$\ast$\mbox{\hyperlink{libswresample_2options_8c_a384ff94b5139f441c282c9b4c7b985e6}{options}})
\item 
\mbox{\hyperlink{attributes_8h_a93f17e0f0b53a66e7b5eceb3dff2918f}{av\+\_\+warn\+\_\+unused\+\_\+result}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavf__encoding_ga169cfa28508e22e138c5b99be8517ea4}{avformat\+\_\+init\+\_\+output}} (\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{struct_a_v_dictionary}{A\+V\+Dictionary}} $\ast$$\ast$\mbox{\hyperlink{libswresample_2options_8c_a384ff94b5139f441c282c9b4c7b985e6}{options}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36}{av\+\_\+write\+\_\+frame}} (\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{struct_a_v_packet}{A\+V\+Packet}} $\ast$\mbox{\hyperlink{demuxing__decoding_8c_a3d4c6562f0b27cf0cacbbea5c038c090}{pkt}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1}{av\+\_\+interleaved\+\_\+write\+\_\+frame}} (\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{struct_a_v_packet}{A\+V\+Packet}} $\ast$\mbox{\hyperlink{demuxing__decoding_8c_a3d4c6562f0b27cf0cacbbea5c038c090}{pkt}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavf__encoding_gaab766dccdff1bf323a2fc604e723b441}{av\+\_\+write\+\_\+uncoded\+\_\+frame}} (\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} stream\+\_\+index, \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$\mbox{\hyperlink{cbs__vp9__syntax__template_8c_a78a801b08f3801b9059f0450b834984e}{frame}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavf__encoding_gafe9916c601bba6827d6f9271a61260e4}{av\+\_\+interleaved\+\_\+write\+\_\+uncoded\+\_\+frame}} (\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} stream\+\_\+index, \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$\mbox{\hyperlink{cbs__vp9__syntax__template_8c_a78a801b08f3801b9059f0450b834984e}{frame}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavf__encoding_ga5f6bebdc8c234a5ad9740de89acb15e6}{av\+\_\+write\+\_\+uncoded\+\_\+frame\+\_\+query}} (\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} stream\+\_\+index)
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavf__encoding_ga7f14007e7dc8f481f054b21614dfec13}{av\+\_\+write\+\_\+trailer}} (\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}})
\item 
\mbox{\hyperlink{avformat_8h_aa5496b84535113646e96c8cf3b624aaf}{ff\+\_\+const59}} \mbox{\hyperlink{struct_a_v_output_format}{A\+V\+Output\+Format}} $\ast$ \mbox{\hyperlink{group__lavf__encoding_ga2020642d84f919764eed55848c9e69da}{av\+\_\+guess\+\_\+format}} (const char $\ast$short\+\_\+name, const char $\ast$filename, const char $\ast$mime\+\_\+type)
\item 
enum \mbox{\hyperlink{group__lavc__core_gaadca229ad2c20e060a14fec08a5cc7ce}{A\+V\+Codec\+ID}} \mbox{\hyperlink{group__lavf__encoding_gab17c140709d6bad4ec0f7b9b89b165ec}{av\+\_\+guess\+\_\+codec}} (\mbox{\hyperlink{avformat_8h_aa5496b84535113646e96c8cf3b624aaf}{ff\+\_\+const59}} \mbox{\hyperlink{struct_a_v_output_format}{A\+V\+Output\+Format}} $\ast$fmt, const char $\ast$short\+\_\+name, const char $\ast$filename, const char $\ast$mime\+\_\+type, enum \mbox{\hyperlink{group__lavu__misc_ga9a84bba4713dfced21a1a56163be1f48}{A\+V\+Media\+Type}} \mbox{\hyperlink{hwdevice_8c_ae4165b400ecd5a84616b429f6516512b}{type}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavf__encoding_ga661ee0b2f3dbcaaef5d68f2f5d75e2d4}{av\+\_\+get\+\_\+output\+\_\+timestamp}} (struct \mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} stream, int64\+\_\+t $\ast$dts, int64\+\_\+t $\ast$wall)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Muxers take encoded data in the form of \mbox{\hyperlink{struct_a_v_packet}{A\+V\+Packets}} and write it into files or other output bytestreams in the specified container format.

The main A\+PI functions for muxing are \mbox{\hyperlink{group__lavf__encoding_ga18b7b10bb5b94c4842de18166bc677cb}{avformat\+\_\+write\+\_\+header()}} for writing the file header, \mbox{\hyperlink{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36}{av\+\_\+write\+\_\+frame()}} / \mbox{\hyperlink{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1}{av\+\_\+interleaved\+\_\+write\+\_\+frame()}} for writing the packets and \mbox{\hyperlink{group__lavf__encoding_ga7f14007e7dc8f481f054b21614dfec13}{av\+\_\+write\+\_\+trailer()}} for finalizing the file.

At the beginning of the muxing process, the caller must first call \mbox{\hyperlink{group__lavf__core_gac7a91abf2f59648d995894711f070f62}{avformat\+\_\+alloc\+\_\+context()}} to create a muxing context. The caller then sets up the muxer by filling the various fields in this context\+:


\begin{DoxyItemize}
\item The \mbox{\hyperlink{struct_a_v_format_context_a7ea46e61c666f21e7e770dc14e7e36e5}{oformat}} field must be set to select the muxer that will be used.
\item Unless the format is of the A\+V\+F\+M\+T\+\_\+\+N\+O\+F\+I\+LE type, the \mbox{\hyperlink{struct_a_v_format_context_a1e7324262b6b78522e52064daaa7bc87}{pb}} field must be set to an opened IO context, either returned from \mbox{\hyperlink{avio_8h_ade8a63980569494c99593ebf0d1e891b}{avio\+\_\+open2()}} or a custom one.
\item Unless the format is of the A\+V\+F\+M\+T\+\_\+\+N\+O\+S\+T\+R\+E\+A\+MS type, at least one stream must be created with the \mbox{\hyperlink{group__lavf__core_gadcb0fd3e507d9b58fe78f61f8ad39827}{avformat\+\_\+new\+\_\+stream()}} function. The caller should fill the \mbox{\hyperlink{struct_a_v_stream_a12826d21779289356722971d362c583c}{stream codec parameters}} information, such as the codec \mbox{\hyperlink{struct_a_v_codec_parameters_a58369c3a8a986935b572df5aa6361ce2}{type}}, \mbox{\hyperlink{struct_a_v_codec_parameters_a9f76f2475ef24ff4c9771dd53072d040}{id}} and other parameters (e.\+g. width / height, the pixel or sample format, etc.) as known. The \mbox{\hyperlink{struct_a_v_stream_a9db755451f14e2bf590d4b85d82b32e6}{stream timebase}} should be set to the timebase that the caller desires to use for this stream (note that the timebase actually used by the muxer can be different, as will be described later).
\item It is advised to manually initialize only the relevant fields in \mbox{\hyperlink{struct_a_v_codec_parameters}{A\+V\+Codec\+Parameters}}, rather than using \mbox{\hyperlink{codec__par_8h_a6d02e640ccc12c783841ce51d09b9fa7}{avcodec\+\_\+parameters\+\_\+copy()}} during remuxing\+: there is no guarantee that the codec context values remain valid for both input and output format contexts.
\item The caller may fill in additional information, such as \mbox{\hyperlink{struct_a_v_format_context_a3019a56080ed2e3297ff25bc2ff88adf}{global}} or \mbox{\hyperlink{struct_a_v_stream_a50d250a128a3da9ce3d135e84213fb82}{per-\/stream}} metadata, \mbox{\hyperlink{struct_a_v_format_context_ac17d5fc2dcdb00806cc83b02d9f940f3}{chapters}}, \mbox{\hyperlink{struct_a_v_format_context_a4c2c5a4c758966349ff513e95154d062}{programs}}, etc. as described in the \mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} documentation. Whether such information will actually be stored in the output depends on what the container format and the muxer support.
\end{DoxyItemize}

When the muxing context is fully set up, the caller must call \mbox{\hyperlink{group__lavf__encoding_ga18b7b10bb5b94c4842de18166bc677cb}{avformat\+\_\+write\+\_\+header()}} to initialize the muxer internals and write the file header. Whether anything actually is written to the IO context at this step depends on the muxer, but this function must always be called. Any muxer private options must be passed in the options parameter to this function.

The data is then sent to the muxer by repeatedly calling \mbox{\hyperlink{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36}{av\+\_\+write\+\_\+frame()}} or \mbox{\hyperlink{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1}{av\+\_\+interleaved\+\_\+write\+\_\+frame()}} (consult those functions\textquotesingle{} documentation for discussion on the difference between them; only one of them may be used with a single muxing context, they should not be mixed). Do note that the timing information on the packets sent to the muxer must be in the corresponding \mbox{\hyperlink{struct_a_v_stream}{A\+V\+Stream}}\textquotesingle{}s timebase. That timebase is set by the muxer (in the \mbox{\hyperlink{group__lavf__encoding_ga18b7b10bb5b94c4842de18166bc677cb}{avformat\+\_\+write\+\_\+header()}} step) and may be different from the timebase requested by the caller.

Once all the data has been written, the caller must call \mbox{\hyperlink{group__lavf__encoding_ga7f14007e7dc8f481f054b21614dfec13}{av\+\_\+write\+\_\+trailer()}} to flush any buffered packets and finalize the output file, then close the IO context (if any) and finally free the muxing context with \mbox{\hyperlink{group__lavf__core_gac2990b13b68e831a408fce8e1d0d6445}{avformat\+\_\+free\+\_\+context()}}. 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{group__lavf__encoding_ga5268e4fbbb73b5ed1e4083f44f565ffd}\label{group__lavf__encoding_ga5268e4fbbb73b5ed1e4083f44f565ffd}} 
\index{Muxing@{Muxing}!AVSTREAM\_INIT\_IN\_INIT\_OUTPUT@{AVSTREAM\_INIT\_IN\_INIT\_OUTPUT}}
\index{AVSTREAM\_INIT\_IN\_INIT\_OUTPUT@{AVSTREAM\_INIT\_IN\_INIT\_OUTPUT}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{AVSTREAM\_INIT\_IN\_INIT\_OUTPUT}{AVSTREAM\_INIT\_IN\_INIT\_OUTPUT}}
{\footnotesize\ttfamily \#define A\+V\+S\+T\+R\+E\+A\+M\+\_\+\+I\+N\+I\+T\+\_\+\+I\+N\+\_\+\+I\+N\+I\+T\+\_\+\+O\+U\+T\+P\+UT~1}



stream parameters initialized in avformat\+\_\+init\+\_\+output 



Definition at line 2402 of file avformat.\+h.

\mbox{\Hypertarget{group__lavf__encoding_ga5396ff79e3c1ec7220765499f2efc74d}\label{group__lavf__encoding_ga5396ff79e3c1ec7220765499f2efc74d}} 
\index{Muxing@{Muxing}!AVSTREAM\_INIT\_IN\_WRITE\_HEADER@{AVSTREAM\_INIT\_IN\_WRITE\_HEADER}}
\index{AVSTREAM\_INIT\_IN\_WRITE\_HEADER@{AVSTREAM\_INIT\_IN\_WRITE\_HEADER}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{AVSTREAM\_INIT\_IN\_WRITE\_HEADER}{AVSTREAM\_INIT\_IN\_WRITE\_HEADER}}
{\footnotesize\ttfamily \#define A\+V\+S\+T\+R\+E\+A\+M\+\_\+\+I\+N\+I\+T\+\_\+\+I\+N\+\_\+\+W\+R\+I\+T\+E\+\_\+\+H\+E\+A\+D\+ER~0}



stream parameters initialized in avformat\+\_\+write\+\_\+header 



Definition at line 2401 of file avformat.\+h.



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{group__lavf__encoding_gaf31ccdb28224d5bc7e23e308e0dadc0b}\label{group__lavf__encoding_gaf31ccdb28224d5bc7e23e308e0dadc0b}} 
\index{Muxing@{Muxing}!AVOutputFormat@{AVOutputFormat}}
\index{AVOutputFormat@{AVOutputFormat}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{AVOutputFormat}{AVOutputFormat}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{struct_a_v_output_format}{A\+V\+Output\+Format}} \mbox{\hyperlink{struct_a_v_output_format}{A\+V\+Output\+Format}}}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{group__lavf__encoding_ga661ee0b2f3dbcaaef5d68f2f5d75e2d4}\label{group__lavf__encoding_ga661ee0b2f3dbcaaef5d68f2f5d75e2d4}} 
\index{Muxing@{Muxing}!av\_get\_output\_timestamp@{av\_get\_output\_timestamp}}
\index{av\_get\_output\_timestamp@{av\_get\_output\_timestamp}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{av\_get\_output\_timestamp()}{av\_get\_output\_timestamp()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+get\+\_\+output\+\_\+timestamp (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{stream,  }\item[{int64\+\_\+t $\ast$}]{dts,  }\item[{int64\+\_\+t $\ast$}]{wall }\end{DoxyParamCaption})}

Get timing information for the data currently output. The exact meaning of \char`\"{}currently output\char`\"{} depends on the format. It is mostly relevant for devices that have an internal buffer and/or work in real time. 
\begin{DoxyParams}[1]{Parameters}
 & {\em s} & media file handle \\
\hline
 & {\em stream} & stream in the media file \\
\hline
\mbox{\texttt{ out}}  & {\em dts} & D\+TS of the last packet output for the stream, in stream time\+\_\+base units \\
\hline
\mbox{\texttt{ out}}  & {\em wall} & absolute time when that packet whas output, in microsecond \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if OK, \mbox{\hyperlink{group__lavu__error_gae4bb6f165973d09584e0ec0f335f69ca}{A\+V\+E\+R\+R\+O\+R(\+E\+N\+O\+S\+Y\+S)}} if the format does not support it Note\+: some formats or devices may not allow to measure dts and wall atomically. 
\end{DoxyReturn}


Definition at line 1296 of file mux.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{group__lavf__encoding_ga661ee0b2f3dbcaaef5d68f2f5d75e2d4_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_gab17c140709d6bad4ec0f7b9b89b165ec}\label{group__lavf__encoding_gab17c140709d6bad4ec0f7b9b89b165ec}} 
\index{Muxing@{Muxing}!av\_guess\_codec@{av\_guess\_codec}}
\index{av\_guess\_codec@{av\_guess\_codec}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{av\_guess\_codec()}{av\_guess\_codec()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{group__lavc__core_gaadca229ad2c20e060a14fec08a5cc7ce}{A\+V\+Codec\+ID}} av\+\_\+guess\+\_\+codec (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{avformat_8h_aa5496b84535113646e96c8cf3b624aaf}{ff\+\_\+const59}} \mbox{\hyperlink{struct_a_v_output_format}{A\+V\+Output\+Format}} $\ast$}]{fmt,  }\item[{const char $\ast$}]{short\+\_\+name,  }\item[{const char $\ast$}]{filename,  }\item[{const char $\ast$}]{mime\+\_\+type,  }\item[{enum \mbox{\hyperlink{group__lavu__misc_ga9a84bba4713dfced21a1a56163be1f48}{A\+V\+Media\+Type}}}]{type }\end{DoxyParamCaption})}

Guess the codec ID based upon muxer and filename. 

Definition at line 51 of file format.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_gab17c140709d6bad4ec0f7b9b89b165ec_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_ga2020642d84f919764eed55848c9e69da}\label{group__lavf__encoding_ga2020642d84f919764eed55848c9e69da}} 
\index{Muxing@{Muxing}!av\_guess\_format@{av\_guess\_format}}
\index{av\_guess\_format@{av\_guess\_format}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{av\_guess\_format()}{av\_guess\_format()}}
{\footnotesize\ttfamily \mbox{\hyperlink{avformat_8h_aa5496b84535113646e96c8cf3b624aaf}{ff\+\_\+const59}} \mbox{\hyperlink{struct_a_v_output_format}{A\+V\+Output\+Format}}$\ast$ av\+\_\+guess\+\_\+format (\begin{DoxyParamCaption}\item[{const char $\ast$}]{short\+\_\+name,  }\item[{const char $\ast$}]{filename,  }\item[{const char $\ast$}]{mime\+\_\+type }\end{DoxyParamCaption})}

Return the output format in the list of registered output formats which best matches the provided parameters, or return N\+U\+LL if there is no match.


\begin{DoxyParams}{Parameters}
{\em short\+\_\+name} & if non-\/\+N\+U\+LL checks if short\+\_\+name matches with the names of the registered formats \\
\hline
{\em filename} & if non-\/\+N\+U\+LL checks if filename terminates with the extensions of the registered formats \\
\hline
{\em mime\+\_\+type} & if non-\/\+N\+U\+LL checks if mime\+\_\+type matches with the M\+I\+ME type of the registered formats \\
\hline
\end{DoxyParams}


Definition at line 51 of file format.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_ga2020642d84f919764eed55848c9e69da_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_ga2020642d84f919764eed55848c9e69da_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1}\label{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1}} 
\index{Muxing@{Muxing}!av\_interleaved\_write\_frame@{av\_interleaved\_write\_frame}}
\index{av\_interleaved\_write\_frame@{av\_interleaved\_write\_frame}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{av\_interleaved\_write\_frame()}{av\_interleaved\_write\_frame()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+interleaved\+\_\+write\+\_\+frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{struct_a_v_packet}{A\+V\+Packet}} $\ast$}]{pkt }\end{DoxyParamCaption})}

Write a packet to an output media file ensuring correct interleaving.

This function will buffer the packets internally as needed to make sure the packets in the output file are properly interleaved in the order of increasing dts. Callers doing their own interleaving should call \mbox{\hyperlink{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36}{av\+\_\+write\+\_\+frame()}} instead of this function.

Using this function instead of \mbox{\hyperlink{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36}{av\+\_\+write\+\_\+frame()}} can give muxers advance knowledge of future packets, improving e.\+g. the behaviour of the mp4 muxer for V\+FR content in fragmenting mode.


\begin{DoxyParams}{Parameters}
{\em s} & media file handle \\
\hline
{\em pkt} & The packet containing the data to be written. ~\newline
 If the packet is reference-\/counted, this function will take ownership of this reference and unreference it later when it sees fit. The caller must not access the data through this reference after this function returns. If the packet is not reference-\/counted, libavformat will make a copy. ~\newline
 This parameter can be N\+U\+LL (at any time, not just at the end), to flush the interleaving queues. ~\newline
 Packet\textquotesingle{}s \mbox{\hyperlink{struct_a_v_packet_a0d1cb9b5a32b00fb6edc81ea3aae2a49}{stream\+\_\+index}} field must be set to the index of the corresponding stream in \mbox{\hyperlink{struct_a_v_format_context_acfefb6b6cf21e87a0dcbd1a547ba2348}{s-\/$>$streams}}. ~\newline
 The timestamps (\mbox{\hyperlink{struct_a_v_packet_a73bde0a37f3b1efc839f11295bfbf42a}{pts}}, \mbox{\hyperlink{struct_a_v_packet_a85dbbd306b44b02390cd91c45e6a0f76}{dts}}) must be set to correct values in the stream\textquotesingle{}s timebase (unless the output format is flagged with the A\+V\+F\+M\+T\+\_\+\+N\+O\+T\+I\+M\+E\+S\+T\+A\+M\+PS flag, then they can be set to A\+V\+\_\+\+N\+O\+P\+T\+S\+\_\+\+V\+A\+L\+UE). The dts for subsequent packets in one stream must be strictly increasing (unless the output format is flagged with the A\+V\+F\+M\+T\+\_\+\+T\+S\+\_\+\+N\+O\+N\+S\+T\+R\+I\+CT, then they merely have to be nondecreasing). \mbox{\hyperlink{struct_a_v_packet_a622e758be29fd500aed0ffdc069550f7}{duration}}) should also be set if known.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, a negative A\+V\+E\+R\+R\+OR on error. Libavformat will always take care of freeing the packet, even if this function fails.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36}{av\+\_\+write\+\_\+frame()}}, \mbox{\hyperlink{struct_a_v_format_context_a00edb6b7a31f8dabfa668334ca1f92d7}{A\+V\+Format\+Context.\+max\+\_\+interleave\+\_\+delta}} 
\end{DoxySeeAlso}


Definition at line 1236 of file mux.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_gafe9916c601bba6827d6f9271a61260e4}\label{group__lavf__encoding_gafe9916c601bba6827d6f9271a61260e4}} 
\index{Muxing@{Muxing}!av\_interleaved\_write\_uncoded\_frame@{av\_interleaved\_write\_uncoded\_frame}}
\index{av\_interleaved\_write\_uncoded\_frame@{av\_interleaved\_write\_uncoded\_frame}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{av\_interleaved\_write\_uncoded\_frame()}{av\_interleaved\_write\_uncoded\_frame()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+interleaved\+\_\+write\+\_\+uncoded\+\_\+frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{stream\+\_\+index,  }\item[{\mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$}]{frame }\end{DoxyParamCaption})}

Write an uncoded frame to an output media file.

If the muxer supports it, this function makes it possible to write an \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} structure directly, without encoding it into a packet. It is mostly useful for devices and similar special muxers that use raw video or P\+CM data and will not serialize it into a byte stream.

To test whether it is possible to use it with a given muxer and stream, use \mbox{\hyperlink{group__lavf__encoding_ga5f6bebdc8c234a5ad9740de89acb15e6}{av\+\_\+write\+\_\+uncoded\+\_\+frame\+\_\+query()}}.

The caller gives up ownership of the frame and must not access it afterwards.

\begin{DoxyReturn}{Returns}
$>$=0 for success, a negative code on error 
\end{DoxyReturn}


Definition at line 1382 of file mux.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_gafe9916c601bba6827d6f9271a61260e4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{group__lavf__encoding_gafe9916c601bba6827d6f9271a61260e4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36}\label{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36}} 
\index{Muxing@{Muxing}!av\_write\_frame@{av\_write\_frame}}
\index{av\_write\_frame@{av\_write\_frame}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{av\_write\_frame()}{av\_write\_frame()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+write\+\_\+frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{struct_a_v_packet}{A\+V\+Packet}} $\ast$}]{pkt }\end{DoxyParamCaption})}

Write a packet to an output media file.

This function passes the packet directly to the muxer, without any buffering or reordering. The caller is responsible for correctly interleaving the packets if the format requires it. Callers that want libavformat to handle the interleaving should call \mbox{\hyperlink{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1}{av\+\_\+interleaved\+\_\+write\+\_\+frame()}} instead of this function.


\begin{DoxyParams}{Parameters}
{\em s} & media file handle \\
\hline
{\em pkt} & The packet containing the data to be written. Note that unlike \mbox{\hyperlink{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1}{av\+\_\+interleaved\+\_\+write\+\_\+frame()}}, this function does not take ownership of the packet passed to it (though some muxers may make an internal reference to the input packet). ~\newline
 This parameter can be N\+U\+LL (at any time, not just at the end), in order to immediately flush data buffered within the muxer, for muxers that buffer up data internally before writing it to the output. ~\newline
 Packet\textquotesingle{}s \mbox{\hyperlink{struct_a_v_packet_a0d1cb9b5a32b00fb6edc81ea3aae2a49}{stream\+\_\+index}} field must be set to the index of the corresponding stream in \mbox{\hyperlink{struct_a_v_format_context_acfefb6b6cf21e87a0dcbd1a547ba2348}{s-\/$>$streams}}. ~\newline
 The timestamps (\mbox{\hyperlink{struct_a_v_packet_a73bde0a37f3b1efc839f11295bfbf42a}{pts}}, \mbox{\hyperlink{struct_a_v_packet_a85dbbd306b44b02390cd91c45e6a0f76}{dts}}) must be set to correct values in the stream\textquotesingle{}s timebase (unless the output format is flagged with the A\+V\+F\+M\+T\+\_\+\+N\+O\+T\+I\+M\+E\+S\+T\+A\+M\+PS flag, then they can be set to A\+V\+\_\+\+N\+O\+P\+T\+S\+\_\+\+V\+A\+L\+UE). The dts for subsequent packets passed to this function must be strictly increasing when compared in their respective timebases (unless the output format is flagged with the A\+V\+F\+M\+T\+\_\+\+T\+S\+\_\+\+N\+O\+N\+S\+T\+R\+I\+CT, then they merely have to be nondecreasing). \mbox{\hyperlink{struct_a_v_packet_a622e758be29fd500aed0ffdc069550f7}{duration}}) should also be set if known. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$<$ 0 on error, = 0 if OK, 1 if flushed and there is no more data to flush
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__lavf__encoding_ga37352ed2c63493c38219d935e71db6c1}{av\+\_\+interleaved\+\_\+write\+\_\+frame()}} 
\end{DoxySeeAlso}


Definition at line 1190 of file mux.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_gaa85cc1774f18f306cd20a40fc50d0b36_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_ga7f14007e7dc8f481f054b21614dfec13}\label{group__lavf__encoding_ga7f14007e7dc8f481f054b21614dfec13}} 
\index{Muxing@{Muxing}!av\_write\_trailer@{av\_write\_trailer}}
\index{av\_write\_trailer@{av\_write\_trailer}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{av\_write\_trailer()}{av\_write\_trailer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+write\+\_\+trailer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$}]{s }\end{DoxyParamCaption})}

Write the stream trailer to an output media file and free the file private data.

May only be called after a successful call to avformat\+\_\+write\+\_\+header.


\begin{DoxyParams}{Parameters}
{\em s} & media file handle \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if OK, A\+V\+E\+R\+R\+O\+R\+\_\+xxx on error 
\end{DoxyReturn}


Definition at line 1251 of file mux.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_ga7f14007e7dc8f481f054b21614dfec13_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{group__lavf__encoding_ga7f14007e7dc8f481f054b21614dfec13_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_gaab766dccdff1bf323a2fc604e723b441}\label{group__lavf__encoding_gaab766dccdff1bf323a2fc604e723b441}} 
\index{Muxing@{Muxing}!av\_write\_uncoded\_frame@{av\_write\_uncoded\_frame}}
\index{av\_write\_uncoded\_frame@{av\_write\_uncoded\_frame}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{av\_write\_uncoded\_frame()}{av\_write\_uncoded\_frame()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+write\+\_\+uncoded\+\_\+frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{stream\+\_\+index,  }\item[{\mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$}]{frame }\end{DoxyParamCaption})}

Write an uncoded frame to an output media file.

The frame must be correctly interleaved according to the container specification; if not, \mbox{\hyperlink{group__lavf__encoding_gafe9916c601bba6827d6f9271a61260e4}{av\+\_\+interleaved\+\_\+write\+\_\+uncoded\+\_\+frame()}} must be used.

See \mbox{\hyperlink{group__lavf__encoding_gafe9916c601bba6827d6f9271a61260e4}{av\+\_\+interleaved\+\_\+write\+\_\+uncoded\+\_\+frame()}} for details. 

Definition at line 1376 of file mux.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_gaab766dccdff1bf323a2fc604e723b441_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_ga5f6bebdc8c234a5ad9740de89acb15e6}\label{group__lavf__encoding_ga5f6bebdc8c234a5ad9740de89acb15e6}} 
\index{Muxing@{Muxing}!av\_write\_uncoded\_frame\_query@{av\_write\_uncoded\_frame\_query}}
\index{av\_write\_uncoded\_frame\_query@{av\_write\_uncoded\_frame\_query}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{av\_write\_uncoded\_frame\_query()}{av\_write\_uncoded\_frame\_query()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+write\+\_\+uncoded\+\_\+frame\+\_\+query (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{stream\+\_\+index }\end{DoxyParamCaption})}

Test whether a muxer supports uncoded frame.

\begin{DoxyReturn}{Returns}
$>$=0 if an uncoded frame can be written to that muxer and stream, $<$0 if not 
\end{DoxyReturn}


Definition at line 1388 of file mux.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{group__lavf__encoding_ga5f6bebdc8c234a5ad9740de89acb15e6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{group__lavf__encoding_ga5f6bebdc8c234a5ad9740de89acb15e6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_ga169cfa28508e22e138c5b99be8517ea4}\label{group__lavf__encoding_ga169cfa28508e22e138c5b99be8517ea4}} 
\index{Muxing@{Muxing}!avformat\_init\_output@{avformat\_init\_output}}
\index{avformat\_init\_output@{avformat\_init\_output}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{avformat\_init\_output()}{avformat\_init\_output()}}
{\footnotesize\ttfamily \mbox{\hyperlink{attributes_8h_a93f17e0f0b53a66e7b5eceb3dff2918f}{av\+\_\+warn\+\_\+unused\+\_\+result}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} avformat\+\_\+init\+\_\+output (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{struct_a_v_dictionary}{A\+V\+Dictionary}} $\ast$$\ast$}]{options }\end{DoxyParamCaption})}

Allocate the stream private data and initialize the codec, but do not write the header. May optionally be used before avformat\+\_\+write\+\_\+header to initialize stream parameters before actually writing the header. If using this function, do not pass the same options to avformat\+\_\+write\+\_\+header.


\begin{DoxyParams}{Parameters}
{\em s} & Media file handle, must be allocated with \mbox{\hyperlink{group__lavf__core_gac7a91abf2f59648d995894711f070f62}{avformat\+\_\+alloc\+\_\+context()}}. Its oformat field must be set to the desired output format; Its pb field must be set to an already opened \mbox{\hyperlink{struct_a_v_i_o_context}{A\+V\+I\+O\+Context}}. \\
\hline
{\em options} & An \mbox{\hyperlink{struct_a_v_dictionary}{A\+V\+Dictionary}} filled with \mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} and muxer-\/private options. On return this parameter will be destroyed and replaced with a dict containing options that were not found. May be N\+U\+LL.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+V\+S\+T\+R\+E\+A\+M\+\_\+\+I\+N\+I\+T\+\_\+\+I\+N\+\_\+\+W\+R\+I\+T\+E\+\_\+\+H\+E\+A\+D\+ER on success if the codec requires avformat\+\_\+write\+\_\+header to fully initialize, A\+V\+S\+T\+R\+E\+A\+M\+\_\+\+I\+N\+I\+T\+\_\+\+I\+N\+\_\+\+I\+N\+I\+T\+\_\+\+O\+U\+T\+P\+UT on success if the codec has been fully initialized, negative A\+V\+E\+R\+R\+OR on failure.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__avoptions_gae31ae7fb20113b00108d0ecf53f25664}{av\+\_\+opt\+\_\+find}}, \mbox{\hyperlink{group__lavu__dict_ga8d9c2de72b310cef8e6a28c9cd3acbbe}{av\+\_\+dict\+\_\+set}}, \mbox{\hyperlink{aviobuf_8c_ab1b99c5b70aa59f15ab7cd4cbb40381e}{avio\+\_\+open}}, \mbox{\hyperlink{allformats_8c_a8fe016b9e8df67a5ffde855f2f891d71}{av\+\_\+oformat\+\_\+next}}, \mbox{\hyperlink{group__lavf__encoding_ga18b7b10bb5b94c4842de18166bc677cb}{avformat\+\_\+write\+\_\+header}}. 
\end{DoxySeeAlso}


Definition at line 485 of file mux.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_ga169cfa28508e22e138c5b99be8517ea4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_ga169cfa28508e22e138c5b99be8517ea4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavf__encoding_ga18b7b10bb5b94c4842de18166bc677cb}\label{group__lavf__encoding_ga18b7b10bb5b94c4842de18166bc677cb}} 
\index{Muxing@{Muxing}!avformat\_write\_header@{avformat\_write\_header}}
\index{avformat\_write\_header@{avformat\_write\_header}!Muxing@{Muxing}}
\doxysubsubsection{\texorpdfstring{avformat\_write\_header()}{avformat\_write\_header()}}
{\footnotesize\ttfamily \mbox{\hyperlink{attributes_8h_a93f17e0f0b53a66e7b5eceb3dff2918f}{av\+\_\+warn\+\_\+unused\+\_\+result}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} avformat\+\_\+write\+\_\+header (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{struct_a_v_dictionary}{A\+V\+Dictionary}} $\ast$$\ast$}]{options }\end{DoxyParamCaption})}

Allocate the stream private data and write the stream header to an output media file.


\begin{DoxyParams}{Parameters}
{\em s} & Media file handle, must be allocated with \mbox{\hyperlink{group__lavf__core_gac7a91abf2f59648d995894711f070f62}{avformat\+\_\+alloc\+\_\+context()}}. Its oformat field must be set to the desired output format; Its pb field must be set to an already opened \mbox{\hyperlink{struct_a_v_i_o_context}{A\+V\+I\+O\+Context}}. \\
\hline
{\em options} & An \mbox{\hyperlink{struct_a_v_dictionary}{A\+V\+Dictionary}} filled with \mbox{\hyperlink{struct_a_v_format_context}{A\+V\+Format\+Context}} and muxer-\/private options. On return this parameter will be destroyed and replaced with a dict containing options that were not found. May be N\+U\+LL.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A\+V\+S\+T\+R\+E\+A\+M\+\_\+\+I\+N\+I\+T\+\_\+\+I\+N\+\_\+\+W\+R\+I\+T\+E\+\_\+\+H\+E\+A\+D\+ER on success if the codec had not already been fully initialized in avformat\+\_\+init, A\+V\+S\+T\+R\+E\+A\+M\+\_\+\+I\+N\+I\+T\+\_\+\+I\+N\+\_\+\+I\+N\+I\+T\+\_\+\+O\+U\+T\+P\+UT on success if the codec had already been fully initialized in avformat\+\_\+init, negative A\+V\+E\+R\+R\+OR on failure.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__avoptions_gae31ae7fb20113b00108d0ecf53f25664}{av\+\_\+opt\+\_\+find}}, \mbox{\hyperlink{group__lavu__dict_ga8d9c2de72b310cef8e6a28c9cd3acbbe}{av\+\_\+dict\+\_\+set}}, \mbox{\hyperlink{aviobuf_8c_ab1b99c5b70aa59f15ab7cd4cbb40381e}{avio\+\_\+open}}, \mbox{\hyperlink{allformats_8c_a8fe016b9e8df67a5ffde855f2f891d71}{av\+\_\+oformat\+\_\+next}}, \mbox{\hyperlink{group__lavf__encoding_ga169cfa28508e22e138c5b99be8517ea4}{avformat\+\_\+init\+\_\+output}}. 
\end{DoxySeeAlso}


Definition at line 505 of file mux.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_ga18b7b10bb5b94c4842de18166bc677cb_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavf__encoding_ga18b7b10bb5b94c4842de18166bc677cb_icgraph}
\end{center}
\end{figure}
