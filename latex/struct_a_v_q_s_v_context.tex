\hypertarget{struct_a_v_q_s_v_context}{}\doxysection{A\+V\+Q\+S\+V\+Context Struct Reference}
\label{struct_a_v_q_s_v_context}\index{AVQSVContext@{AVQSVContext}}


{\ttfamily \#include $<$qsv.\+h$>$}



Collaboration diagram for A\+V\+Q\+S\+V\+Context\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=221pt]{struct_a_v_q_s_v_context__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
mfx\+Session \mbox{\hyperlink{struct_a_v_q_s_v_context_aa88e55219891596ee8205ae78cbca275}{session}}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{struct_a_v_q_s_v_context_a6190ff613bf400fa6d7e5c78bacb4c00}{iopattern}}
\item 
mfx\+Ext\+Buffer $\ast$$\ast$ \mbox{\hyperlink{struct_a_v_q_s_v_context_a3c92105313bccdc0b7f63170ed9f992f}{ext\+\_\+buffers}}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{struct_a_v_q_s_v_context_a19ca280b4a280676abbb5a018f619282}{nb\+\_\+ext\+\_\+buffers}}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{struct_a_v_q_s_v_context_a00b4f91c36429e719743c5a080856e33}{opaque\+\_\+alloc}}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{struct_a_v_q_s_v_context_a31ff5ab3cbbde801fdc264a6660e55e9}{nb\+\_\+opaque\+\_\+surfaces}}
\item 
\mbox{\hyperlink{struct_a_v_buffer_ref}{A\+V\+Buffer\+Ref}} $\ast$ \mbox{\hyperlink{struct_a_v_q_s_v_context_ae9a2a1e951ebdfc2640ea33077f0c67e}{opaque\+\_\+surfaces}}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{struct_a_v_q_s_v_context_a06f2493cfd72f41162e788e5247f5b90}{opaque\+\_\+alloc\+\_\+type}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This struct is used for communicating Q\+SV parameters between libavcodec and the caller. It is managed by the caller and must be assigned to \mbox{\hyperlink{struct_a_v_codec_context_ab222f7d747dfdceff0a76999e09648c0}{A\+V\+Codec\+Context.\+hwaccel\+\_\+context}}.
\begin{DoxyItemize}
\item decoding\+: hwaccel\+\_\+context must be set on return from the \mbox{\hyperlink{doc_2examples_2qsvdec_8c_afe1023087c26d2d410c9cd7d491c8660}{get\+\_\+format()}} callback
\item encoding\+: hwaccel\+\_\+context must be set before \mbox{\hyperlink{group__lavc__core_ga11f785a188d7d9df71621001465b0f1d}{avcodec\+\_\+open2()}} 
\end{DoxyItemize}

Definition at line 36 of file qsv.\+h.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{struct_a_v_q_s_v_context_a3c92105313bccdc0b7f63170ed9f992f}\label{struct_a_v_q_s_v_context_a3c92105313bccdc0b7f63170ed9f992f}} 
\index{AVQSVContext@{AVQSVContext}!ext\_buffers@{ext\_buffers}}
\index{ext\_buffers@{ext\_buffers}!AVQSVContext@{AVQSVContext}}
\doxysubsubsection{\texorpdfstring{ext\_buffers}{ext\_buffers}}
{\footnotesize\ttfamily mfx\+Ext\+Buffer$\ast$$\ast$ A\+V\+Q\+S\+V\+Context\+::ext\+\_\+buffers}

Extra buffers to pass to encoder or decoder initialization. 

Definition at line 51 of file qsv.\+h.

\mbox{\Hypertarget{struct_a_v_q_s_v_context_a6190ff613bf400fa6d7e5c78bacb4c00}\label{struct_a_v_q_s_v_context_a6190ff613bf400fa6d7e5c78bacb4c00}} 
\index{AVQSVContext@{AVQSVContext}!iopattern@{iopattern}}
\index{iopattern@{iopattern}!AVQSVContext@{AVQSVContext}}
\doxysubsubsection{\texorpdfstring{iopattern}{iopattern}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} A\+V\+Q\+S\+V\+Context\+::iopattern}

The IO pattern to use. 

Definition at line 46 of file qsv.\+h.

\mbox{\Hypertarget{struct_a_v_q_s_v_context_a19ca280b4a280676abbb5a018f619282}\label{struct_a_v_q_s_v_context_a19ca280b4a280676abbb5a018f619282}} 
\index{AVQSVContext@{AVQSVContext}!nb\_ext\_buffers@{nb\_ext\_buffers}}
\index{nb\_ext\_buffers@{nb\_ext\_buffers}!AVQSVContext@{AVQSVContext}}
\doxysubsubsection{\texorpdfstring{nb\_ext\_buffers}{nb\_ext\_buffers}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} A\+V\+Q\+S\+V\+Context\+::nb\+\_\+ext\+\_\+buffers}



Definition at line 52 of file qsv.\+h.

\mbox{\Hypertarget{struct_a_v_q_s_v_context_a31ff5ab3cbbde801fdc264a6660e55e9}\label{struct_a_v_q_s_v_context_a31ff5ab3cbbde801fdc264a6660e55e9}} 
\index{AVQSVContext@{AVQSVContext}!nb\_opaque\_surfaces@{nb\_opaque\_surfaces}}
\index{nb\_opaque\_surfaces@{nb\_opaque\_surfaces}!AVQSVContext@{AVQSVContext}}
\doxysubsubsection{\texorpdfstring{nb\_opaque\_surfaces}{nb\_opaque\_surfaces}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} A\+V\+Q\+S\+V\+Context\+::nb\+\_\+opaque\+\_\+surfaces}

Encoding only, and only if opaque\+\_\+alloc is set to non-\/zero. Before calling \mbox{\hyperlink{group__lavc__core_ga11f785a188d7d9df71621001465b0f1d}{avcodec\+\_\+open2()}}, the caller should set this field to the number of extra opaque surfaces to allocate beyond what is required by the encoder.

On return from \mbox{\hyperlink{group__lavc__core_ga11f785a188d7d9df71621001465b0f1d}{avcodec\+\_\+open2()}}, this field will be set by libavcodec to the total number of allocated opaque surfaces. 

Definition at line 76 of file qsv.\+h.

\mbox{\Hypertarget{struct_a_v_q_s_v_context_a00b4f91c36429e719743c5a080856e33}\label{struct_a_v_q_s_v_context_a00b4f91c36429e719743c5a080856e33}} 
\index{AVQSVContext@{AVQSVContext}!opaque\_alloc@{opaque\_alloc}}
\index{opaque\_alloc@{opaque\_alloc}!AVQSVContext@{AVQSVContext}}
\doxysubsubsection{\texorpdfstring{opaque\_alloc}{opaque\_alloc}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} A\+V\+Q\+S\+V\+Context\+::opaque\+\_\+alloc}

Encoding only. If this field is set to non-\/zero by the caller, libavcodec will create an mfx\+Ext\+Opaque\+Surface\+Alloc extended buffer and pass it to the encoder initialization. This only makes sense if iopattern is also set to M\+F\+X\+\_\+\+I\+O\+P\+A\+T\+T\+E\+R\+N\+\_\+\+I\+N\+\_\+\+O\+P\+A\+Q\+U\+E\+\_\+\+M\+E\+M\+O\+RY.

The number of allocated opaque surfaces will be the sum of the number required by the encoder and the user-\/provided value nb\+\_\+opaque\+\_\+surfaces. The array of the opaque surfaces will be exported to the caller through the opaque\+\_\+surfaces field. 

Definition at line 65 of file qsv.\+h.

\mbox{\Hypertarget{struct_a_v_q_s_v_context_a06f2493cfd72f41162e788e5247f5b90}\label{struct_a_v_q_s_v_context_a06f2493cfd72f41162e788e5247f5b90}} 
\index{AVQSVContext@{AVQSVContext}!opaque\_alloc\_type@{opaque\_alloc\_type}}
\index{opaque\_alloc\_type@{opaque\_alloc\_type}!AVQSVContext@{AVQSVContext}}
\doxysubsubsection{\texorpdfstring{opaque\_alloc\_type}{opaque\_alloc\_type}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} A\+V\+Q\+S\+V\+Context\+::opaque\+\_\+alloc\+\_\+type}

Encoding only, and only if opaque\+\_\+alloc is set to non-\/zero. On return from \mbox{\hyperlink{group__lavc__core_ga11f785a188d7d9df71621001465b0f1d}{avcodec\+\_\+open2()}}, this field will be set to the surface type used in the opaque allocation request. 

Definition at line 97 of file qsv.\+h.

\mbox{\Hypertarget{struct_a_v_q_s_v_context_ae9a2a1e951ebdfc2640ea33077f0c67e}\label{struct_a_v_q_s_v_context_ae9a2a1e951ebdfc2640ea33077f0c67e}} 
\index{AVQSVContext@{AVQSVContext}!opaque\_surfaces@{opaque\_surfaces}}
\index{opaque\_surfaces@{opaque\_surfaces}!AVQSVContext@{AVQSVContext}}
\doxysubsubsection{\texorpdfstring{opaque\_surfaces}{opaque\_surfaces}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_v_buffer_ref}{A\+V\+Buffer\+Ref}}$\ast$ A\+V\+Q\+S\+V\+Context\+::opaque\+\_\+surfaces}

Encoding only, and only if opaque\+\_\+alloc is set to non-\/zero. On return from \mbox{\hyperlink{group__lavc__core_ga11f785a188d7d9df71621001465b0f1d}{avcodec\+\_\+open2()}}, this field will be used by libavcodec to export the array of the allocated opaque surfaces to the caller, so they can be passed to other parts of the pipeline.

The buffer reference exported here is owned and managed by libavcodec, the callers should make their own reference with \mbox{\hyperlink{group__lavu__buffer_gaa40ce7d3ede946a89d03323bbd7268c1}{av\+\_\+buffer\+\_\+ref()}} and free it with \mbox{\hyperlink{group__lavu__buffer_ga135e9e929b5033bb8f68322497b2effc}{av\+\_\+buffer\+\_\+unref()}} when it is no longer needed.

The buffer data is an nb\+\_\+opaque\+\_\+surfaces-\/sized array of mfx\+Frame\+Surface1. 

Definition at line 90 of file qsv.\+h.

\mbox{\Hypertarget{struct_a_v_q_s_v_context_aa88e55219891596ee8205ae78cbca275}\label{struct_a_v_q_s_v_context_aa88e55219891596ee8205ae78cbca275}} 
\index{AVQSVContext@{AVQSVContext}!session@{session}}
\index{session@{session}!AVQSVContext@{AVQSVContext}}
\doxysubsubsection{\texorpdfstring{session}{session}}
{\footnotesize\ttfamily mfx\+Session A\+V\+Q\+S\+V\+Context\+::session}

If non-\/\+N\+U\+LL, the session to use for encoding or decoding. Otherwise, libavcodec will try to create an internal session. 

Definition at line 41 of file qsv.\+h.



The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/github/ffmpeg/libavcodec/\mbox{\hyperlink{qsv_8h}{qsv.\+h}}\end{DoxyCompactItemize}
