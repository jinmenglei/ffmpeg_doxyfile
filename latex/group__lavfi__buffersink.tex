\hypertarget{group__lavfi__buffersink}{}\doxysection{Buffer sink A\+PI}
\label{group__lavfi__buffersink}\index{Buffer sink API@{Buffer sink API}}
Collaboration diagram for Buffer sink A\+PI\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavfi__buffersink}
\end{center}
\end{figure}
\doxysubsection*{Modules}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__lavfi__buffersink__accessors}{Buffer sink accessors}}
\end{DoxyCompactItemize}
\doxysubsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \mbox{\hyperlink{buffersink_8h}{buffersink.\+h}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group__lavfi__buffersink_ga9453fc0e81d30237080b51575da0f0d8}{A\+V\+\_\+\+B\+U\+F\+F\+E\+R\+S\+I\+N\+K\+\_\+\+F\+L\+A\+G\+\_\+\+P\+E\+EK}}~1
\item 
\#define \mbox{\hyperlink{group__lavfi__buffersink_gade670e86ece8d740194c916fa1ea6cc0}{A\+V\+\_\+\+B\+U\+F\+F\+E\+R\+S\+I\+N\+K\+\_\+\+F\+L\+A\+G\+\_\+\+N\+O\+\_\+\+R\+E\+Q\+U\+E\+ST}}~2
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavfi__buffersink_ga71ae9c529c8da51681e12faa37d1a395}{av\+\_\+buffersink\+\_\+get\+\_\+frame\+\_\+flags}} (\mbox{\hyperlink{struct_a_v_filter_context}{A\+V\+Filter\+Context}} $\ast$\mbox{\hyperlink{tests_2movenc_8c_a93cc7296f13f507c1fd7abd0db36b898}{ctx}}, \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$\mbox{\hyperlink{cbs__vp9__syntax__template_8c_a78a801b08f3801b9059f0450b834984e}{frame}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{log_8c_ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}})
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{group__lavfi__buffersink_ga359d7d1e42c27ca14c07559d4e9adba7}{av\+\_\+buffersink\+\_\+set\+\_\+frame\+\_\+size}} (\mbox{\hyperlink{struct_a_v_filter_context}{A\+V\+Filter\+Context}} $\ast$\mbox{\hyperlink{tests_2movenc_8c_a93cc7296f13f507c1fd7abd0db36b898}{ctx}}, unsigned \mbox{\hyperlink{af__loudnorm_8c_a6e4a4270c808de1ad11dc4b85e36511d}{frame\+\_\+size}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa}{av\+\_\+buffersink\+\_\+get\+\_\+frame}} (\mbox{\hyperlink{struct_a_v_filter_context}{A\+V\+Filter\+Context}} $\ast$\mbox{\hyperlink{tests_2movenc_8c_a93cc7296f13f507c1fd7abd0db36b898}{ctx}}, \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$\mbox{\hyperlink{cbs__vp9__syntax__template_8c_a78a801b08f3801b9059f0450b834984e}{frame}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavfi__buffersink_ga9c06b3744579f165cc032160c154828a}{av\+\_\+buffersink\+\_\+get\+\_\+samples}} (\mbox{\hyperlink{struct_a_v_filter_context}{A\+V\+Filter\+Context}} $\ast$\mbox{\hyperlink{tests_2movenc_8c_a93cc7296f13f507c1fd7abd0db36b898}{ctx}}, \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$\mbox{\hyperlink{cbs__vp9__syntax__template_8c_a78a801b08f3801b9059f0450b834984e}{frame}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} nb\+\_\+samples)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The buffersink and abuffersink filters are there to connect filter graphs to applications. They have a single input, connected to the graph, and no output. Frames must be extracted using \mbox{\hyperlink{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa}{av\+\_\+buffersink\+\_\+get\+\_\+frame()}} or \mbox{\hyperlink{group__lavfi__buffersink_ga9c06b3744579f165cc032160c154828a}{av\+\_\+buffersink\+\_\+get\+\_\+samples()}}.

The format negotiated by the graph during configuration can be obtained using the accessor functions\+:
\begin{DoxyItemize}
\item \mbox{\hyperlink{group__lavfi__buffersink__accessors_gabc82f65ec7f4fa47c5216260639258a1}{av\+\_\+buffersink\+\_\+get\+\_\+time\+\_\+base()}},
\item \mbox{\hyperlink{group__lavfi__buffersink__accessors_ga402ddbef6f7347869725696846ac81eb}{av\+\_\+buffersink\+\_\+get\+\_\+format()}},
\item \mbox{\hyperlink{group__lavfi__buffersink__accessors_ga55614fd28de2fa05b04f427390061d5b}{av\+\_\+buffersink\+\_\+get\+\_\+frame\+\_\+rate()}},
\item \mbox{\hyperlink{group__lavfi__buffersink__accessors_gac8c86515d2ef56090395dfd74854c835}{av\+\_\+buffersink\+\_\+get\+\_\+w()}},
\item \mbox{\hyperlink{group__lavfi__buffersink__accessors_ga955ecf3680e71e10429d7500343be25c}{av\+\_\+buffersink\+\_\+get\+\_\+h()}},
\item \mbox{\hyperlink{group__lavfi__buffersink__accessors_gaa38ee33e1c7f6f7cb190bd2330e5f848}{av\+\_\+buffersink\+\_\+get\+\_\+sample\+\_\+aspect\+\_\+ratio()}},
\item \mbox{\hyperlink{group__lavfi__buffersink__accessors_gace78881c41bf449527826b95d21279a2}{av\+\_\+buffersink\+\_\+get\+\_\+channels()}},
\item \mbox{\hyperlink{group__lavfi__buffersink__accessors_ga87e21bf198fd932c30cc3cdc6b16bff1}{av\+\_\+buffersink\+\_\+get\+\_\+channel\+\_\+layout()}},
\item \mbox{\hyperlink{group__lavfi__buffersink__accessors_ga2af714e82f48759551acdbc4488ded4a}{av\+\_\+buffersink\+\_\+get\+\_\+sample\+\_\+rate()}}.
\end{DoxyItemize}

The format can be constrained by setting options, using \mbox{\hyperlink{group__opt__set__funcs_ga5fd4b92bdf4f392a2847f711676a7537}{av\+\_\+opt\+\_\+set()}} and related functions with the A\+V\+\_\+\+O\+P\+T\+\_\+\+S\+E\+A\+R\+C\+H\+\_\+\+C\+H\+I\+L\+D\+R\+EN flag.
\begin{DoxyItemize}
\item pix\+\_\+fmts (int list),
\item sample\+\_\+fmts (int list),
\item sample\+\_\+rates (int list),
\item channel\+\_\+layouts (int64\+\_\+t),
\item channel\+\_\+counts (int list),
\item all\+\_\+channel\+\_\+counts (bool). Most of these options are of type binary, and should be set using \mbox{\hyperlink{group__opt__set__funcs_gac06fc2b2e32f67f067ed7aaec163447f}{av\+\_\+opt\+\_\+set\+\_\+int\+\_\+list()}} or \mbox{\hyperlink{group__opt__set__funcs_ga6c32155fd8a96bed2f8cf5ebc030dadf}{av\+\_\+opt\+\_\+set\+\_\+bin()}}. If they are not set, all corresponding formats are accepted.
\end{DoxyItemize}

As a special case, if neither channel\+\_\+layouts nor channel\+\_\+counts is set, all valid channel layouts are accepted, but channel counts without a layout are not, unless all\+\_\+channel\+\_\+counts is set. Also, channel\+\_\+layouts must not contain a channel layout already accepted by a value in channel\+\_\+counts; for example, if channel\+\_\+counts contains 2, then channel\+\_\+layouts must not contain stereo. 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{group__lavfi__buffersink_gade670e86ece8d740194c916fa1ea6cc0}\label{group__lavfi__buffersink_gade670e86ece8d740194c916fa1ea6cc0}} 
\index{Buffer sink API@{Buffer sink API}!AV\_BUFFERSINK\_FLAG\_NO\_REQUEST@{AV\_BUFFERSINK\_FLAG\_NO\_REQUEST}}
\index{AV\_BUFFERSINK\_FLAG\_NO\_REQUEST@{AV\_BUFFERSINK\_FLAG\_NO\_REQUEST}!Buffer sink API@{Buffer sink API}}
\doxysubsubsection{\texorpdfstring{AV\_BUFFERSINK\_FLAG\_NO\_REQUEST}{AV\_BUFFERSINK\_FLAG\_NO\_REQUEST}}
{\footnotesize\ttfamily \#define A\+V\+\_\+\+B\+U\+F\+F\+E\+R\+S\+I\+N\+K\+\_\+\+F\+L\+A\+G\+\_\+\+N\+O\+\_\+\+R\+E\+Q\+U\+E\+ST~2}

Tell av\+\_\+buffersink\+\_\+get\+\_\+buffer\+\_\+ref() not to request a frame from its input. If a frame is already buffered, it is read (and removed from the buffer), but if no frame is present, return \mbox{\hyperlink{filter__design_8txt_adf2fb515710d47541f7150ecd2950e76}{A\+V\+E\+R\+R\+O\+R(\+E\+A\+G\+A\+I\+N)}}. 

Definition at line 96 of file buffersink.\+h.

\mbox{\Hypertarget{group__lavfi__buffersink_ga9453fc0e81d30237080b51575da0f0d8}\label{group__lavfi__buffersink_ga9453fc0e81d30237080b51575da0f0d8}} 
\index{Buffer sink API@{Buffer sink API}!AV\_BUFFERSINK\_FLAG\_PEEK@{AV\_BUFFERSINK\_FLAG\_PEEK}}
\index{AV\_BUFFERSINK\_FLAG\_PEEK@{AV\_BUFFERSINK\_FLAG\_PEEK}!Buffer sink API@{Buffer sink API}}
\doxysubsubsection{\texorpdfstring{AV\_BUFFERSINK\_FLAG\_PEEK}{AV\_BUFFERSINK\_FLAG\_PEEK}}
{\footnotesize\ttfamily \#define A\+V\+\_\+\+B\+U\+F\+F\+E\+R\+S\+I\+N\+K\+\_\+\+F\+L\+A\+G\+\_\+\+P\+E\+EK~1}

Tell av\+\_\+buffersink\+\_\+get\+\_\+buffer\+\_\+ref() to read video/samples buffer reference, but not remove it from the buffer. This is useful if you need only to read a video/samples buffer, without to fetch it. 

Definition at line 89 of file buffersink.\+h.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa}\label{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa}} 
\index{Buffer sink API@{Buffer sink API}!av\_buffersink\_get\_frame@{av\_buffersink\_get\_frame}}
\index{av\_buffersink\_get\_frame@{av\_buffersink\_get\_frame}!Buffer sink API@{Buffer sink API}}
\doxysubsubsection{\texorpdfstring{av\_buffersink\_get\_frame()}{av\_buffersink\_get\_frame()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+buffersink\+\_\+get\+\_\+frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_filter_context}{A\+V\+Filter\+Context}} $\ast$}]{ctx,  }\item[{\mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$}]{frame }\end{DoxyParamCaption})}

Get a frame with filtered data from sink and put it in frame.


\begin{DoxyParams}{Parameters}
{\em ctx} & pointer to a context of a buffersink or abuffersink \mbox{\hyperlink{struct_a_v_filter}{A\+V\+Filter}}. \\
\hline
{\em frame} & pointer to an allocated frame that will be filled with data. The data must be freed using \mbox{\hyperlink{group__lavu__frame_ga0a2b687f9c1c5ed0089b01fd61227108}{av\+\_\+frame\+\_\+unref()}} / \mbox{\hyperlink{group__lavu__frame_ga979d73f3228814aee56aeca0636e37cc}{av\+\_\+frame\+\_\+free()}}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item $>$= 0 if a frame was successfully returned.
\item \mbox{\hyperlink{filter__design_8txt_adf2fb515710d47541f7150ecd2950e76}{A\+V\+E\+R\+R\+O\+R(\+E\+A\+G\+A\+I\+N)}} if no frames are available at this point; more input frames must be added to the filtergraph to get more output.
\item A\+V\+E\+R\+R\+O\+R\+\_\+\+E\+OF if there will be no more output frames on this sink.
\item A different negative A\+V\+E\+R\+R\+OR code in other failure cases. 
\end{DoxyItemize}
\end{DoxyReturn}


Definition at line 88 of file buffersink.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavfi__buffersink_ga71ae9c529c8da51681e12faa37d1a395}\label{group__lavfi__buffersink_ga71ae9c529c8da51681e12faa37d1a395}} 
\index{Buffer sink API@{Buffer sink API}!av\_buffersink\_get\_frame\_flags@{av\_buffersink\_get\_frame\_flags}}
\index{av\_buffersink\_get\_frame\_flags@{av\_buffersink\_get\_frame\_flags}!Buffer sink API@{Buffer sink API}}
\doxysubsubsection{\texorpdfstring{av\_buffersink\_get\_frame\_flags()}{av\_buffersink\_get\_frame\_flags()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+buffersink\+\_\+get\+\_\+frame\+\_\+flags (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_filter_context}{A\+V\+Filter\+Context}} $\ast$}]{ctx,  }\item[{\mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$}]{frame,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{flags }\end{DoxyParamCaption})}

Get a frame with filtered data from sink and put it in frame.


\begin{DoxyParams}{Parameters}
{\em ctx} & pointer to a buffersink or abuffersink filter context. \\
\hline
{\em frame} & pointer to an allocated frame that will be filled with data. The data must be freed using \mbox{\hyperlink{group__lavu__frame_ga0a2b687f9c1c5ed0089b01fd61227108}{av\+\_\+frame\+\_\+unref()}} / \mbox{\hyperlink{group__lavu__frame_ga979d73f3228814aee56aeca0636e37cc}{av\+\_\+frame\+\_\+free()}} \\
\hline
{\em flags} & a combination of A\+V\+\_\+\+B\+U\+F\+F\+E\+R\+S\+I\+N\+K\+\_\+\+F\+L\+A\+G\+\_\+$\ast$ flags\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$>$= 0 in for success, a negative A\+V\+E\+R\+R\+OR code for failure. 
\end{DoxyReturn}


Definition at line 140 of file buffersink.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavfi__buffersink_ga71ae9c529c8da51681e12faa37d1a395_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavfi__buffersink_ga71ae9c529c8da51681e12faa37d1a395_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavfi__buffersink_ga9c06b3744579f165cc032160c154828a}\label{group__lavfi__buffersink_ga9c06b3744579f165cc032160c154828a}} 
\index{Buffer sink API@{Buffer sink API}!av\_buffersink\_get\_samples@{av\_buffersink\_get\_samples}}
\index{av\_buffersink\_get\_samples@{av\_buffersink\_get\_samples}!Buffer sink API@{Buffer sink API}}
\doxysubsubsection{\texorpdfstring{av\_buffersink\_get\_samples()}{av\_buffersink\_get\_samples()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+buffersink\+\_\+get\+\_\+samples (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_filter_context}{A\+V\+Filter\+Context}} $\ast$}]{ctx,  }\item[{\mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$}]{frame,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{nb\+\_\+samples }\end{DoxyParamCaption})}

Same as \mbox{\hyperlink{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa}{av\+\_\+buffersink\+\_\+get\+\_\+frame()}}, but with the ability to specify the number of samples read. This function is less efficient than \mbox{\hyperlink{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa}{av\+\_\+buffersink\+\_\+get\+\_\+frame()}}, because it copies the data around.


\begin{DoxyParams}{Parameters}
{\em ctx} & pointer to a context of the abuffersink \mbox{\hyperlink{struct_a_v_filter}{A\+V\+Filter}}. \\
\hline
{\em frame} & pointer to an allocated frame that will be filled with data. The data must be freed using \mbox{\hyperlink{group__lavu__frame_ga0a2b687f9c1c5ed0089b01fd61227108}{av\+\_\+frame\+\_\+unref()}} / \mbox{\hyperlink{group__lavu__frame_ga979d73f3228814aee56aeca0636e37cc}{av\+\_\+frame\+\_\+free()}} frame will contain exactly nb\+\_\+samples audio samples, except at the end of stream, when it can contain less than nb\+\_\+samples.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The return codes have the same meaning as for \mbox{\hyperlink{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa}{av\+\_\+buffersink\+\_\+get\+\_\+frame()}}.
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
do not mix this function with \mbox{\hyperlink{group__lavfi__buffersink_ga653228f4cbca427c654d844a5fc59cfa}{av\+\_\+buffersink\+\_\+get\+\_\+frame()}}. Use only one or the other with a single sink, not both. 
\end{DoxyWarning}


Definition at line 145 of file buffersink.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavfi__buffersink_ga9c06b3744579f165cc032160c154828a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{group__lavfi__buffersink_ga359d7d1e42c27ca14c07559d4e9adba7}\label{group__lavfi__buffersink_ga359d7d1e42c27ca14c07559d4e9adba7}} 
\index{Buffer sink API@{Buffer sink API}!av\_buffersink\_set\_frame\_size@{av\_buffersink\_set\_frame\_size}}
\index{av\_buffersink\_set\_frame\_size@{av\_buffersink\_set\_frame\_size}!Buffer sink API@{Buffer sink API}}
\doxysubsubsection{\texorpdfstring{av\_buffersink\_set\_frame\_size()}{av\_buffersink\_set\_frame\_size()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} av\+\_\+buffersink\+\_\+set\+\_\+frame\+\_\+size (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_filter_context}{A\+V\+Filter\+Context}} $\ast$}]{ctx,  }\item[{unsigned}]{frame\+\_\+size }\end{DoxyParamCaption})}

Set the frame size for an audio buffer sink.

All calls to av\+\_\+buffersink\+\_\+get\+\_\+buffer\+\_\+ref will return a buffer with exactly the specified number of samples, or \mbox{\hyperlink{filter__design_8txt_adf2fb515710d47541f7150ecd2950e76}{A\+V\+E\+R\+R\+O\+R(\+E\+A\+G\+A\+I\+N)}} if there is not enough. The last buffer at E\+OF will be padded with 0. 

Definition at line 198 of file buffersink.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__lavfi__buffersink_ga359d7d1e42c27ca14c07559d4e9adba7_icgraph}
\end{center}
\end{figure}
