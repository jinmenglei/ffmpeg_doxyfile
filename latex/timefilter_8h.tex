\hypertarget{timefilter_8h}{}\doxysection{E\+:/github/ffmpeg/libavdevice/timefilter.h File Reference}
\label{timefilter_8h}\index{E:/github/ffmpeg/libavdevice/timefilter.h@{E:/github/ffmpeg/libavdevice/timefilter.h}}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{timefilter_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{struct_time_filter}{Time\+Filter}} \mbox{\hyperlink{timefilter_8h_af10279f1e84ab74372826a46fd5bdcf2}{Time\+Filter}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{struct_time_filter}{Time\+Filter}} $\ast$ \mbox{\hyperlink{timefilter_8h_a2749a89b1473aa2fc51e0e455c548427}{ff\+\_\+timefilter\+\_\+new}} (double clock\+\_\+period, double feedback2\+\_\+factor, double feedback3\+\_\+factor)
\item 
double \mbox{\hyperlink{timefilter_8h_a2f83668996e918dbf991c156dc2bd060}{ff\+\_\+timefilter\+\_\+update}} (\mbox{\hyperlink{struct_time_filter}{Time\+Filter}} $\ast$self, double system\+\_\+time, double \mbox{\hyperlink{writing__filters_8txt_a7d62873e0d35fb5d679f0c3f668cf220}{period}})
\item 
double \mbox{\hyperlink{timefilter_8h_a019b835bb30849c47ddb67dca3b2b3f3}{ff\+\_\+timefilter\+\_\+eval}} (\mbox{\hyperlink{struct_time_filter}{Time\+Filter}} $\ast$self, double \mbox{\hyperlink{vorbis__enc__data_8h_a1ee4a05b54419bfadd66ee351d05812e}{delta}})
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{timefilter_8h_a819c9c0b8dce9fb9a8f2b0480f97fc95}{ff\+\_\+timefilter\+\_\+reset}} (\mbox{\hyperlink{struct_time_filter}{Time\+Filter}} $\ast$)
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{timefilter_8h_ae4bcbee8fef5e55be07e3a35ff76f9c2}{ff\+\_\+timefilter\+\_\+destroy}} (\mbox{\hyperlink{struct_time_filter}{Time\+Filter}} $\ast$)
\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{timefilter_8h_af10279f1e84ab74372826a46fd5bdcf2}\label{timefilter_8h_af10279f1e84ab74372826a46fd5bdcf2}} 
\index{timefilter.h@{timefilter.h}!TimeFilter@{TimeFilter}}
\index{TimeFilter@{TimeFilter}!timefilter.h@{timefilter.h}}
\doxysubsubsection{\texorpdfstring{TimeFilter}{TimeFilter}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{struct_time_filter}{Time\+Filter}} \mbox{\hyperlink{struct_time_filter}{Time\+Filter}}}

Opaque type representing a time filter state

The purpose of this filter is to provide a way to compute accurate time stamps that can be compared to wall clock time, especially when dealing with two clocks\+: the system clock and a hardware device clock, such as a soundcard. 

Definition at line 1 of file timefilter.\+h.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{timefilter_8h_ae4bcbee8fef5e55be07e3a35ff76f9c2}\label{timefilter_8h_ae4bcbee8fef5e55be07e3a35ff76f9c2}} 
\index{timefilter.h@{timefilter.h}!ff\_timefilter\_destroy@{ff\_timefilter\_destroy}}
\index{ff\_timefilter\_destroy@{ff\_timefilter\_destroy}!timefilter.h@{timefilter.h}}
\doxysubsubsection{\texorpdfstring{ff\_timefilter\_destroy()}{ff\_timefilter\_destroy()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+timefilter\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_time_filter}{Time\+Filter}} $\ast$}]{ }\end{DoxyParamCaption})}

Free all resources associated with the filter 

Definition at line 62 of file timefilter.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{timefilter_8h_ae4bcbee8fef5e55be07e3a35ff76f9c2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{timefilter_8h_a019b835bb30849c47ddb67dca3b2b3f3}\label{timefilter_8h_a019b835bb30849c47ddb67dca3b2b3f3}} 
\index{timefilter.h@{timefilter.h}!ff\_timefilter\_eval@{ff\_timefilter\_eval}}
\index{ff\_timefilter\_eval@{ff\_timefilter\_eval}!timefilter.h@{timefilter.h}}
\doxysubsubsection{\texorpdfstring{ff\_timefilter\_eval()}{ff\_timefilter\_eval()}}
{\footnotesize\ttfamily double ff\+\_\+timefilter\+\_\+eval (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_time_filter}{Time\+Filter}} $\ast$}]{self,  }\item[{double}]{delta }\end{DoxyParamCaption})}

Evaluate the filter at a specified time


\begin{DoxyParams}{Parameters}
{\em delta} & difference between the requested time and the current time (last call to ff\+\_\+timefilter\+\_\+update). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the filtered time 
\end{DoxyReturn}


Definition at line 88 of file timefilter.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{timefilter_8h_a019b835bb30849c47ddb67dca3b2b3f3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{timefilter_8h_a2749a89b1473aa2fc51e0e455c548427}\label{timefilter_8h_a2749a89b1473aa2fc51e0e455c548427}} 
\index{timefilter.h@{timefilter.h}!ff\_timefilter\_new@{ff\_timefilter\_new}}
\index{ff\_timefilter\_new@{ff\_timefilter\_new}!timefilter.h@{timefilter.h}}
\doxysubsubsection{\texorpdfstring{ff\_timefilter\_new()}{ff\_timefilter\_new()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_time_filter}{Time\+Filter}}$\ast$ ff\+\_\+timefilter\+\_\+new (\begin{DoxyParamCaption}\item[{double}]{clock\+\_\+period,  }\item[{double}]{feedback2\+\_\+factor,  }\item[{double}]{feedback3\+\_\+factor }\end{DoxyParamCaption})}

Create a new Delay Locked Loop time filter

feedback2\+\_\+factor and feedback3\+\_\+factor are the factors used for the multiplications that are respectively performed in the second and third feedback paths of the loop.

Unless you know what you are doing, you should set these as follow\+:

o = 2 $\ast$ M\+\_\+\+PI $\ast$ bandwidth $\ast$ period\+\_\+in\+\_\+seconds feedback2\+\_\+factor = sqrt(2) $\ast$ o feedback3\+\_\+factor = o $\ast$ o

Where bandwidth is up to you to choose. Smaller values will filter out more of the jitter, but also take a longer time for the loop to settle. A good starting point is something between 0.\+3 and 3 Hz.


\begin{DoxyParams}{Parameters}
{\em time\+\_\+base} & period of the hardware clock in seconds (for example 1.\+0/44100) \\
\hline
{\em period} & expected update interval, in input units \\
\hline
{\em brandwidth} & filtering bandwidth, in Hz\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a \mbox{\hyperlink{struct_time_filter}{Time\+Filter}} struct, or N\+U\+LL on error
\end{DoxyReturn}
For more details about these parameters and background concepts please see\+: \href{http://www.kokkinizita.net/papers/usingdll.pdf}{\texttt{ http\+://www.\+kokkinizita.\+net/papers/usingdll.\+pdf}} 

Definition at line 46 of file timefilter.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{timefilter_8h_a2749a89b1473aa2fc51e0e455c548427_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{timefilter_8h_a2749a89b1473aa2fc51e0e455c548427_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{timefilter_8h_a819c9c0b8dce9fb9a8f2b0480f97fc95}\label{timefilter_8h_a819c9c0b8dce9fb9a8f2b0480f97fc95}} 
\index{timefilter.h@{timefilter.h}!ff\_timefilter\_reset@{ff\_timefilter\_reset}}
\index{ff\_timefilter\_reset@{ff\_timefilter\_reset}!timefilter.h@{timefilter.h}}
\doxysubsubsection{\texorpdfstring{ff\_timefilter\_reset()}{ff\_timefilter\_reset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+timefilter\+\_\+reset (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_time_filter}{Time\+Filter}} $\ast$}]{ }\end{DoxyParamCaption})}

Reset the filter

This function should mainly be called in case of X\+R\+UN.

Warning\+: after calling this, the filter is in an undetermined state until the next call to \mbox{\hyperlink{timefilter_8h_a2f83668996e918dbf991c156dc2bd060}{ff\+\_\+timefilter\+\_\+update()}} 

Definition at line 67 of file timefilter.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{timefilter_8h_a819c9c0b8dce9fb9a8f2b0480f97fc95_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{timefilter_8h_a2f83668996e918dbf991c156dc2bd060}\label{timefilter_8h_a2f83668996e918dbf991c156dc2bd060}} 
\index{timefilter.h@{timefilter.h}!ff\_timefilter\_update@{ff\_timefilter\_update}}
\index{ff\_timefilter\_update@{ff\_timefilter\_update}!timefilter.h@{timefilter.h}}
\doxysubsubsection{\texorpdfstring{ff\_timefilter\_update()}{ff\_timefilter\_update()}}
{\footnotesize\ttfamily double ff\+\_\+timefilter\+\_\+update (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_time_filter}{Time\+Filter}} $\ast$}]{self,  }\item[{double}]{system\+\_\+time,  }\item[{double}]{period }\end{DoxyParamCaption})}

Update the filter

This function must be called in real time, at each process cycle.


\begin{DoxyParams}{Parameters}
{\em period} & the device cycle duration in clock\+\_\+periods. For example, at 44.\+1k\+Hz and a buffer size of 512 frames, period = 512 when clock\+\_\+period was 1.\+0/44100, or 512/44100 if clock\+\_\+period was 1.\\
\hline
\end{DoxyParams}
system\+\_\+time, in seconds, should be the value of the system clock time, at (or as close as possible to) the moment the device hardware interrupt occurred (or any other event the device clock raises at the beginning of a cycle).

\begin{DoxyReturn}{Returns}
the filtered time, in seconds 
\end{DoxyReturn}


Definition at line 72 of file timefilter.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{timefilter_8h_a2f83668996e918dbf991c156dc2bd060_icgraph}
\end{center}
\end{figure}
