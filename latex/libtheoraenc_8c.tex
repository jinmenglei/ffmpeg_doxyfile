\hypertarget{libtheoraenc_8c}{}\doxysection{E\+:/github/ffmpeg/libavcodec/libtheoraenc.c File Reference}
\label{libtheoraenc_8c}\index{E:/github/ffmpeg/libavcodec/libtheoraenc.c@{E:/github/ffmpeg/libavcodec/libtheoraenc.c}}


Theora encoder using libtheora.  


{\ttfamily \#include \char`\"{}libavutil/common.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/intreadwrite.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/pixdesc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/log.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/base64.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}avcodec.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}internal.\+h\char`\"{}}\newline
{\ttfamily \#include $<$theora/theoraenc.\+h$>$}\newline
Include dependency graph for libtheoraenc.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{libtheoraenc_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_theora_context}{Theora\+Context}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{struct_theora_context}{Theora\+Context}} \mbox{\hyperlink{libtheoraenc_8c_a5318d44588eaf389386b65bfafdf75c9}{Theora\+Context}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{libtheoraenc_8c_ab5c8bfd619298c404a23e4a015d925aa}{concatenate\+\_\+packet}} (unsigned \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$\mbox{\hyperlink{vf__uspp_8c_a06b941e27d7180a9a7c906f9907682d6}{offset}}, \mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avc\+\_\+context, const \mbox{\hyperlink{oggdec_8c_a671bc3d3228e9b57975fb39a3a798a9d}{ogg\+\_\+packet}} $\ast$packet)
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{libtheoraenc_8c_aff7489a12991021d0953dfac44af239e}{get\+\_\+stats}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} eos)
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{libtheoraenc_8c_ad9bf58a360c49842e6f852672b24a404}{submit\+\_\+stats}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx)
\item 
static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{libtheoraenc_8c_a22c2e4f997e2364afc4afd8cd4de4d96}{encode\+\_\+init}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avc\+\_\+context)
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{libtheoraenc_8c_abc5f730c733c5ccf4a552dd4431ee203}{encode\+\_\+frame}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avc\+\_\+context, \mbox{\hyperlink{struct_a_v_packet}{A\+V\+Packet}} $\ast$\mbox{\hyperlink{demuxing__decoding_8c_a3d4c6562f0b27cf0cacbbea5c038c090}{pkt}}, const \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$\mbox{\hyperlink{cbs__vp9__syntax__template_8c_a78a801b08f3801b9059f0450b834984e}{frame}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$got\+\_\+packet)
\item 
static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{libtheoraenc_8c_ad01e987e3f1c56fe1cc1d4dca5ea9566}{encode\+\_\+close}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avc\+\_\+context)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{struct_a_v_codec}{A\+V\+Codec}} \mbox{\hyperlink{libtheoraenc_8c_a05fec35e272baa45540b2620c6064bc5}{ff\+\_\+libtheora\+\_\+encoder}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Theora encoder using libtheora. 

\begin{DoxyAuthor}{Author}
Paul Richards \href{mailto:paul.richards@gmail.com}{\texttt{ paul.\+richards@gmail.\+com}}
\end{DoxyAuthor}
A lot of this is copy / paste from other output codecs in libavcodec or pure guesswork (or both).

I have used t\+\_\+ prefixes on variables which are libtheora types and o\+\_\+ prefixes on variables which are libogg types. 

\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{libtheoraenc_8c_a5318d44588eaf389386b65bfafdf75c9}\label{libtheoraenc_8c_a5318d44588eaf389386b65bfafdf75c9}} 
\index{libtheoraenc.c@{libtheoraenc.c}!TheoraContext@{TheoraContext}}
\index{TheoraContext@{TheoraContext}!libtheoraenc.c@{libtheoraenc.c}}
\doxysubsubsection{\texorpdfstring{TheoraContext}{TheoraContext}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{struct_theora_context}{Theora\+Context}} \mbox{\hyperlink{struct_theora_context}{Theora\+Context}}}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{libtheoraenc_8c_ab5c8bfd619298c404a23e4a015d925aa}\label{libtheoraenc_8c_ab5c8bfd619298c404a23e4a015d925aa}} 
\index{libtheoraenc.c@{libtheoraenc.c}!concatenate\_packet@{concatenate\_packet}}
\index{concatenate\_packet@{concatenate\_packet}!libtheoraenc.c@{libtheoraenc.c}}
\doxysubsubsection{\texorpdfstring{concatenate\_packet()}{concatenate\_packet()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} concatenate\+\_\+packet (\begin{DoxyParamCaption}\item[{unsigned \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$}]{offset,  }\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avc\+\_\+context,  }\item[{const \mbox{\hyperlink{oggdec_8c_a671bc3d3228e9b57975fb39a3a798a9d}{ogg\+\_\+packet}} $\ast$}]{packet }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Concatenate an ogg\+\_\+packet into the extradata. 

Definition at line 56 of file libtheoraenc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{libtheoraenc_8c_ab5c8bfd619298c404a23e4a015d925aa_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=286pt]{libtheoraenc_8c_ab5c8bfd619298c404a23e4a015d925aa_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{libtheoraenc_8c_ad01e987e3f1c56fe1cc1d4dca5ea9566}\label{libtheoraenc_8c_ad01e987e3f1c56fe1cc1d4dca5ea9566}} 
\index{libtheoraenc.c@{libtheoraenc.c}!encode\_close@{encode\_close}}
\index{encode\_close@{encode\_close}!libtheoraenc.c@{libtheoraenc.c}}
\doxysubsubsection{\texorpdfstring{encode\_close()}{encode\_close()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} encode\+\_\+close (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avc\+\_\+context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 361 of file libtheoraenc.\+c.

\mbox{\Hypertarget{libtheoraenc_8c_abc5f730c733c5ccf4a552dd4431ee203}\label{libtheoraenc_8c_abc5f730c733c5ccf4a552dd4431ee203}} 
\index{libtheoraenc.c@{libtheoraenc.c}!encode\_frame@{encode\_frame}}
\index{encode\_frame@{encode\_frame}!libtheoraenc.c@{libtheoraenc.c}}
\doxysubsubsection{\texorpdfstring{encode\_frame()}{encode\_frame()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} encode\+\_\+frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avc\+\_\+context,  }\item[{\mbox{\hyperlink{struct_a_v_packet}{A\+V\+Packet}} $\ast$}]{pkt,  }\item[{const \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$}]{frame,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$}]{got\+\_\+packet }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 275 of file libtheoraenc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{libtheoraenc_8c_abc5f730c733c5ccf4a552dd4431ee203_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{libtheoraenc_8c_a22c2e4f997e2364afc4afd8cd4de4d96}\label{libtheoraenc_8c_a22c2e4f997e2364afc4afd8cd4de4d96}} 
\index{libtheoraenc.c@{libtheoraenc.c}!encode\_init@{encode\_init}}
\index{encode\_init@{encode\_init}!libtheoraenc.c@{libtheoraenc.c}}
\doxysubsubsection{\texorpdfstring{encode\_init()}{encode\_init()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} encode\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avc\+\_\+context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 164 of file libtheoraenc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{libtheoraenc_8c_a22c2e4f997e2364afc4afd8cd4de4d96_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{libtheoraenc_8c_aff7489a12991021d0953dfac44af239e}\label{libtheoraenc_8c_aff7489a12991021d0953dfac44af239e}} 
\index{libtheoraenc.c@{libtheoraenc.c}!get\_stats@{get\_stats}}
\index{get\_stats@{get\_stats}!libtheoraenc.c@{libtheoraenc.c}}
\doxysubsubsection{\texorpdfstring{get\_stats()}{get\_stats()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} get\+\_\+stats (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{eos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 89 of file libtheoraenc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{libtheoraenc_8c_aff7489a12991021d0953dfac44af239e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{libtheoraenc_8c_aff7489a12991021d0953dfac44af239e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{libtheoraenc_8c_ad9bf58a360c49842e6f852672b24a404}\label{libtheoraenc_8c_ad9bf58a360c49842e6f852672b24a404}} 
\index{libtheoraenc.c@{libtheoraenc.c}!submit\_stats@{submit\_stats}}
\index{submit\_stats@{submit\_stats}!libtheoraenc.c@{libtheoraenc.c}}
\doxysubsubsection{\texorpdfstring{submit\_stats()}{submit\_stats()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} submit\+\_\+stats (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 127 of file libtheoraenc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{libtheoraenc_8c_ad9bf58a360c49842e6f852672b24a404_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=266pt]{libtheoraenc_8c_ad9bf58a360c49842e6f852672b24a404_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{libtheoraenc_8c_a05fec35e272baa45540b2620c6064bc5}\label{libtheoraenc_8c_a05fec35e272baa45540b2620c6064bc5}} 
\index{libtheoraenc.c@{libtheoraenc.c}!ff\_libtheora\_encoder@{ff\_libtheora\_encoder}}
\index{ff\_libtheora\_encoder@{ff\_libtheora\_encoder}!libtheoraenc.c@{libtheoraenc.c}}
\doxysubsubsection{\texorpdfstring{ff\_libtheora\_encoder}{ff\_libtheora\_encoder}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_v_codec}{A\+V\+Codec}} ff\+\_\+libtheora\+\_\+encoder}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{= \{}
\DoxyCodeLine{    .name           = \textcolor{stringliteral}{"{}libtheora"{}},}
\DoxyCodeLine{    .long\_name      = \mbox{\hyperlink{libavutil_2internal_8h_a3c0fa12fafe59c44d4b16e60d8385637}{NULL\_IF\_CONFIG\_SMALL}}(\textcolor{stringliteral}{"{}libtheora Theora"{}}),}
\DoxyCodeLine{    .type           = \mbox{\hyperlink{group__lavu__misc_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5}{AVMEDIA\_TYPE\_VIDEO}},}
\DoxyCodeLine{    .id             = \mbox{\hyperlink{group__lavc__core_ggaadca229ad2c20e060a14fec08a5cc7cea8c3ef0a1eec3cf22756a1323989ff4d8}{AV\_CODEC\_ID\_THEORA}},}
\DoxyCodeLine{    .priv\_data\_size = \textcolor{keyword}{sizeof}(\mbox{\hyperlink{libtheoraenc_8c_a5318d44588eaf389386b65bfafdf75c9}{TheoraContext}}),}
\DoxyCodeLine{    .\mbox{\hyperlink{avrndec_8c_a41c0c9c8aa8e1fd12d65b18dd6948b09}{init}}           = \mbox{\hyperlink{libtheoraenc_8c_a22c2e4f997e2364afc4afd8cd4de4d96}{encode\_init}},}
\DoxyCodeLine{    .close          = \mbox{\hyperlink{libtheoraenc_8c_ad01e987e3f1c56fe1cc1d4dca5ea9566}{encode\_close}},}
\DoxyCodeLine{    .encode2        = \mbox{\hyperlink{libtheoraenc_8c_abc5f730c733c5ccf4a552dd4431ee203}{encode\_frame}},}
\DoxyCodeLine{    .capabilities   = \mbox{\hyperlink{group__lavc__core_ga3f55f5bcfbb12e06c7cb1195028855e6}{AV\_CODEC\_CAP\_DELAY}}, }
\DoxyCodeLine{    .\mbox{\hyperlink{libkvazaar_8c_aa1219ee396a270ba57fd4f2306b64c6e}{pix\_fmts}}       = (\textcolor{keyword}{const} \textcolor{keyword}{enum} \mbox{\hyperlink{pixfmt_8h_a9a8e335cf3be472042bc9f0cf80cd4c5}{AVPixelFormat}}[])\{}
\DoxyCodeLine{        \mbox{\hyperlink{pixfmt_8h_a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2}{AV\_PIX\_FMT\_YUV420P}}, \mbox{\hyperlink{pixfmt_8h_a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051}{AV\_PIX\_FMT\_YUV422P}}, \mbox{\hyperlink{pixfmt_8h_a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a}{AV\_PIX\_FMT\_YUV444P}}, \mbox{\hyperlink{pixfmt_8h_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3}{AV\_PIX\_FMT\_NONE}}}
\DoxyCodeLine{    \},}
\DoxyCodeLine{    .wrapper\_name   = \textcolor{stringliteral}{"{}libtheora"{}},}
\DoxyCodeLine{\}}

\end{DoxyCode}
\mbox{\hyperlink{struct_a_v_codec}{A\+V\+Codec}} struct exposed to libavcodec 

Definition at line 375 of file libtheoraenc.\+c.

