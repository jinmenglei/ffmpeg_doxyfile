\hypertarget{mjpegenc__huffman_8c}{}\doxysection{E\+:/github/ffmpeg/libavcodec/mjpegenc\+\_\+huffman.c File Reference}
\label{mjpegenc__huffman_8c}\index{E:/github/ffmpeg/libavcodec/mjpegenc\_huffman.c@{E:/github/ffmpeg/libavcodec/mjpegenc\_huffman.c}}
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include \char`\"{}libavutil/avassert.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/common.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/error.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/qsort.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mjpegenc\+\_\+huffman.\+h\char`\"{}}\newline
Include dependency graph for mjpegenc\+\_\+huffman.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mjpegenc__huffman_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{mjpegenc__huffman_8c_ab754dc23666e00911351bf1c486f2318}{compare\+\_\+by\+\_\+prob}} (const \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$\mbox{\hyperlink{h264pred__template_8c_a4124bc0a9335c27f086f24ba207a4912}{a}}, const \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$\mbox{\hyperlink{vf__curves_8c_a0a667482238bcca3ac201c1cd09c5072}{b}})
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{mjpegenc__huffman_8c_aeddb269d7f9ea661ae41bab7b07a29d7}{compare\+\_\+by\+\_\+length}} (const \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$\mbox{\hyperlink{h264pred__template_8c_a4124bc0a9335c27f086f24ba207a4912}{a}}, const \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$\mbox{\hyperlink{vf__curves_8c_a0a667482238bcca3ac201c1cd09c5072}{b}})
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{mjpegenc__huffman_8c_a5b3cc49ac04fb1f0d3b4220c37aac12a}{ff\+\_\+mjpegenc\+\_\+huffman\+\_\+compute\+\_\+bits}} (\mbox{\hyperlink{struct_p_table}{P\+Table}} $\ast$prob\+\_\+table, \mbox{\hyperlink{struct_huff_table}{Huff\+Table}} $\ast$distincts, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavu__mem__funcs_ga34e10fdac079a9ca4512b8ccd7f20b8a}{size}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} max\+\_\+length)
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{mjpegenc__huffman_8c_ab952e5043bc1c2619f8482ceaca9e461}{ff\+\_\+mjpeg\+\_\+encode\+\_\+huffman\+\_\+init}} (\mbox{\hyperlink{struct_m_jpeg_enc_huffman_context}{M\+Jpeg\+Enc\+Huffman\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}})
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{mjpegenc__huffman_8c_ac6e18725d278ded89ca6608f173308a5}{ff\+\_\+mjpeg\+\_\+encode\+\_\+huffman\+\_\+close}} (\mbox{\hyperlink{struct_m_jpeg_enc_huffman_context}{M\+Jpeg\+Enc\+Huffman\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} \mbox{\hyperlink{vp3data_8h_a46a6da6b1936191571fd30b2a749f38c}{bits}}\mbox{[}17\mbox{]}, \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} \mbox{\hyperlink{aeval_8c_a16aca557f352132b55bbc3c4769daa8b}{val}}\mbox{[}$\,$\mbox{]}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} max\+\_\+nval)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{mjpegenc__huffman_8c_aeddb269d7f9ea661ae41bab7b07a29d7}\label{mjpegenc__huffman_8c_aeddb269d7f9ea661ae41bab7b07a29d7}} 
\index{mjpegenc\_huffman.c@{mjpegenc\_huffman.c}!compare\_by\_length@{compare\_by\_length}}
\index{compare\_by\_length@{compare\_by\_length}!mjpegenc\_huffman.c@{mjpegenc\_huffman.c}}
\doxysubsubsection{\texorpdfstring{compare\_by\_length()}{compare\_by\_length()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} compare\+\_\+by\+\_\+length (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{a,  }\item[{const \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{b }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Comparison function for two Huff\+Tables by length


\begin{DoxyParams}{Parameters}
{\em a} & First \mbox{\hyperlink{struct_huff_table}{Huff\+Table}} to compare \\
\hline
{\em b} & Second \mbox{\hyperlink{struct_huff_table}{Huff\+Table}} to compare \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$<$ 0 for less than, 0 for equals, $>$ 0 for greater than 
\end{DoxyReturn}


Definition at line 52 of file mjpegenc\+\_\+huffman.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mjpegenc__huffman_8c_aeddb269d7f9ea661ae41bab7b07a29d7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mjpegenc__huffman_8c_ab754dc23666e00911351bf1c486f2318}\label{mjpegenc__huffman_8c_ab754dc23666e00911351bf1c486f2318}} 
\index{mjpegenc\_huffman.c@{mjpegenc\_huffman.c}!compare\_by\_prob@{compare\_by\_prob}}
\index{compare\_by\_prob@{compare\_by\_prob}!mjpegenc\_huffman.c@{mjpegenc\_huffman.c}}
\doxysubsubsection{\texorpdfstring{compare\_by\_prob()}{compare\_by\_prob()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} compare\+\_\+by\+\_\+prob (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{a,  }\item[{const \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{b }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Comparison function for two P\+Tables by prob


\begin{DoxyParams}{Parameters}
{\em a} & First \mbox{\hyperlink{struct_p_table}{P\+Table}} to compare \\
\hline
{\em b} & Second \mbox{\hyperlink{struct_p_table}{P\+Table}} to compare \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
$<$ 0 for less than, 0 for equals, $>$ 0 for greater than 
\end{DoxyReturn}


Definition at line 38 of file mjpegenc\+\_\+huffman.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mjpegenc__huffman_8c_ab754dc23666e00911351bf1c486f2318_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mjpegenc__huffman_8c_ac6e18725d278ded89ca6608f173308a5}\label{mjpegenc__huffman_8c_ac6e18725d278ded89ca6608f173308a5}} 
\index{mjpegenc\_huffman.c@{mjpegenc\_huffman.c}!ff\_mjpeg\_encode\_huffman\_close@{ff\_mjpeg\_encode\_huffman\_close}}
\index{ff\_mjpeg\_encode\_huffman\_close@{ff\_mjpeg\_encode\_huffman\_close}!mjpegenc\_huffman.c@{mjpegenc\_huffman.c}}
\doxysubsubsection{\texorpdfstring{ff\_mjpeg\_encode\_huffman\_close()}{ff\_mjpeg\_encode\_huffman\_close()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+mjpeg\+\_\+encode\+\_\+huffman\+\_\+close (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_m_jpeg_enc_huffman_context}{M\+Jpeg\+Enc\+Huffman\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}}}]{bits\mbox{[}17\mbox{]},  }\item[{\mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}}}]{val\mbox{[}$\,$\mbox{]},  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{max\+\_\+nval }\end{DoxyParamCaption})}

Produces a Huffman encoding with a given input


\begin{DoxyParams}{Parameters}
{\em s} & input to encode \\
\hline
{\em bits} & output array where the ith character represents how many input values have i length encoding \\
\hline
{\em val} & output array of input values sorted by their encoded length \\
\hline
{\em max\+\_\+nval} & maximum number of distinct input values \\
\hline
\end{DoxyParams}


Definition at line 161 of file mjpegenc\+\_\+huffman.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mjpegenc__huffman_8c_ac6e18725d278ded89ca6608f173308a5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mjpegenc__huffman_8c_ac6e18725d278ded89ca6608f173308a5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mjpegenc__huffman_8c_ab952e5043bc1c2619f8482ceaca9e461}\label{mjpegenc__huffman_8c_ab952e5043bc1c2619f8482ceaca9e461}} 
\index{mjpegenc\_huffman.c@{mjpegenc\_huffman.c}!ff\_mjpeg\_encode\_huffman\_init@{ff\_mjpeg\_encode\_huffman\_init}}
\index{ff\_mjpeg\_encode\_huffman\_init@{ff\_mjpeg\_encode\_huffman\_init}!mjpegenc\_huffman.c@{mjpegenc\_huffman.c}}
\doxysubsubsection{\texorpdfstring{ff\_mjpeg\_encode\_huffman\_init()}{ff\_mjpeg\_encode\_huffman\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+mjpeg\+\_\+encode\+\_\+huffman\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_m_jpeg_enc_huffman_context}{M\+Jpeg\+Enc\+Huffman\+Context}} $\ast$}]{s }\end{DoxyParamCaption})}



Definition at line 148 of file mjpegenc\+\_\+huffman.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mjpegenc__huffman_8c_ab952e5043bc1c2619f8482ceaca9e461_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mjpegenc__huffman_8c_a5b3cc49ac04fb1f0d3b4220c37aac12a}\label{mjpegenc__huffman_8c_a5b3cc49ac04fb1f0d3b4220c37aac12a}} 
\index{mjpegenc\_huffman.c@{mjpegenc\_huffman.c}!ff\_mjpegenc\_huffman\_compute\_bits@{ff\_mjpegenc\_huffman\_compute\_bits}}
\index{ff\_mjpegenc\_huffman\_compute\_bits@{ff\_mjpegenc\_huffman\_compute\_bits}!mjpegenc\_huffman.c@{mjpegenc\_huffman.c}}
\doxysubsubsection{\texorpdfstring{ff\_mjpegenc\_huffman\_compute\_bits()}{ff\_mjpegenc\_huffman\_compute\_bits()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+mjpegenc\+\_\+huffman\+\_\+compute\+\_\+bits (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_p_table}{P\+Table}} $\ast$}]{prob\+\_\+table,  }\item[{\mbox{\hyperlink{struct_huff_table}{Huff\+Table}} $\ast$}]{distincts,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{size,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{max\+\_\+length }\end{DoxyParamCaption})}

Computes the length of the Huffman encoding for each distinct input value. Uses package merge algorithm as follows\+:
\begin{DoxyEnumerate}
\item start with an empty list, lets call it list(0), set i = 0
\item add 1 entry to list(i) for each symbol we have and give each a score equal to the probability of the respective symbol
\item merge the 2 symbols of least score and put them in list(i+1), and remove them from list(i). The new score will be the sum of the 2 scores
\item if there is more than 1 symbol left in the current list(i), then goto 3
\item i++
\item if i $<$ 16 goto 2
\item select the n-\/1 elements in the last list with the lowest score (n = the number of symbols)
\item the length of the huffman code for symbol s will be equal to the number of times the symbol occurs in the select elements Go to guru.\+multimedia.\+cx/small-\/tasks-\/for-\/ffmpeg/ for more details
\end{DoxyEnumerate}

All probabilities should be positive integers. The output is sorted by code, not by length.


\begin{DoxyParams}{Parameters}
{\em prob\+\_\+table} & input array of a \mbox{\hyperlink{struct_p_table}{P\+Table}} for each distinct input value \\
\hline
{\em distincts} & output array of a \mbox{\hyperlink{struct_huff_table}{Huff\+Table}} that will be populated by this function \\
\hline
{\em size} & size of the prob\+\_\+table array \\
\hline
{\em max\+\_\+length} & max length of an encoding \\
\hline
\end{DoxyParams}


Definition at line 80 of file mjpegenc\+\_\+huffman.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=317pt]{mjpegenc__huffman_8c_a5b3cc49ac04fb1f0d3b4220c37aac12a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mjpegenc__huffman_8c_a5b3cc49ac04fb1f0d3b4220c37aac12a_icgraph}
\end{center}
\end{figure}
