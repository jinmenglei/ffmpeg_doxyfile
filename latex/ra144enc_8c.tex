\hypertarget{ra144enc_8c}{}\doxysection{E\+:/github/ffmpeg/libavcodec/ra144enc.c File Reference}
\label{ra144enc_8c}\index{E:/github/ffmpeg/libavcodec/ra144enc.c@{E:/github/ffmpeg/libavcodec/ra144enc.c}}
{\ttfamily \#include $<$float.\+h$>$}\newline
{\ttfamily \#include \char`\"{}avcodec.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}audio\+\_\+frame\+\_\+queue.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}celp\+\_\+filters.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mathops.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}put\+\_\+bits.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ra144.\+h\char`\"{}}\newline
Include dependency graph for ra144enc.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{ra144enc_8c_a6d8316c6644418bcc1ca837be4a6a269}{ra144\+\_\+encode\+\_\+close}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx)
\item 
static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{ra144enc_8c_a551d7bb51ec7cda7845105ecde4c4e82}{ra144\+\_\+encode\+\_\+init}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx)
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{ra144enc_8c_add28b04b853133cbc3441925c68f39b5}{quantize}} (\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{eval_8c_aee90379adb0307effb138f4871edbc5c}{value}}, const int16\+\_\+t $\ast$\mbox{\hyperlink{avsscanf_8c_aae0de2108a7eb5b59d9e17d95ef1c1e0}{table}}, unsigned \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{group__lavu__mem__funcs_ga34e10fdac079a9ca4512b8ccd7f20b8a}{size}})
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{ra144enc_8c_a291c2db1c8d28201bc438724b5f2954e}{orthogonalize}} (float $\ast$v, const float $\ast$\mbox{\hyperlink{cbs__jpeg_8c_a134a0c87e88a327dcbeee6de7b0d6282}{u}})
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{ra144enc_8c_af01d9809590822de07a2759410697afa}{get\+\_\+match\+\_\+score}} (float $\ast$\mbox{\hyperlink{tablegen_8txt_ab2c896c6b61dfa6df230fb4219c9bef3}{work}}, const float $\ast$coefs, float $\ast$vect, const float $\ast$ortho1, const float $\ast$ortho2, const float $\ast$\mbox{\hyperlink{filter__design_8txt_ac6f0a759dab43b0d58cd04fb6513534c}{data}}, float $\ast$score, float $\ast$gain)
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{ra144enc_8c_a2479d993981cc68f4cd00fa104c3acd9}{create\+\_\+adapt\+\_\+vect}} (float $\ast$vect, const int16\+\_\+t $\ast$\mbox{\hyperlink{vf__geq_8c_afc61272a374024bcd86d8859783d3d52}{cb}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} lag)
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{ra144enc_8c_abb3e4e5b19ad57d408eceaafade806d4}{adaptive\+\_\+cb\+\_\+search}} (const int16\+\_\+t $\ast$adapt\+\_\+cb, float $\ast$\mbox{\hyperlink{tablegen_8txt_ab2c896c6b61dfa6df230fb4219c9bef3}{work}}, const float $\ast$coefs, float $\ast$\mbox{\hyperlink{filter__design_8txt_ac6f0a759dab43b0d58cd04fb6513534c}{data}})
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{ra144enc_8c_aed6e90c4c465345172e52ecddef69a8c}{find\+\_\+best\+\_\+vect}} (float $\ast$\mbox{\hyperlink{tablegen_8txt_ab2c896c6b61dfa6df230fb4219c9bef3}{work}}, const float $\ast$coefs, const int8\+\_\+t \mbox{\hyperlink{vf__geq_8c_afc61272a374024bcd86d8859783d3d52}{cb}}\mbox{[}$\,$\mbox{]}\mbox{[}\mbox{\hyperlink{crypto_8c_afcf795f5a96fd55561abe69f56224630}{B\+L\+O\+C\+K\+S\+I\+ZE}}\mbox{]}, const float $\ast$ortho1, const float $\ast$ortho2, float $\ast$\mbox{\hyperlink{filter__design_8txt_ac6f0a759dab43b0d58cd04fb6513534c}{data}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$idx, float $\ast$gain)
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{ra144enc_8c_a583e23b51ea09b1f72f0ad11f222741a}{fixed\+\_\+cb\+\_\+search}} (float $\ast$\mbox{\hyperlink{tablegen_8txt_ab2c896c6b61dfa6df230fb4219c9bef3}{work}}, const float $\ast$coefs, float $\ast$\mbox{\hyperlink{filter__design_8txt_ac6f0a759dab43b0d58cd04fb6513534c}{data}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} cba\+\_\+idx, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$cb1\+\_\+idx, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$cb2\+\_\+idx)
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{ra144enc_8c_a5ab5b906a7ccc1a6ff9d3bb94f1ccbd1}{ra144\+\_\+encode\+\_\+subblock}} (\mbox{\hyperlink{struct_r_a144_context}{R\+A144\+Context}} $\ast$ractx, const int16\+\_\+t $\ast$sblock\+\_\+data, const int16\+\_\+t $\ast$lpc\+\_\+coefs, unsigned \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} rms, \mbox{\hyperlink{struct_put_bit_context}{Put\+Bit\+Context}} $\ast$pb)
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{ra144enc_8c_a767b9b43fc6268df4984dac5554d00a6}{ra144\+\_\+encode\+\_\+frame}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx, \mbox{\hyperlink{struct_a_v_packet}{A\+V\+Packet}} $\ast$avpkt, const \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$\mbox{\hyperlink{cbs__vp9__syntax__template_8c_a78a801b08f3801b9059f0450b834984e}{frame}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$got\+\_\+packet\+\_\+ptr)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{struct_a_v_codec}{A\+V\+Codec}} \mbox{\hyperlink{ra144enc_8c_ac92a6e1fc8212bdedd7a0c82283e65b1}{ff\+\_\+ra\+\_\+144\+\_\+encoder}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Real Audio 1.\+0 (14.\+4K) encoder \begin{DoxyAuthor}{Author}
Francesco Lavra \href{mailto:francescolavra@interfree.it}{\texttt{ francescolavra@interfree.\+it}} 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ra144enc_8c_abb3e4e5b19ad57d408eceaafade806d4}\label{ra144enc_8c_abb3e4e5b19ad57d408eceaafade806d4}} 
\index{ra144enc.c@{ra144enc.c}!adaptive\_cb\_search@{adaptive\_cb\_search}}
\index{adaptive\_cb\_search@{adaptive\_cb\_search}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{adaptive\_cb\_search()}{adaptive\_cb\_search()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} adaptive\+\_\+cb\+\_\+search (\begin{DoxyParamCaption}\item[{const int16\+\_\+t $\ast$}]{adapt\+\_\+cb,  }\item[{float $\ast$}]{work,  }\item[{const float $\ast$}]{coefs,  }\item[{float $\ast$}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Search the adaptive codebook for the best entry and gain and remove its contribution from input data


\begin{DoxyParams}{Parameters}
{\em adapt\+\_\+cb} & array from which the adaptive codebook is extracted \\
\hline
{\em work} & array used to calculate L\+P\+C-\/filtered vectors \\
\hline
{\em coefs} & coefficients of the L\+PC filter \\
\hline
{\em data} & input data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index of the best entry of the adaptive codebook 
\end{DoxyReturn}
Re-\/calculate the filtered vector from the vector with maximum match score and remove its contribution from input data.

Definition at line 195 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_abb3e4e5b19ad57d408eceaafade806d4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_abb3e4e5b19ad57d408eceaafade806d4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_a2479d993981cc68f4cd00fa104c3acd9}\label{ra144enc_8c_a2479d993981cc68f4cd00fa104c3acd9}} 
\index{ra144enc.c@{ra144enc.c}!create\_adapt\_vect@{create\_adapt\_vect}}
\index{create\_adapt\_vect@{create\_adapt\_vect}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{create\_adapt\_vect()}{create\_adapt\_vect()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} create\+\_\+adapt\+\_\+vect (\begin{DoxyParamCaption}\item[{float $\ast$}]{vect,  }\item[{const int16\+\_\+t $\ast$}]{cb,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{lag }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Create a vector from the adaptive codebook at a given lag value


\begin{DoxyParams}{Parameters}
{\em vect} & array where vector is stored \\
\hline
{\em cb} & adaptive codebook \\
\hline
{\em lag} & lag value \\
\hline
\end{DoxyParams}


Definition at line 172 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{ra144enc_8c_a2479d993981cc68f4cd00fa104c3acd9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_a2479d993981cc68f4cd00fa104c3acd9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_aed6e90c4c465345172e52ecddef69a8c}\label{ra144enc_8c_aed6e90c4c465345172e52ecddef69a8c}} 
\index{ra144enc.c@{ra144enc.c}!find\_best\_vect@{find\_best\_vect}}
\index{find\_best\_vect@{find\_best\_vect}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{find\_best\_vect()}{find\_best\_vect()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} find\+\_\+best\+\_\+vect (\begin{DoxyParamCaption}\item[{float $\ast$}]{work,  }\item[{const float $\ast$}]{coefs,  }\item[{const int8\+\_\+t}]{cb\mbox{[}$\,$\mbox{]}\mbox{[}\+B\+L\+O\+C\+K\+S\+I\+Z\+E\mbox{]},  }\item[{const float $\ast$}]{ortho1,  }\item[{const float $\ast$}]{ortho2,  }\item[{float $\ast$}]{data,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$}]{idx,  }\item[{float $\ast$}]{gain }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Find the best vector of a fixed codebook by applying an L\+PC filter to codebook entries, possibly orthogonalizing them to up to two other vectors and matching the results with input data.


\begin{DoxyParams}{Parameters}
{\em work} & array used to calculate the filtered vectors \\
\hline
{\em coefs} & coefficients of the L\+PC filter \\
\hline
{\em cb} & fixed codebook \\
\hline
{\em ortho1} & first vector against which orthogonalization is performed \\
\hline
{\em ortho2} & second vector against which orthogonalization is performed \\
\hline
{\em data} & input data \\
\hline
{\em idx} & pointer to variable where the index of the best codebook entry is returned \\
\hline
{\em gain} & pointer to variable where the gain of the best codebook entry is returned \\
\hline
\end{DoxyParams}


Definition at line 243 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_aed6e90c4c465345172e52ecddef69a8c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_aed6e90c4c465345172e52ecddef69a8c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_a583e23b51ea09b1f72f0ad11f222741a}\label{ra144enc_8c_a583e23b51ea09b1f72f0ad11f222741a}} 
\index{ra144enc.c@{ra144enc.c}!fixed\_cb\_search@{fixed\_cb\_search}}
\index{fixed\_cb\_search@{fixed\_cb\_search}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{fixed\_cb\_search()}{fixed\_cb\_search()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} fixed\+\_\+cb\+\_\+search (\begin{DoxyParamCaption}\item[{float $\ast$}]{work,  }\item[{const float $\ast$}]{coefs,  }\item[{float $\ast$}]{data,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{cba\+\_\+idx,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$}]{cb1\+\_\+idx,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$}]{cb2\+\_\+idx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Search the two fixed codebooks for the best entry and gain


\begin{DoxyParams}{Parameters}
{\em work} & array used to calculate L\+P\+C-\/filtered vectors \\
\hline
{\em coefs} & coefficients of the L\+PC filter \\
\hline
{\em data} & input data \\
\hline
{\em cba\+\_\+idx} & index of the best entry of the adaptive codebook \\
\hline
{\em cb1\+\_\+idx} & pointer to variable where the index of the best entry of the first fixed codebook is returned \\
\hline
{\em cb2\+\_\+idx} & pointer to variable where the index of the best entry of the second fixed codebook is returned \\
\hline
\end{DoxyParams}
The filtered vector from the adaptive codebook can be retrieved from work, because this function is called just after \mbox{\hyperlink{ra144enc_8c_abb3e4e5b19ad57d408eceaafade806d4}{adaptive\+\_\+cb\+\_\+search()}}.

Re-\/calculate the filtered vector from the vector with maximum match score and remove its contribution from input data.

Definition at line 278 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_a583e23b51ea09b1f72f0ad11f222741a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_a583e23b51ea09b1f72f0ad11f222741a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_af01d9809590822de07a2759410697afa}\label{ra144enc_8c_af01d9809590822de07a2759410697afa}} 
\index{ra144enc.c@{ra144enc.c}!get\_match\_score@{get\_match\_score}}
\index{get\_match\_score@{get\_match\_score}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{get\_match\_score()}{get\_match\_score()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} get\+\_\+match\+\_\+score (\begin{DoxyParamCaption}\item[{float $\ast$}]{work,  }\item[{const float $\ast$}]{coefs,  }\item[{float $\ast$}]{vect,  }\item[{const float $\ast$}]{ortho1,  }\item[{const float $\ast$}]{ortho2,  }\item[{const float $\ast$}]{data,  }\item[{float $\ast$}]{score,  }\item[{float $\ast$}]{gain }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Calculate match score and gain of an L\+P\+C-\/filtered vector with respect to input data, possibly orthogonalizing it to up to two other vectors.


\begin{DoxyParams}{Parameters}
{\em work} & array used to calculate the filtered vector \\
\hline
{\em coefs} & coefficients of the L\+PC filter \\
\hline
{\em vect} & original vector \\
\hline
{\em ortho1} & first vector against which orthogonalization is performed \\
\hline
{\em ortho2} & second vector against which orthogonalization is performed \\
\hline
{\em data} & input data \\
\hline
{\em score} & pointer to variable where match score is returned \\
\hline
{\em gain} & pointer to variable where gain is returned \\
\hline
\end{DoxyParams}


Definition at line 139 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_af01d9809590822de07a2759410697afa_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_af01d9809590822de07a2759410697afa_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_a291c2db1c8d28201bc438724b5f2954e}\label{ra144enc_8c_a291c2db1c8d28201bc438724b5f2954e}} 
\index{ra144enc.c@{ra144enc.c}!orthogonalize@{orthogonalize}}
\index{orthogonalize@{orthogonalize}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{orthogonalize()}{orthogonalize()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} orthogonalize (\begin{DoxyParamCaption}\item[{float $\ast$}]{v,  }\item[{const float $\ast$}]{u }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Orthogonalize a vector to another vector


\begin{DoxyParams}{Parameters}
{\em v} & vector to orthogonalize \\
\hline
{\em u} & vector against which orthogonalization is performed \\
\hline
\end{DoxyParams}


Definition at line 111 of file ra144enc.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_a291c2db1c8d28201bc438724b5f2954e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_add28b04b853133cbc3441925c68f39b5}\label{ra144enc_8c_add28b04b853133cbc3441925c68f39b5}} 
\index{ra144enc.c@{ra144enc.c}!quantize@{quantize}}
\index{quantize@{quantize}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{quantize()}{quantize()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} quantize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{value,  }\item[{const int16\+\_\+t $\ast$}]{table,  }\item[{unsigned \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\hyperlink{struct_quantize}{Quantize}} a value by searching a sorted table for the element with the nearest value


\begin{DoxyParams}{Parameters}
{\em value} & value to quantize \\
\hline
{\em table} & array containing the quantization table \\
\hline
{\em size} & size of the quantization table \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index of the quantization table corresponding to the element with the nearest value 
\end{DoxyReturn}


Definition at line 86 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{ra144enc_8c_add28b04b853133cbc3441925c68f39b5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{ra144enc_8c_add28b04b853133cbc3441925c68f39b5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_a6d8316c6644418bcc1ca837be4a6a269}\label{ra144enc_8c_a6d8316c6644418bcc1ca837be4a6a269}} 
\index{ra144enc.c@{ra144enc.c}!ra144\_encode\_close@{ra144\_encode\_close}}
\index{ra144\_encode\_close@{ra144\_encode\_close}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{ra144\_encode\_close()}{ra144\_encode\_close()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ra144\+\_\+encode\+\_\+close (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 38 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=316pt]{ra144enc_8c_a6d8316c6644418bcc1ca837be4a6a269_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_a767b9b43fc6268df4984dac5554d00a6}\label{ra144enc_8c_a767b9b43fc6268df4984dac5554d00a6}} 
\index{ra144enc.c@{ra144enc.c}!ra144\_encode\_frame@{ra144\_encode\_frame}}
\index{ra144\_encode\_frame@{ra144\_encode\_frame}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{ra144\_encode\_frame()}{ra144\_encode\_frame()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ra144\+\_\+encode\+\_\+frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx,  }\item[{\mbox{\hyperlink{struct_a_v_packet}{A\+V\+Packet}} $\ast$}]{avpkt,  }\item[{const \mbox{\hyperlink{struct_a_v_frame}{A\+V\+Frame}} $\ast$}]{frame,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} $\ast$}]{got\+\_\+packet\+\_\+ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

$<$ reflection coefficients of the frame

$<$ R\+MS of the reflection coefficients

Since the L\+PC coefficients are calculated on a frame centered over the fourth subframe, to encode a given frame, data from the next frame is needed. In each call to this function, the previous frame (whose data are saved in the encoder context) is encoded, and data from the current frame are saved in the encoder context to be used in the next function call.

T\+O\+DO\+: apply perceptual weighting of the input speech through bandwidth expansion of the L\+PC filter.

The filter is unstable\+: use the coefficients of the previous frame.

Definition at line 427 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{ra144enc_8c_a767b9b43fc6268df4984dac5554d00a6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_a551d7bb51ec7cda7845105ecde4c4e82}\label{ra144enc_8c_a551d7bb51ec7cda7845105ecde4c4e82}} 
\index{ra144enc.c@{ra144enc.c}!ra144\_encode\_init@{ra144\_encode\_init}}
\index{ra144\_encode\_init@{ra144\_encode\_init}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{ra144\_encode\_init()}{ra144\_encode\_init()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{attributes_8h_abeeb324fff79a5335d36774704e2475c}{av\+\_\+cold}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ra144\+\_\+encode\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 47 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_a551d7bb51ec7cda7845105ecde4c4e82_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ra144enc_8c_a5ab5b906a7ccc1a6ff9d3bb94f1ccbd1}\label{ra144enc_8c_a5ab5b906a7ccc1a6ff9d3bb94f1ccbd1}} 
\index{ra144enc.c@{ra144enc.c}!ra144\_encode\_subblock@{ra144\_encode\_subblock}}
\index{ra144\_encode\_subblock@{ra144\_encode\_subblock}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{ra144\_encode\_subblock()}{ra144\_encode\_subblock()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ra144\+\_\+encode\+\_\+subblock (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_r_a144_context}{R\+A144\+Context}} $\ast$}]{ractx,  }\item[{const int16\+\_\+t $\ast$}]{sblock\+\_\+data,  }\item[{const int16\+\_\+t $\ast$}]{lpc\+\_\+coefs,  }\item[{unsigned \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{rms,  }\item[{\mbox{\hyperlink{struct_put_bit_context}{Put\+Bit\+Context}} $\ast$}]{pb }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Encode a subblock of the current frame


\begin{DoxyParams}{Parameters}
{\em ractx} & encoder context \\
\hline
{\em sblock\+\_\+data} & input data of the subblock \\
\hline
{\em lpc\+\_\+coefs} & coefficients of the L\+PC filter \\
\hline
{\em rms} & R\+MS of the reflection coefficients \\
\hline
{\em pb} & pointer to \mbox{\hyperlink{struct_put_bit_context}{Put\+Bit\+Context}} of the current frame \\
\hline
\end{DoxyParams}
Calculate the zero-\/input response of the L\+PC filter and subtract it from input data.

\mbox{\hyperlink{struct_codebook}{Codebook}} search is performed without taking into account the contribution of the previous subblock, since it has been just subtracted from input data.

The filtered vector from the adaptive codebook can be retrieved from work, see implementation of \mbox{\hyperlink{ra144enc_8c_abb3e4e5b19ad57d408eceaafade806d4}{adaptive\+\_\+cb\+\_\+search()}}.

Definition at line 327 of file ra144enc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ra144enc_8c_a5ab5b906a7ccc1a6ff9d3bb94f1ccbd1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=345pt]{ra144enc_8c_a5ab5b906a7ccc1a6ff9d3bb94f1ccbd1_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{ra144enc_8c_ac92a6e1fc8212bdedd7a0c82283e65b1}\label{ra144enc_8c_ac92a6e1fc8212bdedd7a0c82283e65b1}} 
\index{ra144enc.c@{ra144enc.c}!ff\_ra\_144\_encoder@{ff\_ra\_144\_encoder}}
\index{ff\_ra\_144\_encoder@{ff\_ra\_144\_encoder}!ra144enc.c@{ra144enc.c}}
\doxysubsubsection{\texorpdfstring{ff\_ra\_144\_encoder}{ff\_ra\_144\_encoder}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_v_codec}{A\+V\+Codec}} ff\+\_\+ra\+\_\+144\+\_\+encoder}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{= \{}
\DoxyCodeLine{    .name           = \textcolor{stringliteral}{"{}real\_144"{}},}
\DoxyCodeLine{    .long\_name      = \mbox{\hyperlink{libavutil_2internal_8h_a3c0fa12fafe59c44d4b16e60d8385637}{NULL\_IF\_CONFIG\_SMALL}}(\textcolor{stringliteral}{"{}RealAudio 1.0 (14.4K)"{}}),}
\DoxyCodeLine{    .type           = \mbox{\hyperlink{group__lavu__misc_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a}{AVMEDIA\_TYPE\_AUDIO}},}
\DoxyCodeLine{    .id             = \mbox{\hyperlink{group__lavc__core_ggaadca229ad2c20e060a14fec08a5cc7cead80651a95ce787bfdfc7a259702e9e7b}{AV\_CODEC\_ID\_RA\_144}},}
\DoxyCodeLine{    .priv\_data\_size = \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ra144_8h_a7a00f42bef78b54786eb003ea9c1e384}{RA144Context}}),}
\DoxyCodeLine{    .\mbox{\hyperlink{avrndec_8c_a41c0c9c8aa8e1fd12d65b18dd6948b09}{init}}           = \mbox{\hyperlink{ra144enc_8c_a551d7bb51ec7cda7845105ecde4c4e82}{ra144\_encode\_init}},}
\DoxyCodeLine{    .encode2        = \mbox{\hyperlink{ra144enc_8c_a767b9b43fc6268df4984dac5554d00a6}{ra144\_encode\_frame}},}
\DoxyCodeLine{    .close          = \mbox{\hyperlink{ra144enc_8c_a6d8316c6644418bcc1ca837be4a6a269}{ra144\_encode\_close}},}
\DoxyCodeLine{    .capabilities   = \mbox{\hyperlink{group__lavc__core_ga3f55f5bcfbb12e06c7cb1195028855e6}{AV\_CODEC\_CAP\_DELAY}} | \mbox{\hyperlink{group__lavc__core_gaded181844ec3ab19897704086dc2ee03}{AV\_CODEC\_CAP\_SMALL\_LAST\_FRAME}},}
\DoxyCodeLine{    .\mbox{\hyperlink{adpcmenc_8c_a0b94bda9858853d90b77d15331ca0ae1}{sample\_fmts}}    = (\textcolor{keyword}{const} \textcolor{keyword}{enum} \mbox{\hyperlink{group__lavu__sampfmts_gaf9a51ca15301871723577c730b5865c5}{AVSampleFormat}}[])\{ \mbox{\hyperlink{group__lavu__sampfmts_ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af}{AV\_SAMPLE\_FMT\_S16}},}
\DoxyCodeLine{                                                     \mbox{\hyperlink{group__lavu__sampfmts_ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912}{AV\_SAMPLE\_FMT\_NONE}} \},}
\DoxyCodeLine{    .supported\_samplerates = (\textcolor{keyword}{const} \textcolor{keywordtype}{int}[])\{ 8000, 0 \},}
\DoxyCodeLine{    .channel\_layouts = (\textcolor{keyword}{const} uint64\_t[]) \{ \mbox{\hyperlink{group__channel__mask__c_ga53d6da2dcd56f5f87c7afd8b33fa15ba}{AV\_CH\_LAYOUT\_MONO}}, 0 \},}
\DoxyCodeLine{\}}

\end{DoxyCode}


Definition at line 542 of file ra144enc.\+c.

