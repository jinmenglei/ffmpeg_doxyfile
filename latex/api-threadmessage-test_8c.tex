\hypertarget{api-threadmessage-test_8c}{}\doxysection{E\+:/github/ffmpeg/tests/api/api-\/threadmessage-\/test.c File Reference}
\label{api-threadmessage-test_8c}\index{E:/github/ffmpeg/tests/api/api-\/threadmessage-\/test.c@{E:/github/ffmpeg/tests/api/api-\/threadmessage-\/test.c}}
{\ttfamily \#include \char`\"{}libavutil/avassert.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/avstring.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/frame.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/threadmessage.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/thread.\+h\char`\"{}}\newline
Include dependency graph for api-\/threadmessage-\/test.c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{api-threadmessage-test_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsender__data}{sender\+\_\+data}}
\item 
struct \mbox{\hyperlink{structreceiver__data}{receiver\+\_\+data}}
\item 
struct \mbox{\hyperlink{structmessage}{message}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{api-threadmessage-test_8c_a94630370ae389fb1189282fa0742f310}{M\+A\+G\+IC}}~0xdeadc0de
\item 
\#define \mbox{\hyperlink{api-threadmessage-test_8c_a14ae67aab5b866583136944a74ac2386}{S\+P\+A\+W\+N\+\_\+\+T\+H\+R\+E\+A\+DS}}(\mbox{\hyperlink{hwdevice_8c_ae4165b400ecd5a84616b429f6516512b}{type}})
\item 
\#define \mbox{\hyperlink{api-threadmessage-test_8c_aed2a9175e839be84c2b22ab698bbbc07}{W\+A\+I\+T\+\_\+\+T\+H\+R\+E\+A\+DS}}(\mbox{\hyperlink{hwdevice_8c_ae4165b400ecd5a84616b429f6516512b}{type}})
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{api-threadmessage-test_8c_a33d6e08d50546abe934be8826a13984c}{free\+\_\+frame}} (\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$\mbox{\hyperlink{libavcodec_2jacosubdec_8c_ac3a73711fd7f8a50db1c4b62e41cf852}{arg}})
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$ \mbox{\hyperlink{api-threadmessage-test_8c_a890bf9b59342c329cf3bf41e25d5e51c}{sender\+\_\+thread}} (\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$\mbox{\hyperlink{libavcodec_2jacosubdec_8c_ac3a73711fd7f8a50db1c4b62e41cf852}{arg}})
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$ \mbox{\hyperlink{api-threadmessage-test_8c_acdc47097eb9b40e6e796467c13137d1c}{receiver\+\_\+thread}} (\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$\mbox{\hyperlink{libavcodec_2jacosubdec_8c_ac3a73711fd7f8a50db1c4b62e41cf852}{arg}})
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{api-threadmessage-test_8c_a50587acac0a4bc867877c42e8f20f8ac}{get\+\_\+workload}} (\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} minv, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} maxv)
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{api-threadmessage-test_8c_a0c99d968a34e803d378692bde2e3f18f}{main}} (\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ac, char $\ast$$\ast$av)
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{api-threadmessage-test_8c_a94630370ae389fb1189282fa0742f310}\label{api-threadmessage-test_8c_a94630370ae389fb1189282fa0742f310}} 
\index{api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}!MAGIC@{MAGIC}}
\index{MAGIC@{MAGIC}!api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}}
\doxysubsubsection{\texorpdfstring{MAGIC}{MAGIC}}
{\footnotesize\ttfamily \#define M\+A\+G\+IC~0xdeadc0de}



Definition at line 53 of file api-\/threadmessage-\/test.\+c.

\mbox{\Hypertarget{api-threadmessage-test_8c_a14ae67aab5b866583136944a74ac2386}\label{api-threadmessage-test_8c_a14ae67aab5b866583136944a74ac2386}} 
\index{api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}!SPAWN\_THREADS@{SPAWN\_THREADS}}
\index{SPAWN\_THREADS@{SPAWN\_THREADS}!api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}}
\doxysubsubsection{\texorpdfstring{SPAWN\_THREADS}{SPAWN\_THREADS}}
{\footnotesize\ttfamily \#define S\+P\+A\+W\+N\+\_\+\+T\+H\+R\+E\+A\+DS(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{hwdevice_8c_ae4165b400ecd5a84616b429f6516512b}{type}} }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{do} \{                                                \(\backslash\)}
\DoxyCodeLine{    for (\mbox{\hyperlink{input_8c_acb559820d9ca11295b4500f179ef6392}{i}} = 0; \mbox{\hyperlink{input_8c_acb559820d9ca11295b4500f179ef6392}{i}} < nb\_\#\#\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}}\#\#\mbox{\hyperlink{cbs__vp9_8c_a5950eda76c8ffc67651de936cd8c79ec}{s}}; \mbox{\hyperlink{input_8c_acb559820d9ca11295b4500f179ef6392}{i}}++) \{                                        \(\backslash\)}
\DoxyCodeLine{        struct \mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}}\#\#\_data *\mbox{\hyperlink{regdef_8h_ab2c359e6c325062d33a4152752d8a820}{td}} = \&\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}}\#\#\mbox{\hyperlink{cbs__vp9_8c_a5950eda76c8ffc67651de936cd8c79ec}{s}}[\mbox{\hyperlink{input_8c_acb559820d9ca11295b4500f179ef6392}{i}}];                                   \(\backslash\)}
\DoxyCodeLine{                                                                                \(\backslash\)}
\DoxyCodeLine{        td-\/>id = \mbox{\hyperlink{input_8c_acb559820d9ca11295b4500f179ef6392}{i}};                                                             \(\backslash\)}
\DoxyCodeLine{        td-\/>queue = queue;                                                      \(\backslash\)}
\DoxyCodeLine{        td-\/>workload = \mbox{\hyperlink{api-threadmessage-test_8c_a50587acac0a4bc867877c42e8f20f8ac}{get\_workload}}(\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}}\#\#\_min\_load, \mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}}\#\#\_max\_load);          \(\backslash\)}
\DoxyCodeLine{                                                                                \(\backslash\)}
\DoxyCodeLine{        ret = \mbox{\hyperlink{os2threads_8h_a9b6e74e145dcb6f426dd83bcc51aa217}{pthread\_create}}(\&\mbox{\hyperlink{regdef_8h_ab2c359e6c325062d33a4152752d8a820}{td}}-\/>tid, \mbox{\hyperlink{coverity_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}, \mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}}\#\#\_thread, \mbox{\hyperlink{regdef_8h_ab2c359e6c325062d33a4152752d8a820}{td}});                \(\backslash\)}
\DoxyCodeLine{        if (\mbox{\hyperlink{filter__design_8txt_af1ec77bdca1b30e8153fc5da88f603db}{ret}}) \{                                                              \(\backslash\)}
\DoxyCodeLine{            const \textcolor{keywordtype}{int} err = \mbox{\hyperlink{filter__design_8txt_adf2fb515710d47541f7150ecd2950e76}{AVERROR}}(\mbox{\hyperlink{filter__design_8txt_af1ec77bdca1b30e8153fc5da88f603db}{ret}});                                       \(\backslash\)}
\DoxyCodeLine{            av\_log(\mbox{\hyperlink{coverity_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}, \mbox{\hyperlink{group__lavu__log__constants_gaffe151ff4cd8a24b2e77ac8d9616c85c}{AV\_LOG\_ERROR}}, \textcolor{stringliteral}{"{}Unable to start "{}} \mbox{\hyperlink{group__preproc__misc_ga700cb39b719fc7069d15c134129b1ca0}{AV\_STRINGIFY}}(\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}})    \(\backslash\)}
\DoxyCodeLine{                   \textcolor{stringliteral}{"{} thread: \%s\(\backslash\)n"{}}, \mbox{\hyperlink{group__lavu__error_gac4f6e109c242c81aeee21868d3f35e12}{av\_err2str}}(err));                           \(\backslash\)}
\DoxyCodeLine{            goto \mbox{\hyperlink{avrndec_8c_a13191ba45577b1d4f9b37d64df91eb55}{end}};                                                           \(\backslash\)}
\DoxyCodeLine{        \}                                                                       \(\backslash\)}
\DoxyCodeLine{    \}                                                                           \(\backslash\)}
\DoxyCodeLine{\} \textcolor{keywordflow}{while} (0)}

\end{DoxyCode}
\mbox{\Hypertarget{api-threadmessage-test_8c_aed2a9175e839be84c2b22ab698bbbc07}\label{api-threadmessage-test_8c_aed2a9175e839be84c2b22ab698bbbc07}} 
\index{api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}!WAIT\_THREADS@{WAIT\_THREADS}}
\index{WAIT\_THREADS@{WAIT\_THREADS}!api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}}
\doxysubsubsection{\texorpdfstring{WAIT\_THREADS}{WAIT\_THREADS}}
{\footnotesize\ttfamily \#define W\+A\+I\+T\+\_\+\+T\+H\+R\+E\+A\+DS(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{hwdevice_8c_ae4165b400ecd5a84616b429f6516512b}{type}} }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{do} \{                                                 \(\backslash\)}
\DoxyCodeLine{    for (\mbox{\hyperlink{input_8c_acb559820d9ca11295b4500f179ef6392}{i}} = 0; \mbox{\hyperlink{input_8c_acb559820d9ca11295b4500f179ef6392}{i}} < nb\_\#\#\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}}\#\#\mbox{\hyperlink{cbs__vp9_8c_a5950eda76c8ffc67651de936cd8c79ec}{s}}; \mbox{\hyperlink{input_8c_acb559820d9ca11295b4500f179ef6392}{i}}++) \{                                        \(\backslash\)}
\DoxyCodeLine{        struct \mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}}\#\#\_data *\mbox{\hyperlink{regdef_8h_ab2c359e6c325062d33a4152752d8a820}{td}} = \&\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}}\#\#\mbox{\hyperlink{cbs__vp9_8c_a5950eda76c8ffc67651de936cd8c79ec}{s}}[\mbox{\hyperlink{input_8c_acb559820d9ca11295b4500f179ef6392}{i}}];                                   \(\backslash\)}
\DoxyCodeLine{                                                                                \(\backslash\)}
\DoxyCodeLine{        ret = \mbox{\hyperlink{os2threads_8h_a5a76bdbebd80f3d24df2a42cf08e98d6}{pthread\_join}}(\mbox{\hyperlink{regdef_8h_ab2c359e6c325062d33a4152752d8a820}{td}}-\/>tid, \mbox{\hyperlink{coverity_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});                                      \(\backslash\)}
\DoxyCodeLine{        if (\mbox{\hyperlink{filter__design_8txt_af1ec77bdca1b30e8153fc5da88f603db}{ret}}) \{                                                              \(\backslash\)}
\DoxyCodeLine{            const \textcolor{keywordtype}{int} err = \mbox{\hyperlink{filter__design_8txt_adf2fb515710d47541f7150ecd2950e76}{AVERROR}}(\mbox{\hyperlink{filter__design_8txt_af1ec77bdca1b30e8153fc5da88f603db}{ret}});                                       \(\backslash\)}
\DoxyCodeLine{            av\_log(\mbox{\hyperlink{coverity_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}, \mbox{\hyperlink{group__lavu__log__constants_gaffe151ff4cd8a24b2e77ac8d9616c85c}{AV\_LOG\_ERROR}}, \textcolor{stringliteral}{"{}Unable to join "{}} \mbox{\hyperlink{group__preproc__misc_ga700cb39b719fc7069d15c134129b1ca0}{AV\_STRINGIFY}}(\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}})     \(\backslash\)}
\DoxyCodeLine{                   \textcolor{stringliteral}{"{} thread: \%s\(\backslash\)n"{}}, \mbox{\hyperlink{group__lavu__error_gac4f6e109c242c81aeee21868d3f35e12}{av\_err2str}}(err));                           \(\backslash\)}
\DoxyCodeLine{            goto \mbox{\hyperlink{avrndec_8c_a13191ba45577b1d4f9b37d64df91eb55}{end}};                                                           \(\backslash\)}
\DoxyCodeLine{        \}                                                                       \(\backslash\)}
\DoxyCodeLine{    \}                                                                           \(\backslash\)}
\DoxyCodeLine{\} \textcolor{keywordflow}{while} (0)}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{api-threadmessage-test_8c_a33d6e08d50546abe934be8826a13984c}\label{api-threadmessage-test_8c_a33d6e08d50546abe934be8826a13984c}} 
\index{api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}!free\_frame@{free\_frame}}
\index{free\_frame@{free\_frame}!api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}}
\doxysubsubsection{\texorpdfstring{free\_frame()}{free\_frame()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} free\+\_\+frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{arg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 55 of file api-\/threadmessage-\/test.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{api-threadmessage-test_8c_a33d6e08d50546abe934be8826a13984c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=216pt]{api-threadmessage-test_8c_a33d6e08d50546abe934be8826a13984c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{api-threadmessage-test_8c_a50587acac0a4bc867877c42e8f20f8ac}\label{api-threadmessage-test_8c_a50587acac0a4bc867877c42e8f20f8ac}} 
\index{api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}!get\_workload@{get\_workload}}
\index{get\_workload@{get\_workload}!api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}}
\doxysubsubsection{\texorpdfstring{get\_workload()}{get\_workload()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} get\+\_\+workload (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{minv,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{maxv }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 159 of file api-\/threadmessage-\/test.\+c.

\mbox{\Hypertarget{api-threadmessage-test_8c_a0c99d968a34e803d378692bde2e3f18f}\label{api-threadmessage-test_8c_a0c99d968a34e803d378692bde2e3f18f}} 
\index{api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}!main@{main}}
\index{main@{main}!api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} main (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{ac,  }\item[{char $\ast$$\ast$}]{av }\end{DoxyParamCaption})}



Definition at line 164 of file api-\/threadmessage-\/test.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{api-threadmessage-test_8c_a0c99d968a34e803d378692bde2e3f18f_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{api-threadmessage-test_8c_acdc47097eb9b40e6e796467c13137d1c}\label{api-threadmessage-test_8c_acdc47097eb9b40e6e796467c13137d1c}} 
\index{api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}!receiver\_thread@{receiver\_thread}}
\index{receiver\_thread@{receiver\_thread}!api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}}
\doxysubsubsection{\texorpdfstring{receiver\_thread()}{receiver\_thread()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}}$\ast$ receiver\+\_\+thread (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{arg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 126 of file api-\/threadmessage-\/test.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{api-threadmessage-test_8c_acdc47097eb9b40e6e796467c13137d1c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{api-threadmessage-test_8c_a890bf9b59342c329cf3bf41e25d5e51c}\label{api-threadmessage-test_8c_a890bf9b59342c329cf3bf41e25d5e51c}} 
\index{api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}!sender\_thread@{sender\_thread}}
\index{sender\_thread@{sender\_thread}!api-\/threadmessage-\/test.c@{api-\/threadmessage-\/test.c}}
\doxysubsubsection{\texorpdfstring{sender\_thread()}{sender\_thread()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}}$\ast$ sender\+\_\+thread (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{arg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 62 of file api-\/threadmessage-\/test.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{api-threadmessage-test_8c_a890bf9b59342c329cf3bf41e25d5e51c_cgraph}
\end{center}
\end{figure}
