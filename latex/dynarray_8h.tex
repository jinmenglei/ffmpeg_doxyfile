\hypertarget{dynarray_8h}{}\doxysection{E\+:/github/ffmpeg/libavutil/dynarray.h File Reference}
\label{dynarray_8h}\index{E:/github/ffmpeg/libavutil/dynarray.h@{E:/github/ffmpeg/libavutil/dynarray.h}}
{\ttfamily \#include \char`\"{}log.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mem.\+h\char`\"{}}\newline
Include dependency graph for dynarray.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dynarray_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{dynarray_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{dynarray_8h_a4da3a0585a83ab92b194360015827dda}{F\+F\+\_\+\+D\+Y\+N\+A\+R\+R\+A\+Y\+\_\+\+A\+DD}}(av\+\_\+size\+\_\+max,  av\+\_\+elt\+\_\+size,  av\+\_\+array,  av\+\_\+size,  av\+\_\+success,  av\+\_\+failure)
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{dynarray_8h_a4da3a0585a83ab92b194360015827dda}\label{dynarray_8h_a4da3a0585a83ab92b194360015827dda}} 
\index{dynarray.h@{dynarray.h}!FF\_DYNARRAY\_ADD@{FF\_DYNARRAY\_ADD}}
\index{FF\_DYNARRAY\_ADD@{FF\_DYNARRAY\_ADD}!dynarray.h@{dynarray.h}}
\doxysubsubsection{\texorpdfstring{FF\_DYNARRAY\_ADD}{FF\_DYNARRAY\_ADD}}
{\footnotesize\ttfamily \#define F\+F\+\_\+\+D\+Y\+N\+A\+R\+R\+A\+Y\+\_\+\+A\+DD(\begin{DoxyParamCaption}\item[{}]{av\+\_\+size\+\_\+max,  }\item[{}]{av\+\_\+elt\+\_\+size,  }\item[{}]{av\+\_\+array,  }\item[{}]{av\+\_\+size,  }\item[{}]{av\+\_\+success,  }\item[{}]{av\+\_\+failure }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{do} \{ \(\backslash\)}
\DoxyCodeLine{        size\_t av\_size\_new = (av\_size); \(\backslash\)}
\DoxyCodeLine{        if (!((av\_size) \& ((av\_size) -\/ 1))) \{ \(\backslash\)}
\DoxyCodeLine{            av\_size\_new = (av\_size) ? (av\_size) << 1 : 1; \(\backslash\)}
\DoxyCodeLine{            if (av\_size\_new > (av\_size\_max) / (av\_elt\_size)) \{ \(\backslash\)}
\DoxyCodeLine{                av\_size\_new = 0; \(\backslash\)}
\DoxyCodeLine{            \} \textcolor{keywordflow}{else} \{ \(\backslash\)}
\DoxyCodeLine{                void *av\_array\_new = \(\backslash\)}
\DoxyCodeLine{                    av\_realloc((av\_array), av\_size\_new * (av\_elt\_size)); \(\backslash\)}
\DoxyCodeLine{                if (!av\_array\_new) \(\backslash\)}
\DoxyCodeLine{                    av\_size\_new = 0; \(\backslash\)}
\DoxyCodeLine{                else \(\backslash\)}
\DoxyCodeLine{                    (av\_array) = av\_array\_new; \(\backslash\)}
\DoxyCodeLine{            \} \(\backslash\)}
\DoxyCodeLine{        \} \(\backslash\)}
\DoxyCodeLine{        if (av\_size\_new) \{ \(\backslash\)}
\DoxyCodeLine{            \{ av\_success \} \(\backslash\)}
\DoxyCodeLine{            (av\_size)++; \(\backslash\)}
\DoxyCodeLine{        \} \textcolor{keywordflow}{else} \{ \(\backslash\)}
\DoxyCodeLine{            av\_failure \(\backslash\)}
\DoxyCodeLine{        \} \(\backslash\)}
\DoxyCodeLine{    \} \textcolor{keywordflow}{while} (0)}

\end{DoxyCode}
Add an element to a dynamic array.

The array is reallocated when its number of elements reaches powers of 2. Therefore, the amortized cost of adding an element is constant.

In case of success, the pointer to the array is updated in order to point to the new grown array, and the size is incremented.


\begin{DoxyParams}{Parameters}
{\em av\+\_\+size\+\_\+max} & maximum size of the array, usually the M\+AX macro of the type of the size \\
\hline
{\em av\+\_\+elt\+\_\+size} & size of the elements in the array, in bytes \\
\hline
{\em av\+\_\+array} & pointer to the array, must be a lvalue \\
\hline
{\em av\+\_\+size} & size of the array, must be an integer lvalue \\
\hline
{\em av\+\_\+success} & statement to execute on success; at this point, the size variable is not yet incremented \\
\hline
{\em av\+\_\+failure} & statement to execute on failure; if this happens, the array and size are not changed; the statement can end with a return or a goto \\
\hline
\end{DoxyParams}


Definition at line 45 of file dynarray.\+h.

