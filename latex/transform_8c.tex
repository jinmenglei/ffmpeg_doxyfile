\hypertarget{transform_8c}{}\doxysection{E\+:/github/ffmpeg/libavfilter/transform.c File Reference}
\label{transform_8c}\index{E:/github/ffmpeg/libavfilter/transform.c@{E:/github/ffmpeg/libavfilter/transform.c}}
{\ttfamily \#include \char`\"{}libavutil/common.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}libavutil/avassert.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}transform.\+h\char`\"{}}\newline
Include dependency graph for transform.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{transform_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{transform_8c_a522e27503127092d2ab046fde760a37a}{I\+N\+T\+E\+R\+P\+O\+L\+A\+T\+E\+\_\+\+M\+E\+T\+H\+OD}}(\mbox{\hyperlink{checkasm_8c_a8f8f80d37794cde9472343e4487ba3eb}{name}})
\item 
\#define \mbox{\hyperlink{transform_8c_a943ace7d892ef7f3b7c965d386f7166e}{P\+I\+X\+EL}}(\mbox{\hyperlink{vf__colormatrix_8c_ad116363516b0293a59b40e02af04a018}{img}},  x,  y,  \mbox{\hyperlink{sw__rgb_8c_aba9ed0487b0aa23eba534648df8384c0}{w}},  \mbox{\hyperlink{sw__rgb_8c_a1f1dfeb2f802fe99f37fe91867b84456}{h}},  \mbox{\hyperlink{mace_8c_a08f66a6870d87afcd5dc1b60d1019692}{stride}},  def)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{transform_8c_a168d39399bd00786a3c981924c727f08}{I\+N\+T\+E\+R\+P\+O\+L\+A\+T\+E\+\_\+\+M\+E\+T\+H\+OD}} (interpolate\+\_\+nearest)
\item 
\mbox{\hyperlink{transform_8c_a45da9742b9f87f1476b119610cbf3505}{I\+N\+T\+E\+R\+P\+O\+L\+A\+T\+E\+\_\+\+M\+E\+T\+H\+OD}} (interpolate\+\_\+bilinear)
\item 
\mbox{\hyperlink{transform_8c_acdc3b477356268b1db7e878642374762}{I\+N\+T\+E\+R\+P\+O\+L\+A\+T\+E\+\_\+\+M\+E\+T\+H\+OD}} (interpolate\+\_\+biquadratic)
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{transform_8c_a33249c4342a334d41b1c124ef28031cb}{ff\+\_\+get\+\_\+matrix}} (float x\+\_\+shift, float y\+\_\+shift, float angle, float scale\+\_\+x, float scale\+\_\+y, float $\ast$matrix)
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{transform_8c_a9270a0b7f1fed77ff0277375c01e37e7}{avfilter\+\_\+add\+\_\+matrix}} (const float $\ast$m1, const float $\ast$m2, float $\ast$\mbox{\hyperlink{filter__design_8txt_adf51c0fafb1c1b683c7f943c2a349904}{result}})
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{transform_8c_a407885f2cedee93c8fa9c03080c17719}{avfilter\+\_\+sub\+\_\+matrix}} (const float $\ast$m1, const float $\ast$m2, float $\ast$\mbox{\hyperlink{filter__design_8txt_adf51c0fafb1c1b683c7f943c2a349904}{result}})
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{transform_8c_a67972d0b868792be8ab6af7660bc5fb2}{avfilter\+\_\+mul\+\_\+matrix}} (const float $\ast$m1, float scalar, float $\ast$\mbox{\hyperlink{filter__design_8txt_adf51c0fafb1c1b683c7f943c2a349904}{result}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{transform_8c_a9a8feed22ff382abfee7b1a21e132f90}{avfilter\+\_\+transform}} (const \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$\mbox{\hyperlink{tests_2checkasm_2vp9dsp_8c_a858376c0918f93e656c8c0d76c63dbe8}{src}}, \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$dst, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} src\+\_\+stride, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} dst\+\_\+stride, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{tests_2utils_8c_a2474a5474cbff19523a51eb1de01cda4}{width}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{tests_2utils_8c_ad12fc34ce789bce6c8a05d8a17138534}{height}}, const float $\ast$matrix, enum \mbox{\hyperlink{transform_8h_a242ace442acd0d243c565f62f422c13e}{Interpolate\+Method}} \mbox{\hyperlink{vf__minterpolate_8c_a9f46af473a4e002ead71442caf8081b4}{interpolate}}, enum \mbox{\hyperlink{transform_8h_af4d5243b6d8328548c892fc886768392}{Fill\+Method}} fill)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
transform input video 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{transform_8c_a522e27503127092d2ab046fde760a37a}\label{transform_8c_a522e27503127092d2ab046fde760a37a}} 
\index{transform.c@{transform.c}!INTERPOLATE\_METHOD@{INTERPOLATE\_METHOD}}
\index{INTERPOLATE\_METHOD@{INTERPOLATE\_METHOD}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{INTERPOLATE\_METHOD}{INTERPOLATE\_METHOD}}
{\footnotesize\ttfamily \#define I\+N\+T\+E\+R\+P\+O\+L\+A\+T\+E\+\_\+\+M\+E\+T\+H\+OD(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{checkasm_8c_a8f8f80d37794cde9472343e4487ba3eb}{name}} }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keyword}{static} \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\_t}} \mbox{\hyperlink{writing__filters_8txt_adb27990ed3d4ad300fd1dde281903508}{name}}(\textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keyword}{const} \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\_t}} *\mbox{\hyperlink{tests_2checkasm_2vp8dsp_8c_a858376c0918f93e656c8c0d76c63dbe8}{src}}, \(\backslash\)}
\DoxyCodeLine{                        \textcolor{keywordtype}{int} \mbox{\hyperlink{tests_2snowenc_8c_a667b04d7fb6ef46db4da4af554c5b6f7}{width}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{tests_2snowenc_8c_a64f9f90ece96c7bab4aee3deacf170e0}{height}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{mace_8c_a08f66a6870d87afcd5dc1b60d1019692}{stride}}, \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\_t}} def)}

\end{DoxyCode}


Definition at line 32 of file transform.\+c.

\mbox{\Hypertarget{transform_8c_a943ace7d892ef7f3b7c965d386f7166e}\label{transform_8c_a943ace7d892ef7f3b7c965d386f7166e}} 
\index{transform.c@{transform.c}!PIXEL@{PIXEL}}
\index{PIXEL@{PIXEL}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{PIXEL}{PIXEL}}
{\footnotesize\ttfamily \#define P\+I\+X\+EL(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{vf__colormatrix_8c_ad116363516b0293a59b40e02af04a018}{img}},  }\item[{}]{x,  }\item[{}]{y,  }\item[{}]{\mbox{\hyperlink{sw__rgb_8c_aba9ed0487b0aa23eba534648df8384c0}{w}},  }\item[{}]{\mbox{\hyperlink{sw__rgb_8c_a1f1dfeb2f802fe99f37fe91867b84456}{h}},  }\item[{}]{\mbox{\hyperlink{mace_8c_a08f66a6870d87afcd5dc1b60d1019692}{stride}},  }\item[{}]{def }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    ((x) < 0 || (y) < 0) ? (def) : \(\backslash\)}
\DoxyCodeLine{    (((x) >= (\mbox{\hyperlink{llviddspenc_8c_aba9ed0487b0aa23eba534648df8384c0}{w}}) || (y) >= (\mbox{\hyperlink{vp9dsp__template_8c_a5e36941b3d856737e81516acd45edc50}{h}})) ? (def) : \(\backslash\)}
\DoxyCodeLine{    img[(x) + (y) * (\mbox{\hyperlink{mace_8c_a08f66a6870d87afcd5dc1b60d1019692}{stride}})])}

\end{DoxyCode}


Definition at line 36 of file transform.\+c.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{transform_8c_a9270a0b7f1fed77ff0277375c01e37e7}\label{transform_8c_a9270a0b7f1fed77ff0277375c01e37e7}} 
\index{transform.c@{transform.c}!avfilter\_add\_matrix@{avfilter\_add\_matrix}}
\index{avfilter\_add\_matrix@{avfilter\_add\_matrix}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{avfilter\_add\_matrix()}{avfilter\_add\_matrix()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} avfilter\+\_\+add\+\_\+matrix (\begin{DoxyParamCaption}\item[{const float $\ast$}]{m1,  }\item[{const float $\ast$}]{m2,  }\item[{float $\ast$}]{result }\end{DoxyParamCaption})}

Add two matrices together. result = m1 + m2.


\begin{DoxyParams}{Parameters}
{\em m1} & 9-\/item transformation matrix \\
\hline
{\em m2} & 9-\/item transformation matrix \\
\hline
{\em result} & 9-\/item transformation matrix \\
\hline
\end{DoxyParams}


Definition at line 125 of file transform.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{transform_8c_a9270a0b7f1fed77ff0277375c01e37e7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{transform_8c_a67972d0b868792be8ab6af7660bc5fb2}\label{transform_8c_a67972d0b868792be8ab6af7660bc5fb2}} 
\index{transform.c@{transform.c}!avfilter\_mul\_matrix@{avfilter\_mul\_matrix}}
\index{avfilter\_mul\_matrix@{avfilter\_mul\_matrix}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{avfilter\_mul\_matrix()}{avfilter\_mul\_matrix()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} avfilter\+\_\+mul\+\_\+matrix (\begin{DoxyParamCaption}\item[{const float $\ast$}]{m1,  }\item[{float}]{scalar,  }\item[{float $\ast$}]{result }\end{DoxyParamCaption})}

Multiply a matrix by a scalar value. result = m1 $\ast$ scalar.


\begin{DoxyParams}{Parameters}
{\em m1} & 9-\/item transformation matrix \\
\hline
{\em scalar} & a number \\
\hline
{\em result} & 9-\/item transformation matrix \\
\hline
\end{DoxyParams}


Definition at line 139 of file transform.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{transform_8c_a67972d0b868792be8ab6af7660bc5fb2_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{transform_8c_a407885f2cedee93c8fa9c03080c17719}\label{transform_8c_a407885f2cedee93c8fa9c03080c17719}} 
\index{transform.c@{transform.c}!avfilter\_sub\_matrix@{avfilter\_sub\_matrix}}
\index{avfilter\_sub\_matrix@{avfilter\_sub\_matrix}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{avfilter\_sub\_matrix()}{avfilter\_sub\_matrix()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} avfilter\+\_\+sub\+\_\+matrix (\begin{DoxyParamCaption}\item[{const float $\ast$}]{m1,  }\item[{const float $\ast$}]{m2,  }\item[{float $\ast$}]{result }\end{DoxyParamCaption})}

Subtract one matrix from another. result = m1 -\/ m2.


\begin{DoxyParams}{Parameters}
{\em m1} & 9-\/item transformation matrix \\
\hline
{\em m2} & 9-\/item transformation matrix \\
\hline
{\em result} & 9-\/item transformation matrix \\
\hline
\end{DoxyParams}


Definition at line 132 of file transform.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{transform_8c_a407885f2cedee93c8fa9c03080c17719_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{transform_8c_a9a8feed22ff382abfee7b1a21e132f90}\label{transform_8c_a9a8feed22ff382abfee7b1a21e132f90}} 
\index{transform.c@{transform.c}!avfilter\_transform@{avfilter\_transform}}
\index{avfilter\_transform@{avfilter\_transform}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{avfilter\_transform()}{avfilter\_transform()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} avfilter\+\_\+transform (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$}]{src,  }\item[{\mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$}]{dst,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{src\+\_\+stride,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{dst\+\_\+stride,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{width,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{height,  }\item[{const float $\ast$}]{matrix,  }\item[{enum \mbox{\hyperlink{transform_8h_a242ace442acd0d243c565f62f422c13e}{Interpolate\+Method}}}]{interpolate,  }\item[{enum \mbox{\hyperlink{transform_8h_af4d5243b6d8328548c892fc886768392}{Fill\+Method}}}]{fill }\end{DoxyParamCaption})}

Do an affine transformation with the given interpolation method. This multiplies each vector \mbox{[}x,y,1\mbox{]} by the matrix and then interpolates to get the final value.


\begin{DoxyParams}{Parameters}
{\em src} & source image \\
\hline
{\em dst} & destination image \\
\hline
{\em src\+\_\+stride} & source image line size in bytes \\
\hline
{\em dst\+\_\+stride} & destination image line size in bytes \\
\hline
{\em width} & image width in pixels \\
\hline
{\em height} & image height in pixels \\
\hline
{\em matrix} & 9-\/item affine transformation matrix \\
\hline
{\em interpolate} & pixel interpolation method \\
\hline
{\em fill} & edge fill method \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
negative on error 
\end{DoxyReturn}


Definition at line 146 of file transform.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=275pt]{transform_8c_a9a8feed22ff382abfee7b1a21e132f90_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{transform_8c_a9a8feed22ff382abfee7b1a21e132f90_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{transform_8c_a33249c4342a334d41b1c124ef28031cb}\label{transform_8c_a33249c4342a334d41b1c124ef28031cb}} 
\index{transform.c@{transform.c}!ff\_get\_matrix@{ff\_get\_matrix}}
\index{ff\_get\_matrix@{ff\_get\_matrix}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{ff\_get\_matrix()}{ff\_get\_matrix()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+get\+\_\+matrix (\begin{DoxyParamCaption}\item[{float}]{x\+\_\+shift,  }\item[{float}]{y\+\_\+shift,  }\item[{float}]{angle,  }\item[{float}]{scale\+\_\+x,  }\item[{float}]{scale\+\_\+y,  }\item[{float $\ast$}]{matrix }\end{DoxyParamCaption})}

Get an affine transformation matrix from given translation, rotation, and zoom factors. The matrix will look like\+:

\mbox{[} scale\+\_\+x $\ast$ cos(angle), -\/sin(angle), x\+\_\+shift, sin(angle), scale\+\_\+y $\ast$ cos(angle), y\+\_\+shift, 0, 0, 1 \mbox{]}


\begin{DoxyParams}{Parameters}
{\em x\+\_\+shift} & horizontal translation \\
\hline
{\em y\+\_\+shift} & vertical translation \\
\hline
{\em angle} & rotation in radians \\
\hline
{\em scale\+\_\+x} & x scale percent (1.\+0 = 100\%) \\
\hline
{\em scale\+\_\+y} & y scale percent (1.\+0 = 100\%) \\
\hline
{\em matrix} & 9-\/item affine transformation matrix \\
\hline
\end{DoxyParams}


Definition at line 106 of file transform.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{transform_8c_a33249c4342a334d41b1c124ef28031cb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{transform_8c_a45da9742b9f87f1476b119610cbf3505}\label{transform_8c_a45da9742b9f87f1476b119610cbf3505}} 
\index{transform.c@{transform.c}!INTERPOLATE\_METHOD@{INTERPOLATE\_METHOD}}
\index{INTERPOLATE\_METHOD@{INTERPOLATE\_METHOD}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{INTERPOLATE\_METHOD()}{INTERPOLATE\_METHOD()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily I\+N\+T\+E\+R\+P\+O\+L\+A\+T\+E\+\_\+\+M\+E\+T\+H\+OD (\begin{DoxyParamCaption}\item[{interpolate\+\_\+bilinear}]{ }\end{DoxyParamCaption})}

Bilinear interpolation 

Definition at line 52 of file transform.\+c.

\mbox{\Hypertarget{transform_8c_acdc3b477356268b1db7e878642374762}\label{transform_8c_acdc3b477356268b1db7e878642374762}} 
\index{transform.c@{transform.c}!INTERPOLATE\_METHOD@{INTERPOLATE\_METHOD}}
\index{INTERPOLATE\_METHOD@{INTERPOLATE\_METHOD}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{INTERPOLATE\_METHOD()}{INTERPOLATE\_METHOD()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily I\+N\+T\+E\+R\+P\+O\+L\+A\+T\+E\+\_\+\+M\+E\+T\+H\+OD (\begin{DoxyParamCaption}\item[{interpolate\+\_\+biquadratic}]{ }\end{DoxyParamCaption})}

Biquadratic interpolation 

Definition at line 79 of file transform.\+c.

\mbox{\Hypertarget{transform_8c_a168d39399bd00786a3c981924c727f08}\label{transform_8c_a168d39399bd00786a3c981924c727f08}} 
\index{transform.c@{transform.c}!INTERPOLATE\_METHOD@{INTERPOLATE\_METHOD}}
\index{INTERPOLATE\_METHOD@{INTERPOLATE\_METHOD}!transform.c@{transform.c}}
\doxysubsubsection{\texorpdfstring{INTERPOLATE\_METHOD()}{INTERPOLATE\_METHOD()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily I\+N\+T\+E\+R\+P\+O\+L\+A\+T\+E\+\_\+\+M\+E\+T\+H\+OD (\begin{DoxyParamCaption}\item[{interpolate\+\_\+nearest}]{ }\end{DoxyParamCaption})}

Nearest neighbor interpolation 

Definition at line 44 of file transform.\+c.

