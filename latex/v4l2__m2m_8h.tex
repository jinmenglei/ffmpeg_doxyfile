\hypertarget{v4l2__m2m_8h}{}\doxysection{E\+:/github/ffmpeg/libavcodec/v4l2\+\_\+m2m.h File Reference}
\label{v4l2__m2m_8h}\index{E:/github/ffmpeg/libavcodec/v4l2\_m2m.h@{E:/github/ffmpeg/libavcodec/v4l2\_m2m.h}}
{\ttfamily \#include $<$semaphore.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$dirent.\+h$>$}\newline
{\ttfamily \#include $<$linux/videodev2.\+h$>$}\newline
{\ttfamily \#include \char`\"{}libavcodec/avcodec.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}v4l2\+\_\+context.\+h\char`\"{}}\newline
Include dependency graph for v4l2\+\_\+m2m.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{v4l2__m2m_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{v4l2__m2m_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}}
\item 
struct \mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{v4l2__m2m_8h_af8c317a42292b61c93aae91e59118a46}{container\+\_\+of}}(ptr,  \mbox{\hyperlink{hwdevice_8c_ae4165b400ecd5a84616b429f6516512b}{type}},  member)
\item 
\#define \mbox{\hyperlink{v4l2__m2m_8h_a0d2144e7b2e3560db5cbffb9762f9cb2}{V4\+L\+\_\+\+M2\+M\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+O\+P\+TS}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} \mbox{\hyperlink{v4l2__m2m_8h_af394026ca1e6f91bd0e592b4fd8ff491}{V4\+L2m2m\+Context}}
\item 
typedef struct \mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} \mbox{\hyperlink{v4l2__m2m_8h_ac9a78aa8acf7582058445b05e9b980d4}{V4\+L2m2m\+Priv}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{v4l2__m2m_8h_a335ffac2ec155269f5bc8feed2c79fc3}{ff\+\_\+v4l2\+\_\+m2m\+\_\+create\+\_\+context}} (\mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} $\ast$priv, \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} $\ast$$\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{v4l2__m2m_8h_a82ed77a0c5427ab7468036679eabb616}{ff\+\_\+v4l2\+\_\+m2m\+\_\+codec\+\_\+init}} (\mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} $\ast$priv)
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{v4l2__m2m_8h_a8eb69c1318ec5390faa7e029422b9be9}{ff\+\_\+v4l2\+\_\+m2m\+\_\+codec\+\_\+end}} (\mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} $\ast$priv)
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{v4l2__m2m_8h_a2c95365deb97791f2695b38a204e5f56}{ff\+\_\+v4l2\+\_\+m2m\+\_\+codec\+\_\+reinit}} (\mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} $\ast$\mbox{\hyperlink{tests_2movenc_8c_a93cc7296f13f507c1fd7abd0db36b898}{ctx}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{v4l2__m2m_8h_ab0b032860cf06222314fc0f3f2b234f0}{ff\+\_\+v4l2\+\_\+m2m\+\_\+codec\+\_\+full\+\_\+reinit}} (\mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} $\ast$\mbox{\hyperlink{tests_2movenc_8c_a93cc7296f13f507c1fd7abd0db36b898}{ctx}})
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{v4l2__m2m_8h_af8c317a42292b61c93aae91e59118a46}\label{v4l2__m2m_8h_af8c317a42292b61c93aae91e59118a46}} 
\index{v4l2\_m2m.h@{v4l2\_m2m.h}!container\_of@{container\_of}}
\index{container\_of@{container\_of}!v4l2\_m2m.h@{v4l2\_m2m.h}}
\doxysubsubsection{\texorpdfstring{container\_of}{container\_of}}
{\footnotesize\ttfamily \#define container\+\_\+of(\begin{DoxyParamCaption}\item[{}]{ptr,  }\item[{}]{\mbox{\hyperlink{hwdevice_8c_ae4165b400ecd5a84616b429f6516512b}{type}},  }\item[{}]{member }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{        (\{ \(\backslash\)}
\DoxyCodeLine{        const \_\_typeof\_\_(((\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}} *)0)-\/>member ) *\_\_mptr = (ptr); \(\backslash\)}
\DoxyCodeLine{        (\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}} *)((\textcolor{keywordtype}{char} *)\_\_mptr -\/ offsetof(\mbox{\hyperlink{writing__filters_8txt_a860450fba1f740387dc082792ad89517}{type}},member) );\})}

\end{DoxyCode}


Definition at line 35 of file v4l2\+\_\+m2m.\+h.

\mbox{\Hypertarget{v4l2__m2m_8h_a0d2144e7b2e3560db5cbffb9762f9cb2}\label{v4l2__m2m_8h_a0d2144e7b2e3560db5cbffb9762f9cb2}} 
\index{v4l2\_m2m.h@{v4l2\_m2m.h}!V4L\_M2M\_DEFAULT\_OPTS@{V4L\_M2M\_DEFAULT\_OPTS}}
\index{V4L\_M2M\_DEFAULT\_OPTS@{V4L\_M2M\_DEFAULT\_OPTS}!v4l2\_m2m.h@{v4l2\_m2m.h}}
\doxysubsubsection{\texorpdfstring{V4L\_M2M\_DEFAULT\_OPTS}{V4L\_M2M\_DEFAULT\_OPTS}}
{\footnotesize\ttfamily \#define V4\+L\+\_\+\+M2\+M\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+O\+P\+TS}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \{ \textcolor{stringliteral}{"{}num\_output\_buffers"{}}, \textcolor{stringliteral}{"{}Number of buffers in the output context"{}},\(\backslash\)}
\DoxyCodeLine{        OFFSET(num\_output\_buffers), \mbox{\hyperlink{group__avoptions_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411}{AV\_OPT\_TYPE\_INT}}, \{ .i64 = 16 \}, 6, INT\_MAX, \mbox{\hyperlink{cmdutils_8c_a6ccad09b4a2a06ae178418fdccf5940d}{FLAGS}} \}}

\end{DoxyCode}


Definition at line 39 of file v4l2\+\_\+m2m.\+h.



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{v4l2__m2m_8h_af394026ca1e6f91bd0e592b4fd8ff491}\label{v4l2__m2m_8h_af394026ca1e6f91bd0e592b4fd8ff491}} 
\index{v4l2\_m2m.h@{v4l2\_m2m.h}!V4L2m2mContext@{V4L2m2mContext}}
\index{V4L2m2mContext@{V4L2m2mContext}!v4l2\_m2m.h@{v4l2\_m2m.h}}
\doxysubsubsection{\texorpdfstring{V4L2m2mContext}{V4L2m2mContext}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}}}

\mbox{\Hypertarget{v4l2__m2m_8h_ac9a78aa8acf7582058445b05e9b980d4}\label{v4l2__m2m_8h_ac9a78aa8acf7582058445b05e9b980d4}} 
\index{v4l2\_m2m.h@{v4l2\_m2m.h}!V4L2m2mPriv@{V4L2m2mPriv}}
\index{V4L2m2mPriv@{V4L2m2mPriv}!v4l2\_m2m.h@{v4l2\_m2m.h}}
\doxysubsubsection{\texorpdfstring{V4L2m2mPriv}{V4L2m2mPriv}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} \mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}}}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{v4l2__m2m_8h_a8eb69c1318ec5390faa7e029422b9be9}\label{v4l2__m2m_8h_a8eb69c1318ec5390faa7e029422b9be9}} 
\index{v4l2\_m2m.h@{v4l2\_m2m.h}!ff\_v4l2\_m2m\_codec\_end@{ff\_v4l2\_m2m\_codec\_end}}
\index{ff\_v4l2\_m2m\_codec\_end@{ff\_v4l2\_m2m\_codec\_end}!v4l2\_m2m.h@{v4l2\_m2m.h}}
\doxysubsubsection{\texorpdfstring{ff\_v4l2\_m2m\_codec\_end()}{ff\_v4l2\_m2m\_codec\_end()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+v4l2\+\_\+m2m\+\_\+codec\+\_\+end (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} $\ast$}]{priv }\end{DoxyParamCaption})}

Releases all the codec resources if all A\+V\+Buffer\+Refs have been returned to the ctx. Otherwise keep the driver open.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em The} & \mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} instantiated by the encoder/decoder.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}


Definition at line 339 of file v4l2\+\_\+m2m.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{v4l2__m2m_8h_a8eb69c1318ec5390faa7e029422b9be9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=336pt]{v4l2__m2m_8h_a8eb69c1318ec5390faa7e029422b9be9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{v4l2__m2m_8h_ab0b032860cf06222314fc0f3f2b234f0}\label{v4l2__m2m_8h_ab0b032860cf06222314fc0f3f2b234f0}} 
\index{v4l2\_m2m.h@{v4l2\_m2m.h}!ff\_v4l2\_m2m\_codec\_full\_reinit@{ff\_v4l2\_m2m\_codec\_full\_reinit}}
\index{ff\_v4l2\_m2m\_codec\_full\_reinit@{ff\_v4l2\_m2m\_codec\_full\_reinit}!v4l2\_m2m.h@{v4l2\_m2m.h}}
\doxysubsubsection{\texorpdfstring{ff\_v4l2\_m2m\_codec\_full\_reinit()}{ff\_v4l2\_m2m\_codec\_full\_reinit()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+v4l2\+\_\+m2m\+\_\+codec\+\_\+full\+\_\+reinit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} $\ast$}]{ctx }\end{DoxyParamCaption})}

Reinitializes the \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} when the driver cannot continue processing with the any of the current V4\+L2\+Contexts (ie, changes in output and capture).


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ctx} & The \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} instantiated by the encoder/decoder.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 in case of success, negative number otherwise 
\end{DoxyReturn}


Definition at line 248 of file v4l2\+\_\+m2m.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{v4l2__m2m_8h_ab0b032860cf06222314fc0f3f2b234f0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{v4l2__m2m_8h_ab0b032860cf06222314fc0f3f2b234f0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{v4l2__m2m_8h_a82ed77a0c5427ab7468036679eabb616}\label{v4l2__m2m_8h_a82ed77a0c5427ab7468036679eabb616}} 
\index{v4l2\_m2m.h@{v4l2\_m2m.h}!ff\_v4l2\_m2m\_codec\_init@{ff\_v4l2\_m2m\_codec\_init}}
\index{ff\_v4l2\_m2m\_codec\_init@{ff\_v4l2\_m2m\_codec\_init}!v4l2\_m2m.h@{v4l2\_m2m.h}}
\doxysubsubsection{\texorpdfstring{ff\_v4l2\_m2m\_codec\_init()}{ff\_v4l2\_m2m\_codec\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+v4l2\+\_\+m2m\+\_\+codec\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} $\ast$}]{priv }\end{DoxyParamCaption})}

Probes the video nodes looking for the required codec capabilities.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ctx} & The \mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} instantiated by the encoder/decoder.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if a driver is found, a negative number otherwise. 
\end{DoxyReturn}


Definition at line 365 of file v4l2\+\_\+m2m.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{v4l2__m2m_8h_a82ed77a0c5427ab7468036679eabb616_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=323pt]{v4l2__m2m_8h_a82ed77a0c5427ab7468036679eabb616_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{v4l2__m2m_8h_a2c95365deb97791f2695b38a204e5f56}\label{v4l2__m2m_8h_a2c95365deb97791f2695b38a204e5f56}} 
\index{v4l2\_m2m.h@{v4l2\_m2m.h}!ff\_v4l2\_m2m\_codec\_reinit@{ff\_v4l2\_m2m\_codec\_reinit}}
\index{ff\_v4l2\_m2m\_codec\_reinit@{ff\_v4l2\_m2m\_codec\_reinit}!v4l2\_m2m.h@{v4l2\_m2m.h}}
\doxysubsubsection{\texorpdfstring{ff\_v4l2\_m2m\_codec\_reinit()}{ff\_v4l2\_m2m\_codec\_reinit()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+v4l2\+\_\+m2m\+\_\+codec\+\_\+reinit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} $\ast$}]{ctx }\end{DoxyParamCaption})}

Reinitializes the \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} when the driver cannot continue processing with the capture parameters.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ctx} & The \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} instantiated by the encoder/decoder.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 in case of success, negative number otherwise 
\end{DoxyReturn}


Definition at line 205 of file v4l2\+\_\+m2m.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{v4l2__m2m_8h_a2c95365deb97791f2695b38a204e5f56_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{v4l2__m2m_8h_a2c95365deb97791f2695b38a204e5f56_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{v4l2__m2m_8h_a335ffac2ec155269f5bc8feed2c79fc3}\label{v4l2__m2m_8h_a335ffac2ec155269f5bc8feed2c79fc3}} 
\index{v4l2\_m2m.h@{v4l2\_m2m.h}!ff\_v4l2\_m2m\_create\_context@{ff\_v4l2\_m2m\_create\_context}}
\index{ff\_v4l2\_m2m\_create\_context@{ff\_v4l2\_m2m\_create\_context}!v4l2\_m2m.h@{v4l2\_m2m.h}}
\doxysubsubsection{\texorpdfstring{ff\_v4l2\_m2m\_create\_context()}{ff\_v4l2\_m2m\_create\_context()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+v4l2\+\_\+m2m\+\_\+create\+\_\+context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} $\ast$}]{priv,  }\item[{\mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}} $\ast$$\ast$}]{s }\end{DoxyParamCaption})}

Allocate a new context and references for a V4\+L2 M2M instance.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ctx} & The \mbox{\hyperlink{struct_v4_l2m2m_priv}{V4\+L2m2m\+Priv}} instantiated by the encoder/decoder. \\
\hline
\mbox{\texttt{ out}}  & {\em ctx} & The \mbox{\hyperlink{struct_v4_l2m2m_context}{V4\+L2m2m\+Context}}.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 in success, a negative error code otherwise. 
\end{DoxyReturn}


Definition at line 403 of file v4l2\+\_\+m2m.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{v4l2__m2m_8h_a335ffac2ec155269f5bc8feed2c79fc3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=306pt]{v4l2__m2m_8h_a335ffac2ec155269f5bc8feed2c79fc3_icgraph}
\end{center}
\end{figure}
