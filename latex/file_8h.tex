\hypertarget{file_8h}{}\doxysection{E\+:/github/ffmpeg/libavutil/file.h File Reference}
\label{file_8h}\index{E:/github/ffmpeg/libavutil/file.h@{E:/github/ffmpeg/libavutil/file.h}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include \char`\"{}avutil.\+h\char`\"{}}\newline
Include dependency graph for file.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{file_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{file_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{attributes_8h_a93f17e0f0b53a66e7b5eceb3dff2918f}{av\+\_\+warn\+\_\+unused\+\_\+result}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{file_8h_ade51c2ba717b70fab329362952906cfe}{av\+\_\+file\+\_\+map}} (const char $\ast$filename, \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$$\ast$bufptr, size\+\_\+t $\ast$\mbox{\hyperlink{group__lavu__mem__funcs_ga34e10fdac079a9ca4512b8ccd7f20b8a}{size}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} log\+\_\+offset, \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$log\+\_\+ctx)
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{file_8h_a12e643af4a329ae6d1d567d8a782af1e}{av\+\_\+file\+\_\+unmap}} (\mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$bufptr, size\+\_\+t \mbox{\hyperlink{group__lavu__mem__funcs_ga34e10fdac079a9ca4512b8ccd7f20b8a}{size}})
\item 
\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{file_8h_a8c2cb7d30f32e871d353c2f2b2dd6ba2}{av\+\_\+tempfile}} (const char $\ast$prefix, char $\ast$$\ast$filename, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} log\+\_\+offset, \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$log\+\_\+ctx)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Misc file utilities. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{file_8h_ade51c2ba717b70fab329362952906cfe}\label{file_8h_ade51c2ba717b70fab329362952906cfe}} 
\index{file.h@{file.h}!av\_file\_map@{av\_file\_map}}
\index{av\_file\_map@{av\_file\_map}!file.h@{file.h}}
\doxysubsubsection{\texorpdfstring{av\_file\_map()}{av\_file\_map()}}
{\footnotesize\ttfamily \mbox{\hyperlink{attributes_8h_a93f17e0f0b53a66e7b5eceb3dff2918f}{av\+\_\+warn\+\_\+unused\+\_\+result}} \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+file\+\_\+map (\begin{DoxyParamCaption}\item[{const char $\ast$}]{filename,  }\item[{\mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$$\ast$}]{bufptr,  }\item[{size\+\_\+t $\ast$}]{size,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{log\+\_\+offset,  }\item[{\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{log\+\_\+ctx }\end{DoxyParamCaption})}

Read the file with name filename, and put its content in a newly allocated buffer or map it with mmap() when available. In case of success set $\ast$bufptr to the read or mmapped buffer, and $\ast$size to the size in bytes of the buffer in $\ast$bufptr. Unlike mmap this function succeeds with zero sized files, in this case $\ast$bufptr will be set to N\+U\+LL and $\ast$size will be set to 0. The returned buffer must be released with \mbox{\hyperlink{file_8h_a12e643af4a329ae6d1d567d8a782af1e}{av\+\_\+file\+\_\+unmap()}}.


\begin{DoxyParams}{Parameters}
{\em log\+\_\+offset} & loglevel offset used for logging \\
\hline
{\em log\+\_\+ctx} & context used for logging \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a non negative number in case of success, a negative value corresponding to an A\+V\+E\+R\+R\+OR error code in case of failure 
\end{DoxyReturn}


Definition at line 53 of file file.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{file_8h_ade51c2ba717b70fab329362952906cfe_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{file_8h_ade51c2ba717b70fab329362952906cfe_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{file_8h_a12e643af4a329ae6d1d567d8a782af1e}\label{file_8h_a12e643af4a329ae6d1d567d8a782af1e}} 
\index{file.h@{file.h}!av\_file\_unmap@{av\_file\_unmap}}
\index{av\_file\_unmap@{av\_file\_unmap}!file.h@{file.h}}
\doxysubsubsection{\texorpdfstring{av\_file\_unmap()}{av\_file\_unmap()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} av\+\_\+file\+\_\+unmap (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$}]{bufptr,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}

Unmap or free the buffer bufptr created by \mbox{\hyperlink{file_8h_ade51c2ba717b70fab329362952906cfe}{av\+\_\+file\+\_\+map()}}.


\begin{DoxyParams}{Parameters}
{\em size} & size in bytes of bufptr, must be the same as returned by \mbox{\hyperlink{file_8h_ade51c2ba717b70fab329362952906cfe}{av\+\_\+file\+\_\+map()}} \\
\hline
\end{DoxyParams}


Definition at line 144 of file file.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{file_8h_a12e643af4a329ae6d1d567d8a782af1e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{file_8h_a8c2cb7d30f32e871d353c2f2b2dd6ba2}\label{file_8h_a8c2cb7d30f32e871d353c2f2b2dd6ba2}} 
\index{file.h@{file.h}!av\_tempfile@{av\_tempfile}}
\index{av\_tempfile@{av\_tempfile}!file.h@{file.h}}
\doxysubsubsection{\texorpdfstring{av\_tempfile()}{av\_tempfile()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} av\+\_\+tempfile (\begin{DoxyParamCaption}\item[{const char $\ast$}]{prefix,  }\item[{char $\ast$$\ast$}]{filename,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{log\+\_\+offset,  }\item[{\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} $\ast$}]{log\+\_\+ctx }\end{DoxyParamCaption})}

Wrapper to work around the lack of mkstemp() on mingw. Also, tries to create file in /tmp first, if possible. $\ast$prefix can be a character constant; $\ast$filename will be allocated internally. \begin{DoxyReturn}{Returns}
file descriptor of opened file (or negative value corresponding to an A\+V\+E\+R\+R\+OR code on error) and opened file name in $\ast$$\ast$filename. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
On very old libcs it is necessary to set a secure umask before calling this, \mbox{\hyperlink{file_8h_a8c2cb7d30f32e871d353c2f2b2dd6ba2}{av\+\_\+tempfile()}} can\textquotesingle{}t call umask itself as it is used in libraries and could interfere with the calling application. 
\end{DoxyNote}
\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000085}{Deprecated}}]as fd numbers cannot be passed saftely between libs on some platforms \end{DoxyRefDesc}


Definition at line 157 of file file.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{file_8h_a8c2cb7d30f32e871d353c2f2b2dd6ba2_cgraph}
\end{center}
\end{figure}
