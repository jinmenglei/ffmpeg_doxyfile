\hypertarget{mpegvideo__xvmc_8c}{}\doxysection{E\+:/github/ffmpeg/libavcodec/mpegvideo\+\_\+xvmc.c File Reference}
\label{mpegvideo__xvmc_8c}\index{E:/github/ffmpeg/libavcodec/mpegvideo\_xvmc.c@{E:/github/ffmpeg/libavcodec/mpegvideo\_xvmc.c}}
{\ttfamily \#include $<$limits.\+h$>$}\newline
{\ttfamily \#include $<$X11/extensions/\+Xv\+M\+C.\+h$>$}\newline
{\ttfamily \#include \char`\"{}avcodec.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mpegutils.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mpegvideo.\+h\char`\"{}}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include \char`\"{}xvmc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}xvmc\+\_\+internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}version.\+h\char`\"{}}\newline
Include dependency graph for mpegvideo\+\_\+xvmc.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mpegvideo__xvmc_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{mpegvideo__xvmc_8c_aabddd7429b5ac8da88dc0746cf1107ec}{ff\+\_\+xvmc\+\_\+init\+\_\+block}} (\mbox{\hyperlink{struct_mpeg_enc_context}{Mpeg\+Enc\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}})
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{mpegvideo__xvmc_8c_a4dadeaee9650eb5e2de6b242d39d7a52}{exchange\+\_\+uv}} (\mbox{\hyperlink{struct_mpeg_enc_context}{Mpeg\+Enc\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}})
\item 
\mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{mpegvideo__xvmc_8c_ad5513601b27cbd99a9ad5f53807fa0b4}{ff\+\_\+xvmc\+\_\+pack\+\_\+pblocks}} (\mbox{\hyperlink{struct_mpeg_enc_context}{Mpeg\+Enc\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}}, \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} cbp)
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{mpegvideo__xvmc_8c_a6a5d9b55754c496f4808752d0e119a34}{ff\+\_\+xvmc\+\_\+field\+\_\+start}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx, const \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$buf, uint32\+\_\+t buf\+\_\+size)
\item 
static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} \mbox{\hyperlink{mpegvideo__xvmc_8c_a260d98c2fabc582d3fa1baa11cf61fd8}{ff\+\_\+xvmc\+\_\+field\+\_\+end}} (\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$avctx)
\item 
static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} \mbox{\hyperlink{mpegvideo__xvmc_8c_a71b578f6c023b67185a7e5f45c183b44}{ff\+\_\+xvmc\+\_\+decode\+\_\+mb}} (struct \mbox{\hyperlink{struct_mpeg_enc_context}{Mpeg\+Enc\+Context}} $\ast$\mbox{\hyperlink{sw__rgb_8c_a517a4433fe5466cc6af1c80c538b0881}{s}})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{mpegvideo__xvmc_8c_a4dadeaee9650eb5e2de6b242d39d7a52}\label{mpegvideo__xvmc_8c_a4dadeaee9650eb5e2de6b242d39d7a52}} 
\index{mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}!exchange\_uv@{exchange\_uv}}
\index{exchange\_uv@{exchange\_uv}!mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}}
\doxysubsubsection{\texorpdfstring{exchange\_uv()}{exchange\_uv()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} exchange\+\_\+uv (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_mpeg_enc_context}{Mpeg\+Enc\+Context}} $\ast$}]{s }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 51 of file mpegvideo\+\_\+xvmc.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mpegvideo__xvmc_8c_a4dadeaee9650eb5e2de6b242d39d7a52_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mpegvideo__xvmc_8c_a71b578f6c023b67185a7e5f45c183b44}\label{mpegvideo__xvmc_8c_a71b578f6c023b67185a7e5f45c183b44}} 
\index{mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}!ff\_xvmc\_decode\_mb@{ff\_xvmc\_decode\_mb}}
\index{ff\_xvmc\_decode\_mb@{ff\_xvmc\_decode\_mb}!mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}}
\doxysubsubsection{\texorpdfstring{ff\_xvmc\_decode\_mb()}{ff\_xvmc\_decode\_mb()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+xvmc\+\_\+decode\+\_\+mb (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_mpeg_enc_context}{Mpeg\+Enc\+Context}} $\ast$}]{s }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Synthesize the data needed by Xv\+MC to render one macroblock of data. Fill all relevant fields, if necessary do I\+D\+CT. 

Definition at line 171 of file mpegvideo\+\_\+xvmc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mpegvideo__xvmc_8c_a71b578f6c023b67185a7e5f45c183b44_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mpegvideo__xvmc_8c_a260d98c2fabc582d3fa1baa11cf61fd8}\label{mpegvideo__xvmc_8c_a260d98c2fabc582d3fa1baa11cf61fd8}} 
\index{mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}!ff\_xvmc\_field\_end@{ff\_xvmc\_field\_end}}
\index{ff\_xvmc\_field\_end@{ff\_xvmc\_field\_end}!mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}}
\doxysubsubsection{\texorpdfstring{ff\_xvmc\_field\_end()}{ff\_xvmc\_field\_end()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+xvmc\+\_\+field\+\_\+end (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Complete frame/field rendering by passing any remaining blocks. Normally \mbox{\hyperlink{mpegutils_8c_a17c69f0c44a45e344a6eccd9d6d4f376}{ff\+\_\+draw\+\_\+horiz\+\_\+band()}} is called for each slice, however, some leftover blocks, for example from error\+\_\+resilience(), may remain. It should be safe to call the function a few times for the same field. 

Definition at line 156 of file mpegvideo\+\_\+xvmc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mpegvideo__xvmc_8c_a260d98c2fabc582d3fa1baa11cf61fd8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mpegvideo__xvmc_8c_a6a5d9b55754c496f4808752d0e119a34}\label{mpegvideo__xvmc_8c_a6a5d9b55754c496f4808752d0e119a34}} 
\index{mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}!ff\_xvmc\_field\_start@{ff\_xvmc\_field\_start}}
\index{ff\_xvmc\_field\_start@{ff\_xvmc\_field\_start}!mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}}
\doxysubsubsection{\texorpdfstring{ff\_xvmc\_field\_start()}{ff\_xvmc\_field\_start()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}} ff\+\_\+xvmc\+\_\+field\+\_\+start (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_v_codec_context}{A\+V\+Codec\+Context}} $\ast$}]{avctx,  }\item[{const \mbox{\hyperlink{audio__convert_8c_ae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t}} $\ast$}]{buf,  }\item[{uint32\+\_\+t}]{buf\+\_\+size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Find and store the surfaces that are used as reference frames. This function should be called for every new field and/or frame. It should be safe to call the function a few times for the same field. 

Definition at line 87 of file mpegvideo\+\_\+xvmc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mpegvideo__xvmc_8c_a6a5d9b55754c496f4808752d0e119a34_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mpegvideo__xvmc_8c_aabddd7429b5ac8da88dc0746cf1107ec}\label{mpegvideo__xvmc_8c_aabddd7429b5ac8da88dc0746cf1107ec}} 
\index{mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}!ff\_xvmc\_init\_block@{ff\_xvmc\_init\_block}}
\index{ff\_xvmc\_init\_block@{ff\_xvmc\_init\_block}!mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}}
\doxysubsubsection{\texorpdfstring{ff\_xvmc\_init\_block()}{ff\_xvmc\_init\_block()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+xvmc\+\_\+init\+\_\+block (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_mpeg_enc_context}{Mpeg\+Enc\+Context}} $\ast$}]{s }\end{DoxyParamCaption})}

Initialize the block field of the \mbox{\hyperlink{struct_mpeg_enc_context}{Mpeg\+Enc\+Context}} pointer passed as parameter after making sure that the data is not corrupted. In order to implement something like direct rendering instead of decoding coefficients in s-\/$>$blocks and then copying them, copy them directly into the data\+\_\+blocks array provided by xvmc. 

Definition at line 43 of file mpegvideo\+\_\+xvmc.\+c.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mpegvideo__xvmc_8c_aabddd7429b5ac8da88dc0746cf1107ec_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{mpegvideo__xvmc_8c_ad5513601b27cbd99a9ad5f53807fa0b4}\label{mpegvideo__xvmc_8c_ad5513601b27cbd99a9ad5f53807fa0b4}} 
\index{mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}!ff\_xvmc\_pack\_pblocks@{ff\_xvmc\_pack\_pblocks}}
\index{ff\_xvmc\_pack\_pblocks@{ff\_xvmc\_pack\_pblocks}!mpegvideo\_xvmc.c@{mpegvideo\_xvmc.c}}
\doxysubsubsection{\texorpdfstring{ff\_xvmc\_pack\_pblocks()}{ff\_xvmc\_pack\_pblocks()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rematrix__template_8c_a4dfdfbb7b69470f1152e022432ee2d45}{void}} ff\+\_\+xvmc\+\_\+pack\+\_\+pblocks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_mpeg_enc_context}{Mpeg\+Enc\+Context}} $\ast$}]{s,  }\item[{\mbox{\hyperlink{ffmpeg__filter_8c_a61569f2965b7a369eb10b6d75d410d11}{int}}}]{cbp }\end{DoxyParamCaption})}

Fill individual block pointers, so there are no gaps in the data\+\_\+block array in case not all blocks in the macroblock are coded. 

Definition at line 64 of file mpegvideo\+\_\+xvmc.\+c.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{mpegvideo__xvmc_8c_ad5513601b27cbd99a9ad5f53807fa0b4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mpegvideo__xvmc_8c_ad5513601b27cbd99a9ad5f53807fa0b4_icgraph}
\end{center}
\end{figure}
