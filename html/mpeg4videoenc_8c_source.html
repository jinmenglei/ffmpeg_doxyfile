<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/mpeg4videoenc.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mpeg4videoenc.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mpeg4videoenc_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * MPEG-4 encoder</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2000,2001 Fabrice Bellard</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2002-2010 Michael Niedermayer &lt;michaelni@gmx.at&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="attributes_8h.html">libavutil/attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">libavutil/log.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegutils_8h.html">mpegutils.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegvideo_8h.html">mpegvideo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h263_8h.html">h263.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpeg4video_8h.html">mpeg4video.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="profiles_8h.html">profiles.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/* The uni_DCtab_* tables below contain unified bits+length tables to encode DC</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * differences in MPEG-4. Unified in the sense that the specification specifies</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * this encoding in several steps. */</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a28536272e4e7472201217b2d930aeb3d">   35</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="mpeg4videoenc_8c.html#a28536272e4e7472201217b2d930aeb3d">uni_DCtab_lum_len</a>[512];</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#afd351591b5990b0c5938c3c3105b9c6b">   36</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="mpeg4videoenc_8c.html#afd351591b5990b0c5938c3c3105b9c6b">uni_DCtab_chrom_len</a>[512];</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a6046658e5fe3eeea90e6764178405b56">   37</a></span>&#160;<span class="keyword">static</span> uint16_t <a class="code" href="mpeg4videoenc_8c.html#a6046658e5fe3eeea90e6764178405b56">uni_DCtab_lum_bits</a>[512];</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a3111ba80bb65b4142626d7faec122c7d">   38</a></span>&#160;<span class="keyword">static</span> uint16_t <a class="code" href="mpeg4videoenc_8c.html#a3111ba80bb65b4142626d7faec122c7d">uni_DCtab_chrom_bits</a>[512];</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/* Unified encoding tables for run length encoding of coefficients.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * Unified in the sense that the specification specifies the encoding in several steps. */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#ac5021d398f4056f1d82cb4cc89ff8f90">   42</a></span>&#160;<span class="keyword">static</span> uint32_t <a class="code" href="mpeg4videoenc_8c.html#ac5021d398f4056f1d82cb4cc89ff8f90">uni_mpeg4_intra_rl_bits</a>[64 * 64 * 2 * 2];</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a326dd6c200621ba41379fc434d68ae21">   43</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="mpeg4videoenc_8c.html#a326dd6c200621ba41379fc434d68ae21">uni_mpeg4_intra_rl_len</a>[64 * 64 * 2 * 2];</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a9564ea95f6f485bac74a0333dac62233">   44</a></span>&#160;<span class="keyword">static</span> uint32_t <a class="code" href="mpeg4videoenc_8c.html#a9564ea95f6f485bac74a0333dac62233">uni_mpeg4_inter_rl_bits</a>[64 * 64 * 2 * 2];</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#adddc86b0ea3dd49dcf7591d7133213eb">   45</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="mpeg4videoenc_8c.html#adddc86b0ea3dd49dcf7591d7133213eb">uni_mpeg4_inter_rl_len</a>[64 * 64 * 2 * 2];</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//#define UNI_MPEG4_ENC_INDEX(last, run, level) ((last) * 128 + (run) * 256 + (level))</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//#define UNI_MPEG4_ENC_INDEX(last, run, level) ((last) * 128 * 64 + (run) + (level) * 64)</span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a9207a7e443058244a290ee561ed00eba">   49</a></span>&#160;<span class="preprocessor">#define UNI_MPEG4_ENC_INDEX(last, run, level) ((last) * 128 * 64 + (run) * 128 + (level))</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/* MPEG-4</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> * inter</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> * max level: 24/6</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> * max run: 53/63</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> * intra</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> * max level: 53/16</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> * max run: 29/41</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#af692f91ad3515ea556c694627f80b80c">   65</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="mpeg4videoenc_8c.html#af692f91ad3515ea556c694627f80b80c">get_block_rate</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int16_t <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[64],</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                 <span class="keywordtype">int</span> block_last_index, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> scantable[64])</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">int</span> last = 0;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordtype">int</span> rate = 0;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">for</span> (j = 1; j &lt;= block_last_index; j++) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = scantable[j];</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> += 64;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &amp; (~127)) == 0) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                <span class="keywordflow">if</span> (j &lt; block_last_index)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                    rate += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_ac_vlc_length[<a class="code" href="mpegvideo_8h.html#ab7cefe405923f0f149cdf904ed73e73c">UNI_AC_ENC_INDEX</a>(j - last - 1, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>)];</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                    rate += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_ac_vlc_last_length[<a class="code" href="mpegvideo_8h.html#ab7cefe405923f0f149cdf904ed73e73c">UNI_AC_ENC_INDEX</a>(j - last - 1, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>)];</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                rate += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_esc_length;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            last = j;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> rate;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a71985a328e5596cf614423259e75c9e6">  100</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a71985a328e5596cf614423259e75c9e6">restore_ac_coeffs</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int16_t <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[6][64],</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                                     <span class="keyword">const</span> <span class="keywordtype">int</span> dir[6], <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *st[6],</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                                     <span class="keyword">const</span> <span class="keywordtype">int</span> zigzag_last_index[6])</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, n;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index, zigzag_last_index, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * 6);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; 6; n++) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        int16_t *ac_val = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[0][0][0] + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[n] * 16;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        st[n] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (dir[n]) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="comment">/* top prediction */</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = ac_val[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 8];</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="comment">/* left prediction */</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; 3]] = ac_val[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a899a07668cf8c165f548796d8eca574f">  131</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="mpeg4videoenc_8c.html#a899a07668cf8c165f548796d8eca574f">decide_ac_pred</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int16_t <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[6][64],</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">int</span> dir[6], <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *st[6],</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                 <span class="keywordtype">int</span> zigzag_last_index[6])</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">int</span> score = 0;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, n;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    int8_t *<span class="keyword">const</span> qscale_table = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.qscale_table;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    memcpy(zigzag_last_index, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * 6);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; 6; n++) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        int16_t *ac_val, *ac_val1;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        score -= <a class="code" href="mpeg4videoenc_8c.html#af692f91ad3515ea556c694627f80b80c">get_block_rate</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n],</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        ac_val  = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[0][0][0] + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[n] * 16;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        ac_val1 = ac_val;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">if</span> (dir[n]) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="comment">/* top prediction */</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            ac_val -= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_wrap[n] * 16;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y == 0 || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale == qscale_table[xy] || n == 2 || n == 3) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <span class="comment">/* same qscale */</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - ac_val[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 8];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    ac_val1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]     = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; 3]];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    ac_val1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 8] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                <span class="comment">/* different qscale, we must rescale */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - <a class="code" href="common_8h.html#a7a2a86492a286d6d20678da1dbb00525">ROUNDED_DIV</a>(ac_val[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 8] * qscale_table[xy], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                    ac_val1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]     = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; 3]];</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                    ac_val1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 8] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            st[n] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_h_scantable.permutated;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x - 1 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="comment">/* left prediction */</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            ac_val -= 16;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x == 0 || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale == qscale_table[xy] || n == 1 || n == 3) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="comment">/* same qscale */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; 3]];</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; 3]] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - ac_val[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    ac_val1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]     = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    ac_val1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 8] = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <span class="comment">/* different qscale, we must rescale */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; 3]];</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; 3]] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - <a class="code" href="common_8h.html#a7a2a86492a286d6d20678da1dbb00525">ROUNDED_DIV</a>(ac_val[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * qscale_table[xy], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    ac_val1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]     = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    ac_val1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 8] = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            st[n] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_v_scantable.permutated;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 63; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--)  <span class="comment">// FIXME optimize</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n][st[n][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]])</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n] = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        score += <a class="code" href="mpeg4videoenc_8c.html#af692f91ad3515ea556c694627f80b80c">get_block_rate</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[n], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n], st[n]);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (score &lt; 0) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#a71985a328e5596cf614423259e75c9e6">restore_ac_coeffs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, dir, st, zigzag_last_index);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a3cb98819ccb00a36ec2d41a12ff940e4">  214</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a3cb98819ccb00a36ec2d41a12ff940e4">ff_clean_mpeg4_qscales</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    int8_t *<span class="keyword">const</span> qscale_table = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.qscale_table;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="h263_8h.html#a1ae0d250191f868d2b15f1ecef807e8a">ff_clean_h263_qscales</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordtype">int</span> odd = 0;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">/* ok, come on, this isn&#39;t funny anymore, there&#39;s more code for</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">         * handling this MPEG-4 mess than for the actual adaptive quantization */</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            odd += qscale_table[mb_xy] &amp; 1;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">if</span> (2 * odd &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            odd = 1;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            odd = 0;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">if</span> ((qscale_table[mb_xy] &amp; 1) != odd)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                qscale_table[mb_xy]++;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="keywordflow">if</span> (qscale_table[mb_xy] &gt; 31)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                qscale_table[mb_xy] = 31;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">if</span> (qscale_table[mb_xy] != qscale_table[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1]] &amp;&amp;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_type[mb_xy] &amp; <a class="code" href="mpegutils_8h.html#a6b6fdfcea7012d8c7dbdd4321c08b862">CANDIDATE_MB_TYPE_DIRECT</a>)) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_type[mb_xy] |= <a class="code" href="mpegutils_8h.html#a7eb7af26474d13fd9c035ee9e0eef80b">CANDIDATE_MB_TYPE_BIDIR</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a5e2b035b438c8da4265d1ae377e3d580">  258</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a5e2b035b438c8da4265d1ae377e3d580">mpeg4_encode_dc</a>(<a class="code" href="struct_put_bit_context.html">PutBitContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, <span class="keywordtype">int</span> n)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;{</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">/* DC will overflow if level is outside the [-255,255] range. */</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> += 256;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (n &lt; 4) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">/* luminance */</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="mpeg4videoenc_8c.html#a28536272e4e7472201217b2d930aeb3d">uni_DCtab_lum_len</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>], <a class="code" href="mpeg4videoenc_8c.html#a6046658e5fe3eeea90e6764178405b56">uni_DCtab_lum_bits</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>]);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">/* chrominance */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="mpeg4videoenc_8c.html#afd351591b5990b0c5938c3c3105b9c6b">uni_DCtab_chrom_len</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>], <a class="code" href="mpeg4videoenc_8c.html#a3111ba80bb65b4142626d7faec122c7d">uni_DCtab_chrom_bits</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>]);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#ac6dc52bbb67bc6e2a73b2b9c3a4737e2">  271</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="mpeg4videoenc_8c.html#ac6dc52bbb67bc6e2a73b2b9c3a4737e2">mpeg4_get_dc_length</a>(<span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, <span class="keywordtype">int</span> n)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (n &lt; 4)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mpeg4videoenc_8c.html#a28536272e4e7472201217b2d930aeb3d">uni_DCtab_lum_len</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> + 256];</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mpeg4videoenc_8c.html#afd351591b5990b0c5938c3c3105b9c6b">uni_DCtab_chrom_len</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> + 256];</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a0c4d426dc5e62be498b01f1220842ae3">  283</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a0c4d426dc5e62be498b01f1220842ae3">mpeg4_encode_block</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                      int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> intra_dc,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                      <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *scan_table, <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *dc_pb,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                      <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *ac_pb)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, last_non_zero;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    uint32_t *bits_tab;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *len_tab;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> last_index = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n];</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_intra) {  <span class="comment">// Note gcc (3.2.1 at least) will optimize this away</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">/* MPEG-4 based DC predictor */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#a5e2b035b438c8da4265d1ae377e3d580">mpeg4_encode_dc</a>(dc_pb, intra_dc, n);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">if</span> (last_index &lt; 1)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        bits_tab = <a class="code" href="mpeg4videoenc_8c.html#ac5021d398f4056f1d82cb4cc89ff8f90">uni_mpeg4_intra_rl_bits</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        len_tab  = <a class="code" href="mpeg4videoenc_8c.html#a326dd6c200621ba41379fc434d68ae21">uni_mpeg4_intra_rl_len</a>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">if</span> (last_index &lt; 0)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        bits_tab = <a class="code" href="mpeg4videoenc_8c.html#a9564ea95f6f485bac74a0333dac62233">uni_mpeg4_inter_rl_bits</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        len_tab  = <a class="code" href="mpeg4videoenc_8c.html#adddc86b0ea3dd49dcf7591d7133213eb">uni_mpeg4_inter_rl_len</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">/* AC coefs */</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    last_non_zero = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; last_index; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[scan_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - last_non_zero - 1;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> += 64;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &amp; (~127)) == 0) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mpeg4videoenc_8c.html#a9207a7e443058244a290ee561ed00eba">UNI_MPEG4_ENC_INDEX</a>(0, <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(ac_pb, len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>], bits_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            } <span class="keywordflow">else</span> {  <span class="comment">// ESC3</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(ac_pb,</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                         7 + 2 + 1 + 6 + 1 + 12 + 1,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                         (3 &lt;&lt; 23) + (3 &lt;&lt; 21) + (0 &lt;&lt; 20) + (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> &lt;&lt; 14) +</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                         (1 &lt;&lt; 13) + (((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - 64) &amp; 0xfff) &lt;&lt; 1) + 1);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            last_non_zero = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">/* if (i &lt;= last_index) */</span> {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[scan_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>   = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - last_non_zero - 1;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> += 64;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &amp; (~127)) == 0) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mpeg4videoenc_8c.html#a9207a7e443058244a290ee561ed00eba">UNI_MPEG4_ENC_INDEX</a>(1, <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(ac_pb, len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>], bits_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        } <span class="keywordflow">else</span> {  <span class="comment">// ESC3</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(ac_pb,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                     7 + 2 + 1 + 6 + 1 + 12 + 1,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                     (3 &lt;&lt; 23) + (3 &lt;&lt; 21) + (1 &lt;&lt; 20) + (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> &lt;&lt; 14) +</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                     (1 &lt;&lt; 13) + (((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - 64) &amp; 0xfff) &lt;&lt; 1) + 1);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a01438aee70d56fd1e526ae1d36025653">  344</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mpeg4videoenc_8c.html#a01438aee70d56fd1e526ae1d36025653">mpeg4_get_block_length</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                  int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> n,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                  <span class="keywordtype">int</span> intra_dc, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *scan_table)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, last_non_zero;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *len_tab;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> last_index = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n];</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = 0;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_intra) {  <span class="comment">// Note gcc (3.2.1 at least) will optimize this away</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="comment">/* MPEG-4 based DC predictor */</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += <a class="code" href="mpeg4videoenc_8c.html#ac6dc52bbb67bc6e2a73b2b9c3a4737e2">mpeg4_get_dc_length</a>(intra_dc, n);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">if</span> (last_index &lt; 1)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        len_tab = <a class="code" href="mpeg4videoenc_8c.html#a326dd6c200621ba41379fc434d68ae21">uni_mpeg4_intra_rl_len</a>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span> (last_index &lt; 0)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        len_tab = <a class="code" href="mpeg4videoenc_8c.html#adddc86b0ea3dd49dcf7591d7133213eb">uni_mpeg4_inter_rl_len</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">/* AC coefs */</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    last_non_zero = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; last_index; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[scan_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - last_non_zero - 1;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> += 64;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &amp; (~127)) == 0) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mpeg4videoenc_8c.html#a9207a7e443058244a290ee561ed00eba">UNI_MPEG4_ENC_INDEX</a>(0, <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            } <span class="keywordflow">else</span> {  <span class="comment">// ESC3</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += 7 + 2 + 1 + 6 + 1 + 12 + 1;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            last_non_zero = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">/* if (i &lt;= last_index) */</span> {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[scan_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>   = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - last_non_zero - 1;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> += 64;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &amp; (~127)) == 0) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mpeg4videoenc_8c.html#a9207a7e443058244a290ee561ed00eba">UNI_MPEG4_ENC_INDEX</a>(1, <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        } <span class="keywordflow">else</span> {  <span class="comment">// ESC3</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += 7 + 2 + 1 + 6 + 1 + 12 + 1;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a78c24de8c0152d5f8f8a64cb8590e19e">  398</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a78c24de8c0152d5f8f8a64cb8590e19e">mpeg4_encode_blocks</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int16_t <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[6][64],</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                       <span class="keywordtype">int</span> intra_dc[6], <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **scan_table,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                                       <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *dc_pb,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                       <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *ac_pb)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;{</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (scan_table) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags2 &amp; <a class="code" href="group__lavc__core.html#gae85064498366d2dc5e86b0a4f3c64617">AV_CODEC_FLAG2_NO_OUTPUT</a>) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                <a class="code" href="put__bits_8h.html#a2c171416a683915e511dcb11e0a17be3">skip_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                              <a class="code" href="mpeg4videoenc_8c.html#a01438aee70d56fd1e526ae1d36025653">mpeg4_get_block_length</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                                                     intra_dc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], scan_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="comment">/* encode each block */</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <a class="code" href="mpeg4videoenc_8c.html#a0c4d426dc5e62be498b01f1220842ae3">mpeg4_encode_block</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                                   intra_dc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], scan_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], dc_pb, ac_pb);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags2 &amp; <a class="code" href="group__lavc__core.html#gae85064498366d2dc5e86b0a4f3c64617">AV_CODEC_FLAG2_NO_OUTPUT</a>) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <a class="code" href="put__bits_8h.html#a2c171416a683915e511dcb11e0a17be3">skip_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                              <a class="code" href="mpeg4videoenc_8c.html#a01438aee70d56fd1e526ae1d36025653">mpeg4_get_block_length</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, 0,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated));</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="comment">/* encode each block */</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <a class="code" href="mpeg4videoenc_8c.html#a0c4d426dc5e62be498b01f1220842ae3">mpeg4_encode_block</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, 0,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                                   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated, dc_pb, ac_pb);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#abf00c05e89f5f4a6139b5ad0c42df2ca">  432</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="mpeg4videoenc_8c.html#abf00c05e89f5f4a6139b5ad0c42df2ca">get_b_cbp</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int16_t <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[6][64],</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                            <span class="keywordtype">int</span> motion_x, <span class="keywordtype">int</span> motion_y, <span class="keywordtype">int</span> mb_type)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordtype">int</span> cbp = 0, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mpv_flags &amp; <a class="code" href="mpegvideo_8h.html#a09b752cfff60a3be3b85e89b6e69ede1">FF_MPV_FLAG_CBP_RD</a>) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordtype">int</span> score        = 0;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> lambda = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lambda2 &gt;&gt; (<a class="code" href="group__lavu__enc.html#ga979d8e4b4947c924436fcc3b62cafea7">FF_LAMBDA_SHIFT</a> - 6);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_score[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; 0) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                score += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_score[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                cbp   |= 1 &lt;&lt; (5 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span> (cbp) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordtype">int</span> zero_score = -6;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordflow">if</span> ((motion_x | motion_y | <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant | mb_type) == 0)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                zero_score -= 4;  <span class="comment">// 2 * MV + mb_type + cbp bit</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            zero_score *= lambda;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">if</span> (zero_score &lt;= score)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                cbp = 0;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;= 0 &amp;&amp; ((cbp &gt;&gt; (5 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp; 1) == 0) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = -1;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bdsp.clear_block(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;= 0)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                cbp |= 1 &lt;&lt; (5 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">return</span> cbp;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">// FIXME this is duplicated to h263.c</span></div>
<div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#abd88f75b77f01c99e01b170cb3cfd207">  474</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="mpeg4videoenc_8c.html#abd88f75b77f01c99e01b170cb3cfd207">dquant_code</a>[5] = { 1, 0, 9, 2, 3 };</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#adf7a7d619dc16296ee1955c9dc66aa69">  476</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#adf7a7d619dc16296ee1955c9dc66aa69">ff_mpeg4_encode_mb</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int16_t <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[6][64],</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                        <span class="keywordtype">int</span> motion_x, <span class="keywordtype">int</span> motion_y)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;{</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordtype">int</span> cbpc, cbpy, pred_x, pred_y;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *<span class="keyword">const</span> pb2    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_partitioning ? &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb2 : &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *<span class="keyword">const</span> tex_pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_partitioning &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> ? &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;tex_pb : &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *<span class="keyword">const</span> dc_pb  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_partitioning &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a> ? &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb2 : &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> interleaved_stats = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga81bc0a84e8866ecff68e6d8a82781936">AV_CODEC_FLAG_PASS1</a>) &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_partitioning ? 1 : 0;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_intra) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, cbp;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="comment">/* convert from mv_dir to type */</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> mb_type_table[8] = { -1, 3, 2, 1, -1, -1, -1, 0 };</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordtype">int</span> mb_type = mb_type_table[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir];</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x == 0) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][0] =</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][1] =</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1][0] =</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1][1] = 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant &gt;= -2 &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant &lt;= 2);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant &amp; 1) == 0);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(mb_type &gt;= 0);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="comment">/* nothing to do if this MB was skipped in the next P-frame */</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture.mbskip_table[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x]) {  <span class="comment">// FIXME avoid DCT &amp; ...</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_count++;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] =</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] =</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][0] =</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][1] = 0;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir  = <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>;  <span class="comment">// doesn&#39;t matter</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale -= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">//                s-&gt;mb_skipped = 1;</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            cbp = <a class="code" href="mpeg4videoenc_8c.html#abf00c05e89f5f4a6139b5ad0c42df2ca">get_b_cbp</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, motion_x, motion_y, mb_type);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordflow">if</span> ((cbp | motion_x | motion_y | mb_type) == 0) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <span class="comment">/* direct MB with MV={0,0} */</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant == 0);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1); <span class="comment">/* mb not coded modb1=1 */</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="keywordflow">if</span> (interleaved_stats) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;misc_bits++;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_bits++;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_count++;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);            <span class="comment">/* mb coded modb1=0 */</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, cbp ? 0 : 1);  <span class="comment">/* modb2 */</span> <span class="comment">// FIXME merge</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, mb_type + 1, 1);  <span class="comment">// this table is so simple that we don&#39;t need it :)</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">if</span> (cbp)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 6, cbp);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <span class="keywordflow">if</span> (cbp &amp;&amp; mb_type) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 2, (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant &gt;&gt; 2) + 3);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale -= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <span class="keywordflow">if</span> (cbp)</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="keywordflow">if</span> (mb_type)                  <span class="comment">// not direct mode</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_type == <a class="code" href="mpegvideo_8h.html#a97e4ba7c779c1ac58dbc886ecdde3ec9">MV_TYPE_FIELD</a>);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;misc_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="keywordflow">if</span> (!mb_type) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#ae04ecce3af14ac66e5f3383c9d21418d">MV_DIRECT</a>);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                <a class="code" href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, motion_x, motion_y, 1);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_count++;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_count++;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(mb_type &gt; 0 &amp;&amp; mb_type &lt; 4);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_type != <a class="code" href="mpegvideo_8h.html#a97e4ba7c779c1ac58dbc886ecdde3ec9">MV_TYPE_FIELD</a>) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                        <a class="code" href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][0][0],</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][0][1],</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_code);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][0][0] =</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][1][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0];</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][0][1] =</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][1][1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1];</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_count++;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                    }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a>) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                        <a class="code" href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][0] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][0][0],</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][1] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][0][1],</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_code);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][0][0] =</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][1][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][0];</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][0][1] =</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][1][1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][1];</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_count++;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[0][0]);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[0][1]);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a>) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[1][0]);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[1][1]);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                    }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                            <a class="code" href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                                                         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0],</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                                         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] / 2,</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                                                         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_code);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0];</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] * 2;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                        }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_count++;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a>) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                            <a class="code" href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                                         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0],</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                                         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] / 2,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                                         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_code);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0];</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_mv[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] * 2;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_count++;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <a class="code" href="mpeg4videoenc_8c.html#a78c24de8c0152d5f8f8a64cb8590e19e">mpeg4_encode_blocks</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_tex_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">/* s-&gt;pict_type==AV_PICTURE_TYPE_B */</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            cbp = <a class="code" href="h263_8h.html#aaa185dc76fd8e097a266b1e50241c4ee">get_p_cbp</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, motion_x, motion_y);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <span class="keywordflow">if</span> ((cbp | motion_x | motion_y | <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant) == 0 &amp;&amp;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_type == <a class="code" href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a>) {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="comment">/* Check if the B-frames can skip it too, as we must skip it</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">                 * if we skip here why didn&#39;t they just compress</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">                 * the skip-mb bits instead of reusing them ?! */</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_b_frames &gt; 0) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                    <span class="keywordtype">int</span> x, y, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *p_pic;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                    x = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x * 16;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                    y = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * 16;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = x + y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    p_pic  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;new_picture.f-&gt;data[0] + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_skipped = 1;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_b_frames; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *b_pic;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                        <a class="code" href="struct_picture.html">Picture</a> *pic = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;reordered_input_picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1];</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                        <span class="keywordflow">if</span> (!pic || pic-&gt;<a class="code" href="struct_picture.html#ab73190435fab740e9c22e61aedb5c2ad">f</a>-&gt;<a class="code" href="struct_a_v_frame.html#af9920fc3fbfa347b8943ae461b50d18b">pict_type</a> != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>)</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                        b_pic = pic-&gt;<a class="code" href="struct_picture.html#ab73190435fab740e9c22e61aedb5c2ad">f</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0] + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                        <span class="keywordflow">if</span> (!pic-&gt;<a class="code" href="struct_picture.html#a6be7d180d1e1eed8b87f425f864b0915">shared</a>)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                            b_pic += <a class="code" href="mpegutils_8h.html#ae4d6797b903434b980e68206df61cf49">INPLACE_OFFSET</a>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                        <span class="keywordflow">if</span> (x + 16 &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width || y + 16 &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                            <span class="keywordtype">int</span> x1, y1;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                            <span class="keywordtype">int</span> xe = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(16, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width - x);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                            <span class="keywordtype">int</span> ye = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(16, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height - y);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                            <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> = 0;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                            <span class="keywordflow">for</span> (y1 = 0; y1 &lt; ye; y1++) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                <span class="keywordflow">for</span> (x1 = 0; x1 &lt; xe; x1++) {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                                    <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(p_pic[x1 + y1 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize] - b_pic[x1 + y1 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize]);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                                }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                            }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                            <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> = <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> * 256 / (xe * ye);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                            <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mecc.sad[0](<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, p_pic, b_pic, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize, 16);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                        }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale * 70) {  <span class="comment">// FIXME check that 70 is optimal</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_skipped = 0;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                        }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                    }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_skipped = 1;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_skipped == 1) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                    <span class="comment">/* skip macroblock */</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    <span class="keywordflow">if</span> (interleaved_stats) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;misc_bits++;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_bits++;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_count++;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);     <span class="comment">/* mb coded */</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            cbpc  = cbp &amp; 3;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            cbpy  = cbp &gt;&gt; 2;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            cbpy ^= 0xf;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_type == <a class="code" href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a>) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                    cbpc += 8;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb,</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                         <a class="code" href="h263data_8c.html#a9ff6abdf4005a6fbaa60182f48c8599d">ff_h263_inter_MCBPC_bits</a>[cbpc],</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                         <a class="code" href="h263data_8c.html#a7c6b1a08ff0472bb10ff380eca5de9fc">ff_h263_inter_MCBPC_code</a>[cbpc]);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, <a class="code" href="h263data_8c.html#ac12e215e12cbb9619a230a4b65367ea0">ff_h263_cbpy_tab</a>[cbpy][1], <a class="code" href="h263data_8c.html#ac12e215e12cbb9619a230a4b65367ea0">ff_h263_cbpy_tab</a>[cbpy][0]);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, 2, <a class="code" href="mpeg4videoenc_8c.html#abd88f75b77f01c99e01b170cb3cfd207">dquant_code</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant + 2]);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                    <span class="keywordflow">if</span> (cbp)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, 1, 0);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;misc_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                <span class="comment">/* motion vectors: 16x16 mode */</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                <a class="code" href="h263_8c.html#ad423361ec4e37dba11b3af1737f12357">ff_h263_pred_motion</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, 0, &amp;pred_x, &amp;pred_y);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                <a class="code" href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                                             motion_x - pred_x,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                                             motion_y - pred_y,</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_code);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_type == <a class="code" href="mpegvideo_8h.html#a97e4ba7c779c1ac58dbc886ecdde3ec9">MV_TYPE_FIELD</a>) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                    cbpc += 8;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb,</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                         <a class="code" href="h263data_8c.html#a9ff6abdf4005a6fbaa60182f48c8599d">ff_h263_inter_MCBPC_bits</a>[cbpc],</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                         <a class="code" href="h263data_8c.html#a7c6b1a08ff0472bb10ff380eca5de9fc">ff_h263_inter_MCBPC_code</a>[cbpc]);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, <a class="code" href="h263data_8c.html#ac12e215e12cbb9619a230a4b65367ea0">ff_h263_cbpy_tab</a>[cbpy][1], <a class="code" href="h263data_8c.html#ac12e215e12cbb9619a230a4b65367ea0">ff_h263_cbpy_tab</a>[cbpy][0]);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, 2, <a class="code" href="mpeg4videoenc_8c.html#abd88f75b77f01c99e01b170cb3cfd207">dquant_code</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant + 2]);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <span class="keywordflow">if</span> (cbp)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, 1, 1);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;misc_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                <span class="comment">/* motion vectors: 16x8 interlaced mode */</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                <a class="code" href="h263_8c.html#ad423361ec4e37dba11b3af1737f12357">ff_h263_pred_motion</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, 0, &amp;pred_x, &amp;pred_y);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                pred_y /= 2;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[0][0]);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[0][1]);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <a class="code" href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] - pred_x,</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] - pred_y,</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_code);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <a class="code" href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][1][0] - pred_x,</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][1][1] - pred_y,</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_code);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_type == <a class="code" href="mpegvideo_8h.html#a98f9328b4f99d0b6a3974cf441633edf">MV_TYPE_8X8</a>);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb,</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                         <a class="code" href="h263data_8c.html#a9ff6abdf4005a6fbaa60182f48c8599d">ff_h263_inter_MCBPC_bits</a>[cbpc + 16],</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                         <a class="code" href="h263data_8c.html#a7c6b1a08ff0472bb10ff380eca5de9fc">ff_h263_inter_MCBPC_code</a>[cbpc + 16]);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, <a class="code" href="h263data_8c.html#ac12e215e12cbb9619a230a4b65367ea0">ff_h263_cbpy_tab</a>[cbpy][1], <a class="code" href="h263data_8c.html#ac12e215e12cbb9619a230a4b65367ea0">ff_h263_cbpy_tab</a>[cbpy][0]);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence &amp;&amp; cbp)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;misc_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    <span class="comment">/* motion vectors: 8x8 mode*/</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                    <a class="code" href="h263_8c.html#ad423361ec4e37dba11b3af1737f12357">ff_h263_pred_motion</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, 0, &amp;pred_x, &amp;pred_y);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                    <a class="code" href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.motion_val[0][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]][0] - pred_x,</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.motion_val[0][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]][1] - pred_y,</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_code);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <a class="code" href="mpeg4videoenc_8c.html#a78c24de8c0152d5f8f8a64cb8590e19e">mpeg4_encode_blocks</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, tex_pb);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_tex_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_count++;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordtype">int</span> cbp;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordtype">int</span> dc_diff[6];  <span class="comment">// dc values with the dc prediction subtracted</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordtype">int</span> dir[6];      <span class="comment">// prediction direction</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordtype">int</span> zigzag_last_index[6];</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *scan_table[6];</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            dc_diff[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="mpeg4video_8h.html#adbb5c618d2613d46f1e4de7f7e7678ac">ff_mpeg4_pred_dc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0], &amp;dir[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 1);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga78187a415454abc849d4ca0682ab420a">AV_CODEC_FLAG_AC_PRED</a>) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_pred = <a class="code" href="mpeg4videoenc_8c.html#a899a07668cf8c165f548796d8eca574f">decide_ac_pred</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, dir, scan_table, zigzag_last_index);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                scan_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="comment">/* compute cbp */</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        cbp = 0;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;= 1)</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                cbp |= 1 &lt;&lt; (5 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        cbpc = cbp &amp; 3;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>) {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                cbpc += 4;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb,</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                     <a class="code" href="h263data_8c.html#a6f03cb3cc07df9368f9987c83a2b5df2">ff_h263_intra_MCBPC_bits</a>[cbpc],</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                     <a class="code" href="h263data_8c.html#ab6856d0b9e0816b96e34c21131b7a297">ff_h263_intra_MCBPC_code</a>[cbpc]);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                cbpc += 8;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);     <span class="comment">/* mb coded */</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb,</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                     <a class="code" href="h263data_8c.html#a9ff6abdf4005a6fbaa60182f48c8599d">ff_h263_inter_MCBPC_bits</a>[cbpc + 4],</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                     <a class="code" href="h263data_8c.html#a7c6b1a08ff0472bb10ff380eca5de9fc">ff_h263_inter_MCBPC_code</a>[cbpc + 4]);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_pred);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        cbpy = cbp &gt;&gt; 2;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb2, <a class="code" href="h263data_8c.html#ac12e215e12cbb9619a230a4b65367ea0">ff_h263_cbpy_tab</a>[cbpy][1], <a class="code" href="h263data_8c.html#ac12e215e12cbb9619a230a4b65367ea0">ff_h263_cbpy_tab</a>[cbpy][0]);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(dc_pb, 2, <a class="code" href="mpeg4videoenc_8c.html#abd88f75b77f01c99e01b170cb3cfd207">dquant_code</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dquant + 2]);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(dc_pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;misc_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#a78c24de8c0152d5f8f8a64cb8590e19e">mpeg4_encode_blocks</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, dc_diff, scan_table, dc_pb, tex_pb);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> (interleaved_stats)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;i_tex_bits += <a class="code" href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;i_count++;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="comment">/* restore ac coeffs &amp; last_index stuff</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">         * if we messed them up with the prediction */</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_pred)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <a class="code" href="mpeg4videoenc_8c.html#a71985a328e5596cf614423259e75c9e6">restore_ac_coeffs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, dir, scan_table, zigzag_last_index);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;}</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a17e9b2a88b4325b4789aec9ef47898f8">  864</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a17e9b2a88b4325b4789aec9ef47898f8">ff_mpeg4_stuffing</a>(<a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pbc)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;{</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordtype">int</span> length;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pbc, 1, 0);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    length = (-<a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(pbc)) &amp; 7;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">if</span> (length)</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pbc, length, (1 &lt;&lt; length) - 1);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;}</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">/* must be called before writing the header */</span></div>
<div class="line"><a name="l00874"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#af3712e441b9786e2864081e158c1979e">  874</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#af3712e441b9786e2864081e158c1979e">ff_set_mpeg4_time</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;{</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="mpeg4video_8c.html#a217aab4bc9a043dc90c45146041391f7">ff_mpeg4_init_direct_mv</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_time_base = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;time_base;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;time_base      = <a class="code" href="common_8h.html#a5117194af5289224bceaaa5466586d8f">FFUDIV</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;time, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;time_base.den);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a250a17eae936e730d8de40b5c54cc0f0">  884</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a250a17eae936e730d8de40b5c54cc0f0">mpeg4_encode_gop_header</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;{</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    int64_t hours, minutes, seconds;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    int64_t time;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, <a class="code" href="mpeg4video_8h.html#ae72f13a4150084e121eca51b040fe9d1">GOP_STARTCODE</a>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    time = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;pts;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;reordered_input_picture[1])</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        time = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(time, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;reordered_input_picture[1]-&gt;f-&gt;pts);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    time = time * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;time_base.num;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_time_base = <a class="code" href="common_8h.html#a5117194af5289224bceaaa5466586d8f">FFUDIV</a>(time, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;time_base.den);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    seconds = <a class="code" href="common_8h.html#a5117194af5289224bceaaa5466586d8f">FFUDIV</a>(time, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;time_base.den);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    minutes = <a class="code" href="common_8h.html#a5117194af5289224bceaaa5466586d8f">FFUDIV</a>(seconds, 60); seconds = <a class="code" href="common_8h.html#aa0241c1e04e45d7be1b388d83ab57f22">FFUMOD</a>(seconds, 60);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    hours   = <a class="code" href="common_8h.html#a5117194af5289224bceaaa5466586d8f">FFUDIV</a>(minutes, 60); minutes = <a class="code" href="common_8h.html#aa0241c1e04e45d7be1b388d83ab57f22">FFUMOD</a>(minutes, 60);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    hours   = <a class="code" href="common_8h.html#aa0241c1e04e45d7be1b388d83ab57f22">FFUMOD</a>(hours  , 24);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 5, hours);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 6, minutes);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 6, seconds);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, !!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga4444b40e467199423bba5cf5ac791c49">AV_CODEC_FLAG_CLOSED_GOP</a>));</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);  <span class="comment">// broken link == NO</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <a class="code" href="mpeg4videoenc_8c.html#a17e9b2a88b4325b4789aec9ef47898f8">ff_mpeg4_stuffing</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a86d9493618dbcf3f902e874dd88f3a2d">  914</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a86d9493618dbcf3f902e874dd88f3a2d">mpeg4_encode_visual_object_header</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;{</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordtype">int</span> profile_and_level_indication;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordtype">int</span> vo_ver_id;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;profile != <a class="code" href="avcodec_8h.html#a1d8d03f5be975b8a728574cbdb00c896">FF_PROFILE_UNKNOWN</a>) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        profile_and_level_indication = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;profile &lt;&lt; 4;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_b_frames || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        profile_and_level_indication = 0xF0;  <span class="comment">// adv simple</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        profile_and_level_indication = 0x00;  <span class="comment">// simple</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;level != <a class="code" href="avcodec_8h.html#a84a993ea19afa2cbda45b3283a598fe6">FF_LEVEL_UNKNOWN</a>)</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        profile_and_level_indication |= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;level;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        profile_and_level_indication |= 1;   <span class="comment">// level 1</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">if</span> (profile_and_level_indication &gt;&gt; 4 == 0xF)</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        vo_ver_id = 5;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        vo_ver_id = 1;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">// FIXME levels</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, <a class="code" href="mpeg4video_8h.html#aab2d74f6f9141b604ed64c6dc8d65fbd">VOS_STARTCODE</a>);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 8, profile_and_level_indication);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, <a class="code" href="mpeg4video_8h.html#aff483794908bbf559fd5bc7bb61b269f">VISUAL_OBJ_STARTCODE</a>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 4, vo_ver_id);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 3, 1);     <span class="comment">// priority</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 4, 1);     <span class="comment">// visual obj type== video obj</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);     <span class="comment">// video signal type == no clue // FIXME</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="mpeg4videoenc_8c.html#a17e9b2a88b4325b4789aec9ef47898f8">ff_mpeg4_stuffing</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#add932ba7d8f1d6e835b164d906005e62">  958</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#add932ba7d8f1d6e835b164d906005e62">mpeg4_encode_vol_header</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                                    <span class="keywordtype">int</span> vo_number,</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                                    <span class="keywordtype">int</span> vol_number)</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;{</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordtype">int</span> vo_ver_id;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> (!CONFIG_MPEG4_ENCODER)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_b_frames || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample) {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        vo_ver_id  = 5;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vo_type = <a class="code" href="mpeg4video_8h.html#a0936d27392db3bf2e13b84d1a95b8fc3">ADV_SIMPLE_VO_TYPE</a>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        vo_ver_id  = 1;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vo_type = <a class="code" href="mpeg4video_8h.html#a7f919a3f8d3eb9c13a5cc5024de8247a">SIMPLE_VO_TYPE</a>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0x100 + vo_number);        <span class="comment">/* video obj */</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0x120 + vol_number);       <span class="comment">/* video obj layer */</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);             <span class="comment">/* random access vol */</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 8, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vo_type);    <span class="comment">/* video obj type indication */</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;workaround_bugs &amp; <a class="code" href="avcodec_8h.html#a25cec8cef30d72dde57cefb20c778b68">FF_BUG_MS</a>) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);         <span class="comment">/* is obj layer id= no */</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);         <span class="comment">/* is obj layer id= yes */</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 4, vo_ver_id); <span class="comment">/* is obj layer ver id */</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 3, 1);         <span class="comment">/* is obj layer priority */</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aspect_ratio_info = <a class="code" href="h263_8h.html#a97f80be6d2f1fbd2960995de66d7cdc0">ff_h263_aspect_to_info</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;sample_aspect_ratio);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 4, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aspect_ratio_info); <span class="comment">/* aspect ratio info */</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aspect_ratio_info == <a class="code" href="h263_8h.html#a2ac59087a5668d2e943218dd6df64373">FF_ASPECT_EXTENDED</a>) {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;sample_aspect_ratio.num, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;sample_aspect_ratio.den,</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;sample_aspect_ratio.num,  <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;sample_aspect_ratio.den, 255);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 8, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;sample_aspect_ratio.num);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 8, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;sample_aspect_ratio.den);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;workaround_bugs &amp; <a class="code" href="avcodec_8h.html#a25cec8cef30d72dde57cefb20c778b68">FF_BUG_MS</a>) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);         <span class="comment">/* vol control parameters= no @@@ */</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);         <span class="comment">/* vol control parameters= yes */</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 2, 1);         <span class="comment">/* chroma format YUV 420/YV12 */</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;low_delay);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);         <span class="comment">/* vbv parameters= no */</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 2, <a class="code" href="mpeg4video_8h.html#a8c006b22e71e0bd6ab52b374624aac2f">RECT_SHAPE</a>);    <span class="comment">/* vol shape= rectangle */</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);             <span class="comment">/* marker bit */</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;time_base.den);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;time_increment_bits &lt; 1)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;time_increment_bits = 1;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);             <span class="comment">/* marker bit */</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);             <span class="comment">/* fixed vop rate=no */</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);             <span class="comment">/* marker bit */</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 13, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width);     <span class="comment">/* vol width */</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);             <span class="comment">/* marker bit */</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 13, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height);    <span class="comment">/* vol height */</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);             <span class="comment">/* marker bit */</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence ? 0 : 1);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);             <span class="comment">/* obmc disable */</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordflow">if</span> (vo_ver_id == 1)</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);       <span class="comment">/* sprite enable */</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 2, 0);       <span class="comment">/* sprite enable */</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);             <span class="comment">/* not 8 bit == false */</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mpeg_quant); <span class="comment">/* quant type = (0 = H.263 style) */</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mpeg_quant) {</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <a class="code" href="mpegvideo_8h.html#ac674fec04dd2093f78cb6c5b3fe78a20">ff_write_quant_matrix</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;intra_matrix);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <a class="code" href="mpegvideo_8h.html#ac674fec04dd2093f78cb6c5b3fe78a20">ff_write_quant_matrix</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;inter_matrix);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">if</span> (vo_ver_id != 1)</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);             <span class="comment">/* complexity estimation disable */</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rtp_mode ? 0 : 1); <span class="comment">/* resync marker disable */</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_partitioning ? 1 : 0);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_partitioning)</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);         <span class="comment">/* no rvlc */</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">if</span> (vo_ver_id != 1) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);         <span class="comment">/* newpred */</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);         <span class="comment">/* reduced res vop */</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);             <span class="comment">/* scalability */</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <a class="code" href="mpeg4videoenc_8c.html#a17e9b2a88b4325b4789aec9ef47898f8">ff_mpeg4_stuffing</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="comment">/* user data */</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a>)) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0x1B2);    <span class="comment">/* user_data */</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <a class="code" href="bitstream_8c.html#af6b5758c3848b7b67feacfba571bd15c">ff_put_string</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="libavcodec_2version_8h.html#a391ab92645796653bdc9eed09e1f8e0b">LIBAVCODEC_IDENT</a>, 0);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;}</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment">/* write MPEG-4 VOP header */</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#aa6c7ecef4139a28e5aad7d82857d429d"> 1062</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mpeg4videoenc_8c.html#aa6c7ecef4139a28e5aad7d82857d429d">ff_mpeg4_encode_picture_header</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> picture_number)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;{</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    uint64_t time_incr;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    int64_t time_div, time_mod;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga9ed82634c59b339786575827c47a8f68">AV_CODEC_FLAG_GLOBAL_HEADER</a>)) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;strict_std_compliance &lt; <a class="code" href="avcodec_8h.html#a96808e3862c53c7edb4ace1b2f3e544f">FF_COMPLIANCE_VERY_STRICT</a>)  <span class="comment">// HACK, the reference sw is buggy</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                <a class="code" href="mpeg4videoenc_8c.html#a86d9493618dbcf3f902e874dd88f3a2d">mpeg4_encode_visual_object_header</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;strict_std_compliance &lt; <a class="code" href="avcodec_8h.html#a96808e3862c53c7edb4ace1b2f3e544f">FF_COMPLIANCE_VERY_STRICT</a> || picture_number == 0)  <span class="comment">// HACK, the reference sw is buggy</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                <a class="code" href="mpeg4videoenc_8c.html#add932ba7d8f1d6e835b164d906005e62">mpeg4_encode_vol_header</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, 0);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;workaround_bugs &amp; <a class="code" href="avcodec_8h.html#a25cec8cef30d72dde57cefb20c778b68">FF_BUG_MS</a>))</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <a class="code" href="mpeg4videoenc_8c.html#a250a17eae936e730d8de40b5c54cc0f0">mpeg4_encode_gop_header</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;partitioned_frame = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_partitioning &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, 0);                <span class="comment">/* vop header */</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 16, <a class="code" href="mpeg4video_8h.html#ac6963b0ecbae79a61bd1e96b561ce6fc">VOP_STARTCODE</a>);    <span class="comment">/* vop header */</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 2, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type - 1);  <span class="comment">/* pict type: I = 0 , P = 1 */</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    time_div  = <a class="code" href="common_8h.html#a5117194af5289224bceaaa5466586d8f">FFUDIV</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;time, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;time_base.den);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    time_mod  = <a class="code" href="common_8h.html#aa0241c1e04e45d7be1b388d83ab57f22">FFUMOD</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;time, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;time_base.den);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    time_incr = time_div - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_time_base;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="comment">// This limits the frame duration to max 1 hour</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span> (time_incr &gt; 3600) {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;time_incr %&quot;</span>PRIu64<span class="stringliteral">&quot; too large\n&quot;</span>, time_incr);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">while</span> (time_incr--)</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160; </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);                             <span class="comment">/* marker */</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;time_increment_bits, time_mod); <span class="comment">/* time increment */</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);                             <span class="comment">/* marker */</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);                             <span class="comment">/* vop coded */</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a>) {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;no_rounding);    <span class="comment">/* rounding type */</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 3, 0);     <span class="comment">/* intra dc VLC threshold */</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence) {</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;top_field_first);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;alternate_scan);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="comment">// FIXME sprite stuff</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 5, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>)</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 3, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_code);  <span class="comment">/* fcode_for */</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 3, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_code);  <span class="comment">/* fcode_back */</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;}</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a4fca86e50329f70fdf6d75d8b5106cd6"> 1122</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a4fca86e50329f70fdf6d75d8b5106cd6">init_uni_dc_tab</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;{</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, uni_code, uni_len;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -256; <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; 256; <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>++) {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, v, l;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="comment">/* find number of bits */</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = 0;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        v    = <a class="code" href="cuda__runtime_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a>(<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="keywordflow">while</span> (v) {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            v &gt;&gt;= 1;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>++;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; 0)</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            l = (-<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) ^ ((1 &lt;&lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>) - 1);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            l = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <span class="comment">/* luminance */</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        uni_code = <a class="code" href="mpeg4data_8h.html#a07d02c86cc9c7043d763ca335ede62b4">ff_mpeg4_DCtab_lum</a>[<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>][0];</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        uni_len  = <a class="code" href="mpeg4data_8h.html#a07d02c86cc9c7043d763ca335ede62b4">ff_mpeg4_DCtab_lum</a>[<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>][1];</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 0) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            uni_code &lt;&lt;= <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            uni_code  |= l;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            uni_len   += <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 8) {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                uni_code &lt;&lt;= 1;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                uni_code  |= 1;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                uni_len++;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#a6046658e5fe3eeea90e6764178405b56">uni_DCtab_lum_bits</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> + 256] = uni_code;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#a28536272e4e7472201217b2d930aeb3d">uni_DCtab_lum_len</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> + 256]  = uni_len;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="comment">/* chrominance */</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        uni_code = <a class="code" href="mpeg4data_8h.html#a775cd30d6516dd8eef078e2b6dd2cbc8">ff_mpeg4_DCtab_chrom</a>[<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>][0];</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        uni_len  = <a class="code" href="mpeg4data_8h.html#a775cd30d6516dd8eef078e2b6dd2cbc8">ff_mpeg4_DCtab_chrom</a>[<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>][1];</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 0) {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            uni_code &lt;&lt;= <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            uni_code  |= l;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            uni_len   += <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 8) {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                uni_code &lt;&lt;= 1;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                uni_code  |= 1;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                uni_len++;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        }</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#a3111ba80bb65b4142626d7faec122c7d">uni_DCtab_chrom_bits</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> + 256] = uni_code;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#afd351591b5990b0c5938c3c3105b9c6b">uni_DCtab_chrom_len</a>[<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> + 256]  = uni_len;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;}</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#aef3407735a5898b66a90d0c1423dfc48"> 1177</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#aef3407735a5898b66a90d0c1423dfc48">init_uni_mpeg4_rl_tab</a>(<a class="code" href="struct_r_l_table.html">RLTable</a> *rl, uint32_t *bits_tab,</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                                          <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *len_tab)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;{</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="keywordtype">int</span> slevel, <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, last;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160; </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="rl_8h.html#a5bb4257ca9fa4bfcf9391b7895b97761">MAX_LEVEL</a> &gt;= 64);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="rl_8h.html#a6290a2e3d073369f1f1660c061cb0d48">MAX_RUN</a> &gt;= 63);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">for</span> (slevel = -64; slevel &lt; 64; slevel++) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="keywordflow">if</span> (slevel == 0)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> = 0; <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> &lt; 64; <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>++) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <span class="keywordflow">for</span> (last = 0; last &lt;= 1; last++) {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mpeg4videoenc_8c.html#a9207a7e443058244a290ee561ed00eba">UNI_MPEG4_ENC_INDEX</a>(last, <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, slevel + 64);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>       = slevel &lt; 0 ? -slevel : slevel;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                <span class="keywordtype">int</span> sign        = slevel &lt; 0 ? 1 : 0;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                <span class="keywordtype">int</span> level1, run1;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] = 100;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <span class="comment">/* ESC0 */</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a> = <a class="code" href="rl_8h.html#abc478b6186576bc354ba2e939790849c">get_rl_index</a>(rl, last, <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>][0];</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>  = rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>][1];</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 2 + sign;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>++;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a> != rl-&gt;<a class="code" href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">n</a> &amp;&amp; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                    bits_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                    len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]  = <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                <span class="comment">/* ESC1 */</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[rl-&gt;<a class="code" href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">n</a>][0];</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>  = rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[rl-&gt;<a class="code" href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">n</a>][1];</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 2;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>++;                 <span class="comment">// esc1</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                level1 = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - rl-&gt;<a class="code" href="struct_r_l_table.html#aea786354323729e6540be4bb8e042c0d">max_level</a>[last][<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>];</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                <span class="keywordflow">if</span> (level1 &gt; 0) {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                    <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>   = <a class="code" href="rl_8h.html#abc478b6186576bc354ba2e939790849c">get_rl_index</a>(rl, last, <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, level1);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                    <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> &lt;&lt;= rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>][1];</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>   += rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>][1];</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                    <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>  += rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>][0];</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                    <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>   = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 2 + sign;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>++;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a> != rl-&gt;<a class="code" href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">n</a> &amp;&amp; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]) {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                        bits_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                        len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]  = <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                }</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                <span class="comment">/* ESC2 */</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[rl-&gt;<a class="code" href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">n</a>][0];</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>  = rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[rl-&gt;<a class="code" href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">n</a>][1];</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 4 + 2;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += 2;                 <span class="comment">// esc2</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                run1 = <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> - rl-&gt;<a class="code" href="struct_r_l_table.html#a27405dc716e4009fa2a1af34978b76f8">max_run</a>[last][<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>] - 1;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                <span class="keywordflow">if</span> (run1 &gt;= 0) {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                    <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>   = <a class="code" href="rl_8h.html#abc478b6186576bc354ba2e939790849c">get_rl_index</a>(rl, last, run1, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                    <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> &lt;&lt;= rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>][1];</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>   += rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>][1];</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                    <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>  += rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>][0];</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                    <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>   = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 2 + sign;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>++;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a> != rl-&gt;<a class="code" href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">n</a> &amp;&amp; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                        bits_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                        len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]  = <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                    }</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                }</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                <span class="comment">/* ESC3 */</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[rl-&gt;<a class="code" href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">n</a>][0];</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>  = rl-&gt;<a class="code" href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">table_vlc</a>[rl-&gt;<a class="code" href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">n</a>][1];</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 4 + 3;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += 2;                 <span class="comment">// esc3</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 2 + last;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>++;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 64 + <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += 6;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 2 + 1;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>++;                    <span class="comment">// marker</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 4096 + (slevel &amp; 0xfff);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += 12;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> * 2 + 1;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>++;                    <span class="comment">// marker</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160; </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                    bits_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                    len_tab[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]  = <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a6909091de9705577caf1367b15360d51"> 1272</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="mpeg4videoenc_8c.html#a6909091de9705577caf1367b15360d51">encode_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;{</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> done = 0;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a> &gt;= (1&lt;&lt;13) || avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> &gt;= (1&lt;&lt;13)) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;dimensions too large for MPEG-4\n&quot;</span>);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegvideo_8h.html#af46e621f5b4a1fa35105554031e7b7b5">ff_mpv_encode_init</a>(avctx)) &lt; 0)</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">if</span> (!done) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        done = 1;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#a4fca86e50329f70fdf6d75d8b5106cd6">init_uni_dc_tab</a>();</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <a class="code" href="rl_8c.html#aea223213d198a43aae9852a92d9f45ec">ff_rl_init</a>(&amp;<a class="code" href="mpeg4data_8h.html#a313b1bc65b6adcf48f1e2dd7e663cb97">ff_mpeg4_rl_intra</a>, <a class="code" href="mpeg4video_8c.html#aa4c7caefb623bd8d04d71fcab14855f4">ff_mpeg4_static_rl_table_store</a>[0]);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#aef3407735a5898b66a90d0c1423dfc48">init_uni_mpeg4_rl_tab</a>(&amp;<a class="code" href="mpeg4data_8h.html#a313b1bc65b6adcf48f1e2dd7e663cb97">ff_mpeg4_rl_intra</a>, <a class="code" href="mpeg4videoenc_8c.html#ac5021d398f4056f1d82cb4cc89ff8f90">uni_mpeg4_intra_rl_bits</a>, <a class="code" href="mpeg4videoenc_8c.html#a326dd6c200621ba41379fc434d68ae21">uni_mpeg4_intra_rl_len</a>);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#aef3407735a5898b66a90d0c1423dfc48">init_uni_mpeg4_rl_tab</a>(&amp;<a class="code" href="h263data_8c.html#a43a2c7bfad4ca9afb3591e9837c4bdfe">ff_h263_rl_inter</a>, <a class="code" href="mpeg4videoenc_8c.html#a9564ea95f6f485bac74a0333dac62233">uni_mpeg4_inter_rl_bits</a>, <a class="code" href="mpeg4videoenc_8c.html#adddc86b0ea3dd49dcf7591d7133213eb">uni_mpeg4_inter_rl_len</a>);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min_qcoeff               = -2048;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_qcoeff               = 2047;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_ac_vlc_length      = <a class="code" href="mpeg4videoenc_8c.html#a326dd6c200621ba41379fc434d68ae21">uni_mpeg4_intra_rl_len</a>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_ac_vlc_last_length = <a class="code" href="mpeg4videoenc_8c.html#a326dd6c200621ba41379fc434d68ae21">uni_mpeg4_intra_rl_len</a> + 128 * 64;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;inter_ac_vlc_length      = <a class="code" href="mpeg4videoenc_8c.html#adddc86b0ea3dd49dcf7591d7133213eb">uni_mpeg4_inter_rl_len</a>;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;inter_ac_vlc_last_length = <a class="code" href="mpeg4videoenc_8c.html#adddc86b0ea3dd49dcf7591d7133213eb">uni_mpeg4_inter_rl_len</a> + 128 * 64;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;luma_dc_vlc_length       = <a class="code" href="mpeg4videoenc_8c.html#a28536272e4e7472201217b2d930aeb3d">uni_DCtab_lum_len</a>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_esc_length            = 7 + 2 + 1 + 6 + 1 + 12 + 1;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_dc_scale_table         = <a class="code" href="mpeg4data_8h.html#a74aa72cbf3d86b9a380347ac91fcc91c">ff_mpeg4_y_dc_scale_table</a>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_dc_scale_table         = <a class="code" href="mpeg4data_8h.html#a5eaea11533f853fb2ff87c498f657e05">ff_mpeg4_c_dc_scale_table</a>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga9ed82634c59b339786575827c47a8f68">AV_CODEC_FLAG_GLOBAL_HEADER</a>) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;extradata = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(1024);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <a class="code" href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;extradata, 1024);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;workaround_bugs &amp; <a class="code" href="avcodec_8h.html#a25cec8cef30d72dde57cefb20c778b68">FF_BUG_MS</a>))</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <a class="code" href="mpeg4videoenc_8c.html#a86d9493618dbcf3f902e874dd88f3a2d">mpeg4_encode_visual_object_header</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <a class="code" href="mpeg4videoenc_8c.html#add932ba7d8f1d6e835b164d906005e62">mpeg4_encode_vol_header</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, 0);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">//            ff_mpeg4_stuffing(&amp;s-&gt;pb); ?</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <a class="code" href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;extradata_size = (<a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb) + 7) &gt;&gt; 3;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    }</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;}</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#afb0e37cdd70020b08ca2b77b8070ecc2"> 1323</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#afb0e37cdd70020b08ca2b77b8070ecc2">ff_mpeg4_init_partitions</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;{</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *start = <a class="code" href="put__bits_8h.html#a41767bc78e56a4651aba50323502b90f">put_bits_ptr</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb.buf_end;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>       = <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> - start;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordtype">int</span> pb_size    = (((intptr_t)start + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> / 3) &amp; (~3)) - (intptr_t)start;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordtype">int</span> tex_size   = (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - 2 * pb_size) &amp; (~3);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160; </div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <a class="code" href="put__bits_8h.html#a278971e2e82f304cffec04852d08be11">set_put_bits_buffer_size</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, pb_size);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <a class="code" href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;tex_pb, start + pb_size, tex_size);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <a class="code" href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb2, start + pb_size + tex_size, pb_size);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;}</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a1dd4ec4f7ca56e56e4c9f872ecf84912"> 1336</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#a1dd4ec4f7ca56e56e4c9f872ecf84912">ff_mpeg4_merge_partitions</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;{</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> pb2_len    = <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb2);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> tex_pb_len = <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;tex_pb);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>       = <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>) {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 19, <a class="code" href="mpeg4video_8h.html#a841dc876c471abcf1ffe238aff129db4">DC_MARKER</a>);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;misc_bits  += 19 + pb2_len + <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_bits;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;i_tex_bits += tex_pb_len;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 17, <a class="code" href="mpeg4video_8h.html#a8ad2309ae2bad5dba54b91305937851d">MOTION_MARKER</a>);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;misc_bits  += 17 + pb2_len;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_bits    += <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_bits;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_tex_bits += tex_pb_len;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <a class="code" href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb2);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <a class="code" href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;tex_pb);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <a class="code" href="put__bits_8h.html#a278971e2e82f304cffec04852d08be11">set_put_bits_buffer_size</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb2.buf_end - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb.buf);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="bitstream_8c.html#a8cb094c856ce761535cd9ed7e8def529">ff_copy_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb2.buf, pb2_len);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <a class="code" href="bitstream_8c.html#a8cb094c856ce761535cd9ed7e8def529">ff_copy_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;tex_pb.buf, tex_pb_len);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_bits = <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;}</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#ad4550920d0a5624235dbdf2febe6a29f"> 1362</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpeg4videoenc_8c.html#ad4550920d0a5624235dbdf2febe6a29f">ff_mpeg4_encode_video_packet_header</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;{</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordtype">int</span> mb_num_bits = <a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num - 1) + 1;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="mpeg4video_8c.html#a1dd5fe6e9139824e3b536c3c545f38ba">ff_mpeg4_get_video_packet_prefix_length</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>), 0);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 1);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, mb_num_bits, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quant_precision, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 1, 0); <span class="comment">/* no HEC */</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;}</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160; </div>
<div class="line"><a name="l01374"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261"> 1374</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(MpegEncContext, x)</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a3dcf4acb9f7d9c57f43802a9a1ac4ee6"> 1375</a></span>&#160;<span class="preprocessor">#define VE AV_OPT_FLAG_VIDEO_PARAM | AV_OPT_FLAG_ENCODING_PARAM</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6"> 1376</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="mpeg4videoenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a>[] = {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    { <span class="stringliteral">&quot;data_partitioning&quot;</span>, <span class="stringliteral">&quot;Use data partitioning.&quot;</span>,      <a class="code" href="mpeg4videoenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(data_partitioning), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, { .i64 = 0 }, 0, 1, <a class="code" href="mpeg4videoenc_8c.html#a3dcf4acb9f7d9c57f43802a9a1ac4ee6">VE</a> },</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    { <span class="stringliteral">&quot;alternate_scan&quot;</span>,    <span class="stringliteral">&quot;Enable alternate scantable.&quot;</span>, <a class="code" href="mpeg4videoenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(alternate_scan),    <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, { .i64 = 0 }, 0, 1, <a class="code" href="mpeg4videoenc_8c.html#a3dcf4acb9f7d9c57f43802a9a1ac4ee6">VE</a> },</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <a class="code" href="mpegvideo_8h.html#ad5b4a6b63fca5f060410e2722c898a5f">FF_MPV_COMMON_OPTS</a></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="profiles_8h.html#a97e526d25e8e80cafdbf8abf56883b9d">FF_MPEG4_PROFILE_OPTS</a></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;};</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#a2a10644394df692a45d1dd962f4ab283"> 1384</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <a class="code" href="mpeg4videoenc_8c.html#a2a10644394df692a45d1dd962f4ab283">mpeg4enc_class</a> = {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a> = <span class="stringliteral">&quot;MPEG4 encoder&quot;</span>,</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    .item_name  = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    .option     = <a class="code" href="mpeg4videoenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a>,</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    .version    = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;};</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"><a class="line" href="mpeg4videoenc_8c.html#ad39ff0c234f067d87adecbef69b2b2de"> 1391</a></span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="mpeg4videoenc_8c.html#ad39ff0c234f067d87adecbef69b2b2de">ff_mpeg4_encoder</a> = {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>           = <span class="stringliteral">&quot;mpeg4&quot;</span>,</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;MPEG-4 part 2&quot;</span>),</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    .type           = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    .id             = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a>,</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="mpegvideo_8h.html#a8c3b437e5c6cebde18ac434029900be6">MpegEncContext</a>),</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>           = <a class="code" href="mpeg4videoenc_8c.html#a6909091de9705577caf1367b15360d51">encode_init</a>,</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    .encode2        = <a class="code" href="mpegvideo_8h.html#a4d63bede707edd04bf2284617d5eae9a">ff_mpv_encode_picture</a>,</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    .close          = <a class="code" href="mpegvideo_8h.html#a2ee6f2cff5a4f3d7877931f1e7481200">ff_mpv_encode_end</a>,</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    .<a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>       = (<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a>[]) { <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a> },</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    .capabilities   = <a class="code" href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a> | <a class="code" href="group__lavc__core.html#ga7c4f386d1d6df0214eb35f2be1c82779">AV_CODEC_CAP_SLICE_THREADS</a>,</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    .caps_internal  = <a class="code" href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a>,</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    .priv_class     = &amp;<a class="code" href="mpeg4videoenc_8c.html#a2a10644394df692a45d1dd962f4ab283">mpeg4enc_class</a>,</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="astruct_a_v_frame_html_af9920fc3fbfa347b8943ae461b50d18b"><div class="ttname"><a href="struct_a_v_frame.html#af9920fc3fbfa347b8943ae461b50d18b">AVFrame::pict_type</a></div><div class="ttdeci">enum AVPictureType pict_type</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00386">frame.h:391</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_ac6dc52bbb67bc6e2a73b2b9c3a4737e2"><div class="ttname"><a href="mpeg4videoenc_8c.html#ac6dc52bbb67bc6e2a73b2b9c3a4737e2">mpeg4_get_dc_length</a></div><div class="ttdeci">static int mpeg4_get_dc_length(int level, int n)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00271">mpeg4videoenc.c:271</a></div></div>
<div class="ttc" id="acommon_8h_html_aa0241c1e04e45d7be1b388d83ab57f22"><div class="ttname"><a href="common_8h.html#aa0241c1e04e45d7be1b388d83ab57f22">FFUMOD</a></div><div class="ttdeci">#define FFUMOD(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00064">common.h:64</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_ae17ddc0eaf08f5eea9e1d13399f1cb08"><div class="ttname"><a href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a></div><div class="ttdeci">#define MV_TYPE_16X16</div><div class="ttdoc">1 vector for the whole mb</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00266">mpegvideo.h:266</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a78c24de8c0152d5f8f8a64cb8590e19e"><div class="ttname"><a href="mpeg4videoenc_8c.html#a78c24de8c0152d5f8f8a64cb8590e19e">mpeg4_encode_blocks</a></div><div class="ttdeci">static void mpeg4_encode_blocks(MpegEncContext *s, int16_t block[6][64], int intra_dc[6], uint8_t **scan_table, PutBitContext *dc_pb, PutBitContext *ac_pb)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00398">mpeg4videoenc.c:398</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="ah263_8h_html_a2ac59087a5668d2e943218dd6df64373"><div class="ttname"><a href="h263_8h.html#a2ac59087a5668d2e943218dd6df64373">FF_ASPECT_EXTENDED</a></div><div class="ttdeci">#define FF_ASPECT_EXTENDED</div><div class="ttdef"><b>Definition:</b> <a href="h263_8h_source.html#l00030">h263.h:30</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_add932ba7d8f1d6e835b164d906005e62"><div class="ttname"><a href="mpeg4videoenc_8c.html#add932ba7d8f1d6e835b164d906005e62">mpeg4_encode_vol_header</a></div><div class="ttdeci">static void mpeg4_encode_vol_header(MpegEncContext *s, int vo_number, int vol_number)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00958">mpeg4videoenc.c:958</a></div></div>
<div class="ttc" id="asvq3_8c_html_abbb6c7c49508c1ac374683f2d1159e08"><div class="ttname"><a href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a></div><div class="ttdeci">uint8_t level</div><div class="ttdef"><b>Definition:</b> <a href="svq3_8c_source.html#l00205">svq3.c:205</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_aff483794908bbf559fd5bc7bb61b269f"><div class="ttname"><a href="mpeg4video_8h.html#aff483794908bbf559fd5bc7bb61b269f">VISUAL_OBJ_STARTCODE</a></div><div class="ttdeci">#define VISUAL_OBJ_STARTCODE</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00064">mpeg4video.h:64</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a41c0c9c8aa8e1fd12d65b18dd6948b09"><div class="ttname"><a href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a></div><div class="ttdeci">static av_cold int init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00035">avrndec.c:35</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a96808e3862c53c7edb4ace1b2f3e544f"><div class="ttname"><a href="avcodec_8h.html#a96808e3862c53c7edb4ace1b2f3e544f">FF_COMPLIANCE_VERY_STRICT</a></div><div class="ttdeci">#define FF_COMPLIANCE_VERY_STRICT</div><div class="ttdoc">Strictly conform to an older more strict version of the spec or reference software.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01590">avcodec.h:1590</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a3cb98819ccb00a36ec2d41a12ff940e4"><div class="ttname"><a href="mpeg4videoenc_8c.html#a3cb98819ccb00a36ec2d41a12ff940e4">ff_clean_mpeg4_qscales</a></div><div class="ttdeci">void ff_clean_mpeg4_qscales(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00214">mpeg4videoenc.c:214</a></div></div>
<div class="ttc" id="alibavcodec_2version_8h_html_a391ab92645796653bdc9eed09e1f8e0b"><div class="ttname"><a href="libavcodec_2version_8h.html#a391ab92645796653bdc9eed09e1f8e0b">LIBAVCODEC_IDENT</a></div><div class="ttdeci">#define LIBAVCODEC_IDENT</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2version_8h_source.html#l00042">version.h:42</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="arl_8h_html_a6290a2e3d073369f1f1660c061cb0d48"><div class="ttname"><a href="rl_8h.html#a6290a2e3d073369f1f1660c061cb0d48">MAX_RUN</a></div><div class="ttdeci">#define MAX_RUN</div><div class="ttdef"><b>Definition:</b> <a href="rl_8h_source.html#l00035">rl.h:35</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a0bcd3e73d6c48e50b9c8fe99a51d2c91"><div class="ttname"><a href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a></div><div class="ttdeci">static void init_put_bits(PutBitContext *s, uint8_t *buffer, int buffer_size)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00064">put_bits.h:64</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_ae04ecce3af14ac66e5f3383c9d21418d"><div class="ttname"><a href="mpegvideo_8h.html#ae04ecce3af14ac66e5f3383c9d21418d">MV_DIRECT</a></div><div class="ttdeci">#define MV_DIRECT</div><div class="ttdoc">bidirectional mode where the difference equals the MV of the last P/S/I-Frame (MPEG-4)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00264">mpegvideo.h:264</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG4</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00061">codec_id.h:61</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00092">avrndec.c:92</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_ab7cefe405923f0f149cdf904ed73e73c"><div class="ttname"><a href="mpegvideo_8h.html#ab7cefe405923f0f149cdf904ed73e73c">UNI_AC_ENC_INDEX</a></div><div class="ttdeci">#define UNI_AC_ENC_INDEX(run, level)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00318">mpegvideo.h:318</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="mpeg4videoenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01374">mpeg4videoenc.c:1374</a></div></div>
<div class="ttc" id="aj2kenc_8c_html_aafc5fd946cab2b9d67be29d48099f703"><div class="ttname"><a href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a></div><div class="ttdeci">static void put_bits(Jpeg2000EncoderContext *s, int val, int n)</div><div class="ttdef"><b>Definition:</b> <a href="j2kenc_8c_source.html#l00218">j2kenc.c:218</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_a0936d27392db3bf2e13b84d1a95b8fc3"><div class="ttname"><a href="mpeg4video_8h.html#a0936d27392db3bf2e13b84d1a95b8fc3">ADV_SIMPLE_VO_TYPE</a></div><div class="ttdeci">#define ADV_SIMPLE_VO_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00046">mpeg4video.h:46</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a4fca86e50329f70fdf6d75d8b5106cd6"><div class="ttname"><a href="mpeg4videoenc_8c.html#a4fca86e50329f70fdf6d75d8b5106cd6">init_uni_dc_tab</a></div><div class="ttdeci">static av_cold void init_uni_dc_tab(void)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01122">mpeg4videoenc.c:1122</a></div></div>
<div class="ttc" id="astruct_picture_html_a6be7d180d1e1eed8b87f425f864b0915"><div class="ttname"><a href="struct_picture.html#a6be7d180d1e1eed8b87f425f864b0915">Picture::shared</a></div><div class="ttdeci">int shared</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00088">mpegpicture.h:88</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ae4d6797b903434b980e68206df61cf49"><div class="ttname"><a href="mpegutils_8h.html#ae4d6797b903434b980e68206df61cf49">INPLACE_OFFSET</a></div><div class="ttdeci">#define INPLACE_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00121">mpegutils.h:121</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_ad39ff0c234f067d87adecbef69b2b2de"><div class="ttname"><a href="mpeg4videoenc_8c.html#ad39ff0c234f067d87adecbef69b2b2de">ff_mpeg4_encoder</a></div><div class="ttdeci">AVCodec ff_mpeg4_encoder</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01391">mpeg4videoenc.c:1391</a></div></div>
<div class="ttc" id="ampegvideo_8h_html"><div class="ttname"><a href="mpegvideo_8h.html">mpegvideo.h</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a84a993ea19afa2cbda45b3283a598fe6"><div class="ttname"><a href="avcodec_8h.html#a84a993ea19afa2cbda45b3283a598fe6">FF_LEVEL_UNKNOWN</a></div><div class="ttdeci">#define FF_LEVEL_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01983">avcodec.h:1983</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a86d9493618dbcf3f902e874dd88f3a2d"><div class="ttname"><a href="mpeg4videoenc_8c.html#a86d9493618dbcf3f902e874dd88f3a2d">mpeg4_encode_visual_object_header</a></div><div class="ttdeci">static void mpeg4_encode_visual_object_header(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00914">mpeg4videoenc.c:914</a></div></div>
<div class="ttc" id="agroup__lavu__enc_html_ga979d8e4b4947c924436fcc3b62cafea7"><div class="ttname"><a href="group__lavu__enc.html#ga979d8e4b4947c924436fcc3b62cafea7">FF_LAMBDA_SHIFT</a></div><div class="ttdeci">#define FF_LAMBDA_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00225">avutil.h:225</a></div></div>
<div class="ttc" id="ampegutils_8h_html"><div class="ttname"><a href="mpegutils_8h.html">mpegutils.h</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a3935dbba78d09ce118d42be836777da5"><div class="ttname"><a href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a></div><div class="ttdeci">#define MV_DIR_BACKWARD</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00263">mpegvideo.h:263</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a0c4d426dc5e62be498b01f1220842ae3"><div class="ttname"><a href="mpeg4videoenc_8c.html#a0c4d426dc5e62be498b01f1220842ae3">mpeg4_encode_block</a></div><div class="ttdeci">static void mpeg4_encode_block(MpegEncContext *s, int16_t *block, int n, int intra_dc, uint8_t *scan_table, PutBitContext *dc_pb, PutBitContext *ac_pb)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00283">mpeg4videoenc.c:283</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga9ed82634c59b339786575827c47a8f68"><div class="ttname"><a href="group__lavc__core.html#ga9ed82634c59b339786575827c47a8f68">AV_CODEC_FLAG_GLOBAL_HEADER</a></div><div class="ttdeci">#define AV_CODEC_FLAG_GLOBAL_HEADER</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00329">avcodec.h:329</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_ac5021d398f4056f1d82cb4cc89ff8f90"><div class="ttname"><a href="mpeg4videoenc_8c.html#ac5021d398f4056f1d82cb4cc89ff8f90">uni_mpeg4_intra_rl_bits</a></div><div class="ttdeci">static uint32_t uni_mpeg4_intra_rl_bits[64 *64 *2 *2]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00042">mpeg4videoenc.c:42</a></div></div>
<div class="ttc" id="astruct_picture_html"><div class="ttname"><a href="struct_picture.html">Picture</a></div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00045">mpegpicture.h:45</a></div></div>
<div class="ttc" id="abitstream_8c_html_a8cb094c856ce761535cd9ed7e8def529"><div class="ttname"><a href="bitstream_8c.html#a8cb094c856ce761535cd9ed7e8def529">ff_copy_bits</a></div><div class="ttdeci">void ff_copy_bits(PutBitContext *pb, const uint8_t *src, int length)</div><div class="ttdef"><b>Definition:</b> <a href="bitstream_8c_source.html#l00069">bitstream.c:69</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a326dd6c200621ba41379fc434d68ae21"><div class="ttname"><a href="mpeg4videoenc_8c.html#a326dd6c200621ba41379fc434d68ae21">uni_mpeg4_intra_rl_len</a></div><div class="ttdeci">static uint8_t uni_mpeg4_intra_rl_len[64 *64 *2 *2]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00043">mpeg4videoenc.c:43</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_aab2d74f6f9141b604ed64c6dc8d65fbd"><div class="ttname"><a href="mpeg4video_8h.html#aab2d74f6f9141b604ed64c6dc8d65fbd">VOS_STARTCODE</a></div><div class="ttdeci">#define VOS_STARTCODE</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00061">mpeg4video.h:61</a></div></div>
<div class="ttc" id="ampeg4data_8h_html_a775cd30d6516dd8eef078e2b6dd2cbc8"><div class="ttname"><a href="mpeg4data_8h.html#a775cd30d6516dd8eef078e2b6dd2cbc8">ff_mpeg4_DCtab_chrom</a></div><div class="ttdeci">const uint8_t ff_mpeg4_DCtab_chrom[13][2]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4data_8h_source.html#l00041">mpeg4data.h:41</a></div></div>
<div class="ttc" id="ah263_8c_html_ad423361ec4e37dba11b3af1737f12357"><div class="ttname"><a href="h263_8c.html#ad423361ec4e37dba11b3af1737f12357">ff_h263_pred_motion</a></div><div class="ttdeci">int16_t * ff_h263_pred_motion(MpegEncContext *s, int block, int dir, int *px, int *py)</div><div class="ttdef"><b>Definition:</b> <a href="h263_8c_source.html#l00307">h263.c:307</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_af692f91ad3515ea556c694627f80b80c"><div class="ttname"><a href="mpeg4videoenc_8c.html#af692f91ad3515ea556c694627f80b80c">get_block_rate</a></div><div class="ttdeci">static int get_block_rate(MpegEncContext *s, int16_t block[64], int block_last_index, uint8_t scantable[64])</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00065">mpeg4videoenc.c:65</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a7eb7af26474d13fd9c035ee9e0eef80b"><div class="ttname"><a href="mpegutils_8h.html#a7eb7af26474d13fd9c035ee9e0eef80b">CANDIDATE_MB_TYPE_BIDIR</a></div><div class="ttdeci">#define CANDIDATE_MB_TYPE_BIDIR</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00112">mpegutils.h:112</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a71985a328e5596cf614423259e75c9e6"><div class="ttname"><a href="mpeg4videoenc_8c.html#a71985a328e5596cf614423259e75c9e6">restore_ac_coeffs</a></div><div class="ttdeci">static void restore_ac_coeffs(MpegEncContext *s, int16_t block[6][64], const int dir[6], uint8_t *st[6], const int zigzag_last_index[6])</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00100">mpeg4videoenc.c:100</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a25cec8cef30d72dde57cefb20c778b68"><div class="ttname"><a href="avcodec_8h.html#a25cec8cef30d72dde57cefb20c778b68">FF_BUG_MS</a></div><div class="ttdeci">#define FF_BUG_MS</div><div class="ttdoc">Work around various bugs in Microsoft's broken decoders.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01573">avcodec.h:1573</a></div></div>
<div class="ttc" id="ampeg4video_8c_html_a1dd5fe6e9139824e3b536c3c545f38ba"><div class="ttname"><a href="mpeg4video_8c.html#a1dd5fe6e9139824e3b536c3c545f38ba">ff_mpeg4_get_video_packet_prefix_length</a></div><div class="ttdeci">int ff_mpeg4_get_video_packet_prefix_length(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8c_source.html#l00030">mpeg4video.c:30</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a9564ea95f6f485bac74a0333dac62233"><div class="ttname"><a href="mpeg4videoenc_8c.html#a9564ea95f6f485bac74a0333dac62233">uni_mpeg4_inter_rl_bits</a></div><div class="ttdeci">static uint32_t uni_mpeg4_inter_rl_bits[64 *64 *2 *2]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00044">mpeg4videoenc.c:44</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_afd351591b5990b0c5938c3c3105b9c6b"><div class="ttname"><a href="mpeg4videoenc_8c.html#afd351591b5990b0c5938c3c3105b9c6b">uni_DCtab_chrom_len</a></div><div class="ttdeci">static uint8_t uni_DCtab_chrom_len[512]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00036">mpeg4videoenc.c:36</a></div></div>
<div class="ttc" id="acommon_8h_html_a5117194af5289224bceaaa5466586d8f"><div class="ttname"><a href="common_8h.html#a5117194af5289224bceaaa5466586d8f">FFUDIV</a></div><div class="ttdeci">#define FFUDIV(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00063">common.h:63</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gae85064498366d2dc5e86b0a4f3c64617"><div class="ttname"><a href="group__lavc__core.html#gae85064498366d2dc5e86b0a4f3c64617">AV_CODEC_FLAG2_NO_OUTPUT</a></div><div class="ttdeci">#define AV_CODEC_FLAG2_NO_OUTPUT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00352">avcodec.h:352</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga4fd9c0b8e663cf3d55e89fbc6ce71602"><div class="ttname"><a href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a></div><div class="ttdeci">int av_reduce(int *dst_num, int *dst_den, int64_t num, int64_t den, int64_t max)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00035">rational.c:35</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_abd88f75b77f01c99e01b170cb3cfd207"><div class="ttname"><a href="mpeg4videoenc_8c.html#abd88f75b77f01c99e01b170cb3cfd207">dquant_code</a></div><div class="ttdeci">static const int dquant_code[5]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00474">mpeg4videoenc.c:474</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="astruct_r_l_table_html_a49b16a82833dd5889107371e19a5746e"><div class="ttname"><a href="struct_r_l_table.html#a49b16a82833dd5889107371e19a5746e">RLTable::table_vlc</a></div><div class="ttdeci">const uint16_t(* table_vlc)[2]</div><div class="ttdef"><b>Definition:</b> <a href="rl_8h_source.html#l00042">rl.h:42</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_adddc86b0ea3dd49dcf7591d7133213eb"><div class="ttname"><a href="mpeg4videoenc_8c.html#adddc86b0ea3dd49dcf7591d7133213eb">uni_mpeg4_inter_rl_len</a></div><div class="ttdeci">static uint8_t uni_mpeg4_inter_rl_len[64 *64 *2 *2]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00045">mpeg4videoenc.c:45</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_af46e621f5b4a1fa35105554031e7b7b5"><div class="ttname"><a href="mpegvideo_8h.html#af46e621f5b4a1fa35105554031e7b7b5">ff_mpv_encode_init</a></div><div class="ttdeci">int ff_mpv_encode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo__enc_8c_source.html#l00288">mpegvideo_enc.c:288</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a17e9b2a88b4325b4789aec9ef47898f8"><div class="ttname"><a href="mpeg4videoenc_8c.html#a17e9b2a88b4325b4789aec9ef47898f8">ff_mpeg4_stuffing</a></div><div class="ttdeci">void ff_mpeg4_stuffing(PutBitContext *pbc)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00864">mpeg4videoenc.c:864</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_ae72f13a4150084e121eca51b040fe9d1"><div class="ttname"><a href="mpeg4video_8h.html#ae72f13a4150084e121eca51b040fe9d1">GOP_STARTCODE</a></div><div class="ttdeci">#define GOP_STARTCODE</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00063">mpeg4video.h:63</a></div></div>
<div class="ttc" id="arl_8h_html_abc478b6186576bc354ba2e939790849c"><div class="ttname"><a href="rl_8h.html#abc478b6186576bc354ba2e939790849c">get_rl_index</a></div><div class="ttdeci">static int get_rl_index(const RLTable *rl, int last, int run, int level)</div><div class="ttdef"><b>Definition:</b> <a href="rl_8h_source.html#l00076">rl.h:76</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a2c171416a683915e511dcb11e0a17be3"><div class="ttname"><a href="put__bits_8h.html#a2c171416a683915e511dcb11e0a17be3">skip_put_bits</a></div><div class="ttdeci">static void skip_put_bits(PutBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00371">put_bits.h:371</a></div></div>
<div class="ttc" id="ampeg4data_8h_html_a313b1bc65b6adcf48f1e2dd7e663cb97"><div class="ttname"><a href="mpeg4data_8h.html#a313b1bc65b6adcf48f1e2dd7e663cb97">ff_mpeg4_rl_intra</a></div><div class="ttdeci">RLTable ff_mpeg4_rl_intra</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4data_8h_source.html#l00109">mpeg4data.h:109</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a3111ba80bb65b4142626d7faec122c7d"><div class="ttname"><a href="mpeg4videoenc_8c.html#a3111ba80bb65b4142626d7faec122c7d">uni_DCtab_chrom_bits</a></div><div class="ttdeci">static uint16_t uni_DCtab_chrom_bits[512]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00038">mpeg4videoenc.c:38</a></div></div>
<div class="ttc" id="avp3data_8h_html_a46a6da6b1936191571fd30b2a749f38c"><div class="ttname"><a href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a></div><div class="ttdeci">uint8_t bits</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00202">vp3data.h:202</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a1d8d03f5be975b8a728574cbdb00c896"><div class="ttname"><a href="avcodec_8h.html#a1d8d03f5be975b8a728574cbdb00c896">FF_PROFILE_UNKNOWN</a></div><div class="ttdeci">#define FF_PROFILE_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01860">avcodec.h:1860</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a4d63bede707edd04bf2284617d5eae9a"><div class="ttname"><a href="mpegvideo_8h.html#a4d63bede707edd04bf2284617d5eae9a">ff_mpv_encode_picture</a></div><div class="ttdeci">int ff_mpv_encode_picture(AVCodecContext *avctx, AVPacket *pkt, const AVFrame *frame, int *got_packet)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo__enc_8c_source.html#l01815">mpegvideo_enc.c:1815</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a9207a7e443058244a290ee561ed00eba"><div class="ttname"><a href="mpeg4videoenc_8c.html#a9207a7e443058244a290ee561ed00eba">UNI_MPEG4_ENC_INDEX</a></div><div class="ttdeci">#define UNI_MPEG4_ENC_INDEX(last, run, level)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00049">mpeg4videoenc.c:49</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_aa1219ee396a270ba57fd4f2306b64c6e"><div class="ttname"><a href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00162">libkvazaar.c:300</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a6046658e5fe3eeea90e6764178405b56"><div class="ttname"><a href="mpeg4videoenc_8c.html#a6046658e5fe3eeea90e6764178405b56">uni_DCtab_lum_bits</a></div><div class="ttdeci">static uint16_t uni_DCtab_lum_bits[512]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00037">mpeg4videoenc.c:37</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="ah263_8h_html_aaa185dc76fd8e097a266b1e50241c4ee"><div class="ttname"><a href="h263_8h.html#aaa185dc76fd8e097a266b1e50241c4ee">get_p_cbp</a></div><div class="ttdeci">static int get_p_cbp(MpegEncContext *s, int16_t block[6][64], int motion_x, int motion_y)</div><div class="ttdef"><b>Definition:</b> <a href="h263_8h_source.html#l00127">h263.h:127</a></div></div>
<div class="ttc" id="abitstream_8c_html_af6b5758c3848b7b67feacfba571bd15c"><div class="ttname"><a href="bitstream_8c.html#af6b5758c3848b7b67feacfba571bd15c">ff_put_string</a></div><div class="ttdeci">void ff_put_string(PutBitContext *pb, const char *string, int terminate_string)</div><div class="ttdef"><b>Definition:</b> <a href="bitstream_8c_source.html#l00059">bitstream.c:59</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV420P</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, (1 Cr &amp; Cb sample per 2x2 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00066">pixfmt.h:66</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_aef3407735a5898b66a90d0c1423dfc48"><div class="ttname"><a href="mpeg4videoenc_8c.html#aef3407735a5898b66a90d0c1423dfc48">init_uni_mpeg4_rl_tab</a></div><div class="ttdeci">static av_cold void init_uni_mpeg4_rl_tab(RLTable *rl, uint32_t *bits_tab, uint8_t *len_tab)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01177">mpeg4videoenc.c:1177</a></div></div>
<div class="ttc" id="astruct_a_v_class_html_aa8883e113a3f2965abd008f7667db7eb"><div class="ttname"><a href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">AVClass::class_name</a></div><div class="ttdeci">const char * class_name</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00072">log.h:72</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a250a17eae936e730d8de40b5c54cc0f0"><div class="ttname"><a href="mpeg4videoenc_8c.html#a250a17eae936e730d8de40b5c54cc0f0">mpeg4_encode_gop_header</a></div><div class="ttdeci">static void mpeg4_encode_gop_header(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00884">mpeg4videoenc.c:884</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="ampeg4data_8h_html_a07d02c86cc9c7043d763ca335ede62b4"><div class="ttname"><a href="mpeg4data_8h.html#a07d02c86cc9c7043d763ca335ede62b4">ff_mpeg4_DCtab_lum</a></div><div class="ttdeci">const uint8_t ff_mpeg4_DCtab_lum[13][2]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4data_8h_source.html#l00035">mpeg4data.h:35</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a899a07668cf8c165f548796d8eca574f"><div class="ttname"><a href="mpeg4videoenc_8c.html#a899a07668cf8c165f548796d8eca574f">decide_ac_pred</a></div><div class="ttdeci">static int decide_ac_pred(MpegEncContext *s, int16_t block[6][64], const int dir[6], uint8_t *st[6], int zigzag_last_index[6])</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00131">mpeg4videoenc.c:131</a></div></div>
<div class="ttc" id="agroup__lavu__ver_html_ga36e17e3fc9bcbe5c55820a8ac8b47e3c"><div class="ttname"><a href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a></div><div class="ttdeci">#define LIBAVUTIL_VERSION_INT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2version_8h_source.html#l00085">version.h:85</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_adf7a7d619dc16296ee1955c9dc66aa69"><div class="ttname"><a href="mpeg4videoenc_8c.html#adf7a7d619dc16296ee1955c9dc66aa69">ff_mpeg4_encode_mb</a></div><div class="ttdeci">void ff_mpeg4_encode_mb(MpegEncContext *s, int16_t block[6][64], int motion_x, int motion_y)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00476">mpeg4videoenc.c:476</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_aa6c7ecef4139a28e5aad7d82857d429d"><div class="ttname"><a href="mpeg4videoenc_8c.html#aa6c7ecef4139a28e5aad7d82857d429d">ff_mpeg4_encode_picture_header</a></div><div class="ttdeci">int ff_mpeg4_encode_picture_header(MpegEncContext *s, int picture_number)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01062">mpeg4videoenc.c:1062</a></div></div>
<div class="ttc" id="asvq3_8c_html_aa90bc2b9950a6a9a3144876047f8bee2"><div class="ttname"><a href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a></div><div class="ttdeci">uint8_t run</div><div class="ttdef"><b>Definition:</b> <a href="svq3_8c_source.html#l00204">svq3.c:204</a></div></div>
<div class="ttc" id="acommon_8h_html_a7a2a86492a286d6d20678da1dbb00525"><div class="ttname"><a href="common_8h.html#a7a2a86492a286d6d20678da1dbb00525">ROUNDED_DIV</a></div><div class="ttdeci">#define ROUNDED_DIV(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00056">common.h:56</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga791fcd0dba1d19fe0c3677509344328e"><div class="ttname"><a href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a></div><div class="ttdeci">const char * av_default_item_name(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00235">log.c:235</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_I</div><div class="ttdoc">Intra.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00274">avutil.h:274</a></div></div>
<div class="ttc" id="aprofiles_8h_html"><div class="ttname"><a href="profiles_8h.html">profiles.h</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga78187a415454abc849d4ca0682ab420a"><div class="ttname"><a href="group__lavc__core.html#ga78187a415454abc849d4ca0682ab420a">AV_CODEC_FLAG_AC_PRED</a></div><div class="ttdeci">#define AV_CODEC_FLAG_AC_PRED</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00338">avcodec.h:338</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_a3aa069ac3980707dae1e0530f50d59e4"><div class="ttname"><a href="cuda__runtime_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a></div><div class="ttdeci">#define abs(x)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00035">cuda_runtime.h:35</a></div></div>
<div class="ttc" id="astruct_r_l_table_html_aea786354323729e6540be4bb8e042c0d"><div class="ttname"><a href="struct_r_l_table.html#aea786354323729e6540be4bb8e042c0d">RLTable::max_level</a></div><div class="ttdeci">int8_t * max_level[2]</div><div class="ttdoc">encoding &amp; decoding</div><div class="ttdef"><b>Definition:</b> <a href="rl_8h_source.html#l00046">rl.h:46</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_afb0e37cdd70020b08ca2b77b8070ecc2"><div class="ttname"><a href="mpeg4videoenc_8c.html#afb0e37cdd70020b08ca2b77b8070ecc2">ff_mpeg4_init_partitions</a></div><div class="ttdeci">void ff_mpeg4_init_partitions(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01323">mpeg4videoenc.c:1323</a></div></div>
<div class="ttc" id="agxfenc_8c_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="gxfenc_8c_source.html#l00089">gxfenc.c:89</a></div></div>
<div class="ttc" id="ah263_8h_html_a1ae0d250191f868d2b15f1ecef807e8a"><div class="ttname"><a href="h263_8h.html#a1ae0d250191f868d2b15f1ecef807e8a">ff_clean_h263_qscales</a></div><div class="ttdeci">void ff_clean_h263_qscales(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="ituh263enc_8c_source.html#l00266">ituh263enc.c:266</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a98f9328b4f99d0b6a3974cf441633edf"><div class="ttname"><a href="mpegvideo_8h.html#a98f9328b4f99d0b6a3974cf441633edf">MV_TYPE_8X8</a></div><div class="ttdeci">#define MV_TYPE_8X8</div><div class="ttdoc">4 vectors (H.263, MPEG-4 4MV)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00267">mpegvideo.h:267</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a278971e2e82f304cffec04852d08be11"><div class="ttname"><a href="put__bits_8h.html#a278971e2e82f304cffec04852d08be11">set_put_bits_buffer_size</a></div><div class="ttdeci">static void set_put_bits_buffer_size(PutBitContext *s, int size)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00383">put_bits.h:383</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a1dd4ec4f7ca56e56e4c9f872ecf84912"><div class="ttname"><a href="mpeg4videoenc_8c.html#a1dd4ec4f7ca56e56e4c9f872ecf84912">ff_mpeg4_merge_partitions</a></div><div class="ttdeci">void ff_mpeg4_merge_partitions(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01336">mpeg4videoenc.c:1336</a></div></div>
<div class="ttc" id="arl_8h_html_a5bb4257ca9fa4bfcf9391b7895b97761"><div class="ttname"><a href="rl_8h.html#a5bb4257ca9fa4bfcf9391b7895b97761">MAX_LEVEL</a></div><div class="ttdeci">#define MAX_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="rl_8h_source.html#l00036">rl.h:36</a></div></div>
<div class="ttc" id="ah263data_8c_html_a43a2c7bfad4ca9afb3591e9837c4bdfe"><div class="ttname"><a href="h263data_8c.html#a43a2c7bfad4ca9afb3591e9837c4bdfe">ff_h263_rl_inter</a></div><div class="ttdeci">RLTable ff_h263_rl_inter</div><div class="ttdef"><b>Definition:</b> <a href="h263data_8c_source.html#l00161">h263data.c:161</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="ampeg4data_8h_html_a74aa72cbf3d86b9a380347ac91fcc91c"><div class="ttname"><a href="mpeg4data_8h.html#a74aa72cbf3d86b9a380347ac91fcc91c">ff_mpeg4_y_dc_scale_table</a></div><div class="ttdeci">const uint8_t ff_mpeg4_y_dc_scale_table[32]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4data_8h_source.html#l00359">mpeg4data.h:359</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_adbb5c618d2613d46f1e4de7f7e7678ac"><div class="ttname"><a href="mpeg4video_8h.html#adbb5c618d2613d46f1e4de7f7e7678ac">ff_mpeg4_pred_dc</a></div><div class="ttdeci">static int ff_mpeg4_pred_dc(MpegEncContext *s, int n, int level, int *dir_ptr, int encoding)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00202">mpeg4video.h:202</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_abf00c05e89f5f4a6139b5ad0c42df2ca"><div class="ttname"><a href="mpeg4videoenc_8c.html#abf00c05e89f5f4a6139b5ad0c42df2ca">get_b_cbp</a></div><div class="ttdeci">static int get_b_cbp(MpegEncContext *s, int16_t block[6][64], int motion_x, int motion_y, int mb_type)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00432">mpeg4videoenc.c:432</a></div></div>
<div class="ttc" id="ah263data_8c_html_ac12e215e12cbb9619a230a4b65367ea0"><div class="ttname"><a href="h263data_8c.html#ac12e215e12cbb9619a230a4b65367ea0">ff_h263_cbpy_tab</a></div><div class="ttdeci">const uint8_t ff_h263_cbpy_tab[16][2]</div><div class="ttdef"><b>Definition:</b> <a href="h263data_8c_source.html#l00084">h263data.c:84</a></div></div>
<div class="ttc" id="astruct_mpeg_enc_context_html"><div class="ttname"><a href="struct_mpeg_enc_context.html">MpegEncContext</a></div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00081">mpegvideo.h:81</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="ampeg4video_8c_html_aa4c7caefb623bd8d04d71fcab14855f4"><div class="ttname"><a href="mpeg4video_8c.html#aa4c7caefb623bd8d04d71fcab14855f4">ff_mpeg4_static_rl_table_store</a></div><div class="ttdeci">uint8_t ff_mpeg4_static_rl_table_store[3][2][2 *MAX_RUN+MAX_LEVEL+3]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8c_source.html#l00028">mpeg4video.c:28</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga7c4f386d1d6df0214eb35f2be1c82779"><div class="ttname"><a href="group__lavc__core.html#ga7c4f386d1d6df0214eb35f2be1c82779">AV_CODEC_CAP_SLICE_THREADS</a></div><div class="ttdeci">#define AV_CODEC_CAP_SLICE_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00110">codec.h:110</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="aattributes_8h_html"><div class="ttname"><a href="attributes_8h.html">attributes.h</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a97e4ba7c779c1ac58dbc886ecdde3ec9"><div class="ttname"><a href="mpegvideo_8h.html#a97e4ba7c779c1ac58dbc886ecdde3ec9">MV_TYPE_FIELD</a></div><div class="ttdeci">#define MV_TYPE_FIELD</div><div class="ttdoc">2 vectors, one per field</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00269">mpegvideo.h:269</a></div></div>
<div class="ttc" id="ah263data_8c_html_a9ff6abdf4005a6fbaa60182f48c8599d"><div class="ttname"><a href="h263data_8c.html#a9ff6abdf4005a6fbaa60182f48c8599d">ff_h263_inter_MCBPC_bits</a></div><div class="ttdeci">const uint8_t ff_h263_inter_MCBPC_bits[28]</div><div class="ttdef"><b>Definition:</b> <a href="h263data_8c_source.html#l00049">h263data.c:49</a></div></div>
<div class="ttc" id="aintmath_8h_html_a2998e3360a5d1a5763e8c1008b7b2e1d"><div class="ttname"><a href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a></div><div class="ttdeci">#define av_log2</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00083">intmath.h:83</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_a841dc876c471abcf1ffe238aff129db4"><div class="ttname"><a href="mpeg4video_8h.html#a841dc876c471abcf1ffe238aff129db4">DC_MARKER</a></div><div class="ttdeci">#define DC_MARKER</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00059">mpeg4video.h:59</a></div></div>
<div class="ttc" id="aprofiles_8h_html_a97e526d25e8e80cafdbf8abf56883b9d"><div class="ttname"><a href="profiles_8h.html#a97e526d25e8e80cafdbf8abf56883b9d">FF_MPEG4_PROFILE_OPTS</a></div><div class="ttdeci">#define FF_MPEG4_PROFILE_OPTS</div><div class="ttdef"><b>Definition:</b> <a href="profiles_8h_source.html#l00040">profiles.h:40</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a3dcf4acb9f7d9c57f43802a9a1ac4ee6"><div class="ttname"><a href="mpeg4videoenc_8c.html#a3dcf4acb9f7d9c57f43802a9a1ac4ee6">VE</a></div><div class="ttdeci">#define VE</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01375">mpeg4videoenc.c:1375</a></div></div>
<div class="ttc" id="aavassert_8h_html_a2764bf422e4df5bf3aac652f21fe780a"><div class="ttname"><a href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a></div><div class="ttdeci">#define av_assert2(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00064">avassert.h:64</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="alog_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a30adc75414e0a59ca94aad7a56e17e42"><div class="ttname"><a href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a></div><div class="ttdeci">and forward the test the status of outputs and forward it to the corresponding return FFERROR_NOT_READY If the filters stores internally one or a few frame for some it can consider them to be part of the FIFO and delay acknowledging a status change accordingly Example code</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00176">filter_design.txt:178</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a57c57e21dbbc8777ed8a0a78ba89fc7d"><div class="ttname"><a href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a></div><div class="ttdeci">static int put_bits_count(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00083">put_bits.h:83</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ab4ca16b0fda02840383d0b6d08a44660"><div class="ttname"><a href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a></div><div class="ttdeci">#define FF_CODEC_CAP_INIT_CLEANUP</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00048">internal.h:48</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a28536272e4e7472201217b2d930aeb3d"><div class="ttname"><a href="mpeg4videoenc_8c.html#a28536272e4e7472201217b2d930aeb3d">uni_DCtab_lum_len</a></div><div class="ttdeci">static uint8_t uni_DCtab_lum_len[512]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00035">mpeg4videoenc.c:35</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a2a10644394df692a45d1dd962f4ab283"><div class="ttname"><a href="mpeg4videoenc_8c.html#a2a10644394df692a45d1dd962f4ab283">mpeg4enc_class</a></div><div class="ttdeci">static const AVClass mpeg4enc_class</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01384">mpeg4videoenc.c:1384</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a384ff94b5139f441c282c9b4c7b985e6"><div class="ttname"><a href="mpeg4videoenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a></div><div class="ttdeci">static const AVOption options[]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01376">mpeg4videoenc.c:1376</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a2ee6f2cff5a4f3d7877931f1e7481200"><div class="ttname"><a href="mpegvideo_8h.html#a2ee6f2cff5a4f3d7877931f1e7481200">ff_mpv_encode_end</a></div><div class="ttdeci">int ff_mpv_encode_end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo__enc_8c_source.html#l01063">mpegvideo_enc.c:1063</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="astruct_put_bit_context_html"><div class="ttname"><a href="struct_put_bit_context.html">PutBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00051">put_bits.h:51</a></div></div>
<div class="ttc" id="ah263_8h_html_a97f80be6d2f1fbd2960995de66d7cdc0"><div class="ttname"><a href="h263_8h.html#a97f80be6d2f1fbd2960995de66d7cdc0">ff_h263_aspect_to_info</a></div><div class="ttdeci">av_const int ff_h263_aspect_to_info(AVRational aspect)</div><div class="ttdef"><b>Definition:</b> <a href="ituh263enc_8c_source.html#l00089">ituh263enc.c:89</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a6b6fdfcea7012d8c7dbdd4321c08b862"><div class="ttname"><a href="mpegutils_8h.html#a6b6fdfcea7012d8c7dbdd4321c08b862">CANDIDATE_MB_TYPE_DIRECT</a></div><div class="ttdeci">#define CANDIDATE_MB_TYPE_DIRECT</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00109">mpegutils.h:109</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a54896fd07729052d33d2fd50993148b2"><div class="ttname"><a href="mpegvideo_8h.html#a54896fd07729052d33d2fd50993148b2">get_bits_diff</a></div><div class="ttdeci">static int get_bits_diff(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00755">mpegvideo.h:755</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga4444b40e467199423bba5cf5ac791c49"><div class="ttname"><a href="group__lavc__core.html#ga4444b40e467199423bba5cf5ac791c49">AV_CODEC_FLAG_CLOSED_GOP</a></div><div class="ttdeci">#define AV_CODEC_FLAG_CLOSED_GOP</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00343">avcodec.h:343</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a6909091de9705577caf1367b15360d51"><div class="ttname"><a href="mpeg4videoenc_8c.html#a6909091de9705577caf1367b15360d51">encode_init</a></div><div class="ttdeci">static av_cold int encode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01272">mpeg4videoenc.c:1272</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a09b752cfff60a3be3b85e89b6e69ede1"><div class="ttname"><a href="mpegvideo_8h.html#a09b752cfff60a3be3b85e89b6e69ede1">FF_MPV_FLAG_CBP_RD</a></div><div class="ttdeci">#define FF_MPV_FLAG_CBP_RD</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00591">mpegvideo.h:591</a></div></div>
<div class="ttc" id="ampeg4video_8c_html_a217aab4bc9a043dc90c45146041391f7"><div class="ttname"><a href="mpeg4video_8c.html#a217aab4bc9a043dc90c45146041391f7">ff_mpeg4_init_direct_mv</a></div><div class="ttdeci">void ff_mpeg4_init_direct_mv(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8c_source.html#l00071">mpeg4video.c:71</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_af3712e441b9786e2864081e158c1979e"><div class="ttname"><a href="mpeg4videoenc_8c.html#af3712e441b9786e2864081e158c1979e">ff_set_mpeg4_time</a></div><div class="ttdeci">void ff_set_mpeg4_time(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00874">mpeg4videoenc.c:874</a></div></div>
<div class="ttc" id="ah263data_8c_html_a6f03cb3cc07df9368f9987c83a2b5df2"><div class="ttname"><a href="h263data_8c.html#a6f03cb3cc07df9368f9987c83a2b5df2">ff_h263_intra_MCBPC_bits</a></div><div class="ttdeci">const uint8_t ff_h263_intra_MCBPC_bits[9]</div><div class="ttdef"><b>Definition:</b> <a href="h263data_8c_source.html#l00035">h263data.c:35</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1d0f65014a8d1bf78cec8cbed2304992"><div class="ttname"><a href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">AVFrame::data</a></div><div class="ttdeci">uint8_t * data[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00322">frame.h:322</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_ad4550920d0a5624235dbdf2febe6a29f"><div class="ttname"><a href="mpeg4videoenc_8c.html#ad4550920d0a5624235dbdf2febe6a29f">ff_mpeg4_encode_video_packet_header</a></div><div class="ttdeci">void ff_mpeg4_encode_video_packet_header(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l01362">mpeg4videoenc.c:1362</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a41767bc78e56a4651aba50323502b90f"><div class="ttname"><a href="put__bits_8h.html#a41767bc78e56a4651aba50323502b90f">put_bits_ptr</a></div><div class="ttdeci">static uint8_t * put_bits_ptr(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00349">put_bits.h:349</a></div></div>
<div class="ttc" id="ah263data_8c_html_ab6856d0b9e0816b96e34c21131b7a297"><div class="ttname"><a href="h263data_8c.html#ab6856d0b9e0816b96e34c21131b7a297">ff_h263_intra_MCBPC_code</a></div><div class="ttdeci">const uint8_t ff_h263_intra_MCBPC_code[9]</div><div class="ttdef"><b>Definition:</b> <a href="h263data_8c_source.html#l00034">h263data.c:34</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_B</div><div class="ttdoc">Bi-dir predicted.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00276">avutil.h:276</a></div></div>
<div class="ttc" id="ampeg4video_8h_html"><div class="ttname"><a href="mpeg4video_8h.html">mpeg4video.h</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a5e2b035b438c8da4265d1ae377e3d580"><div class="ttname"><a href="mpeg4videoenc_8c.html#a5e2b035b438c8da4265d1ae377e3d580">mpeg4_encode_dc</a></div><div class="ttdeci">static void mpeg4_encode_dc(PutBitContext *s, int level, int n)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00258">mpeg4videoenc.c:258</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="arl_8c_html_aea223213d198a43aae9852a92d9f45ec"><div class="ttname"><a href="rl_8c.html#aea223213d198a43aae9852a92d9f45ec">ff_rl_init</a></div><div class="ttdeci">av_cold int ff_rl_init(RLTable *rl, uint8_t static_store[2][2 *MAX_RUN+MAX_LEVEL+3])</div><div class="ttdef"><b>Definition:</b> <a href="rl_8c_source.html#l00039">rl.c:39</a></div></div>
<div class="ttc" id="ampeg4videoenc_8c_html_a01438aee70d56fd1e526ae1d36025653"><div class="ttname"><a href="mpeg4videoenc_8c.html#a01438aee70d56fd1e526ae1d36025653">mpeg4_get_block_length</a></div><div class="ttdeci">static int mpeg4_get_block_length(MpegEncContext *s, int16_t *block, int n, int intra_dc, uint8_t *scan_table)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4videoenc_8c_source.html#l00344">mpeg4videoenc.c:344</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga3f55f5bcfbb12e06c7cb1195028855e6"><div class="ttname"><a href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a></div><div class="ttdeci">#define AV_CODEC_CAP_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00075">codec.h:75</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_a8c006b22e71e0bd6ab52b374624aac2f"><div class="ttname"><a href="mpeg4video_8h.html#a8c006b22e71e0bd6ab52b374624aac2f">RECT_SHAPE</a></div><div class="ttdeci">#define RECT_SHAPE</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00033">mpeg4video.h:33</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_ac6963b0ecbae79a61bd1e96b561ce6fc"><div class="ttname"><a href="mpeg4video_8h.html#ac6963b0ecbae79a61bd1e96b561ce6fc">VOP_STARTCODE</a></div><div class="ttdeci">#define VOP_STARTCODE</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00065">mpeg4video.h:65</a></div></div>
<div class="ttc" id="ah263data_8c_html_a7c6b1a08ff0472bb10ff380eca5de9fc"><div class="ttname"><a href="h263data_8c.html#a7c6b1a08ff0472bb10ff380eca5de9fc">ff_h263_inter_MCBPC_code</a></div><div class="ttdeci">const uint8_t ff_h263_inter_MCBPC_code[28]</div><div class="ttdef"><b>Definition:</b> <a href="h263data_8c_source.html#l00040">h263data.c:40</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_P</div><div class="ttdoc">Predicted.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00275">avutil.h:275</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="ah263_8h_html_a395c91164578ea92bea34aa7ae9cc0a0"><div class="ttname"><a href="h263_8h.html#a395c91164578ea92bea34aa7ae9cc0a0">ff_h263_encode_motion_vector</a></div><div class="ttdeci">static void ff_h263_encode_motion_vector(MpegEncContext *s, int x, int y, int f_code)</div><div class="ttdef"><b>Definition:</b> <a href="h263_8h_source.html#l00116">h263.h:116</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga17ae68044f725fd5ba26c54162b96490"><div class="ttname"><a href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a></div><div class="ttdeci">#define AV_CODEC_FLAG_BITEXACT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00333">avcodec.h:333</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a8c3b437e5c6cebde18ac434029900be6"><div class="ttname"><a href="mpegvideo_8h.html#a8c3b437e5c6cebde18ac434029900be6">MpegEncContext</a></div><div class="ttdeci">struct MpegEncContext MpegEncContext</div></div>
<div class="ttc" id="aput__bits_8h_html_a6f7bba5ea37c63f99b266928759fe6f6"><div class="ttname"><a href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a></div><div class="ttdeci">static void flush_put_bits(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00117">put_bits.h:117</a></div></div>
<div class="ttc" id="ampeg4data_8h_html_a5eaea11533f853fb2ff87c498f657e05"><div class="ttname"><a href="mpeg4data_8h.html#a5eaea11533f853fb2ff87c498f657e05">ff_mpeg4_c_dc_scale_table</a></div><div class="ttdeci">const uint8_t ff_mpeg4_c_dc_scale_table[32]</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4data_8h_source.html#l00363">mpeg4data.h:363</a></div></div>
<div class="ttc" id="astruct_picture_html_ab73190435fab740e9c22e61aedb5c2ad"><div class="ttname"><a href="struct_picture.html#ab73190435fab740e9c22e61aedb5c2ad">Picture::f</a></div><div class="ttdeci">struct AVFrame * f</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00046">mpegpicture.h:46</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="avf__palettegen_8c_html_a0fa5abf62b01f8a592bca729cb14390b"><div class="ttname"><a href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a></div><div class="ttdeci">static av_always_inline int diff(const uint32_t a, const uint32_t b)</div><div class="ttdef"><b>Definition:</b> <a href="vf__palettegen_8c_source.html#l00136">vf_palettegen.c:136</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a91f96ac4aa02badb684e42c5294a45bf"><div class="ttname"><a href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a></div><div class="ttdeci">#define MV_DIR_FORWARD</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00262">mpegvideo.h:262</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a></div><div class="ttdeci">@ AV_OPT_TYPE_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00242">opt.h:242</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_ac674fec04dd2093f78cb6c5b3fe78a20"><div class="ttname"><a href="mpegvideo_8h.html#ac674fec04dd2093f78cb6c5b3fe78a20">ff_write_quant_matrix</a></div><div class="ttdeci">void ff_write_quant_matrix(PutBitContext *pb, uint16_t *matrix)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo__enc_8c_source.html#l00202">mpegvideo_enc.c:202</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a17afa58b2bc574dedcd1cc02e1fdf165"><div class="ttname"><a href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a></div><div class="ttdeci">The exact code depends on how similar the blocks are and how related they are to the block</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00207">filter_design.txt:207</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_r_l_table_html_a10f48f2e4ff14a26d3562e655d94f7ba"><div class="ttname"><a href="struct_r_l_table.html#a10f48f2e4ff14a26d3562e655d94f7ba">RLTable::n</a></div><div class="ttdeci">int n</div><div class="ttdoc">number of entries of table_vlc minus 1</div><div class="ttdef"><b>Definition:</b> <a href="rl_8h_source.html#l00040">rl.h:40</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_a8ad2309ae2bad5dba54b91305937851d"><div class="ttname"><a href="mpeg4video_8h.html#a8ad2309ae2bad5dba54b91305937851d">MOTION_MARKER</a></div><div class="ttdeci">#define MOTION_MARKER</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00058">mpeg4video.h:58</a></div></div>
<div class="ttc" id="astruct_r_l_table_html"><div class="ttname"><a href="struct_r_l_table.html">RLTable</a></div><div class="ttdef"><b>Definition:</b> <a href="rl_8h_source.html#l00039">rl.h:39</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_ad5b4a6b63fca5f060410e2722c898a5f"><div class="ttname"><a href="mpegvideo_8h.html#ad5b4a6b63fca5f060410e2722c898a5f">FF_MPV_COMMON_OPTS</a></div><div class="ttdeci">#define FF_MPV_COMMON_OPTS</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00616">mpegvideo.h:616</a></div></div>
<div class="ttc" id="ampeg4video_8h_html_a7f919a3f8d3eb9c13a5cc5024de8247a"><div class="ttname"><a href="mpeg4video_8h.html#a7f919a3f8d3eb9c13a5cc5024de8247a">SIMPLE_VO_TYPE</a></div><div class="ttdeci">#define SIMPLE_VO_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="mpeg4video_8h_source.html#l00038">mpeg4video.h:38</a></div></div>
<div class="ttc" id="astruct_r_l_table_html_a27405dc716e4009fa2a1af34978b76f8"><div class="ttname"><a href="struct_r_l_table.html#a27405dc716e4009fa2a1af34978b76f8">RLTable::max_run</a></div><div class="ttdeci">int8_t * max_run[2]</div><div class="ttdoc">encoding &amp; decoding</div><div class="ttdef"><b>Definition:</b> <a href="rl_8h_source.html#l00047">rl.h:47</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga81bc0a84e8866ecff68e6d8a82781936"><div class="ttname"><a href="group__lavc__core.html#ga81bc0a84e8866ecff68e6d8a82781936">AV_CODEC_FLAG_PASS1</a></div><div class="ttdeci">#define AV_CODEC_FLAG_PASS1</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00296">avcodec.h:296</a></div></div>
<div class="ttc" id="ah263_8h_html"><div class="ttname"><a href="h263_8h.html">h263.h</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
