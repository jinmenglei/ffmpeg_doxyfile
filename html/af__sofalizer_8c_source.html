<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavfilter/af_sofalizer.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_e1bd69597e95623f2084619f16269321.html">libavfilter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">af_sofalizer.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="af__sofalizer_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * sofalizer.c : SOFAlizer filter for virtual binaural acoustics</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *****************************************************************************</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2013-2015 Andreas Fuchs, Wolfgang Hrauda,</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *                         Acoustics Research Institute (ARI), Vienna, Austria</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Authors: Andreas Fuchs &lt;andi.fuchs.mail@gmail.com&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *          Wolfgang Hrauda &lt;wolfgang.hrauda@gmx.at&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * SOFAlizer project coordinator at ARI, main developer of SOFA:</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *          Piotr Majdak &lt;piotr@majdak.at&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify it</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * the Free Software Foundation; either version 2.1 of the License, or</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * (at your option) any later version.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * GNU Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston MA 02110-1301, USA.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *****************************************************************************/</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;mysofa.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avfft_8h.html">libavcodec/avfft.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avstring_8h.html">libavutil/avstring.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="channel__layout_8h.html">libavutil/channel_layout.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="float__dsp_8h.html">libavutil/float_dsp.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="intmath_8h.html">libavutil/intmath.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avfilter_8h.html">avfilter.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="filters_8h.html">filters.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="audio_8h.html">audio.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a6df70e5e9f109151e8b147c2eacfc8b2">   42</a></span>&#160;<span class="preprocessor">#define TIME_DOMAIN      0</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#ac90981e5246c3021b85940af316e5cac">   43</a></span>&#160;<span class="preprocessor">#define FREQUENCY_DOMAIN 1</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="struct_my_sofa.html">   45</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_my_sofa.html">MySofa</a> {  <span class="comment">/* contains data of one SOFA file */</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="struct_my_sofa.html#a928d853feda1d2f764346e5133b5f283">   46</a></span>&#160;    <span class="keyword">struct </span>MYSOFA_HRTF *<a class="code" href="struct_my_sofa.html#a928d853feda1d2f764346e5133b5f283">hrtf</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="struct_my_sofa.html#ae8c304e475e23f56f36bc52492222f50">   47</a></span>&#160;    <span class="keyword">struct </span>MYSOFA_LOOKUP *<a class="code" href="struct_my_sofa.html#ae8c304e475e23f56f36bc52492222f50">lookup</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="struct_my_sofa.html#a8cceb334987b308750a2117266e5e6cd">   48</a></span>&#160;    <span class="keyword">struct </span>MYSOFA_NEIGHBORHOOD *<a class="code" href="struct_my_sofa.html#a8cceb334987b308750a2117266e5e6cd">neighborhood</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="struct_my_sofa.html#acc5972445bb37f366937739c7054abea">   49</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_my_sofa.html#acc5972445bb37f366937739c7054abea">ir_samples</a>;      <span class="comment">/* length of one impulse response (IR) */</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="struct_my_sofa.html#a04c2a305a5bb72d339c94a26f6fe50ef">   50</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_my_sofa.html#a04c2a305a5bb72d339c94a26f6fe50ef">n_samples</a>;       <span class="comment">/* ir_samples to next power of 2 */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="struct_my_sofa.html#af3fda0f7e5637f2c4d5e395a43b2660b">   51</a></span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="struct_my_sofa.html#a3ae6e1f35f0e0facfc1edd2167db7005">lir</a>, *<a class="code" href="struct_my_sofa.html#af3fda0f7e5637f2c4d5e395a43b2660b">rir</a>;    <span class="comment">/* IRs (time-domain) */</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="struct_my_sofa.html#afcdfb332f9003313c3d0ddd110bcbc4e">   52</a></span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="struct_my_sofa.html#afcdfb332f9003313c3d0ddd110bcbc4e">fir</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="struct_my_sofa.html#a90e8d773b07755e74b1535649d7d1363">   53</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_my_sofa.html#a90e8d773b07755e74b1535649d7d1363">max_delay</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a7fd68ca82aded88c64252e03439134ac">   54</a></span>&#160;} <a class="code" href="af__sofalizer_8c.html#a7fd68ca82aded88c64252e03439134ac">MySofa</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="struct_virtual_speaker.html">   56</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_virtual_speaker.html">VirtualSpeaker</a> {</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct_virtual_speaker.html#a5512056a288e568196776bb80ee32d0c">   57</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_virtual_speaker.html#a5512056a288e568196776bb80ee32d0c">set</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="struct_virtual_speaker.html#aeac1e016c2bae2dc37232ed51722a3c8">   58</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_virtual_speaker.html#aeac1e016c2bae2dc37232ed51722a3c8">azim</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="struct_virtual_speaker.html#a5f390f724491c500493a0fb5ff77f19c">   59</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_virtual_speaker.html#a5f390f724491c500493a0fb5ff77f19c">elev</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#ad22c7e33ef7de4e011ddbf933e7e3c88">   60</a></span>&#160;} <a class="code" href="af__sofalizer_8c.html#ad22c7e33ef7de4e011ddbf933e7e3c88">VirtualSpeaker</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html">   62</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> {</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a5482bd54c05882f284acff5975c8f77e">   63</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> *<span class="keyword">class</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a94422bd2b209e821e9a29ecaa7316e2c">   65</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="struct_s_o_f_alizer_context.html#a94422bd2b209e821e9a29ecaa7316e2c">filename</a>;             <span class="comment">/* name of SOFA file */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a1864f98c57746e46ec1a9bf062faa4b7">   66</a></span>&#160;    <a class="code" href="struct_my_sofa.html">MySofa</a> <a class="code" href="struct_s_o_f_alizer_context.html#a1864f98c57746e46ec1a9bf062faa4b7">sofa</a>;                <span class="comment">/* contains data of the SOFA file */</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#ac896e7b21204871b876430608d4f0950">   68</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#ac896e7b21204871b876430608d4f0950">sample_rate</a>;            <span class="comment">/* sample rate from SOFA file */</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#aa2306325728d0be085c7d4c7421ac10e">   69</a></span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="struct_s_o_f_alizer_context.html#aa2306325728d0be085c7d4c7421ac10e">speaker_azim</a>;        <span class="comment">/* azimuth of the virtual loudspeakers */</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a485058692b0036c8146dc37d9f27b934">   70</a></span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="struct_s_o_f_alizer_context.html#a485058692b0036c8146dc37d9f27b934">speaker_elev</a>;        <span class="comment">/* elevation of the virtual loudspeakers */</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a231c9a6e394efcbb43ce1f9a085e43b7">   71</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="struct_s_o_f_alizer_context.html#a231c9a6e394efcbb43ce1f9a085e43b7">speakers_pos</a>;         <span class="comment">/* custom positions of the virtual loudspeakers */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a48cd6df56bce5b51ce1084bd4bf0c271">   72</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_s_o_f_alizer_context.html#a48cd6df56bce5b51ce1084bd4bf0c271">lfe_gain</a>;             <span class="comment">/* initial gain for the LFE channel */</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#acd47c5690696354015e07b26afe3de11">   73</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_s_o_f_alizer_context.html#acd47c5690696354015e07b26afe3de11">gain_lfe</a>;             <span class="comment">/* gain applied to LFE channel */</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#ac0185040465931c4d1ad6079a565bb07">   74</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#ac0185040465931c4d1ad6079a565bb07">lfe_channel</a>;            <span class="comment">/* LFE channel position in channel layout */</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">   76</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a>;                 <span class="comment">/* number of channels to convolute */</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                <span class="comment">/* buffer variables (for convolution) */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a0594b13219ff0e3e0024a5c029a35ffd">   79</a></span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="struct_s_o_f_alizer_context.html#a0594b13219ff0e3e0024a5c029a35ffd">ringbuffer</a>[2];       <span class="comment">/* buffers input samples, length of one buffer: */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                <span class="comment">/* no. input ch. (incl. LFE) x buffer_length */</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#af6290496de1ed2ccd45a7c6fb696506f">   81</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#af6290496de1ed2ccd45a7c6fb696506f">write</a>[2];               <span class="comment">/* current write position to ringbuffer */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#aa2098e9907208151d600a78489a49d67">   82</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#aa2098e9907208151d600a78489a49d67">buffer_length</a>;          <span class="comment">/* is: longest IR plus max. delay in all SOFA files */</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                <span class="comment">/* then choose next power of 2 */</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">   84</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a>;                  <span class="comment">/* number of samples in one FFT block */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a0fd63f315fe745311fda333cbf11eadc">   85</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#a0fd63f315fe745311fda333cbf11eadc">nb_samples</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                <span class="comment">/* netCDF variables */</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a32aaaf2bf3a1f57a1e7950922dcaf6a0">   88</a></span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="struct_s_o_f_alizer_context.html#a32aaaf2bf3a1f57a1e7950922dcaf6a0">delay</a>[2];              <span class="comment">/* broadband delay for each channel/IR to be convolved */</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#ab5d54ba0de0a4ce12e5ff2a07993c192">   90</a></span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="struct_s_o_f_alizer_context.html#ab5d54ba0de0a4ce12e5ff2a07993c192">data_ir</a>[2];          <span class="comment">/* IRs for all channels to be convolved */</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                <span class="comment">/* (this excludes the LFE) */</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a3d5853cd05e6da119e45112658be604f">   92</a></span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="struct_s_o_f_alizer_context.html#a3d5853cd05e6da119e45112658be604f">temp_src</a>[2];</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#ab43eb396b3f00da1eb23a443e4063442">   93</a></span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *<a class="code" href="struct_s_o_f_alizer_context.html#ab43eb396b3f00da1eb23a443e4063442">temp_fft</a>[2];    <span class="comment">/* Array to hold FFT values */</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a0c5aa8060a24f28bb0d7462e73806955">   94</a></span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *<a class="code" href="struct_s_o_f_alizer_context.html#a0c5aa8060a24f28bb0d7462e73806955">temp_afft</a>[2];   <span class="comment">/* Array to accumulate FFT values prior to IFFT */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                         <span class="comment">/* control variables */</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a817c53379f799c3c31ae2edd2ffa680c">   97</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_s_o_f_alizer_context.html#a817c53379f799c3c31ae2edd2ffa680c">gain</a>;          <span class="comment">/* filter gain (in dB) */</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#af13276b4650c7b986cce8814936af2bd">   98</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_s_o_f_alizer_context.html#af13276b4650c7b986cce8814936af2bd">rotation</a>;      <span class="comment">/* rotation of virtual loudspeakers (in degrees)  */</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a72f57e34b43d3117a4714df93e155772">   99</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_s_o_f_alizer_context.html#a72f57e34b43d3117a4714df93e155772">elevation</a>;     <span class="comment">/* elevation of virtual loudspeakers (in deg.) */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a08290553ef9c7488c5d73348f7a6531a">  100</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_s_o_f_alizer_context.html#a08290553ef9c7488c5d73348f7a6531a">radius</a>;        <span class="comment">/* distance virtual loudspeakers to listener (in metres) */</span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a1dd5d660b9d2b8db1489db2487fee41d">  101</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#a1dd5d660b9d2b8db1489db2487fee41d">type</a>;            <span class="comment">/* processing type */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#ae554c64fb26bb36f9c696ab293549212">  102</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#ae554c64fb26bb36f9c696ab293549212">framesize</a>;       <span class="comment">/* size of buffer */</span></div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#acaec88db5b8420353de280927194625d">  103</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#acaec88db5b8420353de280927194625d">normalize</a>;       <span class="comment">/* should all IRs be normalized upon import ? */</span></div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a3dbec51c535e94302f070ecea392129d">  104</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#a3dbec51c535e94302f070ecea392129d">interpolate</a>;     <span class="comment">/* should wanted IRs be interpolated from neighbors ? */</span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a4d342737d18a44c75d85208478844ac9">  105</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#a4d342737d18a44c75d85208478844ac9">minphase</a>;        <span class="comment">/* should all IRs be minphased upon import ? */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a5bdf26b1469f11f92820a2738a80cc3f">  106</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_s_o_f_alizer_context.html#a5bdf26b1469f11f92820a2738a80cc3f">anglestep</a>;     <span class="comment">/* neighbor search angle step, in agles */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#ad5d83100d72da0b37596f6d3d4823fcb">  107</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_s_o_f_alizer_context.html#ad5d83100d72da0b37596f6d3d4823fcb">radstep</a>;       <span class="comment">/* neighbor search radius step, in meters */</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a7b6e3a41854ee4f0290b4b7e52ba5d43">  109</a></span>&#160;    <a class="code" href="struct_virtual_speaker.html">VirtualSpeaker</a> <a class="code" href="struct_s_o_f_alizer_context.html#a7b6e3a41854ee4f0290b4b7e52ba5d43">vspkrpos</a>[64];</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#a49905674f7b5f205c1c71a6e4be62a61">  111</a></span>&#160;    <a class="code" href="struct_f_f_t_context.html">FFTContext</a> *<a class="code" href="struct_s_o_f_alizer_context.html#a688d68811f24228f8e4f09d50c8bd3de">fft</a>[2], *<a class="code" href="struct_s_o_f_alizer_context.html#a49905674f7b5f205c1c71a6e4be62a61">ifft</a>[2];</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#ae97b8822f57c786de8c154e2c80a663e">  112</a></span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *<a class="code" href="struct_s_o_f_alizer_context.html#ae97b8822f57c786de8c154e2c80a663e">data_hrtf</a>[2];</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="struct_s_o_f_alizer_context.html#afa314cfddbf80a7a0f8904b044db8a79">  114</a></span>&#160;    <a class="code" href="struct_a_v_float_d_s_p_context.html">AVFloatDSPContext</a> *<a class="code" href="struct_s_o_f_alizer_context.html#afa314cfddbf80a7a0f8904b044db8a79">fdsp</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a4b2377b49527bd3afc0fa5a693d7efc9">  115</a></span>&#160;} <a class="code" href="af__sofalizer_8c.html#a4b2377b49527bd3afc0fa5a693d7efc9">SOFAlizerContext</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a211a244bec3c2e17637e925aa4103447">  117</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#a211a244bec3c2e17637e925aa4103447">close_sofa</a>(<span class="keyword">struct</span> <a class="code" href="struct_my_sofa.html">MySofa</a> *sofa)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (sofa-&gt;<a class="code" href="struct_my_sofa.html#a8cceb334987b308750a2117266e5e6cd">neighborhood</a>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        mysofa_neighborhood_free(sofa-&gt;<a class="code" href="struct_my_sofa.html#a8cceb334987b308750a2117266e5e6cd">neighborhood</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    sofa-&gt;<a class="code" href="struct_my_sofa.html#a8cceb334987b308750a2117266e5e6cd">neighborhood</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (sofa-&gt;<a class="code" href="struct_my_sofa.html#ae8c304e475e23f56f36bc52492222f50">lookup</a>)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        mysofa_lookup_free(sofa-&gt;<a class="code" href="struct_my_sofa.html#ae8c304e475e23f56f36bc52492222f50">lookup</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    sofa-&gt;<a class="code" href="struct_my_sofa.html#ae8c304e475e23f56f36bc52492222f50">lookup</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (sofa-&gt;<a class="code" href="struct_my_sofa.html#a928d853feda1d2f764346e5133b5f283">hrtf</a>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        mysofa_free(sofa-&gt;<a class="code" href="struct_my_sofa.html#a928d853feda1d2f764346e5133b5f283">hrtf</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    sofa-&gt;<a class="code" href="struct_my_sofa.html#a928d853feda1d2f764346e5133b5f283">hrtf</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sofa-&gt;<a class="code" href="struct_my_sofa.html#afcdfb332f9003313c3d0ddd110bcbc4e">fir</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a022820a123ed4bed9ba0ccc991027111">  133</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#a022820a123ed4bed9ba0ccc991027111">preload_sofa</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">char</span> *filename, <span class="keywordtype">int</span> *samplingrate)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keyword">struct </span>MYSOFA_HRTF *mysofa;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">char</span> *license;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    mysofa = mysofa_load(filename, &amp;<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf = mysofa;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> || !mysofa) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t find SOFA-file &#39;%s&#39;\n&quot;</span>, filename);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = mysofa_check(mysofa);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != MYSOFA_OK) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Selected SOFA file is invalid. Please select valid SOFA file.\n&quot;</span>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;normalize)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        mysofa_loudness(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;minphase)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        mysofa_minphase(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf, 0.01f);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    mysofa_tocartesian(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.lookup = mysofa_lookup_init(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.lookup == <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interpolate)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.neighborhood = mysofa_neighborhood_init_withstepdefine(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.lookup,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;anglestep,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;radstep);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.fir = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;N * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;R, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.fir));</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.fir)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (mysofa-&gt;DataSamplingRate.elements != 1)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Original IR length: %d.\n&quot;</span>, mysofa-&gt;N);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    *samplingrate = mysofa-&gt;DataSamplingRate.values[0];</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    license = mysofa_getAttribute(mysofa-&gt;attributes, (<span class="keywordtype">char</span> *)<span class="stringliteral">&quot;License&quot;</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (license)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;SOFA license: %s\n&quot;</span>, license);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#affab9f1fdc59144327f09fc823928ac8">  186</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#affab9f1fdc59144327f09fc823928ac8">parse_channel_name</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">char</span> **<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, <span class="keywordtype">int</span> *rchannel)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, channel_id = 0;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    int64_t <a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a>, layout0;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">char</span> buf[8] = {0};</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">/* try to parse a channel name, e.g. &quot;FL&quot; */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__string.html#gaa21d05e9ef9081a5dc847cf033aad1cd">av_sscanf</a>(*<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, <span class="stringliteral">&quot;%7[A-Z]%n&quot;</span>, buf, &amp;<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        layout0 = <a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a> = <a class="code" href="group__channel__mask__c.html#ga3e8a7ab3d4c1ac98b902ab6b00741343">av_get_channel_layout</a>(buf);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="comment">/* channel_id &lt;- first set bit in layout */</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 32; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;&gt;= 1) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a> &gt;= 1LL &lt;&lt; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                channel_id += <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                <a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a> &gt;&gt;= <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="comment">/* reject layouts that are not a single channel */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">if</span> (channel_id &gt;= 64 || layout0 != 1LL &lt;&lt; channel_id) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to parse \&#39;%s\&#39; as channel name.\n&quot;</span>, buf);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        *rchannel = channel_id;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a> += <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__lavu__string.html#gaa21d05e9ef9081a5dc847cf033aad1cd">av_sscanf</a>(*<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, <span class="stringliteral">&quot;%d%n&quot;</span>, &amp;channel_id, &amp;<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>) == 1) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> (channel_id &lt; 0 || channel_id &gt;= 64) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to parse \&#39;%d\&#39; as channel number.\n&quot;</span>, channel_id);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        *rchannel = channel_id;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a> += <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a7f422a5d5c4f426b9955ad38a84a8503">  222</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="af__sofalizer_8c.html#a7f422a5d5c4f426b9955ad38a84a8503">parse_speaker_pos</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, int64_t in_channel_layout)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, *tokenizer, *p, *args = <a class="code" href="group__lavu__mem__funcs.html#ga7c352f4cff02184f005323691375fea9">av_strdup</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speakers_pos);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (!args)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    p = args;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">while</span> ((<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a> = <a class="code" href="group__lavu__string.html#ga3d4270f4ed651c414e2850090b9b77c4">av_strtok</a>(p, <span class="stringliteral">&quot;|&quot;</span>, &amp;tokenizer))) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordtype">float</span> azim, elev;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordtype">int</span> out_ch_id;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        p = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="af__sofalizer_8c.html#affab9f1fdc59144327f09fc823928ac8">parse_channel_name</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, &amp;<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, &amp;out_ch_id)) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__string.html#gaa21d05e9ef9081a5dc847cf033aad1cd">av_sscanf</a>(<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, <span class="stringliteral">&quot;%f %f&quot;</span>, &amp;azim, &amp;elev) == 2) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vspkrpos[out_ch_id].set = 1;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vspkrpos[out_ch_id].azim = azim;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vspkrpos[out_ch_id].elev = elev;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__lavu__string.html#gaa21d05e9ef9081a5dc847cf033aad1cd">av_sscanf</a>(<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, <span class="stringliteral">&quot;%f&quot;</span>, &amp;azim) == 1) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vspkrpos[out_ch_id].set = 1;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vspkrpos[out_ch_id].azim = azim;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vspkrpos[out_ch_id].elev = 0;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(args);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a8bb1fd3449e28098f4094a976b717b2b">  253</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#a8bb1fd3449e28098f4094a976b717b2b">get_speaker_pos</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                           <span class="keywordtype">float</span> *speaker_azim, <span class="keywordtype">float</span> *speaker_elev)</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;{</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    uint64_t channels_layout = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inputs[0]-&gt;channel_layout;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">float</span> azim[64] = { 0 };</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">float</span> elev[64] = { 0 };</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">int</span> m, ch, <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inputs[0]-&gt;channels; <span class="comment">/* get no. input channels */</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (n_conv &lt; 0 || n_conv &gt; 64)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lfe_channel = -1;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speakers_pos)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="af__sofalizer_8c.html#a7f422a5d5c4f426b9955ad38a84a8503">parse_speaker_pos</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, channels_layout);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">/* set speaker positions according to input channel configuration: */</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">for</span> (m = 0, ch = 0; ch &lt; <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a> &amp;&amp; m &lt; 64; m++) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        uint64_t <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a> = channels_layout &amp; (1ULL &lt;&lt; m);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#gaf9c5619f74c99ea8a8606719c01fe7df">AV_CH_FRONT_LEFT</a>:            azim[ch] =  30;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga394b4b2c87790178bf7b683b45320f31">AV_CH_FRONT_RIGHT</a>:           azim[ch] = 330;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga88f2868b232a89fd11ad9d6c39d502a1">AV_CH_FRONT_CENTER</a>:          azim[ch] =   0;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#gab19b66e345cf1f9d50ffc26c28862bcc">AV_CH_LOW_FREQUENCY</a>:</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga72d2eaef6727608379ab29859f5d5ee2">AV_CH_LOW_FREQUENCY_2</a>:       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lfe_channel = ch; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#gaa3cae8c6d0eaab3dc3ce178f6af81ae2">AV_CH_BACK_LEFT</a>:             azim[ch] = 150;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga7a7ab3bb418bf9672dcdf6554346e5eb">AV_CH_BACK_RIGHT</a>:            azim[ch] = 210;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga68650a364e52edb62d5984dddec4f935">AV_CH_BACK_CENTER</a>:           azim[ch] = 180;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga02e55f35249dfa57a2e4edfd3acfec4f">AV_CH_SIDE_LEFT</a>:             azim[ch] =  90;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga947b60ab70c428ebb07c8b9c87023b39">AV_CH_SIDE_RIGHT</a>:            azim[ch] = 270;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga6c9ea2ea60044bfe844174300b237386">AV_CH_FRONT_LEFT_OF_CENTER</a>:  azim[ch] =  15;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga558dc25b0ce327d2547d3cc9e4bd6a4e">AV_CH_FRONT_RIGHT_OF_CENTER</a>: azim[ch] = 345;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga922199ce7638a651d66a423379b4c5dc">AV_CH_TOP_CENTER</a>:            azim[ch] =   0;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                          elev[ch] =  90;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga352bec66d2e1bef67efe5b7f0a4207f3">AV_CH_TOP_FRONT_LEFT</a>:        azim[ch] =  30;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                          elev[ch] =  45;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga6b558fe85e67383a5b04e56b97b145d0">AV_CH_TOP_FRONT_CENTER</a>:      azim[ch] =   0;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                          elev[ch] =  45;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#gabce29ea1d7e2d433263b2cbf28232360">AV_CH_TOP_FRONT_RIGHT</a>:       azim[ch] = 330;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                          elev[ch] =  45;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#gaac082f244f37f9c5d8e4f7bf96cc76dc">AV_CH_TOP_BACK_LEFT</a>:         azim[ch] = 150;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                          elev[ch] =  45;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga8fa88c3c74339f4218a3e70286fdbdaa">AV_CH_TOP_BACK_RIGHT</a>:        azim[ch] = 210;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                          elev[ch] =  45;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga439a8664c452f9782b460f61a3908451">AV_CH_TOP_BACK_CENTER</a>:       azim[ch] = 180;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                          elev[ch] =  45;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga11e273c4872335063b5059cca52218c0">AV_CH_WIDE_LEFT</a>:             azim[ch] =  90;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga2c7ff738c3481d2891d052f5bca55248">AV_CH_WIDE_RIGHT</a>:            azim[ch] = 270;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#gafc04912a8294d8788e4162092df8a549">AV_CH_SURROUND_DIRECT_LEFT</a>:  azim[ch] =  90;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#ga0c9137cc9fd60d15be588e2eff3cfa23">AV_CH_SURROUND_DIRECT_RIGHT</a>: azim[ch] = 270;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#gaea8f62dcaa4774307a8fa9b52172c688">AV_CH_STEREO_LEFT</a>:           azim[ch] =  90;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__masks.html#gab68e7edb9182b1b22898b960707143c1">AV_CH_STEREO_RIGHT</a>:          azim[ch] = 270;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">case</span> 0:                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vspkrpos[m].set) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            azim[ch] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vspkrpos[m].azim;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            elev[ch] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vspkrpos[m].elev;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            ch++;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    memcpy(<a class="code" href="struct_s_o_f_alizer_context.html#aa2306325728d0be085c7d4c7421ac10e">speaker_azim</a>, azim, <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    memcpy(<a class="code" href="struct_s_o_f_alizer_context.html#a485058692b0036c8146dc37d9f27b934">speaker_elev</a>, elev, <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_thread_data.html">ThreadData</a> {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="struct_thread_data.html#add3597efe9ebbc48263448a011b94150">in</a>, *<a class="code" href="struct_thread_data.html#a5a5c35227a1a4d507f043d9b3ac3b18a">out</a>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="struct_thread_data.html#a6e491b6fbad4b85d2c788a03da6776d0">write</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="struct_thread_data.html#a41524d6bb577a0b62ad02a3a442e638d">  331</a></span>&#160;    <span class="keywordtype">int</span> **<a class="code" href="struct_thread_data.html#a41524d6bb577a0b62ad02a3a442e638d">delay</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordtype">float</span> **<a class="code" href="struct_thread_data.html#aad17df6ac3d661f1f404b189cbc93ad4">ir</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="struct_thread_data.html#a049d54985d662b8ed9e3180663ac527a">n_clippings</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordtype">float</span> **<a class="code" href="struct_thread_data.html#af71d602c7438d1e94134ac868fe7f15c">ringbuffer</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordtype">float</span> **<a class="code" href="struct_thread_data.html#ae7402b422aac02863967d8150c0402b7">temp_src</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> **<a class="code" href="struct_thread_data.html#a033119a961528cc776d03d93aedb2a0a">temp_fft</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> **<a class="code" href="struct_thread_data.html#ae8563555a7ccc47456e8a6f47982a729">temp_afft</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a5d1975e203ce6f822538d556409ccf6a">  338</a></span>&#160;} <a class="code" href="af__sofalizer_8c.html#a5d1975e203ce6f822538d556409ccf6a">ThreadData</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a6610ac891903ad9dfbcac48cd3a3eb46">  340</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#a6610ac891903ad9dfbcac48cd3a3eb46">sofalizer_convolute</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">void</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, <span class="keywordtype">int</span> jobnr, <span class="keywordtype">int</span> nb_jobs)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="struct_thread_data.html">ThreadData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a> = <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;in, *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;out;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = jobnr;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">int</span> *write = &amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;write[jobnr];</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> *<span class="keyword">const</span> delay = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;delay[jobnr];</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> *<span class="keyword">const</span> ir = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;ir[jobnr];</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">int</span> *n_clippings = &amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;n_clippings[jobnr];</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">float</span> *ringbuffer = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;ringbuffer[jobnr];</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordtype">float</span> *temp_src = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;temp_src[jobnr];</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> ir_samples = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.ir_samples; <span class="comment">/* length of one IR */</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> n_samples = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.n_samples;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a> = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;format == <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a> = 1 + !<a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> = (<span class="keyword">const</span> <span class="keywordtype">float</span> *)<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;extended_data[0]; <span class="comment">/* get pointer to audio input buffer */</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">float</span> *dst = (<span class="keywordtype">float</span> *)<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;extended_data[jobnr * <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>]; <span class="comment">/* get pointer to audio output buffer */</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> in_channels = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv; <span class="comment">/* number of input channels */</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">/* ring buffer length is: longest IR plus max. delay -&gt; next power of 2 */</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> buffer_length = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buffer_length;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">/* -1 for AND instead of MODULO (applied to powers of 2): */</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keyword">const</span> uint32_t modulo = (uint32_t)buffer_length - 1;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[64]; <span class="comment">/* holds ringbuffer for each input channel */</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">int</span> wr = *write;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordtype">int</span> read;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, l;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        dst += <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">for</span> (l = 0; l &lt; in_channels; l++) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="comment">/* get starting address of ringbuffer for each input channel */</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[l] = ringbuffer + l * buffer_length;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> *temp_ir = ir; <span class="comment">/* using same set of IRs for each sample */</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        dst[0] = 0;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">for</span> (l = 0; l &lt; in_channels; l++) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> *srcp = (<span class="keyword">const</span> <span class="keywordtype">float</span> *)<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;extended_data[l];</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <span class="comment">/* write current input sample to ringbuffer (for each channel) */</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[l][wr] = srcp[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">for</span> (l = 0; l &lt; in_channels; l++) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                <span class="comment">/* write current input sample to ringbuffer (for each channel) */</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[l][wr] = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[l];</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="comment">/* loop goes through all channels to be convolved */</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">for</span> (l = 0; l &lt; in_channels; l++) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> *<span class="keyword">const</span> bptr = <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[l];</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">if</span> (l == <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lfe_channel) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <span class="comment">/* LFE is an input channel but requires no convolution */</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <span class="comment">/* apply gain to LFE signal and add to output buffer */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                dst[0] += *(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lfe_channel] + wr) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_lfe;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                temp_ir += n_samples;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="comment">/* current read position in ringbuffer: input sample write position</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">             * - delay for l-th ch. + diff. betw. IR length and buffer length</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">             * (mod buffer length) */</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            read = (wr - delay[l] - (ir_samples - 1) + buffer_length) &amp; modulo;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keywordflow">if</span> (read + ir_samples &lt; buffer_length) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                memmove(temp_src, bptr + read, ir_samples * <span class="keyword">sizeof</span>(*temp_src));</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(n_samples - (read % ir_samples), buffer_length - read);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                memmove(temp_src, bptr + read, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> * <span class="keyword">sizeof</span>(*temp_src));</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                memmove(temp_src + <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, bptr, (n_samples - <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>) * <span class="keyword">sizeof</span>(*temp_src));</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="comment">/* multiply signal and IR, and add up the results */</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            dst[0] += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fdsp-&gt;scalarproduct_float(temp_ir, temp_src, <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(ir_samples, 32));</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            temp_ir += n_samples;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="comment">/* clippings counter */</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cuda__runtime_8h.html#a59c4f558e259b7fd968f8626da9187f7">fabsf</a>(dst[0]) &gt; 1)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            n_clippings[0]++;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment">/* move output buffer pointer by +2 to get to next sample of processed channel: */</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        dst += <a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> += in_channels;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        wr   = (wr + 1) &amp; modulo; <span class="comment">/* update ringbuffer write position */</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    *write = wr; <span class="comment">/* remember write position in ringbuffer for next call */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#ae1405c22e1e64bf9d77987aae796ec11">  440</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#ae1405c22e1e64bf9d77987aae796ec11">sofalizer_fast_convolute</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">void</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, <span class="keywordtype">int</span> jobnr, <span class="keywordtype">int</span> nb_jobs)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="struct_thread_data.html">ThreadData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a> = <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;in, *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;out;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = jobnr;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordtype">int</span> *write = &amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;write[jobnr];</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *hrtf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_hrtf[jobnr]; <span class="comment">/* get pointers to current HRTF data */</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordtype">int</span> *n_clippings = &amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;n_clippings[jobnr];</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordtype">float</span> *ringbuffer = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;ringbuffer[jobnr];</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> ir_samples = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.ir_samples; <span class="comment">/* length of one IR */</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a> = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;format == <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a> = 1 + !<a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordtype">float</span> *dst = (<span class="keywordtype">float</span> *)<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;extended_data[jobnr * <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>]; <span class="comment">/* get pointer to audio output buffer */</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> in_channels = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv; <span class="comment">/* number of input channels */</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">/* ring buffer length is: longest IR plus max. delay -&gt; next power of 2 */</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> buffer_length = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buffer_length;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">/* -1 for AND instead of MODULO (applied to powers of 2): */</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keyword">const</span> uint32_t modulo = (uint32_t)buffer_length - 1;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *fft_in = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_fft[jobnr]; <span class="comment">/* temporary array for FFT input/output data */</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *fft_acc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_afft[jobnr];</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="struct_f_f_t_context.html">FFTContext</a> *ifft = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[jobnr];</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="struct_f_f_t_context.html">FFTContext</a> *fft = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[jobnr];</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> n_conv = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> n_fft = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> fft_scale = 1.0f / <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *hrtf_offset;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordtype">int</span> wr = *write;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordtype">int</span> n_read;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        dst += <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">/* find minimum between number of samples and output buffer length:</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">     * (important, if one IR is longer than the output buffer) */</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    n_read = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(ir_samples, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; n_read; j++) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">/* initialize output buf with saved signal from overflow buf */</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        dst[<a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a> * j]  = ringbuffer[wr];</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        ringbuffer[wr] = 0.0f; <span class="comment">/* re-set read samples to zero */</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="comment">/* update ringbuffer read/write position */</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        wr  = (wr + 1) &amp; modulo;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">/* initialize rest of output buffer with 0 */</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">for</span> (j = n_read; j &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples; j++) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        dst[<a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a> * j] = 0;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">/* fill FFT accumulation with 0 */</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    memset(fft_acc, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>) * n_fft);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n_conv; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> = (<span class="keyword">const</span> <span class="keywordtype">float</span> *)<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;extended_data[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>]; <span class="comment">/* get pointer to audio input buffer */</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lfe_channel) { <span class="comment">/* LFE */</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;format == <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a>) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples; j++) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    <span class="comment">/* apply gain to LFE signal and add to output buffer */</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                    dst[2 * j] += <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + j * in_channels] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_lfe;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples; j++) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                    <span class="comment">/* apply gain to LFE signal and add to output buffer */</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                    dst[j] += <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[j] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_lfe;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="comment">/* outer loop: go through all input channels to be convolved */</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * n_fft; <span class="comment">/* no. samples already processed */</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        hrtf_offset = hrtf + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">/* fill FFT input with 0 (we want to zero-pad) */</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        memset(fft_in, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>) * n_fft);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;format == <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a>) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples; j++) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="comment">/* prepare input for FFT */</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                <span class="comment">/* write all samples of current input channel to FFT input array */</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                fft_in[j].<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[j * in_channels + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples; j++) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <span class="comment">/* prepare input for FFT */</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="comment">/* write all samples of current input channel to FFT input array */</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                fft_in[j].<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[j];</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="comment">/* transform input signal of current channel to frequency domain */</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="group__lavc__fft.html#ga4d8f70cf57c4f969c99af653b8a82f15">av_fft_permute</a>(fft, fft_in);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <a class="code" href="group__lavc__fft.html#ga4fe79338f98704178512503f87a4af4c">av_fft_calc</a>(fft, fft_in);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; n_fft; j++) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keyword">const</span> <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *hcomplex = hrtf_offset + j;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="fft_8c.html#aeac685ede53ad58d0e24e6c060feff7a">re</a> = fft_in[j].<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="fft_8c.html#a967065f052e06d0e239b9bc56e0cc317">im</a> = fft_in[j].<a class="code" href="struct_f_f_t_complex.html#a69b2491bd684836a7a9350dcbdbb886b">im</a>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="comment">/* complex multiplication of input signal and HRTFs */</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <span class="comment">/* output channel (real): */</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            fft_acc[j].<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a> += <a class="code" href="fft_8c.html#aeac685ede53ad58d0e24e6c060feff7a">re</a> * hcomplex-&gt;<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a> - <a class="code" href="fft_8c.html#a967065f052e06d0e239b9bc56e0cc317">im</a> * hcomplex-&gt;<a class="code" href="struct_f_f_t_complex.html#a69b2491bd684836a7a9350dcbdbb886b">im</a>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="comment">/* output channel (imag): */</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            fft_acc[j].<a class="code" href="struct_f_f_t_complex.html#a69b2491bd684836a7a9350dcbdbb886b">im</a> += <a class="code" href="fft_8c.html#aeac685ede53ad58d0e24e6c060feff7a">re</a> * hcomplex-&gt;<a class="code" href="struct_f_f_t_complex.html#a69b2491bd684836a7a9350dcbdbb886b">im</a> + <a class="code" href="fft_8c.html#a967065f052e06d0e239b9bc56e0cc317">im</a> * hcomplex-&gt;<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">/* transform output signal of current channel back to time domain */</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="group__lavc__fft.html#ga4d8f70cf57c4f969c99af653b8a82f15">av_fft_permute</a>(ifft, fft_acc);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="group__lavc__fft.html#ga4fe79338f98704178512503f87a4af4c">av_fft_calc</a>(ifft, fft_acc);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples; j++) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">/* write output signal of current channel to output buffer */</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        dst[<a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a> * j] += fft_acc[j].<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a> * fft_scale;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; ir_samples - 1; j++) { <span class="comment">/* overflow length is IR length - 1 */</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="comment">/* write the rest of output signal to overflow buffer */</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordtype">int</span> write_pos = (wr + j) &amp; modulo;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        *(ringbuffer + write_pos) += fft_acc[<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples + j].<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a> * fft_scale;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">/* go through all samples of current output buffer: count clippings */</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;nb_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment">/* clippings counter */</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cuda__runtime_8h.html#a59c4f558e259b7fd968f8626da9187f7">fabsf</a>(dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a>]) &gt; 1) { <span class="comment">/* if current output sample &gt; 1 */</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            n_clippings[0]++;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">/* remember read/write position in ringbuffer for next call */</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    *write = wr;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a9056c701b381ba84a4cebc5eb7c9d5b9">  578</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#a9056c701b381ba84a4cebc5eb7c9d5b9">filter_frame</a>(<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;{</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *outlink = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;outputs[0];</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordtype">int</span> n_clippings[2] = { 0 };</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <a class="code" href="struct_thread_data.html">ThreadData</a> <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = <a class="code" href="audio_8c.html#a7954d515c464dafcefd68c2a344489a7">ff_get_audio_buffer</a>(outlink, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;nb_samples);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="group__lavu__frame.html#gab9b275b114ace0db95c5796bc71f3012">av_frame_copy_props</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.in = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>; <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.out = <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>; <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.write = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;write;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.delay = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay; <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.ir = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_ir; <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.n_clippings = n_clippings;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.ringbuffer = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ringbuffer; <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.temp_src = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_src;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.temp_fft = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_fft;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>.temp_afft = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_afft;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#a6df70e5e9f109151e8b147c2eacfc8b2">TIME_DOMAIN</a>) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a8a8bec51da36db65ff864f88a85805d9">internal</a>-&gt;execute(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="af__sofalizer_8c.html#a6610ac891903ad9dfbcac48cd3a3eb46">sofalizer_convolute</a>, &amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 2);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#ac90981e5246c3021b85940af316e5cac">FREQUENCY_DOMAIN</a>) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a8a8bec51da36db65ff864f88a85805d9">internal</a>-&gt;execute(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="af__sofalizer_8c.html#ae1405c22e1e64bf9d77987aae796ec11">sofalizer_fast_convolute</a>, &amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 2);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#ae59bb66df9495df417c2632403e23aa7">emms_c</a>();</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">/* display error message if clipping occurred */</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (n_clippings[0] + n_clippings[1] &gt; 0) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;%d of %d samples clipped. Please reduce gain.\n&quot;</span>,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;               n_clippings[0] + n_clippings[1], <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;nb_samples * 2);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="avfilter_8c.html#a65d6e9755eadf69367843dfc738143b4">ff_filter_frame</a>(outlink, <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#ab5283561721ad2970de4e2d569100dac">  617</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#ab5283561721ad2970de4e2d569100dac">activate</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;{</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inputs[0];</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *outlink = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;outputs[0];</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="filters_8h.html#ab82b9a98da3d2483b5b5457d5e8570fc">FF_FILTER_FORWARD_STATUS_BACK</a>(outlink, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_samples)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avfilter_8c.html#a9d64bcb6dc09aebb9fa5a965bf69a3d3">ff_inlink_consume_samples</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_samples, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_samples, &amp;<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avfilter_8c.html#ac1daee38f363044775732a960441861c">ff_inlink_consume_frame</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, &amp;<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt; 0)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="af__sofalizer_8c.html#a9056c701b381ba84a4cebc5eb7c9d5b9">filter_frame</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="filter__design_8txt.html#a45a58a99bf64b4d10789dfa6ae9639d0">FF_FILTER_FORWARD_STATUS</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, outlink);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="filter__design_8txt.html#adcd13caad2025930d784c1fb557e5cb2">FF_FILTER_FORWARD_WANTED</a>(outlink, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#a1252070a891d5f1bbcadf6b10d5d0745">FFERROR_NOT_READY</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">  642</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;{</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="struct_a_v_filter_formats.html">AVFilterFormats</a> *<a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="struct_a_v_filter_channel_layouts.html">AVFilterChannelLayouts</a> *<a class="code" href="mov__chan_8c.html#a0f9e2036e9efff8b06562d17cb0994ad">layouts</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, <a class="code" href="ffmpeg__filter_8c.html#a12ee30995b3ac94a573f01870d1289e8">sample_rates</a>[] = { 48000, -1 };</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a> <a class="code" href="adpcmenc_8c.html#a0b94bda9858853d90b77d15331ca0ae1">sample_fmts</a>[] = {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a>, <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a>,</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912">AV_SAMPLE_FMT_NONE</a></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    };</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a> = <a class="code" href="formats_8c.html#a43e709e9689273a94a5edc40d1cb5aed">ff_make_format_list</a>(<a class="code" href="adpcmenc_8c.html#a0b94bda9858853d90b77d15331ca0ae1">sample_fmts</a>);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a>)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="formats_8c.html#a3ea436a8d465066eecdfb2ff513ff504">ff_set_common_formats</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="mov__chan_8c.html#a0f9e2036e9efff8b06562d17cb0994ad">layouts</a> = <a class="code" href="formats_8c.html#a5a4f52dd68781b777dabe9a99d2c40d3">ff_all_channel_layouts</a>();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mov__chan_8c.html#a0f9e2036e9efff8b06562d17cb0994ad">layouts</a>)</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="formats_8c.html#ad16f483787a1ff7e6176d4fde06b5365">ff_channel_layouts_ref</a>(<a class="code" href="mov__chan_8c.html#a0f9e2036e9efff8b06562d17cb0994ad">layouts</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inputs[0]-&gt;outcfg.channel_layouts);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="mov__chan_8c.html#a0f9e2036e9efff8b06562d17cb0994ad">layouts</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="formats_8c.html#a0eadfcd358eb96c358859165ace6be1a">ff_add_channel_layout</a>(&amp;<a class="code" href="mov__chan_8c.html#a0f9e2036e9efff8b06562d17cb0994ad">layouts</a>, <a class="code" href="group__channel__mask__c.html#gabc6d6651bba254cd0fa2c42a57228e65">AV_CH_LAYOUT_STEREO</a>);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="formats_8c.html#ad16f483787a1ff7e6176d4fde06b5365">ff_channel_layouts_ref</a>(<a class="code" href="mov__chan_8c.html#a0f9e2036e9efff8b06562d17cb0994ad">layouts</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;outputs[0]-&gt;incfg.channel_layouts);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="ffmpeg__filter_8c.html#a12ee30995b3ac94a573f01870d1289e8">sample_rates</a>[0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sample_rate;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a> = <a class="code" href="formats_8c.html#a43e709e9689273a94a5edc40d1cb5aed">ff_make_format_list</a>(<a class="code" href="ffmpeg__filter_8c.html#a12ee30995b3ac94a573f01870d1289e8">sample_rates</a>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a>)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="formats_8c.html#a9176f293cccfe4e4c3539b2bfbda480b">ff_set_common_samplerates</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#ac3e4bcf316b6cfd8c6f18f0e756c2109">  684</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#ac3e4bcf316b6cfd8c6f18f0e756c2109">getfilter_float</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                           <span class="keywordtype">float</span> *<a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a>, <span class="keywordtype">float</span> *right,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                           <span class="keywordtype">float</span> *delay_left, <span class="keywordtype">float</span> *delay_right)</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;{</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>[3], delays[2];</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordtype">float</span> *fl, *fr;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordtype">int</span> nearest;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordtype">int</span> *neighbors;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordtype">float</span> *res;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>[0] = x, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>[1] = y, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>[2] = z;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    nearest = mysofa_lookup(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.lookup, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span> (nearest &lt; 0)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interpolate) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        neighbors = mysofa_neighborhood(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.neighborhood, nearest);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        res = mysofa_interpolate(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>,</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                 nearest, neighbors,</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.fir, delays);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;DataDelay.elements &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;R) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            delays[0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;DataDelay.values[nearest * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;R];</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            delays[1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;DataDelay.values[nearest * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;R + 1];</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            delays[0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;DataDelay.values[0];</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            delays[1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;DataDelay.values[1];</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        res = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;DataIR.values + nearest * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;N * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;R;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    *delay_left  = delays[0];</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    *delay_right = delays[1];</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    fl = res;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    fr = res + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;N;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    memcpy(<a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a>, fl, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;N);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    memcpy(right, fr, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;N);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;}</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a4ee6c83ac7efe62ed9014ad1d07baaac">  728</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#a4ee6c83ac7efe62ed9014ad1d07baaac">load_data</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">int</span> azim, <span class="keywordtype">int</span> elev, <span class="keywordtype">float</span> <a class="code" href="struct_s_o_f_alizer_context.html#a08290553ef9c7488c5d73348f7a6531a">radius</a>, <span class="keywordtype">int</span> <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>)</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;{</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordtype">int</span> n_samples;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordtype">int</span> ir_samples;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv; <span class="comment">/* no. channels to convolve */</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordtype">float</span> delay_l; <span class="comment">/* broadband delay for each IR */</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordtype">float</span> delay_r;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordtype">int</span> nb_input_channels = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inputs[0]-&gt;channels; <span class="comment">/* no. input channels */</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordtype">float</span> gain_lin = <a class="code" href="libm_8h.html#a70609775e8ac20380d4382942f88c7b4">expf</a>((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain - 3 * nb_input_channels) / 20 * <a class="code" href="mathematics_8h.html#a0a53871497a155afe91424c28a8ec3c4">M_LN10</a>); <span class="comment">/* gain - 3dB/channel */</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *data_hrtf_l = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *data_hrtf_r = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *fft_in_l = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="struct_f_f_t_complex.html">FFTComplex</a> *fft_in_r = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordtype">float</span> *data_ir_l = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordtype">float</span> *data_ir_r = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = 0; <span class="comment">/* used for faster pointer arithmetics in for-loop */</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, azim_orig = azim, elev_orig = elev;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordtype">int</span> n_current;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordtype">int</span> n_max = 0;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;IR length: %d.\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;N);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.ir_samples = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.hrtf-&gt;N;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.n_samples = 1 &lt;&lt; (32 - <a class="code" href="group__lavu__math.html#ga92d9a5e6b5e5aa746dca17c90142a82b">ff_clz</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.ir_samples));</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    n_samples = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.n_samples;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    ir_samples = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.ir_samples;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#a6df70e5e9f109151e8b147c2eacfc8b2">TIME_DOMAIN</a>) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_ir[0] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(n_samples, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_ir[1] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(n_samples, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_ir[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_ir[1]) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[0] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[1] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[1]) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="comment">/* get temporary IR for L and R channel */</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    data_ir_l = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a> * n_samples, <span class="keyword">sizeof</span>(*data_ir_l));</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    data_ir_r = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a> * n_samples, <span class="keyword">sizeof</span>(*data_ir_r));</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span> (!data_ir_r || !data_ir_l) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#a6df70e5e9f109151e8b147c2eacfc8b2">TIME_DOMAIN</a>) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_src[0] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(n_samples, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_src[1] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(n_samples, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_src[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_src[1]) {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_azim = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_azim));</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_elev = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_elev));</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_azim || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_elev) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">/* get speaker positions */</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="af__sofalizer_8c.html#a8bb1fd3449e28098f4094a976b717b2b">get_speaker_pos</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_azim, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_elev)) &lt; 0) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Couldn&#39;t get speaker positions. Input channel configuration not supported.\n&quot;</span>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordtype">float</span> coordinates[3];</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="comment">/* load and store IRs and corresponding delays */</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        azim = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_azim[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + azim_orig) % 360;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        elev = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_elev[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + elev_orig) % 90;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        coordinates[0] = azim;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        coordinates[1] = elev;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        coordinates[2] = <a class="code" href="struct_s_o_f_alizer_context.html#a08290553ef9c7488c5d73348f7a6531a">radius</a>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        mysofa_s2c(coordinates);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="comment">/* get id of IR closest to desired position */</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="af__sofalizer_8c.html#ac3e4bcf316b6cfd8c6f18f0e756c2109">getfilter_float</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, coordinates[0], coordinates[1], coordinates[2],</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                              data_ir_l + n_samples * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                              data_ir_r + n_samples * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                              &amp;delay_l, &amp;delay_r);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = delay_l * <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = delay_r * <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.max_delay = <a class="code" href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.max_delay, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="comment">/* get size of ringbuffer (longest IR plus max. delay) */</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">/* then choose next power of 2 for performance optimization */</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    n_current = n_samples + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa.max_delay;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">/* length of longest IR plus max. delay */</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    n_max = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(n_max, n_current);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="comment">/* buffer length is longest IR plus max. delay -&gt; next power of 2</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">       (32 - count leading zeros gives required exponent)  */</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buffer_length = 1 &lt;&lt; (32 - <a class="code" href="group__lavu__math.html#ga92d9a5e6b5e5aa746dca17c90142a82b">ff_clz</a>(n_max));</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft = <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a> = 1 &lt;&lt; (32 - <a class="code" href="group__lavu__math.html#ga92d9a5e6b5e5aa746dca17c90142a82b">ff_clz</a>(n_max + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;framesize));</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#ac90981e5246c3021b85940af316e5cac">FREQUENCY_DOMAIN</a>) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <a class="code" href="group__lavc__fft.html#ga9dd6f59f2d27b37fc047d9dc452c6ba5">av_fft_end</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[0]);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <a class="code" href="group__lavc__fft.html#ga9dd6f59f2d27b37fc047d9dc452c6ba5">av_fft_end</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[1]);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[0] = <a class="code" href="group__lavc__fft.html#ga6c6b88ddaa9aee5b0ec4e2d09a78e286">av_fft_init</a>(<a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft), 0);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[1] = <a class="code" href="group__lavc__fft.html#ga6c6b88ddaa9aee5b0ec4e2d09a78e286">av_fft_init</a>(<a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft), 0);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <a class="code" href="group__lavc__fft.html#ga9dd6f59f2d27b37fc047d9dc452c6ba5">av_fft_end</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[0]);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <a class="code" href="group__lavc__fft.html#ga9dd6f59f2d27b37fc047d9dc452c6ba5">av_fft_end</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[1]);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[0] = <a class="code" href="group__lavc__fft.html#ga6c6b88ddaa9aee5b0ec4e2d09a78e286">av_fft_init</a>(<a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft), 1);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[1] = <a class="code" href="group__lavc__fft.html#ga6c6b88ddaa9aee5b0ec4e2d09a78e286">av_fft_init</a>(<a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft), 1);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[1] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[1]) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create FFT contexts of size %d.\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#a6df70e5e9f109151e8b147c2eacfc8b2">TIME_DOMAIN</a>) {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ringbuffer[0] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buffer_length, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * nb_input_channels);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ringbuffer[1] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buffer_length, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * nb_input_channels);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#ac90981e5246c3021b85940af316e5cac">FREQUENCY_DOMAIN</a>) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="comment">/* get temporary HRTF memory for L and R channel */</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        data_hrtf_l = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a>, <span class="keyword">sizeof</span>(*data_hrtf_l) * <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a>);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        data_hrtf_r = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a>, <span class="keyword">sizeof</span>(*data_hrtf_r) * <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a>);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">if</span> (!data_hrtf_r || !data_hrtf_l) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ringbuffer[0] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buffer_length, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ringbuffer[1] = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buffer_length, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_fft[0] = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft, <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>));</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_fft[1] = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft, <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>));</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_afft[0] = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft, <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>));</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_afft[1] = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_fft, <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>));</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_fft[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_fft[1] ||</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_afft[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_afft[1]) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ringbuffer[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ringbuffer[1]) {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#ac90981e5246c3021b85940af316e5cac">FREQUENCY_DOMAIN</a>) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        fft_in_l = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a>, <span class="keyword">sizeof</span>(*fft_in_l));</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        fft_in_r = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a>, <span class="keyword">sizeof</span>(*fft_in_r));</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">if</span> (!fft_in_l || !fft_in_r) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordtype">float</span> *lir, *rir;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * n_samples; <span class="comment">/* no. samples already written */</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        lir = data_ir_l + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        rir = data_ir_r + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#a6df70e5e9f109151e8b147c2eacfc8b2">TIME_DOMAIN</a>) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; ir_samples; j++) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                <span class="comment">/* load reversed IRs of the specified source position</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">                 * sample-by-sample for left and right ear; and apply gain */</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_ir[0][<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + j] = lir[ir_samples - 1 - j] * gain_lin;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_ir[1][<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + j] = rir[ir_samples - 1 - j] * gain_lin;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#ac90981e5246c3021b85940af316e5cac">FREQUENCY_DOMAIN</a>) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            memset(fft_in_l, 0, <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a> * <span class="keyword">sizeof</span>(*fft_in_l));</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            memset(fft_in_r, 0, <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a> * <span class="keyword">sizeof</span>(*fft_in_r));</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a>; <span class="comment">/* no. samples already written */</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; ir_samples; j++) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="comment">/* load non-reversed IRs of the specified source position</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">                 * sample-by-sample and apply gain,</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">                 * L channel is loaded to real part, R channel to imag part,</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">                 * IRs are shifted by L and R delay */</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                fft_in_l[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + j].<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a> = lir[j] * gain_lin;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                fft_in_r[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + j].<a class="code" href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">re</a> = rir[j] * gain_lin;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            <span class="comment">/* actually transform to frequency domain (IRs -&gt; HRTFs) */</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            <a class="code" href="group__lavc__fft.html#ga4d8f70cf57c4f969c99af653b8a82f15">av_fft_permute</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[0], fft_in_l);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <a class="code" href="group__lavc__fft.html#ga4fe79338f98704178512503f87a4af4c">av_fft_calc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[0], fft_in_l);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            memcpy(data_hrtf_l + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, fft_in_l, <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a> * <span class="keyword">sizeof</span>(*fft_in_l));</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <a class="code" href="group__lavc__fft.html#ga4d8f70cf57c4f969c99af653b8a82f15">av_fft_permute</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[0], fft_in_r);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <a class="code" href="group__lavc__fft.html#ga4fe79338f98704178512503f87a4af4c">av_fft_calc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[0], fft_in_r);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            memcpy(data_hrtf_r + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, fft_in_r, <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a> * <span class="keyword">sizeof</span>(*fft_in_r));</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#ac90981e5246c3021b85940af316e5cac">FREQUENCY_DOMAIN</a>) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_hrtf[0] = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv, <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>));</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_hrtf[1] = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv, <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>));</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_hrtf[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_hrtf[1]) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_hrtf[0], data_hrtf_l, <span class="comment">/* copy HRTF data to */</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>) * <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a> * <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a>); <span class="comment">/* filter struct */</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_hrtf[1], data_hrtf_r,</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <span class="keyword">sizeof</span>(<a class="code" href="struct_f_f_t_complex.html">FFTComplex</a>) * <a class="code" href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">n_conv</a> * <a class="code" href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">n_fft</a>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;data_hrtf_l); <span class="comment">/* free temporary HRTF memory */</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;data_hrtf_r);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;data_ir_l); <span class="comment">/* free temprary IR memory */</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;data_ir_r);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;fft_in_l); <span class="comment">/* free temporary FFT memory */</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;fft_in_r);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;}</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#ab7cd5b404747a481115ce1d090fd11b8">  966</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#ab7cd5b404747a481115ce1d090fd11b8">init</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filename) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Valid SOFA filename must be set.\n&quot;</span>);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="comment">/* preload SOFA file, */</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="af__sofalizer_8c.html#a022820a123ed4bed9ba0ccc991027111">preload_sofa</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filename, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sample_rate);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="comment">/* file loading error */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error while loading SOFA file: &#39;%s&#39;\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filename);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">/* no file loading error, resampling not required */</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;File &#39;%s&#39; loaded.\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filename);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;No valid SOFA file could be loaded. Please specify valid SOFA file.\n&quot;</span>);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fdsp = <a class="code" href="libavutil_2float__dsp_8c.html#abf4186be59dc9de8cda94ee7beacaf67">avpriv_float_dsp_alloc</a>(0);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fdsp)</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;}</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a6349dbef489cb1be3b41b8aeffdd2a21">  997</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="af__sofalizer_8c.html#a6349dbef489cb1be3b41b8aeffdd2a21">config_input</a>(<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>)</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;{</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;type == <a class="code" href="af__sofalizer_8c.html#ac90981e5246c3021b85940af316e5cac">FREQUENCY_DOMAIN</a>)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_samples = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;framesize;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="comment">/* gain -3 dB per channel */</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_lfe = <a class="code" href="libm_8h.html#a70609775e8ac20380d4382942f88c7b4">expf</a>((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain - 3 * <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;channels + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lfe_gain) / 20 * <a class="code" href="mathematics_8h.html#a0a53871497a155afe91424c28a8ec3c4">M_LN10</a>);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;channels;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="comment">/* load IRs to data_ir[0] and data_ir[1] for required directions */</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="af__sofalizer_8c.html#a4ee6c83ac7efe62ed9014ad1d07baaac">load_data</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rotation, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;elevation, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;radius, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;sample_rate)) &lt; 0)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Samplerate: %d Channels to convolute: %d, Length of ringbuffer: %d x %d\n&quot;</span>,</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;sample_rate, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;n_conv, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;channels, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buffer_length);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;}</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#abbead6cde1da3e72ce200578c426f1e6"> 1021</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="af__sofalizer_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;{</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="af__sofalizer_8c.html#a211a244bec3c2e17637e925aa4103447">close_sofa</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sofa);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="code" href="group__lavc__fft.html#ga9dd6f59f2d27b37fc047d9dc452c6ba5">av_fft_end</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[0]);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="code" href="group__lavc__fft.html#ga9dd6f59f2d27b37fc047d9dc452c6ba5">av_fft_end</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[1]);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="group__lavc__fft.html#ga9dd6f59f2d27b37fc047d9dc452c6ba5">av_fft_end</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[0]);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="group__lavc__fft.html#ga9dd6f59f2d27b37fc047d9dc452c6ba5">av_fft_end</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[1]);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[0] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ifft[1] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[0] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fft[1] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[0]);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay[1]);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_ir[0]);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_ir[1]);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ringbuffer[0]);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ringbuffer[1]);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_azim);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;speaker_elev);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_src[0]);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_src[1]);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_afft[0]);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_afft[1]);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_fft[0]);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;temp_fft[1]);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_hrtf[0]);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_hrtf[1]);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fdsp);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;}</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261"> 1053</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(SOFAlizerContext, x)</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d"> 1054</a></span>&#160;<span class="preprocessor">#define FLAGS AV_OPT_FLAG_AUDIO_PARAM|AV_OPT_FLAG_FILTERING_PARAM</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a726b48c5e201630230a15b76b9abe28f"> 1056</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="af__sofalizer_8c.html#a726b48c5e201630230a15b76b9abe28f">sofalizer_options</a>[] = {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    { <span class="stringliteral">&quot;sofa&quot;</span>,      <span class="stringliteral">&quot;sofa filename&quot;</span>,  <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a94422bd2b209e821e9a29ecaa7316e2c">filename</a>),  <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a>, {.str=<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>},            .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    { <span class="stringliteral">&quot;gain&quot;</span>,      <span class="stringliteral">&quot;set gain in dB&quot;</span>, <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a817c53379f799c3c31ae2edd2ffa680c">gain</a>),      <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a>,  {.dbl=0},     -20,  40, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    { <span class="stringliteral">&quot;rotation&quot;</span>,  <span class="stringliteral">&quot;set rotation&quot;</span>  , <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#af13276b4650c7b986cce8814936af2bd">rotation</a>),  <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a>,  {.dbl=0},    -360, 360, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    { <span class="stringliteral">&quot;elevation&quot;</span>, <span class="stringliteral">&quot;set elevation&quot;</span>,  <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a72f57e34b43d3117a4714df93e155772">elevation</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a>,  {.dbl=0},     -90,  90, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    { <span class="stringliteral">&quot;radius&quot;</span>,    <span class="stringliteral">&quot;set radius&quot;</span>,     <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a08290553ef9c7488c5d73348f7a6531a">radius</a>),    <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a>,  {.dbl=1},       0,   5, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    { <span class="stringliteral">&quot;type&quot;</span>,      <span class="stringliteral">&quot;set processing&quot;</span>, <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>),      <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>,    {.i64=1},       0,   1, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;type&quot;</span> },</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    { <span class="stringliteral">&quot;time&quot;</span>,      <span class="stringliteral">&quot;time domain&quot;</span>,      0,               <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>,  {.i64=0},       0,   0, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;type&quot;</span> },</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    { <span class="stringliteral">&quot;freq&quot;</span>,      <span class="stringliteral">&quot;frequency domain&quot;</span>, 0,               <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>,  {.i64=1},       0,   0, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;type&quot;</span> },</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    { <span class="stringliteral">&quot;speakers&quot;</span>,  <span class="stringliteral">&quot;set speaker custom positions&quot;</span>, <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a231c9a6e394efcbb43ce1f9a085e43b7">speakers_pos</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a>,  {.str=0},    0, 0, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    { <span class="stringliteral">&quot;lfegain&quot;</span>,   <span class="stringliteral">&quot;set lfe gain&quot;</span>,                 <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a48cd6df56bce5b51ce1084bd4bf0c271">lfe_gain</a>),     <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a>,   {.dbl=0},  -20,40, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    { <span class="stringliteral">&quot;framesize&quot;</span>, <span class="stringliteral">&quot;set frame size&quot;</span>, <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#ae554c64fb26bb36f9c696ab293549212">framesize</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>,    {.i64=1024},1024,96000, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    { <span class="stringliteral">&quot;normalize&quot;</span>, <span class="stringliteral">&quot;normalize IRs&quot;</span>,  <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="namespacenormalize.html">normalize</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>,   {.i64=1},       0,   1, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    { <span class="stringliteral">&quot;interpolate&quot;</span>,<span class="stringliteral">&quot;interpolate IRs from neighbors&quot;</span>,   <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="twinvq_8c.html#ab0bd3e2f6305dfc9119c47f412993f92">interpolate</a>),<a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>,    {.i64=0},       0,   1, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    { <span class="stringliteral">&quot;minphase&quot;</span>,  <span class="stringliteral">&quot;minphase IRs&quot;</span>,   <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a4d342737d18a44c75d85208478844ac9">minphase</a>),  <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>,   {.i64=0},       0,   1, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    { <span class="stringliteral">&quot;anglestep&quot;</span>, <span class="stringliteral">&quot;set neighbor search angle step&quot;</span>,    <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#a5bdf26b1469f11f92820a2738a80cc3f">anglestep</a>),  <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a>,   {.dbl=.5},      0.01, 10, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    { <span class="stringliteral">&quot;radstep&quot;</span>,   <span class="stringliteral">&quot;set neighbor search radius step&quot;</span>,   <a class="code" href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_s_o_f_alizer_context.html#ad5d83100d72da0b37596f6d3d4823fcb">radstep</a>),    <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a>,   {.dbl=.01},     0.01,  1, .flags = <a class="code" href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;};</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#adcc7fee938c249cf1eaafaf568f7412c"> 1076</a></span>&#160;<a class="code" href="af__sofalizer_8c.html#adcc7fee938c249cf1eaafaf568f7412c">AVFILTER_DEFINE_CLASS</a>(sofalizer);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44"> 1078</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_filter_pad.html">AVFilterPad</a> <a class="code" href="af__sofalizer_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44">inputs</a>[] = {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        .<a class="code" href="struct_a_v_filter_pad.html#afc112061a6035639934e0135aab7d425">name</a>         = <span class="stringliteral">&quot;default&quot;</span>,</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        .type         = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>,</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        .config_props = <a class="code" href="af__sofalizer_8c.html#a6349dbef489cb1be3b41b8aeffdd2a21">config_input</a>,</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    },</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;};</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="af__sofalizer_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698"> 1087</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_filter_pad.html">AVFilterPad</a> <a class="code" href="af__sofalizer_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a>[] = {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        .<a class="code" href="struct_a_v_filter_pad.html#afc112061a6035639934e0135aab7d425">name</a> = <span class="stringliteral">&quot;default&quot;</span>,</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        .type = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>,</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    },</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;};</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"><a class="line" href="allfilters_8c.html#a6b18fd9a738389496255620eda76104a"> 1095</a></span>&#160;<a class="code" href="struct_a_v_filter.html">AVFilter</a> <a class="code" href="af__sofalizer_8c.html#a6b18fd9a738389496255620eda76104a">ff_af_sofalizer</a> = {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    .<a class="code" href="struct_a_v_filter.html#a28a4776f344f91055f42a4c2a1b15c0c">name</a>          = <span class="stringliteral">&quot;sofalizer&quot;</span>,</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    .description   = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;SOFAlizer (Spatially Oriented Format for Acoustics).&quot;</span>),</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    .priv_size     = <span class="keyword">sizeof</span>(<a class="code" href="af__sofalizer_8c.html#a4b2377b49527bd3afc0fa5a693d7efc9">SOFAlizerContext</a>),</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    .priv_class    = &amp;sofalizer_class,</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    .<a class="code" href="af__sofalizer_8c.html#ab7cd5b404747a481115ce1d090fd11b8">init</a>          = <a class="code" href="af__sofalizer_8c.html#ab7cd5b404747a481115ce1d090fd11b8">init</a>,</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    .<a class="code" href="af__sofalizer_8c.html#ab5283561721ad2970de4e2d569100dac">activate</a>      = <a class="code" href="af__sofalizer_8c.html#ab5283561721ad2970de4e2d569100dac">activate</a>,</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    .<a class="code" href="af__sofalizer_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a>        = <a class="code" href="af__sofalizer_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a>,</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    .<a class="code" href="af__sofalizer_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a> = <a class="code" href="af__sofalizer_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a>,</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    .<a class="code" href="af__sofalizer_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44">inputs</a>        = <a class="code" href="af__sofalizer_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44">inputs</a>,</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    .<a class="code" href="af__sofalizer_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a>       = <a class="code" href="af__sofalizer_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a>,</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    .<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>         = <a class="code" href="group__lavfi.html#gacad757479a5b22c367dd37408a9844fd">AVFILTER_FLAG_SLICE_THREADS</a>,</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="asignature_8h_html_a12f58149bb2cdab504621ba5b390ef64"><div class="ttname"><a href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a></div><div class="ttdeci">formats</div><div class="ttdef"><b>Definition:</b> <a href="signature_8h_source.html#l00048">signature.h:48</a></div></div>
<div class="ttc" id="agroup__lavc__fft_html_ga9dd6f59f2d27b37fc047d9dc452c6ba5"><div class="ttname"><a href="group__lavc__fft.html#ga9dd6f59f2d27b37fc047d9dc452c6ba5">av_fft_end</a></div><div class="ttdeci">av_cold void av_fft_end(FFTContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8c_source.html#l00048">avfft.c:48</a></div></div>
<div class="ttc" id="aaudio_8c_html_a7954d515c464dafcefd68c2a344489a7"><div class="ttname"><a href="audio_8c.html#a7954d515c464dafcefd68c2a344489a7">ff_get_audio_buffer</a></div><div class="ttdeci">AVFrame * ff_get_audio_buffer(AVFilterLink *link, int nb_samples)</div><div class="ttdef"><b>Definition:</b> <a href="audio_8c_source.html#l00086">audio.c:86</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_FLTP</div><div class="ttdoc">float, planar</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00069">samplefmt.h:69</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a48cd6df56bce5b51ce1084bd4bf0c271"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a48cd6df56bce5b51ce1084bd4bf0c271">SOFAlizerContext::lfe_gain</a></div><div class="ttdeci">float lfe_gain</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00072">af_sofalizer.c:72</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="aregdef_8h_html_ab2c359e6c325062d33a4152752d8a820"><div class="ttname"><a href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a></div><div class="ttdeci">#define td</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00070">regdef.h:70</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a6df70e5e9f109151e8b147c2eacfc8b2"><div class="ttname"><a href="af__sofalizer_8c.html#a6df70e5e9f109151e8b147c2eacfc8b2">TIME_DOMAIN</a></div><div class="ttdeci">#define TIME_DOMAIN</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00042">af_sofalizer.c:42</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a231c9a6e394efcbb43ce1f9a085e43b7"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a231c9a6e394efcbb43ce1f9a085e43b7">SOFAlizerContext::speakers_pos</a></div><div class="ttdeci">char * speakers_pos</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00071">af_sofalizer.c:71</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="aformats_8c_html_a43e709e9689273a94a5edc40d1cb5aed"><div class="ttname"><a href="formats_8c.html#a43e709e9689273a94a5edc40d1cb5aed">ff_make_format_list</a></div><div class="ttdeci">AVFilterFormats * ff_make_format_list(const int *fmts)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00286">formats.c:286</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html"><div class="ttname"><a href="struct_a_v_filter_link.html">AVFilterLink</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00471">avfilter.h:471</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga6b558fe85e67383a5b04e56b97b145d0"><div class="ttname"><a href="group__channel__masks.html#ga6b558fe85e67383a5b04e56b97b145d0">AV_CH_TOP_FRONT_CENTER</a></div><div class="ttdeci">#define AV_CH_TOP_FRONT_CENTER</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00062">channel_layout.h:62</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_affab9f1fdc59144327f09fc823928ac8"><div class="ttname"><a href="af__sofalizer_8c.html#affab9f1fdc59144327f09fc823928ac8">parse_channel_name</a></div><div class="ttdeci">static int parse_channel_name(AVFilterContext *ctx, char **arg, int *rchannel)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00186">af_sofalizer.c:186</a></div></div>
<div class="ttc" id="astruct_virtual_speaker_html_a5512056a288e568196776bb80ee32d0c"><div class="ttname"><a href="struct_virtual_speaker.html#a5512056a288e568196776bb80ee32d0c">VirtualSpeaker::set</a></div><div class="ttdeci">uint8_t set</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00057">af_sofalizer.c:57</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html"><div class="ttname"><a href="struct_a_v_filter_context.html">AVFilterContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00341">avfilter.h:341</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga72d2eaef6727608379ab29859f5d5ee2"><div class="ttname"><a href="group__channel__masks.html#ga72d2eaef6727608379ab29859f5d5ee2">AV_CH_LOW_FREQUENCY_2</a></div><div class="ttdeci">#define AV_CH_LOW_FREQUENCY_2</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00073">channel_layout.h:73</a></div></div>
<div class="ttc" id="aavfilter_8c_html_a65d6e9755eadf69367843dfc738143b4"><div class="ttname"><a href="avfilter_8c.html#a65d6e9755eadf69367843dfc738143b4">ff_filter_frame</a></div><div class="ttdeci">int ff_filter_frame(AVFilterLink *link, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8c_source.html#l01091">avfilter.c:1091</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a3dbec51c535e94302f070ecea392129d"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a3dbec51c535e94302f070ecea392129d">SOFAlizerContext::interpolate</a></div><div class="ttdeci">int interpolate</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00104">af_sofalizer.c:104</a></div></div>
<div class="ttc" id="aadpcmenc_8c_html_a0b94bda9858853d90b77d15331ca0ae1"><div class="ttname"><a href="adpcmenc_8c.html#a0b94bda9858853d90b77d15331ca0ae1">sample_fmts</a></div><div class="ttdeci">static enum AVSampleFormat sample_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="adpcmenc_8c_source.html#l00566">adpcmenc.c:925</a></div></div>
<div class="ttc" id="aformats_8c_html_ad16f483787a1ff7e6176d4fde06b5365"><div class="ttname"><a href="formats_8c.html#ad16f483787a1ff7e6176d4fde06b5365">ff_channel_layouts_ref</a></div><div class="ttdeci">int ff_channel_layouts_ref(AVFilterChannelLayouts *f, AVFilterChannelLayouts **ref)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00461">formats.c:461</a></div></div>
<div class="ttc" id="amov__chan_8c_html_a0f9e2036e9efff8b06562d17cb0994ad"><div class="ttname"><a href="mov__chan_8c.html#a0f9e2036e9efff8b06562d17cb0994ad">layouts</a></div><div class="ttdeci">enum MovChannelLayoutTag * layouts</div><div class="ttdef"><b>Definition:</b> <a href="mov__chan_8c_source.html#l00434">mov_chan.c:434</a></div></div>
<div class="ttc" id="amem_8c_html_a254f3455439c15a2c8a75b8f0235fdbd"><div class="ttname"><a href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a></div><div class="ttdeci">void * av_malloc_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00182">mem.c:182</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a1252070a891d5f1bbcadf6b10d5d0745"><div class="ttname"><a href="filter__design_8txt.html#a1252070a891d5f1bbcadf6b10d5d0745">FFERROR_NOT_READY</a></div><div class="ttdeci">return FFERROR_NOT_READY</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00204">filter_design.txt:204</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_af6290496de1ed2ccd45a7c6fb696506f"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#af6290496de1ed2ccd45a7c6fb696506f">SOFAlizerContext::write</a></div><div class="ttdeci">int write[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00081">af_sofalizer.c:81</a></div></div>
<div class="ttc" id="astruct_thread_data_html_add3597efe9ebbc48263448a011b94150"><div class="ttname"><a href="struct_thread_data.html#add3597efe9ebbc48263448a011b94150">ThreadData::in</a></div><div class="ttdeci">AVFrame * in</div><div class="ttdef"><b>Definition:</b> <a href="af__afftdn_8c_source.html#l01083">af_afftdn.c:1083</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a720b17cc89203cfc793b5d7e17a6ca88"><div class="ttname"><a href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a></div><div class="ttdeci">The exact code depends on how similar the blocks are and how related they are to the and needs to apply these operations to the correct inlink or outlink if there are several Macros are available to factor that when no extra processing is inlink</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00212">filter_design.txt:212</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga92d9a5e6b5e5aa746dca17c90142a82b"><div class="ttname"><a href="group__lavu__math.html#ga92d9a5e6b5e5aa746dca17c90142a82b">ff_clz</a></div><div class="ttdeci">#define ff_clz</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00142">intmath.h:142</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_gabce29ea1d7e2d433263b2cbf28232360"><div class="ttname"><a href="group__channel__masks.html#gabce29ea1d7e2d433263b2cbf28232360">AV_CH_TOP_FRONT_RIGHT</a></div><div class="ttdeci">#define AV_CH_TOP_FRONT_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00063">channel_layout.h:63</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="afft_8c_html_a967065f052e06d0e239b9bc56e0cc317"><div class="ttname"><a href="fft_8c.html#a967065f052e06d0e239b9bc56e0cc317">im</a></div><div class="ttdeci">float im</div><div class="ttdef"><b>Definition:</b> <a href="fft_8c_source.html#l00082">fft.c:82</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a7b6e3a41854ee4f0290b4b7e52ba5d43"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a7b6e3a41854ee4f0290b4b7e52ba5d43">SOFAlizerContext::vspkrpos</a></div><div class="ttdeci">VirtualSpeaker vspkrpos[64]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00109">af_sofalizer.c:109</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_acd47c5690696354015e07b26afe3de11"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#acd47c5690696354015e07b26afe3de11">SOFAlizerContext::gain_lfe</a></div><div class="ttdeci">float gain_lfe</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00073">af_sofalizer.c:73</a></div></div>
<div class="ttc" id="astruct_my_sofa_html_afcdfb332f9003313c3d0ddd110bcbc4e"><div class="ttname"><a href="struct_my_sofa.html#afcdfb332f9003313c3d0ddd110bcbc4e">MySofa::fir</a></div><div class="ttdeci">float * fir</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00052">af_sofalizer.c:52</a></div></div>
<div class="ttc" id="alibm_8h_html_a70609775e8ac20380d4382942f88c7b4"><div class="ttname"><a href="libm_8h.html#a70609775e8ac20380d4382942f88c7b4">expf</a></div><div class="ttdeci">#define expf(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00283">libm.h:283</a></div></div>
<div class="ttc" id="agroup__lavc__fft_html_ga4d8f70cf57c4f969c99af653b8a82f15"><div class="ttname"><a href="group__lavc__fft.html#ga4d8f70cf57c4f969c99af653b8a82f15">av_fft_permute</a></div><div class="ttdeci">void av_fft_permute(FFTContext *s, FFTComplex *z)</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8c_source.html#l00038">avfft.c:38</a></div></div>
<div class="ttc" id="astruct_a_v_filter_pad_html"><div class="ttname"><a href="struct_a_v_filter_pad.html">AVFilterPad</a></div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2internal_8h_source.html#l00054">internal.h:54</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a1864f98c57746e46ec1a9bf062faa4b7"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a1864f98c57746e46ec1a9bf062faa4b7">SOFAlizerContext::sofa</a></div><div class="ttdeci">MySofa sofa</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00066">af_sofalizer.c:66</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga352bec66d2e1bef67efe5b7f0a4207f3"><div class="ttname"><a href="group__channel__masks.html#ga352bec66d2e1bef67efe5b7f0a4207f3">AV_CH_TOP_FRONT_LEFT</a></div><div class="ttdeci">#define AV_CH_TOP_FRONT_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00061">channel_layout.h:61</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga3e8a7ab3d4c1ac98b902ab6b00741343"><div class="ttname"><a href="group__channel__mask__c.html#ga3e8a7ab3d4c1ac98b902ab6b00741343">av_get_channel_layout</a></div><div class="ttdeci">uint64_t av_get_channel_layout(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8c_source.html#l00145">channel_layout.c:145</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_ac0185040465931c4d1ad6079a565bb07"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#ac0185040465931c4d1ad6079a565bb07">SOFAlizerContext::lfe_channel</a></div><div class="ttdeci">int lfe_channel</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00074">af_sofalizer.c:74</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a485058692b0036c8146dc37d9f27b934"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a485058692b0036c8146dc37d9f27b934">SOFAlizerContext::speaker_elev</a></div><div class="ttdeci">float * speaker_elev</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00070">af_sofalizer.c:70</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a7f422a5d5c4f426b9955ad38a84a8503"><div class="ttname"><a href="af__sofalizer_8c.html#a7f422a5d5c4f426b9955ad38a84a8503">parse_speaker_pos</a></div><div class="ttdeci">static void parse_speaker_pos(AVFilterContext *ctx, int64_t in_channel_layout)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00222">af_sofalizer.c:222</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a7ddb0b5ac76101c5bee71e9840bf1698"><div class="ttname"><a href="af__sofalizer_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a></div><div class="ttdeci">static const AVFilterPad outputs[]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l01087">af_sofalizer.c:1087</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_acaec88db5b8420353de280927194625d"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#acaec88db5b8420353de280927194625d">SOFAlizerContext::normalize</a></div><div class="ttdeci">int normalize</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00103">af_sofalizer.c:103</a></div></div>
<div class="ttc" id="afilters_8h_html_ab82b9a98da3d2483b5b5457d5e8570fc"><div class="ttname"><a href="filters_8h.html#ab82b9a98da3d2483b5b5457d5e8570fc">FF_FILTER_FORWARD_STATUS_BACK</a></div><div class="ttdeci">#define FF_FILTER_FORWARD_STATUS_BACK(outlink, inlink)</div><div class="ttdef"><b>Definition:</b> <a href="filters_8h_source.html#l00199">filters.h:199</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga11e273c4872335063b5059cca52218c0"><div class="ttname"><a href="group__channel__masks.html#ga11e273c4872335063b5059cca52218c0">AV_CH_WIDE_LEFT</a></div><div class="ttdeci">#define AV_CH_WIDE_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00069">channel_layout.h:69</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a9feef5270e0e54f103868362df0cd27a"><div class="ttname"><a href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a></div><div class="ttdeci">sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a94422bd2b209e821e9a29ecaa7316e2c"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a94422bd2b209e821e9a29ecaa7316e2c">SOFAlizerContext::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00065">af_sofalizer.c:65</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a72f57e34b43d3117a4714df93e155772"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a72f57e34b43d3117a4714df93e155772">SOFAlizerContext::elevation</a></div><div class="ttdeci">float elevation</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00099">af_sofalizer.c:99</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga0c9137cc9fd60d15be588e2eff3cfa23"><div class="ttname"><a href="group__channel__masks.html#ga0c9137cc9fd60d15be588e2eff3cfa23">AV_CH_SURROUND_DIRECT_RIGHT</a></div><div class="ttdeci">#define AV_CH_SURROUND_DIRECT_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00072">channel_layout.h:72</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_aa2098e9907208151d600a78489a49d67"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#aa2098e9907208151d600a78489a49d67">SOFAlizerContext::buffer_length</a></div><div class="ttdeci">int buffer_length</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00082">af_sofalizer.c:82</a></div></div>
<div class="ttc" id="astruct_thread_data_html_ae8563555a7ccc47456e8a6f47982a729"><div class="ttname"><a href="struct_thread_data.html#ae8563555a7ccc47456e8a6f47982a729">ThreadData::temp_afft</a></div><div class="ttdeci">FFTComplex ** temp_afft</div><div class="ttdef"><b>Definition:</b> <a href="af__headphone_8c_source.html#l00134">af_headphone.c:134</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga2c7ff738c3481d2891d052f5bca55248"><div class="ttname"><a href="group__channel__masks.html#ga2c7ff738c3481d2891d052f5bca55248">AV_CH_WIDE_RIGHT</a></div><div class="ttdeci">#define AV_CH_WIDE_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00070">channel_layout.h:70</a></div></div>
<div class="ttc" id="astruct_thread_data_html_a6e491b6fbad4b85d2c788a03da6776d0"><div class="ttname"><a href="struct_thread_data.html#a6e491b6fbad4b85d2c788a03da6776d0">ThreadData::write</a></div><div class="ttdeci">int * write</div><div class="ttdef"><b>Definition:</b> <a href="af__headphone_8c_source.html#l00128">af_headphone.c:128</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_gaac082f244f37f9c5d8e4f7bf96cc76dc"><div class="ttname"><a href="group__channel__masks.html#gaac082f244f37f9c5d8e4f7bf96cc76dc">AV_CH_TOP_BACK_LEFT</a></div><div class="ttdeci">#define AV_CH_TOP_BACK_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00064">channel_layout.h:64</a></div></div>
<div class="ttc" id="astruct_thread_data_html_a033119a961528cc776d03d93aedb2a0a"><div class="ttname"><a href="struct_thread_data.html#a033119a961528cc776d03d93aedb2a0a">ThreadData::temp_fft</a></div><div class="ttdeci">FFTComplex ** temp_fft</div><div class="ttdef"><b>Definition:</b> <a href="af__headphone_8c_source.html#l00133">af_headphone.c:133</a></div></div>
<div class="ttc" id="astruct_my_sofa_html_ae8c304e475e23f56f36bc52492222f50"><div class="ttname"><a href="struct_my_sofa.html#ae8c304e475e23f56f36bc52492222f50">MySofa::lookup</a></div><div class="ttdeci">struct MYSOFA_LOOKUP * lookup</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00047">af_sofalizer.c:47</a></div></div>
<div class="ttc" id="aavfilter_8c_html_ac1daee38f363044775732a960441861c"><div class="ttname"><a href="avfilter_8c.html#ac1daee38f363044775732a960441861c">ff_inlink_consume_frame</a></div><div class="ttdeci">int ff_inlink_consume_frame(AVFilterLink *link, AVFrame **rframe)</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8c_source.html#l01489">avfilter.c:1489</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga439a8664c452f9782b460f61a3908451"><div class="ttname"><a href="group__channel__masks.html#ga439a8664c452f9782b460f61a3908451">AV_CH_TOP_BACK_CENTER</a></div><div class="ttdeci">#define AV_CH_TOP_BACK_CENTER</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00065">channel_layout.h:65</a></div></div>
<div class="ttc" id="astruct_my_sofa_html_a928d853feda1d2f764346e5133b5f283"><div class="ttname"><a href="struct_my_sofa.html#a928d853feda1d2f764346e5133b5f283">MySofa::hrtf</a></div><div class="ttdeci">struct MYSOFA_HRTF * hrtf</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00046">af_sofalizer.c:46</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_gaa3cae8c6d0eaab3dc3ce178f6af81ae2"><div class="ttname"><a href="group__channel__masks.html#gaa3cae8c6d0eaab3dc3ce178f6af81ae2">AV_CH_BACK_LEFT</a></div><div class="ttdeci">#define AV_CH_BACK_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00053">channel_layout.h:53</a></div></div>
<div class="ttc" id="astruct_my_sofa_html_a90e8d773b07755e74b1535649d7d1363"><div class="ttname"><a href="struct_my_sofa.html#a90e8d773b07755e74b1535649d7d1363">MySofa::max_delay</a></div><div class="ttdeci">int max_delay</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00053">af_sofalizer.c:53</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a860450fba1f740387dc082792ad89517"><div class="ttname"><a href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf type</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html"><div class="ttname"><a href="struct_s_o_f_alizer_context.html">SOFAlizerContext</a></div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00062">af_sofalizer.c:62</a></div></div>
<div class="ttc" id="astruct_virtual_speaker_html_aeac1e016c2bae2dc37232ed51722a3c8"><div class="ttname"><a href="struct_virtual_speaker.html#aeac1e016c2bae2dc37232ed51722a3c8">VirtualSpeaker::azim</a></div><div class="ttdeci">float azim</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00058">af_sofalizer.c:58</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_a59c4f558e259b7fd968f8626da9187f7"><div class="ttname"><a href="cuda__runtime_8h.html#a59c4f558e259b7fd968f8626da9187f7">fabsf</a></div><div class="ttdeci">static __device__ float fabsf(float a)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00181">cuda_runtime.h:181</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gabc6d6651bba254cd0fa2c42a57228e65"><div class="ttname"><a href="group__channel__mask__c.html#gabc6d6651bba254cd0fa2c42a57228e65">AV_CH_LAYOUT_STEREO</a></div><div class="ttdeci">#define AV_CH_LAYOUT_STEREO</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00091">channel_layout.h:91</a></div></div>
<div class="ttc" id="astruct_my_sofa_html_acc5972445bb37f366937739c7054abea"><div class="ttname"><a href="struct_my_sofa.html#acc5972445bb37f366937739c7054abea">MySofa::ir_samples</a></div><div class="ttdeci">int ir_samples</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00049">af_sofalizer.c:49</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_aa2306325728d0be085c7d4c7421ac10e"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#aa2306325728d0be085c7d4c7421ac10e">SOFAlizerContext::speaker_azim</a></div><div class="ttdeci">float * speaker_azim</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00069">af_sofalizer.c:69</a></div></div>
<div class="ttc" id="alibavcodec_2g726_8c_html_a3470b7623b99914ff31998edf1518700"><div class="ttname"><a href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a></div><div class="ttdeci">static int16_t mult(Float11 *f1, Float11 *f2)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2g726_8c_source.html#l00055">g726.c:55</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="aformats_8c_html_a3ea436a8d465066eecdfb2ff513ff504"><div class="ttname"><a href="formats_8c.html#a3ea436a8d465066eecdfb2ff513ff504">ff_set_common_formats</a></div><div class="ttdeci">int ff_set_common_formats(AVFilterContext *ctx, AVFilterFormats *formats)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00587">formats.c:587</a></div></div>
<div class="ttc" id="astruct_thread_data_html_aad17df6ac3d661f1f404b189cbc93ad4"><div class="ttname"><a href="struct_thread_data.html#aad17df6ac3d661f1f404b189cbc93ad4">ThreadData::ir</a></div><div class="ttdeci">float ** ir</div><div class="ttdef"><b>Definition:</b> <a href="af__headphone_8c_source.html#l00129">af_headphone.c:129</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_gab19b66e345cf1f9d50ffc26c28862bcc"><div class="ttname"><a href="group__channel__masks.html#gab19b66e345cf1f9d50ffc26c28862bcc">AV_CH_LOW_FREQUENCY</a></div><div class="ttdeci">#define AV_CH_LOW_FREQUENCY</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00052">channel_layout.h:52</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_ac90981e5246c3021b85940af316e5cac"><div class="ttname"><a href="af__sofalizer_8c.html#ac90981e5246c3021b85940af316e5cac">FREQUENCY_DOMAIN</a></div><div class="ttdeci">#define FREQUENCY_DOMAIN</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00043">af_sofalizer.c:43</a></div></div>
<div class="ttc" id="alzw_8c_html_a450ea4ae52aeb4ca6e2fabf02c695153"><div class="ttname"><a href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a></div><div class="ttdeci">static const uint16_t mask[17]</div><div class="ttdef"><b>Definition:</b> <a href="lzw_8c_source.html#l00038">lzw.c:38</a></div></div>
<div class="ttc" id="aformats_8c_html_a0eadfcd358eb96c358859165ace6be1a"><div class="ttname"><a href="formats_8c.html#a0eadfcd358eb96c358859165ace6be1a">ff_add_channel_layout</a></div><div class="ttdeci">int ff_add_channel_layout(AVFilterChannelLayouts **l, uint64_t channel_layout)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00338">formats.c:338</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_ae59bb66df9495df417c2632403e23aa7"><div class="ttname"><a href="libavutil_2internal_8h.html#ae59bb66df9495df417c2632403e23aa7">emms_c</a></div><div class="ttdeci">#define emms_c()</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00055">internal.h:55</a></div></div>
<div class="ttc" id="acommon_8h_html_a013fdaa079045ec5632fe121e211e516"><div class="ttname"><a href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a></div><div class="ttdeci">#define FFMAX3(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00095">common.h:95</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a473d732ec476a24b48c87753950adc41"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a473d732ec476a24b48c87753950adc41">SOFAlizerContext::n_conv</a></div><div class="ttdeci">int n_conv</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00076">af_sofalizer.c:76</a></div></div>
<div class="ttc" id="astruct_my_sofa_html_af3fda0f7e5637f2c4d5e395a43b2660b"><div class="ttname"><a href="struct_my_sofa.html#af3fda0f7e5637f2c4d5e395a43b2660b">MySofa::rir</a></div><div class="ttdeci">float * rir</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00051">af_sofalizer.c:51</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a6349dbef489cb1be3b41b8aeffdd2a21"><div class="ttname"><a href="af__sofalizer_8c.html#a6349dbef489cb1be3b41b8aeffdd2a21">config_input</a></div><div class="ttdeci">static int config_input(AVFilterLink *inlink)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00997">af_sofalizer.c:997</a></div></div>
<div class="ttc" id="astruct_f_f_t_complex_html_a1fe3a8dd90a15a477065508b9319df6a"><div class="ttname"><a href="struct_f_f_t_complex.html#a1fe3a8dd90a15a477065508b9319df6a">FFTComplex::re</a></div><div class="ttdeci">FFTSample re</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8h_source.html#l00038">avfft.h:38</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="astruct_thread_data_html_a41524d6bb577a0b62ad02a3a442e638d"><div class="ttname"><a href="struct_thread_data.html#a41524d6bb577a0b62ad02a3a442e638d">ThreadData::delay</a></div><div class="ttdeci">int ** delay</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00331">af_sofalizer.c:331</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_ad5d83100d72da0b37596f6d3d4823fcb"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#ad5d83100d72da0b37596f6d3d4823fcb">SOFAlizerContext::radstep</a></div><div class="ttdeci">float radstep</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00107">af_sofalizer.c:107</a></div></div>
<div class="ttc" id="astruct_virtual_speaker_html_a5f390f724491c500493a0fb5ff77f19c"><div class="ttname"><a href="struct_virtual_speaker.html#a5f390f724491c500493a0fb5ff77f19c">VirtualSpeaker::elev</a></div><div class="ttdeci">float elev</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00059">af_sofalizer.c:59</a></div></div>
<div class="ttc" id="agroup__lavu__string_html_ga3d4270f4ed651c414e2850090b9b77c4"><div class="ttname"><a href="group__lavu__string.html#ga3d4270f4ed651c414e2850090b9b77c4">av_strtok</a></div><div class="ttdeci">char * av_strtok(char *s, const char *delim, char **saveptr)</div><div class="ttdef"><b>Definition:</b> <a href="avstring_8c_source.html#l00186">avstring.c:186</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a8bb1fd3449e28098f4094a976b717b2b"><div class="ttname"><a href="af__sofalizer_8c.html#a8bb1fd3449e28098f4094a976b717b2b">get_speaker_pos</a></div><div class="ttdeci">static int get_speaker_pos(AVFilterContext *ctx, float *speaker_azim, float *speaker_elev)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00253">af_sofalizer.c:253</a></div></div>
<div class="ttc" id="astruct_thread_data_html_ae7402b422aac02863967d8150c0402b7"><div class="ttname"><a href="struct_thread_data.html#ae7402b422aac02863967d8150c0402b7">ThreadData::temp_src</a></div><div class="ttdeci">float ** temp_src</div><div class="ttdef"><b>Definition:</b> <a href="af__headphone_8c_source.html#l00132">af_headphone.c:132</a></div></div>
<div class="ttc" id="afilters_8h_html"><div class="ttname"><a href="filters_8h.html">filters.h</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a0fd63f315fe745311fda333cbf11eadc"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a0fd63f315fe745311fda333cbf11eadc">SOFAlizerContext::nb_samples</a></div><div class="ttdeci">int nb_samples</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00085">af_sofalizer.c:85</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a4ee6c83ac7efe62ed9014ad1d07baaac"><div class="ttname"><a href="af__sofalizer_8c.html#a4ee6c83ac7efe62ed9014ad1d07baaac">load_data</a></div><div class="ttdeci">static int load_data(AVFilterContext *ctx, int azim, int elev, float radius, int sample_rate)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00728">af_sofalizer.c:728</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_ab7cd5b404747a481115ce1d090fd11b8"><div class="ttname"><a href="af__sofalizer_8c.html#ab7cd5b404747a481115ce1d090fd11b8">init</a></div><div class="ttdeci">static av_cold int init(AVFilterContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00966">af_sofalizer.c:966</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_ae1405c22e1e64bf9d77987aae796ec11"><div class="ttname"><a href="af__sofalizer_8c.html#ae1405c22e1e64bf9d77987aae796ec11">sofalizer_fast_convolute</a></div><div class="ttdeci">static int sofalizer_fast_convolute(AVFilterContext *ctx, void *arg, int jobnr, int nb_jobs)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00440">af_sofalizer.c:440</a></div></div>
<div class="ttc" id="alibavcodec_2jacosubdec_8c_html_ac3a73711fd7f8a50db1c4b62e41cf852"><div class="ttname"><a href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a></div><div class="ttdeci">const char * arg</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2jacosubdec_8c_source.html#l00066">jacosubdec.c:66</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_gab68e7edb9182b1b22898b960707143c1"><div class="ttname"><a href="group__channel__masks.html#gab68e7edb9182b1b22898b960707143c1">AV_CH_STEREO_RIGHT</a></div><div class="ttdeci">#define AV_CH_STEREO_RIGHT</div><div class="ttdoc">See AV_CH_STEREO_LEFT.</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00068">channel_layout.h:68</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a08290553ef9c7488c5d73348f7a6531a"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a08290553ef9c7488c5d73348f7a6531a">SOFAlizerContext::radius</a></div><div class="ttdeci">float radius</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00100">af_sofalizer.c:100</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_ab5283561721ad2970de4e2d569100dac"><div class="ttname"><a href="af__sofalizer_8c.html#ab5283561721ad2970de4e2d569100dac">activate</a></div><div class="ttdeci">static int activate(AVFilterContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00617">af_sofalizer.c:617</a></div></div>
<div class="ttc" id="agroup__lavu__string_html_gaa21d05e9ef9081a5dc847cf033aad1cd"><div class="ttname"><a href="group__lavu__string.html#gaa21d05e9ef9081a5dc847cf033aad1cd">av_sscanf</a></div><div class="ttdeci">int av_sscanf(const char *string, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="avsscanf_8c_source.html#l00962">avsscanf.c:962</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga922199ce7638a651d66a423379b4c5dc"><div class="ttname"><a href="group__channel__masks.html#ga922199ce7638a651d66a423379b4c5dc">AV_CH_TOP_CENTER</a></div><div class="ttdeci">#define AV_CH_TOP_CENTER</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00060">channel_layout.h:60</a></div></div>
<div class="ttc" id="aavfilter_8c_html_a9d64bcb6dc09aebb9fa5a965bf69a3d3"><div class="ttname"><a href="avfilter_8c.html#a9d64bcb6dc09aebb9fa5a965bf69a3d3">ff_inlink_consume_samples</a></div><div class="ttdeci">int ff_inlink_consume_samples(AVFilterLink *link, unsigned min, unsigned max, AVFrame **rframe)</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8c_source.html#l01508">avfilter.c:1508</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gab9b275b114ace0db95c5796bc71f3012"><div class="ttname"><a href="group__lavu__frame.html#gab9b275b114ace0db95c5796bc71f3012">av_frame_copy_props</a></div><div class="ttdeci">int av_frame_copy_props(AVFrame *dst, const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00658">frame.c:658</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_afa314cfddbf80a7a0f8904b044db8a79"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#afa314cfddbf80a7a0f8904b044db8a79">SOFAlizerContext::fdsp</a></div><div class="ttdeci">AVFloatDSPContext * fdsp</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00114">af_sofalizer.c:114</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a0594b13219ff0e3e0024a5c029a35ffd"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a0594b13219ff0e3e0024a5c029a35ffd">SOFAlizerContext::ringbuffer</a></div><div class="ttdeci">float * ringbuffer[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00079">af_sofalizer.c:79</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a688d68811f24228f8e4f09d50c8bd3de"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a688d68811f24228f8e4f09d50c8bd3de">SOFAlizerContext::fft</a></div><div class="ttdeci">FFTContext * fft[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00111">af_sofalizer.c:111</a></div></div>
<div class="ttc" id="aavfft_8h_html"><div class="ttname"><a href="avfft_8h.html">avfft.h</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a49905674f7b5f205c1c71a6e4be62a61"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a49905674f7b5f205c1c71a6e4be62a61">SOFAlizerContext::ifft</a></div><div class="ttdeci">FFTContext * ifft[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00111">af_sofalizer.c:111</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga88f2868b232a89fd11ad9d6c39d502a1"><div class="ttname"><a href="group__channel__masks.html#ga88f2868b232a89fd11ad9d6c39d502a1">AV_CH_FRONT_CENTER</a></div><div class="ttdeci">#define AV_CH_FRONT_CENTER</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00051">channel_layout.h:51</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a9056c701b381ba84a4cebc5eb7c9d5b9"><div class="ttname"><a href="af__sofalizer_8c.html#a9056c701b381ba84a4cebc5eb7c9d5b9">filter_frame</a></div><div class="ttdeci">static int filter_frame(AVFilterLink *inlink, AVFrame *in)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00578">af_sofalizer.c:578</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a3d5853cd05e6da119e45112658be604f"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a3d5853cd05e6da119e45112658be604f">SOFAlizerContext::temp_src</a></div><div class="ttdeci">float * temp_src[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00092">af_sofalizer.c:92</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga6c9ea2ea60044bfe844174300b237386"><div class="ttname"><a href="group__channel__masks.html#ga6c9ea2ea60044bfe844174300b237386">AV_CH_FRONT_LEFT_OF_CENTER</a></div><div class="ttdeci">#define AV_CH_FRONT_LEFT_OF_CENTER</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00055">channel_layout.h:55</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="afloat__dsp_8h_html"><div class="ttname"><a href="float__dsp_8h.html">float_dsp.h</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a6e04c7ed634034f9b8c1fec9d362ce44"><div class="ttname"><a href="af__sofalizer_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44">inputs</a></div><div class="ttdeci">static const AVFilterPad inputs[]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l01078">af_sofalizer.c:1078</a></div></div>
<div class="ttc" id="astruct_a_v_filter_pad_html_afc112061a6035639934e0135aab7d425"><div class="ttname"><a href="struct_a_v_filter_pad.html#afc112061a6035639934e0135aab7d425">AVFilterPad::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2internal_8h_source.html#l00060">internal.h:60</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_ad22c7e33ef7de4e011ddbf933e7e3c88"><div class="ttname"><a href="af__sofalizer_8c.html#ad22c7e33ef7de4e011ddbf933e7e3c88">VirtualSpeaker</a></div><div class="ttdeci">struct VirtualSpeaker VirtualSpeaker</div></div>
<div class="ttc" id="astruct_f_f_t_context_html"><div class="ttname"><a href="struct_f_f_t_context.html">FFTContext</a></div><div class="ttdef"><b>Definition:</b> <a href="fft_8h_source.html#l00088">fft.h:88</a></div></div>
<div class="ttc" id="astruct_f_f_t_complex_html_a69b2491bd684836a7a9350dcbdbb886b"><div class="ttname"><a href="struct_f_f_t_complex.html#a69b2491bd684836a7a9350dcbdbb886b">FFTComplex::im</a></div><div class="ttdeci">FFTSample im</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8h_source.html#l00038">avfft.h:38</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="astruct_my_sofa_html_a8cceb334987b308750a2117266e5e6cd"><div class="ttname"><a href="struct_my_sofa.html#a8cceb334987b308750a2117266e5e6cd">MySofa::neighborhood</a></div><div class="ttdeci">struct MYSOFA_NEIGHBORHOOD * neighborhood</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00048">af_sofalizer.c:48</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912">AV_SAMPLE_FMT_NONE</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00059">samplefmt.h:59</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a32aaaf2bf3a1f57a1e7950922dcaf6a0"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a32aaaf2bf3a1f57a1e7950922dcaf6a0">SOFAlizerContext::delay</a></div><div class="ttdeci">int * delay[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00088">af_sofalizer.c:88</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_ab43eb396b3f00da1eb23a443e4063442"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#ab43eb396b3f00da1eb23a443e4063442">SOFAlizerContext::temp_fft</a></div><div class="ttdeci">FFTComplex * temp_fft[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00093">af_sofalizer.c:93</a></div></div>
<div class="ttc" id="astruct_a_v_float_d_s_p_context_html"><div class="ttname"><a href="struct_a_v_float_d_s_p_context.html">AVFloatDSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="float__dsp_8h_source.html#l00024">float_dsp.h:24</a></div></div>
<div class="ttc" id="astruct_thread_data_html"><div class="ttname"><a href="struct_thread_data.html">ThreadData</a></div><div class="ttdef"><b>Definition:</b> <a href="dsddec_8c_source.html#l00067">dsddec.c:67</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a5b4e302dfe4b2ee5369f0278621acd5f"><div class="ttname"><a href="af__sofalizer_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a></div><div class="ttdeci">static int query_formats(AVFilterContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00642">af_sofalizer.c:642</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="af__sofalizer_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l01053">af_sofalizer.c:1053</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adcd13caad2025930d784c1fb557e5cb2"><div class="ttname"><a href="filter__design_8txt.html#adcd13caad2025930d784c1fb557e5cb2">FF_FILTER_FORWARD_WANTED</a></div><div class="ttdeci">FF_FILTER_FORWARD_WANTED(outlink, inlink)</div></div>
<div class="ttc" id="agroup__channel__masks_html_ga8fa88c3c74339f4218a3e70286fdbdaa"><div class="ttname"><a href="group__channel__masks.html#ga8fa88c3c74339f4218a3e70286fdbdaa">AV_CH_TOP_BACK_RIGHT</a></div><div class="ttdeci">#define AV_CH_TOP_BACK_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00066">channel_layout.h:66</a></div></div>
<div class="ttc" id="astruct_my_sofa_html_a04c2a305a5bb72d339c94a26f6fe50ef"><div class="ttname"><a href="struct_my_sofa.html#a04c2a305a5bb72d339c94a26f6fe50ef">MySofa::n_samples</a></div><div class="ttdeci">int n_samples</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00050">af_sofalizer.c:50</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga558dc25b0ce327d2547d3cc9e4bd6a4e"><div class="ttname"><a href="group__channel__masks.html#ga558dc25b0ce327d2547d3cc9e4bd6a4e">AV_CH_FRONT_RIGHT_OF_CENTER</a></div><div class="ttdeci">#define AV_CH_FRONT_RIGHT_OF_CENTER</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00056">channel_layout.h:56</a></div></div>
<div class="ttc" id="aformats_8c_html_a5a4f52dd68781b777dabe9a99d2c40d3"><div class="ttname"><a href="formats_8c.html#a5a4f52dd68781b777dabe9a99d2c40d3">ff_all_channel_layouts</a></div><div class="ttdeci">AVFilterChannelLayouts * ff_all_channel_layouts(void)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00427">formats.c:427</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a022820a123ed4bed9ba0ccc991027111"><div class="ttname"><a href="af__sofalizer_8c.html#a022820a123ed4bed9ba0ccc991027111">preload_sofa</a></div><div class="ttdeci">static int preload_sofa(AVFilterContext *ctx, char *filename, int *samplingrate)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00133">af_sofalizer.c:133</a></div></div>
<div class="ttc" id="atwinvq_8c_html_ab0bd3e2f6305dfc9119c47f412993f92"><div class="ttname"><a href="twinvq_8c.html#ab0bd3e2f6305dfc9119c47f412993f92">interpolate</a></div><div class="ttdeci">static void interpolate(float *out, float v1, float v2, int size)</div><div class="ttdef"><b>Definition:</b> <a href="twinvq_8c_source.html#l00084">twinvq.c:84</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_ae554c64fb26bb36f9c696ab293549212"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#ae554c64fb26bb36f9c696ab293549212">SOFAlizerContext::framesize</a></div><div class="ttdeci">int framesize</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00102">af_sofalizer.c:102</a></div></div>
<div class="ttc" id="aintmath_8h_html_a2998e3360a5d1a5763e8c1008b7b2e1d"><div class="ttname"><a href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a></div><div class="ttdeci">#define av_log2</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00083">intmath.h:83</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a12ee30995b3ac94a573f01870d1289e8"><div class="ttname"><a href="ffmpeg__filter_8c.html#a12ee30995b3ac94a573f01870d1289e8">sample_rates</a></div><div class="ttdeci">sample_rates</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a></div><div class="ttdeci">@ AV_OPT_TYPE_FLOAT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00228">opt.h:228</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a669858250c93520fd944ba5d6eb1884d"><div class="ttname"><a href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel layout</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00018">filter_design.txt:18</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_ac3e4bcf316b6cfd8c6f18f0e756c2109"><div class="ttname"><a href="af__sofalizer_8c.html#ac3e4bcf316b6cfd8c6f18f0e756c2109">getfilter_float</a></div><div class="ttdeci">static int getfilter_float(AVFilterContext *ctx, float x, float y, float z, float *left, float *right, float *delay_left, float *delay_right)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00684">af_sofalizer.c:684</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ab92ad91055387e15b43ff5f6f60f2895"><div class="ttname"><a href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16, int16_t,(*(const int16_t *) pi &gt;&gt; 8)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32, int32_t,(*(const int32_t *) pi &gt;&gt; 24)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, float, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, float, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, float, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, double, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, double, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, double, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) #define SET_CONV_FUNC_GROUP(ofmt, ifmt) static void set_generic_function(AudioConvert *ac) { } void ff_audio_convert_free(AudioConvert **ac) { if(! *ac) return;ff_dither_free(&amp;(*ac) -&gt;dc);av_freep(ac);} AudioConvert *ff_audio_convert_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map) { AudioConvert *ac;int in_planar, out_planar;ac=av_mallocz(sizeof(*ac));if(!ac) return NULL;ac-&gt;avr=avr;ac-&gt;out_fmt=out_fmt;ac-&gt;in_fmt=in_fmt;ac-&gt;channels=channels;ac-&gt;apply_map=apply_map;if(avr-&gt;dither_method !=AV_RESAMPLE_DITHER_NONE &amp;&amp;av_get_packed_sample_fmt(out_fmt)==AV_SAMPLE_FMT_S16 &amp;&amp;av_get_bytes_per_sample(in_fmt) &gt; 2) { ac-&gt;dc=ff_dither_alloc(avr, out_fmt, in_fmt, channels, sample_rate, apply_map);if(!ac-&gt;dc) { av_free(ac);return NULL;} return ac;} in_planar=ff_sample_fmt_is_planar(in_fmt, channels);out_planar=ff_sample_fmt_is_planar(out_fmt, channels);if(in_planar==out_planar) { ac-&gt;func_type=CONV_FUNC_TYPE_FLAT;ac-&gt;planes=in_planar ? ac-&gt;channels :1;} else if(in_planar) ac-&gt;func_type=CONV_FUNC_TYPE_INTERLEAVE;else ac-&gt;func_type=CONV_FUNC_TYPE_DEINTERLEAVE;set_generic_function(ac);if(ARCH_AARCH64) ff_audio_convert_init_aarch64(ac);if(ARCH_ARM) ff_audio_convert_init_arm(ac);if(ARCH_X86) ff_audio_convert_init_x86(ac);return ac;} int ff_audio_convert(AudioConvert *ac, AudioData *out, AudioData *in) { int use_generic=1;int len=in-&gt;nb_samples;int p;if(ac-&gt;dc) { av_log(ac-&gt;avr, AV_LOG_TRACE, &quot;%d samples - audio_convert: %s to %s (dithered)\n&quot;, len, av_get_sample_fmt_name(ac-&gt;in_fmt), av_get_sample_fmt_name(ac-&gt;out_fmt));return ff_convert_dither(ac-&gt; in</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00326">audio_convert.c:326</a></div></div>
<div class="ttc" id="anamespacenormalize_html"><div class="ttname"><a href="namespacenormalize.html">normalize</a></div><div class="ttdef"><b>Definition:</b> <a href="normalize_8py_source.html#l00001">normalize.py:1</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a6b18fd9a738389496255620eda76104a"><div class="ttname"><a href="af__sofalizer_8c.html#a6b18fd9a738389496255620eda76104a">ff_af_sofalizer</a></div><div class="ttdeci">AVFilter ff_af_sofalizer</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l01095">af_sofalizer.c:1095</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a6ccad09b4a2a06ae178418fdccf5940d"><div class="ttname"><a href="af__sofalizer_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a></div><div class="ttdeci">#define FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l01054">af_sofalizer.c:1054</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a726b48c5e201630230a15b76b9abe28f"><div class="ttname"><a href="af__sofalizer_8c.html#a726b48c5e201630230a15b76b9abe28f">sofalizer_options</a></div><div class="ttdeci">static const AVOption sofalizer_options[]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l01056">af_sofalizer.c:1056</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_gaf9a51ca15301871723577c730b5865c5"><div class="ttname"><a href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a></div><div class="ttdeci">AVSampleFormat</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00058">samplefmt.h:58</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga68650a364e52edb62d5984dddec4f935"><div class="ttname"><a href="group__channel__masks.html#ga68650a364e52edb62d5984dddec4f935">AV_CH_BACK_CENTER</a></div><div class="ttdeci">#define AV_CH_BACK_CENTER</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00057">channel_layout.h:57</a></div></div>
<div class="ttc" id="astruct_my_sofa_html"><div class="ttname"><a href="struct_my_sofa.html">MySofa</a></div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00045">af_sofalizer.c:45</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_gaf9c5619f74c99ea8a8606719c01fe7df"><div class="ttname"><a href="group__channel__masks.html#gaf9c5619f74c99ea8a8606719c01fe7df">AV_CH_FRONT_LEFT</a></div><div class="ttdeci">#define AV_CH_FRONT_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00049">channel_layout.h:49</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="astruct_a_v_filter_formats_html"><div class="ttname"><a href="struct_a_v_filter_formats.html">AVFilterFormats</a></div><div class="ttdef"><b>Definition:</b> <a href="formats_8h_source.html#l00065">formats.h:65</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a915c75803151c00a4ce0da7a090be4c4"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a915c75803151c00a4ce0da7a090be4c4">SOFAlizerContext::n_fft</a></div><div class="ttdeci">int n_fft</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00084">af_sofalizer.c:84</a></div></div>
<div class="ttc" id="astruct_a_v_filter_channel_layouts_html"><div class="ttname"><a href="struct_a_v_filter_channel_layouts.html">AVFilterChannelLayouts</a></div><div class="ttdef"><b>Definition:</b> <a href="formats_8h_source.html#l00086">formats.h:86</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga947b60ab70c428ebb07c8b9c87023b39"><div class="ttname"><a href="group__channel__masks.html#ga947b60ab70c428ebb07c8b9c87023b39">AV_CH_SIDE_RIGHT</a></div><div class="ttdeci">#define AV_CH_SIDE_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00059">channel_layout.h:59</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_ac896e7b21204871b876430608d4f0950"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#ac896e7b21204871b876430608d4f0950">SOFAlizerContext::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00068">af_sofalizer.c:68</a></div></div>
<div class="ttc" id="astruct_thread_data_html_a049d54985d662b8ed9e3180663ac527a"><div class="ttname"><a href="struct_thread_data.html#a049d54985d662b8ed9e3180663ac527a">ThreadData::n_clippings</a></div><div class="ttdeci">int * n_clippings</div><div class="ttdef"><b>Definition:</b> <a href="af__headphone_8c_source.html#l00130">af_headphone.c:130</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="astruct_f_f_t_complex_html"><div class="ttname"><a href="struct_f_f_t_complex.html">FFTComplex</a></div><div class="ttdef"><b>Definition:</b> <a href="avfft_8h_source.html#l00037">avfft.h:37</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a4b2377b49527bd3afc0fa5a693d7efc9"><div class="ttname"><a href="af__sofalizer_8c.html#a4b2377b49527bd3afc0fa5a693d7efc9">SOFAlizerContext</a></div><div class="ttdeci">struct SOFAlizerContext SOFAlizerContext</div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_af13276b4650c7b986cce8814936af2bd"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#af13276b4650c7b986cce8814936af2bd">SOFAlizerContext::rotation</a></div><div class="ttdeci">float rotation</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00098">af_sofalizer.c:98</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_abbead6cde1da3e72ce200578c426f1e6"><div class="ttname"><a href="af__sofalizer_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a></div><div class="ttdeci">static av_cold void uninit(AVFilterContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l01021">af_sofalizer.c:1021</a></div></div>
<div class="ttc" id="asnow_8txt_html_a7c18a837a38b8c96472a1d0abe1711d1"><div class="ttname"><a href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a></div><div class="ttdeci">Tag MUST be and&lt; 10hcoeff half pel interpolation filter coefficients, hcoeff[0] are the 2 middle coefficients[1] are the next outer ones and so on, resulting in a filter like:...eff[2], hcoeff[1], hcoeff[0], hcoeff[0], hcoeff[1], hcoeff[2] ... the sign of the coefficients is not explicitly stored but alternates after each coeff and coeff[0] is positive, so ...,+,-,+,-,+,+,-,+,-,+,... hcoeff[0] is not explicitly stored but found by subtracting the sum of all stored coefficients with signs from 32 hcoeff[0]=32 - hcoeff[1] - hcoeff[2] - ... a good choice for hcoeff and htaps is htaps=6 hcoeff={40,-10, 2} an alternative which requires more computations at both encoder and decoder side and may or may not be better is htaps=8 hcoeff={42,-14, 6,-2}ref_frames minimum of the number of available reference frames and max_ref_frames for example the first frame after a key frame always has ref_frames=1spatial_decomposition_type wavelet type 0 is a 9/7 symmetric compact integer wavelet 1 is a 5/3 symmetric compact integer wavelet others are reserved stored as delta from last, last is reset to 0 if always_reset||keyframeqlog quality(logarithmic quantizer scale) stored as delta from last, last is reset to 0 if always_reset||keyframemv_scale stored as delta from last, last is reset to 0 if always_reset||keyframe FIXME check that everything works fine if this changes between framesqbias dequantization bias stored as delta from last, last is reset to 0 if always_reset||keyframeblock_max_depth maximum depth of the block tree stored as delta from last, last is reset to 0 if always_reset||keyframequant_table quantization tableHighlevel bitstream structure:==============================--------------------------------------------|Header|--------------------------------------------|------------------------------------|||Block0||||split?||||yes no||||......... intra?||||:Block01 :yes no||||:Block02 :....... ..........||||:Block03 ::y DC ::ref index:||||:Block04 ::cb DC ::motion x :||||......... :cr DC ::motion y :||||....... ..........|||------------------------------------||------------------------------------|||Block1|||...|--------------------------------------------|------------ ------------ ------------|||Y subbands||Cb subbands||Cr subbands||||--- ---||--- ---||--- ---|||||LL0||HL0||||LL0||HL0||||LL0||HL0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||LH0||HH0||||LH0||HH0||||LH0||HH0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HL1||LH1||||HL1||LH1||||HL1||LH1|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HH1||HL2||||HH1||HL2||||HH1||HL2|||||...||...||...|||------------ ------------ ------------|--------------------------------------------Decoding process:=================------------|||Subbands|------------||||------------|Intra DC||||LL0 subband prediction ------------|\ Dequantization ------------------- \||Reference frames|\ IDWT|------- -------|Motion \|||Frame 0||Frame 1||Compensation . OBMC v -------|------- -------|--------------. \------&gt; Frame n output Frame Frame&lt;----------------------------------/|...|------------------- Range Coder:============Binary Range Coder:------------------- The implemented range coder is an adapted version based upon &quot;Range encoding: an algorithm for removing redundancy from a digitised message.&quot; by G. N. N. Martin. The symbols encoded by the Snow range coder are bits(0|1). The associated probabilities are not fix but change depending on the symbol mix seen so far. bit seen|new state ---------+----------------------------------------------- 0|256 - state_transition_table[256 - old_state];1|state_transition_table[old_state];state_transition_table={ 0, 0, 0, 0, 0, 0, 0, 0, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 190, 191, 192, 194, 194, 195, 196, 197, 198, 199, 200, 201, 202, 202, 204, 205, 206, 207, 208, 209, 209, 210, 211, 212, 213, 215, 215, 216, 217, 218, 219, 220, 220, 222, 223, 224, 225, 226, 227, 227, 229, 229, 230, 231, 232, 234, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 248, 0, 0, 0, 0, 0, 0, 0};FIXME Range Coding of integers:------------------------- FIXME Neighboring Blocks:===================left and top are set to the respective blocks unless they are outside of the image in which case they are set to the Null block top-left is set to the top left block unless it is outside of the image in which case it is set to the left block if this block has no larger parent block or it is at the left side of its parent block and the top right block is not outside of the image then the top right block is used for top-right else the top-left block is used Null block y, cb, cr are 128 level, ref, mx and my are 0 Motion Vector Prediction:=========================1. the motion vectors of all the neighboring blocks are scaled to compensate for the difference of reference frames scaled_mv=(mv *(256 *(current_reference+1)/(mv.reference+1))+128)&gt; the median of the scaled left</div><div class="ttdef"><b>Definition:</b> <a href="snow_8txt_source.html#l00386">snow.txt:386</a></div></div>
<div class="ttc" id="agroup__lavc__fft_html_ga6c6b88ddaa9aee5b0ec4e2d09a78e286"><div class="ttname"><a href="group__lavc__fft.html#ga6c6b88ddaa9aee5b0ec4e2d09a78e286">av_fft_init</a></div><div class="ttdeci">FFTContext * av_fft_init(int nbits, int inverse)</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8c_source.html#l00028">avfft.c:28</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a817c53379f799c3c31ae2edd2ffa680c"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a817c53379f799c3c31ae2edd2ffa680c">SOFAlizerContext::gain</a></div><div class="ttdeci">float gain</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00097">af_sofalizer.c:97</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_ab5d54ba0de0a4ce12e5ff2a07993c192"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#ab5d54ba0de0a4ce12e5ff2a07993c192">SOFAlizerContext::data_ir</a></div><div class="ttdeci">float * data_ir[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00090">af_sofalizer.c:90</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a6610ac891903ad9dfbcac48cd3a3eb46"><div class="ttname"><a href="af__sofalizer_8c.html#a6610ac891903ad9dfbcac48cd3a3eb46">sofalizer_convolute</a></div><div class="ttdeci">static int sofalizer_convolute(AVFilterContext *ctx, void *arg, int jobnr, int nb_jobs)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00340">af_sofalizer.c:340</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaaf38f6d994f5a85854ef47fd98fa6e9a"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a></div><div class="ttdeci">void * av_calloc(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00245">mem.c:245</a></div></div>
<div class="ttc" id="achannel__layout_8h_html"><div class="ttname"><a href="channel__layout_8h.html">channel_layout.h</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a0c5aa8060a24f28bb0d7462e73806955"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a0c5aa8060a24f28bb0d7462e73806955">SOFAlizerContext::temp_afft</a></div><div class="ttdeci">FFTComplex * temp_afft[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00094">af_sofalizer.c:94</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ab5bf43ceeffd5c440d539ae2ed025827"><div class="ttname"><a href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a></div><div class="ttdeci">the frame and frame reference mechanism is intended to as much as expensive copies of that data while still allowing the filters to produce correct results The data is stored in buffers represented by AVFrame structures Several references can point to the same frame buffer</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00049">filter_design.txt:49</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a></div><div class="ttdeci">@ AV_OPT_TYPE_INT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00225">opt.h:225</a></div></div>
<div class="ttc" id="aavfilter_8h_html"><div class="ttname"><a href="avfilter_8h.html">avfilter.h</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a8a8bec51da36db65ff864f88a85805d9"><div class="ttname"><a href="struct_a_v_format_context.html#a8a8bec51da36db65ff864f88a85805d9">AVFormatContext::internal</a></div><div class="ttdeci">AVFormatInternal * internal</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01688">avformat.h:1688</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a7fd68ca82aded88c64252e03439134ac"><div class="ttname"><a href="af__sofalizer_8c.html#a7fd68ca82aded88c64252e03439134ac">MySofa</a></div><div class="ttdeci">struct MySofa MySofa</div></div>
<div class="ttc" id="agroup__channel__masks_html_gafc04912a8294d8788e4162092df8a549"><div class="ttname"><a href="group__channel__masks.html#gafc04912a8294d8788e4162092df8a549">AV_CH_SURROUND_DIRECT_LEFT</a></div><div class="ttdeci">#define AV_CH_SURROUND_DIRECT_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00071">channel_layout.h:71</a></div></div>
<div class="ttc" id="astruct_thread_data_html_af71d602c7438d1e94134ac868fe7f15c"><div class="ttname"><a href="struct_thread_data.html#af71d602c7438d1e94134ac868fe7f15c">ThreadData::ringbuffer</a></div><div class="ttdeci">float ** ringbuffer</div><div class="ttdef"><b>Definition:</b> <a href="af__headphone_8c_source.html#l00131">af_headphone.c:131</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga394b4b2c87790178bf7b683b45320f31"><div class="ttname"><a href="group__channel__masks.html#ga394b4b2c87790178bf7b683b45320f31">AV_CH_FRONT_RIGHT</a></div><div class="ttdeci">#define AV_CH_FRONT_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00050">channel_layout.h:50</a></div></div>
<div class="ttc" id="agroup__lavfi_html_gacad757479a5b22c367dd37408a9844fd"><div class="ttname"><a href="group__lavfi.html#gacad757479a5b22c367dd37408a9844fd">AVFILTER_FLAG_SLICE_THREADS</a></div><div class="ttdeci">#define AVFILTER_FLAG_SLICE_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00117">avfilter.h:117</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga7c352f4cff02184f005323691375fea9"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga7c352f4cff02184f005323691375fea9">av_strdup</a></div><div class="ttdeci">char * av_strdup(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00253">mem.c:253</a></div></div>
<div class="ttc" id="astruct_my_sofa_html_a3ae6e1f35f0e0facfc1edd2167db7005"><div class="ttname"><a href="struct_my_sofa.html#a3ae6e1f35f0e0facfc1edd2167db7005">MySofa::lir</a></div><div class="ttdeci">float * lir</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00051">af_sofalizer.c:51</a></div></div>
<div class="ttc" id="aaudio_8h_html"><div class="ttname"><a href="audio_8h.html">audio.h</a></div></div>
<div class="ttc" id="astruct_a_v_filter_html"><div class="ttname"><a href="struct_a_v_filter.html">AVFilter</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00145">avfilter.h:145</a></div></div>
<div class="ttc" id="amathematics_8h_html_a0a53871497a155afe91424c28a8ec3c4"><div class="ttname"><a href="mathematics_8h.html#a0a53871497a155afe91424c28a8ec3c4">M_LN10</a></div><div class="ttdeci">#define M_LN10</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00043">mathematics.h:43</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a5bdf26b1469f11f92820a2738a80cc3f"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a5bdf26b1469f11f92820a2738a80cc3f">SOFAlizerContext::anglestep</a></div><div class="ttdeci">float anglestep</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00106">af_sofalizer.c:106</a></div></div>
<div class="ttc" id="astruct_thread_data_html_a5a5c35227a1a4d507f043d9b3ac3b18a"><div class="ttname"><a href="struct_thread_data.html#a5a5c35227a1a4d507f043d9b3ac3b18a">ThreadData::out</a></div><div class="ttdeci">AVFrame * out</div><div class="ttdef"><b>Definition:</b> <a href="af__adeclick_8c_source.html#l00494">af_adeclick.c:494</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a079eab092887563f2bef9106c6120089"><div class="ttname"><a href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a></div><div class="ttdeci">#define av_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00034">tableprint_vlc.h:34</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a45a58a99bf64b4d10789dfa6ae9639d0"><div class="ttname"><a href="filter__design_8txt.html#a45a58a99bf64b4d10789dfa6ae9639d0">FF_FILTER_FORWARD_STATUS</a></div><div class="ttdeci">FF_FILTER_FORWARD_STATUS(inlink, outlink)</div></div>
<div class="ttc" id="amacros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a></div><div class="ttdeci">@ AV_OPT_TYPE_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00242">opt.h:242</a></div></div>
<div class="ttc" id="astruct_virtual_speaker_html"><div class="ttname"><a href="struct_virtual_speaker.html">VirtualSpeaker</a></div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00056">af_sofalizer.c:56</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="alibavutil_2float__dsp_8c_html_abf4186be59dc9de8cda94ee7beacaf67"><div class="ttname"><a href="libavutil_2float__dsp_8c.html#abf4186be59dc9de8cda94ee7beacaf67">avpriv_float_dsp_alloc</a></div><div class="ttdeci">av_cold AVFloatDSPContext * avpriv_float_dsp_alloc(int bit_exact)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2float__dsp_8c_source.html#l00135">float_dsp.c:135</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_ae97b8822f57c786de8c154e2c80a663e"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#ae97b8822f57c786de8c154e2c80a663e">SOFAlizerContext::data_hrtf</a></div><div class="ttdeci">FFTComplex * data_hrtf[2]</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00112">af_sofalizer.c:112</a></div></div>
<div class="ttc" id="aformats_8c_html_a9176f293cccfe4e4c3539b2bfbda480b"><div class="ttname"><a href="formats_8c.html#a9176f293cccfe4e4c3539b2bfbda480b">ff_set_common_samplerates</a></div><div class="ttdeci">int ff_set_common_samplerates(AVFilterContext *ctx, AVFilterFormats *samplerates)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00575">formats.c:575</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga7a7ab3bb418bf9672dcdf6554346e5eb"><div class="ttname"><a href="group__channel__masks.html#ga7a7ab3bb418bf9672dcdf6554346e5eb">AV_CH_BACK_RIGHT</a></div><div class="ttdeci">#define AV_CH_BACK_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00054">channel_layout.h:54</a></div></div>
<div class="ttc" id="astruct_a_v_filter_html_a28a4776f344f91055f42a4c2a1b15c0c"><div class="ttname"><a href="struct_a_v_filter.html#a28a4776f344f91055f42a4c2a1b15c0c">AVFilter::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00149">avfilter.h:149</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_gaea8f62dcaa4774307a8fa9b52172c688"><div class="ttname"><a href="group__channel__masks.html#gaea8f62dcaa4774307a8fa9b52172c688">AV_CH_STEREO_LEFT</a></div><div class="ttdeci">#define AV_CH_STEREO_LEFT</div><div class="ttdoc">Stereo downmix.</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00067">channel_layout.h:67</a></div></div>
<div class="ttc" id="aavstring_8h_html"><div class="ttname"><a href="avstring_8h.html">avstring.h</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a></div><div class="ttdeci">@ AV_OPT_TYPE_STRING</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00229">opt.h:229</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a5d1975e203ce6f822538d556409ccf6a"><div class="ttname"><a href="af__sofalizer_8c.html#a5d1975e203ce6f822538d556409ccf6a">ThreadData</a></div><div class="ttdeci">struct ThreadData ThreadData</div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="aaudioconvert_8c_html_a004d49561226c4c0d9a2ee7f52a5209e"><div class="ttname"><a href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_U8,(uint64_t)((*(const uint8_t *) pi - 0x80U))&lt;&lt; 56) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16,(*(const int16_t *) pi &gt;&gt;8)+0x80) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1&lt;&lt; 16)) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S16,(uint64_t)(*(const int16_t *) pi)&lt;&lt; 48) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32,(*(const int32_t *) pi &gt;&gt;24)+0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S32,(uint64_t)(*(const int32_t *) pi)&lt;&lt; 32) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S64,(*(const int64_t *) pi &gt;&gt;56)+0x80) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S64, *(const int64_t *) pi *(1.0f/(UINT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S64, *(const int64_t *) pi *(1.0/(UINT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_FLT, llrintf(*(const float *) pi *(UINT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_DBL, llrint(*(const double *) pi *(UINT64_C(1)&lt;&lt; 63))) #define FMT_PAIR_FUNC(out, in) static conv_func_type *const fmt_pair_to_conv_functions[AV_SAMPLE_FMT_NB *AV_SAMPLE_FMT_NB]={ FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S64), };static void cpy1(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, len);} static void cpy2(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 2 *len);} static void cpy4(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 4 *len);} static void cpy8(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 8 *len);} AudioConvert *swri_audio_convert_alloc(enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, const int *ch_map, int flags) { AudioConvert *ctx;conv_func_type *f=fmt_pair_to_conv_functions[av_get_packed_sample_fmt(out_fmt)+AV_SAMPLE_FMT_NB *av_get_packed_sample_fmt(in_fmt)];if(!f) return NULL;ctx=av_mallocz(sizeof(*ctx));if(!ctx) return NULL;if(channels==1){ in_fmt=av_get_planar_sample_fmt(in_fmt);out_fmt=av_get_planar_sample_fmt(out_fmt);} ctx-&gt;channels=channels;ctx-&gt;conv_f=f;ctx-&gt;ch_map=ch_map;if(in_fmt==AV_SAMPLE_FMT_U8||in_fmt==AV_SAMPLE_FMT_U8P) memset(ctx-&gt;silence, 0x80, sizeof(ctx-&gt;silence));if(out_fmt==in_fmt &amp;&amp;!ch_map) { switch(av_get_bytes_per_sample(in_fmt)){ case 1:ctx-&gt;simd_f=cpy1;break;case 2:ctx-&gt;simd_f=cpy2;break;case 4:ctx-&gt;simd_f=cpy4;break;case 8:ctx-&gt;simd_f=cpy8;break;} } if(HAVE_X86ASM &amp;&amp;HAVE_MMX) swri_audio_convert_init_x86(ctx, out_fmt, in_fmt, channels);if(ARCH_ARM) swri_audio_convert_init_arm(ctx, out_fmt, in_fmt, channels);if(ARCH_AARCH64) swri_audio_convert_init_aarch64(ctx, out_fmt, in_fmt, channels);return ctx;} void swri_audio_convert_free(AudioConvert **ctx) { av_freep(ctx);} int swri_audio_convert(AudioConvert *ctx, AudioData *out, AudioData *in, int len) { int ch;int off=0;const int os=(out-&gt;planar ? 1 :out-&gt;ch_count) *out-&gt;bps;unsigned misaligned=0;av_assert0(ctx-&gt;channels==out-&gt;ch_count);if(ctx-&gt;in_simd_align_mask) { int planes=in-&gt;planar ? in-&gt;ch_count :1;unsigned m=0;for(ch=0;ch&lt; planes;ch++) m|=(intptr_t) in-&gt;ch[ch];misaligned|=m &amp;ctx-&gt;in_simd_align_mask;} if(ctx-&gt;out_simd_align_mask) { int planes=out-&gt;planar ? out-&gt;ch_count :1;unsigned m=0;for(ch=0;ch&lt; planes;ch++) m|=(intptr_t) out-&gt;ch[ch];misaligned|=m &amp;ctx-&gt;out_simd_align_mask;} if(ctx-&gt;simd_f &amp;&amp;!ctx-&gt;ch_map &amp;&amp;!misaligned){ off=len &amp;~15;av_assert1(off &gt;=0);av_assert1(off&lt;=len);av_assert2(ctx-&gt;channels==SWR_CH_MAX||!in-&gt;ch[ctx-&gt;channels]);if(off &gt;0){ if(out-&gt;planar==in-&gt;planar){ int planes=out-&gt;planar ? out-&gt;ch_count :1;for(ch=0;ch&lt; planes;ch++){ ctx-&gt;simd_f(out-&gt;ch+ch,(const uint8_t **) in-&gt;ch+ch, off *(out-&gt; planar</div><div class="ttdef"><b>Definition:</b> <a href="audioconvert_8c_source.html#l00226">audioconvert.c:56</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a></div><div class="ttdeci">@ AV_OPT_TYPE_CONST</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00234">opt.h:234</a></div></div>
<div class="ttc" id="agroup__lavc__fft_html_ga4fe79338f98704178512503f87a4af4c"><div class="ttname"><a href="group__lavc__fft.html#ga4fe79338f98704178512503f87a4af4c">av_fft_calc</a></div><div class="ttdeci">void av_fft_calc(FFTContext *s, FFTComplex *z)</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8c_source.html#l00043">avfft.c:43</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a1dd5d660b9d2b8db1489db2487fee41d"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a1dd5d660b9d2b8db1489db2487fee41d">SOFAlizerContext::type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00101">af_sofalizer.c:101</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_FLT</div><div class="ttdoc">float</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00063">samplefmt.h:63</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_adcc7fee938c249cf1eaafaf568f7412c"><div class="ttname"><a href="af__sofalizer_8c.html#adcc7fee938c249cf1eaafaf568f7412c">AVFILTER_DEFINE_CLASS</a></div><div class="ttdeci">AVFILTER_DEFINE_CLASS(sofalizer)</div></div>
<div class="ttc" id="agroup__channel__masks_html_ga02e55f35249dfa57a2e4edfd3acfec4f"><div class="ttname"><a href="group__channel__masks.html#ga02e55f35249dfa57a2e4edfd3acfec4f">AV_CH_SIDE_LEFT</a></div><div class="ttdeci">#define AV_CH_SIDE_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00058">channel_layout.h:58</a></div></div>
<div class="ttc" id="afft_8c_html_aeac685ede53ad58d0e24e6c060feff7a"><div class="ttname"><a href="fft_8c.html#aeac685ede53ad58d0e24e6c060feff7a">re</a></div><div class="ttdeci">float re</div><div class="ttdef"><b>Definition:</b> <a href="fft_8c_source.html#l00082">fft.c:82</a></div></div>
<div class="ttc" id="aaf__sofalizer_8c_html_a211a244bec3c2e17637e925aa4103447"><div class="ttname"><a href="af__sofalizer_8c.html#a211a244bec3c2e17637e925aa4103447">close_sofa</a></div><div class="ttdeci">static int close_sofa(struct MySofa *sofa)</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00117">af_sofalizer.c:117</a></div></div>
<div class="ttc" id="astruct_s_o_f_alizer_context_html_a4d342737d18a44c75d85208478844ac9"><div class="ttname"><a href="struct_s_o_f_alizer_context.html#a4d342737d18a44c75d85208478844ac9">SOFAlizerContext::minphase</a></div><div class="ttdeci">int minphase</div><div class="ttdef"><b>Definition:</b> <a href="af__sofalizer_8c_source.html#l00105">af_sofalizer.c:105</a></div></div>
<div class="ttc" id="aintmath_8h_html"><div class="ttname"><a href="intmath_8h.html">intmath.h</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
