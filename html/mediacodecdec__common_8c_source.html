<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/mediacodecdec_common.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mediacodecdec_common.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mediacodecdec__common_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#ae98e1b1dbb3bcb1a34706f22ea1bae9a">    1</a></span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Android MediaCodec decoder</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2015-2016 Matthieu Bouron &lt;matthieu.bouron stupeflix.com&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">libavutil/common.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hwcontext__mediacodec_8h.html">libavutil/hwcontext_mediacodec.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mem_8h.html">libavutil/mem.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">libavutil/log.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixfmt_8h.html">libavutil/pixfmt.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="time_8h.html">libavutil/time.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timestamp_8h.html">libavutil/timestamp.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mediacodec_8h.html">mediacodec.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mediacodec__surface_8h.html">mediacodec_surface.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mediacodec__sw__buffer_8h.html">mediacodec_sw_buffer.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mediacodec__wrapper_8h.html">mediacodec_wrapper.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mediacodecdec__common_8h.html">mediacodecdec_common.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a891907f1ddd8be9b70bb26d35ce9065e">   84</a></span>&#160;<span class="preprocessor">#define INPUT_DEQUEUE_TIMEOUT_US 8000</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a650d4a553bb36734668106d6c2504efd">   85</a></span>&#160;<span class="preprocessor">#define OUTPUT_DEQUEUE_TIMEOUT_US 8000</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#aa0272ffcd798bae7fd8b2fbabcaafb02">   86</a></span>&#160;<span class="preprocessor">#define OUTPUT_DEQUEUE_BLOCK_TIMEOUT_US 1000000</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keyword">enum</span> {</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba17ffbfb5d1db6df4a2410ee4db6415f3">   89</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba17ffbfb5d1db6df4a2410ee4db6415f3">COLOR_RANGE_FULL</a>    = 0x1,</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac90b5ec1e7148e4534d4b451d0d4f87f">   90</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac90b5ec1e7148e4534d4b451d0d4f87f">COLOR_RANGE_LIMITED</a> = 0x2,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;};</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589a">AVColorRange</a> <a class="code" href="mediacodecdec__common_8c.html#a5917bc1898c0390acd2cedc1d5679d7f">mcdec_get_color_range</a>(<span class="keywordtype">int</span> <a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a>)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a>) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba17ffbfb5d1db6df4a2410ee4db6415f3">COLOR_RANGE_FULL</a>:</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac90b5ec1e7148e4534d4b451d0d4f87f">COLOR_RANGE_LIMITED</a>:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aaa374becbc2b5ee0bc1886048d151ea3e">AVCOL_RANGE_UNSPECIFIED</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keyword">enum</span> {</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a427c4a56d69a1db660a0de68c975bd1f">  106</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a427c4a56d69a1db660a0de68c975bd1f">COLOR_STANDARD_BT709</a>      = 0x1,</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a0bc16a184a3a7b80b891380e67f645bb">  107</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a0bc16a184a3a7b80b891380e67f645bb">COLOR_STANDARD_BT601_PAL</a>  = 0x2,</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7aaa7a1538644e16b6caf5b65669e70e6d">  108</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7aaa7a1538644e16b6caf5b65669e70e6d">COLOR_STANDARD_BT601_NTSC</a> = 0x4,</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d7d7f10b5564df7f84dc2ffaca54c79">  109</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d7d7f10b5564df7f84dc2ffaca54c79">COLOR_STANDARD_BT2020</a>     = 0x6,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;};</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85">AVColorSpace</a> <a class="code" href="mediacodecdec__common_8c.html#a17efc7493b50d8dabf1d1f1c9661c046">mcdec_get_color_space</a>(<span class="keywordtype">int</span> color_standard)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">switch</span> (color_standard) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a427c4a56d69a1db660a0de68c975bd1f">COLOR_STANDARD_BT709</a>:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a23e7d1012e354bbfcb62642e537d33cb">AVCOL_SPC_BT709</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a0bc16a184a3a7b80b891380e67f645bb">COLOR_STANDARD_BT601_PAL</a>:</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a32a0719616b0bb89f4be9d885341bfa4">AVCOL_SPC_BT470BG</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7aaa7a1538644e16b6caf5b65669e70e6d">COLOR_STANDARD_BT601_NTSC</a>:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a8a3f2b5ebbb2d5734435fe23837cd20c">AVCOL_SPC_SMPTE170M</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d7d7f10b5564df7f84dc2ffaca54c79">COLOR_STANDARD_BT2020</a>:</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a766a63c9ca065ba454f1d83161350055">AVCOL_SPC_BT2020_NCL</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2">AVCOL_SPC_UNSPECIFIED</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7">AVColorPrimaries</a> <a class="code" href="mediacodecdec__common_8c.html#abdb385af2d709b55b1938e5b3bf0152d">mcdec_get_color_pri</a>(<span class="keywordtype">int</span> color_standard)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">switch</span> (color_standard) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a427c4a56d69a1db660a0de68c975bd1f">COLOR_STANDARD_BT709</a>:</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a4f1c38f3e06cd2c49b28046bbf3a4cbd">AVCOL_PRI_BT709</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a0bc16a184a3a7b80b891380e67f645bb">COLOR_STANDARD_BT601_PAL</a>:</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a1aeb4f44414c396b28b3f392313e50ae">AVCOL_PRI_BT470BG</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7aaa7a1538644e16b6caf5b65669e70e6d">COLOR_STANDARD_BT601_NTSC</a>:</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7ad882a69d6c7cf33fa22a5717c63baf19">AVCOL_PRI_SMPTE170M</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d7d7f10b5564df7f84dc2ffaca54c79">COLOR_STANDARD_BT2020</a>:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7adee9de223d6a8683fd2177b43444404c">AVCOL_PRI_BT2020</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942">AVCOL_PRI_UNSPECIFIED</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">enum</span> {</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5ae2d194f7033be362a91fc50d5a69f248">  145</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5ae2d194f7033be362a91fc50d5a69f248">COLOR_TRANSFER_LINEAR</a>    = 0x1,</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5ade8447173a035e1c839611e0cf086158">  146</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5ade8447173a035e1c839611e0cf086158">COLOR_TRANSFER_SDR_VIDEO</a> = 0x3,</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5a50719b4a0144487f5ce9dbd96427a4d1">  147</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5a50719b4a0144487f5ce9dbd96427a4d1">COLOR_TRANSFER_ST2084</a>    = 0x6,</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5a3cbe8586787105386a94ebd041f719f2">  148</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5a3cbe8586787105386a94ebd041f719f2">COLOR_TRANSFER_HLG</a>       = 0x7,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;};</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6">AVColorTransferCharacteristic</a> <a class="code" href="mediacodecdec__common_8c.html#a444cb8f608ebc0d9d64c099ef0dc66f6">mcdec_get_color_trc</a>(<span class="keywordtype">int</span> color_transfer)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">switch</span> (color_transfer) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5ae2d194f7033be362a91fc50d5a69f248">COLOR_TRANSFER_LINEAR</a>:</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6a7fb3b6cc26688e1fe7ea658fe5b1133f">AVCOL_TRC_LINEAR</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5ade8447173a035e1c839611e0cf086158">COLOR_TRANSFER_SDR_VIDEO</a>:</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6a0afb6440afaeda94f18dd99629b6b741">AVCOL_TRC_SMPTE170M</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5a50719b4a0144487f5ce9dbd96427a4d1">COLOR_TRANSFER_ST2084</a>:</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6a3124d1ff8a5a2f7e98d3076a349a8043">AVCOL_TRC_SMPTEST2084</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5a3cbe8586787105386a94ebd041f719f2">COLOR_TRANSFER_HLG</a>:</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6aa21a497d0b7f2d0eab46faf9372c04a3">AVCOL_TRC_ARIB_STD_B67</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab">AVCOL_TRC_UNSPECIFIED</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keyword">enum</span> {</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ac36a8d900812f20eb74e286549fdea0d">  168</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ac36a8d900812f20eb74e286549fdea0d">COLOR_FormatYUV420Planar</a>                              = 0x13,</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04afd72db05229114a325d16af23ae91fb5">  169</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04afd72db05229114a325d16af23ae91fb5">COLOR_FormatYUV420SemiPlanar</a>                          = 0x15,</div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a66919704a91ef735bc974e8e8c6f2074">  170</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a66919704a91ef735bc974e8e8c6f2074">COLOR_FormatYCbYCr</a>                                    = 0x19,</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ad656f72fc84bc31376cecc72512c28b2">  171</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ad656f72fc84bc31376cecc72512c28b2">COLOR_FormatAndroidOpaque</a>                             = 0x7F000789,</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ad7bc6fa2fb391588d53b34a7cda6c74d">  172</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ad7bc6fa2fb391588d53b34a7cda6c74d">COLOR_QCOM_FormatYUV420SemiPlanar</a>                     = 0x7fa30c00,</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a24681684eab9777194afebb20e1aa422">  173</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a24681684eab9777194afebb20e1aa422">COLOR_QCOM_FormatYUV420SemiPlanar32m</a>                  = 0x7fa30c04,</div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04acde4667c7d3051af061a175cd7773582">  174</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04acde4667c7d3051af061a175cd7773582">COLOR_QCOM_FormatYUV420PackedSemiPlanar64x32Tile2m8ka</a> = 0x7fa30c03,</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a1416fa07565bc8f9f10cef1ec59c9e60">  175</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a1416fa07565bc8f9f10cef1ec59c9e60">COLOR_TI_FormatYUV420PackedSemiPlanar</a>                 = 0x7f000100,</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a3691afb35d9b4b5e7aea0d745953f0e1">  176</a></span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a3691afb35d9b4b5e7aea0d745953f0e1">COLOR_TI_FormatYUV420PackedSemiPlanarInterlaced</a>       = 0x7f000001,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;};</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a7331e302ea7bb48e0b605a069576e135">  181</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#ac0ac7c142157ae64dda6dac7a595174d">color_format</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="mediacodecdec__common_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;} <a class="code" href="mediacodecdec__common_8c.html#a8b3adcdddd8db2f1a701f67c86a6ff24">color_formats</a>[] = {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    { <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ac36a8d900812f20eb74e286549fdea0d">COLOR_FormatYUV420Planar</a>,                              <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a> },</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    { <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04afd72db05229114a325d16af23ae91fb5">COLOR_FormatYUV420SemiPlanar</a>,                          <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>    },</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    { <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ad7bc6fa2fb391588d53b34a7cda6c74d">COLOR_QCOM_FormatYUV420SemiPlanar</a>,                     <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>    },</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    { <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a24681684eab9777194afebb20e1aa422">COLOR_QCOM_FormatYUV420SemiPlanar32m</a>,                  <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>    },</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    { <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04acde4667c7d3051af061a175cd7773582">COLOR_QCOM_FormatYUV420PackedSemiPlanar64x32Tile2m8ka</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>    },</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    { <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a1416fa07565bc8f9f10cef1ec59c9e60">COLOR_TI_FormatYUV420PackedSemiPlanar</a>,                 <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>    },</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    { <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a3691afb35d9b4b5e7aea0d745953f0e1">COLOR_TI_FormatYUV420PackedSemiPlanarInterlaced</a>,       <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>    },</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    { 0 }</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a8b3adcdddd8db2f1a701f67c86a6ff24">  194</a></span>&#160;};</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="mediacodecdec__common_8c.html#ae98e1b1dbb3bcb1a34706f22ea1bae9a">mcdec_map_color_format</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                                                 <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                                 <span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#ac0ac7c142157ae64dda6dac7a595174d">color_format</a>)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5af877f92c24d6fae08d0b348988f03243">AV_PIX_FMT_MEDIACODEC</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (!strcmp(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name, <span class="stringliteral">&quot;OMX.k3.video.decoder.avc&quot;</span>) &amp;&amp; <a class="code" href="mediacodecdec__common_8c.html#ac0ac7c142157ae64dda6dac7a595174d">color_format</a> == <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a66919704a91ef735bc974e8e8c6f2074">COLOR_FormatYCbYCr</a>) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;color_format = <a class="code" href="mediacodecdec__common_8c.html#ac0ac7c142157ae64dda6dac7a595174d">color_format</a> = <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a1416fa07565bc8f9f10cef1ec59c9e60">COLOR_TI_FormatYUV420PackedSemiPlanar</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mediacodecdec__common_8c.html#a8b3adcdddd8db2f1a701f67c86a6ff24">color_formats</a>); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mediacodecdec__common_8c.html#a8b3adcdddd8db2f1a701f67c86a6ff24">color_formats</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="mediacodecdec__common_8c.html#ac0ac7c142157ae64dda6dac7a595174d">color_format</a> == <a class="code" href="mediacodecdec__common_8c.html#ac0ac7c142157ae64dda6dac7a595174d">color_format</a>) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="mediacodecdec__common_8c.html#a8b3adcdddd8db2f1a701f67c86a6ff24">color_formats</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].pix_fmt;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Output color format 0x%x (value=%d) is not supported\n&quot;</span>,</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="mediacodecdec__common_8c.html#ac0ac7c142157ae64dda6dac7a595174d">color_format</a>, <a class="code" href="mediacodecdec__common_8c.html#ac0ac7c142157ae64dda6dac7a595174d">color_format</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#aaa98712541b4ef0d8655ae94d33dedb2">  223</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mediacodecdec__common_8c.html#aaa98712541b4ef0d8655ae94d33dedb2">ff_mediacodec_dec_ref</a>(<a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="gcc_2stdatomic_8h.html#aedf6fb62e0fc9e8f8cf2e3685f0a1e88">atomic_fetch_add</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;refcount, 1);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#ad5c6d1015fbafc1bbc0271dc4613f7be">  228</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mediacodecdec__common_8c.html#ad5c6d1015fbafc1bbc0271dc4613f7be">ff_mediacodec_dec_unref</a>(<a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="gcc_2stdatomic_8h.html#a66aaef69cdadfe5e0eb87f6beff352df">atomic_fetch_sub</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;refcount, 1) == 1) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <a class="code" href="mediacodec__wrapper_8c.html#a25b09d7cc597dd62e7c1788fde13a60b">ff_AMediaCodec_delete</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <a class="code" href="mediacodec__wrapper_8c.html#a52569e2fb090f0600f7f6e35cc612419">ff_AMediaFormat_delete</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <a class="code" href="mediacodec__surface_8c.html#ac296c4368e35b9023dc28fa9a2cf8be5">ff_mediacodec_surface_unref</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#af1e43ce27b8e9bec2f1299fd5d3ea87f">  254</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mediacodecdec__common_8c.html#af1e43ce27b8e9bec2f1299fd5d3ea87f">mediacodec_buffer_release</a>(<span class="keywordtype">void</span> *opaque, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>)</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;{</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="struct_media_codec_buffer.html">AVMediaCodecBuffer</a> *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = opaque;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;ctx;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">int</span> released = <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;released);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (!released &amp;&amp; (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;delay_flush || <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;serial == <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;serial))) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="gcc_2stdatomic_8h.html#a66aaef69cdadfe5e0eb87f6beff352df">atomic_fetch_sub</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hw_buffer_count, 1);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;               <span class="stringliteral">&quot;Releasing output buffer %zd (%p) ts=%&quot;</span>PRId64<span class="stringliteral">&quot; on free() [%d pending]\n&quot;</span>,</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;               <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;index, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a>, <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hw_buffer_count));</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="mediacodec__wrapper_8c.html#a7d4dfbd5bd67f30fa29f50d24f560947">ff_AMediaCodec_releaseOutputBuffer</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;codec, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;index, 0);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;delay_flush)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="mediacodecdec__common_8c.html#ad5c6d1015fbafc1bbc0271dc4613f7be">ff_mediacodec_dec_unref</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a3febe7d093cb9082b305c91c0f69aa19">  273</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#a3febe7d093cb9082b305c91c0f69aa19">mediacodec_wrap_hw_buffer</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                  <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                  ssize_t <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                                  <a class="code" href="struct_f_f_a_media_codec_buffer_info.html">FFAMediaCodecBufferInfo</a> *<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                                  <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;{</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = 0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="struct_media_codec_buffer.html">AVMediaCodecBuffer</a> *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;buf[0] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;width = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;height = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;format = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;sample_aspect_ratio = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;presentationTimeUs,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                      <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                      avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts = <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;presentationTimeUs;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">#if FF_API_PKT_PTS</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pkt_pts = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pkt_dts = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;color_range = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;color_primaries = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;color_trc = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">color_trc</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;colorspace = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_media_codec_buffer.html">AVMediaCodecBuffer</a>));</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;released, 0);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;buf[0] = <a class="code" href="group__lavu__buffer.html#ga3e7f4c92db85ccba0b2a16dd0069842a">av_buffer_create</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                     0,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                     <a class="code" href="mediacodecdec__common_8c.html#af1e43ce27b8e9bec2f1299fd5d3ea87f">mediacodec_buffer_release</a>,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                     <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>,</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                     <a class="code" href="group__lavu__buffer.html#gaa818f8f1011d69acc50c1f29cb85e576">AV_BUFFER_FLAG_READONLY</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;buf[0]) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;ctx = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;serial = <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;serial);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;delay_flush)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="mediacodecdec__common_8c.html#aaa98712541b4ef0d8655ae94d33dedb2">ff_mediacodec_dec_ref</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;index = <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> = <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;presentationTimeUs;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[3] = (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="gcc_2stdatomic_8h.html#aedf6fb62e0fc9e8f8cf2e3685f0a1e88">atomic_fetch_add</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hw_buffer_count, 1);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="stringliteral">&quot;Wrapping output buffer %zd (%p) ts=%&quot;</span>PRId64<span class="stringliteral">&quot; [%d pending]\n&quot;</span>,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;index, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a>, <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hw_buffer_count));</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;buf[0]);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="mediacodec__wrapper_8c.html#a7d4dfbd5bd67f30fa29f50d24f560947">ff_AMediaCodec_releaseOutputBuffer</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, 0);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &lt; 0) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to release output buffer\n&quot;</span>);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a7e5429f3cbd76dba536b3024cb0b0707">  355</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#a7e5429f3cbd76dba536b3024cb0b0707">mediacodec_wrap_sw_buffer</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                  <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                                  <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                  <span class="keywordtype">size_t</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>,</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                                  ssize_t <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                  <a class="code" href="struct_f_f_a_media_codec_buffer_info.html">FFAMediaCodecBufferInfo</a> *<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                  <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = 0;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;width = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;height = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;format = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">/* MediaCodec buffers needs to be copied to our own refcounted buffers</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">     * because the flush command invalidates all input and output buffers.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(avctx, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0)) &lt; 0) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not allocate buffer\n&quot;</span>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">/* Override frame-&gt;pkt_pts as ff_get_buffer will override its value based</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">     * on the last avpacket received which is not in sync with the frame:</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">     *   * N avpackets can be pushed before 1 frame is actually returned</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">     *   * 0-sized avpackets are pushed to flush remaining frames at EOS */</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;presentationTimeUs,</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                      <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                      avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts = <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;presentationTimeUs;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#if FF_API_PKT_PTS</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pkt_pts = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pkt_dts = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="stringliteral">&quot;Frame: width=%d stride=%d height=%d slice-height=%d &quot;</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="stringliteral">&quot;crop-top=%d crop-bottom=%d crop-left=%d crop-right=%d encoder=%s &quot;</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="stringliteral">&quot;destination linesizes=%d,%d,%d\n&quot;</span> ,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;stride, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_height,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_top, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_bottom, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_left, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_right, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[0], <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[1], <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[2]);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;color_format) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ac36a8d900812f20eb74e286549fdea0d">COLOR_FormatYUV420Planar</a>:</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="mediacodec__sw__buffer_8c.html#af0eaac1b20ee73c95ca9c631e85488e6">ff_mediacodec_sw_buffer_copy_yuv420_planar</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04afd72db05229114a325d16af23ae91fb5">COLOR_FormatYUV420SemiPlanar</a>:</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ad7bc6fa2fb391588d53b34a7cda6c74d">COLOR_QCOM_FormatYUV420SemiPlanar</a>:</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a24681684eab9777194afebb20e1aa422">COLOR_QCOM_FormatYUV420SemiPlanar32m</a>:</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <a class="code" href="mediacodec__sw__buffer_8c.html#a96251fdfaacb469a4810f489c423139f">ff_mediacodec_sw_buffer_copy_yuv420_semi_planar</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a1416fa07565bc8f9f10cef1ec59c9e60">COLOR_TI_FormatYUV420PackedSemiPlanar</a>:</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a3691afb35d9b4b5e7aea0d745953f0e1">COLOR_TI_FormatYUV420PackedSemiPlanarInterlaced</a>:</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <a class="code" href="mediacodec__sw__buffer_8c.html#af6fa3df85cfddfa68bcbdbdb6dced212">ff_mediacodec_sw_buffer_copy_yuv420_packed_semi_planar</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04acde4667c7d3051af061a175cd7773582">COLOR_QCOM_FormatYUV420PackedSemiPlanar64x32Tile2m8ka</a>:</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="mediacodec__sw__buffer_8c.html#a57628d0d5aac90206939a376c482a09f">ff_mediacodec_sw_buffer_copy_yuv420_packed_semi_planar_64x32Tile2m8ka</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported color format 0x%x (value=%d)\n&quot;</span>,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;color_format, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;color_format);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;done:</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="mediacodec__wrapper_8c.html#a7d4dfbd5bd67f30fa29f50d24f560947">ff_AMediaCodec_releaseOutputBuffer</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, 0);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &lt; 0) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to release output buffer\n&quot;</span>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">  438</a></span>&#160;<span class="preprocessor">#define AMEDIAFORMAT_GET_INT32(name, key, mandatory) do {                              \</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">    int32_t value = 0;                                                                 \</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="preprocessor">    if (ff_AMediaFormat_getInt32(s-&gt;format, key, &amp;value)) {                            \</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="preprocessor">        (name) = value;                                                                \</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">    } else if (mandatory) {                                                            \</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="preprocessor">        av_log(avctx, AV_LOG_ERROR, &quot;Could not get %s from format %s\n&quot;, key, format); \</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="preprocessor">        ret = AVERROR_EXTERNAL;                                                        \</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="preprocessor">        goto fail;                                                                     \</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor">    }                                                                                  \</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="preprocessor">} while (0)                                                                            \</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor"></span> </div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a7eb5f10fd39bed47af65d4defc9bce1d">  449</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#a7eb5f10fd39bed47af65d4defc9bce1d">mediacodec_dec_parse_format</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;{</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> = 0;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> = 0;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a> = 0;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordtype">int</span> color_standard = 0;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordtype">int</span> color_transfer = 0;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Output MediaFormat is not set\n&quot;</span>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> = <a class="code" href="mediacodec__wrapper_8c.html#a2e537781fe8a2a160e6310d0a62bb222">ff_AMediaFormat_toString</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Parsing MediaFormat %s\n&quot;</span>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="comment">/* Mandatory fields */</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width,  <span class="stringliteral">&quot;width&quot;</span>, 1);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height, <span class="stringliteral">&quot;height&quot;</span>, 1);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;stride, <span class="stringliteral">&quot;stride&quot;</span>, 0);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;stride = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;stride &gt; 0 ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;stride : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_height, <span class="stringliteral">&quot;slice-height&quot;</span>, 0);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (strstr(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name, <span class="stringliteral">&quot;OMX.Nvidia.&quot;</span>) &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_height == 0) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_height = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height, 16);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name, <span class="stringliteral">&quot;OMX.SEC.avc.dec&quot;</span>)) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_height = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;stride = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_height == 0) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_height = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;color_format, <span class="stringliteral">&quot;color-format&quot;</span>, 1);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> = <a class="code" href="mediacodecdec__common_8c.html#ae98e1b1dbb3bcb1a34706f22ea1bae9a">mcdec_map_color_format</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;color_format);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Output color format is not supported\n&quot;</span>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">/* Optional fields */</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_top,    <span class="stringliteral">&quot;crop-top&quot;</span>,    0);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_bottom, <span class="stringliteral">&quot;crop-bottom&quot;</span>, 0);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_left,   <span class="stringliteral">&quot;crop-left&quot;</span>,   0);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_right,  <span class="stringliteral">&quot;crop-right&quot;</span>,  0);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_right + 1 - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_left;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_bottom + 1 - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_top;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;display_width,  <span class="stringliteral">&quot;display-width&quot;</span>,  0);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;display_height, <span class="stringliteral">&quot;display-height&quot;</span>, 0);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;display_width &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;display_height) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="struct_a_v_rational.html">AVRational</a> sar = <a class="code" href="group__lavu__math__rational.html#gaffa24e7bd38e12dbac540d8b66461f97">av_div_q</a>(</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            (<a class="code" href="struct_a_v_rational.html">AVRational</a>){ <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;display_width, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;display_height },</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){ <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>, <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> });</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a>(avctx, sar);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(<a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a>, <span class="stringliteral">&quot;color-range&quot;</span>, 0);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a>)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a> = <a class="code" href="mediacodecdec__common_8c.html#a5917bc1898c0390acd2cedc1d5679d7f">mcdec_get_color_range</a>(<a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(color_standard, <span class="stringliteral">&quot;color-standard&quot;</span>, 0);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (color_standard) {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a> = <a class="code" href="mediacodecdec__common_8c.html#a17efc7493b50d8dabf1d1f1c9661c046">mcdec_get_color_space</a>(color_standard);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a> = <a class="code" href="mediacodecdec__common_8c.html#abdb385af2d709b55b1938e5b3bf0152d">mcdec_get_color_pri</a>(color_standard);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a>(color_transfer, <span class="stringliteral">&quot;color-transfer&quot;</span>, 0);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (color_transfer)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">color_trc</a> = <a class="code" href="mediacodecdec__common_8c.html#a444cb8f608ebc0d9d64c099ef0dc66f6">mcdec_get_color_trc</a>(color_transfer);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>,</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="stringliteral">&quot;Output crop parameters top=%d bottom=%d left=%d right=%d, &quot;</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="stringliteral">&quot;resulting dimensions width=%d height=%d\n&quot;</span>,</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_top, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_bottom, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_left, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;crop_right,</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>, <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libavcodec_2internal_8h.html#ac8b736a8223c5348ad85ffff597401ff">ff_set_dimensions</a>(avctx, <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>, <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8c.html#a68731b4b6b79260c5fe16a3c20807f92">  542</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#a68731b4b6b79260c5fe16a3c20807f92">mediacodec_dec_flush_codec</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="struct_f_f_a_media_codec.html">FFAMediaCodec</a> *codec = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_buffer_count = 0;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;draining = 0;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flushing = 0;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;eos = 0;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="gcc_2stdatomic_8h.html#aedf6fb62e0fc9e8f8cf2e3685f0a1e88">atomic_fetch_add</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;serial, 1);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hw_buffer_count, 0);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_input_buffer = -1;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="mediacodec__wrapper_8c.html#aad458213cdd1854fb630ab68d625b9ed">ff_AMediaCodec_flush</a>(codec);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &lt; 0) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to flush codec\n&quot;</span>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8h.html#aa6abe71c99bc7c75eb7047f6314a149c">  565</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#aa6abe71c99bc7c75eb7047f6314a149c">ff_mediacodec_dec_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                           <span class="keyword">const</span> <span class="keywordtype">char</span> *mime, <a class="code" href="struct_f_f_a_media_format.html">FFAMediaFormat</a> *<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;{</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="mediacodecdec__common_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>[] = {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5af877f92c24d6fae08d0b348988f03243">AV_PIX_FMT_MEDIACODEC</a>,</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>,</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    };</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx = avctx;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;refcount, 1);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hw_buffer_count, 0);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;serial, 1);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_input_buffer = -1;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> = <a class="code" href="decode_8c.html#a8a7eadb05d8ea6f849a146035377ad1f">ff_get_format</a>(avctx, <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mediacodecdec__common_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5af877f92c24d6fae08d0b348988f03243">AV_PIX_FMT_MEDIACODEC</a>) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <a class="code" href="struct_a_v_media_codec_context.html">AVMediaCodecContext</a> *user_ctx = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab222f7d747dfdceff0a76999e09648c0">hwaccel_context</a>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#acf8113e490f9e7b57465e65af9c0c75c">hw_device_ctx</a>) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a> *device_ctx = (<a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a>*)(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#acf8113e490f9e7b57465e65af9c0c75c">hw_device_ctx</a>-&gt;<a class="code" href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">data</a>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">if</span> (device_ctx-&gt;<a class="code" href="struct_a_v_h_w_device_context.html#abc92603a11768828ef3aea1f9d089308">type</a> == <a class="code" href="hwcontext_8h.html#acf25724be4b066a51ad86aa9214b0d34a773070fc89c1397360cb469ec6302de2">AV_HWDEVICE_TYPE_MEDIACODEC</a>) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="keywordflow">if</span> (device_ctx-&gt;<a class="code" href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">hwctx</a>) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    <a class="code" href="struct_a_v_media_codec_device_context.html">AVMediaCodecDeviceContext</a> *mediacodec_ctx = (<a class="code" href="struct_a_v_media_codec_device_context.html">AVMediaCodecDeviceContext</a> *)device_ctx-&gt;<a class="code" href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">hwctx</a>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface = <a class="code" href="mediacodec__surface_8c.html#af5e3e34b96390eeb497f158a7768648f">ff_mediacodec_surface_ref</a>(mediacodec_ctx-&gt;<a class="code" href="struct_a_v_media_codec_device_context.html#aa11ea198d48b024bf2c39e9a605fc06b">surface</a>, avctx);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Using surface %p\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface &amp;&amp; user_ctx &amp;&amp; user_ctx-&gt;<a class="code" href="struct_a_v_media_codec_context.html#aa07685529de44aaffc3665f8e57b1cda">surface</a>) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface = <a class="code" href="mediacodec__surface_8c.html#af5e3e34b96390eeb497f158a7768648f">ff_mediacodec_surface_ref</a>(user_ctx-&gt;<a class="code" href="struct_a_v_media_codec_context.html#aa07685529de44aaffc3665f8e57b1cda">surface</a>, avctx);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Using surface %p\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <a class="code" href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a> = <a class="code" href="mediacodec__wrapper_8c.html#ab8be467f00ee7a0ae290de7eec963f4e">ff_AMediaCodecProfile_getProfileFromAVCodecContext</a>(avctx);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a> &lt; 0) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unsupported or unknown profile\n&quot;</span>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name = <a class="code" href="mediacodec__wrapper_8c.html#a69731374ad0c7aea041b16b2b4788d9d">ff_AMediaCodecList_getCodecNameByType</a>(mime, <a class="code" href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a>, 0, avctx);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Found decoder %s\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec = <a class="code" href="mediacodec__wrapper_8h.html#a9a6d528cd4bc80b959013344d0a2c114">ff_AMediaCodec_createCodecByName</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create media decoder for type %s and name %s\n&quot;</span>, mime, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="mediacodec__wrapper_8c.html#a2c0c8ef547b0bc00e2cf824f793c3bd3">ff_AMediaCodec_configure</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &lt; 0) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordtype">char</span> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="mediacodec__wrapper_8c.html#a2e537781fe8a2a160e6310d0a62bb222">ff_AMediaFormat_toString</a>(<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="stringliteral">&quot;Failed to configure codec %s (status = %d) with format %s\n&quot;</span>,</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name, <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>, <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="mediacodec__wrapper_8c.html#a31bd2dc1422be1482fa986cf4bd6fddd">ff_AMediaCodec_start</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &lt; 0) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordtype">char</span> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="mediacodec__wrapper_8c.html#a2e537781fe8a2a160e6310d0a62bb222">ff_AMediaFormat_toString</a>(<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="stringliteral">&quot;Failed to start codec %s (status = %d) with format %s\n&quot;</span>,</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_name, <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>, <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format = <a class="code" href="mediacodec__wrapper_8c.html#ab7e1d34a8076668cc0ef8a8aae29a3f0">ff_AMediaCodec_getOutputFormat</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mediacodecdec__common_8c.html#a7eb5f10fd39bed47af65d4defc9bce1d">mediacodec_dec_parse_format</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                <span class="stringliteral">&quot;Failed to configure context\n&quot;</span>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;MediaCodec %p started successfully\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;MediaCodec %p failed to start\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#a80673d88f6a983b2b1720c347105027e">ff_mediacodec_dec_close</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8h.html#a18c0e80844283da4d69d0e73c3b03641">  666</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#a18c0e80844283da4d69d0e73c3b03641">ff_mediacodec_dec_send</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                           <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">bool</span> wait)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;{</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = 0;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordtype">int</span> need_draining = 0;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="struct_f_f_a_media_codec.html">FFAMediaCodec</a> *codec = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    int64_t input_dequeue_timeout_us = wait ? <a class="code" href="mediacodecdec__common_8c.html#a891907f1ddd8be9b70bb26d35ce9065e">INPUT_DEQUEUE_TIMEOUT_US</a> : 0;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flushing) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Decoder is flushing and cannot accept new buffer &quot;</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                    <span class="stringliteral">&quot;until all output buffers have been released\n&quot;</span>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> == 0) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        need_draining = 1;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;draining &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;eos) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">while</span> (offset &lt; pkt-&gt;<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> || (need_draining &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;draining)) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        ssize_t <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_input_buffer;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; 0) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mediacodec__wrapper_8c.html#a66a312eb97444d971501762ea5b5079c">ff_AMediaCodec_dequeueInputBuffer</a>(codec, input_dequeue_timeout_us);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mediacodec__wrapper_8c.html#a88335eb87d4f17639ecf7d00c99c11af">ff_AMediaCodec_infoTryAgainLater</a>(codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>)) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;No input buffer available, try again later\n&quot;</span>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; 0) {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to dequeue input buffer (status=%zd)\n&quot;</span>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_input_buffer = -1;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> = <a class="code" href="mediacodec__wrapper_8c.html#a026e29351f9ca20f19fb60a41d4dfc7a">ff_AMediaCodec_getInputBuffer</a>(codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, &amp;<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get input buffer\n&quot;</span>);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Input packet is missing PTS\n&quot;</span>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = 0;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">if</span> (need_draining) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            uint32_t <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> = <a class="code" href="mediacodec__wrapper_8c.html#aeaab6ec4af58ac419c017ab0159120c9">ff_AMediaCodec_getBufferFlagEndOfStream</a>(codec);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Sending End Of Stream signal\n&quot;</span>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="mediacodec__wrapper_8c.html#a6b6d3f0ba6dfe4c55718d1bcbdd11c62">ff_AMediaCodec_queueInputBuffer</a>(codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, 0, 0, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &lt; 0) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to queue input empty buffer (status = %d)\n&quot;</span>, <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>,</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                   <span class="stringliteral">&quot;Queued empty EOS input buffer %zd with flags=%d\n&quot;</span>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;draining = 1;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> - <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        memcpy(<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="mediacodec__wrapper_8c.html#a6b6d3f0ba6dfe4c55718d1bcbdd11c62">ff_AMediaCodec_queueInputBuffer</a>(codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, 0, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, 0);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &lt; 0) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to queue input buffer (status = %d)\n&quot;</span>, <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;               <span class="stringliteral">&quot;Queued input buffer %zd size=%zd ts=%&quot;</span>PRIi64<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> == 0)</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8h.html#a5cb9bb58b6920a4c6e44efde1e7901f0">  760</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#a5cb9bb58b6920a4c6e44efde1e7901f0">ff_mediacodec_dec_receive</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                              <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <span class="keywordtype">bool</span> wait)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;{</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    ssize_t <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <a class="code" href="struct_f_f_a_media_codec.html">FFAMediaCodec</a> *codec = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <a class="code" href="struct_f_f_a_media_codec_buffer_info.html">FFAMediaCodecBufferInfo</a> <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a> = { 0 };</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    int64_t output_dequeue_timeout_us = <a class="code" href="mediacodecdec__common_8c.html#a650d4a553bb36734668106d6c2504efd">OUTPUT_DEQUEUE_TIMEOUT_US</a>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;draining &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;eos) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;draining) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="comment">/* If the codec is flushing or need to be flushed, block for a fair</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">         * amount of time to ensure we got a frame */</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        output_dequeue_timeout_us = <a class="code" href="mediacodecdec__common_8c.html#aa0272ffcd798bae7fd8b2fbabcaafb02">OUTPUT_DEQUEUE_BLOCK_TIMEOUT_US</a>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_buffer_count == 0 || !wait) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="comment">/* If the codec hasn&#39;t produced any frames, do not block so we</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">         * can push data to it as fast as possible, and get the first</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">         * frame */</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        output_dequeue_timeout_us = 0;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mediacodec__wrapper_8c.html#ad29cb13f050dccba987abb77dd5d0235">ff_AMediaCodec_dequeueOutputBuffer</a>(codec, &amp;<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>, output_dequeue_timeout_us);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &gt;= 0) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;Got output buffer %zd&quot;</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                <span class="stringliteral">&quot; offset=%&quot;</span> PRIi32 <span class="stringliteral">&quot; size=%&quot;</span> PRIi32 <span class="stringliteral">&quot; ts=%&quot;</span> PRIi64</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                <span class="stringliteral">&quot; flags=%&quot;</span> PRIu32 <span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>.offset, <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>.size,</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>.presentationTimeUs, <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>.flags);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>.flags &amp; <a class="code" href="mediacodec__wrapper_8c.html#aeaab6ec4af58ac419c017ab0159120c9">ff_AMediaCodec_getBufferFlagEndOfStream</a>(codec)) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;eos = 1;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>.size) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mediacodecdec__common_8c.html#a3febe7d093cb9082b305c91c0f69aa19">mediacodec_wrap_hw_buffer</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, &amp;<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)) &lt; 0) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to wrap MediaCodec buffer\n&quot;</span>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                }</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> = <a class="code" href="mediacodec__wrapper_8c.html#a5355f615a070bf4f39770649d189cb7d">ff_AMediaCodec_getOutputBuffer</a>(codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, &amp;<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get output buffer\n&quot;</span>);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mediacodecdec__common_8c.html#a7e5429f3cbd76dba536b3024cb0b0707">mediacodec_wrap_sw_buffer</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, &amp;<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)) &lt; 0) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to wrap MediaCodec buffer\n&quot;</span>);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_buffer_count++;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="mediacodec__wrapper_8c.html#a7d4dfbd5bd67f30fa29f50d24f560947">ff_AMediaCodec_releaseOutputBuffer</a>(codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, 0);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &lt; 0) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to release output buffer\n&quot;</span>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mediacodec__wrapper_8c.html#adccd831892ad10e4658de48dadbf2292">ff_AMediaCodec_infoOutputFormatChanged</a>(codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>)) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordtype">char</span> *<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="mediacodec__wrapper_8c.html#a52569e2fb090f0600f7f6e35cc612419">ff_AMediaFormat_delete</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &lt; 0) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to delete MediaFormat %p\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format = <a class="code" href="mediacodec__wrapper_8c.html#ab7e1d34a8076668cc0ef8a8aae29a3f0">ff_AMediaCodec_getOutputFormat</a>(codec);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get output format\n&quot;</span>);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> = <a class="code" href="mediacodec__wrapper_8c.html#a2e537781fe8a2a160e6310d0a62bb222">ff_AMediaFormat_toString</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;format);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Output MediaFormat changed to %s\n&quot;</span>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mediacodecdec__common_8c.html#a7eb5f10fd39bed47af65d4defc9bce1d">mediacodec_dec_parse_format</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0) {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mediacodec__wrapper_8c.html#a51871ef46bb6f9428b35c0330bcb0ae8">ff_AMediaCodec_infoOutputBuffersChanged</a>(codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>)) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="mediacodec__wrapper_8c.html#a4624d6e0c5e2e415e4cbecdc0dcbb725">ff_AMediaCodec_cleanOutputBuffers</a>(codec);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mediacodec__wrapper_8c.html#a88335eb87d4f17639ecf7d00c99c11af">ff_AMediaCodec_infoTryAgainLater</a>(codec, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>)) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;draining) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to dequeue output buffer within %&quot;</span> PRIi64 <span class="stringliteral">&quot;ms &quot;</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                        <span class="stringliteral">&quot;while draining remaining frames, output will probably lack frames\n&quot;</span>,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                                        output_dequeue_timeout_us / 1000);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;No output buffer available, try again later\n&quot;</span>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to dequeue output buffer (status=%zd)\n&quot;</span>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">* ff_mediacodec_dec_flush returns 0 if the flush cannot be performed on</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">* the codec (because the user retains frames). The codec stays in the</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">* flushing state.</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">*</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">* ff_mediacodec_dec_flush returns 1 if the flush can actually be</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">* performed on the codec. The codec leaves the flushing state and can</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">* process again packets.</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">*</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">* ff_mediacodec_dec_flush returns a negative value if an error has</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">* occurred.</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8h.html#a543a47ca2303350bec324cdd95b3472d">  883</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#a543a47ca2303350bec324cdd95b3472d">ff_mediacodec_dec_flush</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;{</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface || <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;refcount) == 1) {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="comment">/* No frames (holding a reference to the codec) are retained by the</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">         * user, thus we can flush the codec and returns accordingly */</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mediacodecdec__common_8c.html#a68731b4b6b79260c5fe16a3c20807f92">mediacodec_dec_flush_codec</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    }</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flushing = 1;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;}</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8h.html#a80673d88f6a983b2b1720c347105027e">  901</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#a80673d88f6a983b2b1720c347105027e">ff_mediacodec_dec_close</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;{</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="mediacodecdec__common_8c.html#ad5c6d1015fbafc1bbc0271dc4613f7be">ff_mediacodec_dec_unref</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;}</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno"><a class="line" href="mediacodecdec__common_8h.html#aad44c636df1e1cbbb77eee32709f8e48">  908</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mediacodecdec__common_8c.html#aad44c636df1e1cbbb77eee32709f8e48">ff_mediacodec_dec_is_flushing</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_media_codec_dec_context.html">MediaCodecDecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;{</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flushing;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alibavutil_2internal_8h_html_aa6ef004d10669ab4ee062367a014ea33"><div class="ttname"><a href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_ENABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00085">internal.h:85</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a69731374ad0c7aea041b16b2b4788d9d"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a69731374ad0c7aea041b16b2b4788d9d">ff_AMediaCodecList_getCodecNameByType</a></div><div class="ttdeci">char * ff_AMediaCodecList_getCodecNameByType(const char *mime, int profile, int encoder, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l00382">mediacodec_wrapper.c:382</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ad6a339ae538717b3e99082a8016207df"><div class="ttname"><a href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a></div><div class="ttdeci">they must not be accessed directly The fifo field contains the frames that are queued in the input for processing by the filter The status_in and status_out fields contains the queued status(EOF or error) of the link</div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab649e8c599f5a0e2a30448e67a36deb6"><div class="ttname"><a href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">AVCodecContext::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1147</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_adf764cbdea00d65edcd07bb9953ad2b7aaa7a1538644e16b6caf5b65669e70e6d"><div class="ttname"><a href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7aaa7a1538644e16b6caf5b65669e70e6d">COLOR_STANDARD_BT601_NTSC</a></div><div class="ttdeci">@ COLOR_STANDARD_BT601_NTSC</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00108">mediacodecdec_common.c:108</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad4791ea14975f098b649db7fcd731ce6"><div class="ttname"><a href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6">AVColorTransferCharacteristic</a></div><div class="ttdeci">AVColorTransferCharacteristic</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00483">pixfmt.h:483</a></div></div>
<div class="ttc" id="adecode_8c_html_a8a7eadb05d8ea6f849a146035377ad1f"><div class="ttname"><a href="decode_8c.html#a8a7eadb05d8ea6f849a146035377ad1f">ff_get_format</a></div><div class="ttdeci">int ff_get_format(AVCodecContext *avctx, const enum AVPixelFormat *fmt)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01299">decode.c:1299</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_device_context_html_abc92603a11768828ef3aea1f9d089308"><div class="ttname"><a href="struct_a_v_h_w_device_context.html#abc92603a11768828ef3aea1f9d089308">AVHWDeviceContext::type</a></div><div class="ttdeci">enum AVHWDeviceType type</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00071">hwcontext.h:79</a></div></div>
<div class="ttc" id="amediacodec__surface_8h_html"><div class="ttname"><a href="mediacodec__surface_8h.html">mediacodec_surface.h</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gab4faa0afdf35076914824200331defff"><div class="ttname"><a href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a></div><div class="ttdeci">#define AVERROR_EOF</div><div class="ttdoc">End of file.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00055">error.h:55</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad4791ea14975f098b649db7fcd731ce6a7fb3b6cc26688e1fe7ea658fe5b1133f"><div class="ttname"><a href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6a7fb3b6cc26688e1fe7ea658fe5b1133f">AVCOL_TRC_LINEAR</a></div><div class="ttdeci">@ AVCOL_TRC_LINEAR</div><div class="ttdoc">&quot;Linear transfer characteristics&quot;</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00492">pixfmt.h:492</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abc6126af1d45847bc59afa0aa3216b04afd72db05229114a325d16af23ae91fb5"><div class="ttname"><a href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04afd72db05229114a325d16af23ae91fb5">COLOR_FormatYUV420SemiPlanar</a></div><div class="ttdeci">@ COLOR_FormatYUV420SemiPlanar</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00169">mediacodecdec_common.c:169</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_gaffa24e7bd38e12dbac540d8b66461f97"><div class="ttname"><a href="group__lavu__math__rational.html#gaffa24e7bd38e12dbac540d8b66461f97">av_div_q</a></div><div class="ttdeci">AVRational av_div_q(AVRational b, AVRational c)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00088">rational.c:88</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html_acb8452e99cd75074b93800b532c6ea4b"><div class="ttname"><a href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">AVBufferRef::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00089">buffer.h:89</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_gafd07a13a4ddaa6015275cad6022d9ee3"><div class="ttname"><a href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a></div><div class="ttdeci">#define AV_TIME_BASE_Q</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00260">avutil.h:260</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_aa0272ffcd798bae7fd8b2fbabcaafb02"><div class="ttname"><a href="mediacodecdec__common_8c.html#aa0272ffcd798bae7fd8b2fbabcaafb02">OUTPUT_DEQUEUE_BLOCK_TIMEOUT_US</a></div><div class="ttdeci">#define OUTPUT_DEQUEUE_BLOCK_TIMEOUT_US</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00086">mediacodecdec_common.c:86</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a80673d88f6a983b2b1720c347105027e"><div class="ttname"><a href="mediacodecdec__common_8c.html#a80673d88f6a983b2b1720c347105027e">ff_mediacodec_dec_close</a></div><div class="ttdeci">int ff_mediacodec_dec_close(AVCodecContext *avctx, MediaCodecDecContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00901">mediacodecdec_common.c:901</a></div></div>
<div class="ttc" id="aqsvenc_8c_html_aacd2c6f4a09d71ea05bdcc1c2e9d42dd"><div class="ttname"><a href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a></div><div class="ttdeci">mfxU16 profile</div><div class="ttdef"><b>Definition:</b> <a href="qsvenc_8c_source.html#l00045">qsvenc.c:45</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a></div><div class="ttdeci">@ AVCOL_RANGE_JPEG</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00586">pixfmt.h:586</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a5cb9bb58b6920a4c6e44efde1e7901f0"><div class="ttname"><a href="mediacodecdec__common_8c.html#a5cb9bb58b6920a4c6e44efde1e7901f0">ff_mediacodec_dec_receive</a></div><div class="ttdeci">int ff_mediacodec_dec_receive(AVCodecContext *avctx, MediaCodecDecContext *s, AVFrame *frame, bool wait)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00760">mediacodecdec_common.c:760</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a650d4a553bb36734668106d6c2504efd"><div class="ttname"><a href="mediacodecdec__common_8c.html#a650d4a553bb36734668106d6c2504efd">OUTPUT_DEQUEUE_TIMEOUT_US</a></div><div class="ttdeci">#define OUTPUT_DEQUEUE_TIMEOUT_US</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00085">mediacodecdec_common.c:85</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab"><div class="ttname"><a href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab">AVCOL_TRC_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_TRC_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00486">pixfmt.h:486</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="ahwcontext_8h_html_acf25724be4b066a51ad86aa9214b0d34a773070fc89c1397360cb469ec6302de2"><div class="ttname"><a href="hwcontext_8h.html#acf25724be4b066a51ad86aa9214b0d34a773070fc89c1397360cb469ec6302de2">AV_HWDEVICE_TYPE_MEDIACODEC</a></div><div class="ttdeci">@ AV_HWDEVICE_TYPE_MEDIACODEC</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00038">hwcontext.h:38</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_device_context_html_a46055b48d1a40445d775b4ae24f77f20"><div class="ttname"><a href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">AVHWDeviceContext::hwctx</a></div><div class="ttdeci">void * hwctx</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00092">hwcontext.h:92</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_aad44c636df1e1cbbb77eee32709f8e48"><div class="ttname"><a href="mediacodecdec__common_8c.html#aad44c636df1e1cbbb77eee32709f8e48">ff_mediacodec_dec_is_flushing</a></div><div class="ttdeci">int ff_mediacodec_dec_is_flushing(AVCodecContext *avctx, MediaCodecDecContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00908">mediacodecdec_common.c:908</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga3e7f4c92db85ccba0b2a16dd0069842a"><div class="ttname"><a href="group__lavu__buffer.html#ga3e7f4c92db85ccba0b2a16dd0069842a">av_buffer_create</a></div><div class="ttdeci">AVBufferRef * av_buffer_create(uint8_t *data, int size, void(*free)(void *opaque, uint8_t *data), void *opaque, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00029">buffer.c:29</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7">AVColorPrimaries</a></div><div class="ttdeci">AVColorPrimaries</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00458">pixfmt.h:458</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a7d4dfbd5bd67f30fa29f50d24f560947"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a7d4dfbd5bd67f30fa29f50d24f560947">ff_AMediaCodec_releaseOutputBuffer</a></div><div class="ttdeci">int ff_AMediaCodec_releaseOutputBuffer(FFAMediaCodec *codec, size_t idx, int render)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01416">mediacodec_wrapper.c:1416</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab222f7d747dfdceff0a76999e09648c0"><div class="ttname"><a href="struct_a_v_codec_context.html#ab222f7d747dfdceff0a76999e09648c0">AVCodecContext::hwaccel_context</a></div><div class="ttdeci">void * hwaccel_context</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01702">avcodec.h:1702</a></div></div>
<div class="ttc" id="ahwcontext__mediacodec_8h_html"><div class="ttname"><a href="hwcontext__mediacodec_8h.html">hwcontext_mediacodec.h</a></div></div>
<div class="ttc" id="astruct_media_codec_buffer_html"><div class="ttname"><a href="struct_media_codec_buffer.html">MediaCodecBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8h_source.html#l00099">mediacodecdec_common.h:99</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="apixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85a32a0719616b0bb89f4be9d885341bfa4"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a32a0719616b0bb89f4be9d885341bfa4">AVCOL_SPC_BT470BG</a></div><div class="ttdeci">@ AVCOL_SPC_BT470BG</div><div class="ttdoc">also ITU-R BT601-6 625 / ITU-R BT1358 625 / ITU-R BT1700 625 PAL &amp; SECAM / IEC 61966-2-4 xvYCC601</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00518">pixfmt.h:518</a></div></div>
<div class="ttc" id="amediacodec__sw__buffer_8c_html_a57628d0d5aac90206939a376c482a09f"><div class="ttname"><a href="mediacodec__sw__buffer_8c.html#a57628d0d5aac90206939a376c482a09f">ff_mediacodec_sw_buffer_copy_yuv420_packed_semi_planar_64x32Tile2m8ka</a></div><div class="ttdeci">void ff_mediacodec_sw_buffer_copy_yuv420_packed_semi_planar_64x32Tile2m8ka(AVCodecContext *avctx, MediaCodecDecContext *s, uint8_t *data, size_t size, FFAMediaCodecBufferInfo *info, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__sw__buffer_8c_source.html#l00272">mediacodec_sw_buffer.c:272</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="astruct_a_v_media_codec_device_context_html"><div class="ttname"><a href="struct_a_v_media_codec_device_context.html">AVMediaCodecDeviceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__mediacodec_8h_source.html#l00027">hwcontext_mediacodec.h:27</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_adccd831892ad10e4658de48dadbf2292"><div class="ttname"><a href="mediacodec__wrapper_8c.html#adccd831892ad10e4658de48dadbf2292">ff_AMediaCodec_infoOutputFormatChanged</a></div><div class="ttdeci">int ff_AMediaCodec_infoOutputFormatChanged(FFAMediaCodec *codec, ssize_t idx)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01648">mediacodec_wrapper.c:1648</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3a41b3e5bde23b877799f6e72dac8ef3"><div class="ttname"><a href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">AVCodecContext::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1140</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a2e537781fe8a2a160e6310d0a62bb222"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a2e537781fe8a2a160e6310d0a62bb222">ff_AMediaFormat_toString</a></div><div class="ttdeci">char * ff_AMediaFormat_toString(FFAMediaFormat *format)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l00714">mediacodec_wrapper.c:714</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_aad458213cdd1854fb630ab68d625b9ed"><div class="ttname"><a href="mediacodec__wrapper_8c.html#aad458213cdd1854fb630ab68d625b9ed">ff_AMediaCodec_flush</a></div><div class="ttdeci">int ff_AMediaCodec_flush(FFAMediaCodec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01399">mediacodec_wrapper.c:1399</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a543a47ca2303350bec324cdd95b3472d"><div class="ttname"><a href="mediacodecdec__common_8c.html#a543a47ca2303350bec324cdd95b3472d">ff_mediacodec_dec_flush</a></div><div class="ttdeci">int ff_mediacodec_dec_flush(AVCodecContext *avctx, MediaCodecDecContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00883">mediacodecdec_common.c:883</a></div></div>
<div class="ttc" id="atranscode__aac_8c_html_a4fbb704fb96c36a78a36eee010306ce7"><div class="ttname"><a href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a></div><div class="ttdeci">static int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="transcode__aac_8c_source.html#l00647">transcode_aac.c:647</a></div></div>
<div class="ttc" id="agcc_2stdatomic_8h_html_a66aaef69cdadfe5e0eb87f6beff352df"><div class="ttname"><a href="gcc_2stdatomic_8h.html#a66aaef69cdadfe5e0eb87f6beff352df">atomic_fetch_sub</a></div><div class="ttdeci">#define atomic_fetch_sub(object, operand)</div><div class="ttdef"><b>Definition:</b> <a href="gcc_2stdatomic_8h_source.html#l00137">stdatomic.h:137</a></div></div>
<div class="ttc" id="astruct_f_f_a_media_codec_buffer_info_html"><div class="ttname"><a href="struct_f_f_a_media_codec_buffer_info.html">FFAMediaCodecBufferInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8h_source.html#l00085">mediacodec_wrapper.h:85</a></div></div>
<div class="ttc" id="amediacodecdec__common_8h_html"><div class="ttname"><a href="mediacodecdec__common_8h.html">mediacodecdec_common.h</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_device_context_html"><div class="ttname"><a href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00061">hwcontext.h:61</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a891907f1ddd8be9b70bb26d35ce9065e"><div class="ttname"><a href="mediacodecdec__common_8c.html#a891907f1ddd8be9b70bb26d35ce9065e">INPUT_DEQUEUE_TIMEOUT_US</a></div><div class="ttdeci">#define INPUT_DEQUEUE_TIMEOUT_US</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00084">mediacodecdec_common.c:84</a></div></div>
<div class="ttc" id="astruct_a_v_media_codec_device_context_html_aa11ea198d48b024bf2c39e9a605fc06b"><div class="ttname"><a href="struct_a_v_media_codec_device_context.html#aa11ea198d48b024bf2c39e9a605fc06b">AVMediaCodecDeviceContext::surface</a></div><div class="ttdeci">void * surface</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__mediacodec_8h_source.html#l00033">hwcontext_mediacodec.h:33</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a99fb83031ce9923c84392b4e92f956b5ae2d194f7033be362a91fc50d5a69f248"><div class="ttname"><a href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5ae2d194f7033be362a91fc50d5a69f248">COLOR_TRANSFER_LINEAR</a></div><div class="ttdeci">@ COLOR_TRANSFER_LINEAR</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00145">mediacodecdec_common.c:145</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a51871ef46bb6f9428b35c0330bcb0ae8"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a51871ef46bb6f9428b35c0330bcb0ae8">ff_AMediaCodec_infoOutputBuffersChanged</a></div><div class="ttdeci">int ff_AMediaCodec_infoOutputBuffersChanged(FFAMediaCodec *codec, ssize_t idx)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01643">mediacodec_wrapper.c:1643</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga030300ea4843c53b2fe178a434964b39"><div class="ttname"><a href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a></div><div class="ttdeci">#define AV_LOG_TRACE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00220">log.h:220</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a99fb83031ce9923c84392b4e92f956b5ade8447173a035e1c839611e0cf086158"><div class="ttname"><a href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5ade8447173a035e1c839611e0cf086158">COLOR_TRANSFER_SDR_VIDEO</a></div><div class="ttdeci">@ COLOR_TRANSFER_SDR_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00146">mediacodecdec_common.c:146</a></div></div>
<div class="ttc" id="amediacodec__surface_8c_html_af5e3e34b96390eeb497f158a7768648f"><div class="ttname"><a href="mediacodec__surface_8c.html#af5e3e34b96390eeb497f158a7768648f">ff_mediacodec_surface_ref</a></div><div class="ttdeci">FFANativeWindow * ff_mediacodec_surface_ref(void *surface, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__surface_8c_source.html#l00028">mediacodec_surface.c:28</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_ae98e1b1dbb3bcb1a34706f22ea1bae9a"><div class="ttname"><a href="mediacodecdec__common_8c.html#ae98e1b1dbb3bcb1a34706f22ea1bae9a">mcdec_map_color_format</a></div><div class="ttdeci">static enum AVPixelFormat mcdec_map_color_format(AVCodecContext *avctx, MediaCodecDecContext *s, int color_format)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00001">mediacodecdec_common.c:196</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abc6126af1d45847bc59afa0aa3216b04a66919704a91ef735bc974e8e8c6f2074"><div class="ttname"><a href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a66919704a91ef735bc974e8e8c6f2074">COLOR_FormatYCbYCr</a></div><div class="ttdeci">@ COLOR_FormatYCbYCr</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00170">mediacodecdec_common.c:170</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a667b04d7fb6ef46db4da4af554c5b6f7"><div class="ttname"><a href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a></div><div class="ttdeci">#define width</div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_gaa818f8f1011d69acc50c1f29cb85e576"><div class="ttname"><a href="group__lavu__buffer.html#gaa818f8f1011d69acc50c1f29cb85e576">AV_BUFFER_FLAG_READONLY</a></div><div class="ttdeci">#define AV_BUFFER_FLAG_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00113">buffer.h:113</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a7d537039ea0e18164d9edb0b5ca984dd"><div class="ttname"><a href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample format(the sample packing is implied by the sample format) and sample rate. The lists are not just lists</div></div>
<div class="ttc" id="apixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85a8a3f2b5ebbb2d5734435fe23837cd20c"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a8a3f2b5ebbb2d5734435fe23837cd20c">AVCOL_SPC_SMPTE170M</a></div><div class="ttdeci">@ AVCOL_SPC_SMPTE170M</div><div class="ttdoc">also ITU-R BT601-6 525 / ITU-R BT1358 525 / ITU-R BT1700 NTSC</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00519">pixfmt.h:519</a></div></div>
<div class="ttc" id="amips_8txt_html_a1fbad9337ceb50622aa5cb6b2ff47c09"><div class="ttname"><a href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a></div><div class="ttdeci">MIPS optimizations info</div><div class="ttdef"><b>Definition:</b> <a href="mips_8txt_source.html#l00001">mips.txt:2</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_aa1219ee396a270ba57fd4f2306b64c6e"><div class="ttname"><a href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00162">libkvazaar.c:300</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5252d34fbce300228d4dbda19a8c3293"><div class="ttname"><a href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">AVCodecContext::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00905">avcodec.h:905</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="astruct_a_v_media_codec_context_html_aa07685529de44aaffc3665f8e57b1cda"><div class="ttname"><a href="struct_a_v_media_codec_context.html#aa07685529de44aaffc3665f8e57b1cda">AVMediaCodecContext::surface</a></div><div class="ttdeci">void * surface</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec_8h_source.html#l00038">mediacodec.h:38</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gaf02994a8bbeaa91d4757df179cbe567f"><div class="ttname"><a href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a></div><div class="ttdeci">int64_t av_rescale_q(int64_t a, AVRational bq, AVRational cq)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00142">mathematics.c:142</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV420P</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, (1 Cr &amp; Cb sample per 2x2 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00066">pixfmt.h:66</a></div></div>
<div class="ttc" id="amediacodec__sw__buffer_8c_html_af6fa3df85cfddfa68bcbdbdb6dced212"><div class="ttname"><a href="mediacodec__sw__buffer_8c.html#af6fa3df85cfddfa68bcbdbdb6dced212">ff_mediacodec_sw_buffer_copy_yuv420_packed_semi_planar</a></div><div class="ttdeci">void ff_mediacodec_sw_buffer_copy_yuv420_packed_semi_planar(AVCodecContext *avctx, MediaCodecDecContext *s, uint8_t *data, size_t size, FFAMediaCodecBufferInfo *info, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__sw__buffer_8c_source.html#l00181">mediacodec_sw_buffer.c:181</a></div></div>
<div class="ttc" id="avf__selectivecolor_8c_html_a9e4497f08cd92bd3d2f92b7d69486f43"><div class="ttname"><a href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a></div><div class="ttdeci">color_range</div><div class="ttdef"><b>Definition:</b> <a href="vf__selectivecolor_8c_source.html#l00044">vf_selectivecolor.c:44</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_acced2a78b2a440317feed51f3e505d1d"><div class="ttname"><a href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a></div><div class="ttdeci">#define atomic_load(object)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00093">stdatomic.h:93</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942">AVCOL_PRI_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_PRI_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00461">pixfmt.h:461</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7a1aeb4f44414c396b28b3f392313e50ae"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a1aeb4f44414c396b28b3f392313e50ae">AVCOL_PRI_BT470BG</a></div><div class="ttdeci">@ AVCOL_PRI_BT470BG</div><div class="ttdoc">also ITU-R BT601-6 625 / ITU-R BT1358 625 / ITU-R BT1700 625 PAL &amp; SECAM</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00465">pixfmt.h:465</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a99fb83031ce9923c84392b4e92f956b5a3cbe8586787105386a94ebd041f719f2"><div class="ttname"><a href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5a3cbe8586787105386a94ebd041f719f2">COLOR_TRANSFER_HLG</a></div><div class="ttdeci">@ COLOR_TRANSFER_HLG</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00148">mediacodecdec_common.c:148</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a5917bc1898c0390acd2cedc1d5679d7f"><div class="ttname"><a href="mediacodecdec__common_8c.html#a5917bc1898c0390acd2cedc1d5679d7f">mcdec_get_color_range</a></div><div class="ttdeci">static enum AVColorRange mcdec_get_color_range(int color_range)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00001">mediacodecdec_common.c:93</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5af877f92c24d6fae08d0b348988f03243"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5af877f92c24d6fae08d0b348988f03243">AV_PIX_FMT_MEDIACODEC</a></div><div class="ttdeci">@ AV_PIX_FMT_MEDIACODEC</div><div class="ttdoc">hardware decoding through MediaCodec</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00293">pixfmt.h:293</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7ad882a69d6c7cf33fa22a5717c63baf19"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7ad882a69d6c7cf33fa22a5717c63baf19">AVCOL_PRI_SMPTE170M</a></div><div class="ttdeci">@ AVCOL_PRI_SMPTE170M</div><div class="ttdoc">also ITU-R BT601-6 525 / ITU-R BT1358 525 / ITU-R BT1700 NTSC</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00466">pixfmt.h:466</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abc6126af1d45847bc59afa0aa3216b04ac36a8d900812f20eb74e286549fdea0d"><div class="ttname"><a href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ac36a8d900812f20eb74e286549fdea0d">COLOR_FormatYUV420Planar</a></div><div class="ttdeci">@ COLOR_FormatYUV420Planar</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00168">mediacodecdec_common.c:168</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a6b6d3f0ba6dfe4c55718d1bcbdd11c62"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a6b6d3f0ba6dfe4c55718d1bcbdd11c62">ff_AMediaCodec_queueInputBuffer</a></div><div class="ttdeci">int ff_AMediaCodec_queueInputBuffer(FFAMediaCodec *codec, size_t idx, off_t offset, size_t size, uint64_t time, uint32_t flags)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01467">mediacodec_wrapper.c:1467</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga6eff035c271caa5a533987a1e00ad43e"><div class="ttname"><a href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a></div><div class="ttdeci">struct AVRational AVRational</div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a026e29351f9ca20f19fb60a41d4dfc7a"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a026e29351f9ca20f19fb60a41d4dfc7a">ff_AMediaCodec_getInputBuffer</a></div><div class="ttdeci">uint8_t * ff_AMediaCodec_getInputBuffer(FFAMediaCodec *codec, size_t idx, size_t *out_size)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01519">mediacodec_wrapper.c:1519</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga135e9e929b5033bb8f68322497b2effc"><div class="ttname"><a href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a></div><div class="ttdeci">void av_buffer_unref(AVBufferRef **buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00125">buffer.c:125</a></div></div>
<div class="ttc" id="astruct_f_f_a_media_format_html"><div class="ttname"><a href="struct_f_f_a_media_format.html">FFAMediaFormat</a></div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l00162">mediacodec_wrapper.c:162</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7a4f1c38f3e06cd2c49b28046bbf3a4cbd"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a4f1c38f3e06cd2c49b28046bbf3a4cbd">AVCOL_PRI_BT709</a></div><div class="ttdeci">@ AVCOL_PRI_BT709</div><div class="ttdoc">also ITU-R BT1361 / IEC 61966-2-4 / SMPTE RP177 Annex B</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00460">pixfmt.h:460</a></div></div>
<div class="ttc" id="amediacodec__sw__buffer_8h_html"><div class="ttname"><a href="mediacodec__sw__buffer_8h.html">mediacodec_sw_buffer.h</a></div></div>
<div class="ttc" id="amediacodec__surface_8c_html_ac296c4368e35b9023dc28fa9a2cf8be5"><div class="ttname"><a href="mediacodec__surface_8c.html#ac296c4368e35b9023dc28fa9a2cf8be5">ff_mediacodec_surface_unref</a></div><div class="ttdeci">int ff_mediacodec_surface_unref(FFANativeWindow *window, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__surface_8c_source.html#l00040">mediacodec_surface.c:40</a></div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_aaa98712541b4ef0d8655ae94d33dedb2"><div class="ttname"><a href="mediacodecdec__common_8c.html#aaa98712541b4ef0d8655ae94d33dedb2">ff_mediacodec_dec_ref</a></div><div class="ttdeci">static void ff_mediacodec_dec_ref(MediaCodecDecContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00223">mediacodecdec_common.c:223</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_aeaab6ec4af58ac419c017ab0159120c9"><div class="ttname"><a href="mediacodec__wrapper_8c.html#aeaab6ec4af58ac419c017ab0159120c9">ff_AMediaCodec_getBufferFlagEndOfStream</a></div><div class="ttdeci">int ff_AMediaCodec_getBufferFlagEndOfStream(FFAMediaCodec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01658">mediacodec_wrapper.c:1658</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aaa374becbc2b5ee0bc1886048d151ea3e"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aaa374becbc2b5ee0bc1886048d151ea3e">AVCOL_RANGE_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_RANGE_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00552">pixfmt.h:552</a></div></div>
<div class="ttc" id="agxfenc_8c_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="gxfenc_8c_source.html#l00089">gxfenc.c:89</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7adee9de223d6a8683fd2177b43444404c"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7adee9de223d6a8683fd2177b43444404c">AVCOL_PRI_BT2020</a></div><div class="ttdeci">@ AVCOL_PRI_BT2020</div><div class="ttdoc">ITU-R BT2020.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00469">pixfmt.h:469</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_ad29cb13f050dccba987abb77dd5d0235"><div class="ttname"><a href="mediacodec__wrapper_8c.html#ad29cb13f050dccba987abb77dd5d0235">ff_AMediaCodec_dequeueOutputBuffer</a></div><div class="ttdeci">ssize_t ff_AMediaCodec_dequeueOutputBuffer(FFAMediaCodec *codec, FFAMediaCodecBufferInfo *info, int64_t timeoutUs)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01484">mediacodec_wrapper.c:1484</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_adcc1d98c48b67ec7505cd7aa64557232"><div class="ttname"><a href="mediacodecdec__common_8c.html#adcc1d98c48b67ec7505cd7aa64557232">AMEDIAFORMAT_GET_INT32</a></div><div class="ttdeci">#define AMEDIAFORMAT_GET_INT32(name, key, mandatory)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00438">mediacodecdec_common.c:438</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abc6126af1d45847bc59afa0aa3216b04ad656f72fc84bc31376cecc72512c28b2"><div class="ttname"><a href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ad656f72fc84bc31376cecc72512c28b2">COLOR_FormatAndroidOpaque</a></div><div class="ttdeci">@ COLOR_FormatAndroidOpaque</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00171">mediacodecdec_common.c:171</a></div></div>
<div class="ttc" id="amediacodec__sw__buffer_8c_html_a96251fdfaacb469a4810f489c423139f"><div class="ttname"><a href="mediacodec__sw__buffer_8c.html#a96251fdfaacb469a4810f489c423139f">ff_mediacodec_sw_buffer_copy_yuv420_semi_planar</a></div><div class="ttdeci">void ff_mediacodec_sw_buffer_copy_yuv420_semi_planar(AVCodecContext *avctx, MediaCodecDecContext *s, uint8_t *data, size_t size, FFAMediaCodecBufferInfo *info, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__sw__buffer_8c_source.html#l00131">mediacodec_sw_buffer.c:131</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a7eb5f10fd39bed47af65d4defc9bce1d"><div class="ttname"><a href="mediacodecdec__common_8c.html#a7eb5f10fd39bed47af65d4defc9bce1d">mediacodec_dec_parse_format</a></div><div class="ttdeci">static int mediacodec_dec_parse_format(AVCodecContext *avctx, MediaCodecDecContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00449">mediacodecdec_common.c:449</a></div></div>
<div class="ttc" id="amediacodec__sw__buffer_8c_html_af0eaac1b20ee73c95ca9c631e85488e6"><div class="ttname"><a href="mediacodec__sw__buffer_8c.html#af0eaac1b20ee73c95ca9c631e85488e6">ff_mediacodec_sw_buffer_copy_yuv420_planar</a></div><div class="ttdeci">void ff_mediacodec_sw_buffer_copy_yuv420_planar(AVCodecContext *avctx, MediaCodecDecContext *s, uint8_t *data, size_t size, FFAMediaCodecBufferInfo *info, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__sw__buffer_8c_source.html#l00076">mediacodec_sw_buffer.c:76</a></div></div>
<div class="ttc" id="adecode_8c_html_a0d5adb2b84051826883605b3ab4d1bab"><div class="ttname"><a href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a></div><div class="ttdeci">int ff_get_buffer(AVCodecContext *avctx, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01879">decode.c:1879</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8h_html_a9a6d528cd4bc80b959013344d0a2c114"><div class="ttname"><a href="mediacodec__wrapper_8h.html#a9a6d528cd4bc80b959013344d0a2c114">ff_AMediaCodec_createCodecByName</a></div><div class="ttdeci">FFAMediaCodec * ff_AMediaCodec_createCodecByName(const char *name)</div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a427c4a56d69a1db660a0de68c975bd1f"><div class="ttname"><a href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a427c4a56d69a1db660a0de68c975bd1f">COLOR_STANDARD_BT709</a></div><div class="ttdeci">@ COLOR_STANDARD_BT709</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00106">mediacodecdec_common.c:106</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad4791ea14975f098b649db7fcd731ce6a3124d1ff8a5a2f7e98d3076a349a8043"><div class="ttname"><a href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6a3124d1ff8a5a2f7e98d3076a349a8043">AVCOL_TRC_SMPTEST2084</a></div><div class="ttdeci">@ AVCOL_TRC_SMPTEST2084</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00501">pixfmt.h:501</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a0bc16a184a3a7b80b891380e67f645bb"><div class="ttname"><a href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a0bc16a184a3a7b80b891380e67f645bb">COLOR_STANDARD_BT601_PAL</a></div><div class="ttdeci">@ COLOR_STANDARD_BT601_PAL</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00107">mediacodecdec_common.c:107</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a31bd2dc1422be1482fa986cf4bd6fddd"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a31bd2dc1422be1482fa986cf4bd6fddd">ff_AMediaCodec_start</a></div><div class="ttdeci">int ff_AMediaCodec_start(FFAMediaCodec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01365">mediacodec_wrapper.c:1365</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_ga2eaefe702f95f619ea6f2d08afa01be1"><div class="ttname"><a href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a></div><div class="ttdeci">#define AV_NOPTS_VALUE</div><div class="ttdoc">Undefined timestamp value.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00248">avutil.h:248</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a25b09d7cc597dd62e7c1788fde13a60b"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a25b09d7cc597dd62e7c1788fde13a60b">ff_AMediaCodec_delete</a></div><div class="ttdeci">int ff_AMediaCodec_delete(FFAMediaCodec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01289">mediacodec_wrapper.c:1289</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_acf8113e490f9e7b57465e65af9c0c75c"><div class="ttname"><a href="struct_a_v_codec_context.html#acf8113e490f9e7b57465e65af9c0c75c">AVCodecContext::hw_device_ctx</a></div><div class="ttdeci">AVBufferRef * hw_device_ctx</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02278">avcodec.h:2278</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abc6126af1d45847bc59afa0aa3216b04a3691afb35d9b4b5e7aea0d745953f0e1"><div class="ttname"><a href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a3691afb35d9b4b5e7aea0d745953f0e1">COLOR_TI_FormatYUV420PackedSemiPlanarInterlaced</a></div><div class="ttdeci">@ COLOR_TI_FormatYUV420PackedSemiPlanarInterlaced</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00176">mediacodecdec_common.c:176</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a7331e302ea7bb48e0b605a069576e135"><div class="ttname"><a href="mediacodecdec__common_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00181">mediacodecdec_common.c:182</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abc6126af1d45847bc59afa0aa3216b04acde4667c7d3051af061a175cd7773582"><div class="ttname"><a href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04acde4667c7d3051af061a175cd7773582">COLOR_QCOM_FormatYUV420PackedSemiPlanar64x32Tile2m8ka</a></div><div class="ttdeci">@ COLOR_QCOM_FormatYUV420PackedSemiPlanar64x32Tile2m8ka</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00174">mediacodecdec_common.c:174</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55bac90b5ec1e7148e4534d4b451d0d4f87f"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac90b5ec1e7148e4534d4b451d0d4f87f">COLOR_RANGE_LIMITED</a></div><div class="ttdeci">@ COLOR_RANGE_LIMITED</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00090">mediacodecdec_common.c:90</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga9c520e483ba8648495620ffdb4c491f2"><div class="ttname"><a href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a></div><div class="ttdeci">#define AVERROR_EXTERNAL</div><div class="ttdoc">Generic error in an external library.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00057">error.h:57</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_ab8be467f00ee7a0ae290de7eec963f4e"><div class="ttname"><a href="mediacodec__wrapper_8c.html#ab8be467f00ee7a0ae290de7eec963f4e">ff_AMediaCodecProfile_getProfileFromAVCodecContext</a></div><div class="ttdeci">int ff_AMediaCodecProfile_getProfileFromAVCodecContext(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l00313">mediacodec_wrapper.c:313</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a68731b4b6b79260c5fe16a3c20807f92"><div class="ttname"><a href="mediacodecdec__common_8c.html#a68731b4b6b79260c5fe16a3c20807f92">mediacodec_dec_flush_codec</a></div><div class="ttdeci">static int mediacodec_dec_flush_codec(AVCodecContext *avctx, MediaCodecDecContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00542">mediacodecdec_common.c:542</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_af1e43ce27b8e9bec2f1299fd5d3ea87f"><div class="ttname"><a href="mediacodecdec__common_8c.html#af1e43ce27b8e9bec2f1299fd5d3ea87f">mediacodec_buffer_release</a></div><div class="ttdeci">static void mediacodec_buffer_release(void *opaque, uint8_t *data)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00254">mediacodecdec_common.c:254</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a66a312eb97444d971501762ea5b5079c"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a66a312eb97444d971501762ea5b5079c">ff_AMediaCodec_dequeueInputBuffer</a></div><div class="ttdeci">ssize_t ff_AMediaCodec_dequeueInputBuffer(FFAMediaCodec *codec, int64_t timeoutUs)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01450">mediacodec_wrapper.c:1450</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba17ffbfb5d1db6df4a2410ee4db6415f3"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba17ffbfb5d1db6df4a2410ee4db6415f3">COLOR_RANGE_FULL</a></div><div class="ttdeci">@ COLOR_RANGE_FULL</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00089">mediacodecdec_common.c:89</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a7e5429f3cbd76dba536b3024cb0b0707"><div class="ttname"><a href="mediacodecdec__common_8c.html#a7e5429f3cbd76dba536b3024cb0b0707">mediacodec_wrap_sw_buffer</a></div><div class="ttdeci">static int mediacodec_wrap_sw_buffer(AVCodecContext *avctx, MediaCodecDecContext *s, uint8_t *data, size_t size, ssize_t index, FFAMediaCodecBufferInfo *info, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00355">mediacodecdec_common.c:355</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_ad5c6d1015fbafc1bbc0271dc4613f7be"><div class="ttname"><a href="mediacodecdec__common_8c.html#ad5c6d1015fbafc1bbc0271dc4613f7be">ff_mediacodec_dec_unref</a></div><div class="ttdeci">static void ff_mediacodec_dec_unref(MediaCodecDecContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00228">mediacodecdec_common.c:228</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a88335eb87d4f17639ecf7d00c99c11af"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a88335eb87d4f17639ecf7d00c99c11af">ff_AMediaCodec_infoTryAgainLater</a></div><div class="ttdeci">int ff_AMediaCodec_infoTryAgainLater(FFAMediaCodec *codec, ssize_t idx)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01638">mediacodec_wrapper.c:1638</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a17efc7493b50d8dabf1d1f1c9661c046"><div class="ttname"><a href="mediacodecdec__common_8c.html#a17efc7493b50d8dabf1d1f1c9661c046">mcdec_get_color_space</a></div><div class="ttdeci">static enum AVColorSpace mcdec_get_color_space(int color_standard)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00001">mediacodecdec_common.c:112</a></div></div>
<div class="ttc" id="astruct_media_codec_dec_context_html"><div class="ttname"><a href="struct_media_codec_dec_context.html">MediaCodecDecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8h_source.html#l00037">mediacodecdec_common.h:37</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="alog_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8h_html"><div class="ttname"><a href="mediacodec__wrapper_8h.html">mediacodec_wrapper.h</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a4624d6e0c5e2e415e4cbecdc0dcbb725"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a4624d6e0c5e2e415e4cbecdc0dcbb725">ff_AMediaCodec_cleanOutputBuffers</a></div><div class="ttdeci">int ff_AMediaCodec_cleanOutputBuffers(FFAMediaCodec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01673">mediacodec_wrapper.c:1673</a></div></div>
<div class="ttc" id="apixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85a766a63c9ca065ba454f1d83161350055"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a766a63c9ca065ba454f1d83161350055">AVCOL_SPC_BT2020_NCL</a></div><div class="ttdeci">@ AVCOL_SPC_BT2020_NCL</div><div class="ttdoc">ITU-R BT2020 non-constant luminance system.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00523">pixfmt.h:523</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a5355f615a070bf4f39770649d189cb7d"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a5355f615a070bf4f39770649d189cb7d">ff_AMediaCodec_getOutputBuffer</a></div><div class="ttdeci">uint8_t * ff_AMediaCodec_getOutputBuffer(FFAMediaCodec *codec, size_t idx, size_t *out_size)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01567">mediacodec_wrapper.c:1567</a></div></div>
<div class="ttc" id="apixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85">AVColorSpace</a></div><div class="ttdeci">AVColorSpace</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00512">pixfmt.h:512</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a444cb8f608ebc0d9d64c099ef0dc66f6"><div class="ttname"><a href="mediacodecdec__common_8c.html#a444cb8f608ebc0d9d64c099ef0dc66f6">mcdec_get_color_trc</a></div><div class="ttdeci">static enum AVColorTransferCharacteristic mcdec_get_color_trc(int color_transfer)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00001">mediacodecdec_common.c:151</a></div></div>
<div class="ttc" id="acommon_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="apixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2">AVCOL_SPC_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_SPC_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00515">pixfmt.h:515</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a></div><div class="ttdeci">@ AVCOL_RANGE_MPEG</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00569">pixfmt.h:569</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abdb385af2d709b55b1938e5b3bf0152d"><div class="ttname"><a href="mediacodecdec__common_8c.html#abdb385af2d709b55b1938e5b3bf0152d">mcdec_get_color_pri</a></div><div class="ttdeci">static enum AVColorPrimaries mcdec_get_color_pri(int color_standard)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00001">mediacodecdec_common.c:128</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a2c0c8ef547b0bc00e2cf824f793c3bd3"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a2c0c8ef547b0bc00e2cf824f793c3bd3">ff_AMediaCodec_configure</a></div><div class="ttdeci">int ff_AMediaCodec_configure(FFAMediaCodec *codec, const FFAMediaFormat *format, void *surface, void *crypto, uint32_t flags)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01348">mediacodec_wrapper.c:1348</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="apixfmt_8h_html"><div class="ttname"><a href="pixfmt_8h.html">pixfmt.h</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a></div><div class="ttdeci">@ AV_PIX_FMT_NV12</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, 1 plane for Y and 1 plane for the UV components, which are interleaved (firs...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00089">pixfmt.h:89</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="astruct_a_v_media_codec_context_html"><div class="ttname"><a href="struct_a_v_media_codec_context.html">AVMediaCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="mediacodec_8h_source.html#l00033">mediacodec.h:33</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a99fb83031ce9923c84392b4e92f956b5a50719b4a0144487f5ce9dbd96427a4d1"><div class="ttname"><a href="mediacodecdec__common_8c.html#a99fb83031ce9923c84392b4e92f956b5a50719b4a0144487f5ce9dbd96427a4d1">COLOR_TRANSFER_ST2084</a></div><div class="ttdeci">@ COLOR_TRANSFER_ST2084</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00147">mediacodecdec_common.c:147</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="asinewin__tablegen__template_8c_html_a3508a98d3ee7e2c9a4841fe264cf70f7"><div class="ttname"><a href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a></div><div class="ttdeci">#define FF_ARRAY_ELEMS(a)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen__template_8c_source.html#l00038">sinewin_tablegen_template.c:38</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_a6f234e0cc3f8e214f4934844601ae85c"><div class="ttname"><a href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a></div><div class="ttdeci">int ff_set_sar(AVCodecContext *avctx, AVRational sar)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00121">utils.c:121</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad4791ea14975f098b649db7fcd731ce6aa21a497d0b7f2d0eab46faf9372c04a3"><div class="ttname"><a href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6aa21a497d0b7f2d0eab46faf9372c04a3">AVCOL_TRC_ARIB_STD_B67</a></div><div class="ttdeci">@ AVCOL_TRC_ARIB_STD_B67</div><div class="ttdoc">ARIB STD-B67, known as &quot;Hybrid log-gamma&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00504">pixfmt.h:504</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ab5bf43ceeffd5c440d539ae2ed025827"><div class="ttname"><a href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a></div><div class="ttdeci">the frame and frame reference mechanism is intended to as much as expensive copies of that data while still allowing the filters to produce correct results The data is stored in buffers represented by AVFrame structures Several references can point to the same frame buffer</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00049">filter_design.txt:49</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="astruct_f_f_a_media_codec_html"><div class="ttname"><a href="struct_f_f_a_media_codec.html">FFAMediaCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l00274">mediacodec_wrapper.c:274</a></div></div>
<div class="ttc" id="agcc_2stdatomic_8h_html_aedf6fb62e0fc9e8f8cf2e3685f0a1e88"><div class="ttname"><a href="gcc_2stdatomic_8h.html#aedf6fb62e0fc9e8f8cf2e3685f0a1e88">atomic_fetch_add</a></div><div class="ttdeci">#define atomic_fetch_add(object, operand)</div><div class="ttdef"><b>Definition:</b> <a href="gcc_2stdatomic_8h_source.html#l00131">stdatomic.h:131</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_a52569e2fb090f0600f7f6e35cc612419"><div class="ttname"><a href="mediacodec__wrapper_8c.html#a52569e2fb090f0600f7f6e35cc612419">ff_AMediaFormat_delete</a></div><div class="ttdeci">int ff_AMediaFormat_delete(FFAMediaFormat *format)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l00692">mediacodec_wrapper.c:692</a></div></div>
<div class="ttc" id="amediacodec__wrapper_8c_html_ab7e1d34a8076668cc0ef8a8aae29a3f0"><div class="ttname"><a href="mediacodec__wrapper_8c.html#ab7e1d34a8076668cc0ef8a8aae29a3f0">ff_AMediaCodec_getOutputFormat</a></div><div class="ttdeci">FFAMediaFormat * ff_AMediaCodec_getOutputFormat(FFAMediaCodec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodec__wrapper_8c_source.html#l01615">mediacodec_wrapper.c:1615</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad4791ea14975f098b649db7fcd731ce6a0afb6440afaeda94f18dd99629b6b741"><div class="ttname"><a href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6a0afb6440afaeda94f18dd99629b6b741">AVCOL_TRC_SMPTE170M</a></div><div class="ttdeci">@ AVCOL_TRC_SMPTE170M</div><div class="ttdoc">also ITU-R BT601-6 525 or 625 / ITU-R BT1358 525 or 625 / ITU-R BT1700 NTSC</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00490">pixfmt.h:490</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_ac0ac7c142157ae64dda6dac7a595174d"><div class="ttname"><a href="mediacodecdec__common_8c.html#ac0ac7c142157ae64dda6dac7a595174d">color_format</a></div><div class="ttdeci">int color_format</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00181">mediacodecdec_common.c:181</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a5837cafc419c2b5ecdb1dfa330675d13"><div class="ttname"><a href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_DISABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00084">internal.h:84</a></div></div>
<div class="ttc" id="alibsvtav1_8c_html_a710bce51374aba96ab04912897666c35"><div class="ttname"><a href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a></div><div class="ttdeci">const char * desc</div><div class="ttdef"><b>Definition:</b> <a href="libsvtav1_8c_source.html#l00079">libsvtav1.c:79</a></div></div>
<div class="ttc" id="amem_8h_html"><div class="ttname"><a href="mem_8h.html">mem.h</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ac8b736a8223c5348ad85ffff597401ff"><div class="ttname"><a href="libavcodec_2internal_8h.html#ac8b736a8223c5348ad85ffff597401ff">ff_set_dimensions</a></div><div class="ttdeci">int ff_set_dimensions(AVCodecContext *s, int width, int height)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00106">utils.c:106</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a3febe7d093cb9082b305c91c0f69aa19"><div class="ttname"><a href="mediacodecdec__common_8c.html#a3febe7d093cb9082b305c91c0f69aa19">mediacodec_wrap_hw_buffer</a></div><div class="ttdeci">static int mediacodec_wrap_hw_buffer(AVCodecContext *avctx, MediaCodecDecContext *s, ssize_t index, FFAMediaCodecBufferInfo *info, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00273">mediacodecdec_common.c:273</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a0452833e3ab6ddd7acbf82817a7818a4"><div class="ttname"><a href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">AVFrame::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00401">frame.h:401</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0425c77b3d06d71e5db88b1d7e1b37f2"><div class="ttname"><a href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">AVCodecContext::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00721">avcodec.h:736</a></div></div>
<div class="ttc" id="amacros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abc6126af1d45847bc59afa0aa3216b04a1416fa07565bc8f9f10cef1ec59c9e60"><div class="ttname"><a href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a1416fa07565bc8f9f10cef1ec59c9e60">COLOR_TI_FormatYUV420PackedSemiPlanar</a></div><div class="ttdeci">@ COLOR_TI_FormatYUV420PackedSemiPlanar</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00175">mediacodecdec_common.c:175</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a18c0e80844283da4d69d0e73c3b03641"><div class="ttname"><a href="mediacodecdec__common_8c.html#a18c0e80844283da4d69d0e73c3b03641">ff_mediacodec_dec_send</a></div><div class="ttdeci">int ff_mediacodec_dec_send(AVCodecContext *avctx, MediaCodecDecContext *s, AVPacket *pkt, bool wait)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00666">mediacodecdec_common.c:666</a></div></div>
<div class="ttc" id="atimestamp_8h_html"><div class="ttname"><a href="timestamp_8h.html">timestamp.h</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a255bf7100a4ba6dcb6ee5d87740a4f35"><div class="ttname"><a href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">AVCodecContext::color_range</a></div><div class="ttdeci">enum AVColorRange color_range</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1161</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_a8b3adcdddd8db2f1a701f67c86a6ff24"><div class="ttname"><a href="mediacodecdec__common_8c.html#a8b3adcdddd8db2f1a701f67c86a6ff24">color_formats</a></div><div class="ttdeci">static const struct @4 color_formats[]</div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_af8a9cbe9495fcafaa892b24b383acf96"><div class="ttname"><a href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a></div><div class="ttdeci">#define atomic_init(obj, value)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00033">stdatomic.h:33</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abc6126af1d45847bc59afa0aa3216b04a24681684eab9777194afebb20e1aa422"><div class="ttname"><a href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04a24681684eab9777194afebb20e1aa422">COLOR_QCOM_FormatYUV420SemiPlanar32m</a></div><div class="ttdeci">@ COLOR_QCOM_FormatYUV420SemiPlanar32m</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00173">mediacodecdec_common.c:173</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="apixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85a23e7d1012e354bbfcb62642e537d33cb"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a23e7d1012e354bbfcb62642e537d33cb">AVCOL_SPC_BT709</a></div><div class="ttdeci">@ AVCOL_SPC_BT709</div><div class="ttdoc">also ITU-R BT1361 / IEC 61966-2-4 xvYCC709 / SMPTE RP177 Annex B</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00514">pixfmt.h:514</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589a"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589a">AVColorRange</a></div><div class="ttdeci">AVColorRange</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00551">pixfmt.h:551</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_abc6126af1d45847bc59afa0aa3216b04ad7bc6fa2fb391588d53b34a7cda6c74d"><div class="ttname"><a href="mediacodecdec__common_8c.html#abc6126af1d45847bc59afa0aa3216b04ad7bc6fa2fb391588d53b34a7cda6c74d">COLOR_QCOM_FormatYUV420SemiPlanar</a></div><div class="ttdeci">@ COLOR_QCOM_FormatYUV420SemiPlanar</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00172">mediacodecdec_common.c:172</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a33a289c990bc3fbcad01c4a09f34da38"><div class="ttname"><a href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">AVCodecContext::pkt_timebase</a></div><div class="ttdeci">AVRational pkt_timebase</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02083">avcodec.h:2083</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8cd8caa7d40319324ce3d879a2edbd9f"><div class="ttname"><a href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">AVCodecContext::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1154</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a9d7d7f10b5564df7f84dc2ffaca54c79"><div class="ttname"><a href="mediacodecdec__common_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a9d7d7f10b5564df7f84dc2ffaca54c79">COLOR_STANDARD_BT2020</a></div><div class="ttdeci">@ COLOR_STANDARD_BT2020</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00109">mediacodecdec_common.c:109</a></div></div>
<div class="ttc" id="amediacodec_8h_html"><div class="ttname"><a href="mediacodec_8h.html">mediacodec.h</a></div></div>
<div class="ttc" id="amediacodecdec__common_8c_html_aa6abe71c99bc7c75eb7047f6314a149c"><div class="ttname"><a href="mediacodecdec__common_8c.html#aa6abe71c99bc7c75eb7047f6314a149c">ff_mediacodec_dec_init</a></div><div class="ttdeci">int ff_mediacodec_dec_init(AVCodecContext *avctx, MediaCodecDecContext *s, const char *mime, FFAMediaFormat *format)</div><div class="ttdef"><b>Definition:</b> <a href="mediacodecdec__common_8c_source.html#l00565">mediacodecdec_common.c:565</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
