<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/vp3.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">vp3.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="vp3_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2003-2004 The FFmpeg project</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (C) 2019 Peter Ross</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="get__bits_8h.html">get_bits.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="x86_2hpeldsp_8h.html">hpeldsp.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="x86_2mathops_8h.html">mathops.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2thread_8h.html">thread.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="videodsp_8h.html">videodsp.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vp3data_8h.html">vp3data.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vp4data_8h.html">vp4data.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vp3dsp_8h.html">vp3dsp.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xiph_8h.html">xiph.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="vp3_8c.html#afb7cd1185ebdb2dffaf434b5f5e4ea4b">   51</a></span>&#160;<span class="preprocessor">#define FRAGMENT_PIXELS 8</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// FIXME split things out into their own arrays</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="struct_vp3_fragment.html">   54</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_vp3_fragment.html">Vp3Fragment</a> {</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="struct_vp3_fragment.html#aa9fb23e7b33e22c1da344d35378ccb0a">   55</a></span>&#160;    int16_t <a class="code" href="struct_vp3_fragment.html#aa9fb23e7b33e22c1da344d35378ccb0a">dc</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="struct_vp3_fragment.html#ae50ac1dd9b64adc73d87004fd468eac0">   56</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_fragment.html#ae50ac1dd9b64adc73d87004fd468eac0">coding_method</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct_vp3_fragment.html#a158a6d8069f02edbfe355fcb62f3c55b">   57</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_fragment.html#a158a6d8069f02edbfe355fcb62f3c55b">qpi</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="vp3_8c.html#a33bfe2c1d7f6d429ed64596558e2eada">   58</a></span>&#160;} <a class="code" href="vp3_8c.html#a33bfe2c1d7f6d429ed64596558e2eada">Vp3Fragment</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="vp3_8c.html#a9ba5e8c83534d37642b47112c6b01abd">   60</a></span>&#160;<span class="preprocessor">#define SB_NOT_CODED        0</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="vp3_8c.html#a8971fc0909d48676a3e8ec9b13de741f">   61</a></span>&#160;<span class="preprocessor">#define SB_PARTIALLY_CODED  1</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="vp3_8c.html#a02005ec59315e203bc0dae04751c2b06">   62</a></span>&#160;<span class="preprocessor">#define SB_FULLY_CODED      2</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// This is the maximum length of a single long bit run that can be encoded</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// for superblock coding or block qps. Theora special-cases this to read a</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// bit instead of flipping the current bit to allow for runs longer than 4129.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="vp3_8c.html#a7fca9a5d85722c7fde0906432424cede">   67</a></span>&#160;<span class="preprocessor">#define MAXIMUM_LONG_BIT_RUN 4129</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">   69</a></span>&#160;<span class="preprocessor">#define MODE_INTER_NO_MV      0</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">   70</a></span>&#160;<span class="preprocessor">#define MODE_INTRA            1</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">   71</a></span>&#160;<span class="preprocessor">#define MODE_INTER_PLUS_MV    2</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">   72</a></span>&#160;<span class="preprocessor">#define MODE_INTER_LAST_MV    3</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">   73</a></span>&#160;<span class="preprocessor">#define MODE_INTER_PRIOR_LAST 4</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">   74</a></span>&#160;<span class="preprocessor">#define MODE_USING_GOLDEN     5</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">   75</a></span>&#160;<span class="preprocessor">#define MODE_GOLDEN_MV        6</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">   76</a></span>&#160;<span class="preprocessor">#define MODE_INTER_FOURMV     7</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="vp3_8c.html#a0ac58ea077f8eb7fcb822f540797786d">   77</a></span>&#160;<span class="preprocessor">#define CODING_MODE_COUNT     8</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/* special internal mode */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">   80</a></span>&#160;<span class="preprocessor">#define MODE_COPY             8</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="vp3_8c.html#ab041a85d453fa75a567323dbf9aaaec3">   82</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#ab041a85d453fa75a567323dbf9aaaec3">theora_decode_header</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb);</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="vp3_8c.html#a0122623242343e5572d09c992c375db2">   83</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a0122623242343e5572d09c992c375db2">theora_decode_tables</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/* There are 6 preset schemes, plus a free-form scheme */</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="vp3_8c.html#ac5d58fc84de206c39840e16ebefec993">   87</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#ac5d58fc84de206c39840e16ebefec993">ModeAlphabet</a>[6][<a class="code" href="vp3_8c.html#a0ac58ea077f8eb7fcb822f540797786d">CODING_MODE_COUNT</a>] = {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">/* scheme 1: Last motion vector dominates */</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    { <a class="code" href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">MODE_INTER_LAST_MV</a>,    <a class="code" href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">MODE_INTER_PRIOR_LAST</a>,</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <a class="code" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a>,    <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>,            <a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a>,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>,        <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a> },</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">/* scheme 2 */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    { <a class="code" href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">MODE_INTER_LAST_MV</a>,    <a class="code" href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">MODE_INTER_PRIOR_LAST</a>,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>,      <a class="code" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a>,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>,            <a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a>,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>,        <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a> },</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">/* scheme 3 */</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    { <a class="code" href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">MODE_INTER_LAST_MV</a>,    <a class="code" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a>,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <a class="code" href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">MODE_INTER_PRIOR_LAST</a>, <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>,            <a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a>,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>,        <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a> },</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">/* scheme 4 */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    { <a class="code" href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">MODE_INTER_LAST_MV</a>,    <a class="code" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>,      <a class="code" href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">MODE_INTER_PRIOR_LAST</a>,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>,            <a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a>,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>,        <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a> },</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">/* scheme 5: No motion vector dominates */</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    { <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>,      <a class="code" href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">MODE_INTER_LAST_MV</a>,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <a class="code" href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">MODE_INTER_PRIOR_LAST</a>, <a class="code" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a>,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>,            <a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>,        <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a> },</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">/* scheme 6 */</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    { <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>,      <a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a>,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <a class="code" href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">MODE_INTER_LAST_MV</a>,    <a class="code" href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">MODE_INTER_PRIOR_LAST</a>,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a>,    <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>,        <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a> },</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;};</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="vp3_8c.html#aec58861293e80cd857bbda50227c71ed">  125</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="vp3_8c.html#aec58861293e80cd857bbda50227c71ed">hilbert_offset</a>[16][2] = {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    { 0, 0 }, { 1, 0 }, { 1, 1 }, { 0, 1 },</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    { 0, 2 }, { 0, 3 }, { 1, 3 }, { 1, 2 },</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    { 2, 2 }, { 2, 3 }, { 3, 3 }, { 3, 2 },</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    { 3, 1 }, { 2, 1 }, { 2, 0 }, { 3, 0 }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;};</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keyword">enum</span> {</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa93edb4ea64baa635b5b5f9959a8feff">  133</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa93edb4ea64baa635b5b5f9959a8feff">VP4_DC_INTRA</a>  = 0,</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba6d776c3dc7ba74b9e9aced1f938dea16">  134</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba6d776c3dc7ba74b9e9aced1f938dea16">VP4_DC_INTER</a>  = 1,</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba22d5bb0f8e69af3de40db12abdb3e717">  135</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba22d5bb0f8e69af3de40db12abdb3e717">VP4_DC_GOLDEN</a> = 2,</div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badb5803b5107889adc5275b2ed0d0b1ae">  136</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badb5803b5107889adc5275b2ed0d0b1ae">NB_VP4_DC_TYPES</a>,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba844cf3f8940c5287fdd836da6d3f7778">VP4_DC_UNDEFINED</a> = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badb5803b5107889adc5275b2ed0d0b1ae">NB_VP4_DC_TYPES</a></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba844cf3f8940c5287fdd836da6d3f7778">  138</a></span>&#160;};</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="vp3_8c.html#a9376133c69d116e74c992c3bc8aca33e">  140</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="vp3_8c.html#a9376133c69d116e74c992c3bc8aca33e">vp4_pred_block_type_map</a>[8] = {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    [<a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>]      = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba6d776c3dc7ba74b9e9aced1f938dea16">VP4_DC_INTER</a>,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    [<a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>]            = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa93edb4ea64baa635b5b5f9959a8feff">VP4_DC_INTRA</a>,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    [<a class="code" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a>]    = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba6d776c3dc7ba74b9e9aced1f938dea16">VP4_DC_INTER</a>,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    [<a class="code" href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">MODE_INTER_LAST_MV</a>]    = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba6d776c3dc7ba74b9e9aced1f938dea16">VP4_DC_INTER</a>,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    [<a class="code" href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">MODE_INTER_PRIOR_LAST</a>] = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba6d776c3dc7ba74b9e9aced1f938dea16">VP4_DC_INTER</a>,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    [<a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a>]     = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba22d5bb0f8e69af3de40db12abdb3e717">VP4_DC_GOLDEN</a>,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    [<a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>]        = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba22d5bb0f8e69af3de40db12abdb3e717">VP4_DC_GOLDEN</a>,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    [<a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a>]     = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba6d776c3dc7ba74b9e9aced1f938dea16">VP4_DC_INTER</a>,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;};</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="struct_v_p4_predictor.html">  151</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="struct_v_p4_predictor.html#a9bd7bac5517285ba5f77a14e59ad7d39">  152</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_p4_predictor.html#a9bd7bac5517285ba5f77a14e59ad7d39">dc</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="struct_v_p4_predictor.html#abf9fc5f32baf526f0a6384d5d4e34990">  153</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_p4_predictor.html#abf9fc5f32baf526f0a6384d5d4e34990">type</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;} <a class="code" href="struct_v_p4_predictor.html">VP4Predictor</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="vp3_8c.html#a74da2a0431abffe7ef81efb029ae872e">  156</a></span>&#160;<span class="preprocessor">#define MIN_DEQUANT_VAL 2</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_huff_entry.html">HuffEntry</a> {</div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="struct_huff_entry.html#a2dc864c57b854d59ef6a30e171f43010">  159</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_huff_entry.html#a2baede7441728a14f1aec66be0a7323c">len</a>, <a class="code" href="struct_huff_entry.html#a2dc864c57b854d59ef6a30e171f43010">sym</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="vp3_8c.html#a66e18844cbc21ec893f01668e38f9eb5">  160</a></span>&#160;} <a class="code" href="vp3_8c.html#a66e18844cbc21ec893f01668e38f9eb5">HuffEntry</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_huff_table.html">HuffTable</a> {</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">  163</a></span>&#160;    <a class="code" href="struct_huff_entry.html">HuffEntry</a> <a class="code" href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">entries</a>[32];</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="struct_huff_table.html#a467d4e408e25151e14a3d5702dfad87a">  164</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>   <a class="code" href="struct_huff_table.html#a467d4e408e25151e14a3d5702dfad87a">nb_entries</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="vp3_8c.html#a81f5937157501f504e36365ec3859c2c">  165</a></span>&#160;} <a class="code" href="vp3_8c.html#a81f5937157501f504e36365ec3859c2c">HuffTable</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html">  167</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> {</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a650197a733727a52e037ee5ec0fb7724">  168</a></span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="struct_vp3_decode_context.html#a650197a733727a52e037ee5ec0fb7724">avctx</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a1a0ac2637c57b51bc1f53268125d0aad">  169</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#acad3705412735cf6acb63a3a72eb1f59">theora</a>, <a class="code" href="struct_vp3_decode_context.html#a1a0ac2637c57b51bc1f53268125d0aad">theora_tables</a>, <a class="code" href="struct_vp3_decode_context.html#a15357f63b3f414a2ac6e6da9c070e2c4">theora_header</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a59fe52f2b0877760ecd29a75485358aa">  170</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a59fe52f2b0877760ecd29a75485358aa">version</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#aaae7bdee11c6638da97106ae14396f8c">  171</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#aaae7bdee11c6638da97106ae14396f8c">width</a>, <a class="code" href="struct_vp3_decode_context.html#ae2451351d55778469bd88a2fd5cba689">height</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a3ade108ed005469c6f61f17a5ade7ef7">  172</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a75b4636fcf06f5d759a395474d53a98b">chroma_x_shift</a>, <a class="code" href="struct_vp3_decode_context.html#a3ade108ed005469c6f61f17a5ade7ef7">chroma_y_shift</a>;</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a28c83e8b6e89b9498dec6e066492b8f5">  173</a></span>&#160;    <a class="code" href="struct_thread_frame.html">ThreadFrame</a> <a class="code" href="struct_vp3_decode_context.html#a28c83e8b6e89b9498dec6e066492b8f5">golden_frame</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a242ee762e9da6af6a353be2a39ece5e5">  174</a></span>&#160;    <a class="code" href="struct_thread_frame.html">ThreadFrame</a> <a class="code" href="struct_vp3_decode_context.html#a242ee762e9da6af6a353be2a39ece5e5">last_frame</a>;</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a55a858a85afed04af69fd32683246b1e">  175</a></span>&#160;    <a class="code" href="struct_thread_frame.html">ThreadFrame</a> <a class="code" href="struct_vp3_decode_context.html#a55a858a85afed04af69fd32683246b1e">current_frame</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a05cfcbdcf3900dc55a4171cccde4ec55">  176</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a05cfcbdcf3900dc55a4171cccde4ec55">keyframe</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a5ba9f6094f84ad53ac4903be20452e5c">  177</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_decode_context.html#a5ba9f6094f84ad53ac4903be20452e5c">idct_permutation</a>[64];</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#adc6e285198b0ed64566343a33159d9bd">  178</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_decode_context.html#adc6e285198b0ed64566343a33159d9bd">idct_scantable</a>[64];</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#addfdb8a030a1cf8fe1c8e1efbc8a9a4a">  179</a></span>&#160;    <a class="code" href="struct_hpel_d_s_p_context.html">HpelDSPContext</a> <a class="code" href="struct_vp3_decode_context.html#addfdb8a030a1cf8fe1c8e1efbc8a9a4a">hdsp</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a059c52211f214a08ef2a705bc6bef28c">  180</a></span>&#160;    <a class="code" href="struct_video_d_s_p_context.html">VideoDSPContext</a> <a class="code" href="struct_vp3_decode_context.html#a059c52211f214a08ef2a705bc6bef28c">vdsp</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ae931860199d641514468533df0a2b4d6">  181</a></span>&#160;    <a class="code" href="struct_v_p3_d_s_p_context.html">VP3DSPContext</a> <a class="code" href="struct_vp3_decode_context.html#ae931860199d641514468533df0a2b4d6">vp3dsp</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a03ebadefc7336f8342578baa863c965a">  182</a></span>&#160;    <a class="code" href="struct_vp3_decode_context.html#a03ebadefc7336f8342578baa863c965a">DECLARE_ALIGNED</a>(16, int16_t, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>)[64];</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a1379e92176c7243e3fabda983f4de458">  183</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a1379e92176c7243e3fabda983f4de458">flipped_image</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a32ee2279bc67578145450ecd06de551d">  184</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a32ee2279bc67578145450ecd06de551d">last_slice_end</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a808b84ad4c9b783ab2fd7ac72658ad5d">  185</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a808b84ad4c9b783ab2fd7ac72658ad5d">skip_loop_filter</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#aabbb6f5807b2be0cac3b724b80455b10">  187</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#aabbb6f5807b2be0cac3b724b80455b10">qps</a>[3];</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a07ac5c88bf080f532c7c8ee026369487">  188</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a07ac5c88bf080f532c7c8ee026369487">nqps</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#aef880e7e10ff28cdf3d4d231af54d458">  189</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#aef880e7e10ff28cdf3d4d231af54d458">last_qps</a>[3];</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ae6e62fcb95e02f886349c634a7a1bdcf">  191</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#ae6e62fcb95e02f886349c634a7a1bdcf">superblock_count</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ad869984cd7296113ee1540a242dd57d1">  192</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#ad869984cd7296113ee1540a242dd57d1">y_superblock_width</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a49b2350bb028506a0a6b7727f4ec1283">  193</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a49b2350bb028506a0a6b7727f4ec1283">y_superblock_height</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ae13ee1c4824bb9f5aaabdd67cc71ada3">  194</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#ae13ee1c4824bb9f5aaabdd67cc71ada3">y_superblock_count</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a17d0d5d104f6556caf21d484f7204d73">  195</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a17d0d5d104f6556caf21d484f7204d73">c_superblock_width</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a7e1fa7f75c6a2a361034bb2bf1f2d8c0">  196</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a7e1fa7f75c6a2a361034bb2bf1f2d8c0">c_superblock_height</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a22b3ddb21060c2002494bbe4bf79da46">  197</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a22b3ddb21060c2002494bbe4bf79da46">c_superblock_count</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#afdfad8d6d00776544de8baf8fea3469d">  198</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#afdfad8d6d00776544de8baf8fea3469d">u_superblock_start</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#af5e425c5f481ef5c1ca2c60c63ee5528">  199</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#af5e425c5f481ef5c1ca2c60c63ee5528">v_superblock_start</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#abefc4a2b094cf5a20fc1e1e042ea2d59">  200</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="struct_vp3_decode_context.html#abefc4a2b094cf5a20fc1e1e042ea2d59">superblock_coding</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#abf80d44d82d0067d5e7b6d20eb19fa77">  202</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#abf80d44d82d0067d5e7b6d20eb19fa77">macroblock_count</a>; <span class="comment">/* y macroblock count */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a8f25ed9fa2a4450e68b7870e5d617067">  203</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a8f25ed9fa2a4450e68b7870e5d617067">macroblock_width</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a07a24ba5add0ae4bfdf7e4004f234df7">  204</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a07a24ba5add0ae4bfdf7e4004f234df7">macroblock_height</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#afdedc9bccf98e5c5d6ce5cbeabd2f339">  205</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#afdedc9bccf98e5c5d6ce5cbeabd2f339">c_macroblock_count</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a7a1d246aa731d071fe1d417ab20adee3">  206</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a7a1d246aa731d071fe1d417ab20adee3">c_macroblock_width</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a7749c8a2697857f291299c941a67b08b">  207</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a7749c8a2697857f291299c941a67b08b">c_macroblock_height</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a50601ce8cbe5b6448d8176c1b2c7e9db">  208</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a50601ce8cbe5b6448d8176c1b2c7e9db">yuv_macroblock_count</a>; <span class="comment">/* y+u+v macroblock count */</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#aabbbf173f67577b43f7bf4b82f3ab859">  210</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#aabbbf173f67577b43f7bf4b82f3ab859">fragment_count</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a7e68d2093d418fbec44a72ae1f99ce6f">  211</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a7e68d2093d418fbec44a72ae1f99ce6f">fragment_width</a>[2];</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ad5cf7e6c20f6374a1aae0f25ff1aac29">  212</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#ad5cf7e6c20f6374a1aae0f25ff1aac29">fragment_height</a>[2];</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#abdc740c561491e42462272b468d7f311">  214</a></span>&#160;    <a class="code" href="struct_vp3_fragment.html">Vp3Fragment</a> *<a class="code" href="struct_vp3_decode_context.html#abdc740c561491e42462272b468d7f311">all_fragments</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a5527d3409acec6314accd7ac919df6b6">  215</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a5527d3409acec6314accd7ac919df6b6">fragment_start</a>[3];</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#af6c5114d3dc8564cd933696e282af656">  216</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#af6c5114d3dc8564cd933696e282af656">data_offset</a>[3];</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ae90ac3c1a98bed6cfe5d7393c30986e5">  217</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_decode_context.html#ae90ac3c1a98bed6cfe5d7393c30986e5">offset_x</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ae6a410c559de95338635a7300dd593a4">  218</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_decode_context.html#ae6a410c559de95338635a7300dd593a4">offset_y</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a368b7c7a2832de6157e949d9a42e6c7e">  219</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a368b7c7a2832de6157e949d9a42e6c7e">offset_x_warned</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a14a456e11a463bfd0ae4f81490994b5f">  221</a></span>&#160;    int8_t (*<a class="code" href="struct_vp3_decode_context.html#a14a456e11a463bfd0ae4f81490994b5f">motion_val</a>[2])[2];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">/* tables */</span></div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a04b3f5fabfa4e1934e91a7fb1b4222f5">  224</a></span>&#160;    uint16_t <a class="code" href="struct_vp3_decode_context.html#a04b3f5fabfa4e1934e91a7fb1b4222f5">coded_dc_scale_factor</a>[2][64];</div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a45934021f7060895316f3e92a2a437cf">  225</a></span>&#160;    uint32_t <a class="code" href="struct_vp3_decode_context.html#a45934021f7060895316f3e92a2a437cf">coded_ac_scale_factor</a>[64];</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a174b0b07293e68daea90d35adb3a961d">  226</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_decode_context.html#a174b0b07293e68daea90d35adb3a961d">base_matrix</a>[384][64];</div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ac6a9abe6525f329c5ebaf050b27077b0">  227</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_decode_context.html#ac6a9abe6525f329c5ebaf050b27077b0">qr_count</a>[2][3];</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ad00d1b84cf77e14b81e3a670e50fe698">  228</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_decode_context.html#ad00d1b84cf77e14b81e3a670e50fe698">qr_size</a>[2][3][64];</div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ae758ae1b5661c78853c731f1daf0ebb6">  229</a></span>&#160;    uint16_t <a class="code" href="struct_vp3_decode_context.html#ae758ae1b5661c78853c731f1daf0ebb6">qr_base</a>[2][3][64];</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ab9d37988ed4af177ef02b0b2decabf2b">  248</a></span>&#160;    int16_t *<a class="code" href="struct_vp3_decode_context.html#ab9d37988ed4af177ef02b0b2decabf2b">dct_tokens</a>[3][64];</div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a5172fd557f9d4980580c5d24b6248144">  249</a></span>&#160;    int16_t *<a class="code" href="struct_vp3_decode_context.html#a5172fd557f9d4980580c5d24b6248144">dct_tokens_base</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="vp3_8c.html#a2e636d1951c3f11a2d02f55a173fb523">  250</a></span>&#160;<span class="preprocessor">#define TOKEN_EOB(eob_run)              ((eob_run) &lt;&lt; 2)</span></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="vp3_8c.html#af422b1cf3152e1eadeb96307be009afe">  251</a></span>&#160;<span class="preprocessor">#define TOKEN_ZERO_RUN(coeff, zero_run) (((coeff) * 512) + ((zero_run) &lt;&lt; 2) + 1)</span></div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="vp3_8c.html#ae7145e4f7ffe6b976e340130932c0f19">  252</a></span>&#160;<span class="preprocessor">#define TOKEN_COEFF(coeff)              (((coeff) * 4) + 2)</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a0653995e7a53f73dca54880791d0e13b">  258</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a0653995e7a53f73dca54880791d0e13b">num_coded_frags</a>[3][64];</div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a8c04c573bc3c94cbebcb6d7269bf84e1">  259</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a8c04c573bc3c94cbebcb6d7269bf84e1">total_num_coded_frags</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">/* this is a list of indexes into the all_fragments array indicating</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">     * which of the fragments are coded */</span></div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a8508090bc70364205183c05cd5dd1446">  263</a></span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="struct_vp3_decode_context.html#a8508090bc70364205183c05cd5dd1446">coded_fragment_list</a>[3];</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a32c2d4be395de8c60a316132ae7cb84c">  265</a></span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="struct_vp3_decode_context.html#a32c2d4be395de8c60a316132ae7cb84c">kf_coded_fragment_list</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#ac409df5775bcfc557c12c8a67493d7e3">  266</a></span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="struct_vp3_decode_context.html#ac409df5775bcfc557c12c8a67493d7e3">nkf_coded_fragment_list</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a7fa7d5966a3abc8a8b16e0752a94dc82">  267</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_vp3_decode_context.html#a7fa7d5966a3abc8a8b16e0752a94dc82">num_kf_coded_fragment</a>[3];</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">/* The first 16 of the following VLCs are for the dc coefficients;</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">       the others are four groups of 16 VLCs each for ac coefficients. */</span></div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a23206e167a850643173cba5b50b1dcdd">  271</a></span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> <a class="code" href="struct_vp3_decode_context.html#a23206e167a850643173cba5b50b1dcdd">coeff_vlc</a>[5 * 16];</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a36a963bf3fe9b696821e0a03941e9a16">  273</a></span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> <a class="code" href="struct_vp3_decode_context.html#a36a963bf3fe9b696821e0a03941e9a16">superblock_run_length_vlc</a>; <span class="comment">/* version &lt; 2 */</span></div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a35946bc93a3cf3264b3713f6486e20bb">  274</a></span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> <a class="code" href="struct_vp3_decode_context.html#a35946bc93a3cf3264b3713f6486e20bb">fragment_run_length_vlc</a>; <span class="comment">/* version &lt; 2 */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a7b7bd694ac6893ba09d8e5d4a44318f4">  275</a></span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> <a class="code" href="struct_vp3_decode_context.html#a7b7bd694ac6893ba09d8e5d4a44318f4">block_pattern_vlc</a>[2]; <span class="comment">/* version &gt;= 2*/</span></div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#acccddd7d070c02d9a640b2b5d19c8614">  276</a></span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> <a class="code" href="struct_vp3_decode_context.html#acccddd7d070c02d9a640b2b5d19c8614">mode_code_vlc</a>;</div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a0ff4531e6d81d517ea5a8b26365fe934">  277</a></span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> <a class="code" href="struct_vp3_decode_context.html#a0ff4531e6d81d517ea5a8b26365fe934">motion_vector_vlc</a>; <span class="comment">/* version &lt; 2 */</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#afbca6468352e251ae33ab9de454f0e8e">  278</a></span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> <a class="code" href="struct_vp3_decode_context.html#afbca6468352e251ae33ab9de454f0e8e">vp4_mv_vlc</a>[2][7]; <span class="comment">/* version &gt;=2 */</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">/* these arrays need to be on 16-byte boundaries since SSE2 operations</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">     * index into them */</span></div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a72fe32e80674ca752f346d33c003bb11">  282</a></span>&#160;    <a class="code" href="struct_vp3_decode_context.html#a72fe32e80674ca752f346d33c003bb11">DECLARE_ALIGNED</a>(16, int16_t, qmat)[3][2][3][64];     </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">/* This table contains superblock_count * 16 entries. Each set of 16</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">     * numbers corresponds to the fragment indexes 0..15 of the superblock.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">     * An entry will be -1 to indicate that no entry corresponds to that</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">     * index. */</span></div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#afbe77293f29b6ae4f5d3b4da1a567898">  288</a></span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="struct_vp3_decode_context.html#afbe77293f29b6ae4f5d3b4da1a567898">superblock_fragments</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">/* This is an array that indicates how a particular macroblock</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">     * is coded. */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a77adc5079efc30b9c553da71fb333fd8">  292</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="struct_vp3_decode_context.html#a77adc5079efc30b9c553da71fb333fd8">macroblock_coding</a>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a7cedf12244c6461642e86bb76946d020">  294</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="struct_vp3_decode_context.html#a7cedf12244c6461642e86bb76946d020">edge_emu_buffer</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">/* Huffman decode */</span></div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a8f10a873a18737e4270044a342f1a8dc">  297</a></span>&#160;    <a class="code" href="struct_huff_table.html">HuffTable</a> <a class="code" href="struct_vp3_decode_context.html#a8f10a873a18737e4270044a342f1a8dc">huffman_table</a>[5 * 16];</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#aa9b6a968fe25cb443579241d11478624">  299</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_vp3_decode_context.html#aa9b6a968fe25cb443579241d11478624">filter_limit_values</a>[64];</div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#adc7f86be9ca329baff17f9f15e704b0f">  300</a></span>&#160;    <a class="code" href="struct_vp3_decode_context.html#adc7f86be9ca329baff17f9f15e704b0f">DECLARE_ALIGNED</a>(8, <span class="keywordtype">int</span>, bounding_values_array)[256 + 2];</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="struct_vp3_decode_context.html#a419b113e2889467447efdec497f2ba72">  302</a></span>&#160;    <a class="code" href="struct_v_p4_predictor.html">VP4Predictor</a> * <a class="code" href="struct_vp3_decode_context.html#a419b113e2889467447efdec497f2ba72">dc_pred_row</a>; <span class="comment">/* dc_pred_row[y_superblock_width * 4] */</span></div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="vp3_8c.html#aaca5389b2381f17eec131a6a9527be74">  303</a></span>&#160;} <a class="code" href="vp3_8c.html#aaca5389b2381f17eec131a6a9527be74">Vp3DecodeContext</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">/************************************************************************</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"> * VP3 specific functions</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"> ************************************************************************/</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="vp3_8c.html#a6da7d4820c3cebbff1c4b21746926831">  309</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#a6da7d4820c3cebbff1c4b21746926831">free_tables</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nkf_coded_fragment_list);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;kf_coded_fragment_list);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens_base);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_fragments);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_pred_row);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[0]);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1]);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="vp3_8c.html#a6dfea7115997c18f5b4e0472755579bf">  325</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#a6dfea7115997c18f5b4e0472755579bf">vp3_decode_flush</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;{</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame.f)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a>(avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame.f)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <a class="code" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a>(avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a>(avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">  337</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">vp3_decode_end</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="vp3_8c.html#a6da7d4820c3cebbff1c4b21746926831">free_tables</a>(avctx);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;edge_emu_buffer);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora_tables = 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">/* release all frames */</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="vp3_8c.html#a6dfea7115997c18f5b4e0472755579bf">vp3_decode_flush</a>(avctx);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame.f);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame.f);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="bitstream_8c.html#a6833b44193a374e05ad39b2eb9705bba">ff_free_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="bitstream_8c.html#a6833b44193a374e05ad39b2eb9705bba">ff_free_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_run_length_vlc);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="bitstream_8c.html#a6833b44193a374e05ad39b2eb9705bba">ff_free_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_run_length_vlc);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="bitstream_8c.html#a6833b44193a374e05ad39b2eb9705bba">ff_free_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode_code_vlc);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="bitstream_8c.html#a6833b44193a374e05ad39b2eb9705bba">ff_free_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_vector_vlc);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 7; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <a class="code" href="bitstream_8c.html#a6833b44193a374e05ad39b2eb9705bba">ff_free_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp4_mv_vlc[j][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="bitstream_8c.html#a6833b44193a374e05ad39b2eb9705bba">ff_free_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_pattern_vlc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="vp3_8c.html#ab5c897db58ec55e3a4c047dccf76d794">  377</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#ab5c897db58ec55e3a4c047dccf76d794">init_block_mapping</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;{</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordtype">int</span> sb_x, sb_y, plane;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">int</span> x, y, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j = 0;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">for</span> (plane = 0; plane &lt; 3; plane++) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordtype">int</span> sb_width    = plane ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_width</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_width;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordtype">int</span> sb_height   = plane ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_height</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_height;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordtype">int</span> frag_width  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[!!plane];</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordtype">int</span> frag_height = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[!!plane];</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">for</span> (sb_y = 0; sb_y &lt; sb_height; sb_y++)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">for</span> (sb_x = 0; sb_x &lt; sb_width; sb_x++)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                    x = 4 * sb_x + <a class="code" href="vp3_8c.html#aec58861293e80cd857bbda50227c71ed">hilbert_offset</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0];</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                    y = 4 * sb_y + <a class="code" href="vp3_8c.html#aec58861293e80cd857bbda50227c71ed">hilbert_offset</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1];</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                    <span class="keywordflow">if</span> (x &lt; frag_width &amp;&amp; y &lt; frag_height)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_fragments[j++] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_start[plane] +</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                                       y * frag_width + x;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_fragments[j++] = -1;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">return</span> 0;  <span class="comment">/* successful path out */</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"> * This function sets up the dequantization tables used for a particular</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"> * frame.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="vp3_8c.html#a2f4d52b8116b2d35a59f1524c5dafa25">  411</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#a2f4d52b8116b2d35a59f1524c5dafa25">init_dequantizer</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> qpi)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;{</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordtype">int</span> ac_scale_factor = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_ac_scale_factor[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[qpi]];</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, plane, inter, qri, bmi, bmj, qistart;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">for</span> (inter = 0; inter &lt; 2; inter++) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">for</span> (plane = 0; plane &lt; 3; plane++) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordtype">int</span> dc_scale_factor = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_dc_scale_factor[!!plane][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[qpi]];</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <span class="keywordtype">int</span> sum = 0;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordflow">for</span> (qri = 0; qri &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_count[inter][plane]; qri++) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                sum += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_size[inter][plane][qri];</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[qpi] &lt;= sum)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            qistart = sum - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_size[inter][plane][qri];</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            bmi     = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_base[inter][plane][qri];</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            bmj     = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_base[inter][plane][qri + 1];</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> = (2 * (sum     - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[qpi]) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;base_matrix[bmi][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] -</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                             2 * (qistart - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[qpi]) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;base_matrix[bmj][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] +</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_size[inter][plane][qri]) /</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                            (2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_size[inter][plane][qri]);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                <span class="keywordtype">int</span> qmin   = 8 &lt;&lt; (inter + !<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                <span class="keywordtype">int</span> qscale = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ? ac_scale_factor : dc_scale_factor;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                <span class="keywordtype">int</span> qbias = (1 + inter) * 3;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qmat[qpi][inter][plane][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] =</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0 || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2) ? av_clip((qscale * <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>) / 100 * 4, qmin, 4096)</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                               : (qscale * (<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> - qbias) / 100 + qbias) * 4;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="comment">/* all DC coefficients use the same quant so as not to interfere</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">             * with DC prediction */</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qmat[qpi][inter][plane][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qmat[0][inter][plane][0];</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"> * This function initializes the loop filter boundary limits if the frame&#39;s</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment"> * quality index is different from the previous frame&#39;s.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"> * The filter_limit_values may not be larger than 127.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="vp3_8c.html#a1b4d6fd036c0aa7dbe824263bbb88cb6">  454</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#a1b4d6fd036c0aa7dbe824263bbb88cb6">init_loop_filter</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;{</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="vp3dsp_8c.html#a521ac966493044fe5906b16234de6a43">ff_vp3dsp_set_bounding_values</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bounding_values_array, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filter_limit_values[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[0]]);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment"> * This function unpacks all of the superblock/macroblock/fragment coding</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"> * information from the bitstream.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="vp3_8c.html#afa6178b4eb10d46539a281fa962bb70c">  463</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#afa6178b4eb10d46539a281fa962bb70c">unpack_superblocks</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;{</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordtype">int</span> superblock_starts[3] = {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;u_superblock_start, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;v_superblock_start</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    };</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> = 0;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">int</span> current_superblock = 0;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordtype">int</span> current_run = 0;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordtype">int</span> num_partial_superblocks = 0;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordtype">int</span> current_fragment;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordtype">int</span> plane;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordtype">int</span> plane0_num_coded_frags = 0;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding, <a class="code" href="vp3_8c.html#a02005ec59315e203bc0dae04751c2b06">SB_FULLY_CODED</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_count);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="comment">/* unpack the list of partially-coded superblocks */</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>         = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) ^ 1;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        current_run = 0;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">while</span> (current_superblock &lt; s-&gt;superblock_count &amp;&amp; <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &gt; 0) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &amp;&amp; current_run == <a class="code" href="vp3_8c.html#a7fca9a5d85722c7fde0906432424cede">MAXIMUM_LONG_BIT_RUN</a>)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> ^= 1;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            current_run = <a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_run_length_vlc.table,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                   6, 2) + 1;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">if</span> (current_run == 34)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                current_run += <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 12);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">if</span> (current_run &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_count - current_superblock) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                       <span class="stringliteral">&quot;Invalid partially coded superblock run length\n&quot;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding + current_superblock, <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>, current_run);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            current_superblock += current_run;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                num_partial_superblocks += current_run;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="comment">/* unpack the list of fully coded superblocks if any of the blocks were</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">         * not marked as partially coded in the previous step */</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">if</span> (num_partial_superblocks &lt; s-&gt;superblock_count) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="keywordtype">int</span> superblocks_decoded = 0;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            current_superblock = 0;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>                = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) ^ 1;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            current_run        = 0;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keywordflow">while</span> (superblocks_decoded &lt; s-&gt;superblock_count - num_partial_superblocks &amp;&amp;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                   <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &gt; 0) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &amp;&amp; current_run == <a class="code" href="vp3_8c.html#a7fca9a5d85722c7fde0906432424cede">MAXIMUM_LONG_BIT_RUN</a>)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> ^= 1;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                current_run = <a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_run_length_vlc.table,</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                                       6, 2) + 1;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="keywordflow">if</span> (current_run == 34)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                    current_run += <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 12);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; current_run; current_superblock++) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                    <span class="keywordflow">if</span> (current_superblock &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_count) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                               <span class="stringliteral">&quot;Invalid fully coded superblock run length\n&quot;</span>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    <span class="comment">/* skip any superblocks already marked as partially coded */</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding[current_superblock] == <a class="code" href="vp3_8c.html#a9ba5e8c83534d37642b47112c6b01abd">SB_NOT_CODED</a>) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding[current_superblock] = 2 * <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                        j++;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                superblocks_decoded += current_run;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="comment">/* if there were partial blocks, initialize bitstream for</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">         * unpacking fragment codings */</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">if</span> (num_partial_superblocks) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            current_run = 0;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>         = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="comment">/* toggle the bit because as soon as the first run length is</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">             * fetched the bit will be toggled again */</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> ^= 1;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">/* figure out which fragments are coded; iterate through each</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">     * superblock (all planes) */</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;total_num_coded_frags = 0;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding, <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_count);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_fragment_list[0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;kf_coded_fragment_list</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                                            : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nkf_coded_fragment_list;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">for</span> (plane = 0; plane &lt; 3; plane++) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordtype">int</span> sb_start = superblock_starts[plane];</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordtype">int</span> sb_end   = sb_start + (plane ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_count</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                         : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_count);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordtype">int</span> num_coded_frags = 0;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_kf_coded_fragment[plane] == -1) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = sb_start; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sb_end; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                    <span class="comment">/* iterate through all 16 fragments in a superblock */</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                    <span class="keywordflow">for</span> (j = 0; j &lt; 16; j++) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                        <span class="comment">/* if the fragment is in bounds, check its coding status */</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                        current_fragment = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 16 + j];</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                        <span class="keywordflow">if</span> (current_fragment != -1) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_fragment_list[plane][num_coded_frags++] =</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                                current_fragment;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                        }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                    }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_kf_coded_fragment[plane] = num_coded_frags;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                num_coded_frags = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_kf_coded_fragment[plane];</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = sb_start; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sb_end &amp;&amp; <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &gt; 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt; plane0_num_coded_frags &gt;&gt; 2) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                <span class="comment">/* iterate through all 16 fragments in a superblock */</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 16; j++) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                    <span class="comment">/* if the fragment is in bounds, check its coding status */</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                    current_fragment = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 16 + j];</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                    <span class="keywordflow">if</span> (current_fragment != -1) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                        <span class="keywordtype">int</span> coded = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                        <span class="keywordflow">if</span> (coded == <a class="code" href="vp3_8c.html#a8971fc0909d48676a3e8ec9b13de741f">SB_PARTIALLY_CODED</a>) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                            <span class="comment">/* fragment may or may not be coded; this is the case</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">                             * that cares about the fragment coding runs */</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                            <span class="keywordflow">if</span> (current_run-- == 0) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                                <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>        ^= 1;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                current_run = <a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_run_length_vlc.table, 5, 2);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                            }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                            coded = <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                        }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                        <span class="keywordflow">if</span> (coded) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                            <span class="comment">/* default mode; actual mode will be decoded in</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">                             * the next phase */</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[current_fragment].coding_method =</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_fragment_list[plane][num_coded_frags++] =</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                current_fragment;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                            <span class="comment">/* not coded; copy this fragment from the prior frame */</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[current_fragment].coding_method =</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                        }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                    }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">if</span> (!plane)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            plane0_num_coded_frags = num_coded_frags;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;total_num_coded_frags += num_coded_frags;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_coded_frags[plane][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = num_coded_frags;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (plane &lt; 2)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_fragment_list[plane + 1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_fragment_list[plane] +</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                                num_coded_frags;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno"><a class="line" href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">  638</a></span>&#160;<span class="preprocessor">#define BLOCK_X (2 * mb_x + (k &amp; 1))</span></div>
<div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">  639</a></span>&#160;<span class="preprocessor">#define BLOCK_Y (2 * mb_y + (k &gt;&gt; 1))</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> vp4_get_mb_count(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;{</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordtype">int</span> v = 1;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">while</span> ((<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="get__bits_8h.html#ae49242b74f82c369619336d05d1b2484">show_bits</a>(gb, 9)) == 0x1ff) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 9);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        v += 256;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> (v &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;yuv_macroblock_count) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid run length\n&quot;</span>);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="preprocessor">#define body(n) { \</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="preprocessor">    skip_bits(gb, 2 + n); \</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="preprocessor">    v += (1 &lt;&lt; n) + get_bits(gb, n); }</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="preprocessor">#define thresh(n) (0x200 - (0x80 &gt;&gt; n))</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="preprocessor">#define else_if(n) else if (bits &lt; thresh(n)) body(n)</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> &lt; 0x100) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 1);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> &lt; thresh(0)) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 2);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        v += 1;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    else_if(1)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    else_if(2)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    else_if(3)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    else_if(4)</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    else_if(5)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    else_if(6)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="md5_8c.html#a8570c758e4feed3365b8b7600cd2e404">body</a>(7)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="preprocessor">#undef body</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="preprocessor">#undef thresh</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="preprocessor">#undef else_if</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> vp4_get_block_pattern(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, <span class="keywordtype">int</span> *next_block_pattern_table)</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;{</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordtype">int</span> v = <a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_pattern_vlc[*next_block_pattern_table].table, 3, 2);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    *next_block_pattern_table = <a class="code" href="vp4data_8h.html#a622b60c898d3eec1cdead921fb988856">vp4_block_pattern_table_selector</a>[v];</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">return</span> v + 1;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> vp4_unpack_macroblocks(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;{</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordtype">int</span> plane, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k, <a class="code" href="structfragment.html">fragment</a>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordtype">int</span> next_block_pattern_table;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>, current_run, has_partial;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding, <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_count);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    has_partial = 0;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>         = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;yuv_macroblock_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> += current_run) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt;= 0)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        current_run = vp4_get_mb_count(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">if</span> (current_run &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;yuv_macroblock_count - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, 2 * <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>, current_run);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> ^= 1;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        has_partial |= <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span> (has_partial) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt;= 0)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        current_run = vp4_get_mb_count(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;yuv_macroblock_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                <span class="keywordflow">if</span> (!current_run) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                    <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> ^= 1;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                    current_run = vp4_get_mb_count(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                current_run--;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">if</span> (current_run) <span class="comment">/* handle situation when vp4_get_mb_count() fails */</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    }</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    next_block_pattern_table = 0;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">for</span> (plane = 0; plane &lt; 3; plane++) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keywordtype">int</span> sb_x, sb_y;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordtype">int</span> sb_width = plane ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_width : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_width;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordtype">int</span> sb_height = plane ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_height : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_height;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordtype">int</span> mb_width = plane ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_macroblock_width : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_width;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordtype">int</span> mb_height = plane ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_macroblock_height : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_height;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordtype">int</span> fragment_width = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[!!plane];</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordtype">int</span> fragment_height = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[!!plane];</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">for</span> (sb_y = 0; sb_y &lt; sb_height; sb_y++) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="keywordflow">for</span> (sb_x = 0; sb_x &lt; sb_width; sb_x++) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                    <span class="keywordtype">int</span> mb_x = 2 * sb_x + (j &gt;&gt; 1);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    <span class="keywordtype">int</span> mb_y = 2 * sb_y + (j &gt;&gt; 1) ^ (j &amp; 1);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                    <span class="keywordtype">int</span> mb_coded, pattern, coded;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                    <span class="keywordflow">if</span> (mb_x &gt;= mb_width || mb_y &gt;= mb_height)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                    mb_coded = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++];</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                    <span class="keywordflow">if</span> (mb_coded == <a class="code" href="vp3_8c.html#a02005ec59315e203bc0dae04751c2b06">SB_FULLY_CODED</a>)</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                        pattern = 0xF;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mb_coded == <a class="code" href="vp3_8c.html#a8971fc0909d48676a3e8ec9b13de741f">SB_PARTIALLY_CODED</a>)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                        pattern = vp4_get_block_pattern(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, &amp;next_block_pattern_table);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                        pattern = 0;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                    <span class="keywordflow">for</span> (k = 0; k &lt; 4; k++) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">BLOCK_X</a> &gt;= fragment_width || <a class="code" href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">BLOCK_Y</a> &gt;= fragment_height)</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                        <a class="code" href="structfragment.html">fragment</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_start[plane] + <a class="code" href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">BLOCK_Y</a> * fragment_width + <a class="code" href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">BLOCK_X</a>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                        coded = pattern &amp; (8 &gt;&gt; k);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                        <span class="comment">/* MODE_INTER_NO_MV is the default for coded fragments.</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">                           the actual method is decoded in the next phase. */</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="structfragment.html">fragment</a>].coding_method = coded ? <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a> : <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                    }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;}</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"> * This function unpacks all the coding mode data for individual macroblocks</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment"> * from the bitstream.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="vp3_8c.html#a9d2bb11e5372a99d128e7a22dcb74f92">  783</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a9d2bb11e5372a99d128e7a22dcb74f92">unpack_modes</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;{</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k, sb_x, sb_y;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordtype">int</span> scheme;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordtype">int</span> current_macroblock;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordtype">int</span> current_fragment;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordtype">int</span> coding_mode;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordtype">int</span> custom_mode_alphabet[<a class="code" href="vp3_8c.html#a0ac58ea077f8eb7fcb822f540797786d">CODING_MODE_COUNT</a>];</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> *alphabet;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="struct_vp3_fragment.html">Vp3Fragment</a> *frag;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method = <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="comment">/* fetch the mode coding scheme for this frame */</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        scheme = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="comment">/* is it a custom coding scheme? */</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">if</span> (scheme == 0) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                custom_mode_alphabet[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                custom_mode_alphabet[<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3)] = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            alphabet = custom_mode_alphabet;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            alphabet = <a class="code" href="vp3_8c.html#ac5d58fc84de206c39840e16ebefec993">ModeAlphabet</a>[scheme - 1];</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="comment">/* iterate through all of the macroblocks that contain 1 or more</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">         * coded fragments */</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">for</span> (sb_y = 0; sb_y &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_height; sb_y++) {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            <span class="keywordflow">for</span> (sb_x = 0; sb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_width; sb_x++) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt;= 0)</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                    <span class="keywordtype">int</span> mb_x = 2 * sb_x + (j &gt;&gt; 1);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                    <span class="keywordtype">int</span> mb_y = 2 * sb_y + (((j &gt;&gt; 1) + j) &amp; 1);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                    current_macroblock = mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_width + mb_x;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                    <span class="keywordflow">if</span> (mb_x &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_width ||</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                        mb_y &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_height)</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                    <span class="comment">/* coding modes are only stored if the macroblock has</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">                     * at least one luma block coded, otherwise it must be</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">                     * INTER_NO_MV */</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                    <span class="keywordflow">for</span> (k = 0; k &lt; 4; k++) {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                        current_fragment = <a class="code" href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">BLOCK_Y</a> *</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                                           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[0] + <a class="code" href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">BLOCK_X</a>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[current_fragment].coding_method != <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>)</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                    <span class="keywordflow">if</span> (k == 4) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding[current_macroblock] = <a class="code" href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                    }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                    <span class="comment">/* mode 7 means get 3 bits for each coding mode */</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                    <span class="keywordflow">if</span> (scheme == 7)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                        coding_mode = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                        coding_mode = alphabet[<a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode_code_vlc.table, 3, 3)];</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding[current_macroblock] = coding_mode;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                    <span class="keywordflow">for</span> (k = 0; k &lt; 4; k++) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                        frag = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments + <a class="code" href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">BLOCK_Y</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[0] + <a class="code" href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">BLOCK_X</a>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                        <span class="keywordflow">if</span> (frag-&gt;<a class="code" href="struct_vp3_fragment.html#ae50ac1dd9b64adc73d87004fd468eac0">coding_method</a> != <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                            frag-&gt;<a class="code" href="struct_vp3_fragment.html#ae50ac1dd9b64adc73d87004fd468eac0">coding_method</a> = coding_mode;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                    }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="preprocessor">#define SET_CHROMA_MODES                                                      \</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="preprocessor">    if (frag[s-&gt;fragment_start[1]].coding_method != MODE_COPY)                \</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="preprocessor">        frag[s-&gt;fragment_start[1]].coding_method = coding_mode;               \</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="preprocessor">    if (frag[s-&gt;fragment_start[2]].coding_method != MODE_COPY)                \</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="preprocessor">        frag[s-&gt;fragment_start[2]].coding_method = coding_mode;</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                        frag = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments + mb_y *</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1] + mb_x;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                        <a class="code" href="vp3_8c.html#ac39e4d5c2db8d3498b521a48af35aba2">SET_CHROMA_MODES</a></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                        frag = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments +</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                               2 * mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1] + mb_x;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                        <span class="keywordflow">for</span> (k = 0; k &lt; 2; k++) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                            <a class="code" href="vp3_8c.html#ac39e4d5c2db8d3498b521a48af35aba2">SET_CHROMA_MODES</a></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                            frag += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1];</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                        <span class="keywordflow">for</span> (k = 0; k &lt; 4; k++) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                            frag = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments +</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                                   <a class="code" href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">BLOCK_Y</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1] + <a class="code" href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">BLOCK_X</a>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                            <a class="code" href="vp3_8c.html#ac39e4d5c2db8d3498b521a48af35aba2">SET_CHROMA_MODES</a></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                        }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                    }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;}</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="vp3_8c.html#a549da85294ad6c5ed165d360c95b8306">  886</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a549da85294ad6c5ed165d360c95b8306">vp4_get_mv</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, <span class="keywordtype">int</span> axis, <span class="keywordtype">int</span> last_motion)</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;{</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordtype">int</span> v = <a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp4_mv_vlc[axis][<a class="code" href="vp4data_8h.html#a9c2b53d18c313e9777652ce96b536261">vp4_mv_table_selector</a>[<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(last_motion)]].<a class="code" href="prosumer_8c.html#a8f9d32e424405551734404b133418a22">table</a>, 6, 2) - 31;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">return</span> last_motion &lt; 0 ? -v : v;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;}</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment"> * This function unpacks all the motion vectors for the individual</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment"> * macroblocks from the bitstream.</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00896"></a><span class="lineno"><a class="line" href="vp3_8c.html#a43ef5896eb1ce21da33247ca91932aa6">  896</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a43ef5896eb1ce21da33247ca91932aa6">unpack_vectors</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;{</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordtype">int</span> j, k, sb_x, sb_y;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordtype">int</span> coding_mode;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordtype">int</span> motion_x[4];</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordtype">int</span> motion_y[4];</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordtype">int</span> last_motion_x = 0;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordtype">int</span> last_motion_y = 0;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordtype">int</span> prior_last_motion_x = 0;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordtype">int</span> prior_last_motion_y = 0;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordtype">int</span> last_gold_motion_x = 0;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordtype">int</span> last_gold_motion_y = 0;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">int</span> current_macroblock;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordtype">int</span> current_fragment;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">int</span> frag;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe)</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">/* coding mode 0 is the VLC scheme; 1 is the fixed code scheme; 2 is VP4 code scheme */</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    coding_mode = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2 ? <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) : 2;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment">/* iterate through all of the macroblocks that contain 1 or more</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">     * coded fragments */</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">for</span> (sb_y = 0; sb_y &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_height; sb_y++) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">for</span> (sb_x = 0; sb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_width; sb_x++) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt;= 0)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                <span class="keywordtype">int</span> mb_x = 2 * sb_x + (j &gt;&gt; 1);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                <span class="keywordtype">int</span> mb_y = 2 * sb_y + (((j &gt;&gt; 1) + j) &amp; 1);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                current_macroblock = mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_width + mb_x;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                <span class="keywordflow">if</span> (mb_x &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_width  ||</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                    mb_y &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_height ||</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding[current_macroblock] == <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>)</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding[current_macroblock]) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>:</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                    <span class="keywordflow">if</span> (coding_mode == 2) { <span class="comment">/* VP4 */</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                        last_gold_motion_x = motion_x[0] = <a class="code" href="vp3_8c.html#a549da85294ad6c5ed165d360c95b8306">vp4_get_mv</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, 0, last_gold_motion_x);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                        last_gold_motion_y = motion_y[0] = <a class="code" href="vp3_8c.html#a549da85294ad6c5ed165d360c95b8306">vp4_get_mv</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, 1, last_gold_motion_y);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                    } <span class="comment">/* otherwise fall through */</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a>:</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                    <span class="comment">/* all 6 fragments use the same motion vector */</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                    <span class="keywordflow">if</span> (coding_mode == 0) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                        motion_x[0] = <a class="code" href="vp3data_8h.html#af143d7dca42b7c538eebcfe0dd1c64ce">motion_vector_table</a>[<a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_vector_vlc.table, 6, 2)];</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                        motion_y[0] = <a class="code" href="vp3data_8h.html#af143d7dca42b7c538eebcfe0dd1c64ce">motion_vector_table</a>[<a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_vector_vlc.table, 6, 2)];</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coding_mode == 1) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                        motion_x[0] = <a class="code" href="vp3data_8h.html#a6280505ba77ff544d15ae5d909a82ac5">fixed_motion_vector_table</a>[<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6)];</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        motion_y[0] = <a class="code" href="vp3data_8h.html#a6280505ba77ff544d15ae5d909a82ac5">fixed_motion_vector_table</a>[<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6)];</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                    } <span class="keywordflow">else</span> { <span class="comment">/* VP4 */</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                        motion_x[0] = <a class="code" href="vp3_8c.html#a549da85294ad6c5ed165d360c95b8306">vp4_get_mv</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, 0, last_motion_x);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                        motion_y[0] = <a class="code" href="vp3_8c.html#a549da85294ad6c5ed165d360c95b8306">vp4_get_mv</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, 1, last_motion_y);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                    }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                    <span class="comment">/* vector maintenance, only on MODE_INTER_PLUS_MV */</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding[current_macroblock] == <a class="code" href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a>) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                        prior_last_motion_x = last_motion_x;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                        prior_last_motion_y = last_motion_y;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                        last_motion_x       = motion_x[0];</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                        last_motion_y       = motion_y[0];</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                    }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a>:</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                    <span class="comment">/* vector maintenance */</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                    prior_last_motion_x = last_motion_x;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                    prior_last_motion_y = last_motion_y;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                    <span class="comment">/* fetch 4 vectors from the bitstream, one for each</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">                     * Y fragment, then average for the C fragment vectors */</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                    <span class="keywordflow">for</span> (k = 0; k &lt; 4; k++) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                        current_fragment = <a class="code" href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">BLOCK_Y</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[0] + <a class="code" href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">BLOCK_X</a>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[current_fragment].coding_method != <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                            <span class="keywordflow">if</span> (coding_mode == 0) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                                motion_x[k] = <a class="code" href="vp3data_8h.html#af143d7dca42b7c538eebcfe0dd1c64ce">motion_vector_table</a>[<a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_vector_vlc.table, 6, 2)];</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                                motion_y[k] = <a class="code" href="vp3data_8h.html#af143d7dca42b7c538eebcfe0dd1c64ce">motion_vector_table</a>[<a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_vector_vlc.table, 6, 2)];</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coding_mode == 1) {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                motion_x[k] = <a class="code" href="vp3data_8h.html#a6280505ba77ff544d15ae5d909a82ac5">fixed_motion_vector_table</a>[<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6)];</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                                motion_y[k] = <a class="code" href="vp3data_8h.html#a6280505ba77ff544d15ae5d909a82ac5">fixed_motion_vector_table</a>[<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6)];</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                            } <span class="keywordflow">else</span> { <span class="comment">/* VP4 */</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                motion_x[k] = <a class="code" href="vp3_8c.html#a549da85294ad6c5ed165d360c95b8306">vp4_get_mv</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, 0, prior_last_motion_x);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                motion_y[k] = <a class="code" href="vp3_8c.html#a549da85294ad6c5ed165d360c95b8306">vp4_get_mv</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, 1, prior_last_motion_y);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                            }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                            last_motion_x = motion_x[k];</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                            last_motion_y = motion_y[k];</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                            motion_x[k] = 0;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                            motion_y[k] = 0;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                        }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                    }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">MODE_INTER_LAST_MV</a>:</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                    <span class="comment">/* all 6 fragments use the last motion vector */</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                    motion_x[0] = last_motion_x;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                    motion_y[0] = last_motion_y;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                    <span class="comment">/* no vector maintenance (last vector remains the</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">                     * last vector) */</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">MODE_INTER_PRIOR_LAST</a>:</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                    <span class="comment">/* all 6 fragments use the motion vector prior to the</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">                     * last motion vector */</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    motion_x[0] = prior_last_motion_x;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                    motion_y[0] = prior_last_motion_y;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                    <span class="comment">/* vector maintenance */</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                    prior_last_motion_x = last_motion_x;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                    prior_last_motion_y = last_motion_y;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                    last_motion_x       = motion_x[0];</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                    last_motion_y       = motion_y[0];</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                    <span class="comment">/* covers intra, inter without MV, golden without MV */</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                    motion_x[0] = 0;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                    motion_y[0] = 0;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                    <span class="comment">/* no vector maintenance */</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160; </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                <span class="comment">/* assign the motion vectors to the correct fragments */</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                <span class="keywordflow">for</span> (k = 0; k &lt; 4; k++) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                    current_fragment =</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                        <a class="code" href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">BLOCK_Y</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[0] + <a class="code" href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">BLOCK_X</a>;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding[current_macroblock] == <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a>) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[0][current_fragment][0] = motion_x[k];</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[0][current_fragment][1] = motion_y[k];</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[0][current_fragment][0] = motion_x[0];</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[0][current_fragment][1] = motion_y[0];</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                    }</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding[current_macroblock] == <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a>) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                        motion_x[0] = <a class="code" href="common_8h.html#aa79ca71ef110a498d8275cbf7aa75a93">RSHIFT</a>(motion_x[0] + motion_x[1] +</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                                             motion_x[2] + motion_x[3], 2);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                        motion_y[0] = <a class="code" href="common_8h.html#aa79ca71ef110a498d8275cbf7aa75a93">RSHIFT</a>(motion_y[0] + motion_y[1] +</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                                             motion_y[2] + motion_y[3], 2);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                    }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt;= 2) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                        motion_x[0] = (motion_x[0] &gt;&gt; 1) | (motion_x[0] &amp; 1);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                        motion_y[0] = (motion_y[0] &gt;&gt; 1) | (motion_y[0] &amp; 1);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                    }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    frag = mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1] + mb_x;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1][frag][0] = motion_x[0];</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1][frag][1] = motion_y[0];</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding[current_macroblock] == <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a>) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                        motion_x[0] = <a class="code" href="common_8h.html#aa79ca71ef110a498d8275cbf7aa75a93">RSHIFT</a>(motion_x[0] + motion_x[1], 1);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                        motion_y[0] = <a class="code" href="common_8h.html#aa79ca71ef110a498d8275cbf7aa75a93">RSHIFT</a>(motion_y[0] + motion_y[1], 1);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                        motion_x[1] = <a class="code" href="common_8h.html#aa79ca71ef110a498d8275cbf7aa75a93">RSHIFT</a>(motion_x[2] + motion_x[3], 1);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                        motion_y[1] = <a class="code" href="common_8h.html#aa79ca71ef110a498d8275cbf7aa75a93">RSHIFT</a>(motion_y[2] + motion_y[3], 1);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                        motion_x[1] = motion_x[0];</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                        motion_y[1] = motion_y[0];</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                    }</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt;= 2) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                        motion_x[0] = (motion_x[0] &gt;&gt; 1) | (motion_x[0] &amp; 1);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                        motion_x[1] = (motion_x[1] &gt;&gt; 1) | (motion_x[1] &amp; 1);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                    }</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                    frag = 2 * mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1] + mb_x;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                    <span class="keywordflow">for</span> (k = 0; k &lt; 2; k++) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1][frag][0] = motion_x[k];</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1][frag][1] = motion_y[k];</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                        frag += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1];</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                    }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                    <span class="keywordflow">for</span> (k = 0; k &lt; 4; k++) {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                        frag = <a class="code" href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">BLOCK_Y</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1] + <a class="code" href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">BLOCK_X</a>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding[current_macroblock] == <a class="code" href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a>) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1][frag][0] = motion_x[k];</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1][frag][1] = motion_y[k];</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1][frag][0] = motion_x[0];</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1][frag][1] = motion_y[0];</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                        }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                    }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;}</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="vp3_8c.html#a0227d0cc568c8fb3a3763164ffad0405"> 1090</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a0227d0cc568c8fb3a3763164ffad0405">unpack_block_qpis</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;{</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keywordtype">int</span> qpi, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>, run_length, blocks_decoded, num_blocks_at_qpi;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordtype">int</span> num_blocks = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;total_num_coded_frags;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">for</span> (qpi = 0; qpi &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nqps - 1 &amp;&amp; num_blocks &gt; 0; qpi++) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = blocks_decoded = num_blocks_at_qpi = 0;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>        = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) ^ 1;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        run_length = 0;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="keywordflow">if</span> (run_length == <a class="code" href="vp3_8c.html#a7fca9a5d85722c7fde0906432424cede">MAXIMUM_LONG_BIT_RUN</a>)</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a> ^= 1;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            run_length = <a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_run_length_vlc.table, 6, 2) + 1;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <span class="keywordflow">if</span> (run_length == 34)</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                run_length += <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 12);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            blocks_decoded += run_length;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>)</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                num_blocks_at_qpi += run_length;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; run_length; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;total_num_coded_frags)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_fragment_list[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]].qpi == qpi) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_fragment_list[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]].qpi += <a class="code" href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                    j++;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                }</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        } <span class="keywordflow">while</span> (blocks_decoded &lt; num_blocks &amp;&amp; <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &gt; 0);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        num_blocks -= num_blocks_at_qpi;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="vp3_8c.html#a203bb281f7fcd4722ca67a165d5bdc0f"> 1132</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a203bb281f7fcd4722ca67a165d5bdc0f">get_eob_run</a>(<a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, <span class="keywordtype">int</span> token)</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;{</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordtype">int</span> v = <a class="code" href="vp3data_8h.html#a21aab26a05f17b506992d352e032c303">eob_run_table</a>[token].base;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vp3data_8h.html#a21aab26a05f17b506992d352e032c303">eob_run_table</a>[token].<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        v += <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, <a class="code" href="vp3data_8h.html#a21aab26a05f17b506992d352e032c303">eob_run_table</a>[token].<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;}</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"><a class="line" href="vp3_8c.html#ad1d5ad8ca9284a53b5c2481b96ee9f4f"> 1140</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#ad1d5ad8ca9284a53b5c2481b96ee9f4f">get_coeff</a>(<a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, <span class="keywordtype">int</span> token, int16_t *<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>)</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;{</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordtype">int</span> bits_to_get, zero_run;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    bits_to_get = <a class="code" href="vp3data_8h.html#ade191a5a13e379b147c83578327012a5">coeff_get_bits</a>[token];</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">if</span> (bits_to_get)</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        bits_to_get = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, bits_to_get);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    *<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> = <a class="code" href="vp3data_8h.html#a6976b444721242a20ba2d652e11c51c4">coeff_tables</a>[token][bits_to_get];</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    zero_run = <a class="code" href="vp3data_8h.html#a5c4d829a1307e79b2c27e0c88ab61be8">zero_run_base</a>[token];</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vp3data_8h.html#a11110ecaf0b43546f4a8ea9c91c86385">zero_run_get_bits</a>[token])</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        zero_run += <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, <a class="code" href="vp3data_8h.html#a11110ecaf0b43546f4a8ea9c91c86385">zero_run_get_bits</a>[token]);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">return</span> zero_run;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;}</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment"> * This function is called by unpack_dct_coeffs() to extract the VLCs from</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment"> * the bitstream. The VLCs encode tokens which are used to unpack DCT</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment"> * data. This function unpacks all the VLCs for either the Y plane or both</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment"> * C planes, and is called for DC coefficients or different AC coefficient</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment"> * levels (since different coefficient types require different VLC tables.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment"> * This function returns a residual eob run. E.g, if a particular token gave</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment"> * instructions to EOB the next 5 fragments and there were only 2 fragments</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment"> * left in the current fragment range, 3 would be returned so that it could</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment"> * be passed into the next call to this same function.</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="vp3_8c.html#af2a8bcaab19846840be9f8cad38e9aef"> 1168</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#af2a8bcaab19846840be9f8cad38e9aef">unpack_vlcs</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                       <a class="code" href="struct_v_l_c.html">VLC</a> *<a class="code" href="prosumer_8c.html#a8f9d32e424405551734404b133418a22">table</a>, <span class="keywordtype">int</span> coeff_index,</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                       <span class="keywordtype">int</span> plane,</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                       <span class="keywordtype">int</span> eob_run)</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;{</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j = 0;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordtype">int</span> token;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordtype">int</span> zero_run  = 0;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    int16_t <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> = 0;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordtype">int</span> blocks_ended;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordtype">int</span> coeff_i = 0;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordtype">int</span> num_coeffs      = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_coded_frags[plane][coeff_index];</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    int16_t *dct_tokens = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][coeff_index];</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160; </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="comment">/* local references to structure members to avoid repeated dereferences */</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordtype">int</span> *coded_fragment_list   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_fragment_list[plane];</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <a class="code" href="struct_vp3_fragment.html">Vp3Fragment</a> *all_fragments = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <a class="code" href="vlc_8h.html#a7e70876676d0b52ff7cf93cadf7e24fa">VLC_TYPE</a>(*vlc_table)[2] = <a class="code" href="prosumer_8c.html#a8f9d32e424405551734404b133418a22">table</a>-&gt;table;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">if</span> (num_coeffs &lt; 0) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;               <span class="stringliteral">&quot;Invalid number of coefficients at level %d\n&quot;</span>, coeff_index);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">if</span> (eob_run &gt; num_coeffs) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        coeff_i      =</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        blocks_ended = num_coeffs;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        eob_run     -= num_coeffs;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        coeff_i      =</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        blocks_ended = eob_run;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        eob_run      = 0;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">// insert fake EOB token to cover the split between planes or zzi</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">if</span> (blocks_ended)</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        dct_tokens[j++] = blocks_ended &lt;&lt; 2;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">while</span> (coeff_i &lt; num_coeffs &amp;&amp; <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &gt; 0) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="comment">/* decode a VLC into a token */</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        token = <a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, vlc_table, 11, 3);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="comment">/* use the token to get a zero run, a coefficient, and an eob run */</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>) token &lt;= 6<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a>) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            eob_run = <a class="code" href="vp3_8c.html#a203bb281f7fcd4722ca67a165d5bdc0f">get_eob_run</a>(gb, token);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            <span class="keywordflow">if</span> (!eob_run)</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                eob_run = INT_MAX;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            <span class="comment">// record only the number of blocks ended in this plane,</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            <span class="comment">// any spill will be recorded in the next plane.</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            <span class="keywordflow">if</span> (eob_run &gt; num_coeffs - coeff_i) {</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                dct_tokens[j++] = <a class="code" href="vp3_8c.html#a2e636d1951c3f11a2d02f55a173fb523">TOKEN_EOB</a>(num_coeffs - coeff_i);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                blocks_ended   += num_coeffs - coeff_i;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                eob_run        -= num_coeffs - coeff_i;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                coeff_i         = num_coeffs;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                dct_tokens[j++] = <a class="code" href="vp3_8c.html#a2e636d1951c3f11a2d02f55a173fb523">TOKEN_EOB</a>(eob_run);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                blocks_ended   += eob_run;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                coeff_i        += eob_run;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                eob_run         = 0;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            }</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token &gt;= 0) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            zero_run = <a class="code" href="vp3_8c.html#ad1d5ad8ca9284a53b5c2481b96ee9f4f">get_coeff</a>(gb, token, &amp;<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; </div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="keywordflow">if</span> (zero_run) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                dct_tokens[j++] = <a class="code" href="vp3_8c.html#af422b1cf3152e1eadeb96307be009afe">TOKEN_ZERO_RUN</a>(<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>, zero_run);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                <span class="comment">// Save DC into the fragment structure. DC prediction is</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                <span class="comment">// done in raster order, so the actual DC can&#39;t be in with</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                <span class="comment">// other tokens. We still need the token in dct_tokens[]</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                <span class="comment">// however, or else the structure collapses on itself.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                <span class="keywordflow">if</span> (!coeff_index)</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                    all_fragments[coded_fragment_list[coeff_i]].<a class="code" href="struct_vp3_fragment.html#aa9fb23e7b33e22c1da344d35378ccb0a">dc</a> = <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                dct_tokens[j++] = <a class="code" href="vp3_8c.html#ae7145e4f7ffe6b976e340130932c0f19">TOKEN_COEFF</a>(<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="keywordflow">if</span> (coeff_index + zero_run &gt; 64) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                       <span class="stringliteral">&quot;Invalid zero run of %d with %d coeffs left\n&quot;</span>,</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                       zero_run, 64 - coeff_index);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                zero_run = 64 - coeff_index;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <span class="comment">// zero runs code multiple coefficients,</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <span class="comment">// so don&#39;t try to decode coeffs for those higher levels</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = coeff_index + 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= coeff_index + zero_run; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_coded_frags[plane][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]--;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            coeff_i++;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid token %d\n&quot;</span>, token);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    }</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160; </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">if</span> (blocks_ended &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_coded_frags[plane][coeff_index])</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;More blocks ended than coded!\n&quot;</span>);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="comment">// decrement the number of blocks that have higher coefficients for each</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">// EOB run at this level</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> (blocks_ended)</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = coeff_index + 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_coded_frags[plane][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] -= blocks_ended;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="comment">// setup the next buffer</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (plane &lt; 2)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane + 1][coeff_index] = dct_tokens + j;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff_index &lt; 63)</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[0][coeff_index + 1] = dct_tokens + j;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">return</span> eob_run;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;}</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#a20e3180ea8385544ac58a895d2755ec0">reverse_dc_prediction</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                                  <span class="keywordtype">int</span> first_fragment,</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                                  <span class="keywordtype">int</span> fragment_width,</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                                  <span class="keywordtype">int</span> fragment_height);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment"> * This function unpacks all of the DCT coefficient data from the</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment"> * bitstream.</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="vp3_8c.html#ab410e1e233bc55ad4f49e990d0f51d4b"> 1289</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#ab410e1e233bc55ad4f49e990d0f51d4b">unpack_dct_coeffs</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;{</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordtype">int</span> dc_y_table;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordtype">int</span> dc_c_table;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordtype">int</span> ac_y_table;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keywordtype">int</span> ac_c_table;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordtype">int</span> residual_eob_run = 0;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> *y_tables[64];</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> *c_tables[64];</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[0][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens_base;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt; 16)</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="comment">/* fetch the DC table indexes */</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    dc_y_table = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    dc_c_table = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="comment">/* unpack the Y plane DC coefficients */</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    residual_eob_run = <a class="code" href="vp3_8c.html#af2a8bcaab19846840be9f8cad38e9aef">unpack_vlcs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[dc_y_table], 0,</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                                   0, residual_eob_run);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">if</span> (residual_eob_run &lt; 0)</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">return</span> residual_eob_run;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt; 8)</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="comment">/* reverse prediction of the Y-plane DC coefficients */</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <a class="code" href="vp3_8c.html#a20e3180ea8385544ac58a895d2755ec0">reverse_dc_prediction</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[0]);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="comment">/* unpack the C plane DC coefficients */</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    residual_eob_run = <a class="code" href="vp3_8c.html#af2a8bcaab19846840be9f8cad38e9aef">unpack_vlcs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[dc_c_table], 0,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                                   1, residual_eob_run);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">if</span> (residual_eob_run &lt; 0)</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">return</span> residual_eob_run;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    residual_eob_run = <a class="code" href="vp3_8c.html#af2a8bcaab19846840be9f8cad38e9aef">unpack_vlcs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[dc_c_table], 0,</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                                   2, residual_eob_run);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">if</span> (residual_eob_run &lt; 0)</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keywordflow">return</span> residual_eob_run;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="comment">/* reverse prediction of the C-plane DC coefficients */</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <a class="code" href="vp3_8c.html#a20e3180ea8385544ac58a895d2755ec0">reverse_dc_prediction</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_start[1],</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                              <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[1]);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <a class="code" href="vp3_8c.html#a20e3180ea8385544ac58a895d2755ec0">reverse_dc_prediction</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_start[2],</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                              <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[1]);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160; </div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt; 8)</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">/* fetch the AC table indexes */</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    ac_y_table = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    ac_c_table = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="comment">/* build tables of AC VLC tables */</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="comment">/* AC VLC table group 1 */</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        y_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_y_table + 16];</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        c_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_c_table + 16];</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 14; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <span class="comment">/* AC VLC table group 2 */</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        y_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_y_table + 32];</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        c_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_c_table + 32];</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 15; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 27; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        <span class="comment">/* AC VLC table group 3 */</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        y_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_y_table + 48];</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        c_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_c_table + 48];</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 28; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 63; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <span class="comment">/* AC VLC table group 4 */</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        y_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_y_table + 64];</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        c_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_c_table + 64];</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="comment">/* decode all AC coefficients */</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 63; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        residual_eob_run = <a class="code" href="vp3_8c.html#af2a8bcaab19846840be9f8cad38e9aef">unpack_vlcs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, y_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                                       0, residual_eob_run);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <span class="keywordflow">if</span> (residual_eob_run &lt; 0)</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            <span class="keywordflow">return</span> residual_eob_run;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        residual_eob_run = <a class="code" href="vp3_8c.html#af2a8bcaab19846840be9f8cad38e9aef">unpack_vlcs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, c_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                                       1, residual_eob_run);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <span class="keywordflow">if</span> (residual_eob_run &lt; 0)</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            <span class="keywordflow">return</span> residual_eob_run;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        residual_eob_run = <a class="code" href="vp3_8c.html#af2a8bcaab19846840be9f8cad38e9aef">unpack_vlcs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, c_tables[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                                       2, residual_eob_run);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <span class="keywordflow">if</span> (residual_eob_run &lt; 0)</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            <span class="keywordflow">return</span> residual_eob_run;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    }</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;}</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> vp4_unpack_vlcs(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                       <a class="code" href="struct_v_l_c.html">VLC</a> *<a class="code" href="imc_8c.html#a853b93a1fcb68331bf140fbf60dd4658">vlc_tables</a>[64],</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                       <span class="keywordtype">int</span> plane, <span class="keywordtype">int</span> eob_tracker[64], <span class="keywordtype">int</span> <a class="code" href="structfragment.html">fragment</a>)</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;{</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keywordtype">int</span> token;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordtype">int</span> zero_run  = 0;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    int16_t <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> = 0;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordtype">int</span> coeff_i = 0;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="keywordtype">int</span> eob_run;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">while</span> (!eob_tracker[coeff_i]) {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt; 1)</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        token = <a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="imc_8c.html#a853b93a1fcb68331bf140fbf60dd4658">vlc_tables</a>[coeff_i]-&gt;<a class="code" href="prosumer_8c.html#a8f9d32e424405551734404b133418a22">table</a>, 11, 3);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="comment">/* use the token to get a zero run, a coefficient, and an eob run */</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>) token &lt;= 6<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a>) {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;            eob_run = <a class="code" href="vp3_8c.html#a203bb281f7fcd4722ca67a165d5bdc0f">get_eob_run</a>(gb, token);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][coeff_i]++ = <a class="code" href="vp3_8c.html#a2e636d1951c3f11a2d02f55a173fb523">TOKEN_EOB</a>(0);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            eob_tracker[coeff_i] = eob_run - 1;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token &gt;= 0) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            zero_run = <a class="code" href="vp3_8c.html#ad1d5ad8ca9284a53b5c2481b96ee9f4f">get_coeff</a>(gb, token, &amp;<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            <span class="keywordflow">if</span> (zero_run) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                <span class="keywordflow">if</span> (coeff_i + zero_run &gt; 64) {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                        <span class="stringliteral">&quot;Invalid zero run of %d with %d coeffs left\n&quot;</span>,</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                        zero_run, 64 - coeff_i);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                    zero_run = 64 - coeff_i;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][coeff_i]++ = <a class="code" href="vp3_8c.html#af422b1cf3152e1eadeb96307be009afe">TOKEN_ZERO_RUN</a>(<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>, zero_run);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                coeff_i += zero_run;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                <span class="keywordflow">if</span> (!coeff_i)</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="structfragment.html">fragment</a>].dc = <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][coeff_i]++ = <a class="code" href="vp3_8c.html#ae7145e4f7ffe6b976e340130932c0f19">TOKEN_COEFF</a>(<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            coeff_i++;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <span class="keywordflow">if</span> (coeff_i &gt;= 64) <span class="comment">/* &gt; 64 occurs when there is a zero_run overflow */</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                <span class="keywordflow">return</span> 0; <span class="comment">/* stop */</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid token %d\n&quot;</span>, token);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][coeff_i]++ = <a class="code" href="vp3_8c.html#a2e636d1951c3f11a2d02f55a173fb523">TOKEN_EOB</a>(0);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    eob_tracker[coeff_i]--;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;}</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; </div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> vp4_dc_predictor_reset(<a class="code" href="struct_v_p4_predictor.html">VP4Predictor</a> *p)</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;{</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    p-&gt;<a class="code" href="struct_v_p4_predictor.html#a9bd7bac5517285ba5f77a14e59ad7d39">dc</a> = 0;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    p-&gt;<a class="code" href="struct_v_p4_predictor.html#abf9fc5f32baf526f0a6384d5d4e34990">type</a> = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba844cf3f8940c5287fdd836da6d3f7778">VP4_DC_UNDEFINED</a>;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;}</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> vp4_dc_pred_before(<span class="keyword">const</span> <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_v_p4_predictor.html">VP4Predictor</a> dc_pred[6][6], <span class="keywordtype">int</span> sb_x)</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;{</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        dc_pred[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_pred_row[sb_x * 4 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160; </div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (j = 1; j &lt; 5; j++)</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            vp4_dc_predictor_reset(&amp;dc_pred[j][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1]);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;}</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160; </div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> vp4_dc_pred_after(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_v_p4_predictor.html">VP4Predictor</a> dc_pred[6][6], <span class="keywordtype">int</span> sb_x)</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;{</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_pred_row[sb_x * 4 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = dc_pred[4][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1];</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        dc_pred[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] = dc_pred[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][4];</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;}</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160; </div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">/* note: dc_pred points to the current block */</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> vp4_dc_pred(<span class="keyword">const</span> <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keyword">const</span> <a class="code" href="struct_v_p4_predictor.html">VP4Predictor</a> * dc_pred, <span class="keyword">const</span> <span class="keywordtype">int</span> * last_dc, <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, <span class="keywordtype">int</span> plane)</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;{</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = 0;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keywordflow">if</span> (dc_pred[-6].<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>) {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> += dc_pred[-6].<a class="code" href="struct_v_p4_predictor.html#a9bd7bac5517285ba5f77a14e59ad7d39">dc</a>;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        count++;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    }</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">if</span> (dc_pred[6].<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> += dc_pred[6].<a class="code" href="struct_v_p4_predictor.html#a9bd7bac5517285ba5f77a14e59ad7d39">dc</a>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        count++;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    }</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">if</span> (count != 2 &amp;&amp; dc_pred[-1].<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> += dc_pred[-1].<a class="code" href="struct_v_p4_predictor.html#a9bd7bac5517285ba5f77a14e59ad7d39">dc</a>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        count++;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    }</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">if</span> (count != 2 &amp;&amp; dc_pred[1].<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>) {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> += dc_pred[1].<a class="code" href="struct_v_p4_predictor.html#a9bd7bac5517285ba5f77a14e59ad7d39">dc</a>;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        count++;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    }</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="comment">/* using division instead of shift to correctly handle negative values */</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">return</span> count == 2 ? <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> / 2 : last_dc[<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>];</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;}</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160; </div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> vp4_set_tokens_base(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;{</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordtype">int</span> plane, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    int16_t *<a class="code" href="vp3data_8h.html#ad44119f8ce1676a4dfac55fd4b74d09c">base</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens_base;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="keywordflow">for</span> (plane = 0; plane &lt; 3; plane++) {</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="vp3data_8h.html#ad44119f8ce1676a4dfac55fd4b74d09c">base</a>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;            <a class="code" href="vp3data_8h.html#ad44119f8ce1676a4dfac55fd4b74d09c">base</a> += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[!!plane] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[!!plane];</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    }</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;}</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> vp4_unpack_dct_coeffs(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;{</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordtype">int</span> dc_y_table;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordtype">int</span> dc_c_table;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordtype">int</span> ac_y_table;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordtype">int</span> ac_c_table;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <a class="code" href="struct_v_l_c.html">VLC</a> *<a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[2][64];</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordtype">int</span> plane, sb_y, sb_x;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keywordtype">int</span> eob_tracker[64];</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <a class="code" href="struct_v_p4_predictor.html">VP4Predictor</a> dc_pred[6][6];</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordtype">int</span> last_dc[<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badb5803b5107889adc5275b2ed0d0b1ae">NB_VP4_DC_TYPES</a>];</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160; </div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt; 16)</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="comment">/* fetch the DC table indexes */</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    dc_y_table = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    dc_c_table = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    ac_y_table = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    ac_c_table = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160; </div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="comment">/* build tables of DC/AC VLC tables */</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160; </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="comment">/* DC table group */</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[0][0] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[dc_y_table];</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[1][0] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[dc_c_table];</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <span class="comment">/* AC VLC table group 1 */</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_y_table + 16];</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_c_table + 16];</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    }</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 14; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="comment">/* AC VLC table group 2 */</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_y_table + 32];</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_c_table + 32];</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 15; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 27; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        <span class="comment">/* AC VLC table group 3 */</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_y_table + 48];</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_c_table + 48];</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 28; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 63; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <span class="comment">/* AC VLC table group 4 */</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_y_table + 64];</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[ac_c_table + 64];</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    }</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    vp4_set_tokens_base(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    memset(last_dc, 0, <span class="keyword">sizeof</span>(last_dc));</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">for</span> (plane = 0; plane &lt; ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>) ? 1 : 3); plane++) {</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        memset(eob_tracker, 0, <span class="keyword">sizeof</span>(eob_tracker));</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160; </div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="comment">/* initialise dc prediction */</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[!!plane]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;            vp4_dc_predictor_reset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_pred_row[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 6; j++)</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                vp4_dc_predictor_reset(&amp;dc_pred[j][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160; </div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keywordflow">for</span> (sb_y = 0; sb_y * 4 &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[!!plane]; sb_y++) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;            <span class="keywordflow">for</span> (sb_x = 0; sb_x *4 &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[!!plane]; sb_x++) {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                vp4_dc_pred_before(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dc_pred, sb_x);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 16; j++) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                        <span class="keywordtype">int</span> hx = <a class="code" href="vp3_8c.html#aec58861293e80cd857bbda50227c71ed">hilbert_offset</a>[j][0];</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                        <span class="keywordtype">int</span> hy = <a class="code" href="vp3_8c.html#aec58861293e80cd857bbda50227c71ed">hilbert_offset</a>[j][1];</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                        <span class="keywordtype">int</span> x  = 4 * sb_x + hx;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;                        <span class="keywordtype">int</span> y  = 4 * sb_y + hy;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                        <a class="code" href="struct_v_p4_predictor.html">VP4Predictor</a> *this_dc_pred = &amp;dc_pred[hy + 1][hx + 1];</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="structfragment.html">fragment</a>, dc_block_type;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160; </div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                        <span class="keywordflow">if</span> (x &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[!!plane] || y &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[!!plane])</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                        <a class="code" href="structfragment.html">fragment</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_start[plane] + y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[!!plane] + x;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="structfragment.html">fragment</a>].coding_method == <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>)</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                        <span class="keywordflow">if</span> (vp4_unpack_vlcs(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, <a class="code" href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a>[!!plane], plane, eob_tracker, <a class="code" href="structfragment.html">fragment</a>) &lt; 0)</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                        dc_block_type = <a class="code" href="vp3_8c.html#a9376133c69d116e74c992c3bc8aca33e">vp4_pred_block_type_map</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="structfragment.html">fragment</a>].coding_method];</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="structfragment.html">fragment</a>].dc +=</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                            vp4_dc_pred(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, this_dc_pred, last_dc, dc_block_type, plane);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                        this_dc_pred-&gt;<a class="code" href="struct_v_p4_predictor.html#abf9fc5f32baf526f0a6384d5d4e34990">type</a> = dc_block_type,</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                        this_dc_pred-&gt;<a class="code" href="struct_v_p4_predictor.html#a9bd7bac5517285ba5f77a14e59ad7d39">dc</a>   = last_dc[dc_block_type] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="structfragment.html">fragment</a>].dc;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                vp4_dc_pred_after(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dc_pred, sb_x);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            }</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        }</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160; </div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    vp4_set_tokens_base(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;}</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160; </div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="comment"> * This function reverses the DC prediction for each coded fragment in</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="comment"> * the frame. Much of this function is adapted directly from the original</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<span class="comment"> * VP3 source code.</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"><a class="line" href="vp3_8c.html#a1a90e6facecd6df250aab542e9d4d339"> 1627</a></span>&#160;<span class="preprocessor">#define COMPATIBLE_FRAME(x)                                                   \</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="preprocessor">    (compatible_frame[s-&gt;all_fragments[x].coding_method] == current_frame_type)</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"><a class="line" href="vp3_8c.html#a10fe547a76f265bd44b0621f7b7e63ff"> 1629</a></span>&#160;<span class="preprocessor">#define DC_COEFF(u) s-&gt;all_fragments[u].dc</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"><a class="line" href="vp3_8c.html#a20e3180ea8385544ac58a895d2755ec0"> 1631</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#a20e3180ea8385544ac58a895d2755ec0">reverse_dc_prediction</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                                  <span class="keywordtype">int</span> first_fragment,</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                                  <span class="keywordtype">int</span> fragment_width,</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                                  <span class="keywordtype">int</span> fragment_height)</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;{</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="preprocessor">#define PUL 8</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="preprocessor">#define PU 4</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="preprocessor">#define PUR 2</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="preprocessor">#define PL 1</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = first_fragment;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordtype">int</span> predicted_dc;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="comment">/* DC values for the left, up-left, up, and up-right fragments */</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordtype">int</span> vl, vul, vu, vur;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160; </div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <span class="comment">/* indexes for the left, up-left, up, and up-right fragments */</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="keywordtype">int</span> l, ul, <a class="code" href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a>, ur;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">     * The 6 fields mean:</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment">     *   0: up-left multiplier</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment">     *   1: up multiplier</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">     *   2: up-right multiplier</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">     *   3: left multiplier</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> predictor_transform[16][4] = {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        {    0,   0,   0,   0 },</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        {    0,   0,   0, 128 }, <span class="comment">// PL</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        {    0,   0, 128,   0 }, <span class="comment">// PUR</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        {    0,   0,  53,  75 }, <span class="comment">// PUR|PL</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        {    0, 128,   0,   0 }, <span class="comment">// PU</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        {    0,  64,   0,  64 }, <span class="comment">// PU |PL</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        {    0, 128,   0,   0 }, <span class="comment">// PU |PUR</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        {    0,   0,  53,  75 }, <span class="comment">// PU |PUR|PL</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        {  128,   0,   0,   0 }, <span class="comment">// PUL</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        {    0,   0,   0, 128 }, <span class="comment">// PUL|PL</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        {   64,   0,  64,   0 }, <span class="comment">// PUL|PUR</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        {    0,   0,  53,  75 }, <span class="comment">// PUL|PUR|PL</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        {    0, 128,   0,   0 }, <span class="comment">// PUL|PU</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        { -104, 116,   0, 116 }, <span class="comment">// PUL|PU |PL</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        {   24,  80,  24,   0 }, <span class="comment">// PUL|PU |PUR</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        { -104, 116,   0, 116 }  <span class="comment">// PUL|PU |PUR|PL</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    };</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="comment">/* This table shows which types of blocks can use other blocks for</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;<span class="comment">     * prediction. For example, INTRA is the only mode in this table to</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="comment">     * have a frame number of 0. That means INTRA blocks can only predict</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment">     * from other INTRA blocks. There are 2 golden frame coding types;</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="comment">     * blocks encoding in these modes can only predict from other blocks</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="comment">     * that were encoded with these 1 of these 2 modes. */</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> compatible_frame[9] = {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        1,    <span class="comment">/* MODE_INTER_NO_MV */</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        0,    <span class="comment">/* MODE_INTRA */</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        1,    <span class="comment">/* MODE_INTER_PLUS_MV */</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        1,    <span class="comment">/* MODE_INTER_LAST_MV */</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        1,    <span class="comment">/* MODE_INTER_PRIOR_MV */</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        2,    <span class="comment">/* MODE_USING_GOLDEN */</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        2,    <span class="comment">/* MODE_GOLDEN_MV */</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        1,    <span class="comment">/* MODE_INTER_FOUR_MV */</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        3     <span class="comment">/* MODE_COPY */</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    };</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="keywordtype">int</span> current_frame_type;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="comment">/* there is a last DC predictor for each of the 3 frame types */</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordtype">short</span> last_dc[3];</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a> = 0;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    vul =</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    vu  =</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    vur =</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    vl  = 0;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    last_dc[0] =</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    last_dc[1] =</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    last_dc[2] = 0;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="comment">/* for each fragment row... */</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; fragment_height; y++) {</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <span class="comment">/* for each fragment in a row... */</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; fragment_width; x++, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;            <span class="comment">/* reverse prediction if this block was coded */</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method != <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>) {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                current_frame_type =</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                    compatible_frame[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method];</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                <a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a> = 0;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                <span class="keywordflow">if</span> (x) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                    l  = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                    vl = <a class="code" href="vp3_8c.html#a10fe547a76f265bd44b0621f7b7e63ff">DC_COEFF</a>(l);</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#a1a90e6facecd6df250aab542e9d4d339">COMPATIBLE_FRAME</a>(l))</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                        <a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a> |= <a class="code" href="vp3_8c.html#a726f623ff633b7060a6bbacefe6b5c5a">PL</a>;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                <span class="keywordflow">if</span> (y) {</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                    <a class="code" href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a>  = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - fragment_width;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                    vu = <a class="code" href="vp3_8c.html#a10fe547a76f265bd44b0621f7b7e63ff">DC_COEFF</a>(<a class="code" href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a>);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#a1a90e6facecd6df250aab542e9d4d339">COMPATIBLE_FRAME</a>(<a class="code" href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a>))</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                        <a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a> |= <a class="code" href="vp3_8c.html#a1b28968e7678d6e9809ee468e5354cdb">PU</a>;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                    <span class="keywordflow">if</span> (x) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                        ul  = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - fragment_width - 1;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                        vul = <a class="code" href="vp3_8c.html#a10fe547a76f265bd44b0621f7b7e63ff">DC_COEFF</a>(ul);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#a1a90e6facecd6df250aab542e9d4d339">COMPATIBLE_FRAME</a>(ul))</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                            <a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a> |= <a class="code" href="vp3_8c.html#a8f6f819485faf7e31bbc21b6e9b6eaae">PUL</a>;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                    }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;                    <span class="keywordflow">if</span> (x + 1 &lt; fragment_width) {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                        ur  = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - fragment_width + 1;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                        vur = <a class="code" href="vp3_8c.html#a10fe547a76f265bd44b0621f7b7e63ff">DC_COEFF</a>(ur);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#a1a90e6facecd6df250aab542e9d4d339">COMPATIBLE_FRAME</a>(ur))</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                            <a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a> |= <a class="code" href="vp3_8c.html#aca65a8ce4ac411ae84ff3914ef46a697">PUR</a>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                    }</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a> == 0) {</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                    <span class="comment">/* if there were no fragments to predict from, use last</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment">                     * DC saved */</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                    predicted_dc = last_dc[current_frame_type];</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                    <span class="comment">/* apply the appropriate predictor transform */</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                    predicted_dc =</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                        (predictor_transform[<a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a>][0] * vul) +</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                        (predictor_transform[<a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a>][1] * vu) +</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                        (predictor_transform[<a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a>][2] * vur) +</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;                        (predictor_transform[<a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a>][3] * vl);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160; </div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                    predicted_dc /= 128;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160; </div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                    <span class="comment">/* check for outranging on the [ul u l] and</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="comment">                     * [ul u ur l] predictors */</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                    <span class="keywordflow">if</span> ((<a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a> == 15) || (<a class="code" href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a> == 13)) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(predicted_dc - vu) &gt; 128)</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                            predicted_dc = vu;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(predicted_dc - vl) &gt; 128)</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                            predicted_dc = vl;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(predicted_dc - vul) &gt; 128)</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                            predicted_dc = vul;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                    }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                }</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160; </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                <span class="comment">/* at long last, apply the predictor */</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                <a class="code" href="vp3_8c.html#a10fe547a76f265bd44b0621f7b7e63ff">DC_COEFF</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) += predicted_dc;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                <span class="comment">/* save the DC */</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                last_dc[current_frame_type] = <a class="code" href="vp3_8c.html#a10fe547a76f265bd44b0621f7b7e63ff">DC_COEFF</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    }</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;}</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160; </div>
<div class="line"><a name="l01781"></a><span class="lineno"><a class="line" href="vp3_8c.html#ad695c0452db369e22a797423fd8accc6"> 1781</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#ad695c0452db369e22a797423fd8accc6">apply_loop_filter</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> plane,</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                              <span class="keywordtype">int</span> ystart, <span class="keywordtype">int</span> yend)</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;{</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="keywordtype">int</span> *bounding_values = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bounding_values_array + 127;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160; </div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>           = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[!!plane];</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>          = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[!!plane];</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structfragment.html">fragment</a>        = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_start[plane] + ystart * <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    ptrdiff_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;linesize[plane];</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *plane_data = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;data[plane];</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flipped_image)</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> = -<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    plane_data += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_offset[plane] + 8 * ystart * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160; </div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">for</span> (y = ystart; y &lt; yend; y++) {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>; x++) {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <span class="comment">/* This code basically just deblocks on the edges of coded blocks.</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment">             * However, it has to be much more complicated because of the</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment">             * brain damaged deblock ordering used in VP3/Theora. Order matters</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment">             * because some pixels get filtered twice. */</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="structfragment.html">fragment</a>].coding_method != <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>) {</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                <span class="comment">/* do not perform left edge filter for left columns frags */</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                <span class="keywordflow">if</span> (x &gt; 0) {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp3dsp.h_loop_filter(</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                        plane_data + 8 * x,</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                        <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, bounding_values);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                }</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                <span class="comment">/* do not perform top edge filter for top row fragments */</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                <span class="keywordflow">if</span> (y &gt; 0) {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp3dsp.v_loop_filter(</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                        plane_data + 8 * x,</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                        <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, bounding_values);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                }</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160; </div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                <span class="comment">/* do not perform right edge filter for right column</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="comment">                 * fragments or if right fragment neighbor is also coded</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="comment">                 * in this frame (it will be filtered in next iteration) */</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                <span class="keywordflow">if</span> ((x &lt; <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> - 1) &amp;&amp;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                    (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="structfragment.html">fragment</a> + 1].coding_method == <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>)) {</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp3dsp.h_loop_filter(</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                        plane_data + 8 * x + 8,</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                        <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, bounding_values);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                }</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160; </div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                <span class="comment">/* do not perform bottom edge filter for bottom row</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">                 * fragments or if bottom fragment neighbor is also coded</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">                 * in this frame (it will be filtered in the next row) */</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                <span class="keywordflow">if</span> ((y &lt; <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> - 1) &amp;&amp;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                    (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="structfragment.html">fragment</a> + <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>].coding_method == <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>)) {</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp3dsp.v_loop_filter(</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                        plane_data + 8 * x + 8 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                        <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, bounding_values);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            }</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160; </div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            <a class="code" href="structfragment.html">fragment</a>++;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        }</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        plane_data += 8 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    }</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;}</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160; </div>
<div class="line"><a name="l01848"></a><span class="lineno"><a class="line" href="vp3_8c.html#af0211ee8963ada9a4d998135b9d8a4f7"> 1848</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#af0211ee8963ada9a4d998135b9d8a4f7">vp3_dequant</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_vp3_fragment.html">Vp3Fragment</a> *frag,</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                              <span class="keywordtype">int</span> plane, <span class="keywordtype">int</span> inter, int16_t <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[64])</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;{</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    int16_t *dequantizer = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qmat[frag-&gt;<a class="code" href="struct_vp3_fragment.html#a158a6d8069f02edbfe355fcb62f3c55b">qpi</a>][inter][plane];</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="f__perms_8c.html#ad4904214e86107d3afb6bf2f977236f6">perm</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idct_scantable;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160; </div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="keywordtype">int</span> token = *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="keywordflow">switch</span> (token &amp; 3) {</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="keywordflow">case</span> 0: <span class="comment">// EOB</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            <span class="keywordflow">if</span> (--token &lt; 4) <span class="comment">// 0-3 are token types so the EOB run must now be 0</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]++;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = token &amp; ~3;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <span class="keywordflow">case</span> 1: <span class="comment">// zero run</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]++;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> += (token &gt;&gt; 2) &amp; 0x7f;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 63) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Coefficient index overflow\n&quot;</span>);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;            }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;            <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="f__perms_8c.html#ad4904214e86107d3afb6bf2f977236f6">perm</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = (token &gt;&gt; 9) * dequantizer[<a class="code" href="f__perms_8c.html#ad4904214e86107d3afb6bf2f977236f6">perm</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <span class="keywordflow">case</span> 2: <span class="comment">// coeff</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="f__perms_8c.html#ad4904214e86107d3afb6bf2f977236f6">perm</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = (token &gt;&gt; 2) * dequantizer[<a class="code" href="f__perms_8c.html#ad4904214e86107d3afb6bf2f977236f6">perm</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens[plane][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++]++;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="keywordflow">default</span>: <span class="comment">// shouldn&#39;t happen</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        }</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    } <span class="keywordflow">while</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64);</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="comment">// return value is expected to be a valid level</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>:</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <span class="comment">// the actual DC+prediction is in the fragment structure</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0] = frag-&gt;<a class="code" href="struct_vp3_fragment.html#aa9fb23e7b33e22c1da344d35378ccb0a">dc</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qmat[0][inter][plane][0];</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;}</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160; </div>
<div class="line"><a name="l01893"></a><span class="lineno"><a class="line" href="vp3_8c.html#af85f6189e7e1dea8c1cf77bd0b1ad1c5"> 1893</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#af85f6189e7e1dea8c1cf77bd0b1ad1c5">vp3_draw_horiz_band</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> y)</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;{</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, cy, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>[<a class="code" href="frame_8h.html#add80189702cf0f5ea82718576fb43201">AV_NUM_DATA_POINTERS</a>];</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160; </div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordflow">if</span> (HAVE_THREADS &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;active_thread_type &amp; <a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>) {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        <span class="keywordtype">int</span> y_flipped = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flipped_image ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height - y : y;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        <span class="comment">/* At the end of the frame, report INT_MAX instead of the height of</span></div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="comment">         * the frame. This makes the other threads&#39; ff_thread_await_progress()</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment">         * calls cheaper, because they don&#39;t have to clip their values. */</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame,</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                                  y_flipped == <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height ? INT_MAX</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                                                         : y_flipped - 1,</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                                  0);</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160; </div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;draw_horiz_band)</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> = y - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_slice_end;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_slice_end = y;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    y -= <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flipped_image)</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        y = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height - y - <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160; </div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    cy        = y &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>[0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;linesize[0] * y;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>[1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;linesize[1] * cy;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>[2] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;linesize[2] * cy;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="frame_8h.html#add80189702cf0f5ea82718576fb43201">AV_NUM_DATA_POINTERS</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#ae59bb66df9495df417c2632403e23aa7">emms_c</a>();</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;draw_horiz_band(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, y, 3, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;}</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160; </div>
<div class="line"><a name="l01935"></a><span class="lineno"><a class="line" href="vp3_8c.html#af4cce1da031d8c09f4632713a7d06c57"> 1935</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#af4cce1da031d8c09f4632713a7d06c57">await_reference_row</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_vp3_fragment.html">Vp3Fragment</a> *<a class="code" href="structfragment.html">fragment</a>,</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                                <span class="keywordtype">int</span> motion_y, <span class="keywordtype">int</span> y)</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;{</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *ref_frame;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="keywordtype">int</span> ref_row;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordtype">int</span> border = motion_y &amp; 1;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160; </div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structfragment.html">fragment</a>-&gt;coding_method == <a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a> ||</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        <a class="code" href="structfragment.html">fragment</a>-&gt;coding_method == <a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>)</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        ref_frame = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        ref_frame = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    ref_row = y + (motion_y &gt;&gt; 1);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    ref_row = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(ref_row), ref_row + 8 + border);</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160; </div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(ref_frame, ref_row, 0);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;}</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> vp4_mc_loop_filter(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> plane, <span class="keywordtype">int</span> motion_x, <span class="keywordtype">int</span> motion_y, <span class="keywordtype">int</span> bx, <span class="keywordtype">int</span> by,</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;       <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> * motion_source, <span class="keywordtype">int</span> <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <span class="keywordtype">int</span> src_x, <span class="keywordtype">int</span> src_y, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a>)</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;{</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordtype">int</span> motion_shift = plane ? 4 : 2;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordtype">int</span> subpel_mask = plane ? 3 : 1;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="keywordtype">int</span> *bounding_values = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bounding_values_array + 127;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    <span class="keywordtype">int</span> x2, y2;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="keywordtype">int</span> x_subpel, y_subpel;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="keywordtype">int</span> x_offset, y_offset;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160; </div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    <span class="keywordtype">int</span> block_width = plane ? 8 : 16;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <span class="keywordtype">int</span> plane_width  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width  &gt;&gt; (plane &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift);</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="keywordtype">int</span> plane_height = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height &gt;&gt; (plane &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="preprocessor">#define loop_stride 12</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a>[12 * loop_stride];</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160; </div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="comment">/* using division instead of shift to correctly handle negative values */</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    x = 8 * bx + motion_x / motion_shift;</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    y = 8 * by + motion_y / motion_shift;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160; </div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    x_subpel = motion_x &amp; subpel_mask;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    y_subpel = motion_y &amp; subpel_mask;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <span class="keywordflow">if</span> (x_subpel || y_subpel) {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        x--;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        y--;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160; </div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <span class="keywordflow">if</span> (x_subpel)</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;            x = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(x, x + <a class="code" href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a>(motion_x));</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160; </div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <span class="keywordflow">if</span> (y_subpel)</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            y = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(y, y + <a class="code" href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a>(motion_y));</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160; </div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        x2 = x + block_width;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        y2 = y + block_width;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="keywordflow">if</span> (x2 &lt; 0 || x2 &gt;= plane_width || y2 &lt; 0 || y2 &gt;= plane_height)</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160; </div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        x_offset = (-(x + 2) &amp; 7) + 2;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        y_offset = (-(y + 2) &amp; 7) + 2;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <span class="keywordflow">if</span> (x_offset &gt; 8 + x_subpel &amp;&amp; y_offset &gt; 8 + y_subpel)</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160; </div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a>, motion_source - <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> - 1,</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;             loop_stride, <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>,</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;             12, 12, src_x - 1, src_y - 1,</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;             plane_width,</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;             plane_height);</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160; </div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        <span class="keywordflow">if</span> (x_offset &lt;= 8 + x_subpel)</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <a class="code" href="vp3dsp_8h.html#a7312c046e7594f81dfc8fa63666adca0">ff_vp3dsp_h_loop_filter_12</a>(<a class="code" href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a> + x_offset, loop_stride, bounding_values);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160; </div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <span class="keywordflow">if</span> (y_offset &lt;= 8 + y_subpel)</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;            <a class="code" href="vp3dsp_8h.html#a9f2906109b07ce8e7758095c83274cfc">ff_vp3dsp_v_loop_filter_12</a>(<a class="code" href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a> + y_offset*loop_stride, loop_stride, bounding_values);</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; </div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160; </div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        x_offset = -x &amp; 7;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;        y_offset = -y &amp; 7;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        <span class="keywordflow">if</span> (!x_offset &amp;&amp; !y_offset)</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160; </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a>, motion_source - <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> - 1,</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;             loop_stride, <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>,</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;             12, 12, src_x - 1, src_y - 1,</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;             plane_width,</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;             plane_height);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; </div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="preprocessor">#define safe_loop_filter(name, ptr, stride, bounding_values) \</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="preprocessor">    if ((uintptr_t)(ptr) &amp; 7) \</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="preprocessor">        s-&gt;vp3dsp.name##_unaligned(ptr, stride, bounding_values); \</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="preprocessor">    else \</span></div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="preprocessor">        s-&gt;vp3dsp.name(ptr, stride, bounding_values);</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160; </div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <span class="keywordflow">if</span> (x_offset)</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            safe_loop_filter(h_loop_filter, <a class="code" href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a> + loop_stride + x_offset + 1, loop_stride, bounding_values);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160; </div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="keywordflow">if</span> (y_offset)</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;            safe_loop_filter(v_loop_filter, <a class="code" href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a> + (y_offset + 1)*loop_stride + 1, loop_stride, bounding_values);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    }</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160; </div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 9; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        memcpy(<a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <a class="code" href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a> + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) * loop_stride + 1, 9);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160; </div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;}</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160; </div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="comment"> * Perform the final rendering for a particular slice of data.</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="comment"> * The slice number ranges from 0..(c_superblock_height - 1).</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02057"></a><span class="lineno"><a class="line" href="vp3_8c.html#a873df4b98675eee52547eac7bdff9f0a"> 2057</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vp3_8c.html#a873df4b98675eee52547eac7bdff9f0a">render_slice</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> slice)</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;{</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <span class="keywordtype">int</span> x, y, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, <a class="code" href="structfragment.html">fragment</a>;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordtype">int</span> motion_x = 0xdeadbeef, motion_y = 0xdeadbeef;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="keywordtype">int</span> motion_halfpel_index;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *motion_source;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <span class="keywordtype">int</span> plane, first_pixel;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160; </div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="keywordflow">if</span> (slice &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_height)</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keywordflow">for</span> (plane = 0; plane &lt; 3; plane++) {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="indeo3_8c.html#a3975788f2e43d27c415baaf1651292bf">output_plane</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;data[plane] +</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_offset[plane];</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *last_plane = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame.f-&gt;data[plane] +</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                              <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_offset[plane];</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *golden_plane = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame.f-&gt;data[plane] +</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_offset[plane];</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        ptrdiff_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;linesize[plane];</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <span class="keywordtype">int</span> plane_width  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width  &gt;&gt; (plane &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift);</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="keywordtype">int</span> plane_height = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height &gt;&gt; (plane &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        int8_t(*motion_val)[2] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[!!plane];</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160; </div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <span class="keywordtype">int</span> sb_x, sb_y = slice &lt;&lt; (!plane &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        <span class="keywordtype">int</span> slice_height = sb_y + 1 + (!plane &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="keywordtype">int</span> slice_width  = plane ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_width</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                                 : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_width;</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160; </div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keywordtype">int</span> fragment_width  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[!!plane];</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="keywordtype">int</span> fragment_height = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[!!plane];</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        <span class="keywordtype">int</span> fragment_start  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_start[plane];</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160; </div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        <span class="keywordtype">int</span> do_await = !plane &amp;&amp; HAVE_THREADS &amp;&amp;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                       (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;active_thread_type &amp; <a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160; </div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flipped_image)</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;            <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> = -<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <span class="keywordflow">if</span> (CONFIG_GRAY &amp;&amp; plane &amp;&amp; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>))</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160; </div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        <span class="comment">/* for each superblock row in the slice (both of them)... */</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        <span class="keywordflow">for</span> (; sb_y &lt; slice_height; sb_y++) {</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;            <span class="comment">/* for each superblock in a row... */</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            <span class="keywordflow">for</span> (sb_x = 0; sb_x &lt; slice_width; sb_x++) {</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                <span class="comment">/* for each block in a superblock... */</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 16; j++) {</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;                    x        = 4 * sb_x + <a class="code" href="vp3_8c.html#aec58861293e80cd857bbda50227c71ed">hilbert_offset</a>[j][0];</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                    y        = 4 * sb_y + <a class="code" href="vp3_8c.html#aec58861293e80cd857bbda50227c71ed">hilbert_offset</a>[j][1];</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                    <a class="code" href="structfragment.html">fragment</a> = y * fragment_width + x;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160; </div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                    <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = fragment_start + <a class="code" href="structfragment.html">fragment</a>;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                    <span class="comment">// bounds check</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                    <span class="keywordflow">if</span> (x &gt;= fragment_width || y &gt;= fragment_height)</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160; </div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                    first_pixel = 8 * y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> + 8 * x;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                    <span class="keywordflow">if</span> (do_await &amp;&amp;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method != <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>)</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                        <a class="code" href="vp3_8c.html#af4cce1da031d8c09f4632713a7d06c57">await_reference_row</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                                            motion_val[<a class="code" href="structfragment.html">fragment</a>][1],</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                                            (16 * y) &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                    <span class="comment">/* transform if this block was coded */</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method != <a class="code" href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a>) {</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                        <span class="keywordflow">if</span> ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method == <a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a>) ||</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                            (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method == <a class="code" href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a>))</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                            motion_source = golden_plane;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                            motion_source = last_plane;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160; </div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                        motion_source       += first_pixel;</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                        motion_halfpel_index = 0;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                        <span class="comment">/* sort out the motion vector if this fragment is coded</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<span class="comment">                         * using a motion vector method */</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                        <span class="keywordflow">if</span> ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method &gt; <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>) &amp;&amp;</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                            (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method != <a class="code" href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a>)) {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                            <span class="keywordtype">int</span> src_x, src_y;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                            <span class="keywordtype">int</span> standard_mc = 1;</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                            motion_x = motion_val[<a class="code" href="structfragment.html">fragment</a>][0];</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                            motion_y = motion_val[<a class="code" href="structfragment.html">fragment</a>][1];</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                            <span class="keywordflow">if</span> (plane &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &gt;= 2) {</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                                motion_x = (motion_x &gt;&gt; 1) | (motion_x &amp; 1);</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                                motion_y = (motion_y &gt;&gt; 1) | (motion_y &amp; 1);</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                            }</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                            src_x = (motion_x &gt;&gt; 1) + 8 * x;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                            src_y = (motion_y &gt;&gt; 1) + 8 * y;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160; </div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                            motion_halfpel_index = motion_x &amp; 0x01;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                            motion_source       += (motion_x &gt;&gt; 1);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160; </div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                            motion_halfpel_index |= (motion_y &amp; 0x01) &lt;&lt; 1;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                            motion_source        += ((motion_y &gt;&gt; 1) * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>);</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160; </div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &gt;= 2) {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;edge_emu_buffer;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> &lt; 0)</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                                    <a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a> -= 8 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                                <span class="keywordflow">if</span> (vp4_mc_loop_filter(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, plane, motion_val[<a class="code" href="structfragment.html">fragment</a>][0], motion_val[<a class="code" href="structfragment.html">fragment</a>][1], x, y, motion_source, <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, src_x, src_y, <a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a>)) {</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                                    motion_source = <a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a>;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                                    standard_mc = 0;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                                }</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                            }</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                            <span class="keywordflow">if</span> (standard_mc &amp;&amp; (</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                                src_x &lt; 0 || src_y &lt; 0 ||</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                                src_x + 9 &gt;= plane_width ||</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                                src_y + 9 &gt;= plane_height)) {</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;edge_emu_buffer;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> &lt; 0)</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                                    <a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a> -= 8 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a>, motion_source,</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                                                         <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>,</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                                                         9, 9, src_x, src_y,</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;                                                         plane_width,</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                                                         plane_height);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                                motion_source = <a class="code" href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a>;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                            }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                        }</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160; </div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                        <span class="comment">/* first, take care of copying a block from either the</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;<span class="comment">                         * previous or the golden frame */</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method != <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>) {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                            <span class="comment">/* Note, it is possible to implement all MC cases</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment">                             * with put_no_rnd_pixels_l2 which would look more</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment">                             * like the VP3 source but this would be slower as</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment">                             * put_no_rnd_pixels_tab is better optimized */</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                            <span class="keywordflow">if</span> (motion_halfpel_index != 3) {</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_no_rnd_pixels_tab[1][motion_halfpel_index](</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                                    <a class="code" href="indeo3_8c.html#a3975788f2e43d27c415baaf1651292bf">output_plane</a> + first_pixel,</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                                    motion_source, <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, 8);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                                <span class="comment">/* d is 0 if motion_x and _y have the same sign,</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="comment">                                 * else -1 */</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                                <span class="keywordtype">int</span> d = (motion_x ^ motion_y) &gt;&gt; 31;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp3dsp.put_no_rnd_pixels_l2(<a class="code" href="indeo3_8c.html#a3975788f2e43d27c415baaf1651292bf">output_plane</a> + first_pixel,</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                                                               motion_source - d,</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                                                               motion_source + <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> + 1 + d,</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                                                               <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, 8);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                            }</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                        }</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160; </div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                        <span class="comment">/* invert DCT and place (or add) in final output */</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].coding_method == <a class="code" href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a>) {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                            <a class="code" href="vp3_8c.html#af0211ee8963ada9a4d998135b9d8a4f7">vp3_dequant</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                                        plane, 0, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp3dsp.idct_put(<a class="code" href="indeo3_8c.html#a3975788f2e43d27c415baaf1651292bf">output_plane</a> + first_pixel,</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                                               <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>,</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                                               <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>);</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#af0211ee8963ada9a4d998135b9d8a4f7">vp3_dequant</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                                            plane, 1, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>)) {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp3dsp.idct_add(<a class="code" href="indeo3_8c.html#a3975788f2e43d27c415baaf1651292bf">output_plane</a> + first_pixel,</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                                                   <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>,</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                                                   <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>);</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp3dsp.idct_dc_add(<a class="code" href="indeo3_8c.html#a3975788f2e43d27c415baaf1651292bf">output_plane</a> + first_pixel,</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                                                      <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                            }</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                        }</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                        <span class="comment">/* copy directly from the previous frame */</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_pixels_tab[1][0](</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                            <a class="code" href="indeo3_8c.html#a3975788f2e43d27c415baaf1651292bf">output_plane</a> + first_pixel,</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                            last_plane + first_pixel,</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                            <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, 8);</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                    }</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                }</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            }</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160; </div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            <span class="comment">// Filter up to the last row in the superblock row</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2 &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_loop_filter)</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                <a class="code" href="vp3_8c.html#ad695c0452db369e22a797423fd8accc6">apply_loop_filter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, plane, 4 * sb_y - !!sb_y,</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                                  <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(4 * sb_y + 3, fragment_height - 1));</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        }</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    }</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160; </div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="comment">/* this looks like a good place for slice dispatch... */</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="comment">/* algorithm:</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment">     *   if (slice == s-&gt;macroblock_height - 1)</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment">     *     dispatch (both last slice &amp; 2nd-to-last slice);</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">     *   else if (slice &gt; 0)</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment">     *     dispatch (slice - 1);</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160; </div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <a class="code" href="vp3_8c.html#af85f6189e7e1dea8c1cf77bd0b1ad1c5">vp3_draw_horiz_band</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>((32 &lt;&lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift) * (slice + 1) - 16,</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height - 16));</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;}</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160; </div>
<div class="line"><a name="l02257"></a><span class="lineno"><a class="line" href="vp3_8c.html#a4fffc7c3a9129870a8185ef56d675ae4"> 2257</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a4fffc7c3a9129870a8185ef56d675ae4">allocate_tables</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;{</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordtype">int</span> y_fragment_count, c_fragment_count;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160; </div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <a class="code" href="vp3_8c.html#a6da7d4820c3cebbff1c4b21746926831">free_tables</a>(avctx);</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    y_fragment_count = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[0] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[0];</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    c_fragment_count = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[1];</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160; </div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <span class="comment">/* superblock_coding is used by unpack_superblocks (VP3/Theora) and vp4_unpack_macroblocks (VP4) */</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_count, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;yuv_macroblock_count));</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments     = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_count, <span class="keyword">sizeof</span>(<a class="code" href="struct_vp3_fragment.html">Vp3Fragment</a>));</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt; kf_coded_fragment_list = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_count, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nkf_coded_fragment_list = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_count, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt; num_kf_coded_fragment, -1, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt; num_kf_coded_fragment));</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160; </div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens_base = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_count,</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                                          64 * <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens_base));</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[0] = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(y_fragment_count, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[0]));</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1] = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(c_fragment_count, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1]));</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160; </div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <span class="comment">/* work out the block mapping tables */</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_fragments = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_count, 16 * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding    = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_count + 1);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_pred_row = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_width * 4, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_pred_row));</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160; </div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_coding    || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments          ||</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_tokens_base      || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;kf_coded_fragment_list ||</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nkf_coded_fragment_list ||</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_fragments || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_coding      ||</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_pred_row ||</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[0]        || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val[1]) {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    }</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <a class="code" href="vp3_8c.html#ab5c897db58ec55e3a4c047dccf76d794">init_block_mapping</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160; </div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;}</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160; </div>
<div class="line"><a name="l02300"></a><span class="lineno"><a class="line" href="vp3_8c.html#afc6cd488630d1a85ec5d80c78089e659"> 2300</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#afc6cd488630d1a85ec5d80c78089e659">init_frames</a>(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;{</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame.f    = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame.f  = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160; </div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame.f || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame.f)</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160; </div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;}</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160; </div>
<div class="line"><a name="l02312"></a><span class="lineno"><a class="line" href="vp3_8c.html#a3c4f9645a33d5f210f64e40e86d63d06"> 2312</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a3c4f9645a33d5f210f64e40e86d63d06">theora_init_huffman_tables</a>(<a class="code" href="struct_v_l_c.html">VLC</a> *vlc, <span class="keyword">const</span> <a class="code" href="struct_huff_table.html">HuffTable</a> *huff)</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;{</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    uint32_t <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a> = 0, codes[32];</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160; </div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; huff-&gt;<a class="code" href="struct_huff_table.html#a467d4e408e25151e14a3d5702dfad87a">nb_entries</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        codes[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>        &gt;&gt; (31 - huff-&gt;<a class="code" href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_huff_entry.html#a2baede7441728a14f1aec66be0a7323c">len</a>);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>    += 0x80000000<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> &gt;&gt; huff-&gt;<a class="code" href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_huff_entry.html#a2baede7441728a14f1aec66be0a7323c">len</a>;</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    }</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="bitstream_8c.html#a123bcd62a48b114fc911c76667b5494a">ff_init_vlc_sparse</a>(vlc, 11, huff-&gt;<a class="code" href="struct_huff_table.html#a467d4e408e25151e14a3d5702dfad87a">nb_entries</a>,</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                              &amp;huff-&gt;<a class="code" href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">entries</a>[0].<a class="code" href="struct_huff_entry.html#a2baede7441728a14f1aec66be0a7323c">len</a>, <span class="keyword">sizeof</span>(huff-&gt;<a class="code" href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">entries</a>[0]), 1,</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                              codes, 4, 4,</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                              &amp;huff-&gt;<a class="code" href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">entries</a>[0].<a class="code" href="struct_huff_entry.html#a9f451893fdcb243ecfce4e4b939dafef">sym</a>, <span class="keyword">sizeof</span>(huff-&gt;<a class="code" href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">entries</a>[0]), 1, 0);</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;}</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160; </div>
<div class="line"><a name="l02326"></a><span class="lineno"><a class="line" href="vp3_8c.html#a17c9077340e1d53413bfb31620054ab2"> 2326</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a17c9077340e1d53413bfb31620054ab2">vp3_decode_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;{</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, inter, plane, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="keywordtype">int</span> c_width;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordtype">int</span> c_height;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordtype">int</span> y_fragment_count, c_fragment_count;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#afc6cd488630d1a85ec5d80c78089e659">init_frames</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a2c974557671dd459674b170c5e64d79a">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;V&#39;</span>, <span class="charliteral">&#39;P&#39;</span>, <span class="charliteral">&#39;4&#39;</span>, <span class="charliteral">&#39;0&#39;</span>))</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version = 3;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a2c974557671dd459674b170c5e64d79a">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;V&#39;</span>, <span class="charliteral">&#39;P&#39;</span>, <span class="charliteral">&#39;3&#39;</span>, <span class="charliteral">&#39;0&#39;</span>))</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version = 0;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version = 1;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; </div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx  = avctx;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width  = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae3c157e97ff15d46e898a538c6bc7f09">coded_width</a>, 16);</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab2ebb76836ef4cd9822b5077c17b33d0">coded_height</a>, 16);</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea8c3ef0a1eec3cf22756a1323989ff4d8">AV_CODEC_ID_THEORA</a>)</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">chroma_sample_location</a> = <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffaef6df526ade7e565876d539b34151368">AVCHROMA_LOC_CENTER</a>;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <a class="code" href="hpeldsp_8c.html#a1bdbaf95361cfb912c75c8dbc819dcba">ff_hpeldsp_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#abb01e291550fa3fb96188af4d494587e">flags</a> | <a class="code" href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a>);</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <a class="code" href="libavcodec_2videodsp_8c.html#a9f55abcd843195bcf47dae7689bcf894">ff_videodsp_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp, 8);</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    <a class="code" href="vp3dsp_8c.html#af9c93aafef5f83d49cefc541bcd928d3">ff_vp3dsp_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp3dsp, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#abb01e291550fa3fb96188af4d494587e">flags</a>);</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160; </div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;<span class="preprocessor">#define TRANSPOSE(x) (((x) &gt;&gt; 3) | (((x) &amp; 7) &lt;&lt; 3))</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idct_permutation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="vp3_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idct_scantable[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]   = <a class="code" href="vp3_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a>(<a class="code" href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;<span class="preprocessor">#undef TRANSPOSE</span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    }</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160; </div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="comment">/* initialize to an impossible value which will force a recalculation</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="comment">     * in the first frame decode */</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = -1;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160; </div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="pixdesc_8c.html#a76e011cf53b51ea14a002a206f6ca05d">av_pix_fmt_get_chroma_sub_sample</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_width  = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width  + 31) / 32;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_height = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height + 31) / 32;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_count  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_width * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_height;</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <span class="comment">/* work out the dimensions for the C planes */</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    c_width                = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    c_height               = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_width  = (c_width  + 31) / 32;</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_height = (c_height + 31) / 32;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_count  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_width * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_height;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_count   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_count + (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_count * 2);</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;u_superblock_start = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_superblock_count;</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;v_superblock_start = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;u_superblock_start + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_count;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_width  = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width  + 15) / 16;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_height = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height + 15) / 16;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_count  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_width * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_height;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_macroblock_width  = (c_width  + 15) / 16;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_macroblock_height = (c_height + 15) / 16;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_macroblock_count  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_macroblock_width * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_macroblock_height;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;yuv_macroblock_count = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_count + 2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_macroblock_count;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160; </div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[0]  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width / <a class="code" href="vp3_8c.html#afb7cd1185ebdb2dffaf434b5f5e4ea4b">FRAGMENT_PIXELS</a>;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height / <a class="code" href="vp3_8c.html#afb7cd1185ebdb2dffaf434b5f5e4ea4b">FRAGMENT_PIXELS</a>;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1]  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[0] &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[0] &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160; </div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="comment">/* fragment count covers all 8x8 blocks for all 3 planes */</span></div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    y_fragment_count     = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[0] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[0];</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    c_fragment_count     = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_width[1] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_height[1];</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_count    = y_fragment_count + 2 * c_fragment_count;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_start[1] = y_fragment_count;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_start[2] = y_fragment_count + c_fragment_count;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160; </div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora_tables) {</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_dc_scale_factor[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2 ? <a class="code" href="vp3data_8h.html#a6ca9f2eabb03975b4a6d41868b31b778">vp31_dc_scale_factor</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] : <a class="code" href="vp4data_8h.html#afeead949f28df2eaeca5ecdb39831293">vp4_y_dc_scale_factor</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_dc_scale_factor[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2 ? <a class="code" href="vp3data_8h.html#a6ca9f2eabb03975b4a6d41868b31b778">vp31_dc_scale_factor</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] : <a class="code" href="vp4data_8h.html#a38ecba45ab1a305e14cce15f239cb070">vp4_uv_dc_scale_factor</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_ac_scale_factor[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2 ? <a class="code" href="vp3data_8h.html#a507185a884eea157e551338b7087d662">vp31_ac_scale_factor</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] : <a class="code" href="vp4data_8h.html#ad4b4b47cc4ad76304fa726011703fb18">vp4_ac_scale_factor</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;base_matrix[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]        = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2 ? <a class="code" href="vp3data_8h.html#ab6a5bfd620561b1234eedd381252fa18">vp31_intra_y_dequant</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] : <a class="code" href="vp4data_8h.html#aef4f00c19fad9e675b436765aefbc959">vp4_generic_dequant</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;base_matrix[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]        = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2 ? <a class="code" href="vp3data_8h.html#ac71321b331ecee56fcffb08939a287c2">vp31_intra_c_dequant</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] : <a class="code" href="vp4data_8h.html#aef4f00c19fad9e675b436765aefbc959">vp4_generic_dequant</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;base_matrix[2][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]        = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2 ? <a class="code" href="vp3data_8h.html#ac0ab248289e60e0afca450b621763327">vp31_inter_dequant</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]   : <a class="code" href="vp4data_8h.html#aef4f00c19fad9e675b436765aefbc959">vp4_generic_dequant</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filter_limit_values[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2 ? <a class="code" href="vp3data_8h.html#a2c7703761c1103a798d66f0c70a23434">vp31_filter_limit_values</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] : <a class="code" href="vp4data_8h.html#a33281ddf3433219f4f7b77e8bf6a6792">vp4_filter_limit_values</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        }</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160; </div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        <span class="keywordflow">for</span> (inter = 0; inter &lt; 2; inter++) {</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;            <span class="keywordflow">for</span> (plane = 0; plane &lt; 3; plane++) {</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_count[inter][plane]   = 1;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_size[inter][plane][0] = 63;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_base[inter][plane][0] =</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_base[inter][plane][1] = 2 * inter + (!!plane) * !inter;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;            }</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        }</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160; </div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;        <span class="comment">/* init VLC tables */</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2) {</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vlc_8h.html#a181984da1fe3452ad6a16348d10f8236">init_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 11, 32,</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                                    &amp;<a class="code" href="vp3data_8h.html#abcb5f83f2e33505ebf8aed1945499dae">vp3_bias</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][1], 4, 2,</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                                    &amp;<a class="code" href="vp3data_8h.html#abcb5f83f2e33505ebf8aed1945499dae">vp3_bias</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][0], 4, 2, 0)) &lt; 0)</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">/* version &gt;= 2 */</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vlc_8h.html#a181984da1fe3452ad6a16348d10f8236">init_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 11, 32,</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                                    &amp;<a class="code" href="vp4data_8h.html#a287aed97a5162ea91f014bd19a0a3f7b">vp4_bias</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][1], 4, 2,</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                                    &amp;<a class="code" href="vp4data_8h.html#a287aed97a5162ea91f014bd19a0a3f7b">vp4_bias</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][0], 4, 2, 0)) &lt; 0)</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            }</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        }</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#a3c4f9645a33d5f210f64e40e86d63d06">theora_init_huffman_tables</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coeff_vlc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;huffman_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        }</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    }</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160; </div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vlc_8h.html#a181984da1fe3452ad6a16348d10f8236">init_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;superblock_run_length_vlc, 6, 34,</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                        &amp;<a class="code" href="vp3data_8h.html#a72150bce8a859b26285e51d7f4761dcf">superblock_run_length_vlc_table</a>[0][1], 4, 2,</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                        &amp;<a class="code" href="vp3data_8h.html#a72150bce8a859b26285e51d7f4761dcf">superblock_run_length_vlc_table</a>[0][0], 4, 2, 0)) &lt; 0)</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160; </div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vlc_8h.html#a181984da1fe3452ad6a16348d10f8236">init_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_run_length_vlc, 5, 30,</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                        &amp;<a class="code" href="vp3data_8h.html#a470341f9066346a5cde8258a1bcd816f">fragment_run_length_vlc_table</a>[0][1], 4, 2,</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                        &amp;<a class="code" href="vp3data_8h.html#a470341f9066346a5cde8258a1bcd816f">fragment_run_length_vlc_table</a>[0][0], 4, 2, 0)) &lt; 0)</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160; </div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vlc_8h.html#a181984da1fe3452ad6a16348d10f8236">init_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode_code_vlc, 3, 8,</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                        &amp;<a class="code" href="vp3data_8h.html#a5163de1ff387ee4619cdb1fbbb5795bd">mode_code_vlc_table</a>[0][1], 2, 1,</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                        &amp;<a class="code" href="vp3data_8h.html#a5163de1ff387ee4619cdb1fbbb5795bd">mode_code_vlc_table</a>[0][0], 2, 1, 0)) &lt; 0)</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160; </div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vlc_8h.html#a181984da1fe3452ad6a16348d10f8236">init_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_vector_vlc, 6, 63,</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                        &amp;<a class="code" href="vp3data_8h.html#af38cf76922e44e082f83115ce8530706">motion_vector_vlc_table</a>[0][1], 2, 1,</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;                        &amp;<a class="code" href="vp3data_8h.html#af38cf76922e44e082f83115ce8530706">motion_vector_vlc_table</a>[0][0], 2, 1, 0)) &lt; 0)</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++)</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 7; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vlc_8h.html#a181984da1fe3452ad6a16348d10f8236">init_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vp4_mv_vlc[j][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 6, 63,</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                                &amp;<a class="code" href="vp4data_8h.html#acde71740b110e8ab6fcbeea3b564fe9b">vp4_mv_vlc</a>[j][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][1], 4, 2,</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                                &amp;<a class="code" href="vp4data_8h.html#acde71740b110e8ab6fcbeea3b564fe9b">vp4_mv_vlc</a>[j][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][0], 4, 2, 0)) &lt; 0)</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160; </div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="comment">/* version &gt;= 2 */</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vlc_8h.html#a181984da1fe3452ad6a16348d10f8236">init_vlc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_pattern_vlc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 3, 14,</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                            &amp;<a class="code" href="vp4data_8h.html#abba09903a7b0cc703dc31246889c5bf5">vp4_block_pattern_vlc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][1], 2, 1,</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                            &amp;<a class="code" href="vp4data_8h.html#abba09903a7b0cc703dc31246889c5bf5">vp4_block_pattern_vlc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0][0], 2, 1, 0)) &lt; 0)</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160; </div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vp3_8c.html#a4fffc7c3a9129870a8185ef56d675ae4">allocate_tables</a>(avctx);</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;}</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160; </div>
<div class="line"><a name="l02495"></a><span class="lineno"><a class="line" href="vp3_8c.html#ae9524c8b7f9f0264f11077693e026af3"> 2495</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#ae9524c8b7f9f0264f11077693e026af3">update_frames</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;{</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160; </div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <span class="comment">/* shuffle frames (last = current) */</span></div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <a class="code" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a>(avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame);</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavcodec_2thread_8h.html#a9569969a18e074a58912d24f08f30d69">ff_thread_ref_frame</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame);</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160; </div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe) {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        <a class="code" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a>(avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavcodec_2thread_8h.html#a9569969a18e074a58912d24f08f30d69">ff_thread_ref_frame</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    }</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160; </div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <a class="code" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a>(avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;}</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160; </div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> ref_frame(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *dst, <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;{</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    <a class="code" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, dst);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;f-&gt;data[0])</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libavcodec_2thread_8h.html#a9569969a18e074a58912d24f08f30d69">ff_thread_ref_frame</a>(dst, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>);</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;}</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160; </div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> ref_frames(<a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *dst, <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;{</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ref_frame(dst, &amp;dst-&gt;<a class="code" href="struct_vp3_decode_context.html#a55a858a85afed04af69fd32683246b1e">current_frame</a>, &amp;<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;current_frame)) &lt; 0 ||</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;        (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ref_frame(dst, &amp;dst-&gt;<a class="code" href="struct_vp3_decode_context.html#a28c83e8b6e89b9498dec6e066492b8f5">golden_frame</a>,  &amp;<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;golden_frame)) &lt; 0  ||</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ref_frame(dst, &amp;dst-&gt;<a class="code" href="struct_vp3_decode_context.html#a242ee762e9da6af6a353be2a39ece5e5">last_frame</a>,    &amp;<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;last_frame)) &lt; 0)</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;}</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160; </div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> vp3_update_thread_context(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *dst, <span class="keyword">const</span> <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;{</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = dst-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>, *<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;priv_data;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="keywordtype">int</span> qps_changed = 0, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, err;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160; </div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;current_frame.f-&gt;data[0] ||</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;width || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;height) {</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>)</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            ref_frames(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    }</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160; </div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>) {</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;        <span class="comment">// copy previous frame data</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;        <span class="keywordflow">if</span> ((err = ref_frames(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>)) &lt; 0)</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160; </div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;keyframe;</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160; </div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;        <span class="comment">// copy qscale data if necessary</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;qps[1]) {</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                qps_changed = 1;</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                memcpy(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qmat[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;qmat[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qmat[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;            }</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        }</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160; </div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[0] != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;qps[0])</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            memcpy(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bounding_values_array, &amp;<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;bounding_values_array,</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                   <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bounding_values_array));</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160; </div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        <span class="keywordflow">if</span> (qps_changed) {</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;            memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps,      <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;qps,      <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps));</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_qps, <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;last_qps, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_qps));</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nqps = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;nqps;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;        }</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    }</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160; </div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vp3_8c.html#ae9524c8b7f9f0264f11077693e026af3">update_frames</a>(dst);</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;}</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160; </div>
<div class="line"><a name="l02577"></a><span class="lineno"><a class="line" href="vp3_8c.html#ad0f1cbe158b25ca1769692f30656d82f"> 2577</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#ad0f1cbe158b25ca1769692f30656d82f">vp3_decode_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                            <span class="keywordtype">void</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">int</span> *got_frame,</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                            <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt)</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;{</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a>     *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>  = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf  = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    <span class="keywordtype">int</span> buf_size        = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> gb;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160; </div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a>(&amp;gb, buf, buf_size)) &lt; 0)</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160; </div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="preprocessor">#if CONFIG_THEORA_DECODER</span></div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &amp;&amp; <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(&amp;gb)) {</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 7);</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        <a class="code" href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a>(&amp;gb, 6*8); <span class="comment">/* &quot;theora&quot; */</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160; </div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;active_thread_type&amp;<a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>) {</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;midstream reconfiguration with multithreading is unsupported, try -threads 1\n&quot;</span>);</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;        }</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == 0) {</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;            <a class="code" href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">vp3_decode_end</a>(avctx);</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#ab041a85d453fa75a567323dbf9aaaec3">theora_decode_header</a>(avctx, &amp;gb);</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160; </div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0)</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#a17c9077340e1d53413bfb31620054ab2">vp3_decode_init</a>(avctx);</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                <a class="code" href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">vp3_decode_end</a>(avctx);</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;            }</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;            <span class="keywordflow">return</span> buf_size;</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == 2) {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;            <a class="code" href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">vp3_decode_end</a>(avctx);</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#a0122623242343e5572d09c992c375db2">theora_decode_tables</a>(avctx, &amp;gb);</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0)</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#a17c9077340e1d53413bfb31620054ab2">vp3_decode_init</a>(avctx);</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                <a class="code" href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">vp3_decode_end</a>(avctx);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;            }</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <span class="keywordflow">return</span> buf_size;</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;        }</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160; </div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;               <span class="stringliteral">&quot;Header packet passed to frame decoder, skipping\n&quot;</span>);</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    }</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160; </div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe = !<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(&amp;gb);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments) {</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Data packet without prior valid headers\n&quot;</span>);</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    }</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora)</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(&amp;gb, 1);</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_qps[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160; </div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nqps = 0;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nqps++] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 6);</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    } <span class="keywordflow">while</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &gt;= 0x030200 &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nqps &lt; 3 &amp;&amp; <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(&amp;gb));</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nqps; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = -1;</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160; </div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;debug &amp; <a class="code" href="avcodec_8h.html#a5d34f0bd0c235b8b9ee96e658df557af">FF_DEBUG_PICT_INFO</a>)</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot; VP3 %sframe #%d: Q index = %d\n&quot;</span>,</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe ? <span class="stringliteral">&quot;key&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, avctx-&gt;frame_number + 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[0]);</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160; </div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_loop_filter = !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filter_limit_values[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[0]] ||</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                          avctx-&gt;skip_loop_filter &gt;= (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe ? <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;                                                                  : <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a>);</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160; </div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[0] != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_qps[0])</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        <a class="code" href="vp3_8c.html#a1b4d6fd036c0aa7dbe824263bbb88cb6">init_loop_filter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160; </div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nqps; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;        <span class="comment">// reinit all dequantizers if the first one changed, because</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        <span class="comment">// the DC of the first quantizer must be used for all matrices</span></div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_qps[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qps[0] != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_qps[0])</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;            <a class="code" href="vp3_8c.html#a2f4d52b8116b2d35a59f1524c5dafa25">init_dequantizer</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160; </div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;skip_frame &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a> &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe)</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        <span class="keywordflow">return</span> buf_size;</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160; </div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;pict_type = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe ? <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                                                : <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a>;</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;key_frame = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe;</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="multithreading_8txt.html#ad20d53520fe26af28cbae5338a670db5">ff_thread_get_buffer</a>(avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame, <a class="code" href="group__lavc__core.html#ga6b4950dd3320e524f648799927f256a7">AV_GET_BUFFER_FLAG_REF</a>)) &lt; 0)</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160; </div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;edge_emu_buffer)</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;edge_emu_buffer = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(9 * <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;linesize[0]));</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160; </div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;keyframe) {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora) {</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;            <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(&amp;gb, 4); <span class="comment">/* width code */</span></div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;            <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(&amp;gb, 4); <span class="comment">/* height code */</span></div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version) {</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 5);</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;                <span class="keywordflow">if</span> (avctx-&gt;frame_number == 0)</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                           <span class="stringliteral">&quot;VP version: %d\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version);</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;            }</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;        }</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora) {</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(&amp;gb))</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;                       <span class="stringliteral">&quot;Warning, unsupported keyframe coding type?!\n&quot;</span>);</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;            <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(&amp;gb, 2); <span class="comment">/* reserved? */</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160; </div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &gt;= 2) {</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                <span class="keywordtype">int</span> mb_height, mb_width;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                <span class="keywordtype">int</span> mb_width_mul, mb_width_div, mb_height_mul, mb_height_div;</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160; </div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;                mb_height = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 8);</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                mb_width  = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 8);</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                <span class="keywordflow">if</span> (mb_height != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_height ||</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                    mb_width != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;macroblock_width)</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <span class="stringliteral">&quot;macroblock dimension mismatch&quot;</span>);</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160; </div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                mb_width_mul = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 5);</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                mb_width_div = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 3);</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;                mb_height_mul = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 5);</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                mb_height_div = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 3);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                <span class="keywordflow">if</span> (mb_width_mul != 1 || mb_width_div != 1 || mb_height_mul != 1 || mb_height_div != 1)</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <span class="stringliteral">&quot;unexpected macroblock dimension multipler/divider&quot;</span>);</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160; </div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 2))</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <span class="stringliteral">&quot;unknown bits&quot;</span>);</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;            }</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;        }</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame.f-&gt;data[0]) {</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                   <span class="stringliteral">&quot;vp3: first frame not a keyframe\n&quot;</span>);</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160; </div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame.f-&gt;pict_type = <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>;</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="multithreading_8txt.html#ad20d53520fe26af28cbae5338a670db5">ff_thread_get_buffer</a>(avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame,</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                                     <a class="code" href="group__lavc__core.html#ga6b4950dd3320e524f648799927f256a7">AV_GET_BUFFER_FLAG_REF</a>)) &lt; 0)</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;            <a class="code" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a>(avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame);</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavcodec_2thread_8h.html#a9569969a18e074a58912d24f08f30d69">ff_thread_ref_frame</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame,</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;                                           &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;golden_frame)) &lt; 0)</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;            <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_frame, INT_MAX, 0);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;        }</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    }</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;all_fragments, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fragment_count * <span class="keyword">sizeof</span>(<a class="code" href="struct_vp3_fragment.html">Vp3Fragment</a>));</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <a class="code" href="multithreading_8txt.html#a97c3cac75166393103fbc1594899e0b3">ff_thread_finish_setup</a>(avctx);</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2) {</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#afa6178b4eb10d46539a281fa962bb70c">unpack_superblocks</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;gb)) &lt; 0) {</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error in unpack_superblocks\n&quot;</span>);</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        }</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vp4_unpack_macroblocks(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;gb)) &lt; 0) {</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error in vp4_unpack_macroblocks\n&quot;</span>);</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    }</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    }</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#a9d2bb11e5372a99d128e7a22dcb74f92">unpack_modes</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;gb)) &lt; 0) {</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error in unpack_modes\n&quot;</span>);</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    }</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#a43ef5896eb1ce21da33247ca91932aa6">unpack_vectors</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;gb)) {</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error in unpack_vectors\n&quot;</span>);</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    }</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#a0227d0cc568c8fb3a3763164ffad0405">unpack_block_qpis</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;gb)) &lt; 0) {</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error in unpack_block_qpis\n&quot;</span>);</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    }</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160; </div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2) {</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#ab410e1e233bc55ad4f49e990d0f51d4b">unpack_dct_coeffs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;gb)) &lt; 0) {</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error in unpack_dct_coeffs\n&quot;</span>);</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        }</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vp4_unpack_dct_coeffs(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;gb)) &lt; 0) {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error in vp4_unpack_dct_coeffs\n&quot;</span>);</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        }</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    }</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160; </div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height &gt;&gt; (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flipped_image)</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_offset[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;data_offset[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> - 1) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f-&gt;linesize[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    }</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160; </div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_slice_end = 0;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_superblock_height; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;        <a class="code" href="vp3_8c.html#a873df4b98675eee52547eac7bdff9f0a">render_slice</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160; </div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <span class="comment">// filter the last row</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;version &lt; 2)</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;            <span class="keywordtype">int</span> row = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height &gt;&gt; (3 + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift))) - 1;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;            <a class="code" href="vp3_8c.html#ad695c0452db369e22a797423fd8accc6">apply_loop_filter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, row, row + 1);</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;        }</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <a class="code" href="vp3_8c.html#af85f6189e7e1dea8c1cf77bd0b1ad1c5">vp3_draw_horiz_band</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height);</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160; </div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <span class="comment">/* output frame, offset as needed */</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__frame.html#ga88b0ecbc4eb3453eef3fbefa3bddeb7c">av_frame_ref</a>(<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f)) &lt; 0)</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160; </div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;crop_left   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;offset_x;</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;crop_right  = avctx-&gt;coded_width - avctx-&gt;width - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;offset_x;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;crop_top    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;offset_y;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;crop_bottom = avctx-&gt;coded_height - avctx-&gt;height - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;offset_y;</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160; </div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    *got_frame = 1;</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160; </div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    <span class="keywordflow">if</span> (!HAVE_THREADS || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;active_thread_type &amp; <a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>)) {</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#ae9524c8b7f9f0264f11077693e026af3">update_frames</a>(avctx);</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    }</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160; </div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <span class="keywordflow">return</span> buf_size;</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame, INT_MAX, 0);</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160; </div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <span class="keywordflow">if</span> (!HAVE_THREADS || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;active_thread_type &amp; <a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>))</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_frame.f);</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160; </div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;}</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"><a class="line" href="vp3_8c.html#a8fc7e21be44d0994afd03c460f817c61"> 2823</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a8fc7e21be44d0994afd03c460f817c61">read_huffman_tree</a>(<a class="code" href="struct_huff_table.html">HuffTable</a> *huff, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, <span class="keywordtype">int</span> length,</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;                             <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;{</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;        <span class="keywordtype">int</span> token;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        <span class="keywordflow">if</span> (huff-&gt;<a class="code" href="struct_huff_table.html#a467d4e408e25151e14a3d5702dfad87a">nb_entries</a> &gt;= 32) { <span class="comment">/* overflow */</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;huffman tree overflow\n&quot;</span>);</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;        }</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;        token = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 5);</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a8e3eb32799f4637fcdd75bb9099142ff">ff_dlog</a>(avctx, <span class="stringliteral">&quot;code length %d, curr entry %d, token %d\n&quot;</span>,</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;                length, huff-&gt;<a class="code" href="struct_huff_table.html#a467d4e408e25151e14a3d5702dfad87a">nb_entries</a>, token);</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;        huff-&gt;<a class="code" href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">entries</a>[huff-&gt;<a class="code" href="struct_huff_table.html#a467d4e408e25151e14a3d5702dfad87a">nb_entries</a>++] = (<a class="code" href="vp3_8c.html#a66e18844cbc21ec893f01668e38f9eb5">HuffEntry</a>){ length, token };</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        <span class="comment">/* The following bound follows from the fact that nb_entries &lt;= 32. */</span></div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        <span class="keywordflow">if</span> (length &gt;= 31) { <span class="comment">/* overflow */</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;huffman tree overflow\n&quot;</span>);</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;        }</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;        length++;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#a8fc7e21be44d0994afd03c460f817c61">read_huffman_tree</a>(huff, gb, length, avctx))</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#a8fc7e21be44d0994afd03c460f817c61">read_huffman_tree</a>(huff, gb, length, avctx))</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    }</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;}</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160; </div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;<span class="preprocessor">#if CONFIG_THEORA_DECODER</span></div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> theora_pix_fmts[4] = {</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051">AV_PIX_FMT_YUV422P</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a">AV_PIX_FMT_YUV444P</a></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;};</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160; </div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#ab041a85d453fa75a567323dbf9aaaec3">theora_decode_header</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;{</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <span class="keywordtype">int</span> visible_width, visible_height, colorspace;</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> offset_x = 0, offset_y = 0;</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> fps, aspect;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora_header = 0;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 24);</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Theora bitstream version %X\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora);</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora) {</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora = 1;</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <span class="stringliteral">&quot;theora 0&quot;</span>);</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    }</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160; </div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    <span class="comment">/* 3.2.0 aka alpha3 has the same frame orientation as original vp3</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;<span class="comment">     * but previous versions have the image flipped relative to vp3 */</span></div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &lt; 0x030200) {</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flipped_image = 1;</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;               <span class="stringliteral">&quot;Old (&lt;alpha3) Theora bitstream, flipped image\n&quot;</span>);</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    }</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160; </div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    visible_width  =</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width       = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 16) &lt;&lt; 4;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    visible_height =</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height      = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 16) &lt;&lt; 4;</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160; </div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &gt;= 0x030200) {</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        visible_width  = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 24);</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;        visible_height = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 24);</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160; </div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        offset_x = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8); <span class="comment">/* offset x */</span></div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        offset_y = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8); <span class="comment">/* offset y, from bottom */</span></div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    }</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160; </div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    <span class="comment">/* sanity check */</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__picture.html#ga3a867b6180ddad1e0c382ef0c5940b8e">av_image_check_size</a>(visible_width, visible_height, 0, avctx) &lt; 0 ||</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;        visible_width  + offset_x &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width ||</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        visible_height + offset_y &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height) {</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;               <span class="stringliteral">&quot;Invalid frame dimensions - w:%d h:%d x:%d y:%d (%dx%d).\n&quot;</span>,</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;               visible_width, visible_height, offset_x, offset_y,</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height);</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    }</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160; </div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    fps.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> = <a class="code" href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a>(gb, 32);</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    fps.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> = <a class="code" href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a>(gb, 32);</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    <span class="keywordflow">if</span> (fps.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; fps.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>) {</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;        <span class="keywordflow">if</span> (fps.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &lt; 0 || fps.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &lt; 0) {</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid framerate\n&quot;</span>);</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;        }</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;        <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, &amp;avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>,</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;                  fps.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, fps.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, 1 &lt;&lt; 30);</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    }</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160; </div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    aspect.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 24);</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    aspect.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 24);</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <span class="keywordflow">if</span> (aspect.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; aspect.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>) {</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>,</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;                  &amp;avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>,</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;                  aspect.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, aspect.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, 1 &lt;&lt; 30);</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <a class="code" href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a>(avctx, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>);</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    }</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160; </div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &lt; 0x030200)</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 5); <span class="comment">/* keyframe frequency force */</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    colorspace = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 24); <span class="comment">/* bitrate */</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 6); <span class="comment">/* quality hint */</span></div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160; </div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &gt;= 0x030200) {</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 5); <span class="comment">/* keyframe frequency force */</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> = theora_pix_fmts[<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2)];</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>) {</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid pixel format\n&quot;</span>);</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;        }</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;        <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 3); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160; </div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavcodec_2internal_8h.html#ac8b736a8223c5348ad85ffff597401ff">ff_set_dimensions</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height);</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <span class="keywordflow">if</span> (!(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1944f9a4f8f2e123c087e1fe7613d571">flags2</a> &amp; <a class="code" href="group__lavc__core.html#gaa4110d30a0542c7d0198c46ab87e7249">AV_CODEC_FLAG2_IGNORE_CROP</a>)) {</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>  = visible_width;</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> = visible_height;</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;        <span class="comment">// translate offsets from theora axis ([0,0] lower left)</span></div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <span class="comment">// to normal axis ([0,0] upper left)</span></div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;offset_x = offset_x;</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;offset_y = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height - visible_height - offset_y;</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    }</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160; </div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    <span class="keywordflow">if</span> (colorspace == 1)</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a> = <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7ae5d6b90d4f36ac68f3a5ef347d930cc9">AVCOL_PRI_BT470M</a>;</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (colorspace == 2)</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a> = <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a1aeb4f44414c396b28b3f392313e50ae">AVCOL_PRI_BT470BG</a>;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160; </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <span class="keywordflow">if</span> (colorspace == 1 || colorspace == 2) {</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a> = <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a32a0719616b0bb89f4be9d885341bfa4">AVCOL_SPC_BT470BG</a>;</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">color_trc</a>  = <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6afd8960c59aa927ce6bee76a9594ffd95">AVCOL_TRC_BT709</a>;</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;    }</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160; </div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora_header = 1;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;}</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160; </div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vp3_8c.html#a0122623242343e5572d09c992c375db2">theora_decode_tables</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb)</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;{</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, n, matrices, inter, plane, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160; </div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora_header)</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160; </div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &gt;= 0x030200) {</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;        n = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;        <span class="comment">/* loop filter limit values table */</span></div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        <span class="keywordflow">if</span> (n)</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filter_limit_values[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, n);</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    }</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160; </div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &gt;= 0x030200)</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;        n = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4) + 1;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        n = 16;</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    <span class="comment">/* quality threshold table */</span></div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_ac_scale_factor[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, n);</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160; </div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &gt;= 0x030200)</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;        n = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4) + 1;</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;        n = 16;</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="comment">/* dc scale factor table */</span></div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_dc_scale_factor[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_dc_scale_factor[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, n);</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160; </div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &gt;= 0x030200)</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        matrices = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 9) + 1;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;        matrices = 3;</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160; </div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <span class="keywordflow">if</span> (matrices &gt; 384) {</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;invalid number of base matrixes\n&quot;</span>);</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    }</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160; </div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; matrices; n++)</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;base_matrix[n][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160; </div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="keywordflow">for</span> (inter = 0; inter &lt;= 1; inter++) {</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        <span class="keywordflow">for</span> (plane = 0; plane &lt;= 2; plane++) {</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;            <span class="keywordtype">int</span> newqr = 1;</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;            <span class="keywordflow">if</span> (inter || plane &gt; 0)</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;                newqr = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;            <span class="keywordflow">if</span> (!newqr) {</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;                <span class="keywordtype">int</span> qtj, plj;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;                <span class="keywordflow">if</span> (inter &amp;&amp; <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;                    qtj = 0;</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;                    plj = plane;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;                    qtj = (3 * inter + plane - 1) / 3;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;                    plj = (plane + 2) % 3;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;                }</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_count[inter][plane] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_count[qtj][plj];</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;                memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_size[inter][plane], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_size[qtj][plj],</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;                       <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_size[0][0]));</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;                memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_base[inter][plane], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_base[qtj][plj],</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                       <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_base[0][0]));</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;                <span class="keywordtype">int</span> qri = 0;</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;                <span class="keywordtype">int</span> qi  = 0;</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160; </div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;                <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;                    <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, <a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(matrices - 1) + 1);</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= matrices) {</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;                               <span class="stringliteral">&quot;invalid base matrix index\n&quot;</span>);</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;                        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;                    }</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_base[inter][plane][qri] = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;                    <span class="keywordflow">if</span> (qi &gt;= 63)</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;                    <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, <a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(63 - qi) + 1) + 1;</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_size[inter][plane][qri++] = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;                    qi += <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;                }</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160; </div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;                <span class="keywordflow">if</span> (qi &gt; 63) {</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;invalid qi %d &gt; 63\n&quot;</span>, qi);</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;                    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;                }</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qr_count[inter][plane] = qri;</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;            }</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;        }</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    }</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160; </div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;    <span class="comment">/* Huffman tables */</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;huffman_table); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;huffman_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].nb_entries = 0;</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vp3_8c.html#a8fc7e21be44d0994afd03c460f817c61">read_huffman_tree</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;huffman_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], gb, 0, avctx)) &lt; 0)</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    }</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160; </div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora_tables = 1;</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160; </div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;}</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160; </div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> theora_decode_init(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;{</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <a class="code" href="struct_vp3_decode_context.html">Vp3DecodeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> gb;</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="keywordtype">int</span> ptype;</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *header_start[3];</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <span class="keywordtype">int</span> header_len[3];</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160; </div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>;</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160; </div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora = 1;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160; </div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <span class="keywordflow">if</span> (!avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae246ca7a1c72c151891ed0599e8dbfba">extradata_size</a>) {</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Missing extradata!\n&quot;</span>);</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    }</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160; </div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="xiph_8c.html#a3c4ba1310b067a4d8a0326e393a99cd4">avpriv_split_xiph_headers</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#abe964316aaaa61967b012efdcced79c4">extradata</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae246ca7a1c72c151891ed0599e8dbfba">extradata_size</a>,</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                                  42, header_start, header_len) &lt; 0) {</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Corrupt extradata\n&quot;</span>);</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    }</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160; </div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;        <span class="keywordflow">if</span> (header_len[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;= 0)</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a>(&amp;gb, header_start[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], header_len[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160; </div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;        ptype = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 8);</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160; </div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;        <span class="keywordflow">if</span> (!(ptype &amp; 0x80)) {</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid extradata!\n&quot;</span>);</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;<span class="comment">//          return -1;</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;        }</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160; </div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;        <span class="comment">// FIXME: Check for this as well.</span></div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;        <a class="code" href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a>(&amp;gb, 6 * 8); <span class="comment">/* &quot;theora&quot; */</span></div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160; </div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="keywordflow">switch</span> (ptype) {</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        <span class="keywordflow">case</span> 0x80:</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#ab041a85d453fa75a567323dbf9aaaec3">theora_decode_header</a>(avctx, &amp;gb) &lt; 0)</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;        <span class="keywordflow">case</span> 0x81:</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;<span class="comment">// FIXME: is this needed? it breaks sometimes</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;<span class="comment">//            theora_decode_comments(avctx, gb);</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        <span class="keywordflow">case</span> 0x82:</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vp3_8c.html#a0122623242343e5572d09c992c375db2">theora_decode_tables</a>(avctx, &amp;gb))</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;                   <span class="stringliteral">&quot;Unknown Theora config packet: %d\n&quot;</span>, ptype &amp; ~0x80);</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;        }</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        <span class="keywordflow">if</span> (ptype != 0x81 &amp;&amp; 8 * header_len[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(&amp;gb))</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                   <span class="stringliteral">&quot;%d bits left in packet %X\n&quot;</span>,</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                   8 * header_len[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(&amp;gb), ptype);</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;theora &lt; 0x030200)</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    }</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160; </div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vp3_8c.html#a17c9077340e1d53413bfb31620054ab2">vp3_decode_init</a>(avctx);</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;}</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160; </div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="allcodecs_8c.html#ae1eb1c1ae7c9e0d5ab9173ae422a1451">ff_theora_decoder</a> = {</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>                  = <span class="stringliteral">&quot;theora&quot;</span>,</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    .long_name             = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;Theora&quot;</span>),</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;    .type                  = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    .id                    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea8c3ef0a1eec3cf22756a1323989ff4d8">AV_CODEC_ID_THEORA</a>,</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    .priv_data_size        = <span class="keyword">sizeof</span>(<a class="code" href="vp3_8c.html#aaca5389b2381f17eec131a6a9527be74">Vp3DecodeContext</a>),</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>                  = theora_decode_init,</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    .close                 = <a class="code" href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">vp3_decode_end</a>,</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    .<a class="code" href="decode__audio_8c.html#a1704ae53d7f426e1b67341785b5b2b58">decode</a>                = <a class="code" href="vp3_8c.html#ad0f1cbe158b25ca1769692f30656d82f">vp3_decode_frame</a>,</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;    .capabilities          = <a class="code" href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a> | <a class="code" href="group__lavc__core.html#ga01fbdf31e076d8902d8f4118c0aea6ea">AV_CODEC_CAP_DRAW_HORIZ_BAND</a> |</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;                             <a class="code" href="group__lavc__core.html#gae21e6310b40920cd61f54e9c320d8e6c">AV_CODEC_CAP_FRAME_THREADS</a>,</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    .<a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>                 = <a class="code" href="vp3_8c.html#a6dfea7115997c18f5b4e0472755579bf">vp3_decode_flush</a>,</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    .<a class="code" href="multithreading_8txt.html#a4e871baf97bc0c256543f0fde05c8307">update_thread_context</a> = <a class="code" href="libavutil_2internal_8h.html#ab9aca4492668a79bc015f43ad944021e">ONLY_IF_THREADS_ENABLED</a>(vp3_update_thread_context),</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    .caps_internal         = <a class="code" href="libavcodec_2internal_8h.html#a5799decfcc95b529eef0101b60472aa4">FF_CODEC_CAP_EXPORTS_CROPPING</a> | <a class="code" href="libavcodec_2internal_8h.html#a133d9f0e29862e9f1726beafc530e052">FF_CODEC_CAP_ALLOCATE_PROGRESS</a> |</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;                             <a class="code" href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a>,</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;};</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160; </div>
<div class="line"><a name="l03163"></a><span class="lineno"><a class="line" href="vp3_8c.html#adfb7c14f1545e59dce4844680f738c2a"> 3163</a></span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="vp3_8c.html#adfb7c14f1545e59dce4844680f738c2a">ff_vp3_decoder</a> = {</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>                  = <span class="stringliteral">&quot;vp3&quot;</span>,</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;    .long_name             = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;On2 VP3&quot;</span>),</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    .type                  = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    .id                    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea11920474f1c6dada14ac2cfd36f67601">AV_CODEC_ID_VP3</a>,</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    .priv_data_size        = <span class="keyword">sizeof</span>(<a class="code" href="vp3_8c.html#aaca5389b2381f17eec131a6a9527be74">Vp3DecodeContext</a>),</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>                  = <a class="code" href="vp3_8c.html#a17c9077340e1d53413bfb31620054ab2">vp3_decode_init</a>,</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    .close                 = <a class="code" href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">vp3_decode_end</a>,</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    .<a class="code" href="decode__audio_8c.html#a1704ae53d7f426e1b67341785b5b2b58">decode</a>                = <a class="code" href="vp3_8c.html#ad0f1cbe158b25ca1769692f30656d82f">vp3_decode_frame</a>,</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    .capabilities          = <a class="code" href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a> | <a class="code" href="group__lavc__core.html#ga01fbdf31e076d8902d8f4118c0aea6ea">AV_CODEC_CAP_DRAW_HORIZ_BAND</a> |</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;                             <a class="code" href="group__lavc__core.html#gae21e6310b40920cd61f54e9c320d8e6c">AV_CODEC_CAP_FRAME_THREADS</a>,</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    .<a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>                 = <a class="code" href="vp3_8c.html#a6dfea7115997c18f5b4e0472755579bf">vp3_decode_flush</a>,</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    .<a class="code" href="multithreading_8txt.html#a4e871baf97bc0c256543f0fde05c8307">update_thread_context</a> = <a class="code" href="libavutil_2internal_8h.html#ab9aca4492668a79bc015f43ad944021e">ONLY_IF_THREADS_ENABLED</a>(vp3_update_thread_context),</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    .caps_internal         = <a class="code" href="libavcodec_2internal_8h.html#a133d9f0e29862e9f1726beafc530e052">FF_CODEC_CAP_ALLOCATE_PROGRESS</a> | <a class="code" href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a>,</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;};</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160; </div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="preprocessor">#if CONFIG_VP4_DECODER</span></div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="allcodecs_8c.html#a69bbee04459c2e165735c1b8b8a43592">ff_vp4_decoder</a> = {</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>                  = <span class="stringliteral">&quot;vp4&quot;</span>,</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    .long_name             = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;On2 VP4&quot;</span>),</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    .type                  = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    .id                    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaae1179d958c0d2847a5903f57450d289">AV_CODEC_ID_VP4</a>,</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    .priv_data_size        = <span class="keyword">sizeof</span>(<a class="code" href="vp3_8c.html#aaca5389b2381f17eec131a6a9527be74">Vp3DecodeContext</a>),</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>                  = <a class="code" href="vp3_8c.html#a17c9077340e1d53413bfb31620054ab2">vp3_decode_init</a>,</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    .close                 = <a class="code" href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">vp3_decode_end</a>,</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    .<a class="code" href="decode__audio_8c.html#a1704ae53d7f426e1b67341785b5b2b58">decode</a>                = <a class="code" href="vp3_8c.html#ad0f1cbe158b25ca1769692f30656d82f">vp3_decode_frame</a>,</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    .capabilities          = <a class="code" href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a> | <a class="code" href="group__lavc__core.html#ga01fbdf31e076d8902d8f4118c0aea6ea">AV_CODEC_CAP_DRAW_HORIZ_BAND</a> |</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;                             <a class="code" href="group__lavc__core.html#gae21e6310b40920cd61f54e9c320d8e6c">AV_CODEC_CAP_FRAME_THREADS</a>,</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    .<a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>                 = <a class="code" href="vp3_8c.html#a6dfea7115997c18f5b4e0472755579bf">vp3_decode_flush</a>,</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    .<a class="code" href="multithreading_8txt.html#a4e871baf97bc0c256543f0fde05c8307">update_thread_context</a> = <a class="code" href="libavutil_2internal_8h.html#ab9aca4492668a79bc015f43ad944021e">ONLY_IF_THREADS_ENABLED</a>(vp3_update_thread_context),</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    .caps_internal         = <a class="code" href="libavcodec_2internal_8h.html#a133d9f0e29862e9f1726beafc530e052">FF_CODEC_CAP_ALLOCATE_PROGRESS</a> | <a class="code" href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a>,</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;};</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="atarget__bsf__fuzzer_8c_html_aa3d85a3469f60990fdff296efb86a9c2"><div class="ttname"><a href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a></div><div class="ttdeci">static void error(const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="target__bsf__fuzzer_8c_source.html#l00030">target_bsf_fuzzer.c:30</a></div></div>
<div class="ttc" id="avp4data_8h_html_ad4b4b47cc4ad76304fa726011703fb18"><div class="ttname"><a href="vp4data_8h.html#ad4b4b47cc4ad76304fa726011703fb18">vp4_ac_scale_factor</a></div><div class="ttdeci">static const uint16_t vp4_ac_scale_factor[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00064">vp4data.h:64</a></div></div>
<div class="ttc" id="astruct_huff_table_html"><div class="ttname"><a href="struct_huff_table.html">HuffTable</a></div><div class="ttdef"><b>Definition:</b> <a href="mjpegenc__huffman_8h_source.html#l00069">mjpegenc_huffman.h:69</a></div></div>
<div class="ttc" id="avp4data_8h_html"><div class="ttname"><a href="vp4data_8h.html">vp4data.h</a></div></div>
<div class="ttc" id="avp3_8c_html_a8f6f819485faf7e31bbc21b6e9b6eaae"><div class="ttname"><a href="vp3_8c.html#a8f6f819485faf7e31bbc21b6e9b6eaae">PUL</a></div><div class="ttdeci">#define PUL</div></div>
<div class="ttc" id="avp3_8c_html_a4fffc7c3a9129870a8185ef56d675ae4"><div class="ttname"><a href="vp3_8c.html#a4fffc7c3a9129870a8185ef56d675ae4">allocate_tables</a></div><div class="ttdeci">static av_cold int allocate_tables(AVCodecContext *avctx)</div><div class="ttdoc">Allocate tables for per-frame data in Vp3DecodeContext.</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l02257">vp3.c:2257</a></div></div>
<div class="ttc" id="amace_8c_html_a08f66a6870d87afcd5dc1b60d1019692"><div class="ttname"><a href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a></div><div class="ttdeci">int stride</div><div class="ttdef"><b>Definition:</b> <a href="mace_8c_source.html#l00144">mace.c:144</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a47c3a35ba8dece0168d84181f224b55d"><div class="ttname"><a href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a></div><div class="ttdeci">static void skip_bits_long(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00291">get_bits.h:291</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a368b7c7a2832de6157e949d9a42e6c7e"><div class="ttname"><a href="struct_vp3_decode_context.html#a368b7c7a2832de6157e949d9a42e6c7e">Vp3DecodeContext::offset_x_warned</a></div><div class="ttdeci">int offset_x_warned</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00219">vp3.c:219</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab649e8c599f5a0e2a30448e67a36deb6"><div class="ttname"><a href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">AVCodecContext::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1147</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a41c0c9c8aa8e1fd12d65b18dd6948b09"><div class="ttname"><a href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a></div><div class="ttdeci">static av_cold int init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00035">avrndec.c:35</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a44d39cea027a76211f31e3bf2e3e68a4"><div class="ttname"><a href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a></div><div class="ttdeci">static int get_bits_left(GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00849">get_bits.h:849</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a7e68d2093d418fbec44a72ae1f99ce6f"><div class="ttname"><a href="struct_vp3_decode_context.html#a7e68d2093d418fbec44a72ae1f99ce6f">Vp3DecodeContext::fragment_width</a></div><div class="ttdeci">int fragment_width[2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00211">vp3.c:211</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_adc7f86be9ca329baff17f9f15e704b0f"><div class="ttname"><a href="struct_vp3_decode_context.html#adc7f86be9ca329baff17f9f15e704b0f">Vp3DecodeContext::DECLARE_ALIGNED</a></div><div class="ttdeci">DECLARE_ALIGNED(8, int, bounding_values_array)[256+2]</div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="avp3_8c_html_a6dfea7115997c18f5b4e0472755579bf"><div class="ttname"><a href="vp3_8c.html#a6dfea7115997c18f5b4e0472755579bf">vp3_decode_flush</a></div><div class="ttdeci">static void vp3_decode_flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00325">vp3.c:325</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a0ff4531e6d81d517ea5a8b26365fe934"><div class="ttname"><a href="struct_vp3_decode_context.html#a0ff4531e6d81d517ea5a8b26365fe934">Vp3DecodeContext::motion_vector_vlc</a></div><div class="ttdeci">VLC motion_vector_vlc</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00277">vp3.c:277</a></div></div>
<div class="ttc" id="astruct_huff_entry_html_a2baede7441728a14f1aec66be0a7323c"><div class="ttname"><a href="struct_huff_entry.html#a2baede7441728a14f1aec66be0a7323c">HuffEntry::len</a></div><div class="ttdeci">uint8_t len</div><div class="ttdef"><b>Definition:</b> <a href="magicyuv_8c_source.html#l00049">magicyuv.c:49</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_adc5f65d6099fd8339c1580c091777223"><div class="ttname"><a href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">AVCodecContext::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00535">avcodec.h:536</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="alibavcodec_2thread_8h_html_a9569969a18e074a58912d24f08f30d69"><div class="ttname"><a href="libavcodec_2thread_8h.html#a9569969a18e074a58912d24f08f30d69">ff_thread_ref_frame</a></div><div class="ttdeci">int ff_thread_ref_frame(ThreadFrame *dst, const ThreadFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01876">utils.c:1876</a></div></div>
<div class="ttc" id="avp3data_8h_html_a5c4d829a1307e79b2c27e0c88ab61be8"><div class="ttname"><a href="vp3data_8h.html#a5c4d829a1307e79b2c27e0c88ab61be8">zero_run_base</a></div><div class="ttdeci">static const uint8_t zero_run_base[32]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00207">vp3data.h:207</a></div></div>
<div class="ttc" id="avp3_8c_html_a1dd8f878b5ae15812df9688f85bacba1"><div class="ttname"><a href="vp3_8c.html#a1dd8f878b5ae15812df9688f85bacba1">MODE_INTER_PRIOR_LAST</a></div><div class="ttdeci">#define MODE_INTER_PRIOR_LAST</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00073">vp3.c:73</a></div></div>
<div class="ttc" id="avp3_8c_html_a66e18844cbc21ec893f01668e38f9eb5"><div class="ttname"><a href="vp3_8c.html#a66e18844cbc21ec893f01668e38f9eb5">HuffEntry</a></div><div class="ttdeci">struct HuffEntry HuffEntry</div></div>
<div class="ttc" id="acbs__h2645_8c_html_a134a0c87e88a327dcbeee6de7b0d6282"><div class="ttname"><a href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a></div><div class="ttdeci">#define u(width, name, range_min, range_max)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h2645_8c_source.html#l00262">cbs_h2645.c:262</a></div></div>
<div class="ttc" id="avp3data_8h_html_abcb5f83f2e33505ebf8aed1945499dae"><div class="ttname"><a href="vp3data_8h.html#abcb5f83f2e33505ebf8aed1945499dae">vp3_bias</a></div><div class="ttdeci">static const uint16_t vp3_bias[5 *16][32][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00445">vp3data.h:445</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html"><div class="ttname"><a href="libavutil_2thread_8h.html">thread.h</a></div></div>
<div class="ttc" id="astruct_huff_table_html_a467d4e408e25151e14a3d5702dfad87a"><div class="ttname"><a href="struct_huff_table.html#a467d4e408e25151e14a3d5702dfad87a">HuffTable::nb_entries</a></div><div class="ttdeci">uint8_t nb_entries</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00164">vp3.c:164</a></div></div>
<div class="ttc" id="acommon_8h_html_a19c68e2b5efcbab914d79db1e4fee734"><div class="ttname"><a href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a></div><div class="ttdeci">#define MKTAG(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00405">common.h:405</a></div></div>
<div class="ttc" id="amem_8c_html_a254f3455439c15a2c8a75b8f0235fdbd"><div class="ttname"><a href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a></div><div class="ttdeci">void * av_malloc_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00182">mem.c:182</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a5ba9f6094f84ad53ac4903be20452e5c"><div class="ttname"><a href="struct_vp3_decode_context.html#a5ba9f6094f84ad53ac4903be20452e5c">Vp3DecodeContext::idct_permutation</a></div><div class="ttdeci">uint8_t idct_permutation[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00177">vp3.c:177</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a20dc15e40874f46af0d2b4ad34aed9a7"><div class="ttname"><a href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a></div><div class="ttdeci">static unsigned int get_bits_long(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00546">get_bits.h:546</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a174b0b07293e68daea90d35adb3a961d"><div class="ttname"><a href="struct_vp3_decode_context.html#a174b0b07293e68daea90d35adb3a961d">Vp3DecodeContext::base_matrix</a></div><div class="ttdeci">uint8_t base_matrix[384][64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00226">vp3.c:226</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_aaae7bdee11c6638da97106ae14396f8c"><div class="ttname"><a href="struct_vp3_decode_context.html#aaae7bdee11c6638da97106ae14396f8c">Vp3DecodeContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00171">vp3.c:171</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_aa9b6a968fe25cb443579241d11478624"><div class="ttname"><a href="struct_vp3_decode_context.html#aa9b6a968fe25cb443579241d11478624">Vp3DecodeContext::filter_limit_values</a></div><div class="ttdeci">uint8_t filter_limit_values[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00299">vp3.c:299</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab2ebb76836ef4cd9822b5077c17b33d0"><div class="ttname"><a href="struct_a_v_codec_context.html#ab2ebb76836ef4cd9822b5077c17b33d0">AVCodecContext::coded_height</a></div><div class="ttdeci">int coded_height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00714">avcodec.h:714</a></div></div>
<div class="ttc" id="aget__bits_8h_html_aac3f793480c01f793f2acc9eba031ff5"><div class="ttname"><a href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a></div><div class="ttdeci">static int get_bits_count(const GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00219">get_bits.h:219</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ae6a410c559de95338635a7300dd593a4"><div class="ttname"><a href="struct_vp3_decode_context.html#ae6a410c559de95338635a7300dd593a4">Vp3DecodeContext::offset_y</a></div><div class="ttdeci">uint8_t offset_y</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00218">vp3.c:218</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="avp3_8c_html_a8fc7e21be44d0994afd03c460f817c61"><div class="ttname"><a href="vp3_8c.html#a8fc7e21be44d0994afd03c460f817c61">read_huffman_tree</a></div><div class="ttdeci">static int read_huffman_tree(HuffTable *huff, GetBitContext *gb, int length, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l02823">vp3.c:2823</a></div></div>
<div class="ttc" id="avp3_8c_html_aca65a8ce4ac411ae84ff3914ef46a697"><div class="ttname"><a href="vp3_8c.html#aca65a8ce4ac411ae84ff3914ef46a697">PUR</a></div><div class="ttdeci">#define PUR</div></div>
<div class="ttc" id="avp3dsp_8h_html"><div class="ttname"><a href="vp3dsp_8h.html">vp3dsp.h</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00092">avrndec.c:92</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a23206e167a850643173cba5b50b1dcdd"><div class="ttname"><a href="struct_vp3_decode_context.html#a23206e167a850643173cba5b50b1dcdd">Vp3DecodeContext::coeff_vlc</a></div><div class="ttdeci">VLC coeff_vlc[5 *16]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00271">vp3.c:271</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a8f25ed9fa2a4450e68b7870e5d617067"><div class="ttname"><a href="struct_vp3_decode_context.html#a8f25ed9fa2a4450e68b7870e5d617067">Vp3DecodeContext::macroblock_width</a></div><div class="ttdeci">int macroblock_width</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00203">vp3.c:203</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a55a858a85afed04af69fd32683246b1e"><div class="ttname"><a href="struct_vp3_decode_context.html#a55a858a85afed04af69fd32683246b1e">Vp3DecodeContext::current_frame</a></div><div class="ttdeci">ThreadFrame current_frame</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00175">vp3.c:175</a></div></div>
<div class="ttc" id="avp3dsp_8c_html_a521ac966493044fe5906b16234de6a43"><div class="ttname"><a href="vp3dsp_8c.html#a521ac966493044fe5906b16234de6a43">ff_vp3dsp_set_bounding_values</a></div><div class="ttdeci">void ff_vp3dsp_set_bounding_values(int *bounding_values_array, int filter_limit)</div><div class="ttdef"><b>Definition:</b> <a href="vp3dsp_8c_source.html#l00473">vp3dsp.c:473</a></div></div>
<div class="ttc" id="avlc_8h_html_a181984da1fe3452ad6a16348d10f8236"><div class="ttname"><a href="vlc_8h.html#a181984da1fe3452ad6a16348d10f8236">init_vlc</a></div><div class="ttdeci">#define init_vlc(vlc, nb_bits, nb_codes, bits, bits_wrap, bits_size, codes, codes_wrap, codes_size, flags)</div><div class="ttdef"><b>Definition:</b> <a href="vlc_8h_source.html#l00038">vlc.h:38</a></div></div>
<div class="ttc" id="aprosumer_8c_html_a8f9d32e424405551734404b133418a22"><div class="ttname"><a href="prosumer_8c.html#a8f9d32e424405551734404b133418a22">table</a></div><div class="ttdeci">static const uint16_t table[]</div><div class="ttdef"><b>Definition:</b> <a href="prosumer_8c_source.html#l00206">prosumer.c:206</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="avp3data_8h_html_a470341f9066346a5cde8258a1bcd816f"><div class="ttname"><a href="vp3data_8h.html#a470341f9066346a5cde8258a1bcd816f">fragment_run_length_vlc_table</a></div><div class="ttdeci">static const uint16_t fragment_run_length_vlc_table[30][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00119">vp3data.h:119</a></div></div>
<div class="ttc" id="astruct_v_p4_predictor_html_a9bd7bac5517285ba5f77a14e59ad7d39"><div class="ttname"><a href="struct_v_p4_predictor.html#a9bd7bac5517285ba5f77a14e59ad7d39">VP4Predictor::dc</a></div><div class="ttdeci">int dc</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00152">vp3.c:152</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a3ba3e032e40fae0f98ba46a0f5201195"><div class="ttname"><a href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a></div><div class="ttdeci">static av_always_inline int get_vlc2(GetBitContext *s, VLC_TYPE(*table)[2], int bits, int max_depth)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00797">get_bits.h:797</a></div></div>
<div class="ttc" id="avp3data_8h_html_ad44119f8ce1676a4dfac55fd4b74d09c"><div class="ttname"><a href="vp3data_8h.html#ad44119f8ce1676a4dfac55fd4b74d09c">base</a></div><div class="ttdeci">uint8_t base</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00202">vp3data.h:202</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a72fe32e80674ca752f346d33c003bb11"><div class="ttname"><a href="struct_vp3_decode_context.html#a72fe32e80674ca752f346d33c003bb11">Vp3DecodeContext::DECLARE_ALIGNED</a></div><div class="ttdeci">DECLARE_ALIGNED(16, int16_t, qmat)[3][2][3][64]</div><div class="ttdoc">qmat[qpi][is_inter][plane]</div></div>
<div class="ttc" id="astruct_vp3_fragment_html_aa9fb23e7b33e22c1da344d35378ccb0a"><div class="ttname"><a href="struct_vp3_fragment.html#aa9fb23e7b33e22c1da344d35378ccb0a">Vp3Fragment::dc</a></div><div class="ttdeci">int16_t dc</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00055">vp3.c:55</a></div></div>
<div class="ttc" id="amd5_8c_html_a8570c758e4feed3365b8b7600cd2e404"><div class="ttname"><a href="md5_8c.html#a8570c758e4feed3365b8b7600cd2e404">body</a></div><div class="ttdeci">static void body(uint32_t ABCD[4], const uint8_t *src, int nblocks)</div><div class="ttdef"><b>Definition:</b> <a href="md5_8c_source.html#l00101">md5.c:101</a></div></div>
<div class="ttc" id="amultithreading_8txt_html_ab66ca23680e500f1f51b1608e8a5419a"><div class="ttname"><a href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a></div><div class="ttdeci">the pkt_dts and pkt_pts fields in AVFrame will work as usual Restrictions on codec whose streams don t reset across will not work because their bitstreams cannot be decoded in parallel *The contents of buffers must not be read before ff_thread_await_progress() has been called on them. reget_buffer() and buffer age optimizations no longer work. *The contents of buffers must not be written to after ff_thread_report_progress() has been called on them. This includes draw_edges(). Porting codecs to frame threading</div></div>
<div class="ttc" id="avp3_8c_html_afa6178b4eb10d46539a281fa962bb70c"><div class="ttname"><a href="vp3_8c.html#afa6178b4eb10d46539a281fa962bb70c">unpack_superblocks</a></div><div class="ttdeci">static int unpack_superblocks(Vp3DecodeContext *s, GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00463">vp3.c:463</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_abdc740c561491e42462272b468d7f311"><div class="ttname"><a href="struct_vp3_decode_context.html#abdc740c561491e42462272b468d7f311">Vp3DecodeContext::all_fragments</a></div><div class="ttdeci">Vp3Fragment * all_fragments</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00214">vp3.c:214</a></div></div>
<div class="ttc" id="avp3_8c_html_a873df4b98675eee52547eac7bdff9f0a"><div class="ttname"><a href="vp3_8c.html#a873df4b98675eee52547eac7bdff9f0a">render_slice</a></div><div class="ttdeci">static void render_slice(Vp3DecodeContext *s, int slice)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l02057">vp3.c:2057</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a5d34f0bd0c235b8b9ee96e658df557af"><div class="ttname"><a href="avcodec_8h.html#a5d34f0bd0c235b8b9ee96e658df557af">FF_DEBUG_PICT_INFO</a></div><div class="ttdeci">#define FF_DEBUG_PICT_INFO</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01612">avcodec.h:1612</a></div></div>
<div class="ttc" id="avp3_8c_html_af0211ee8963ada9a4d998135b9d8a4f7"><div class="ttname"><a href="vp3_8c.html#af0211ee8963ada9a4d998135b9d8a4f7">vp3_dequant</a></div><div class="ttdeci">static int vp3_dequant(Vp3DecodeContext *s, Vp3Fragment *frag, int plane, int inter, int16_t block[64])</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01848">vp3.c:1848</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaa4110d30a0542c7d0198c46ab87e7249"><div class="ttname"><a href="group__lavc__core.html#gaa4110d30a0542c7d0198c46ab87e7249">AV_CODEC_FLAG2_IGNORE_CROP</a></div><div class="ttdeci">#define AV_CODEC_FLAG2_IGNORE_CROP</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00371">avcodec.h:371</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="astructfragment_html"><div class="ttname"><a href="structfragment.html">fragment</a></div><div class="ttdef"><b>Definition:</b> <a href="dashdec_8c_source.html#l00035">dashdec.c:35</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ad00d1b84cf77e14b81e3a670e50fe698"><div class="ttname"><a href="struct_vp3_decode_context.html#ad00d1b84cf77e14b81e3a670e50fe698">Vp3DecodeContext::qr_size</a></div><div class="ttdeci">uint8_t qr_size[2][3][64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00228">vp3.c:228</a></div></div>
<div class="ttc" id="axiph_8h_html"><div class="ttname"><a href="xiph_8h.html">xiph.h</a></div></div>
<div class="ttc" id="acbs__mpeg2_8c_html_a5420f92a5fa8c2d1740e1eaf8a18aa15"><div class="ttname"><a href="cbs__mpeg2_8c.html#a5420f92a5fa8c2d1740e1eaf8a18aa15">bit</a></div><div class="ttdeci">#define bit(string, value)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__mpeg2_8c_source.html#l00058">cbs_mpeg2.c:58</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a610df6b7704558756ee5c30247495731"><div class="ttname"><a href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a></div><div class="ttdeci">static void skip_bits(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00467">get_bits.h:467</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ae246ca7a1c72c151891ed0599e8dbfba"><div class="ttname"><a href="struct_a_v_codec_context.html#ae246ca7a1c72c151891ed0599e8dbfba">AVCodecContext::extradata_size</a></div><div class="ttdeci">int extradata_size</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00628">avcodec.h:628</a></div></div>
<div class="ttc" id="apixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85a32a0719616b0bb89f4be9d885341bfa4"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a32a0719616b0bb89f4be9d885341bfa4">AVCOL_SPC_BT470BG</a></div><div class="ttdeci">@ AVCOL_SPC_BT470BG</div><div class="ttdoc">also ITU-R BT601-6 625 / ITU-R BT1358 625 / ITU-R BT1700 625 PAL &amp; SECAM / IEC 61966-2-4 xvYCC601</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00518">pixfmt.h:518</a></div></div>
<div class="ttc" id="aget__bits_8h_html_abd82eee339b2471e5d9b4bfecfdc6b5f"><div class="ttname"><a href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a></div><div class="ttdeci">static unsigned int get_bits(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00379">get_bits.h:379</a></div></div>
<div class="ttc" id="avp3_8c_html_ad1d5ad8ca9284a53b5c2481b96ee9f4f"><div class="ttname"><a href="vp3_8c.html#ad1d5ad8ca9284a53b5c2481b96ee9f4f">get_coeff</a></div><div class="ttdeci">static int get_coeff(GetBitContext *gb, int token, int16_t *coeff)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01140">vp3.c:1140</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a650197a733727a52e037ee5ec0fb7724"><div class="ttname"><a href="struct_vp3_decode_context.html#a650197a733727a52e037ee5ec0fb7724">Vp3DecodeContext::avctx</a></div><div class="ttdeci">AVCodecContext * avctx</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00168">vp3.c:168</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_af5e425c5f481ef5c1ca2c60c63ee5528"><div class="ttname"><a href="struct_vp3_decode_context.html#af5e425c5f481ef5c1ca2c60c63ee5528">Vp3DecodeContext::v_superblock_start</a></div><div class="ttdeci">int v_superblock_start</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00199">vp3.c:199</a></div></div>
<div class="ttc" id="avlc_8h_html_a7e70876676d0b52ff7cf93cadf7e24fa"><div class="ttname"><a href="vlc_8h.html#a7e70876676d0b52ff7cf93cadf7e24fa">VLC_TYPE</a></div><div class="ttdeci">#define VLC_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="vlc_8h_source.html#l00024">vlc.h:24</a></div></div>
<div class="ttc" id="aarm_2vp56__arith_8h_html_a2e9a0e2ee6ec47b10497aa3fa424707a"><div class="ttname"><a href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a></div><div class="ttdeci">#define U(x)</div><div class="ttdef"><b>Definition:</b> <a href="arm_2vp56__arith_8h_source.html#l00037">vp56_arith.h:37</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac60a0209642b5d74068cab0ac35a78b2"><div class="ttname"><a href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">AVCodecContext::chroma_sample_location</a></div><div class="ttdeci">enum AVChromaLocation chroma_sample_location</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1168</a></div></div>
<div class="ttc" id="astruct_huff_entry_html_a9f451893fdcb243ecfce4e4b939dafef"><div class="ttname"><a href="struct_huff_entry.html#a9f451893fdcb243ecfce4e4b939dafef">HuffEntry::sym</a></div><div class="ttdeci">uint16_t sym</div><div class="ttdef"><b>Definition:</b> <a href="utvideoenc_8c_source.html#l00041">utvideoenc.c:41</a></div></div>
<div class="ttc" id="avp3_8c_html_a9e261e89727a3aafdc4d8732f5b3389f"><div class="ttname"><a href="vp3_8c.html#a9e261e89727a3aafdc4d8732f5b3389f">BLOCK_Y</a></div><div class="ttdeci">#define BLOCK_Y</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00639">vp3.c:639</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="avp3_8c_html_a0ac58ea077f8eb7fcb822f540797786d"><div class="ttname"><a href="vp3_8c.html#a0ac58ea077f8eb7fcb822f540797786d">CODING_MODE_COUNT</a></div><div class="ttdeci">#define CODING_MODE_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00077">vp3.c:77</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a5172fd557f9d4980580c5d24b6248144"><div class="ttname"><a href="struct_vp3_decode_context.html#a5172fd557f9d4980580c5d24b6248144">Vp3DecodeContext::dct_tokens_base</a></div><div class="ttdeci">int16_t * dct_tokens_base</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00249">vp3.c:249</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55badb5803b5107889adc5275b2ed0d0b1ae"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badb5803b5107889adc5275b2ed0d0b1ae">NB_VP4_DC_TYPES</a></div><div class="ttdeci">@ NB_VP4_DC_TYPES</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00136">vp3.c:136</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3a41b3e5bde23b877799f6e72dac8ef3"><div class="ttname"><a href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">AVCodecContext::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1140</a></div></div>
<div class="ttc" id="acommon_8h_html_af5e4ff7761996bc901e59bd59756268d"><div class="ttname"><a href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a></div><div class="ttdeci">#define FFSIGN(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00073">common.h:73</a></div></div>
<div class="ttc" id="amultithreading_8txt_html_ad20d53520fe26af28cbae5338a670db5"><div class="ttname"><a href="multithreading_8txt.html#ad20d53520fe26af28cbae5338a670db5">ff_thread_get_buffer</a></div><div class="ttdeci">the pkt_dts and pkt_pts fields in AVFrame will work as usual Restrictions on codec whose streams don t reset across will not work because their bitstreams cannot be decoded in parallel *The contents of buffers must not be read before as well as code calling up to before the decode process starts Call have so the codec calls ff_thread_report set FF_CODEC_CAP_ALLOCATE_PROGRESS in AVCodec caps_internal and use ff_thread_get_buffer() to allocate frames. The frames must then be freed with ff_thread_release_buffer(). Otherwise decode directly into the user-supplied frames. Call ff_thread_report_progress() after some part of the current picture has decoded. A good place to put this is where draw_horiz_band() is called - add this if it isn 't called anywhere</div></div>
<div class="ttc" id="avp3_8c_html_ac39e4d5c2db8d3498b521a48af35aba2"><div class="ttname"><a href="vp3_8c.html#ac39e4d5c2db8d3498b521a48af35aba2">SET_CHROMA_MODES</a></div><div class="ttdeci">#define SET_CHROMA_MODES</div></div>
<div class="ttc" id="atablegen_8txt_html_a3991659cd991dc17c8d3d4d181b8a00c"><div class="ttname"><a href="tablegen_8txt.html#a3991659cd991dc17c8d3d4d181b8a00c">tables</a></div><div class="ttdeci">Writing a table generator This documentation is preliminary Parts of the API are not good and should be changed Basic concepts A table generator consists of two *_tablegen c and *_tablegen h The h file will provide the variable declarations and initialization code for the tables</div><div class="ttdef"><b>Definition:</b> <a href="tablegen_8txt_source.html#l00010">tablegen.txt:10</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_afdedc9bccf98e5c5d6ce5cbeabd2f339"><div class="ttname"><a href="struct_vp3_decode_context.html#afdedc9bccf98e5c5d6ce5cbeabd2f339">Vp3DecodeContext::c_macroblock_count</a></div><div class="ttdeci">int c_macroblock_count</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00205">vp3.c:205</a></div></div>
<div class="ttc" id="af__perms_8c_html_ad4904214e86107d3afb6bf2f977236f6"><div class="ttname"><a href="f__perms_8c.html#ad4904214e86107d3afb6bf2f977236f6">perm</a></div><div class="ttdeci">perm</div><div class="ttdef"><b>Definition:</b> <a href="f__perms_8c_source.html#l00074">f_perms.c:74</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ae13ee1c4824bb9f5aaabdd67cc71ada3"><div class="ttname"><a href="struct_vp3_decode_context.html#ae13ee1c4824bb9f5aaabdd67cc71ada3">Vp3DecodeContext::y_superblock_count</a></div><div class="ttdeci">int y_superblock_count</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00194">vp3.c:194</a></div></div>
<div class="ttc" id="apixdesc_8c_html_a76e011cf53b51ea14a002a206f6ca05d"><div class="ttname"><a href="pixdesc_8c.html#a76e011cf53b51ea14a002a206f6ca05d">av_pix_fmt_get_chroma_sub_sample</a></div><div class="ttdeci">int av_pix_fmt_get_chroma_sub_sample(enum AVPixelFormat pix_fmt, int *h_shift, int *v_shift)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02601">pixdesc.c:2601</a></div></div>
<div class="ttc" id="avp3_8c_html_a71f540e944900c3b459283fadf610b83"><div class="ttname"><a href="vp3_8c.html#a71f540e944900c3b459283fadf610b83">MODE_INTER_LAST_MV</a></div><div class="ttdeci">#define MODE_INTER_LAST_MV</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00072">vp3.c:72</a></div></div>
<div class="ttc" id="avp3data_8h_html_ac71321b331ecee56fcffb08939a287c2"><div class="ttname"><a href="vp3data_8h.html#ac71321b331ecee56fcffb08939a287c2">vp31_intra_c_dequant</a></div><div class="ttdeci">static const uint8_t vp31_intra_c_dequant[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00042">vp3data.h:42</a></div></div>
<div class="ttc" id="alibavcodec_2videodsp_8c_html_a9f55abcd843195bcf47dae7689bcf894"><div class="ttname"><a href="libavcodec_2videodsp_8c.html#a9f55abcd843195bcf47dae7689bcf894">ff_videodsp_init</a></div><div class="ttdeci">av_cold void ff_videodsp_init(VideoDSPContext *ctx, int bpc)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2videodsp_8c_source.html#l00038">videodsp.c:38</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a860450fba1f740387dc082792ad89517"><div class="ttname"><a href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf type</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga4fd9c0b8e663cf3d55e89fbc6ce71602"><div class="ttname"><a href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a></div><div class="ttdeci">int av_reduce(int *dst_num, int *dst_den, int64_t num, int64_t den, int64_t max)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00035">rational.c:35</a></div></div>
<div class="ttc" id="affplay_8c_html_ad667f040f2932c8097435492fbd10d76"><div class="ttname"><a href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a></div><div class="ttdeci">static int loop</div><div class="ttdef"><b>Definition:</b> <a href="ffplay_8c_source.html#l00341">ffplay.c:341</a></div></div>
<div class="ttc" id="avp3_8c_html_ae2ed997a4625fdc631efcf809804b254"><div class="ttname"><a href="vp3_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a></div><div class="ttdeci">#define TRANSPOSE(x)</div></div>
<div class="ttc" id="agroup__lavu__frame_html_gac700017c5270c79c1e1befdeeb008b2f"><div class="ttname"><a href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a></div><div class="ttdeci">AVFrame * av_frame_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00190">frame.c:190</a></div></div>
<div class="ttc" id="avp3_8c_html_af422b1cf3152e1eadeb96307be009afe"><div class="ttname"><a href="vp3_8c.html#af422b1cf3152e1eadeb96307be009afe">TOKEN_ZERO_RUN</a></div><div class="ttdeci">#define TOKEN_ZERO_RUN(coeff, zero_run)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00251">vp3.c:251</a></div></div>
<div class="ttc" id="avp3_8c_html_a9376133c69d116e74c992c3bc8aca33e"><div class="ttname"><a href="vp3_8c.html#a9376133c69d116e74c992c3bc8aca33e">vp4_pred_block_type_map</a></div><div class="ttdeci">static const uint8_t vp4_pred_block_type_map[8]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00140">vp3.c:140</a></div></div>
<div class="ttc" id="avp3_8c_html_ad0f1cbe158b25ca1769692f30656d82f"><div class="ttname"><a href="vp3_8c.html#ad0f1cbe158b25ca1769692f30656d82f">vp3_decode_frame</a></div><div class="ttdeci">static int vp3_decode_frame(AVCodecContext *avctx, void *data, int *got_frame, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l02577">vp3.c:2577</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a32c2d4be395de8c60a316132ae7cb84c"><div class="ttname"><a href="struct_vp3_decode_context.html#a32c2d4be395de8c60a316132ae7cb84c">Vp3DecodeContext::kf_coded_fragment_list</a></div><div class="ttdeci">int * kf_coded_fragment_list</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00265">vp3.c:265</a></div></div>
<div class="ttc" id="avp3data_8h_html_af38cf76922e44e082f83115ce8530706"><div class="ttname"><a href="vp3data_8h.html#af38cf76922e44e082f83115ce8530706">motion_vector_vlc_table</a></div><div class="ttdeci">static const uint8_t motion_vector_vlc_table[63][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00151">vp3data.h:151</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a32ee2279bc67578145450ecd06de551d"><div class="ttname"><a href="struct_vp3_decode_context.html#a32ee2279bc67578145450ecd06de551d">Vp3DecodeContext::last_slice_end</a></div><div class="ttdeci">int last_slice_end</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00184">vp3.c:184</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_af6c5114d3dc8564cd933696e282af656"><div class="ttname"><a href="struct_vp3_decode_context.html#af6c5114d3dc8564cd933696e282af656">Vp3DecodeContext::data_offset</a></div><div class="ttdeci">int data_offset[3]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00216">vp3.c:216</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a28c83e8b6e89b9498dec6e066492b8f5"><div class="ttname"><a href="struct_vp3_decode_context.html#a28c83e8b6e89b9498dec6e066492b8f5">Vp3DecodeContext::golden_frame</a></div><div class="ttdeci">ThreadFrame golden_frame</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00173">vp3.c:173</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a9e54e9e2ccf671c1f79867e19ce432e9"><div class="ttname"><a href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a></div><div class="ttdeci">static int init_get_bits8(GetBitContext *s, const uint8_t *buffer, int byte_size)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00677">get_bits.h:677</a></div></div>
<div class="ttc" id="avp3_8c_html_a0122623242343e5572d09c992c375db2"><div class="ttname"><a href="vp3_8c.html#a0122623242343e5572d09c992c375db2">theora_decode_tables</a></div><div class="ttdeci">static int theora_decode_tables(AVCodecContext *avctx, GetBitContext *gb)</div></div>
<div class="ttc" id="avp3_8c_html_aec58861293e80cd857bbda50227c71ed"><div class="ttname"><a href="vp3_8c.html#aec58861293e80cd857bbda50227c71ed">hilbert_offset</a></div><div class="ttdeci">static const uint8_t hilbert_offset[16][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00125">vp3.c:125</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a1c689544e66e3dd516af1d6e6f045367"><div class="ttname"><a href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a></div><div class="ttdeci">void ff_thread_report_progress(ThreadFrame *f, int n, int field)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00561">pthread_frame.c:561</a></div></div>
<div class="ttc" id="adecode__audio_8c_html_a1704ae53d7f426e1b67341785b5b2b58"><div class="ttname"><a href="decode__audio_8c.html#a1704ae53d7f426e1b67341785b5b2b58">decode</a></div><div class="ttdeci">static void decode(AVCodecContext *dec_ctx, AVPacket *pkt, AVFrame *frame, FILE *outfile)</div><div class="ttdef"><b>Definition:</b> <a href="decode__audio_8c_source.html#l00071">decode_audio.c:71</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a667b04d7fb6ef46db4da4af554c5b6f7"><div class="ttname"><a href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a></div><div class="ttdeci">#define width</div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_ae59bb66df9495df417c2632403e23aa7"><div class="ttname"><a href="libavutil_2internal_8h.html#ae59bb66df9495df417c2632403e23aa7">emms_c</a></div><div class="ttdeci">#define emms_c()</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00055">internal.h:55</a></div></div>
<div class="ttc" id="astruct_vp3_fragment_html_ae50ac1dd9b64adc73d87004fd468eac0"><div class="ttname"><a href="struct_vp3_fragment.html#ae50ac1dd9b64adc73d87004fd468eac0">Vp3Fragment::coding_method</a></div><div class="ttdeci">uint8_t coding_method</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00056">vp3.c:56</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="avp3_8c_html_a1b4d6fd036c0aa7dbe824263bbb88cb6"><div class="ttname"><a href="vp3_8c.html#a1b4d6fd036c0aa7dbe824263bbb88cb6">init_loop_filter</a></div><div class="ttdeci">static void init_loop_filter(Vp3DecodeContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00454">vp3.c:454</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a04b3f5fabfa4e1934e91a7fb1b4222f5"><div class="ttname"><a href="struct_vp3_decode_context.html#a04b3f5fabfa4e1934e91a7fb1b4222f5">Vp3DecodeContext::coded_dc_scale_factor</a></div><div class="ttdeci">uint16_t coded_dc_scale_factor[2][64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00224">vp3.c:224</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a35946bc93a3cf3264b3713f6486e20bb"><div class="ttname"><a href="struct_vp3_decode_context.html#a35946bc93a3cf3264b3713f6486e20bb">Vp3DecodeContext::fragment_run_length_vlc</a></div><div class="ttdeci">VLC fragment_run_length_vlc</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00274">vp3.c:274</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_addfdb8a030a1cf8fe1c8e1efbc8a9a4a"><div class="ttname"><a href="struct_vp3_decode_context.html#addfdb8a030a1cf8fe1c8e1efbc8a9a4a">Vp3DecodeContext::hdsp</a></div><div class="ttdeci">HpelDSPContext hdsp</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00179">vp3.c:179</a></div></div>
<div class="ttc" id="avp4data_8h_html_a9c2b53d18c313e9777652ce96b536261"><div class="ttname"><a href="vp4data_8h.html#a9c2b53d18c313e9777652ce96b536261">vp4_mv_table_selector</a></div><div class="ttdeci">static const uint8_t vp4_mv_table_selector[32]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00105">vp4data.h:105</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga6b4950dd3320e524f648799927f256a7"><div class="ttname"><a href="group__lavc__core.html#ga6b4950dd3320e524f648799927f256a7">AV_GET_BUFFER_FLAG_REF</a></div><div class="ttdeci">#define AV_GET_BUFFER_FLAG_REF</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00509">avcodec.h:509</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a7cedf12244c6461642e86bb76946d020"><div class="ttname"><a href="struct_vp3_decode_context.html#a7cedf12244c6461642e86bb76946d020">Vp3DecodeContext::edge_emu_buffer</a></div><div class="ttdeci">uint8_t * edge_emu_buffer</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00294">vp3.c:294</a></div></div>
<div class="ttc" id="aregdef_8h_html_a09dff3d9a89874939fa7cc9d056b114c"><div class="ttname"><a href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a></div><div class="ttdeci">#define s1</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00038">regdef.h:38</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba6d776c3dc7ba74b9e9aced1f938dea16"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba6d776c3dc7ba74b9e9aced1f938dea16">VP4_DC_INTER</a></div><div class="ttdeci">@ VP4_DC_INTER</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00134">vp3.c:134</a></div></div>
<div class="ttc" id="avp3_8c_html_ab5c897db58ec55e3a4c047dccf76d794"><div class="ttname"><a href="vp3_8c.html#ab5c897db58ec55e3a4c047dccf76d794">init_block_mapping</a></div><div class="ttdeci">static int init_block_mapping(Vp3DecodeContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00377">vp3.c:377</a></div></div>
<div class="ttc" id="avp3_8c_html_a8971fc0909d48676a3e8ec9b13de741f"><div class="ttname"><a href="vp3_8c.html#a8971fc0909d48676a3e8ec9b13de741f">SB_PARTIALLY_CODED</a></div><div class="ttdeci">#define SB_PARTIALLY_CODED</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00061">vp3.c:61</a></div></div>
<div class="ttc" id="avp3data_8h_html_a46a6da6b1936191571fd30b2a749f38c"><div class="ttname"><a href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a></div><div class="ttdeci">uint8_t bits</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00202">vp3data.h:202</a></div></div>
<div class="ttc" id="avp3_8c_html_a9ba5e8c83534d37642b47112c6b01abd"><div class="ttname"><a href="vp3_8c.html#a9ba5e8c83534d37642b47112c6b01abd">SB_NOT_CODED</a></div><div class="ttdeci">#define SB_NOT_CODED</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00060">vp3.c:60</a></div></div>
<div class="ttc" id="avp3_8c_html_a33bfe2c1d7f6d429ed64596558e2eada"><div class="ttname"><a href="vp3_8c.html#a33bfe2c1d7f6d429ed64596558e2eada">Vp3Fragment</a></div><div class="ttdeci">struct Vp3Fragment Vp3Fragment</div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5252d34fbce300228d4dbda19a8c3293"><div class="ttname"><a href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">AVCodecContext::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00905">avcodec.h:905</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba844cf3f8940c5287fdd836da6d3f7778"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba844cf3f8940c5287fdd836da6d3f7778">VP4_DC_UNDEFINED</a></div><div class="ttdeci">@ VP4_DC_UNDEFINED</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00138">vp3.c:137</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="aget__bits_8h_html"><div class="ttname"><a href="get__bits_8h.html">get_bits.h</a></div></div>
<div class="ttc" id="avp3_8c_html_a20e3180ea8385544ac58a895d2755ec0"><div class="ttname"><a href="vp3_8c.html#a20e3180ea8385544ac58a895d2755ec0">reverse_dc_prediction</a></div><div class="ttdeci">static void reverse_dc_prediction(Vp3DecodeContext *s, int first_fragment, int fragment_width, int fragment_height)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01631">vp3.c:1631</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a75b4636fcf06f5d759a395474d53a98b"><div class="ttname"><a href="struct_vp3_decode_context.html#a75b4636fcf06f5d759a395474d53a98b">Vp3DecodeContext::chroma_x_shift</a></div><div class="ttdeci">int chroma_x_shift</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00172">vp3.c:172</a></div></div>
<div class="ttc" id="avp3_8c_html_ab410e1e233bc55ad4f49e990d0f51d4b"><div class="ttname"><a href="vp3_8c.html#ab410e1e233bc55ad4f49e990d0f51d4b">unpack_dct_coeffs</a></div><div class="ttdeci">static int unpack_dct_coeffs(Vp3DecodeContext *s, GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01289">vp3.c:1289</a></div></div>
<div class="ttc" id="avp3_8c_html_ac5d58fc84de206c39840e16ebefec993"><div class="ttname"><a href="vp3_8c.html#ac5d58fc84de206c39840e16ebefec993">ModeAlphabet</a></div><div class="ttdeci">static const int ModeAlphabet[6][CODING_MODE_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00087">vp3.c:87</a></div></div>
<div class="ttc" id="abitstream_8c_html_a6833b44193a374e05ad39b2eb9705bba"><div class="ttname"><a href="bitstream_8c.html#a6833b44193a374e05ad39b2eb9705bba">ff_free_vlc</a></div><div class="ttdeci">void ff_free_vlc(VLC *vlc)</div><div class="ttdef"><b>Definition:</b> <a href="bitstream_8c_source.html#l00365">bitstream.c:365</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV420P</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, (1 Cr &amp; Cb sample per 2x2 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00066">pixfmt.h:66</a></div></div>
<div class="ttc" id="acommon_8h_html_aa79ca71ef110a498d8275cbf7aa75a93"><div class="ttname"><a href="common_8h.html#aa79ca71ef110a498d8275cbf7aa75a93">RSHIFT</a></div><div class="ttdeci">#define RSHIFT(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00054">common.h:54</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a77adc5079efc30b9c553da71fb333fd8"><div class="ttname"><a href="struct_vp3_decode_context.html#a77adc5079efc30b9c553da71fb333fd8">Vp3DecodeContext::macroblock_coding</a></div><div class="ttdeci">unsigned char * macroblock_coding</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00292">vp3.c:292</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7a1aeb4f44414c396b28b3f392313e50ae"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a1aeb4f44414c396b28b3f392313e50ae">AVCOL_PRI_BT470BG</a></div><div class="ttdeci">@ AVCOL_PRI_BT470BG</div><div class="ttdoc">also ITU-R BT601-6 625 / ITU-R BT1358 625 / ITU-R BT1700 625 PAL &amp; SECAM</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00465">pixfmt.h:465</a></div></div>
<div class="ttc" id="ahpeldsp_8c_html_a1bdbaf95361cfb912c75c8dbc819dcba"><div class="ttname"><a href="hpeldsp_8c.html#a1bdbaf95361cfb912c75c8dbc819dcba">ff_hpeldsp_init</a></div><div class="ttdeci">av_cold void ff_hpeldsp_init(HpelDSPContext *c, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="hpeldsp_8c_source.html#l00338">hpeldsp.c:338</a></div></div>
<div class="ttc" id="avp3_8c_html_ab4c9df5a3b9142124f1c200048098be8"><div class="ttname"><a href="vp3_8c.html#ab4c9df5a3b9142124f1c200048098be8">MODE_USING_GOLDEN</a></div><div class="ttdeci">#define MODE_USING_GOLDEN</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00074">vp3.c:74</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="avp3_8c_html_a2f4d52b8116b2d35a59f1524c5dafa25"><div class="ttname"><a href="vp3_8c.html#a2f4d52b8116b2d35a59f1524c5dafa25">init_dequantizer</a></div><div class="ttdeci">static void init_dequantizer(Vp3DecodeContext *s, int qpi)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00411">vp3.c:411</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_afdfad8d6d00776544de8baf8fea3469d"><div class="ttname"><a href="struct_vp3_decode_context.html#afdfad8d6d00776544de8baf8fea3469d">Vp3DecodeContext::u_superblock_start</a></div><div class="ttdeci">int u_superblock_start</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00198">vp3.c:198</a></div></div>
<div class="ttc" id="avp3_8c_html_a87bee11d6c3ace94aff1aeeb68916c15"><div class="ttname"><a href="vp3_8c.html#a87bee11d6c3ace94aff1aeeb68916c15">MODE_INTER_FOURMV</a></div><div class="ttdeci">#define MODE_INTER_FOURMV</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00076">vp3.c:76</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gae21e6310b40920cd61f54e9c320d8e6c"><div class="ttname"><a href="group__lavc__core.html#gae21e6310b40920cd61f54e9c320d8e6c">AV_CODEC_CAP_FRAME_THREADS</a></div><div class="ttdeci">#define AV_CODEC_CAP_FRAME_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00106">codec.h:106</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a></div><div class="ttdeci">@ AVDISCARD_ALL</div><div class="ttdoc">discard all</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00236">avcodec.h:236</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_aabbb6f5807b2be0cac3b724b80455b10"><div class="ttname"><a href="struct_vp3_decode_context.html#aabbb6f5807b2be0cac3b724b80455b10">Vp3DecodeContext::qps</a></div><div class="ttdeci">int qps[3]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00187">vp3.c:187</a></div></div>
<div class="ttc" id="avp3data_8h_html_a6976b444721242a20ba2d652e11c51c4"><div class="ttname"><a href="vp3data_8h.html#a6976b444721242a20ba2d652e11c51c4">coeff_tables</a></div><div class="ttdeci">static const int16_t *const coeff_tables[32]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00407">vp3data.h:407</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1944f9a4f8f2e123c087e1fe7613d571"><div class="ttname"><a href="struct_a_v_codec_context.html#a1944f9a4f8f2e123c087e1fe7613d571">AVCodecContext::flags2</a></div><div class="ttdeci">int flags2</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00613">avcodec.h:613</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_abefc4a2b094cf5a20fc1e1e042ea2d59"><div class="ttname"><a href="struct_vp3_decode_context.html#abefc4a2b094cf5a20fc1e1e042ea2d59">Vp3DecodeContext::superblock_coding</a></div><div class="ttdeci">unsigned char * superblock_coding</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00200">vp3.c:200</a></div></div>
<div class="ttc" id="aaacdec__template_8c_html_affa0ccbe2ef7fd24bb8c61e28d1a6631"><div class="ttname"><a href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a></div><div class="ttdeci">static void flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="aacdec__template_8c_source.html#l00592">aacdec_template.c:592</a></div></div>
<div class="ttc" id="astruct_v_l_c_html"><div class="ttname"><a href="struct_v_l_c.html">VLC</a></div><div class="ttdef"><b>Definition:</b> <a href="vlc_8h_source.html#l00026">vlc.h:26</a></div></div>
<div class="ttc" id="avp3_8c_html_afc6cd488630d1a85ec5d80c78089e659"><div class="ttname"><a href="vp3_8c.html#afc6cd488630d1a85ec5d80c78089e659">init_frames</a></div><div class="ttdeci">static av_cold int init_frames(Vp3DecodeContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l02300">vp3.c:2300</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="avp3_8c_html_a1b28968e7678d6e9809ee468e5354cdb"><div class="ttname"><a href="vp3_8c.html#a1b28968e7678d6e9809ee468e5354cdb">PU</a></div><div class="ttdeci">#define PU</div></div>
<div class="ttc" id="avp3data_8h_html_a5163de1ff387ee4619cdb1fbbb5795bd"><div class="ttname"><a href="vp3data_8h.html#a5163de1ff387ee4619cdb1fbbb5795bd">mode_code_vlc_table</a></div><div class="ttdeci">static const uint8_t mode_code_vlc_table[8][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00144">vp3data.h:144</a></div></div>
<div class="ttc" id="astruct_video_d_s_p_context_html"><div class="ttname"><a href="struct_video_d_s_p_context.html">VideoDSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="videodsp_8h_source.html#l00041">videodsp.h:41</a></div></div>
<div class="ttc" id="avp3_8c_html_a9d2bb11e5372a99d128e7a22dcb74f92"><div class="ttname"><a href="vp3_8c.html#a9d2bb11e5372a99d128e7a22dcb74f92">unpack_modes</a></div><div class="ttdeci">static int unpack_modes(Vp3DecodeContext *s, GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00783">vp3.c:783</a></div></div>
<div class="ttc" id="ahevcdsp_8c_html_aa4607c9f8c7507415c1c10c59a2141b6"><div class="ttname"><a href="hevcdsp_8c.html#aa4607c9f8c7507415c1c10c59a2141b6">transform</a></div><div class="ttdeci">static const int8_t transform[32][32]</div><div class="ttdef"><b>Definition:</b> <a href="hevcdsp_8c_source.html#l00027">hevcdsp.c:27</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a22b3ddb21060c2002494bbe4bf79da46"><div class="ttname"><a href="struct_vp3_decode_context.html#a22b3ddb21060c2002494bbe4bf79da46">Vp3DecodeContext::c_superblock_count</a></div><div class="ttdeci">int c_superblock_count</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00197">vp3.c:197</a></div></div>
<div class="ttc" id="avp3_8c_html_af2a8bcaab19846840be9f8cad38e9aef"><div class="ttname"><a href="vp3_8c.html#af2a8bcaab19846840be9f8cad38e9aef">unpack_vlcs</a></div><div class="ttdeci">static int unpack_vlcs(Vp3DecodeContext *s, GetBitContext *gb, VLC *table, int coeff_index, int plane, int eob_run)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01168">vp3.c:1168</a></div></div>
<div class="ttc" id="astruct_get_bit_context_html"><div class="ttname"><a href="struct_get_bit_context.html">GetBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00061">get_bits.h:61</a></div></div>
<div class="ttc" id="avp3dsp_8h_html_a7312c046e7594f81dfc8fa63666adca0"><div class="ttname"><a href="vp3dsp_8h.html#a7312c046e7594f81dfc8fa63666adca0">ff_vp3dsp_h_loop_filter_12</a></div><div class="ttdeci">void ff_vp3dsp_h_loop_filter_12(uint8_t *first_pixel, ptrdiff_t stride, int *bounding_values)</div></div>
<div class="ttc" id="avp3_8c_html_ab041a85d453fa75a567323dbf9aaaec3"><div class="ttname"><a href="vp3_8c.html#ab041a85d453fa75a567323dbf9aaaec3">theora_decode_header</a></div><div class="ttdeci">static int theora_decode_header(AVCodecContext *avctx, GetBitContext *gb)</div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_I</div><div class="ttdoc">Intra.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00274">avutil.h:274</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a505086b48eb34d53e47f60ac777204b9"><div class="ttname"><a href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a></div><div class="ttdeci">static unsigned int get_bits1(GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00498">get_bits.h:498</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a14a456e11a463bfd0ae4f81490994b5f"><div class="ttname"><a href="struct_vp3_decode_context.html#a14a456e11a463bfd0ae4f81490994b5f">Vp3DecodeContext::motion_val</a></div><div class="ttdeci">int8_t(*[2] motion_val)[2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00221">vp3.c:221</a></div></div>
<div class="ttc" id="avp3_8c_html_ae7145e4f7ffe6b976e340130932c0f19"><div class="ttname"><a href="vp3_8c.html#ae7145e4f7ffe6b976e340130932c0f19">TOKEN_COEFF</a></div><div class="ttdeci">#define TOKEN_COEFF(coeff)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00252">vp3.c:252</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a05cfcbdcf3900dc55a4171cccde4ec55"><div class="ttname"><a href="struct_vp3_decode_context.html#a05cfcbdcf3900dc55a4171cccde4ec55">Vp3DecodeContext::keyframe</a></div><div class="ttdeci">int keyframe</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00176">vp3.c:176</a></div></div>
<div class="ttc" id="avp4data_8h_html_afeead949f28df2eaeca5ecdb39831293"><div class="ttname"><a href="vp4data_8h.html#afeead949f28df2eaeca5ecdb39831293">vp4_y_dc_scale_factor</a></div><div class="ttdeci">static const uint8_t vp4_y_dc_scale_factor[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00042">vp4data.h:42</a></div></div>
<div class="ttc" id="astruct_vp3_fragment_html_a158a6d8069f02edbfe355fcb62f3c55b"><div class="ttname"><a href="struct_vp3_fragment.html#a158a6d8069f02edbfe355fcb62f3c55b">Vp3Fragment::qpi</a></div><div class="ttdeci">uint8_t qpi</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00057">vp3.c:57</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_ab9aca4492668a79bc015f43ad944021e"><div class="ttname"><a href="libavutil_2internal_8h.html#ab9aca4492668a79bc015f43ad944021e">ONLY_IF_THREADS_ENABLED</a></div><div class="ttdeci">#define ONLY_IF_THREADS_ENABLED(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00192">internal.h:192</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a8508090bc70364205183c05cd5dd1446"><div class="ttname"><a href="struct_vp3_decode_context.html#a8508090bc70364205183c05cd5dd1446">Vp3DecodeContext::coded_fragment_list</a></div><div class="ttdeci">int * coded_fragment_list[3]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00263">vp3.c:263</a></div></div>
<div class="ttc" id="abitstream_8c_html_a123bcd62a48b114fc911c76667b5494a"><div class="ttname"><a href="bitstream_8c.html#a123bcd62a48b114fc911c76667b5494a">ff_init_vlc_sparse</a></div><div class="ttdeci">int ff_init_vlc_sparse(VLC *vlc_arg, int nb_bits, int nb_codes, const void *bits, int bits_wrap, int bits_size, const void *codes, int codes_wrap, int codes_size, const void *symbols, int symbols_wrap, int symbols_size, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="bitstream_8c_source.html#l00275">bitstream.c:275</a></div></div>
<div class="ttc" id="avp3_8c_html_ae9524c8b7f9f0264f11077693e026af3"><div class="ttname"><a href="vp3_8c.html#ae9524c8b7f9f0264f11077693e026af3">update_frames</a></div><div class="ttdeci">static int update_frames(AVCodecContext *avctx)</div><div class="ttdoc">Release and shuffle frames after decode finishes.</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l02495">vp3.c:2495</a></div></div>
<div class="ttc" id="avp3data_8h_html_af143d7dca42b7c538eebcfe0dd1c64ce"><div class="ttname"><a href="vp3data_8h.html#af143d7dca42b7c538eebcfe0dd1c64ce">motion_vector_table</a></div><div class="ttdeci">static const int8_t motion_vector_table[63]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00179">vp3data.h:179</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a0653995e7a53f73dca54880791d0e13b"><div class="ttname"><a href="struct_vp3_decode_context.html#a0653995e7a53f73dca54880791d0e13b">Vp3DecodeContext::num_coded_frags</a></div><div class="ttdeci">int num_coded_frags[3][64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00258">vp3.c:258</a></div></div>
<div class="ttc" id="avp3_8c_html_aaca5389b2381f17eec131a6a9527be74"><div class="ttname"><a href="vp3_8c.html#aaca5389b2381f17eec131a6a9527be74">Vp3DecodeContext</a></div><div class="ttdeci">struct Vp3DecodeContext Vp3DecodeContext</div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaae1179d958c0d2847a5903f57450d289"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaae1179d958c0d2847a5903f57450d289">AV_CODEC_ID_VP4</a></div><div class="ttdeci">@ AV_CODEC_ID_VP4</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00292">codec_id.h:292</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_a5799decfcc95b529eef0101b60472aa4"><div class="ttname"><a href="libavcodec_2internal_8h.html#a5799decfcc95b529eef0101b60472aa4">FF_CODEC_CAP_EXPORTS_CROPPING</a></div><div class="ttdeci">#define FF_CODEC_CAP_EXPORTS_CROPPING</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00066">internal.h:66</a></div></div>
<div class="ttc" id="avp3data_8h_html_a507185a884eea157e551338b7087d662"><div class="ttname"><a href="vp3data_8h.html#a507185a884eea157e551338b7087d662">vp31_ac_scale_factor</a></div><div class="ttdeci">static const uint16_t vp31_ac_scale_factor[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00076">vp3data.h:76</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a3ade108ed005469c6f61f17a5ade7ef7"><div class="ttname"><a href="struct_vp3_decode_context.html#a3ade108ed005469c6f61f17a5ade7ef7">Vp3DecodeContext::chroma_y_shift</a></div><div class="ttdeci">int chroma_y_shift</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00172">vp3.c:172</a></div></div>
<div class="ttc" id="avp3_8c_html_a10fe547a76f265bd44b0621f7b7e63ff"><div class="ttname"><a href="vp3_8c.html#a10fe547a76f265bd44b0621f7b7e63ff">DC_COEFF</a></div><div class="ttdeci">#define DC_COEFF(u)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01629">vp3.c:1629</a></div></div>
<div class="ttc" id="ah264pred__template_8c_html_a93cca9adbbca82ea00bf3250781f6dce"><div class="ttname"><a href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a></div><div class="ttdeci">for(j=16;j &gt;0;--j)</div><div class="ttdef"><b>Definition:</b> <a href="h264pred__template_8c_source.html#l00469">h264pred_template.c:469</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a242ee762e9da6af6a353be2a39ece5e5"><div class="ttname"><a href="struct_vp3_decode_context.html#a242ee762e9da6af6a353be2a39ece5e5">Vp3DecodeContext::last_frame</a></div><div class="ttdeci">ThreadFrame last_frame</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00174">vp3.c:174</a></div></div>
<div class="ttc" id="avp3data_8h_html_ab6a5bfd620561b1234eedd381252fa18"><div class="ttname"><a href="vp3data_8h.html#ab6a5bfd620561b1234eedd381252fa18">vp31_intra_y_dequant</a></div><div class="ttdeci">static const uint8_t vp31_intra_y_dequant[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00029">vp3data.h:29</a></div></div>
<div class="ttc" id="avp3data_8h_html_a21aab26a05f17b506992d352e032c303"><div class="ttname"><a href="vp3data_8h.html#a21aab26a05f17b506992d352e032c303">eob_run_table</a></div><div class="ttdeci">static const struct @0 eob_run_table[7]</div></div>
<div class="ttc" id="apthread__frame_8c_html_aa3f6cbc3d5b74d46b247469ca3247ad1"><div class="ttname"><a href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a></div><div class="ttdeci">void ff_thread_release_buffer(AVCodecContext *avctx, ThreadFrame *f)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00999">pthread_frame.c:999</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="avp3dsp_8h_html_a9f2906109b07ce8e7758095c83274cfc"><div class="ttname"><a href="vp3dsp_8h.html#a9f2906109b07ce8e7758095c83274cfc">ff_vp3dsp_v_loop_filter_12</a></div><div class="ttdeci">void ff_vp3dsp_v_loop_filter_12(uint8_t *first_pixel, ptrdiff_t stride, int *bounding_values)</div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a8e3eb32799f4637fcdd75bb9099142ff"><div class="ttname"><a href="tableprint__vlc_8h.html#a8e3eb32799f4637fcdd75bb9099142ff">ff_dlog</a></div><div class="ttdeci">#define ff_dlog(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00029">tableprint_vlc.h:29</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a2c974557671dd459674b170c5e64d79a"><div class="ttname"><a href="struct_a_v_codec_context.html#a2c974557671dd459674b170c5e64d79a">AVCodecContext::codec_tag</a></div><div class="ttdeci">unsigned int codec_tag</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00551">avcodec.h:551</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a17d0d5d104f6556caf21d484f7204d73"><div class="ttname"><a href="struct_vp3_decode_context.html#a17d0d5d104f6556caf21d484f7204d73">Vp3DecodeContext::c_superblock_width</a></div><div class="ttdeci">int c_superblock_width</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00195">vp3.c:195</a></div></div>
<div class="ttc" id="avp3_8c_html_a02005ec59315e203bc0dae04751c2b06"><div class="ttname"><a href="vp3_8c.html#a02005ec59315e203bc0dae04751c2b06">SB_FULLY_CODED</a></div><div class="ttdeci">#define SB_FULLY_CODED</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00062">vp3.c:62</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a7e1fa7f75c6a2a361034bb2bf1f2d8c0"><div class="ttname"><a href="struct_vp3_decode_context.html#a7e1fa7f75c6a2a361034bb2bf1f2d8c0">Vp3DecodeContext::c_superblock_height</a></div><div class="ttdeci">int c_superblock_height</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00196">vp3.c:196</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a></div><div class="ttdeci">@ AVDISCARD_NONKEY</div><div class="ttdoc">discard all frames except keyframes</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00235">avcodec.h:235</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga5f35425595395c76cfa406c883f78aed"><div class="ttname"><a href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a></div><div class="ttdeci">#define AV_CODEC_CAP_DR1</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga752fa4b8beeb25c9e8f0014a4aa622b4"><div class="ttname"><a href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a></div><div class="ttdeci">#define AV_CODEC_FLAG_GRAY</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00308">avcodec.h:308</a></div></div>
<div class="ttc" id="avp3data_8h_html_a6280505ba77ff544d15ae5d909a82ac5"><div class="ttname"><a href="vp3data_8h.html#a6280505ba77ff544d15ae5d909a82ac5">fixed_motion_vector_table</a></div><div class="ttdeci">static const int8_t fixed_motion_vector_table[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00189">vp3data.h:189</a></div></div>
<div class="ttc" id="asnow_8txt_html_a719d7e9253d560ae4bac6546c3abc071"><div class="ttname"><a href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a></div><div class="ttdeci">Tag MUST be and&lt; 10hcoeff half pel interpolation filter coefficients, hcoeff[0] are the 2 middle coefficients[1] are the next outer ones and so on, resulting in a filter like:...eff[2], hcoeff[1], hcoeff[0], hcoeff[0], hcoeff[1], hcoeff[2] ... the sign of the coefficients is not explicitly stored but alternates after each coeff and coeff[0] is positive, so ...,+,-,+,-,+,+,-,+,-,+,... hcoeff[0] is not explicitly stored but found by subtracting the sum of all stored coefficients with signs from 32 hcoeff[0]=32 - hcoeff[1] - hcoeff[2] - ... a good choice for hcoeff and htaps is htaps=6 hcoeff={40,-10, 2} an alternative which requires more computations at both encoder and decoder side and may or may not be better is htaps=8 hcoeff={42,-14, 6,-2}ref_frames minimum of the number of available reference frames and max_ref_frames for example the first frame after a key frame always has ref_frames=1spatial_decomposition_type wavelet type 0 is a 9/7 symmetric compact integer wavelet 1 is a 5/3 symmetric compact integer wavelet others are reserved stored as delta from last, last is reset to 0 if always_reset||keyframeqlog quality(logarithmic quantizer scale) stored as delta from last, last is reset to 0 if always_reset||keyframemv_scale stored as delta from last, last is reset to 0 if always_reset||keyframe FIXME check that everything works fine if this changes between framesqbias dequantization bias stored as delta from last, last is reset to 0 if always_reset||keyframeblock_max_depth maximum depth of the block tree stored as delta from last, last is reset to 0 if always_reset||keyframequant_table quantization tableHighlevel bitstream structure:==============================--------------------------------------------|Header|--------------------------------------------|------------------------------------|||Block0||||split?||||yes no||||......... intra?||||:Block01 :yes no||||:Block02 :....... ..........||||:Block03 ::y DC ::ref index:||||:Block04 ::cb DC ::motion x :||||......... :cr DC ::motion y :||||....... ..........|||------------------------------------||------------------------------------|||Block1|||...|--------------------------------------------|------------ ------------ ------------|||Y subbands||Cb subbands||Cr subbands||||--- ---||--- ---||--- ---|||||LL0||HL0||||LL0||HL0||||LL0||HL0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||LH0||HH0||||LH0||HH0||||LH0||HH0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HL1||LH1||||HL1||LH1||||HL1||LH1|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HH1||HL2||||HH1||HL2||||HH1||HL2|||||...||...||...|||------------ ------------ ------------|--------------------------------------------Decoding process:=================------------|||Subbands|------------||||------------|Intra DC||||LL0 subband prediction ------------|\ Dequantization ------------------- \||Reference frames|\ IDWT|------- -------|Motion \|||Frame 0||Frame 1||Compensation . OBMC v -------|------- -------|--------------. \------&gt; Frame n output Frame Frame&lt;----------------------------------/|...|------------------- Range Coder:============Binary Range Coder:------------------- The implemented range coder is an adapted version based upon &quot;Range encoding: an algorithm for removing redundancy from a digitised message.&quot; by G. N. N. Martin. The symbols encoded by the Snow range coder are bits(0|1). The associated probabilities are not fix but change depending on the symbol mix seen so far. bit seen|new state ---------+----------------------------------------------- 0|256 - state_transition_table[256 - old_state];1|state_transition_table[old_state];state_transition_table={ 0, 0, 0, 0, 0, 0, 0, 0, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 190, 191, 192, 194, 194, 195, 196, 197, 198, 199, 200, 201, 202, 202, 204, 205, 206, 207, 208, 209, 209, 210, 211, 212, 213, 215, 215, 216, 217, 218, 219, 220, 220, 222, 223, 224, 225, 226, 227, 227, 229, 229, 230, 231, 232, 234, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 248, 0, 0, 0, 0, 0, 0, 0};FIXME Range Coding of integers:------------------------- FIXME Neighboring Blocks:===================left and top are set to the respective blocks unless they are outside of the image in which case they are set to the Null block top-left is set to the top left block unless it is outside of the image in which case it is set to the left block if this block has no larger parent block or it is at the left side of its parent block and the top right block is not outside of the image then the top right block is used for top-right else the top-left block is used Null block y, cb, cr are 128 level, ref, mx and my are 0 Motion Vector Prediction:=========================1. the motion vectors of all the neighboring blocks are scaled to compensate for the difference of reference frames scaled_mv=(mv *(256 *(current_reference+1)/(mv.reference+1))+128)&gt; the median of the scaled top and top right vectors is used as motion vector prediction the used motion vector is the sum of the predictor and(mvx_diff, mvy_diff) *mv_scale Intra DC Prediction block[y][x] dc[1]</div><div class="ttdef"><b>Definition:</b> <a href="snow_8txt_source.html#l00400">snow.txt:400</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga88b0ecbc4eb3453eef3fbefa3bddeb7c"><div class="ttname"><a href="group__lavu__frame.html#ga88b0ecbc4eb3453eef3fbefa3bddeb7c">av_frame_ref</a></div><div class="ttdeci">int av_frame_ref(AVFrame *dst, const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00443">frame.c:443</a></div></div>
<div class="ttc" id="avp3_8c_html_a43ef5896eb1ce21da33247ca91932aa6"><div class="ttname"><a href="vp3_8c.html#a43ef5896eb1ce21da33247ca91932aa6">unpack_vectors</a></div><div class="ttdeci">static int unpack_vectors(Vp3DecodeContext *s, GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00896">vp3.c:896</a></div></div>
<div class="ttc" id="avp3_8c_html_a549da85294ad6c5ed165d360c95b8306"><div class="ttname"><a href="vp3_8c.html#a549da85294ad6c5ed165d360c95b8306">vp4_get_mv</a></div><div class="ttdeci">static int vp4_get_mv(Vp3DecodeContext *s, GetBitContext *gb, int axis, int last_motion)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00886">vp3.c:886</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="aimc_8c_html_a853b93a1fcb68331bf140fbf60dd4658"><div class="ttname"><a href="imc_8c.html#a853b93a1fcb68331bf140fbf60dd4658">vlc_tables</a></div><div class="ttdeci">static VLC_TYPE vlc_tables[VLC_TABLES_SIZE][2]</div><div class="ttdef"><b>Definition:</b> <a href="imc_8c_source.html#l00121">imc.c:121</a></div></div>
<div class="ttc" id="aframe_8h_html_add80189702cf0f5ea82718576fb43201"><div class="ttname"><a href="frame_8h.html#add80189702cf0f5ea82718576fb43201">AV_NUM_DATA_POINTERS</a></div><div class="ttdeci">#define AV_NUM_DATA_POINTERS</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00309">frame.h:309</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a4d08b297e97eefd66c714df4fff493c8"><div class="ttname"><a href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">AVCodecContext::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02069">avcodec.h:2069</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_abb01e291550fa3fb96188af4d494587e"><div class="ttname"><a href="struct_a_v_codec_context.html#abb01e291550fa3fb96188af4d494587e">AVCodecContext::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00606">avcodec.h:606</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html"><div class="ttname"><a href="struct_vp3_decode_context.html">Vp3DecodeContext</a></div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00167">vp3.c:167</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_acad3705412735cf6acb63a3a72eb1f59"><div class="ttname"><a href="struct_vp3_decode_context.html#acad3705412735cf6acb63a3a72eb1f59">Vp3DecodeContext::theora</a></div><div class="ttdeci">int theora</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00169">vp3.c:169</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a07ac5c88bf080f532c7c8ee026369487"><div class="ttname"><a href="struct_vp3_decode_context.html#a07ac5c88bf080f532c7c8ee026369487">Vp3DecodeContext::nqps</a></div><div class="ttdeci">int nqps</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00188">vp3.c:188</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a03ebadefc7336f8342578baa863c965a"><div class="ttname"><a href="struct_vp3_decode_context.html#a03ebadefc7336f8342578baa863c965a">Vp3DecodeContext::DECLARE_ALIGNED</a></div><div class="ttdeci">DECLARE_ALIGNED(16, int16_t, block)[64]</div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ae90ac3c1a98bed6cfe5d7393c30986e5"><div class="ttname"><a href="struct_vp3_decode_context.html#ae90ac3c1a98bed6cfe5d7393c30986e5">Vp3DecodeContext::offset_x</a></div><div class="ttdeci">uint8_t offset_x</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00217">vp3.c:217</a></div></div>
<div class="ttc" id="avp3_8c_html_a3c4f9645a33d5f210f64e40e86d63d06"><div class="ttname"><a href="vp3_8c.html#a3c4f9645a33d5f210f64e40e86d63d06">theora_init_huffman_tables</a></div><div class="ttdeci">static av_cold int theora_init_huffman_tables(VLC *vlc, const HuffTable *huff)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l02312">vp3.c:2312</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_afbe77293f29b6ae4f5d3b4da1a567898"><div class="ttname"><a href="struct_vp3_decode_context.html#afbe77293f29b6ae4f5d3b4da1a567898">Vp3DecodeContext::superblock_fragments</a></div><div class="ttdeci">int * superblock_fragments</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00288">vp3.c:288</a></div></div>
<div class="ttc" id="astruct_huff_table_html_a2861cd13ca6a6cc43da2ea612898f97b"><div class="ttname"><a href="struct_huff_table.html#a2861cd13ca6a6cc43da2ea612898f97b">HuffTable::entries</a></div><div class="ttdeci">HuffEntry entries[32]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00163">vp3.c:163</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a15357f63b3f414a2ac6e6da9c070e2c4"><div class="ttname"><a href="struct_vp3_decode_context.html#a15357f63b3f414a2ac6e6da9c070e2c4">Vp3DecodeContext::theora_header</a></div><div class="ttdeci">int theora_header</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00169">vp3.c:169</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ae6e62fcb95e02f886349c634a7a1bdcf"><div class="ttname"><a href="struct_vp3_decode_context.html#ae6e62fcb95e02f886349c634a7a1bdcf">Vp3DecodeContext::superblock_count</a></div><div class="ttdeci">int superblock_count</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00191">vp3.c:191</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a1379e92176c7243e3fabda983f4de458"><div class="ttname"><a href="struct_vp3_decode_context.html#a1379e92176c7243e3fabda983f4de458">Vp3DecodeContext::flipped_image</a></div><div class="ttdeci">int flipped_image</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00183">vp3.c:183</a></div></div>
<div class="ttc" id="amem_8c_html_aedc3761897b7e9ea8ae1222b3d013c94"><div class="ttname"><a href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a></div><div class="ttdeci">void * av_mallocz_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00190">mem.c:190</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="avp4data_8h_html_a287aed97a5162ea91f014bd19a0a3f7b"><div class="ttname"><a href="vp4data_8h.html#a287aed97a5162ea91f014bd19a0a3f7b">vp4_bias</a></div><div class="ttdeci">static const uint16_t vp4_bias[5 *16][32][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00371">vp4data.h:371</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a419b113e2889467447efdec497f2ba72"><div class="ttname"><a href="struct_vp3_decode_context.html#a419b113e2889467447efdec497f2ba72">Vp3DecodeContext::dc_pred_row</a></div><div class="ttdeci">VP4Predictor * dc_pred_row</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00302">vp3.c:302</a></div></div>
<div class="ttc" id="aintmath_8h_html_a2998e3360a5d1a5763e8c1008b7b2e1d"><div class="ttname"><a href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a></div><div class="ttdeci">#define av_log2</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00083">intmath.h:83</a></div></div>
<div class="ttc" id="avp3data_8h_html"><div class="ttname"><a href="vp3data_8h.html">vp3data.h</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a1a0ac2637c57b51bc1f53268125d0aad"><div class="ttname"><a href="struct_vp3_decode_context.html#a1a0ac2637c57b51bc1f53268125d0aad">Vp3DecodeContext::theora_tables</a></div><div class="ttdeci">int theora_tables</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00169">vp3.c:169</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad4791ea14975f098b649db7fcd731ce6afd8960c59aa927ce6bee76a9594ffd95"><div class="ttname"><a href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6afd8960c59aa927ce6bee76a9594ffd95">AVCOL_TRC_BT709</a></div><div class="ttdeci">@ AVCOL_TRC_BT709</div><div class="ttdoc">also ITU-R BT1361</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00485">pixfmt.h:485</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a116c7fb56ac57ccca3e08b80467b2a40"><div class="ttname"><a href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a></div><div class="ttdeci">#define FF_THREAD_FRAME</div><div class="ttdoc">Decode more than one frame at once.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01796">avcodec.h:1796</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a7b7bd694ac6893ba09d8e5d4a44318f4"><div class="ttname"><a href="struct_vp3_decode_context.html#a7b7bd694ac6893ba09d8e5d4a44318f4">Vp3DecodeContext::block_pattern_vlc</a></div><div class="ttdeci">VLC block_pattern_vlc[2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00275">vp3.c:275</a></div></div>
<div class="ttc" id="avp3_8c_html_adfb7c14f1545e59dce4844680f738c2a"><div class="ttname"><a href="vp3_8c.html#adfb7c14f1545e59dce4844680f738c2a">ff_vp3_decoder</a></div><div class="ttdeci">AVCodec ff_vp3_decoder</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l03163">vp3.c:3163</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a059c52211f214a08ef2a705bc6bef28c"><div class="ttname"><a href="struct_vp3_decode_context.html#a059c52211f214a08ef2a705bc6bef28c">Vp3DecodeContext::vdsp</a></div><div class="ttdeci">VideoDSPContext vdsp</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00180">vp3.c:180</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea11920474f1c6dada14ac2cfd36f67601"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea11920474f1c6dada14ac2cfd36f67601">AV_CODEC_ID_VP3</a></div><div class="ttdeci">@ AV_CODEC_ID_VP3</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00078">codec_id.h:78</a></div></div>
<div class="ttc" id="avp3_8c_html_a0c8862283ac6b661b5786a4dbeabbb68"><div class="ttname"><a href="vp3_8c.html#a0c8862283ac6b661b5786a4dbeabbb68">MODE_INTRA</a></div><div class="ttdeci">#define MODE_INTRA</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00070">vp3.c:70</a></div></div>
<div class="ttc" id="avp3_8c_html_ad695c0452db369e22a797423fd8accc6"><div class="ttname"><a href="vp3_8c.html#ad695c0452db369e22a797423fd8accc6">apply_loop_filter</a></div><div class="ttdeci">static void apply_loop_filter(Vp3DecodeContext *s, int plane, int ystart, int yend)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01781">vp3.c:1781</a></div></div>
<div class="ttc" id="astruct_v_p4_predictor_html_abf9fc5f32baf526f0a6384d5d4e34990"><div class="ttname"><a href="struct_v_p4_predictor.html#abf9fc5f32baf526f0a6384d5d4e34990">VP4Predictor::type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00153">vp3.c:153</a></div></div>
<div class="ttc" id="astruct_huff_entry_html"><div class="ttname"><a href="struct_huff_entry.html">HuffEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="magicyuv_8c_source.html#l00048">magicyuv.c:48</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="avp3dsp_8c_html_af9c93aafef5f83d49cefc541bcd928d3"><div class="ttname"><a href="vp3dsp_8c.html#af9c93aafef5f83d49cefc541bcd928d3">ff_vp3dsp_init</a></div><div class="ttdeci">av_cold void ff_vp3dsp_init(VP3DSPContext *c, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="vp3dsp_8c_source.html#l00445">vp3dsp.c:445</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a30adc75414e0a59ca94aad7a56e17e42"><div class="ttname"><a href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a></div><div class="ttdeci">and forward the test the status of outputs and forward it to the corresponding return FFERROR_NOT_READY If the filters stores internally one or a few frame for some it can consider them to be part of the FIFO and delay acknowledging a status change accordingly Example code</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00176">filter_design.txt:178</a></div></div>
<div class="ttc" id="aget__bits_8h_html_ae49242b74f82c369619336d05d1b2484"><div class="ttname"><a href="get__bits_8h.html#ae49242b74f82c369619336d05d1b2484">show_bits</a></div><div class="ttdeci">static unsigned int show_bits(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00446">get_bits.h:446</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ab4ca16b0fda02840383d0b6d08a44660"><div class="ttname"><a href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a></div><div class="ttdeci">#define FF_CODEC_CAP_INIT_CLEANUP</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00048">internal.h:48</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea8c3ef0a1eec3cf22756a1323989ff4d8"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea8c3ef0a1eec3cf22756a1323989ff4d8">AV_CODEC_ID_THEORA</a></div><div class="ttdeci">@ AV_CODEC_ID_THEORA</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00079">codec_id.h:79</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="avp3data_8h_html_a72150bce8a859b26285e51d7f4761dcf"><div class="ttname"><a href="vp3data_8h.html#a72150bce8a859b26285e51d7f4761dcf">superblock_run_length_vlc_table</a></div><div class="ttdeci">static const uint16_t superblock_run_length_vlc_table[34][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00098">vp3data.h:98</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a8f10a873a18737e4270044a342f1a8dc"><div class="ttname"><a href="struct_vp3_decode_context.html#a8f10a873a18737e4270044a342f1a8dc">Vp3DecodeContext::huffman_table</a></div><div class="ttdeci">HuffTable huffman_table[5 *16]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00297">vp3.c:297</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba22d5bb0f8e69af3de40db12abdb3e717"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba22d5bb0f8e69af3de40db12abdb3e717">VP4_DC_GOLDEN</a></div><div class="ttdeci">@ VP4_DC_GOLDEN</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00135">vp3.c:135</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ae758ae1b5661c78853c731f1daf0ebb6"><div class="ttname"><a href="struct_vp3_decode_context.html#ae758ae1b5661c78853c731f1daf0ebb6">Vp3DecodeContext::qr_base</a></div><div class="ttdeci">uint16_t qr_base[2][3][64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00229">vp3.c:229</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a45934021f7060895316f3e92a2a437cf"><div class="ttname"><a href="struct_vp3_decode_context.html#a45934021f7060895316f3e92a2a437cf">Vp3DecodeContext::coded_ac_scale_factor</a></div><div class="ttdeci">uint32_t coded_ac_scale_factor[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00225">vp3.c:225</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga0a2b687f9c1c5ed0089b01fd61227108"><div class="ttname"><a href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a></div><div class="ttdeci">void av_frame_unref(AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00553">frame.c:553</a></div></div>
<div class="ttc" id="ax86_2hpeldsp_8h_html"><div class="ttname"><a href="x86_2hpeldsp_8h.html">hpeldsp.h</a></div></div>
<div class="ttc" id="astruct_thread_frame_html"><div class="ttname"><a href="struct_thread_frame.html">ThreadFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2thread_8h_source.html#l00034">thread.h:34</a></div></div>
<div class="ttc" id="amultithreading_8txt_html_a4e871baf97bc0c256543f0fde05c8307"><div class="ttname"><a href="multithreading_8txt.html#a4e871baf97bc0c256543f0fde05c8307">update_thread_context</a></div><div class="ttdeci">the pkt_dts and pkt_pts fields in AVFrame will work as usual Restrictions on codec whose streams don t reset across will not work because their bitstreams cannot be decoded in parallel *The contents of buffers must not be read before as well as code calling up to before the decode process starts Call have update_thread_context() run it in the next thread. Add AV_CODEC_CAP_FRAME_THREADS to the codec capabilities. There will be very little speed gain at this point but it should work. If there are inter-frame dependencies</div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="aallcodecs_8c_html_ae1eb1c1ae7c9e0d5ab9173ae422a1451"><div class="ttname"><a href="allcodecs_8c.html#ae1eb1c1ae7c9e0d5ab9173ae422a1451">ff_theora_decoder</a></div><div class="ttdeci">AVCodec ff_theora_decoder</div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a59fe52f2b0877760ecd29a75485358aa"><div class="ttname"><a href="struct_vp3_decode_context.html#a59fe52f2b0877760ecd29a75485358aa">Vp3DecodeContext::version</a></div><div class="ttdeci">int version</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00170">vp3.c:170</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="amathops_8h_html_a0729a02967b7934643d747721ecdccbb"><div class="ttname"><a href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a></div><div class="ttdeci">const uint8_t ff_zigzag_direct[64]</div><div class="ttdef"><b>Definition:</b> <a href="mathtables_8c_source.html#l00098">mathtables.c:98</a></div></div>
<div class="ttc" id="avp3_8c_html_a726f623ff633b7060a6bbacefe6b5c5a"><div class="ttname"><a href="vp3_8c.html#a726f623ff633b7060a6bbacefe6b5c5a">PL</a></div><div class="ttdeci">#define PL</div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7ae5d6b90d4f36ac68f3a5ef347d930cc9"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7ae5d6b90d4f36ac68f3a5ef347d930cc9">AVCOL_PRI_BT470M</a></div><div class="ttdeci">@ AVCOL_PRI_BT470M</div><div class="ttdoc">also FCC Title 47 Code of Federal Regulations 73.682 (a)(20)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00463">pixfmt.h:463</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="avp3_8c_html_a6da7d4820c3cebbff1c4b21746926831"><div class="ttname"><a href="vp3_8c.html#a6da7d4820c3cebbff1c4b21746926831">free_tables</a></div><div class="ttdeci">static av_cold void free_tables(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00309">vp3.c:309</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_abe964316aaaa61967b012efdcced79c4"><div class="ttname"><a href="struct_a_v_codec_context.html#abe964316aaaa61967b012efdcced79c4">AVCodecContext::extradata</a></div><div class="ttdeci">uint8_t * extradata</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00627">avcodec.h:627</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a808b84ad4c9b783ab2fd7ac72658ad5d"><div class="ttname"><a href="struct_vp3_decode_context.html#a808b84ad4c9b783ab2fd7ac72658ad5d">Vp3DecodeContext::skip_loop_filter</a></div><div class="ttdeci">int skip_loop_filter</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00185">vp3.c:185</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="avp3_8c_html_ab6e6af9d0fd7fbc6f626286d49b22cbd"><div class="ttname"><a href="vp3_8c.html#ab6e6af9d0fd7fbc6f626286d49b22cbd">MODE_INTER_PLUS_MV</a></div><div class="ttdeci">#define MODE_INTER_PLUS_MV</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00071">vp3.c:71</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ad5cf7e6c20f6374a1aae0f25ff1aac29"><div class="ttname"><a href="struct_vp3_decode_context.html#ad5cf7e6c20f6374a1aae0f25ff1aac29">Vp3DecodeContext::fragment_height</a></div><div class="ttdeci">int fragment_height[2]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00212">vp3.c:212</a></div></div>
<div class="ttc" id="astruct_hpel_d_s_p_context_html"><div class="ttname"><a href="struct_hpel_d_s_p_context.html">HpelDSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hpeldsp_8h_source.html#l00045">hpeldsp.h:45</a></div></div>
<div class="ttc" id="avp4data_8h_html_a622b60c898d3eec1cdead921fb988856"><div class="ttname"><a href="vp4data_8h.html#a622b60c898d3eec1cdead921fb988856">vp4_block_pattern_table_selector</a></div><div class="ttdeci">static const uint8_t vp4_block_pattern_table_selector[14]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00086">vp4data.h:86</a></div></div>
<div class="ttc" id="amultithreading_8txt_html_a97c3cac75166393103fbc1594899e0b3"><div class="ttname"><a href="multithreading_8txt.html#a97c3cac75166393103fbc1594899e0b3">ff_thread_finish_setup</a></div><div class="ttdeci">the pkt_dts and pkt_pts fields in AVFrame will work as usual Restrictions on codec whose streams don t reset across will not work because their bitstreams cannot be decoded in parallel *The contents of buffers must not be read before as well as code calling up to before the decode process starts Call ff_thread_finish_setup() afterwards. If some code can 't be moved</div></div>
<div class="ttc" id="avp3_8c_html_a165bd291e719c4542ebcb897b0fa5481"><div class="ttname"><a href="vp3_8c.html#a165bd291e719c4542ebcb897b0fa5481">BLOCK_X</a></div><div class="ttdeci">#define BLOCK_X</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00638">vp3.c:638</a></div></div>
<div class="ttc" id="avp3_8c_html_a81f5937157501f504e36365ec3859c2c"><div class="ttname"><a href="vp3_8c.html#a81f5937157501f504e36365ec3859c2c">HuffTable</a></div><div class="ttdeci">struct HuffTable HuffTable</div></div>
<div class="ttc" id="ax86_2mathops_8h_html"><div class="ttname"><a href="x86_2mathops_8h.html">mathops.h</a></div></div>
<div class="ttc" id="astruct_v_p4_predictor_html"><div class="ttname"><a href="struct_v_p4_predictor.html">VP4Predictor</a></div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00151">vp3.c:151</a></div></div>
<div class="ttc" id="asinewin__tablegen__template_8c_html_a3508a98d3ee7e2c9a4841fe264cf70f7"><div class="ttname"><a href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a></div><div class="ttdeci">#define FF_ARRAY_ELEMS(a)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen__template_8c_source.html#l00038">sinewin_tablegen_template.c:38</a></div></div>
<div class="ttc" id="avp3_8c_html_a541df2513b7fdebf57106cbc565819b1"><div class="ttname"><a href="vp3_8c.html#a541df2513b7fdebf57106cbc565819b1">MODE_COPY</a></div><div class="ttdeci">#define MODE_COPY</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00080">vp3.c:80</a></div></div>
<div class="ttc" id="avp4data_8h_html_a33281ddf3433219f4f7b77e8bf6a6792"><div class="ttname"><a href="vp4data_8h.html#a33281ddf3433219f4f7b77e8bf6a6792">vp4_filter_limit_values</a></div><div class="ttdeci">static const uint8_t vp4_filter_limit_values[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00075">vp4data.h:75</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_a6f234e0cc3f8e214f4934844601ae85c"><div class="ttname"><a href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a></div><div class="ttdeci">int ff_set_sar(AVCodecContext *avctx, AVRational sar)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00121">utils.c:121</a></div></div>
<div class="ttc" id="avp3_8c_html_a1372f58090769325a939bc636c4bd8e6"><div class="ttname"><a href="vp3_8c.html#a1372f58090769325a939bc636c4bd8e6">MODE_GOLDEN_MV</a></div><div class="ttdeci">#define MODE_GOLDEN_MV</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00075">vp3.c:75</a></div></div>
<div class="ttc" id="avp3_8c_html_afb7cd1185ebdb2dffaf434b5f5e4ea4b"><div class="ttname"><a href="vp3_8c.html#afb7cd1185ebdb2dffaf434b5f5e4ea4b">FRAGMENT_PIXELS</a></div><div class="ttdeci">#define FRAGMENT_PIXELS</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00051">vp3.c:51</a></div></div>
<div class="ttc" id="astruct_huff_entry_html_a2dc864c57b854d59ef6a30e171f43010"><div class="ttname"><a href="struct_huff_entry.html#a2dc864c57b854d59ef6a30e171f43010">HuffEntry::sym</a></div><div class="ttdeci">uint8_t sym</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00159">vp3.c:159</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a07a24ba5add0ae4bfdf7e4004f234df7"><div class="ttname"><a href="struct_vp3_decode_context.html#a07a24ba5add0ae4bfdf7e4004f234df7">Vp3DecodeContext::macroblock_height</a></div><div class="ttdeci">int macroblock_height</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00204">vp3.c:204</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a8c04c573bc3c94cbebcb6d7269bf84e1"><div class="ttname"><a href="struct_vp3_decode_context.html#a8c04c573bc3c94cbebcb6d7269bf84e1">Vp3DecodeContext::total_num_coded_frags</a></div><div class="ttdeci">int total_num_coded_frags</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00259">vp3.c:259</a></div></div>
<div class="ttc" id="avp3_8c_html_af85f6189e7e1dea8c1cf77bd0b1ad1c5"><div class="ttname"><a href="vp3_8c.html#af85f6189e7e1dea8c1cf77bd0b1ad1c5">vp3_draw_horiz_band</a></div><div class="ttdeci">static void vp3_draw_horiz_band(Vp3DecodeContext *s, int y)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01893">vp3.c:1893</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ae931860199d641514468533df0a2b4d6"><div class="ttname"><a href="struct_vp3_decode_context.html#ae931860199d641514468533df0a2b4d6">Vp3DecodeContext::vp3dsp</a></div><div class="ttdeci">VP3DSPContext vp3dsp</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00181">vp3.c:181</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffaef6df526ade7e565876d539b34151368"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffaef6df526ade7e565876d539b34151368">AVCHROMA_LOC_CENTER</a></div><div class="ttdeci">@ AVCHROMA_LOC_CENTER</div><div class="ttdoc">MPEG-1 4:2:0, JPEG 4:2:0, H.263 4:2:0.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00608">pixfmt.h:608</a></div></div>
<div class="ttc" id="avp4data_8h_html_aef4f00c19fad9e675b436765aefbc959"><div class="ttname"><a href="vp4data_8h.html#aef4f00c19fad9e675b436765aefbc959">vp4_generic_dequant</a></div><div class="ttdeci">static const uint8_t vp4_generic_dequant[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00031">vp4data.h:31</a></div></div>
<div class="ttc" id="avp3data_8h_html_a11110ecaf0b43546f4a8ea9c91c86385"><div class="ttname"><a href="vp3data_8h.html#a11110ecaf0b43546f4a8ea9c91c86385">zero_run_get_bits</a></div><div class="ttdeci">static const uint8_t zero_run_get_bits[32]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00214">vp3data.h:214</a></div></div>
<div class="ttc" id="avp3_8c_html_af4cce1da031d8c09f4632713a7d06c57"><div class="ttname"><a href="vp3_8c.html#af4cce1da031d8c09f4632713a7d06c57">await_reference_row</a></div><div class="ttdeci">static void await_reference_row(Vp3DecodeContext *s, Vp3Fragment *fragment, int motion_y, int y)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01935">vp3.c:1935</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a36a963bf3fe9b696821e0a03941e9a16"><div class="ttname"><a href="struct_vp3_decode_context.html#a36a963bf3fe9b696821e0a03941e9a16">Vp3DecodeContext::superblock_run_length_vlc</a></div><div class="ttdeci">VLC superblock_run_length_vlc</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00273">vp3.c:273</a></div></div>
<div class="ttc" id="aindeo3_8c_html_a3975788f2e43d27c415baaf1651292bf"><div class="ttname"><a href="indeo3_8c.html#a3975788f2e43d27c415baaf1651292bf">output_plane</a></div><div class="ttdeci">static void output_plane(const Plane *plane, int buf_sel, uint8_t *dst, ptrdiff_t dst_pitch, int dst_height)</div><div class="ttdef"><b>Definition:</b> <a href="indeo3_8c_source.html#l01025">indeo3.c:1025</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55baa93edb4ea64baa635b5b5f9959a8feff"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa93edb4ea64baa635b5b5f9959a8feff">VP4_DC_INTRA</a></div><div class="ttdeci">@ VP4_DC_INTRA</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00133">vp3.c:133</a></div></div>
<div class="ttc" id="avp3data_8h_html_ac0ab248289e60e0afca450b621763327"><div class="ttname"><a href="vp3data_8h.html#ac0ab248289e60e0afca450b621763327">vp31_inter_dequant</a></div><div class="ttdeci">static const uint8_t vp31_inter_dequant[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00054">vp3data.h:54</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a5527d3409acec6314accd7ac919df6b6"><div class="ttname"><a href="struct_vp3_decode_context.html#a5527d3409acec6314accd7ac919df6b6">Vp3DecodeContext::fragment_start</a></div><div class="ttdeci">int fragment_start[3]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00215">vp3.c:215</a></div></div>
<div class="ttc" id="avf__mcdeint_8c_html_a0b90bc971fe5188fc4d32fe8177a64a5"><div class="ttname"><a href="vf__mcdeint_8c.html#a0b90bc971fe5188fc4d32fe8177a64a5">temp</a></div><div class="ttdeci">else temp</div><div class="ttdef"><b>Definition:</b> <a href="vf__mcdeint_8c_source.html#l00256">vf_mcdeint.c:256</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ae2451351d55778469bd88a2fd5cba689"><div class="ttname"><a href="struct_vp3_decode_context.html#ae2451351d55778469bd88a2fd5cba689">Vp3DecodeContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00171">vp3.c:171</a></div></div>
<div class="ttc" id="avp4data_8h_html_abba09903a7b0cc703dc31246889c5bf5"><div class="ttname"><a href="vp4data_8h.html#abba09903a7b0cc703dc31246889c5bf5">vp4_block_pattern_vlc</a></div><div class="ttdeci">static const uint8_t vp4_block_pattern_vlc[2][14][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00090">vp4data.h:90</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_afbca6468352e251ae33ab9de454f0e8e"><div class="ttname"><a href="struct_vp3_decode_context.html#afbca6468352e251ae33ab9de454f0e8e">Vp3DecodeContext::vp4_mv_vlc</a></div><div class="ttdeci">VLC vp4_mv_vlc[2][7]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00278">vp3.c:278</a></div></div>
<div class="ttc" id="axiph_8c_html_a3c4ba1310b067a4d8a0326e393a99cd4"><div class="ttname"><a href="xiph_8c.html#a3c4ba1310b067a4d8a0326e393a99cd4">avpriv_split_xiph_headers</a></div><div class="ttdeci">int avpriv_split_xiph_headers(const uint8_t *extradata, int extradata_size, int first_header_size, const uint8_t *header_start[3], int header_len[3])</div><div class="ttdef"><b>Definition:</b> <a href="xiph_8c_source.html#l00024">xiph.c:24</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a">AV_PIX_FMT_YUV444P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV444P</div><div class="ttdoc">planar YUV 4:4:4, 24bpp, (1 Cr &amp; Cb sample per 1x1 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00071">pixfmt.h:71</a></div></div>
<div class="ttc" id="avp3_8c_html_ac7bf88d39f61f00fbe22e92b17804d68"><div class="ttname"><a href="vp3_8c.html#ac7bf88d39f61f00fbe22e92b17804d68">MODE_INTER_NO_MV</a></div><div class="ttdeci">#define MODE_INTER_NO_MV</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00069">vp3.c:69</a></div></div>
<div class="ttc" id="avp3_8c_html_a1a90e6facecd6df250aab542e9d4d339"><div class="ttname"><a href="vp3_8c.html#a1a90e6facecd6df250aab542e9d4d339">COMPATIBLE_FRAME</a></div><div class="ttdeci">#define COMPATIBLE_FRAME(x)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01627">vp3.c:1627</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ae3c157e97ff15d46e898a538c6bc7f09"><div class="ttname"><a href="struct_a_v_codec_context.html#ae3c157e97ff15d46e898a538c6bc7f09">AVCodecContext::coded_width</a></div><div class="ttdeci">int coded_width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00714">avcodec.h:714</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_P</div><div class="ttdoc">Predicted.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00275">avutil.h:275</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051">AV_PIX_FMT_YUV422P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV422P</div><div class="ttdoc">planar YUV 4:2:2, 16bpp, (1 Cr &amp; Cb sample per 2x1 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00070">pixfmt.h:70</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ac8b736a8223c5348ad85ffff597401ff"><div class="ttname"><a href="libavcodec_2internal_8h.html#ac8b736a8223c5348ad85ffff597401ff">ff_set_dimensions</a></div><div class="ttdeci">int ff_set_dimensions(AVCodecContext *s, int width, int height)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00106">utils.c:106</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga17ae68044f725fd5ba26c54162b96490"><div class="ttname"><a href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a></div><div class="ttdeci">#define AV_CODEC_FLAG_BITEXACT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00333">avcodec.h:333</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_a133d9f0e29862e9f1726beafc530e052"><div class="ttname"><a href="libavcodec_2internal_8h.html#a133d9f0e29862e9f1726beafc530e052">FF_CODEC_CAP_ALLOCATE_PROGRESS</a></div><div class="ttdeci">#define FF_CODEC_CAP_ALLOCATE_PROGRESS</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00075">internal.h:75</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adb009f1d85ac852f5a0f6da3dd88ba56"><div class="ttname"><a href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a></div><div class="ttdeci">#define avpriv_request_sample(...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00039">tableprint_vlc.h:39</a></div></div>
<div class="ttc" id="astruct_vp3_fragment_html"><div class="ttname"><a href="struct_vp3_fragment.html">Vp3Fragment</a></div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00054">vp3.c:54</a></div></div>
<div class="ttc" id="avp3_8c_html_a203bb281f7fcd4722ca67a165d5bdc0f"><div class="ttname"><a href="vp3_8c.html#a203bb281f7fcd4722ca67a165d5bdc0f">get_eob_run</a></div><div class="ttdeci">static int get_eob_run(GetBitContext *gb, int token)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01132">vp3.c:1132</a></div></div>
<div class="ttc" id="aallcodecs_8c_html_a69bbee04459c2e165735c1b8b8a43592"><div class="ttname"><a href="allcodecs_8c.html#a69bbee04459c2e165735c1b8b8a43592">ff_vp4_decoder</a></div><div class="ttdeci">AVCodec ff_vp4_decoder</div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_aabbbf173f67577b43f7bf4b82f3ab859"><div class="ttname"><a href="struct_vp3_decode_context.html#aabbbf173f67577b43f7bf4b82f3ab859">Vp3DecodeContext::fragment_count</a></div><div class="ttdeci">int fragment_count</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00210">vp3.c:210</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0425c77b3d06d71e5db88b1d7e1b37f2"><div class="ttname"><a href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">AVCodecContext::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00721">avcodec.h:736</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="amacros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="avp3data_8h_html_a2c7703761c1103a798d66f0c70a23434"><div class="ttname"><a href="vp3data_8h.html#a2c7703761c1103a798d66f0c70a23434">vp31_filter_limit_values</a></div><div class="ttdeci">static const uint8_t vp31_filter_limit_values[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00087">vp3data.h:87</a></div></div>
<div class="ttc" id="avp3_8c_html_a17c9077340e1d53413bfb31620054ab2"><div class="ttname"><a href="vp3_8c.html#a17c9077340e1d53413bfb31620054ab2">vp3_decode_init</a></div><div class="ttdeci">static av_cold int vp3_decode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l02326">vp3.c:2326</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a7a1d246aa731d071fe1d417ab20adee3"><div class="ttname"><a href="struct_vp3_decode_context.html#a7a1d246aa731d071fe1d417ab20adee3">Vp3DecodeContext::c_macroblock_width</a></div><div class="ttdeci">int c_macroblock_width</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00206">vp3.c:206</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ab9d37988ed4af177ef02b0b2decabf2b"><div class="ttname"><a href="struct_vp3_decode_context.html#ab9d37988ed4af177ef02b0b2decabf2b">Vp3DecodeContext::dct_tokens</a></div><div class="ttdeci">int16_t * dct_tokens[3][64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00248">vp3.c:248</a></div></div>
<div class="ttc" id="avideodsp_8h_html"><div class="ttname"><a href="videodsp_8h.html">videodsp.h</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_acccddd7d070c02d9a640b2b5d19c8614"><div class="ttname"><a href="struct_vp3_decode_context.html#acccddd7d070c02d9a640b2b5d19c8614">Vp3DecodeContext::mode_code_vlc</a></div><div class="ttdeci">VLC mode_code_vlc</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00276">vp3.c:276</a></div></div>
<div class="ttc" id="avp3data_8h_html_a6ca9f2eabb03975b4a6d41868b31b778"><div class="ttname"><a href="vp3data_8h.html#a6ca9f2eabb03975b4a6d41868b31b778">vp31_dc_scale_factor</a></div><div class="ttdeci">static const uint8_t vp31_dc_scale_factor[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00065">vp3data.h:65</a></div></div>
<div class="ttc" id="aimgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga01fbdf31e076d8902d8f4118c0aea6ea"><div class="ttname"><a href="group__lavc__core.html#ga01fbdf31e076d8902d8f4118c0aea6ea">AV_CODEC_CAP_DRAW_HORIZ_BAND</a></div><div class="ttdeci">#define AV_CODEC_CAP_DRAW_HORIZ_BAND</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00044">codec.h:44</a></div></div>
<div class="ttc" id="avp3_8c_html_a0227d0cc568c8fb3a3763164ffad0405"><div class="ttname"><a href="vp3_8c.html#a0227d0cc568c8fb3a3763164ffad0405">unpack_block_qpis</a></div><div class="ttdeci">static int unpack_block_qpis(Vp3DecodeContext *s, GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01090">vp3.c:1090</a></div></div>
<div class="ttc" id="avp3_8c_html_aa2b40fffa7c30c71ebb21cf519c29be7"><div class="ttname"><a href="vp3_8c.html#aa2b40fffa7c30c71ebb21cf519c29be7">vp3_decode_end</a></div><div class="ttdeci">static av_cold int vp3_decode_end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00337">vp3.c:337</a></div></div>
<div class="ttc" id="avf__owdenoise_8c_html_a35c8a1e85abdf2de13b1be2fe51f293b"><div class="ttname"><a href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a></div><div class="ttdeci">static const double coeff[2][5]</div><div class="ttdef"><b>Definition:</b> <a href="vf__owdenoise_8c_source.html#l00072">vf_owdenoise.c:72</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a17afa58b2bc574dedcd1cc02e1fdf165"><div class="ttname"><a href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a></div><div class="ttdeci">The exact code depends on how similar the blocks are and how related they are to the block</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00207">filter_design.txt:207</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="avp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="avp4data_8h_html_a38ecba45ab1a305e14cce15f239cb070"><div class="ttname"><a href="vp4data_8h.html#a38ecba45ab1a305e14cce15f239cb070">vp4_uv_dc_scale_factor</a></div><div class="ttdeci">static const uint8_t vp4_uv_dc_scale_factor[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00053">vp4data.h:53</a></div></div>
<div class="ttc" id="avp3_8c_html_a7fca9a5d85722c7fde0906432424cede"><div class="ttname"><a href="vp3_8c.html#a7fca9a5d85722c7fde0906432424cede">MAXIMUM_LONG_BIT_RUN</a></div><div class="ttdeci">#define MAXIMUM_LONG_BIT_RUN</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00067">vp3.c:67</a></div></div>
<div class="ttc" id="astruct_v_p3_d_s_p_context_html"><div class="ttname"><a href="struct_v_p3_d_s_p_context.html">VP3DSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="vp3dsp_8h_source.html#l00025">vp3dsp.h:25</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_adc6e285198b0ed64566343a33159d9bd"><div class="ttname"><a href="struct_vp3_decode_context.html#adc6e285198b0ed64566343a33159d9bd">Vp3DecodeContext::idct_scantable</a></div><div class="ttdeci">uint8_t idct_scantable[64]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00178">vp3.c:178</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ga3a867b6180ddad1e0c382ef0c5940b8e"><div class="ttname"><a href="group__lavu__picture.html#ga3a867b6180ddad1e0c382ef0c5940b8e">av_image_check_size</a></div><div class="ttdeci">int av_image_check_size(unsigned int w, unsigned int h, int log_offset, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="imgutils_8c_source.html#l00317">imgutils.c:317</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a7fa7d5966a3abc8a8b16e0752a94dc82"><div class="ttname"><a href="struct_vp3_decode_context.html#a7fa7d5966a3abc8a8b16e0752a94dc82">Vp3DecodeContext::num_kf_coded_fragment</a></div><div class="ttdeci">int num_kf_coded_fragment[3]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00267">vp3.c:267</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a7749c8a2697857f291299c941a67b08b"><div class="ttname"><a href="struct_vp3_decode_context.html#a7749c8a2697857f291299c941a67b08b">Vp3DecodeContext::c_macroblock_height</a></div><div class="ttdeci">int c_macroblock_height</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00207">vp3.c:207</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ac409df5775bcfc557c12c8a67493d7e3"><div class="ttname"><a href="struct_vp3_decode_context.html#ac409df5775bcfc557c12c8a67493d7e3">Vp3DecodeContext::nkf_coded_fragment_list</a></div><div class="ttdeci">int * nkf_coded_fragment_list</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00266">vp3.c:266</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_abf80d44d82d0067d5e7b6d20eb19fa77"><div class="ttname"><a href="struct_vp3_decode_context.html#abf80d44d82d0067d5e7b6d20eb19fa77">Vp3DecodeContext::macroblock_count</a></div><div class="ttdeci">int macroblock_count</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00202">vp3.c:202</a></div></div>
<div class="ttc" id="avp3data_8h_html_ade191a5a13e379b147c83578327012a5"><div class="ttname"><a href="vp3data_8h.html#ade191a5a13e379b147c83578327012a5">coeff_get_bits</a></div><div class="ttdeci">static const uint8_t coeff_get_bits[32]</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00222">vp3data.h:222</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ac6a9abe6525f329c5ebaf050b27077b0"><div class="ttname"><a href="struct_vp3_decode_context.html#ac6a9abe6525f329c5ebaf050b27077b0">Vp3DecodeContext::qr_count</a></div><div class="ttdeci">uint8_t qr_count[2][3]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00227">vp3.c:227</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8cd8caa7d40319324ce3d879a2edbd9f"><div class="ttname"><a href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">AVCodecContext::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1154</a></div></div>
<div class="ttc" id="avp4data_8h_html_acde71740b110e8ab6fcbeea3b564fe9b"><div class="ttname"><a href="vp4data_8h.html#acde71740b110e8ab6fcbeea3b564fe9b">vp4_mv_vlc</a></div><div class="ttdeci">static const uint16_t vp4_mv_vlc[2][7][63][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp4data_8h_source.html#l00112">vp4data.h:112</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a50601ce8cbe5b6448d8176c1b2c7e9db"><div class="ttname"><a href="struct_vp3_decode_context.html#a50601ce8cbe5b6448d8176c1b2c7e9db">Vp3DecodeContext::yuv_macroblock_count</a></div><div class="ttdeci">int yuv_macroblock_count</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00208">vp3.c:208</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_aef880e7e10ff28cdf3d4d231af54d458"><div class="ttname"><a href="struct_vp3_decode_context.html#aef880e7e10ff28cdf3d4d231af54d458">Vp3DecodeContext::last_qps</a></div><div class="ttdeci">int last_qps[3]</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00189">vp3.c:189</a></div></div>
<div class="ttc" id="avp3_8c_html_a2e636d1951c3f11a2d02f55a173fb523"><div class="ttname"><a href="vp3_8c.html#a2e636d1951c3f11a2d02f55a173fb523">TOKEN_EOB</a></div><div class="ttdeci">#define TOKEN_EOB(eob_run)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00250">vp3.c:250</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_a49b2350bb028506a0a6b7727f4ec1283"><div class="ttname"><a href="struct_vp3_decode_context.html#a49b2350bb028506a0a6b7727f4ec1283">Vp3DecodeContext::y_superblock_height</a></div><div class="ttdeci">int y_superblock_height</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00193">vp3.c:193</a></div></div>
<div class="ttc" id="astruct_vp3_decode_context_html_ad869984cd7296113ee1540a242dd57d1"><div class="ttname"><a href="struct_vp3_decode_context.html#ad869984cd7296113ee1540a242dd57d1">Vp3DecodeContext::y_superblock_width</a></div><div class="ttdeci">int y_superblock_width</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l00192">vp3.c:192</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
