<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/qcelpdec.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">qcelpdec.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qcelpdec_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * QCELP decoder</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2007 Reynaldo H. Verdejo Pinochet</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="channel__layout_8h.html">libavutil/channel_layout.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="float__dsp_8h.html">libavutil/float_dsp.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="get__bits_8h.html">get_bits.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qcelpdata_8h.html">qcelpdata.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="celp__filters_8h.html">celp_filters.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="acelp__filters_8h.html">acelp_filters.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="acelp__vectors_8h.html">acelp_vectors.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lsp_8h.html">lsp.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534">   44</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">   45</a></span>&#160;    <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a> = -1,    </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">   46</a></span>&#160;    <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a>,</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">   47</a></span>&#160;    <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a>,</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">   48</a></span>&#160;    <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a>,</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">   49</a></span>&#160;    <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">RATE_HALF</a>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a405ee677a1491e18981d101704204ce0">RATE_FULL</a></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a405ee677a1491e18981d101704204ce0">   51</a></span>&#160;} <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534">qcelp_packet_rate</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html">   53</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> {</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#aa40cd7bb85f37bdea26323f0157239b3">   54</a></span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a>     <a class="code" href="struct_q_c_e_l_p_context.html#aa40cd7bb85f37bdea26323f0157239b3">gb</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">   55</a></span>&#160;    <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534">qcelp_packet_rate</a> <a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">   56</a></span>&#160;    <a class="code" href="struct_q_c_e_l_p_frame.html">QCELPFrame</a>        <a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>;    </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">   58</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">erasure_count</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#ac5535bfba93600781b3fdd89580ee0ae">   59</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="struct_q_c_e_l_p_context.html#ac5535bfba93600781b3fdd89580ee0ae">octave_count</a>;      </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">   60</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">prev_lspf</a>[10];</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a63e239cd1e6a1d1cd0398779f156ad65">   61</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#a63e239cd1e6a1d1cd0398779f156ad65">predictor_lspf</a>[10];</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#afe25a09d004f732cd292e59a3335f68d">   62</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#afe25a09d004f732cd292e59a3335f68d">pitch_synthesis_filter_mem</a>[303];</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a8a9fab0da6208671d9d438ddacf9fd0a">   63</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#a8a9fab0da6208671d9d438ddacf9fd0a">pitch_pre_filter_mem</a>[303];</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a45120d43f46bbe4e756f41fb3236168e">   64</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#a45120d43f46bbe4e756f41fb3236168e">rnd_fir_filter_mem</a>[180];</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a226e0605aa155e8755699cb4ff3e9c2a">   65</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#a226e0605aa155e8755699cb4ff3e9c2a">formant_mem</a>[170];</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a1d52c73dcf052f1d5eae44dc64ef0174">   66</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#a1d52c73dcf052f1d5eae44dc64ef0174">last_codebook_gain</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">   67</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">prev_g1</a>[2];</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a4fb5caea83ed6db0ce2ff37062561468">   68</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_q_c_e_l_p_context.html#a4fb5caea83ed6db0ce2ff37062561468">prev_bitrate</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">   69</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>[4];</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#ad630aa1849073c14ee553cdcb69a9b39">   70</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="struct_q_c_e_l_p_context.html#ad630aa1849073c14ee553cdcb69a9b39">pitch_lag</a>[4];</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#af36bf14413eafd50ca2336df2349fbab">   71</a></span>&#160;    uint16_t <a class="code" href="struct_q_c_e_l_p_context.html#af36bf14413eafd50ca2336df2349fbab">first16bits</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a6c6b8428fb09cf6d117f07bbec2226ff">   72</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="struct_q_c_e_l_p_context.html#a6c6b8428fb09cf6d117f07bbec2226ff">warned_buf_mismatch_bitrate</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">/* postfilter */</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a5bb2e8fd7d95176ef7ba3054b2d930de">   75</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#a5bb2e8fd7d95176ef7ba3054b2d930de">postfilter_synth_mem</a>[10];</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#ae93c80377eeb5657bfb8b38603475356">   76</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#ae93c80377eeb5657bfb8b38603475356">postfilter_agc_mem</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="struct_q_c_e_l_p_context.html#a2f428372a4dbc5b062d75808eb019af6">   77</a></span>&#160;    <span class="keywordtype">float</span>    <a class="code" href="struct_q_c_e_l_p_context.html#a2f428372a4dbc5b062d75808eb019af6">postfilter_tilt_mem</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#ad75ed5bd999e57dd2d38082f9ab6b768">   78</a></span>&#160;} <a class="code" href="qcelpdec_8c.html#ad75ed5bd999e57dd2d38082f9ab6b768">QCELPContext</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a68ebdbcd9c936f4ed83ba68ccd59b281">   85</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="qcelpdec_8c.html#a68ebdbcd9c936f4ed83ba68ccd59b281">qcelp_decode_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> *q = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a>       = 1;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">channel_layout</a> = <a class="code" href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">sample_fmt</a>     = <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">prev_lspf</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) / 11.0;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a2b1e9b5c1e0486140f245aac480ead08">  111</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="qcelpdec_8c.html#a2b1e9b5c1e0486140f245aac480ead08">decode_lspf</a>(<a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> *q, <span class="keywordtype">float</span> *lspf)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;{</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">float</span> tmp_lspf, <a class="code" href="vf__deshake__opencl_8c.html#a32fee6ebcc3bc066f425852915a5bed6">smooth</a>, erasure_coeff;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> *predictors;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a> || q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        predictors = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a4fb5caea83ed6db0ce2ff37062561468">prev_bitrate</a> != <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a> &amp;&amp;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                     q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a4fb5caea83ed6db0ce2ff37062561468">prev_bitrate</a> != <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a> ? q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">prev_lspf</a></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                              : q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a63e239cd1e6a1d1cd0398779f156ad65">predictor_lspf</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a>) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ac5535bfba93600781b3fdd89580ee0ae">octave_count</a>++;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a63e239cd1e6a1d1cd0398779f156ad65">predictor_lspf</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                             lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a95f45fecfa6f1938d70203c8cf05768e">lspv</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] ?  <a class="code" href="qcelpdata_8h.html#a548fead816489780430471032773134d">QCELP_LSP_SPREAD_FACTOR</a></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                                         : -<a class="code" href="qcelpdata_8h.html#a548fead816489780430471032773134d">QCELP_LSP_SPREAD_FACTOR</a>) +</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                        predictors[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="qcelpdata_8h.html#a978d81223cc7325124308ce959349102">QCELP_LSP_OCTAVE_PREDICTOR</a>   +</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                        (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) * ((1 - <a class="code" href="qcelpdata_8h.html#a978d81223cc7325124308ce959349102">QCELP_LSP_OCTAVE_PREDICTOR</a>) / 11);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <a class="code" href="vf__deshake__opencl_8c.html#a32fee6ebcc3bc066f425852915a5bed6">smooth</a> = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ac5535bfba93600781b3fdd89580ee0ae">octave_count</a> &lt; 10 ? .875 : 0.1;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            erasure_coeff = <a class="code" href="qcelpdata_8h.html#a978d81223cc7325124308ce959349102">QCELP_LSP_OCTAVE_PREDICTOR</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">erasure_count</a> &gt; 1)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                erasure_coeff *= q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">erasure_count</a> &lt; 4 ? 0.9 : 0.7;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a63e239cd1e6a1d1cd0398779f156ad65">predictor_lspf</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                             lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) * (1 - erasure_coeff) / 11 +</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                       erasure_coeff * predictors[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <a class="code" href="vf__deshake__opencl_8c.html#a32fee6ebcc3bc066f425852915a5bed6">smooth</a> = 0.125;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">// Check the stability of the LSP frequencies.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        lspf[0] = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(lspf[0], <a class="code" href="qcelpdata_8h.html#a548fead816489780430471032773134d">QCELP_LSP_SPREAD_FACTOR</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] + <a class="code" href="qcelpdata_8h.html#a548fead816489780430471032773134d">QCELP_LSP_SPREAD_FACTOR</a>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        lspf[9] = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(lspf[9], 1.0 - <a class="code" href="qcelpdata_8h.html#a548fead816489780430471032773134d">QCELP_LSP_SPREAD_FACTOR</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 9; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1], lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - <a class="code" href="qcelpdata_8h.html#a548fead816489780430471032773134d">QCELP_LSP_SPREAD_FACTOR</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">// Low-pass filter the LSP frequencies.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="acelp__vectors_8c.html#ae6f91c4819ad805fec298b39b860f2aa">ff_weighted_vector_sumf</a>(lspf, lspf, q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">prev_lspf</a>, <a class="code" href="vf__deshake__opencl_8c.html#a32fee6ebcc3bc066f425852915a5bed6">smooth</a>, 1.0 - <a class="code" href="vf__deshake__opencl_8c.html#a32fee6ebcc3bc066f425852915a5bed6">smooth</a>, 10);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ac5535bfba93600781b3fdd89580ee0ae">octave_count</a> = 0;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        tmp_lspf = 0.0;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            lspf[2 * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 0] = tmp_lspf += <a class="code" href="qcelpdata_8h.html#a53fdea2720d3ee11511954b8c236eada">qcelp_lspvq</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a95f45fecfa6f1938d70203c8cf05768e">lspv</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]][0] * 0.0001;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            lspf[2 * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] = tmp_lspf += <a class="code" href="qcelpdata_8h.html#a53fdea2720d3ee11511954b8c236eada">qcelp_lspvq</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a95f45fecfa6f1938d70203c8cf05768e">lspv</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]][1] * 0.0001;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">// Check for badly received packets.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a>) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">if</span> (lspf[9] &lt;= .70 || lspf[9] &gt;= .97)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cuda__runtime_8h.html#a7a87cd25426a228ce8ecbef48ab00de8">fabs</a>(lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2]) &lt; .08)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">if</span> (lspf[9] &lt;= .66 || lspf[9] &gt;= .985)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cuda__runtime_8h.html#a7a87cd25426a228ce8ecbef48ab00de8">fabs</a>(lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 4]) &lt; .0931)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a90c99dea549bc832262b3e3887521c1b">  195</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcelpdec_8c.html#a90c99dea549bc832262b3e3887521c1b">decode_gain_and_index</a>(<a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> *q, <span class="keywordtype">float</span> *gain)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, subframes_count, g1[16];</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">float</span> slope;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> &gt;= <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a>) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">switch</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a>) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a405ee677a1491e18981d101704204ce0">RATE_FULL</a>: subframes_count = 16; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">RATE_HALF</a>: subframes_count =  4; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">default</span>:        subframes_count =  5;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; subframes_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            g1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 4 * q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a314759be0f1a1072a14e9d97496aff29">cbgain</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a405ee677a1491e18981d101704204ce0">RATE_FULL</a> &amp;&amp; !((<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) &amp; 3)) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                g1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += av_clip((g1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] + g1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2] + g1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 3]) / 3 - 6, 0, 32);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="qcelpdata_8h.html#a1b97d2a58c1079bd1b903f6f0af616b3">qcelp_g12ga</a>[g1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a46e7378d0aafabc1395526a69c3e5b96">cbsign</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = -gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#accb48607050863574407f80b78ae5728">cindex</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#accb48607050863574407f80b78ae5728">cindex</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - 89) &amp; 127;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">prev_g1</a>[0]         = g1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">prev_g1</a>[1]         = g1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a1d52c73dcf052f1d5eae44dc64ef0174">last_codebook_gain</a> = <a class="code" href="qcelpdata_8h.html#a1b97d2a58c1079bd1b903f6f0af616b3">qcelp_g12ga</a>[g1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1]];</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a>) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="comment">// Provide smoothing of the unvoiced excitation energy.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            gain[7] =       gain[4];</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            gain[6] = 0.4 * gain[3] + 0.6 * gain[4];</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            gain[5] =       gain[3];</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            gain[4] = 0.8 * gain[2] + 0.2 * gain[3];</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            gain[3] = 0.2 * gain[1] + 0.8 * gain[2];</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            gain[2] =       gain[1];</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            gain[1] = 0.6 * gain[0] + 0.4 * gain[1];</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> != <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a>) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a>) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            g1[0] = 2 * q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a314759be0f1a1072a14e9d97496aff29">cbgain</a>[0] +</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    av_clip((q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">prev_g1</a>[0] + q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">prev_g1</a>[1]) / 2 - 5, 0, 54);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            subframes_count = 8;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            g1[0] = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">prev_g1</a>[1];</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="keywordflow">switch</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">erasure_count</a>) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">case</span> 1 : <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordflow">case</span> 2 : g1[0] -= 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">case</span> 3 : g1[0] -= 2; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">default</span>: g1[0] -= 6;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">if</span> (g1[0] &lt; 0)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                g1[0] = 0;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            subframes_count = 4;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="comment">// This interpolation is done to produce smoother background noise.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        slope = 0.5 * (<a class="code" href="qcelpdata_8h.html#a1b97d2a58c1079bd1b903f6f0af616b3">qcelp_g12ga</a>[g1[0]] - q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a1d52c73dcf052f1d5eae44dc64ef0174">last_codebook_gain</a>) / subframes_count;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= subframes_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a1d52c73dcf052f1d5eae44dc64ef0174">last_codebook_gain</a> + slope * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a1d52c73dcf052f1d5eae44dc64ef0174">last_codebook_gain</a> = gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2];</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">prev_g1</a>[0]         = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">prev_g1</a>[1];</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">prev_g1</a>[1]         = g1[0];</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a503bd2bc310b84ad7d69a1be9f641328">  273</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="qcelpdec_8c.html#a503bd2bc310b84ad7d69a1be9f641328">codebook_sanity_check_for_rate_quarter</a>(<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *cbgain)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>, prev_diff = 0;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> = cbgain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - cbgain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>-1];</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>) &gt; 10)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> - prev_diff) &gt; 12)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        prev_diff = <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#ac274ff348e2df541ef195e9b87826ff0">  309</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcelpdec_8c.html#ac274ff348e2df541ef195e9b87826ff0">compute_svector</a>(<a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> *q, <span class="keyword">const</span> <span class="keywordtype">float</span> *gain,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                            <span class="keywordtype">float</span> *cdn_vector)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    uint16_t cbseed, cindex;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="checkasm_8h.html#a4c65fed18b41fb82eea5bceefdeb5b15">rnd</a>, tmp_gain, fir_filter_value;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">switch</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a>) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a405ee677a1491e18981d101704204ce0">RATE_FULL</a>:</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            tmp_gain = gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="qcelpdata_8h.html#ad65edbe7fd912a273c3ac8a2708d2a41">QCELP_RATE_FULL_CODEBOOK_RATIO</a>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            cindex   = -q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#accb48607050863574407f80b78ae5728">cindex</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 10; j++)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                *cdn_vector++ = tmp_gain *</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                <a class="code" href="qcelpdata_8h.html#a2400d8485d0c0b0505700a0ee464e6f5">qcelp_rate_full_codebook</a>[cindex++ &amp; 127];</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">RATE_HALF</a>:</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            tmp_gain = gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="qcelpdata_8h.html#ace8a6fd72dafc287f446022e20e0e966">QCELP_RATE_HALF_CODEBOOK_RATIO</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            cindex   = -q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#accb48607050863574407f80b78ae5728">cindex</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 40; j++)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                *cdn_vector++ = tmp_gain *</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                                <a class="code" href="qcelpdata_8h.html#a0cbd68ec0d268e7c1d673a5301c84dc7">qcelp_rate_half_codebook</a>[cindex++ &amp; 127];</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a>:</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        cbseed = (0x0003 &amp; q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a95f45fecfa6f1938d70203c8cf05768e">lspv</a>[4]) &lt;&lt; 14 |</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                 (0x003F &amp; q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a95f45fecfa6f1938d70203c8cf05768e">lspv</a>[3]) &lt;&lt;  8 |</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                 (0x0060 &amp; q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a95f45fecfa6f1938d70203c8cf05768e">lspv</a>[2]) &lt;&lt;  1 |</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                 (0x0007 &amp; q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a95f45fecfa6f1938d70203c8cf05768e">lspv</a>[1]) &lt;&lt;  3 |</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                 (0x0038 &amp; q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a95f45fecfa6f1938d70203c8cf05768e">lspv</a>[0]) &gt;&gt;  3;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="checkasm_8h.html#a4c65fed18b41fb82eea5bceefdeb5b15">rnd</a>    = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a45120d43f46bbe4e756f41fb3236168e">rnd_fir_filter_mem</a> + 20;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            tmp_gain = gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (<a class="code" href="qcelpdata_8h.html#a79e0db510526c7cb6bbb63d375a8fd28">QCELP_SQRT1887</a> / 32768.0);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="keywordflow">for</span> (k = 0; k &lt; 20; k++) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                cbseed = 521 * cbseed + 259;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                *<a class="code" href="checkasm_8h.html#a4c65fed18b41fb82eea5bceefdeb5b15">rnd</a>   = (int16_t) cbseed;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    <span class="comment">// FIR filter</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                fir_filter_value = 0.0;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 10; j++)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    fir_filter_value += <a class="code" href="qcelpdata_8h.html#aefaa0bf3762ed5d654a7c4a5d99adc69">qcelp_rnd_fir_coefs</a>[j] *</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                        (<a class="code" href="checkasm_8h.html#a4c65fed18b41fb82eea5bceefdeb5b15">rnd</a>[-j] + <a class="code" href="checkasm_8h.html#a4c65fed18b41fb82eea5bceefdeb5b15">rnd</a>[-20+j]);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                fir_filter_value += <a class="code" href="qcelpdata_8h.html#aefaa0bf3762ed5d654a7c4a5d99adc69">qcelp_rnd_fir_coefs</a>[10] * <a class="code" href="checkasm_8h.html#a4c65fed18b41fb82eea5bceefdeb5b15">rnd</a>[-10];</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                *cdn_vector++     = tmp_gain * fir_filter_value;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <a class="code" href="checkasm_8h.html#a4c65fed18b41fb82eea5bceefdeb5b15">rnd</a>++;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        memcpy(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a45120d43f46bbe4e756f41fb3236168e">rnd_fir_filter_mem</a>, q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a45120d43f46bbe4e756f41fb3236168e">rnd_fir_filter_mem</a> + 160,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;               20 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a>:</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        cbseed = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#af36bf14413eafd50ca2336df2349fbab">first16bits</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            tmp_gain = gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (<a class="code" href="qcelpdata_8h.html#a79e0db510526c7cb6bbb63d375a8fd28">QCELP_SQRT1887</a> / 32768.0);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 20; j++) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                cbseed        = 521 * cbseed + 259;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                *cdn_vector++ = tmp_gain * (int16_t) cbseed;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>:</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        cbseed = -44; <span class="comment">// random codebook index</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            tmp_gain = gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="qcelpdata_8h.html#ad65edbe7fd912a273c3ac8a2708d2a41">QCELP_RATE_FULL_CODEBOOK_RATIO</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 40; j++)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                *cdn_vector++ = tmp_gain *</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                <a class="code" href="qcelpdata_8h.html#a2400d8485d0c0b0505700a0ee464e6f5">qcelp_rate_full_codebook</a>[cbseed++ &amp; 127];</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a>:</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        memset(cdn_vector, 0, 160 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a0cba50007bed438dcfc600d6c79ad55a">  396</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcelpdec_8c.html#a0cba50007bed438dcfc600d6c79ad55a">apply_gain_ctrl</a>(<span class="keywordtype">float</span> *v_out, <span class="keyword">const</span> <span class="keywordtype">float</span> *v_ref, <span class="keyword">const</span> <span class="keywordtype">float</span> *v_in)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 160; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> += 40) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordtype">float</span> res = <a class="code" href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a>(v_ref + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, v_ref + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, 40);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="acelp__vectors_8c.html#a481a48508d8e6261a38b187f78caaea7">ff_scale_vector_to_given_sum_of_squares</a>(v_out + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, v_in + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, res, 40);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a500002d87458db86e3d7f4cab795faf4">  423</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="qcelpdec_8c.html#a500002d87458db86e3d7f4cab795faf4">do_pitchfilter</a>(<span class="keywordtype">float</span> memory[303], <span class="keyword">const</span> <span class="keywordtype">float</span> v_in[160],</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">float</span> gain[4], <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *lag,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> pfrac[4])</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;{</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">float</span> *v_lag, *v_out;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> *v_len;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    v_out = memory + 143; <span class="comment">// Output vector starts at memory[143].</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span> (gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            v_lag = memory + 143 + 40 * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - lag[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">for</span> (v_len = v_in + 40; v_in &lt; v_len; v_in++) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <span class="keywordflow">if</span> (pfrac[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) { <span class="comment">// If it is a fractional lag...</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    <span class="keywordflow">for</span> (j = 0, *v_out = 0.0; j &lt; 4; j++)</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                        *v_out += <a class="code" href="qcelpdata_8h.html#a046d0fca210c6cdfb7c3a314011752a6">qcelp_hammsinc_table</a>[j] *</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                                  (v_lag[j - 4] + v_lag[3 - j]);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    *v_out = *v_lag;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                *v_out = *v_in + gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * *v_out;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                v_lag++;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                v_out++;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            memcpy(v_out, v_in, 40 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            v_in  += 40;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            v_out += 40;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    memmove(memory, memory + 160, 143 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> memory + 143;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#ab3741233ecdf5db940bb749f9e0c840e">  467</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcelpdec_8c.html#ab3741233ecdf5db940bb749f9e0c840e">apply_pitch_filters</a>(<a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> *q, <span class="keywordtype">float</span> *cdn_vector)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> *v_synthesis_filtered, *v_pre_filtered;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> &gt;= <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">RATE_HALF</a> || q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a> ||</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a> &amp;&amp; (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a4fb5caea83ed6db0ce2ff37062561468">prev_bitrate</a> &gt;= <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">RATE_HALF</a>))) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> &gt;= <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">RATE_HALF</a>) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="comment">// Compute gain &amp; lag for the whole frame.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a9e9c9f0f8ad6f8693bb1c9efc6a3e721">plag</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] ? (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#af4bdfb26e57b1d32c2dcf44b65a5b769">pgain</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 1) * 0.25 : 0.0;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad630aa1849073c14ee553cdcb69a9b39">pitch_lag</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a9e9c9f0f8ad6f8693bb1c9efc6a3e721">plag</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 16;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <span class="keywordtype">float</span> max_pitch_gain;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                  <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">erasure_count</a> &lt; 3)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                      max_pitch_gain = 0.9 - 0.3 * (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">erasure_count</a> - 1);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                      max_pitch_gain = 0.0;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                max_pitch_gain = 1.0;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], max_pitch_gain);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            memset(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a2a012717babbf96e34eb7d248dd9534a">pfrac</a>, 0, <span class="keyword">sizeof</span>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a2a012717babbf96e34eb7d248dd9534a">pfrac</a>));</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="comment">// pitch synthesis filter</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        v_synthesis_filtered = <a class="code" href="qcelpdec_8c.html#a500002d87458db86e3d7f4cab795faf4">do_pitchfilter</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afe25a09d004f732cd292e59a3335f68d">pitch_synthesis_filter_mem</a>,</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                              cdn_vector, q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>,</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                              q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad630aa1849073c14ee553cdcb69a9b39">pitch_lag</a>, q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a2a012717babbf96e34eb7d248dd9534a">pfrac</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="comment">// pitch prefilter update</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0.5 * <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 1.0);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        v_pre_filtered       = <a class="code" href="qcelpdec_8c.html#a500002d87458db86e3d7f4cab795faf4">do_pitchfilter</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a8a9fab0da6208671d9d438ddacf9fd0a">pitch_pre_filter_mem</a>,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                                              v_synthesis_filtered,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                                              q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>, q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad630aa1849073c14ee553cdcb69a9b39">pitch_lag</a>,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                                              q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a2a012717babbf96e34eb7d248dd9534a">pfrac</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <a class="code" href="qcelpdec_8c.html#a0cba50007bed438dcfc600d6c79ad55a">apply_gain_ctrl</a>(cdn_vector, v_synthesis_filtered, v_pre_filtered);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        memcpy(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afe25a09d004f732cd292e59a3335f68d">pitch_synthesis_filter_mem</a>,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;               cdn_vector + 17, 143 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        memcpy(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a8a9fab0da6208671d9d438ddacf9fd0a">pitch_pre_filter_mem</a>, cdn_vector + 17, 143 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        memset(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>, 0, <span class="keyword">sizeof</span>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">pitch_gain</a>));</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        memset(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad630aa1849073c14ee553cdcb69a9b39">pitch_lag</a>,  0, <span class="keyword">sizeof</span>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad630aa1849073c14ee553cdcb69a9b39">pitch_lag</a>));</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a85cae42dccebccd869e871a564001341">  536</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcelpdec_8c.html#a85cae42dccebccd869e871a564001341">lspf2lpc</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *lspf, <span class="keywordtype">float</span> *lpc)</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordtype">double</span> lsp[10];</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordtype">double</span> bandwidth_expansion_coeff = <a class="code" href="qcelpdata_8h.html#a781313a952b42c0ea4b5c7135cf6db84">QCELP_BANDWIDTH_EXPANSION_COEFF</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        lsp[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = cos(<a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * lspf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="lsp_8c.html#a06d95f875a659ddbac7f219329df5a4a">ff_acelp_lspd2lpc</a>(lsp, lpc, 5);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        lpc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]                    *= bandwidth_expansion_coeff;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        bandwidth_expansion_coeff *= <a class="code" href="qcelpdata_8h.html#a781313a952b42c0ea4b5c7135cf6db84">QCELP_BANDWIDTH_EXPANSION_COEFF</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;}</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a719e1eb77e8b7d1f6c9cc7b8d8ecfac9">  564</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcelpdec_8c.html#a719e1eb77e8b7d1f6c9cc7b8d8ecfac9">interpolate_lpc</a>(<a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> *q, <span class="keyword">const</span> <span class="keywordtype">float</span> *curr_lspf,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                            <span class="keywordtype">float</span> *lpc, <span class="keyword">const</span> <span class="keywordtype">int</span> subframe_num)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordtype">float</span> interpolated_lspf[10];</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> &gt;= <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a>)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a> = 0.25 * (subframe_num + 1);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a> &amp;&amp; !subframe_num)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a> = 0.625;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a> = 1.0;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a> != 1.0) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="acelp__vectors_8c.html#ae6f91c4819ad805fec298b39b860f2aa">ff_weighted_vector_sumf</a>(interpolated_lspf, curr_lspf, q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">prev_lspf</a>,</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>, 1.0 - <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>, 10);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <a class="code" href="qcelpdec_8c.html#a85cae42dccebccd869e871a564001341">lspf2lpc</a>(interpolated_lspf, lpc);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> &gt;= <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a> ||</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;               (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a> &amp;&amp; !subframe_num))</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="qcelpdec_8c.html#a85cae42dccebccd869e871a564001341">lspf2lpc</a>(curr_lspf, lpc);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a> &amp;&amp; !subframe_num)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <a class="code" href="qcelpdec_8c.html#a85cae42dccebccd869e871a564001341">lspf2lpc</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">prev_lspf</a>, lpc);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a88daa87bb166c8da6a8b9616938c6c4f">  588</a></span>&#160;<span class="keyword">static</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534">qcelp_packet_rate</a> <a class="code" href="qcelpdec_8c.html#a88daa87bb166c8da6a8b9616938c6c4f">buf_size2bitrate</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> buf_size)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;{</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">switch</span> (buf_size) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">case</span> 35: <span class="keywordflow">return</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a405ee677a1491e18981d101704204ce0">RATE_FULL</a>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">case</span> 17: <span class="keywordflow">return</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">RATE_HALF</a>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">case</span>  8: <span class="keywordflow">return</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">case</span>  4: <span class="keywordflow">return</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">case</span>  1: <span class="keywordflow">return</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a41b7829473578b40dfc9b5e0751d8e4c">  613</a></span>&#160;<span class="keyword">static</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534">qcelp_packet_rate</a> <a class="code" href="qcelpdec_8c.html#a41b7829473578b40dfc9b5e0751d8e4c">determine_bitrate</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                           <span class="keyword">const</span> <span class="keywordtype">int</span> buf_size,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **buf)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;{</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534">qcelp_packet_rate</a> <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a> = <a class="code" href="qcelpdec_8c.html#a88daa87bb166c8da6a8b9616938c6c4f">buf_size2bitrate</a>(buf_size)) &gt;= 0) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a> &gt; **buf) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> *q = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">if</span> (!q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a6c6b8428fb09cf6d117f07bbec2226ff">warned_buf_mismatch_bitrate</a>) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                   <span class="stringliteral">&quot;Claimed bitrate and buffer size mismatch.\n&quot;</span>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a6c6b8428fb09cf6d117f07bbec2226ff">warned_buf_mismatch_bitrate</a> = 1;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a> = **buf;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a> &lt; **buf) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                   <span class="stringliteral">&quot;Buffer is too small for the claimed bitrate.\n&quot;</span>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        (*buf)++;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a> = <a class="code" href="qcelpdec_8c.html#a88daa87bb166c8da6a8b9616938c6c4f">buf_size2bitrate</a>(buf_size + 1)) &gt;= 0) {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;               <span class="stringliteral">&quot;Bitrate byte missing, guessing bitrate from packet size.\n&quot;</span>);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a>) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="comment">// FIXME: Remove this warning when tested with samples.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(avctx, <span class="stringliteral">&quot;Blank frame handling&quot;</span>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a51b07ecd6ed4e9abb366c8ca531e590a">  647</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcelpdec_8c.html#a51b07ecd6ed4e9abb366c8ca531e590a">warn_insufficient_frame_quality</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structmessage.html">message</a>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;{</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Frame #%d, IFQ: %s\n&quot;</span>,</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;           avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a9e5a25a530d01c04491216c368a1a04a">frame_number</a>, <a class="code" href="structmessage.html">message</a>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#a511131b972fe20e875420936005fa22c">  654</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcelpdec_8c.html#a511131b972fe20e875420936005fa22c">postfilter</a>(<a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> *q, <span class="keywordtype">float</span> *<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, <span class="keywordtype">float</span> *lpc)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> pow_0_775[10] = {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        0.775000, 0.600625, 0.465484, 0.360750, 0.279582,</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        0.216676, 0.167924, 0.130141, 0.100859, 0.078166</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    }, pow_0_625[10] = {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        0.625000, 0.390625, 0.244141, 0.152588, 0.095367,</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        0.059605, 0.037253, 0.023283, 0.014552, 0.009095</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    };</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordtype">float</span> lpc_s[10], lpc_p[10], pole_out[170], zero_out[160];</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; 10; n++) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        lpc_s[n] = lpc[n] * pow_0_625[n];</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        lpc_p[n] = lpc[n] * pow_0_775[n];</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="celp__filters_8c.html#adb73ab3ce9b95632b89b2c80e45eb190">ff_celp_lp_zero_synthesis_filterf</a>(zero_out, lpc_s,</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                                      q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a226e0605aa155e8755699cb4ff3e9c2a">formant_mem</a> + 10, 160, 10);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    memcpy(pole_out, q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a5bb2e8fd7d95176ef7ba3054b2d930de">postfilter_synth_mem</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 10);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="celp__filters_8c.html#a4b1d7631dad08f69e5047c8e8a7f0ef2">ff_celp_lp_synthesis_filterf</a>(pole_out + 10, lpc_p, zero_out, 160, 10);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    memcpy(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a5bb2e8fd7d95176ef7ba3054b2d930de">postfilter_synth_mem</a>, pole_out + 160, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 10);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="acelp__filters_8c.html#a0d6ae4fe173d5bb07674d64592de1fa2">ff_tilt_compensation</a>(&amp;q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2f428372a4dbc5b062d75808eb019af6">postfilter_tilt_mem</a>, 0.3, pole_out + 10, 160);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="acelp__vectors_8c.html#a23a8e721666ab4afd6e043203d1cf910">ff_adaptive_gain_control</a>(<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, pole_out + 10,</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                             <a class="code" href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a226e0605aa155e8755699cb4ff3e9c2a">formant_mem</a> + 10,</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                                                          q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a226e0605aa155e8755699cb4ff3e9c2a">formant_mem</a> + 10,</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                                                          160),</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                             160, 0.9375, &amp;q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ae93c80377eeb5657bfb8b38603475356">postfilter_agc_mem</a>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;}</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#ac3db6ee692b23a887052855eaeafb65e">  686</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="qcelpdec_8c.html#ac3db6ee692b23a887052855eaeafb65e">qcelp_decode_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>,</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                              <span class="keywordtype">int</span> *got_frame_ptr, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt)</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;{</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordtype">int</span> buf_size       = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="struct_q_c_e_l_p_context.html">QCELPContext</a> *q    = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>     = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordtype">float</span> *outbuffer;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordtype">int</span>   <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordtype">float</span> quantized_lspf[10], lpc[10];</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordtype">float</span> gain[16];</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordtype">float</span> *formant_mem;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="comment">/* get output buffer */</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;nb_samples = 160;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(avctx, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    outbuffer = (<span class="keywordtype">float</span> *)<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0];</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> ((q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> = <a class="code" href="qcelpdec_8c.html#a41b7829473578b40dfc9b5e0751d8e4c">determine_bitrate</a>(avctx, buf_size, &amp;buf)) == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <a class="code" href="qcelpdec_8c.html#a51b07ecd6ed4e9abb366c8ca531e590a">warn_insufficient_frame_quality</a>(avctx, <span class="stringliteral">&quot;Bitrate cannot be determined.&quot;</span>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="keywordflow">goto</span> erasure;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a> &amp;&amp;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#af36bf14413eafd50ca2336df2349fbab">first16bits</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a>(buf)) == 0xFFFF) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <a class="code" href="qcelpdec_8c.html#a51b07ecd6ed4e9abb366c8ca531e590a">warn_insufficient_frame_quality</a>(avctx, <span class="stringliteral">&quot;Bitrate is 1/8 and first 16 bits are on.&quot;</span>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keywordflow">goto</span> erasure;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> &gt; <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a>) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_q_c_e_l_p_bitmap.html">QCELPBitmap</a> *bitmaps     = <a class="code" href="qcelpdata_8h.html#adae600df530cd941e90c2b0a7277beec">qcelp_unpacking_bitmaps_per_rate</a>[q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a>];</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_q_c_e_l_p_bitmap.html">QCELPBitmap</a> *bitmaps_end = <a class="code" href="qcelpdata_8h.html#adae600df530cd941e90c2b0a7277beec">qcelp_unpacking_bitmaps_per_rate</a>[q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a>] +</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                         <a class="code" href="qcelpdata_8h.html#a56ace7ddcd09336b3ae8248baec018fe">qcelp_unpacking_bitmaps_lengths</a>[q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a>];</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *unpacked_data         = (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)&amp;q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a>(&amp;q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#aa40cd7bb85f37bdea26323f0157239b3">gb</a>, buf, buf_size)) &lt; 0)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        memset(&amp;q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_q_c_e_l_p_frame.html">QCELPFrame</a>));</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">for</span> (; bitmaps &lt; bitmaps_end; bitmaps++)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            unpacked_data[bitmaps-&gt;<a class="code" href="struct_q_c_e_l_p_bitmap.html#a694ca3d7eea0718d1ebe97a60728a258">index</a>] |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#aa40cd7bb85f37bdea26323f0157239b3">gb</a>, bitmaps-&gt;<a class="code" href="struct_q_c_e_l_p_bitmap.html#a4c0c2f2892e9a00d55c00e5720ff931c">bitlen</a>) &lt;&lt; bitmaps-&gt;<a class="code" href="struct_q_c_e_l_p_bitmap.html#ad666d990b7e0ea4a1e6623b19ae6750a">bitpos</a>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="comment">// Check for erasures/blanks on rates 1, 1/4 and 1/8.</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a044be253fb352415965540705d5d0bb9">reserved</a>) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            <a class="code" href="qcelpdec_8c.html#a51b07ecd6ed4e9abb366c8ca531e590a">warn_insufficient_frame_quality</a>(avctx, <span class="stringliteral">&quot;Wrong data in reserved frame area.&quot;</span>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="keywordflow">goto</span> erasure;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a> &amp;&amp;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <a class="code" href="qcelpdec_8c.html#a503bd2bc310b84ad7d69a1be9f641328">codebook_sanity_check_for_rate_quarter</a>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a314759be0f1a1072a14e9d97496aff29">cbgain</a>)) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <a class="code" href="qcelpdec_8c.html#a51b07ecd6ed4e9abb366c8ca531e590a">warn_insufficient_frame_quality</a>(avctx, <span class="stringliteral">&quot;Codebook gain sanity check failed.&quot;</span>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="keywordflow">goto</span> erasure;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> &gt;= <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">RATE_HALF</a>) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a2a012717babbf96e34eb7d248dd9534a">pfrac</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp;&amp; q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">frame</a>.<a class="code" href="struct_q_c_e_l_p_frame.html#a9e9c9f0f8ad6f8693bb1c9efc6a3e721">plag</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;= 124) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                    <a class="code" href="qcelpdec_8c.html#a51b07ecd6ed4e9abb366c8ca531e590a">warn_insufficient_frame_quality</a>(avctx, <span class="stringliteral">&quot;Cannot initialize pitch filter.&quot;</span>);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                    <span class="keywordflow">goto</span> erasure;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="qcelpdec_8c.html#a90c99dea549bc832262b3e3887521c1b">decode_gain_and_index</a>(q, gain);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="qcelpdec_8c.html#ac274ff348e2df541ef195e9b87826ff0">compute_svector</a>(q, gain, outbuffer);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="qcelpdec_8c.html#a2b1e9b5c1e0486140f245aac480ead08">decode_lspf</a>(q, quantized_lspf) &lt; 0) {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <a class="code" href="qcelpdec_8c.html#a51b07ecd6ed4e9abb366c8ca531e590a">warn_insufficient_frame_quality</a>(avctx, <span class="stringliteral">&quot;Badly received packets in frame.&quot;</span>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">goto</span> erasure;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <a class="code" href="qcelpdec_8c.html#ab3741233ecdf5db940bb749f9e0c840e">apply_pitch_filters</a>(q, outbuffer);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> == <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;erasure:</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a> = <a class="code" href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">erasure_count</a>++;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <a class="code" href="qcelpdec_8c.html#a90c99dea549bc832262b3e3887521c1b">decode_gain_and_index</a>(q, gain);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <a class="code" href="qcelpdec_8c.html#ac274ff348e2df541ef195e9b87826ff0">compute_svector</a>(q, gain, outbuffer);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <a class="code" href="qcelpdec_8c.html#a2b1e9b5c1e0486140f245aac480ead08">decode_lspf</a>(q, quantized_lspf);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="qcelpdec_8c.html#ab3741233ecdf5db940bb749f9e0c840e">apply_pitch_filters</a>(q, outbuffer);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">erasure_count</a> = 0;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    formant_mem = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a226e0605aa155e8755699cb4ff3e9c2a">formant_mem</a> + 10;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <a class="code" href="qcelpdec_8c.html#a719e1eb77e8b7d1f6c9cc7b8d8ecfac9">interpolate_lpc</a>(q, quantized_lspf, lpc, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <a class="code" href="celp__filters_8c.html#a4b1d7631dad08f69e5047c8e8a7f0ef2">ff_celp_lp_synthesis_filterf</a>(formant_mem, lpc,</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                                     outbuffer + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 40, 40, 10);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        formant_mem += 40;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="comment">// postfilter, as per TIA/EIA/IS-733 2.4.8.6</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <a class="code" href="qcelpdec_8c.html#a511131b972fe20e875420936005fa22c">postfilter</a>(q, outbuffer, lpc);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    memcpy(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a226e0605aa155e8755699cb4ff3e9c2a">formant_mem</a>, q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a226e0605aa155e8755699cb4ff3e9c2a">formant_mem</a> + 160, 10 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    memcpy(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">prev_lspf</a>, quantized_lspf, <span class="keyword">sizeof</span>(q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">prev_lspf</a>));</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a4fb5caea83ed6db0ce2ff37062561468">prev_bitrate</a>  = q-&gt;<a class="code" href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">bitrate</a>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    *got_frame_ptr = 1;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">return</span> buf_size;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;}</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno"><a class="line" href="qcelpdec_8c.html#aef9e23edecfecfd1fe3683df344eeeef">  793</a></span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="qcelpdec_8c.html#aef9e23edecfecfd1fe3683df344eeeef">ff_qcelp_decoder</a> = {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>           = <span class="stringliteral">&quot;qcelp&quot;</span>,</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;QCELP / PureVoice&quot;</span>),</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    .type           = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>,</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    .id             = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac5a616b6750e42680e2ab71c7db317d1">AV_CODEC_ID_QCELP</a>,</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    .init           = <a class="code" href="qcelpdec_8c.html#a68ebdbcd9c936f4ed83ba68ccd59b281">qcelp_decode_init</a>,</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    .decode         = <a class="code" href="qcelpdec_8c.html#ac3db6ee692b23a887052855eaeafb65e">qcelp_decode_frame</a>,</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    .capabilities   = <a class="code" href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a>,</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="qcelpdec_8c.html#ad75ed5bd999e57dd2d38082f9ab6b768">QCELPContext</a>),</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a503bd2bc310b84ad7d69a1be9f641328"><div class="ttname"><a href="qcelpdec_8c.html#a503bd2bc310b84ad7d69a1be9f641328">codebook_sanity_check_for_rate_quarter</a></div><div class="ttdeci">static int codebook_sanity_check_for_rate_quarter(const uint8_t *cbgain)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00273">qcelpdec.c:273</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff"><div class="ttname"><a href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a5115cf8ca0264d0532228e59b8665dff">SILENCE</a></div><div class="ttdeci">@ SILENCE</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00046">qcelpdec.c:46</a></div></div>
<div class="ttc" id="aacelp__vectors_8h_html"><div class="ttname"><a href="acelp__vectors_8h.html">acelp_vectors.h</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_frame_html_a95f45fecfa6f1938d70203c8cf05768e"><div class="ttname"><a href="struct_q_c_e_l_p_frame.html#a95f45fecfa6f1938d70203c8cf05768e">QCELPFrame::lspv</a></div><div class="ttdeci">uint8_t lspv[10]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00060">qcelpdata.h:60</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a53fdea2720d3ee11511954b8c236eada"><div class="ttname"><a href="qcelpdata_8h.html#a53fdea2720d3ee11511954b8c236eada">qcelp_lspvq</a></div><div class="ttdeci">static const qcelp_vector *const qcelp_lspvq[5]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00414">qcelpdata.h:414</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="astructmessage_html"><div class="ttname"><a href="structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="api-threadmessage-test_8c_source.html#l00046">api-threadmessage-test.c:46</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_bitmap_html_a694ca3d7eea0718d1ebe97a60728a258"><div class="ttname"><a href="struct_q_c_e_l_p_bitmap.html#a694ca3d7eea0718d1ebe97a60728a258">QCELPBitmap::index</a></div><div class="ttdeci">uint8_t index</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00077">qcelpdata.h:77</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga53d6da2dcd56f5f87c7afd8b33fa15ba"><div class="ttname"><a href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a></div><div class="ttdeci">#define AV_CH_LAYOUT_MONO</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00090">channel_layout.h:90</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_adae600df530cd941e90c2b0a7277beec"><div class="ttname"><a href="qcelpdata_8h.html#adae600df530cd941e90c2b0a7277beec">qcelp_unpacking_bitmaps_per_rate</a></div><div class="ttdeci">static const QCELPBitmap *const qcelp_unpacking_bitmaps_per_rate[5]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00268">qcelpdata.h:268</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a2400d8485d0c0b0505700a0ee464e6f5"><div class="ttname"><a href="qcelpdata_8h.html#a2400d8485d0c0b0505700a0ee464e6f5">qcelp_rate_full_codebook</a></div><div class="ttdeci">static const int16_t qcelp_rate_full_codebook[128]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00459">qcelpdata.h:459</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a978d81223cc7325124308ce959349102"><div class="ttname"><a href="qcelpdata_8h.html#a978d81223cc7325124308ce959349102">QCELP_LSP_OCTAVE_PREDICTOR</a></div><div class="ttdeci">#define QCELP_LSP_OCTAVE_PREDICTOR</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00541">qcelpdata.h:541</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a68ebdbcd9c936f4ed83ba68ccd59b281"><div class="ttname"><a href="qcelpdec_8c.html#a68ebdbcd9c936f4ed83ba68ccd59b281">qcelp_decode_init</a></div><div class="ttdeci">static av_cold int qcelp_decode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00085">qcelpdec.c:85</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a9e5a25a530d01c04491216c368a1a04a"><div class="ttname"><a href="struct_a_v_codec_context.html#a9e5a25a530d01c04491216c368a1a04a">AVCodecContext::frame_number</a></div><div class="ttdeci">int frame_number</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01217">avcodec.h:1217</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_a6a4c12ef75a81c72f96410e9d1d8c8e9"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a></div><div class="ttdeci">#define AV_RB16</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00053">intreadwrite.h:53</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a7422a34b5b2601e7e2d9d7b54f00d534"><div class="ttname"><a href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534">qcelp_packet_rate</a></div><div class="ttdeci">qcelp_packet_rate</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00044">qcelpdec.c:44</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_ac5535bfba93600781b3fdd89580ee0ae"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#ac5535bfba93600781b3fdd89580ee0ae">QCELPContext::octave_count</a></div><div class="ttdeci">uint8_t octave_count</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00059">qcelpdec.c:59</a></div></div>
<div class="ttc" id="acelp__filters_8c_html_a4b1d7631dad08f69e5047c8e8a7f0ef2"><div class="ttname"><a href="celp__filters_8c.html#a4b1d7631dad08f69e5047c8e8a7f0ef2">ff_celp_lp_synthesis_filterf</a></div><div class="ttdeci">void ff_celp_lp_synthesis_filterf(float *out, const float *filter_coeffs, const float *in, int buffer_length, int filter_length)</div><div class="ttdef"><b>Definition:</b> <a href="celp__filters_8c_source.html#l00084">celp_filters.c:84</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a1d52c73dcf052f1d5eae44dc64ef0174"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a1d52c73dcf052f1d5eae44dc64ef0174">QCELPContext::last_codebook_gain</a></div><div class="ttdeci">float last_codebook_gain</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00066">qcelpdec.c:66</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_ad630aa1849073c14ee553cdcb69a9b39"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#ad630aa1849073c14ee553cdcb69a9b39">QCELPContext::pitch_lag</a></div><div class="ttdeci">uint8_t pitch_lag[4]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00070">qcelpdec.c:70</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a7422a34b5b2601e7e2d9d7b54f00d534a405ee677a1491e18981d101704204ce0"><div class="ttname"><a href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a405ee677a1491e18981d101704204ce0">RATE_FULL</a></div><div class="ttdeci">@ RATE_FULL</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00051">qcelpdec.c:50</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_aef9e23edecfecfd1fe3683df344eeeef"><div class="ttname"><a href="qcelpdec_8c.html#aef9e23edecfecfd1fe3683df344eeeef">ff_qcelp_decoder</a></div><div class="ttdeci">AVCodec ff_qcelp_decoder</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00793">qcelpdec.c:793</a></div></div>
<div class="ttc" id="aget__bits_8h_html_abd82eee339b2471e5d9b4bfecfdc6b5f"><div class="ttname"><a href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a></div><div class="ttdeci">static unsigned int get_bits(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00379">get_bits.h:379</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a63e239cd1e6a1d1cd0398779f156ad65"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a63e239cd1e6a1d1cd0398779f156ad65">QCELPContext::predictor_lspf</a></div><div class="ttdeci">float predictor_lspf[10]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00061">qcelpdec.c:61</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a79e0db510526c7cb6bbb63d375a8fd28"><div class="ttname"><a href="qcelpdata_8h.html#a79e0db510526c7cb6bbb63d375a8fd28">QCELP_SQRT1887</a></div><div class="ttdeci">#define QCELP_SQRT1887</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00511">qcelpdata.h:511</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_frame_html_a46e7378d0aafabc1395526a69c3e5b96"><div class="ttname"><a href="struct_q_c_e_l_p_frame.html#a46e7378d0aafabc1395526a69c3e5b96">QCELPFrame::cbsign</a></div><div class="ttdeci">uint8_t cbsign[16]</div><div class="ttdoc">sign of the codebook gain for each codebook subframe</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00043">qcelpdata.h:43</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0"><div class="ttname"><a href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a9de235eb98bce248c805a72e446ecbf0">RATE_OCTAVE</a></div><div class="ttdeci">@ RATE_OCTAVE</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00047">qcelpdec.c:47</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a4fb5caea83ed6db0ce2ff37062561468"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a4fb5caea83ed6db0ce2ff37062561468">QCELPContext::prev_bitrate</a></div><div class="ttdeci">int prev_bitrate</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00068">qcelpdec.c:68</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_aa40cd7bb85f37bdea26323f0157239b3"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#aa40cd7bb85f37bdea26323f0157239b3">QCELPContext::gb</a></div><div class="ttdeci">GetBitContext gb</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00054">qcelpdec.c:54</a></div></div>
<div class="ttc" id="aacelp__vectors_8c_html_a23a8e721666ab4afd6e043203d1cf910"><div class="ttname"><a href="acelp__vectors_8c.html#a23a8e721666ab4afd6e043203d1cf910">ff_adaptive_gain_control</a></div><div class="ttdeci">void ff_adaptive_gain_control(float *out, const float *in, float speech_energ, int size, float alpha, float *gain_mem)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8c_source.html#l00203">acelp_vectors.c:203</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_ad92daa78b70d94403a608e53c6d0e720"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#ad92daa78b70d94403a608e53c6d0e720">QCELPContext::erasure_count</a></div><div class="ttdeci">uint8_t erasure_count</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00058">qcelpdec.c:58</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a4c65fed18b41fb82eea5bceefdeb5b15"><div class="ttname"><a href="checkasm_8h.html#a4c65fed18b41fb82eea5bceefdeb5b15">rnd</a></div><div class="ttdeci">#define rnd()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00107">checkasm.h:107</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a500002d87458db86e3d7f4cab795faf4"><div class="ttname"><a href="qcelpdec_8c.html#a500002d87458db86e3d7f4cab795faf4">do_pitchfilter</a></div><div class="ttdeci">static const float * do_pitchfilter(float memory[303], const float v_in[160], const float gain[4], const uint8_t *lag, const uint8_t pfrac[4])</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00423">qcelpdec.c:423</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a9e54e9e2ccf671c1f79867e19ce432e9"><div class="ttname"><a href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a></div><div class="ttdeci">static int init_get_bits8(GetBitContext *s, const uint8_t *buffer, int byte_size)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00677">get_bits.h:677</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a548fead816489780430471032773134d"><div class="ttname"><a href="qcelpdata_8h.html#a548fead816489780430471032773134d">QCELP_LSP_SPREAD_FACTOR</a></div><div class="ttdeci">#define QCELP_LSP_SPREAD_FACTOR</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00533">qcelpdata.h:533</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a2f428372a4dbc5b062d75808eb019af6"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a2f428372a4dbc5b062d75808eb019af6">QCELPContext::postfilter_tilt_mem</a></div><div class="ttdeci">float postfilter_tilt_mem</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00077">qcelpdec.c:77</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a88daa87bb166c8da6a8b9616938c6c4f"><div class="ttname"><a href="qcelpdec_8c.html#a88daa87bb166c8da6a8b9616938c6c4f">buf_size2bitrate</a></div><div class="ttdeci">static qcelp_packet_rate buf_size2bitrate(const int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00588">qcelpdec.c:588</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a56ace7ddcd09336b3ae8248baec018fe"><div class="ttname"><a href="qcelpdata_8h.html#a56ace7ddcd09336b3ae8248baec018fe">qcelp_unpacking_bitmaps_lengths</a></div><div class="ttdeci">static const uint16_t qcelp_unpacking_bitmaps_lengths[5]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00276">qcelpdata.h:276</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_ae036c774a1f407a10b9187ca1260e9a5"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#ae036c774a1f407a10b9187ca1260e9a5">QCELPContext::prev_g1</a></div><div class="ttdeci">int prev_g1[2]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00067">qcelpdec.c:67</a></div></div>
<div class="ttc" id="aget__bits_8h_html"><div class="ttname"><a href="get__bits_8h.html">get_bits.h</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a0cbd68ec0d268e7c1d673a5301c84dc7"><div class="ttname"><a href="qcelpdata_8h.html#a0cbd68ec0d268e7c1d673a5301c84dc7">qcelp_rate_half_codebook</a></div><div class="ttdeci">static const int8_t qcelp_rate_half_codebook[128]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00484">qcelpdata.h:484</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a046d0fca210c6cdfb7c3a314011752a6"><div class="ttname"><a href="qcelpdata_8h.html#a046d0fca210c6cdfb7c3a314011752a6">qcelp_hammsinc_table</a></div><div class="ttdeci">static const float qcelp_hammsinc_table[4]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00074">qcelpdata.h:74</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_frame_html_a044be253fb352415965540705d5d0bb9"><div class="ttname"><a href="struct_q_c_e_l_p_frame.html#a044be253fb352415965540705d5d0bb9">QCELPFrame::reserved</a></div><div class="ttdeci">uint8_t reserved</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00065">qcelpdata.h:65</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757"><div class="ttname"><a href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a756199c6d8198f66d21585b8fdfcb757">I_F_Q</a></div><div class="ttdeci">@ I_F_Q</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00045">qcelpdec.c:45</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_bitmap_html_ad666d990b7e0ea4a1e6623b19ae6750a"><div class="ttname"><a href="struct_q_c_e_l_p_bitmap.html#ad666d990b7e0ea4a1e6623b19ae6750a">QCELPBitmap::bitpos</a></div><div class="ttdeci">uint8_t bitpos</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00078">qcelpdata.h:78</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_ac3db6ee692b23a887052855eaeafb65e"><div class="ttname"><a href="qcelpdec_8c.html#ac3db6ee692b23a887052855eaeafb65e">qcelp_decode_frame</a></div><div class="ttdeci">static int qcelp_decode_frame(AVCodecContext *avctx, void *data, int *got_frame_ptr, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00686">qcelpdec.c:686</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_a7a87cd25426a228ce8ecbef48ab00de8"><div class="ttname"><a href="cuda__runtime_8h.html#a7a87cd25426a228ce8ecbef48ab00de8">fabs</a></div><div class="ttdeci">static __device__ float fabs(float a)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00182">cuda_runtime.h:182</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_af36bf14413eafd50ca2336df2349fbab"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#af36bf14413eafd50ca2336df2349fbab">QCELPContext::first16bits</a></div><div class="ttdeci">uint16_t first16bits</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00071">qcelpdec.c:71</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_ab3741233ecdf5db940bb749f9e0c840e"><div class="ttname"><a href="qcelpdec_8c.html#ab3741233ecdf5db940bb749f9e0c840e">apply_pitch_filters</a></div><div class="ttdeci">static void apply_pitch_filters(QCELPContext *q, float *cdn_vector)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00467">qcelpdec.c:467</a></div></div>
<div class="ttc" id="astruct_get_bit_context_html"><div class="ttname"><a href="struct_get_bit_context.html">GetBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00061">get_bits.h:61</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a92c0782da8c328a8e7019a3315871306"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a92c0782da8c328a8e7019a3315871306">QCELPContext::frame</a></div><div class="ttdeci">QCELPFrame frame</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00056">qcelpdec.c:56</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_afd1f0126ef47e00875e01cc2fca538e7"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#afd1f0126ef47e00875e01cc2fca538e7">QCELPContext::pitch_gain</a></div><div class="ttdeci">float pitch_gain[4]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00069">qcelpdec.c:69</a></div></div>
<div class="ttc" id="acelp__filters_8h_html"><div class="ttname"><a href="celp__filters_8h.html">celp_filters.h</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a5bb2e8fd7d95176ef7ba3054b2d930de"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a5bb2e8fd7d95176ef7ba3054b2d930de">QCELPContext::postfilter_synth_mem</a></div><div class="ttdeci">float postfilter_synth_mem[10]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00075">qcelpdec.c:75</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a8a9fab0da6208671d9d438ddacf9fd0a"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a8a9fab0da6208671d9d438ddacf9fd0a">QCELPContext::pitch_pre_filter_mem</a></div><div class="ttdeci">float pitch_pre_filter_mem[303]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00063">qcelpdec.c:63</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a85cae42dccebccd869e871a564001341"><div class="ttname"><a href="qcelpdec_8c.html#a85cae42dccebccd869e871a564001341">lspf2lpc</a></div><div class="ttdeci">static void lspf2lpc(const float *lspf, float *lpc)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00536">qcelpdec.c:536</a></div></div>
<div class="ttc" id="alibavcodec_2diracdec_8c_html_abba89017a0b8aef3a4defd8fe9c20a9e"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a></div><div class="ttdeci">static int weight(int i, int blen, int offset)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01560">diracdec.c:1560</a></div></div>
<div class="ttc" id="afloat__dsp_8h_html"><div class="ttname"><a href="float__dsp_8h.html">float_dsp.h</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_frame_html_af4bdfb26e57b1d32c2dcf44b65a5b769"><div class="ttname"><a href="struct_q_c_e_l_p_frame.html#af4bdfb26e57b1d32c2dcf44b65a5b769">QCELPFrame::pgain</a></div><div class="ttdeci">uint8_t pgain[4]</div><div class="ttdoc">pitch gain for each pitch subframe</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00052">qcelpdata.h:52</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a51b07ecd6ed4e9abb366c8ca531e590a"><div class="ttname"><a href="qcelpdec_8c.html#a51b07ecd6ed4e9abb366c8ca531e590a">warn_insufficient_frame_quality</a></div><div class="ttdeci">static void warn_insufficient_frame_quality(AVCodecContext *avctx, const char *message)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00647">qcelpdec.c:647</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceac5a616b6750e42680e2ab71c7db317d1"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac5a616b6750e42680e2ab71c7db317d1">AV_CODEC_ID_QCELP</a></div><div class="ttdeci">@ AV_CODEC_ID_QCELP</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00442">codec_id.h:442</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_af92aa334f466c879235b92d37745c435"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#af92aa334f466c879235b92d37745c435">QCELPContext::prev_lspf</a></div><div class="ttdeci">float prev_lspf[10]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00060">qcelpdec.c:60</a></div></div>
<div class="ttc" id="adecode_8c_html_a0d5adb2b84051826883605b3ab4d1bab"><div class="ttname"><a href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a></div><div class="ttdeci">int ff_get_buffer(AVCodecContext *avctx, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01879">decode.c:1879</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga5f35425595395c76cfa406c883f78aed"><div class="ttname"><a href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a></div><div class="ttdeci">#define AV_CODEC_CAP_DR1</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a45120d43f46bbe4e756f41fb3236168e"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a45120d43f46bbe4e756f41fb3236168e">QCELPContext::rnd_fir_filter_mem</a></div><div class="ttdeci">float rnd_fir_filter_mem[180]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00064">qcelpdec.c:64</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html"><div class="ttname"><a href="struct_q_c_e_l_p_context.html">QCELPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00053">qcelpdec.c:53</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a719e1eb77e8b7d1f6c9cc7b8d8ecfac9"><div class="ttname"><a href="qcelpdec_8c.html#a719e1eb77e8b7d1f6c9cc7b8d8ecfac9">interpolate_lpc</a></div><div class="ttdeci">static void interpolate_lpc(QCELPContext *q, const float *curr_lspf, float *lpc, const int subframe_num)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00564">qcelpdec.c:564</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_bitmap_html_a4c0c2f2892e9a00d55c00e5720ff931c"><div class="ttname"><a href="struct_q_c_e_l_p_bitmap.html#a4c0c2f2892e9a00d55c00e5720ff931c">QCELPBitmap::bitlen</a></div><div class="ttdeci">uint8_t bitlen</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00079">qcelpdata.h:79</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="atests_2h264__levels_8c_html_a7ead09ba2ff985f7f74ab0f40ee7eecc"><div class="ttname"><a href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a></div><div class="ttdeci">int64_t bitrate</div><div class="ttdef"><b>Definition:</b> <a href="tests_2h264__levels_8c_source.html#l00131">h264_levels.c:131</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1bdba69ea111e2a9d03fdaa7a46a4c45"><div class="ttname"><a href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">AVCodecContext::sample_fmt</a></div><div class="ttdeci">enum AVSampleFormat sample_fmt</div><div class="ttdoc">sample format</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1194</a></div></div>
<div class="ttc" id="amathematics_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00052">mathematics.h:52</a></div></div>
<div class="ttc" id="aacelp__filters_8c_html_a0d6ae4fe173d5bb07674d64592de1fa2"><div class="ttname"><a href="acelp__filters_8c.html#a0d6ae4fe173d5bb07674d64592de1fa2">ff_tilt_compensation</a></div><div class="ttdeci">void ff_tilt_compensation(float *mem, float tilt, float *samples, int size)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__filters_8c_source.html#l00136">acelp_filters.c:136</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_frame_html_accb48607050863574407f80b78ae5728"><div class="ttname"><a href="struct_q_c_e_l_p_frame.html#accb48607050863574407f80b78ae5728">QCELPFrame::cindex</a></div><div class="ttdeci">uint8_t cindex[16]</div><div class="ttdoc">codebook index for each codebook subframe</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00045">qcelpdata.h:45</a></div></div>
<div class="ttc" id="aavassert_8h_html_a2764bf422e4df5bf3aac652f21fe780a"><div class="ttname"><a href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a></div><div class="ttdeci">#define av_assert2(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00064">avassert.h:64</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html"><div class="ttname"><a href="qcelpdata_8h.html">qcelpdata.h</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_frame_html_a314759be0f1a1072a14e9d97496aff29"><div class="ttname"><a href="struct_q_c_e_l_p_frame.html#a314759be0f1a1072a14e9d97496aff29">QCELPFrame::cbgain</a></div><div class="ttdeci">uint8_t cbgain[16]</div><div class="ttdoc">unsigned codebook gain for each codebook subframe</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00044">qcelpdata.h:44</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a0cba50007bed438dcfc600d6c79ad55a"><div class="ttname"><a href="qcelpdec_8c.html#a0cba50007bed438dcfc600d6c79ad55a">apply_gain_ctrl</a></div><div class="ttdeci">static void apply_gain_ctrl(float *v_out, const float *v_ref, const float *v_in)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00396">qcelpdec.c:396</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a2b1e9b5c1e0486140f245aac480ead08"><div class="ttname"><a href="qcelpdec_8c.html#a2b1e9b5c1e0486140f245aac480ead08">decode_lspf</a></div><div class="ttdeci">static int decode_lspf(QCELPContext *q, float *lspf)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00111">qcelpdec.c:111</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_frame_html"><div class="ttname"><a href="struct_q_c_e_l_p_frame.html">QCELPFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00040">qcelpdata.h:40</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a41b7829473578b40dfc9b5e0751d8e4c"><div class="ttname"><a href="qcelpdec_8c.html#a41b7829473578b40dfc9b5e0751d8e4c">determine_bitrate</a></div><div class="ttdeci">static qcelp_packet_rate determine_bitrate(AVCodecContext *avctx, const int buf_size, const uint8_t **buf)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00613">qcelpdec.c:613</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="aacelp__filters_8h_html"><div class="ttname"><a href="acelp__filters_8h.html">acelp_filters.h</a></div></div>
<div class="ttc" id="aacelp__vectors_8c_html_ae6f91c4819ad805fec298b39b860f2aa"><div class="ttname"><a href="acelp__vectors_8c.html#ae6f91c4819ad805fec298b39b860f2aa">ff_weighted_vector_sumf</a></div><div class="ttdeci">void ff_weighted_vector_sumf(float *out, const float *in_a, const float *in_b, float weight_coeff_a, float weight_coeff_b, int length)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8c_source.html#l00193">acelp_vectors.c:193</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a1b97d2a58c1079bd1b903f6f0af616b3"><div class="ttname"><a href="qcelpdata_8h.html#a1b97d2a58c1079bd1b903f6f0af616b3">qcelp_g12ga</a></div><div class="ttdeci">static const float qcelp_g12ga[61]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00436">qcelpdata.h:436</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_afe25a09d004f732cd292e59a3335f68d"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#afe25a09d004f732cd292e59a3335f68d">QCELPContext::pitch_synthesis_filter_mem</a></div><div class="ttdeci">float pitch_synthesis_filter_mem[303]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00062">qcelpdec.c:62</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_frame_html_a9e9c9f0f8ad6f8693bb1c9efc6a3e721"><div class="ttname"><a href="struct_q_c_e_l_p_frame.html#a9e9c9f0f8ad6f8693bb1c9efc6a3e721">QCELPFrame::plag</a></div><div class="ttdeci">uint8_t plag[4]</div><div class="ttdoc">pitch lag for each pitch subframe</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00050">qcelpdata.h:50</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="avf__deshake__opencl_8c_html_a32fee6ebcc3bc066f425852915a5bed6"><div class="ttname"><a href="vf__deshake__opencl_8c.html#a32fee6ebcc3bc066f425852915a5bed6">smooth</a></div><div class="ttdeci">static float smooth(DeshakeOpenCLContext *deshake_ctx, float *gauss_kernel, int length, float max_val, AVFifoBuffer *values)</div><div class="ttdef"><b>Definition:</b> <a href="vf__deshake__opencl_8c_source.html#l00903">vf_deshake_opencl.c:903</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_ad75ed5bd999e57dd2d38082f9ab6b768"><div class="ttname"><a href="qcelpdec_8c.html#ad75ed5bd999e57dd2d38082f9ab6b768">QCELPContext</a></div><div class="ttdeci">struct QCELPContext QCELPContext</div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="alsp_8h_html"><div class="ttname"><a href="lsp_8h.html">lsp.h</a></div></div>
<div class="ttc" id="acelp__filters_8c_html_adb73ab3ce9b95632b89b2c80e45eb190"><div class="ttname"><a href="celp__filters_8c.html#adb73ab3ce9b95632b89b2c80e45eb190">ff_celp_lp_zero_synthesis_filterf</a></div><div class="ttdeci">void ff_celp_lp_zero_synthesis_filterf(float *out, const float *filter_coeffs, const float *in, int buffer_length, int filter_length)</div><div class="ttdef"><b>Definition:</b> <a href="celp__filters_8c_source.html#l00199">celp_filters.c:199</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_ac274ff348e2df541ef195e9b87826ff0"><div class="ttname"><a href="qcelpdec_8c.html#ac274ff348e2df541ef195e9b87826ff0">compute_svector</a></div><div class="ttdeci">static void compute_svector(QCELPContext *q, const float *gain, float *cdn_vector)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00309">qcelpdec.c:309</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a2e968a80a11f8821ef69102b41471fb3"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a2e968a80a11f8821ef69102b41471fb3">QCELPContext::bitrate</a></div><div class="ttdeci">qcelp_packet_rate bitrate</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00055">qcelpdec.c:55</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d"><div class="ttname"><a href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a1176aa839455e384a7e69312019d4d5d">RATE_HALF</a></div><div class="ttdeci">@ RATE_HALF</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00049">qcelpdec.c:49</a></div></div>
<div class="ttc" id="achannel__layout_8h_html"><div class="ttname"><a href="channel__layout_8h.html">channel_layout.h</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a90c99dea549bc832262b3e3887521c1b"><div class="ttname"><a href="qcelpdec_8c.html#a90c99dea549bc832262b3e3887521c1b">decode_gain_and_index</a></div><div class="ttdeci">static void decode_gain_and_index(QCELPContext *q, float *gain)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00195">qcelpdec.c:195</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_a781313a952b42c0ea4b5c7135cf6db84"><div class="ttname"><a href="qcelpdata_8h.html#a781313a952b42c0ea4b5c7135cf6db84">QCELP_BANDWIDTH_EXPANSION_COEFF</a></div><div class="ttdeci">#define QCELP_BANDWIDTH_EXPANSION_COEFF</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00550">qcelpdata.h:550</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a226e0605aa155e8755699cb4ff3e9c2a"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a226e0605aa155e8755699cb4ff3e9c2a">QCELPContext::formant_mem</a></div><div class="ttdeci">float formant_mem[170]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00065">qcelpdec.c:65</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9"><div class="ttname"><a href="qcelpdec_8c.html#a7422a34b5b2601e7e2d9d7b54f00d534a76a854346f3cd92191bc9ef43d5763b9">RATE_QUARTER</a></div><div class="ttdeci">@ RATE_QUARTER</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00048">qcelpdec.c:48</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ac53f7e33bdbd6ea3ec96ee0f1292ee84"><div class="ttname"><a href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio samples</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00008">filter_design.txt:8</a></div></div>
<div class="ttc" id="alibavutil_2float__dsp_8c_html_a8ac681f06fc6b5fb59a401db1c57e21c"><div class="ttname"><a href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a></div><div class="ttdeci">float avpriv_scalarproduct_float_c(const float *v1, const float *v2, int len)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2float__dsp_8c_source.html#l00124">float_dsp.c:124</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_bitmap_html"><div class="ttname"><a href="struct_q_c_e_l_p_bitmap.html">QCELPBitmap</a></div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00076">qcelpdata.h:76</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adb009f1d85ac852f5a0f6da3dd88ba56"><div class="ttname"><a href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a></div><div class="ttdeci">#define avpriv_request_sample(...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00039">tableprint_vlc.h:39</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_ace8a6fd72dafc287f446022e20e0e966"><div class="ttname"><a href="qcelpdata_8h.html#ace8a6fd72dafc287f446022e20e0e966">QCELP_RATE_HALF_CODEBOOK_RATIO</a></div><div class="ttdeci">#define QCELP_RATE_HALF_CODEBOOK_RATIO</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00502">qcelpdata.h:502</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_ae93c80377eeb5657bfb8b38603475356"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#ae93c80377eeb5657bfb8b38603475356">QCELPContext::postfilter_agc_mem</a></div><div class="ttdeci">float postfilter_agc_mem</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00076">qcelpdec.c:76</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="avf__palettegen_8c_html_a0fa5abf62b01f8a592bca729cb14390b"><div class="ttname"><a href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a></div><div class="ttdeci">static av_always_inline int diff(const uint32_t a, const uint32_t b)</div><div class="ttdef"><b>Definition:</b> <a href="vf__palettegen_8c_source.html#l00136">vf_palettegen.c:136</a></div></div>
<div class="ttc" id="aacelp__vectors_8c_html_a481a48508d8e6261a38b187f78caaea7"><div class="ttname"><a href="acelp__vectors_8c.html#a481a48508d8e6261a38b187f78caaea7">ff_scale_vector_to_given_sum_of_squares</a></div><div class="ttdeci">void ff_scale_vector_to_given_sum_of_squares(float *out, const float *in, float sum_of_squares, const int n)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8c_source.html#l00224">acelp_vectors.c:224</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_frame_html_a2a012717babbf96e34eb7d248dd9534a"><div class="ttname"><a href="struct_q_c_e_l_p_frame.html#a2a012717babbf96e34eb7d248dd9534a">QCELPFrame::pfrac</a></div><div class="ttdeci">uint8_t pfrac[4]</div><div class="ttdoc">fractional pitch lag for each pitch subframe</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00051">qcelpdata.h:51</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac1e6c2cd1269caa7570575725c682a49"><div class="ttname"><a href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">AVCodecContext::channels</a></div><div class="ttdeci">int channels</div><div class="ttdoc">number of audio channels</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1187</a></div></div>
<div class="ttc" id="astruct_q_c_e_l_p_context_html_a6c6b8428fb09cf6d117f07bbec2226ff"><div class="ttname"><a href="struct_q_c_e_l_p_context.html#a6c6b8428fb09cf6d117f07bbec2226ff">QCELPContext::warned_buf_mismatch_bitrate</a></div><div class="ttdeci">uint8_t warned_buf_mismatch_bitrate</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00072">qcelpdec.c:72</a></div></div>
<div class="ttc" id="alsp_8c_html_a06d95f875a659ddbac7f219329df5a4a"><div class="ttname"><a href="lsp_8c.html#a06d95f875a659ddbac7f219329df5a4a">ff_acelp_lspd2lpc</a></div><div class="ttdeci">void ff_acelp_lspd2lpc(const double *lsp, float *lpc, int lp_half_order)</div><div class="ttdef"><b>Definition:</b> <a href="lsp_8c_source.html#l00209">lsp.c:209</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_aefaa0bf3762ed5d654a7c4a5d99adc69"><div class="ttname"><a href="qcelpdata_8h.html#aefaa0bf3762ed5d654a7c4a5d99adc69">qcelp_rnd_fir_coefs</a></div><div class="ttdeci">static const double qcelp_rnd_fir_coefs[11]</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00521">qcelpdata.h:521</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_FLT</div><div class="ttdoc">float</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00063">samplefmt.h:63</a></div></div>
<div class="ttc" id="aqcelpdata_8h_html_ad65edbe7fd912a273c3ac8a2708d2a41"><div class="ttname"><a href="qcelpdata_8h.html#ad65edbe7fd912a273c3ac8a2708d2a41">QCELP_RATE_FULL_CODEBOOK_RATIO</a></div><div class="ttdeci">#define QCELP_RATE_FULL_CODEBOOK_RATIO</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdata_8h_source.html#l00477">qcelpdata.h:477</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aeb08c575a79eb84fc4155dda88f46c06"><div class="ttname"><a href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">AVCodecContext::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01237">avcodec.h:1237</a></div></div>
<div class="ttc" id="aqcelpdec_8c_html_a511131b972fe20e875420936005fa22c"><div class="ttname"><a href="qcelpdec_8c.html#a511131b972fe20e875420936005fa22c">postfilter</a></div><div class="ttdeci">static void postfilter(QCELPContext *q, float *samples, float *lpc)</div><div class="ttdef"><b>Definition:</b> <a href="qcelpdec_8c_source.html#l00654">qcelpdec.c:654</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
