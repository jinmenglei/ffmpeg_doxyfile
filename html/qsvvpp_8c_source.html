<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavfilter/qsvvpp.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_e1bd69597e95623f2084619f16269321.html">libavfilter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">qsvvpp.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qsvvpp_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">libavutil/common.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mathematics_8h.html">libavutil/mathematics.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hwcontext_8h.html">libavutil/hwcontext.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hwcontext__qsv_8h.html">libavutil/hwcontext_qsv.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="time_8h.html">libavutil/time.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixdesc_8h.html">libavutil/pixdesc.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qsvvpp_8h.html">qsvvpp.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="video_8h.html">video.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a147b0a4bff624106a1990c2346e53053">   35</a></span>&#160;<span class="preprocessor">#define IS_VIDEO_MEMORY(mode)  (mode &amp; (MFX_MEMTYPE_VIDEO_MEMORY_DECODER_TARGET | \</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">                                        MFX_MEMTYPE_VIDEO_MEMORY_PROCESSOR_TARGET))</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a59c4084d2294774249658290c16137d2">   37</a></span>&#160;<span class="preprocessor">#define IS_OPAQUE_MEMORY(mode) (mode &amp; MFX_MEMTYPE_OPAQUE_FRAME)</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a84b5a80a82e36c692712b4f0928e3edc">   38</a></span>&#160;<span class="preprocessor">#define IS_SYSTEM_MEMORY(mode) (mode &amp; MFX_MEMTYPE_SYSTEM_MEMORY)</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_q_s_v_frame.html">QSVFrame</a> {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a>          *<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="struct_q_s_v_frame.html#a27124c669971fdfa00dd8f486dc9ac4c">   42</a></span>&#160;    mfxFrameSurface1 *<a class="code" href="struct_q_s_v_frame.html#a27124c669971fdfa00dd8f486dc9ac4c">surface</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="struct_q_s_v_frame.html#abcae6f753ae92915cb0f691bd0bd981e">   43</a></span>&#160;    mfxFrameSurface1  <a class="code" href="struct_q_s_v_frame.html#abcae6f753ae92915cb0f691bd0bd981e">surface_internal</a>;  <span class="comment">/* for system memory */</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_q_s_v_frame.html">QSVFrame</a>  *<a class="code" href="struct_q_s_v_frame.html#a289930c8820e30fcaf7e4a4546dc6444">next</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a69eccc892f2e9d4457df3f077280444b">   45</a></span>&#160;} <a class="code" href="qsvvpp_8c.html#a69eccc892f2e9d4457df3f077280444b">QSVFrame</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/* abstract struct for all QSV filters */</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html">   48</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> {</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a32d92da2d179ce01ecf3223330292551">   49</a></span>&#160;    mfxSession          <a class="code" href="struct_q_s_v_v_p_p_context.html#a32d92da2d179ce01ecf3223330292551">session</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a435216cd2bc457060a31fa26dab5cf34">   50</a></span>&#160;    <a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> (*<a class="code" href="struct_q_s_v_v_p_p_context.html#af48b509be5f507fd2dee12103874d225">filter_frame</a>) (<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *outlink, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);<span class="comment">/* callback */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a>  <a class="code" href="struct_q_s_v_v_p_p_context.html#a435216cd2bc457060a31fa26dab5cf34">out_sw_format</a>;   <span class="comment">/* Real output format */</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a4f6498edf851231d9dc032fdbac77f14">   52</a></span>&#160;    mfxVideoParam       <a class="code" href="struct_q_s_v_v_p_p_context.html#a4f6498edf851231d9dc032fdbac77f14">vpp_param</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a9da9417a2c1eab8c4c3509e004041790">   53</a></span>&#160;    mfxFrameInfo       *<a class="code" href="struct_q_s_v_v_p_p_context.html#a9da9417a2c1eab8c4c3509e004041790">frame_infos</a>;     <span class="comment">/* frame info for each input */</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">/* members related to the input/output surface */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#afdd184f226427e8df71b8ac2dfc9bc35">   56</a></span>&#160;    <span class="keywordtype">int</span>                 <a class="code" href="struct_q_s_v_v_p_p_context.html#afdd184f226427e8df71b8ac2dfc9bc35">in_mem_mode</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#abf56c75c3b9e9fc1f9e55d41950f3214">   57</a></span>&#160;    <span class="keywordtype">int</span>                 <a class="code" href="struct_q_s_v_v_p_p_context.html#abf56c75c3b9e9fc1f9e55d41950f3214">out_mem_mode</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a9a18b52d9112dd11ef1cdd6c7332c116">   58</a></span>&#160;    <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a>           *<a class="code" href="struct_q_s_v_v_p_p_context.html#a9a18b52d9112dd11ef1cdd6c7332c116">in_frame_list</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#ad772775371590f4ae0801b6bc869fbf8">   59</a></span>&#160;    <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a>           *<a class="code" href="struct_q_s_v_v_p_p_context.html#ad772775371590f4ae0801b6bc869fbf8">out_frame_list</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a4235dd42fe0349b12926a805cabea413">   60</a></span>&#160;    <span class="keywordtype">int</span>                 <a class="code" href="struct_q_s_v_v_p_p_context.html#a4235dd42fe0349b12926a805cabea413">nb_surface_ptrs_in</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a40ccc70aa5b182a5e54d87bae59a6025">   61</a></span>&#160;    <span class="keywordtype">int</span>                 <a class="code" href="struct_q_s_v_v_p_p_context.html#a40ccc70aa5b182a5e54d87bae59a6025">nb_surface_ptrs_out</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a17eabe05311f1fee17a383ee133d9300">   62</a></span>&#160;    mfxFrameSurface1  **<a class="code" href="struct_q_s_v_v_p_p_context.html#a17eabe05311f1fee17a383ee133d9300">surface_ptrs_in</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a4ade5981be5cf8a31c56477390786125">   63</a></span>&#160;    mfxFrameSurface1  **<a class="code" href="struct_q_s_v_v_p_p_context.html#a4ade5981be5cf8a31c56477390786125">surface_ptrs_out</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">/* MFXVPP extern parameters */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#a0869d85470b167852be39ecd19cf5027">   66</a></span>&#160;    mfxExtOpaqueSurfaceAlloc <a class="code" href="struct_q_s_v_v_p_p_context.html#a0869d85470b167852be39ecd19cf5027">opaque_alloc</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#af93f40c8cf44a5858a95ff0bb8f714fb">   67</a></span>&#160;    mfxExtBuffer      **<a class="code" href="struct_q_s_v_v_p_p_context.html#af93f40c8cf44a5858a95ff0bb8f714fb">ext_buffers</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_q_s_v_v_p_p_context.html#aff20042378e0151996b280a8702d7dde">   68</a></span>&#160;    <span class="keywordtype">int</span>                 <a class="code" href="struct_q_s_v_v_p_p_context.html#aff20042378e0151996b280a8702d7dde">nb_ext_buffers</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;};</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#aaf802fd4d4351892a74c412bc601b1df">   71</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> mfxHandleType <a class="code" href="qsvvpp_8c.html#aaf802fd4d4351892a74c412bc601b1df">handle_types</a>[] = {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    MFX_HANDLE_VA_DISPLAY,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    MFX_HANDLE_D3D9_DEVICE_MANAGER,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    MFX_HANDLE_D3D11_DEVICE,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;};</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a12a36c5a58a60f8cfead042d260fe939">   77</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_rational.html">AVRational</a> <a class="code" href="qsvvpp_8c.html#a12a36c5a58a60f8cfead042d260fe939">default_tb</a> = { 1, 90000 };</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/* functions for frameAlloc */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a57ebafa8b3520aa3c0fb8a1a893559cf">   80</a></span>&#160;<span class="keyword">static</span> mfxStatus <a class="code" href="qsvvpp_8c.html#a57ebafa8b3520aa3c0fb8a1a893559cf">frame_alloc</a>(mfxHDL pthis, mfxFrameAllocRequest *req,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                             mfxFrameAllocResponse *resp)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = pthis;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (!(req-&gt;Type &amp; MFX_MEMTYPE_VIDEO_MEMORY_PROCESSOR_TARGET) ||</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        !(req-&gt;Type &amp; (MFX_MEMTYPE_FROM_VPPIN | MFX_MEMTYPE_FROM_VPPOUT)) ||</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        !(req-&gt;Type &amp; MFX_MEMTYPE_EXTERNAL_FRAME))</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">return</span> MFX_ERR_UNSUPPORTED;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">if</span> (req-&gt;Type &amp; MFX_MEMTYPE_FROM_VPPIN) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        resp-&gt;mids = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_in * <span class="keyword">sizeof</span>(*resp-&gt;mids));</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">if</span> (!resp-&gt;mids)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_in; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            resp-&gt;mids[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_in[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Data.MemId;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        resp-&gt;NumFrameActual = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_in;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        resp-&gt;mids = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_out * <span class="keyword">sizeof</span>(*resp-&gt;mids));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> (!resp-&gt;mids)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_out; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            resp-&gt;mids[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_out[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Data.MemId;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        resp-&gt;NumFrameActual = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_out;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> MFX_ERR_NONE;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#acb8eeb6e668f19381ec8cac034decd71">  114</a></span>&#160;<span class="keyword">static</span> mfxStatus <a class="code" href="qsvvpp_8c.html#acb8eeb6e668f19381ec8cac034decd71">frame_free</a>(mfxHDL pthis, mfxFrameAllocResponse *resp)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;resp-&gt;mids);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> MFX_ERR_NONE;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a791047364870cba9824a059a30f0daab">  120</a></span>&#160;<span class="keyword">static</span> mfxStatus <a class="code" href="qsvvpp_8c.html#a791047364870cba9824a059a30f0daab">frame_lock</a>(mfxHDL pthis, mfxMemId mid, mfxFrameData *ptr)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;{</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> MFX_ERR_UNSUPPORTED;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#ad98c9959d58461d45084a6644c26cb45">  125</a></span>&#160;<span class="keyword">static</span> mfxStatus <a class="code" href="qsvvpp_8c.html#ad98c9959d58461d45084a6644c26cb45">frame_unlock</a>(mfxHDL pthis, mfxMemId mid, mfxFrameData *ptr)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> MFX_ERR_UNSUPPORTED;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a6bbaba0ff800822726baffce44482dd1">  130</a></span>&#160;<span class="keyword">static</span> mfxStatus <a class="code" href="qsvvpp_8c.html#a6bbaba0ff800822726baffce44482dd1">frame_get_hdl</a>(mfxHDL pthis, mfxMemId mid, mfxHDL *hdl)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    *hdl = mid;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> MFX_ERR_NONE;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a2bc77d1f41fb0c630c3657ce6a52bf4a">  136</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="qsvvpp_8c.html#a2bc77d1f41fb0c630c3657ce6a52bf4a">pix_fmt_to_mfx_fourcc</a>(<span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>:</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">return</span> MFX_FOURCC_YV12;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>:</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">return</span> MFX_FOURCC_NV12;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ac755aea7c3277b09a42253882ec0444e">AV_PIX_FMT_YUYV422</a>:</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">return</span> MFX_FOURCC_YUY2;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a41c64e3682529dd5caca6f7d5d3c19c7">AV_PIX_FMT_BGRA</a>:</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">return</span> MFX_FOURCC_RGB4;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> MFX_FOURCC_NV12;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a855bf9094785e4644a4e3ee2d420e7e4">  152</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="qsvvpp_8c.html#a855bf9094785e4644a4e3ee2d420e7e4">map_frame_to_surface</a>(<a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, mfxFrameSurface1 *surface)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;format) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>:</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a6265531cbe491ec34449e3769e545f1f">AV_PIX_FMT_P010</a>:</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        surface-&gt;Data.Y  = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        surface-&gt;Data.UV = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[1];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>:</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        surface-&gt;Data.Y = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0];</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        surface-&gt;Data.U = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[1];</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        surface-&gt;Data.V = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[2];</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ac755aea7c3277b09a42253882ec0444e">AV_PIX_FMT_YUYV422</a>:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        surface-&gt;Data.Y = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0];</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        surface-&gt;Data.U = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0] + 1;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        surface-&gt;Data.V = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0] + 3;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#afa47a1e5163830c51665a3da04a318a0">AV_PIX_FMT_RGB32</a>:</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        surface-&gt;Data.B = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0];</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        surface-&gt;Data.G = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0] + 1;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        surface-&gt;Data.R = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0] + 2;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        surface-&gt;Data.A = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0] + 3;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span> MFX_ERR_UNSUPPORTED;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    surface-&gt;Data.Pitch = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[0];</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/* fill the surface info */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a74f599a766c6b2c2426018d87ca5564f">  185</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="qsvvpp_8c.html#a74f599a766c6b2c2426018d87ca5564f">fill_frameinfo_by_link</a>(mfxFrameInfo *frameinfo, <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a>        <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a>        *frames_ctx;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="struct_a_v_q_s_v_frames_context.html">AVQSVFramesContext</a>       *frames_hwctx;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ac913414b6091ce30035b21b9c0bc1c8e">AV_PIX_FMT_QSV</a>) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;<a class="code" href="struct_a_v_frame.html#a29493fbfabaa21432c360a090426aa8e">hw_frames_ctx</a>)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        frames_ctx   = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *)<a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;<a class="code" href="struct_a_v_frame.html#a29493fbfabaa21432c360a090426aa8e">hw_frames_ctx</a>-&gt;<a class="code" href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        frames_hwctx = frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a54e38c3e4355321e23e0f4c7411cb8ee">hwctx</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        *frameinfo   = frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#a748121791d286d4099c8073152973d70">surfaces</a>[0].Info;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> = <a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(<a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa102cde7ec5acbc099c3bcbb58556a18">AVERROR_BUG</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        frameinfo-&gt;CropX          = 0;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        frameinfo-&gt;CropY          = 0;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        frameinfo-&gt;Width          = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;w, 32);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        frameinfo-&gt;Height         = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;h, 32);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        frameinfo-&gt;PicStruct      = MFX_PICSTRUCT_PROGRESSIVE;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        frameinfo-&gt;FourCC         = <a class="code" href="qsvvpp_8c.html#a2bc77d1f41fb0c630c3657ce6a52bf4a">pix_fmt_to_mfx_fourcc</a>(<a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        frameinfo-&gt;BitDepthLuma   = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;comp[0].depth;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        frameinfo-&gt;BitDepthChroma = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;comp[0].depth;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        frameinfo-&gt;Shift          = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;comp[0].depth &gt; 8;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;log2_chroma_w &amp;&amp; <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;log2_chroma_h)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            frameinfo-&gt;ChromaFormat = MFX_CHROMAFORMAT_YUV420;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;log2_chroma_w)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            frameinfo-&gt;ChromaFormat = MFX_CHROMAFORMAT_YUV422;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            frameinfo-&gt;ChromaFormat = MFX_CHROMAFORMAT_YUV444;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    frameinfo-&gt;CropW          = <a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;w;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    frameinfo-&gt;CropH          = <a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;h;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    frameinfo-&gt;FrameRateExtN  = <a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;frame_rate.num;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    frameinfo-&gt;FrameRateExtD  = <a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;frame_rate.den;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    frameinfo-&gt;AspectRatioW   = <a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;<a class="code" href="struct_a_v_frame.html#a62f9c20541a83d37db7072126ff0060d">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> ? <a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;<a class="code" href="struct_a_v_frame.html#a62f9c20541a83d37db7072126ff0060d">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> : 1;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    frameinfo-&gt;AspectRatioH   = <a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;<a class="code" href="struct_a_v_frame.html#a62f9c20541a83d37db7072126ff0060d">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> ? <a class="code" href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a>-&gt;<a class="code" href="struct_a_v_frame.html#a62f9c20541a83d37db7072126ff0060d">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> : 1;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a91497a3cf284780b8376b31767c00da1">  232</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qsvvpp_8c.html#a91497a3cf284780b8376b31767c00da1">clear_unused_frames</a>(<a class="code" href="struct_q_s_v_frame.html">QSVFrame</a> *<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>-&gt;surface &amp;&amp; !<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>-&gt;surface-&gt;Data.Locked) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>-&gt;surface = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>-&gt;frame);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> = <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>-&gt;next;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a42f9238aba1bcd1d214cbf551d6f8775">  243</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qsvvpp_8c.html#a42f9238aba1bcd1d214cbf551d6f8775">clear_frame_list</a>(<a class="code" href="struct_q_s_v_frame.html">QSVFrame</a> **<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">while</span> (*<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = *<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        *<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> = (*list)-&gt;next;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;frame);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#adcdeba02cfe512b3634ac44094b88bd9">  255</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a> *<a class="code" href="qsvvpp_8c.html#adcdeba02cfe512b3634ac44094b88bd9">get_free_frame</a>(<a class="code" href="struct_q_s_v_frame.html">QSVFrame</a> **<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = *<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>; <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;next) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;surface)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>));</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t alloc new output frame.\n&quot;</span>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;next  = *<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        *<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>      = <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">/* get the input surface */</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a3b6bbad6e4b9fac5e0f42b6ccee4bf14">  278</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a> *<a class="code" href="qsvvpp_8c.html#a3b6bbad6e4b9fac5e0f42b6ccee4bf14">submit_frame</a>(<a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *picref)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a>        *qsv_frame;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="qsvvpp_8c.html#a91497a3cf284780b8376b31767c00da1">clear_unused_frames</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_frame_list);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    qsv_frame = <a class="code" href="qsvvpp_8c.html#adcdeba02cfe512b3634ac44094b88bd9">get_free_frame</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_frame_list);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (!qsv_frame)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">/* Turn AVFrame into mfxFrameSurface1.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">     * For video/opaque memory mode, pix_fmt is AV_PIX_FMT_QSV, and</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">     * mfxFrameSurface1 is stored in AVFrame-&gt;data[3];</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">     * for system memory mode, raw video data is stored in</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">     * AVFrame, we should map it into mfxFrameSurface1.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="qsvvpp_8c.html#a84b5a80a82e36c692712b4f0928e3edc">IS_SYSTEM_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode)) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">if</span> (picref-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a> != <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ac913414b6091ce30035b21b9c0bc1c8e">AV_PIX_FMT_QSV</a>) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;QSVVPP gets a wrong frame.\n&quot;</span>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>   = <a class="code" href="group__lavu__frame.html#ga46d6d32f6482a3e9c19203db5877105b">av_frame_clone</a>(picref);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a> = (mfxFrameSurface1 *)qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[3];</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="comment">/* make a copy if the input is not padded as libmfx requires */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span> (picref-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a> &amp; 31 || picref-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] &amp; 31) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a> = <a class="code" href="video_8c.html#a7f0f699d7689ef551622672dcd39a96a">ff_get_video_buffer</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                                   <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w, 32),</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                                   <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;h, 32));</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">if</span> (!qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>   = picref-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a>  = picref-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__lavu__frame.html#gaec4e92f6e1e75ffaf76e07586fb0c9ed">av_frame_copy</a>(qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>, picref) &lt; 0) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <a class="code" href="group__lavu__frame.html#gab9b275b114ace0db95c5796bc71f3012">av_frame_copy_props</a>(qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>, picref);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a> = <a class="code" href="group__lavu__frame.html#ga46d6d32f6482a3e9c19203db5877105b">av_frame_clone</a>(picref);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="qsvvpp_8c.html#a855bf9094785e4644a4e3ee2d420e7e4">map_frame_to_surface</a>(qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                &amp;qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#abcae6f753ae92915cb0f691bd0bd981e">surface_internal</a>) &lt; 0) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported frame.\n&quot;</span>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a> = &amp;qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#abcae6f753ae92915cb0f691bd0bd981e">surface_internal</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>-&gt;Info           = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos[<a class="code" href="libavfilter_2internal_8h.html#ac4a2f2ab57aee82cdec4b46d65cd418d">FF_INLINK_IDX</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>)];</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>-&gt;Data.TimeStamp = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a>,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                                                      <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;time_base, <a class="code" href="qsvvpp_8c.html#a12a36c5a58a60f8cfead042d260fe939">default_tb</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>-&gt;Info.PicStruct =</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            !qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a7f761518da738c704676c6a5f08eeb8e">interlaced_frame</a> ? MFX_PICSTRUCT_PROGRESSIVE :</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            (qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a6f3ee0596312c90a2ef2ad160c991188">top_field_first</a> ? MFX_PICSTRUCT_FIELD_TFF :</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                                 MFX_PICSTRUCT_FIELD_BFF);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#aef11fd783ad17b6841af82efa07c859e">repeat_pict</a> == 1)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>-&gt;Info.PicStruct |= MFX_PICSTRUCT_FIELD_REPEATED;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#aef11fd783ad17b6841af82efa07c859e">repeat_pict</a> == 2)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>-&gt;Info.PicStruct |= MFX_PICSTRUCT_FRAME_DOUBLING;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#aef11fd783ad17b6841af82efa07c859e">repeat_pict</a> == 4)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        qsv_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>-&gt;Info.PicStruct |= MFX_PICSTRUCT_FRAME_TRIPLING;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> qsv_frame;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">/* get the output surface */</span></div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#a0f9fbd1763ef6d16eabfa044f283768a">  350</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a> *<a class="code" href="qsvvpp_8c.html#a0f9fbd1763ef6d16eabfa044f283768a">query_frame</a>(<a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *outlink)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a4ed74bf972be6e87bd6281f29d35bef2">src</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a>        *out_frame;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="qsvvpp_8c.html#a91497a3cf284780b8376b31767c00da1">clear_unused_frames</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_frame_list);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    out_frame = <a class="code" href="qsvvpp_8c.html#adcdeba02cfe512b3634ac44094b88bd9">get_free_frame</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_frame_list);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> (!out_frame)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">/* For video memory, get a hw frame;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">     * For system memory, get a sw frame and map it into a mfx_surface. */</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="qsvvpp_8c.html#a84b5a80a82e36c692712b4f0928e3edc">IS_SYSTEM_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode)) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a> = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">if</span> (!out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="hwcontext_8c.html#adfa5aaa3a4f69b163ea30cadc6d663dc">av_hwframe_get_buffer</a>(outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">hw_frames_ctx</a>, out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>, 0);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t allocate a surface.\n&quot;</span>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a> = (mfxFrameSurface1 *)out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[3];</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="comment">/* Get a frame with aligned dimensions.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">         * Libmfx need system memory being 128x64 aligned */</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a> = <a class="code" href="video_8c.html#a7f0f699d7689ef551622672dcd39a96a">ff_get_video_buffer</a>(outlink,</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                                               <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">w</a>, 128),</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                               <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">h</a>, 64));</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">if</span> (!out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>  = outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">w</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a> = outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">h</a>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="qsvvpp_8c.html#a855bf9094785e4644a4e3ee2d420e7e4">map_frame_to_surface</a>(out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                  &amp;out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#abcae6f753ae92915cb0f691bd0bd981e">surface_internal</a>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a> = &amp;out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#abcae6f753ae92915cb0f691bd0bd981e">surface_internal</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>-&gt;Info = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.vpp.Out;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> out_frame;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/* create the QSV session */</span></div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="qsvvpp_8c.html#aa20cb354b6f120499dfc2f18744e24e6">  402</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="qsvvpp_8c.html#aa20cb354b6f120499dfc2f18744e24e6">init_vpp_session</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a>                 *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#a6837bf4b3d70c0a2bd3122f9daadc0d4">inputs</a>[0];</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a>                *outlink = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ae9e65e98275f789bb5fbb72c52d4f3ad">outputs</a>[0];</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="struct_a_v_q_s_v_frames_context.html">AVQSVFramesContext</a>  *in_frames_hwctx = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="struct_a_v_q_s_v_frames_context.html">AVQSVFramesContext</a> *out_frames_hwctx = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *device_ref;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a> *device_ctx;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="struct_a_v_q_s_v_device_context.html">AVQSVDeviceContext</a> *device_hwctx;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    mfxHDL handle;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    mfxHandleType <a class="code" href="hwcontext__qsv_8c.html#a3f6f34808101299d4cd094fcb313e919">handle_type</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    mfxVersion ver;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    mfxIMPL impl;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;hw_frames_ctx) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *frames_ctx = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *)<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;hw_frames_ctx-&gt;data;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        device_ref      = frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a2f3908bfadd569103b67ee4972ee7305">device_ref</a>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        in_frames_hwctx = frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a54e38c3e4355321e23e0f4c7411cb8ee">hwctx</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode = in_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#aadf9983d5965bd4c2cbe09c25fa2757a">frame_type</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_in = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(in_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#a80ce1c761479c7fe226d1eeed5f131ed">nb_surfaces</a>,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                                              <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_in));</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_in)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; in_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#a80ce1c761479c7fe226d1eeed5f131ed">nb_surfaces</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_in[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = in_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#a748121791d286d4099c8073152973d70">surfaces</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_in = in_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#a80ce1c761479c7fe226d1eeed5f131ed">nb_surfaces</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#addd946fbe5af506a2b19f9ad7cb97c35">hw_device_ctx</a>) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        device_ref     = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#addd946fbe5af506a2b19f9ad7cb97c35">hw_device_ctx</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode = MFX_MEMTYPE_SYSTEM_MEMORY;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;No hw context provided.\n&quot;</span>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    device_ctx   = (<a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a> *)device_ref-&gt;<a class="code" href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    device_hwctx = device_ctx-&gt;<a class="code" href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">hwctx</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#abf6e19c9fe982458610f130353f2b6ff">format</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ac913414b6091ce30035b21b9c0bc1c8e">AV_PIX_FMT_QSV</a>) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *out_frames_ctx;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *out_frames_ref = <a class="code" href="hwcontext_8c.html#ac45a7c039eb4e084b692f69ff5f2e217">av_hwframe_ctx_alloc</a>(device_ref);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> (!out_frames_ref)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode = <a class="code" href="qsvvpp_8c.html#a59c4084d2294774249658290c16137d2">IS_OPAQUE_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode) ?</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                          MFX_MEMTYPE_OPAQUE_FRAME :</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                          MFX_MEMTYPE_VIDEO_MEMORY_DECODER_TARGET;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        out_frames_ctx   = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *)out_frames_ref-&gt;<a class="code" href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        out_frames_hwctx = out_frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a54e38c3e4355321e23e0f4c7411cb8ee">hwctx</a>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        out_frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a045bc1713932804f6ceef170a5578e0e">format</a>            = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ac913414b6091ce30035b21b9c0bc1c8e">AV_PIX_FMT_QSV</a>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        out_frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a9e6f29d0f744930cdd0e8bdff8771520">width</a>             = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">w</a>, 32);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        out_frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#ae61bbe1d8645a0c573085e29f1d0a58f">height</a>            = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">h</a>, 32);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        out_frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a663a9aceca97aa7b2426c9aba6543e4a">sw_format</a>         = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_sw_format;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        out_frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a9c3a94dcd9c96e19059b56a6bae9c764">initial_pool_size</a> = 64;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#a0cc5743f8ccbb19f0a79da2e1f65bf79">extra_hw_frames</a> &gt; 0)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            out_frames_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a9c3a94dcd9c96e19059b56a6bae9c764">initial_pool_size</a> += avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#a0cc5743f8ccbb19f0a79da2e1f65bf79">extra_hw_frames</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        out_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#aadf9983d5965bd4c2cbe09c25fa2757a">frame_type</a>      = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="hwcontext_8c.html#a66a7e1ebc7e459ce07d3de6639ac7e38">av_hwframe_ctx_init</a>(out_frames_ref);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;out_frames_ref);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error creating frames_ctx for output pad.\n&quot;</span>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_out = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(out_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#a80ce1c761479c7fe226d1eeed5f131ed">nb_surfaces</a>,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                               <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_out));</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_out) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;out_frames_ref);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; out_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#a80ce1c761479c7fe226d1eeed5f131ed">nb_surfaces</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_out[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = out_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#a748121791d286d4099c8073152973d70">surfaces</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_out = out_frames_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_frames_context.html#a80ce1c761479c7fe226d1eeed5f131ed">nb_surfaces</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">hw_frames_ctx</a>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">hw_frames_ctx</a> = out_frames_ref;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode = MFX_MEMTYPE_SYSTEM_MEMORY;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">/* extract the properties of the &quot;master&quot; session given to us */</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = MFXQueryIMPL(device_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_device_context.html#abfdc22dbded8e90950b3dfce3f3bd83d">session</a>, &amp;impl);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == MFX_ERR_NONE)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = MFXQueryVersion(device_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_device_context.html#abfdc22dbded8e90950b3dfce3f3bd83d">session</a>, &amp;ver);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != MFX_ERR_NONE) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error querying the session attributes\n&quot;</span>);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="qsvvpp_8c.html#aaf802fd4d4351892a74c412bc601b1df">handle_types</a>); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = MFXVideoCORE_GetHandle(device_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_device_context.html#abfdc22dbded8e90950b3dfce3f3bd83d">session</a>, <a class="code" href="qsvvpp_8c.html#aaf802fd4d4351892a74c412bc601b1df">handle_types</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;handle);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == MFX_ERR_NONE) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <a class="code" href="hwcontext__qsv_8c.html#a3f6f34808101299d4cd094fcb313e919">handle_type</a> = <a class="code" href="qsvvpp_8c.html#aaf802fd4d4351892a74c412bc601b1df">handle_types</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != MFX_ERR_NONE) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error getting the session handle\n&quot;</span>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">/* create a &quot;slave&quot; session with those same properties, to be used for vpp */</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = MFXInit(impl, &amp;ver, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != MFX_ERR_NONE) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error initializing a session for scaling\n&quot;</span>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (handle) {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = MFXVideoCORE_SetHandle(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session, <a class="code" href="hwcontext__qsv_8c.html#a3f6f34808101299d4cd094fcb313e919">handle_type</a>, handle);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != MFX_ERR_NONE)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="qsv__internal_8h.html#a9e63255b01ca95d0077cda19c15617ee">QSV_RUNTIME_VERSION_ATLEAST</a>(ver, 1, 25)) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = MFXJoinSession(device_hwctx-&gt;<a class="code" href="struct_a_v_q_s_v_device_context.html#abfdc22dbded8e90950b3dfce3f3bd83d">session</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != MFX_ERR_NONE)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="qsvvpp_8c.html#a59c4084d2294774249658290c16137d2">IS_OPAQUE_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode) || <a class="code" href="qsvvpp_8c.html#a59c4084d2294774249658290c16137d2">IS_OPAQUE_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode)) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc.In.Surfaces   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_in;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc.In.NumSurface = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_in;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc.In.Type       = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc.Out.Surfaces   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_out;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc.Out.NumSurface = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_surface_ptrs_out;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc.Out.Type       = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc.Header.BufferId = MFX_EXTBUFF_OPAQUE_SURFACE_ALLOCATION;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc.Header.BufferSz = <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="qsvvpp_8c.html#a147b0a4bff624106a1990c2346e53053">IS_VIDEO_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode) || <a class="code" href="qsvvpp_8c.html#a147b0a4bff624106a1990c2346e53053">IS_VIDEO_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode)) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        mfxFrameAllocator frame_allocator = {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            .pthis  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            .Alloc  = <a class="code" href="qsvvpp_8c.html#a57ebafa8b3520aa3c0fb8a1a893559cf">frame_alloc</a>,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            .Lock   = <a class="code" href="qsvvpp_8c.html#a791047364870cba9824a059a30f0daab">frame_lock</a>,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            .Unlock = <a class="code" href="qsvvpp_8c.html#ad98c9959d58461d45084a6644c26cb45">frame_unlock</a>,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            .GetHDL = <a class="code" href="qsvvpp_8c.html#a6bbaba0ff800822726baffce44482dd1">frame_get_hdl</a>,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            .Free   = <a class="code" href="qsvvpp_8c.html#acb8eeb6e668f19381ec8cac034decd71">frame_free</a>,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        };</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = MFXVideoCORE_SetFrameAllocator(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session, &amp;frame_allocator);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != MFX_ERR_NONE)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="qsvvpp_8h.html#a7f5de9032aaf8da2a66d6dba2cb7e451">  561</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="qsvvpp_8c.html#a7f5de9032aaf8da2a66d6dba2cb7e451">ff_qsvvpp_create</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> **vpp, <a class="code" href="struct_q_s_v_v_p_p_param.html">QSVVPPParam</a> *param)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;{</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>));</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filter_frame  = param-&gt;<a class="code" href="struct_q_s_v_v_p_p_param.html#a8efe3687dbbdbb2b6b1e43b3ba9417fa">filter_frame</a>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filter_frame)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filter_frame = <a class="code" href="avfilter_8c.html#a65d6e9755eadf69367843dfc738143b4">ff_filter_frame</a>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_sw_format = param-&gt;<a class="code" href="struct_q_s_v_v_p_p_param.html#ab6e74ef19832d63ecf8e0bd1b8d736dc">out_sw_format</a>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">/* create the vpp session */</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="qsvvpp_8c.html#aa20cb354b6f120499dfc2f18744e24e6">init_vpp_session</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#a5cf8ccec878e6d90d0b111b79b2340ee">nb_inputs</a>, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos));</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">/* Init each input&#39;s information */</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#a5cf8ccec878e6d90d0b111b79b2340ee">nb_inputs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="qsvvpp_8c.html#a74f599a766c6b2c2426018d87ca5564f">fill_frameinfo_by_link</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#a6837bf4b3d70c0a2bd3122f9daadc0d4">inputs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">/* Update input&#39;s frame info according to crop */</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; param-&gt;<a class="code" href="struct_q_s_v_v_p_p_param.html#a3e3f94c259a5d284f820297266f88592">num_crop</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="struct_q_s_v_v_p_p_crop.html">QSVVPPCrop</a> *crop = param-&gt;<a class="code" href="struct_q_s_v_v_p_p_param.html#a3fa63f24d6a83d91b92724ee4d4f4151">crop</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">if</span> (crop-&gt;<a class="code" href="struct_q_s_v_v_p_p_crop.html#acdf7f5e15ff1987d2656cba27eda441a">in_idx</a> &gt; avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#a5cf8ccec878e6d90d0b111b79b2340ee">nb_inputs</a>) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos[crop-&gt;<a class="code" href="struct_q_s_v_v_p_p_crop.html#acdf7f5e15ff1987d2656cba27eda441a">in_idx</a>].CropX = crop-&gt;<a class="code" href="struct_q_s_v_v_p_p_crop.html#ab873522bc5771d96a08682e7d98f0e45">x</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos[crop-&gt;<a class="code" href="struct_q_s_v_v_p_p_crop.html#acdf7f5e15ff1987d2656cba27eda441a">in_idx</a>].CropY = crop-&gt;<a class="code" href="struct_q_s_v_v_p_p_crop.html#a7158b1519de9fd29b8fb21070d325544">y</a>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos[crop-&gt;<a class="code" href="struct_q_s_v_v_p_p_crop.html#acdf7f5e15ff1987d2656cba27eda441a">in_idx</a>].CropW = crop-&gt;<a class="code" href="struct_q_s_v_v_p_p_crop.html#af919153a5aabdac30d2bacc531e5f3ef">w</a>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos[crop-&gt;<a class="code" href="struct_q_s_v_v_p_p_crop.html#acdf7f5e15ff1987d2656cba27eda441a">in_idx</a>].CropH = crop-&gt;<a class="code" href="struct_q_s_v_v_p_p_crop.html#a2ca0e5c6727e2a34f7fe0e2ed415dc5f">h</a>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.vpp.In = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos[0];</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="qsvvpp_8c.html#a74f599a766c6b2c2426018d87ca5564f">fill_frameinfo_by_link</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.vpp.Out, avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ae9e65e98275f789bb5fbb72c52d4f3ad">outputs</a>[0]);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Fail to get frame info from link.\n&quot;</span>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="qsvvpp_8c.html#a59c4084d2294774249658290c16137d2">IS_OPAQUE_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode) || <a class="code" href="qsvvpp_8c.html#a59c4084d2294774249658290c16137d2">IS_OPAQUE_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode)) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_ext_buffers = param-&gt;<a class="code" href="struct_q_s_v_v_p_p_param.html#acb6785e9920aa5f43fd0d3b223face52">num_ext_buf</a> + 1;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ext_buffers = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_ext_buffers, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ext_buffers));</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ext_buffers) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ext_buffers[0] = (mfxExtBuffer *)&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque_alloc;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; param-&gt;<a class="code" href="struct_q_s_v_v_p_p_param.html#acb6785e9920aa5f43fd0d3b223face52">num_ext_buf</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ext_buffers[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]    = param-&gt;<a class="code" href="struct_q_s_v_v_p_p_param.html#a78c483363bac66686d013743bb56b194">ext_buf</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1];</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.ExtParam    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ext_buffers;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.NumExtParam = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_ext_buffers;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.NumExtParam = param-&gt;<a class="code" href="struct_q_s_v_v_p_p_param.html#acb6785e9920aa5f43fd0d3b223face52">num_ext_buf</a>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.ExtParam    = param-&gt;<a class="code" href="struct_q_s_v_v_p_p_param.html#a78c483363bac66686d013743bb56b194">ext_buf</a>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.AsyncDepth = 1;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="qsvvpp_8c.html#a84b5a80a82e36c692712b4f0928e3edc">IS_SYSTEM_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode))</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.IOPattern |= MFX_IOPATTERN_IN_SYSTEM_MEMORY;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="qsvvpp_8c.html#a147b0a4bff624106a1990c2346e53053">IS_VIDEO_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode))</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.IOPattern |= MFX_IOPATTERN_IN_VIDEO_MEMORY;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="qsvvpp_8c.html#a59c4084d2294774249658290c16137d2">IS_OPAQUE_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_mem_mode))</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.IOPattern |= MFX_IOPATTERN_IN_OPAQUE_MEMORY;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="qsvvpp_8c.html#a84b5a80a82e36c692712b4f0928e3edc">IS_SYSTEM_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode))</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.IOPattern |= MFX_IOPATTERN_OUT_SYSTEM_MEMORY;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="qsvvpp_8c.html#a147b0a4bff624106a1990c2346e53053">IS_VIDEO_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode))</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.IOPattern |= MFX_IOPATTERN_OUT_VIDEO_MEMORY;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="qsvvpp_8c.html#a59c4084d2294774249658290c16137d2">IS_OPAQUE_MEMORY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_mem_mode))</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param.IOPattern |= MFX_IOPATTERN_OUT_OPAQUE_MEMORY;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = MFXVideoVPP_Init(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vpp_param);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create a qsvvpp, ret = %d.\n&quot;</span>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    *vpp = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;failed:</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="qsvvpp_8c.html#a8c7265310cfab48f8488acdb3b895d13">ff_qsvvpp_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="qsvvpp_8h.html#a8c7265310cfab48f8488acdb3b895d13">  664</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="qsvvpp_8c.html#a8c7265310cfab48f8488acdb3b895d13">ff_qsvvpp_free</a>(<a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> **vpp)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;{</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = *vpp;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        MFXVideoVPP_Close(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        MFXClose(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">/* release all the resources */</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="qsvvpp_8c.html#a42f9238aba1bcd1d214cbf551d6f8775">clear_frame_list</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;in_frame_list);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="qsvvpp_8c.html#a42f9238aba1bcd1d214cbf551d6f8775">clear_frame_list</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_frame_list);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_in);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;surface_ptrs_out);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ext_buffers);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_infos);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(vpp);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno"><a class="line" href="qsvvpp_8h.html#aefc3a37135c40b2357e567096dd51730">  688</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="qsvvpp_8c.html#ae4fc2598c7943370937424fa416a3b5b">ff_qsvvpp_filter_frame</a>(<a class="code" href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *picref)</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;{</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a>  *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>     = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a>     *outlink = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;outputs[0];</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    mfxSyncPoint      sync;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="struct_q_s_v_frame.html">QSVFrame</a>         *in_frame, *out_frame;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordtype">int</span>               <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, filter_ret;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    in_frame = <a class="code" href="qsvvpp_8c.html#a3b6bbad6e4b9fac5e0f42b6ccee4bf14">submit_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, picref);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span> (!in_frame) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to submit frame on input[%d]\n&quot;</span>,</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;               <a class="code" href="libavfilter_2internal_8h.html#ac4a2f2ab57aee82cdec4b46d65cd418d">FF_INLINK_IDX</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>));</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        out_frame = <a class="code" href="qsvvpp_8c.html#a0f9fbd1763ef6d16eabfa044f283768a">query_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, outlink);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">if</span> (!out_frame) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to query an output frame.\n&quot;</span>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = MFXVideoVPP_RunFrameVPPAsync(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session, in_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>,</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                                               out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;sync);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == MFX_WRN_DEVICE_BUSY)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                <a class="code" href="time_8c.html#a4eee9c65835652a808973f4bc1641a51">av_usleep</a>(500);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        } <span class="keywordflow">while</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == MFX_WRN_DEVICE_BUSY);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != MFX_ERR_MORE_SURFACE) {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            <span class="comment">/* Ignore more_data error */</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == MFX_ERR_MORE_DATA)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keywordflow">if</span> (MFXVideoCORE_SyncOperation(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;session, sync, 1000) &lt; 0)</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Sync failed.\n&quot;</span>);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">surface</a>-&gt;Data.TimeStamp,</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                             <a class="code" href="qsvvpp_8c.html#a12a36c5a58a60f8cfead042d260fe939">default_tb</a>, outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a5d947aa9541b02e25db472656d69ea53">time_base</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        filter_ret = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filter_frame(outlink, out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span> (filter_ret &lt; 0) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = filter_ret;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        out_frame-&gt;<a class="code" href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">frame</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    } <span class="keywordflow">while</span>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == MFX_ERR_MORE_SURFACE);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="avideo_8c_html_a7f0f699d7689ef551622672dcd39a96a"><div class="ttname"><a href="video_8c.html#a7f0f699d7689ef551622672dcd39a96a">ff_get_video_buffer</a></div><div class="ttdeci">AVFrame * ff_get_video_buffer(AVFilterLink *link, int w, int h)</div><div class="ttdef"><b>Definition:</b> <a href="video_8c_source.html#l00099">video.c:99</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a6bbaba0ff800822726baffce44482dd1"><div class="ttname"><a href="qsvvpp_8c.html#a6bbaba0ff800822726baffce44482dd1">frame_get_hdl</a></div><div class="ttdeci">static mfxStatus frame_get_hdl(mfxHDL pthis, mfxMemId mid, mfxHDL *hdl)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00130">qsvvpp.c:130</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_aaf802fd4d4351892a74c412bc601b1df"><div class="ttname"><a href="qsvvpp_8c.html#aaf802fd4d4351892a74c412bc601b1df">handle_types</a></div><div class="ttdeci">static const mfxHandleType handle_types[]</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00071">qsvvpp.c:71</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a9e6f29d0f744930cdd0e8bdff8771520"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a9e6f29d0f744930cdd0e8bdff8771520">AVHWFramesContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00229">hwcontext.h:229</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_af48b509be5f507fd2dee12103874d225"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#af48b509be5f507fd2dee12103874d225">QSVVPPContext::filter_frame</a></div><div class="ttdeci">int(* filter_frame)(AVFilterLink *outlink, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00050">qsvvpp.c:50</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a59c4084d2294774249658290c16137d2"><div class="ttname"><a href="qsvvpp_8c.html#a59c4084d2294774249658290c16137d2">IS_OPAQUE_MEMORY</a></div><div class="ttdeci">#define IS_OPAQUE_MEMORY(mode)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00037">qsvvpp.c:37</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html"><div class="ttname"><a href="struct_a_v_filter_link.html">AVFilterLink</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00471">avfilter.h:471</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a62f9c20541a83d37db7072126ff0060d"><div class="ttname"><a href="struct_a_v_frame.html#a62f9c20541a83d37db7072126ff0060d">AVFrame::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00396">frame.h:396</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a045bc1713932804f6ceef170a5578e0e"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a045bc1713932804f6ceef170a5578e0e">AVHWFramesContext::format</a></div><div class="ttdeci">enum AVPixelFormat format</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00199">hwcontext.h:209</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_aa20cb354b6f120499dfc2f18744e24e6"><div class="ttname"><a href="qsvvpp_8c.html#aa20cb354b6f120499dfc2f18744e24e6">init_vpp_session</a></div><div class="ttdeci">static int init_vpp_session(AVFilterContext *avctx, QSVVPPContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00402">qsvvpp.c:402</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a57ebafa8b3520aa3c0fb8a1a893559cf"><div class="ttname"><a href="qsvvpp_8c.html#a57ebafa8b3520aa3c0fb8a1a893559cf">frame_alloc</a></div><div class="ttdeci">static mfxStatus frame_alloc(mfxHDL pthis, mfxFrameAllocRequest *req, mfxFrameAllocResponse *resp)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00080">qsvvpp.c:80</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html"><div class="ttname"><a href="struct_a_v_filter_context.html">AVFilterContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00341">avfilter.h:341</a></div></div>
<div class="ttc" id="aavfilter_8c_html_a65d6e9755eadf69367843dfc738143b4"><div class="ttname"><a href="avfilter_8c.html#a65d6e9755eadf69367843dfc738143b4">ff_filter_frame</a></div><div class="ttdeci">int ff_filter_frame(AVFilterLink *link, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8c_source.html#l01091">avfilter.c:1091</a></div></div>
<div class="ttc" id="apixdesc_8c_html_afe0c3e8aef5173de28bbdaea4298f5f0"><div class="ttname"><a href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a></div><div class="ttdeci">const AVPixFmtDescriptor * av_pix_fmt_desc_get(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02573">pixdesc.c:2573</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html_acb8452e99cd75074b93800b532c6ea4b"><div class="ttname"><a href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">AVBufferRef::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00089">buffer.h:89</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a720b17cc89203cfc793b5d7e17a6ca88"><div class="ttname"><a href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a></div><div class="ttdeci">The exact code depends on how similar the blocks are and how related they are to the and needs to apply these operations to the correct inlink or outlink if there are several Macros are available to factor that when no extra processing is inlink</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00212">filter_design.txt:212</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_abf56c75c3b9e9fc1f9e55d41950f3214"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#abf56c75c3b9e9fc1f9e55d41950f3214">QSVVPPContext::out_mem_mode</a></div><div class="ttdeci">int out_mem_mode</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00057">qsvvpp.c:57</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html_a5cf8ccec878e6d90d0b111b79b2340ee"><div class="ttname"><a href="struct_a_v_filter_context.html#a5cf8ccec878e6d90d0b111b79b2340ee">AVFilterContext::nb_inputs</a></div><div class="ttdeci">unsigned nb_inputs</div><div class="ttdoc">number of input pads</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00350">avfilter.h:350</a></div></div>
<div class="ttc" id="astruct_a_v_q_s_v_frames_context_html"><div class="ttname"><a href="struct_a_v_q_s_v_frames_context.html">AVQSVFramesContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__qsv_8h_source.html#l00042">hwcontext_qsv.h:42</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_a66a7e1ebc7e459ce07d3de6639ac7e38"><div class="ttname"><a href="hwcontext_8c.html#a66a7e1ebc7e459ce07d3de6639ac7e38">av_hwframe_ctx_init</a></div><div class="ttdeci">int av_hwframe_ctx_init(AVBufferRef *ref)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00333">hwcontext.c:333</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html">QSVVPPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00048">qsvvpp.c:48</a></div></div>
<div class="ttc" id="apixdesc_8h_html"><div class="ttname"><a href="pixdesc_8h.html">pixdesc.h</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_ac45a7c039eb4e084b692f69ff5f2e217"><div class="ttname"><a href="hwcontext_8c.html#ac45a7c039eb4e084b692f69ff5f2e217">av_hwframe_ctx_alloc</a></div><div class="ttdeci">AVBufferRef * av_hwframe_ctx_alloc(AVBufferRef *device_ref_in)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00247">hwcontext.c:247</a></div></div>
<div class="ttc" id="astruct_a_v_q_s_v_frames_context_html_a748121791d286d4099c8073152973d70"><div class="ttname"><a href="struct_a_v_q_s_v_frames_context.html#a748121791d286d4099c8073152973d70">AVQSVFramesContext::surfaces</a></div><div class="ttdeci">mfxFrameSurface1 * surfaces</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__qsv_8h_source.html#l00043">hwcontext_qsv.h:43</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_device_context_html_a46055b48d1a40445d775b4ae24f77f20"><div class="ttname"><a href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">AVHWDeviceContext::hwctx</a></div><div class="ttdeci">void * hwctx</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00092">hwcontext.h:92</a></div></div>
<div class="ttc" id="astruct_a_v_q_s_v_device_context_html"><div class="ttname"><a href="struct_a_v_q_s_v_device_context.html">AVQSVDeviceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__qsv_8h_source.html#l00035">hwcontext_qsv.h:35</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a41c64e3682529dd5caca6f7d5d3c19c7"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a41c64e3682529dd5caca6f7d5d3c19c7">AV_PIX_FMT_BGRA</a></div><div class="ttdeci">@ AV_PIX_FMT_BGRA</div><div class="ttdoc">packed BGRA 8:8:8:8, 32bpp, BGRABGRA...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00095">pixfmt.h:95</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_param_html_a3e3f94c259a5d284f820297266f88592"><div class="ttname"><a href="struct_q_s_v_v_p_p_param.html#a3e3f94c259a5d284f820297266f88592">QSVVPPParam::num_crop</a></div><div class="ttdeci">int num_crop</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00061">qsvvpp.h:61</a></div></div>
<div class="ttc" id="amathematics_8h_html"><div class="ttname"><a href="mathematics_8h.html">mathematics.h</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_crop_html"><div class="ttname"><a href="struct_q_s_v_v_p_p_crop.html">QSVVPPCrop</a></div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00044">qsvvpp.h:44</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga4ebaa288c7684a26a591c501208910e4"><div class="ttname"><a href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a></div><div class="ttdeci">#define AVERROR_UNKNOWN</div><div class="ttdoc">Unknown error, typically from an external library.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00071">error.h:71</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a1efd10db9d097b6d27054da46e06e133"><div class="ttname"><a href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">AVFilterLink::h</a></div><div class="ttdeci">int h</div><div class="ttdoc">agreed upon image height</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00482">avfilter.h:482</a></div></div>
<div class="ttc" id="avideo_8h_html"><div class="ttname"><a href="video_8h.html">video.h</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a4f6498edf851231d9dc032fdbac77f14"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a4f6498edf851231d9dc032fdbac77f14">QSVVPPContext::vpp_param</a></div><div class="ttdeci">mfxVideoParam vpp_param</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00052">qsvvpp.c:52</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_ad772775371590f4ae0801b6bc869fbf8"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#ad772775371590f4ae0801b6bc869fbf8">QSVVPPContext::out_frame_list</a></div><div class="ttdeci">QSVFrame * out_frame_list</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00059">qsvvpp.c:59</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a29493fbfabaa21432c360a090426aa8e"><div class="ttname"><a href="struct_a_v_frame.html#a29493fbfabaa21432c360a090426aa8e">AVFrame::hw_frames_ctx</a></div><div class="ttdeci">AVBufferRef * hw_frames_ctx</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00647">frame.h:647</a></div></div>
<div class="ttc" id="aqsvvpp_8h_html"><div class="ttname"><a href="qsvvpp_8h.html">qsvvpp.h</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a91497a3cf284780b8376b31767c00da1"><div class="ttname"><a href="qsvvpp_8c.html#a91497a3cf284780b8376b31767c00da1">clear_unused_frames</a></div><div class="ttdeci">static void clear_unused_frames(QSVFrame *list)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00232">qsvvpp.c:232</a></div></div>
<div class="ttc" id="astruct_q_s_v_frame_html_abcae6f753ae92915cb0f691bd0bd981e"><div class="ttname"><a href="struct_q_s_v_frame.html#abcae6f753ae92915cb0f691bd0bd981e">QSVFrame::surface_internal</a></div><div class="ttdeci">mfxFrameSurface1 surface_internal</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00043">qsvvpp.c:43</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a9c3a94dcd9c96e19059b56a6bae9c764"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a9c3a94dcd9c96e19059b56a6bae9c764">AVHWFramesContext::initial_pool_size</a></div><div class="ttdeci">int initial_pool_size</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00199">hwcontext.h:199</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aef11fd783ad17b6841af82efa07c859e"><div class="ttname"><a href="struct_a_v_frame.html#aef11fd783ad17b6841af82efa07c859e">AVFrame::repeat_pict</a></div><div class="ttdeci">int repeat_pict</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00450">frame.h:450</a></div></div>
<div class="ttc" id="ahwcontext__qsv_8c_html_a3f6f34808101299d4cd094fcb313e919"><div class="ttname"><a href="hwcontext__qsv_8c.html#a3f6f34808101299d4cd094fcb313e919">handle_type</a></div><div class="ttdeci">mfxHandleType handle_type</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__qsv_8c_source.html#l00089">hwcontext_qsv.c:89</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_device_context_html"><div class="ttname"><a href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00061">hwcontext.h:61</a></div></div>
<div class="ttc" id="astruct_q_s_v_frame_html_a289930c8820e30fcaf7e4a4546dc6444"><div class="ttname"><a href="struct_q_s_v_frame.html#a289930c8820e30fcaf7e4a4546dc6444">QSVFrame::next</a></div><div class="ttdeci">struct QSVFrame * next</div><div class="ttdef"><b>Definition:</b> <a href="qsv__internal_8h_source.html#l00082">qsv_internal.h:82</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a7f761518da738c704676c6a5f08eeb8e"><div class="ttname"><a href="struct_a_v_frame.html#a7f761518da738c704676c6a5f08eeb8e">AVFrame::interlaced_frame</a></div><div class="ttdeci">int interlaced_frame</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00455">frame.h:455</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gac700017c5270c79c1e1befdeeb008b2f"><div class="ttname"><a href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a></div><div class="ttdeci">AVFrame * av_frame_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00190">frame.c:190</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_ae61bbe1d8645a0c573085e29f1d0a58f"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#ae61bbe1d8645a0c573085e29f1d0a58f">AVHWFramesContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00229">hwcontext.h:229</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_crop_html_a2ca0e5c6727e2a34f7fe0e2ed415dc5f"><div class="ttname"><a href="struct_q_s_v_v_p_p_crop.html#a2ca0e5c6727e2a34f7fe0e2ed415dc5f">QSVVPPCrop::h</a></div><div class="ttdeci">int h</div><div class="ttdoc">Crop rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00046">qsvvpp.h:46</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_crop_html_a7158b1519de9fd29b8fb21070d325544"><div class="ttname"><a href="struct_q_s_v_v_p_p_crop.html#a7158b1519de9fd29b8fb21070d325544">QSVVPPCrop::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00046">qsvvpp.h:46</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a7d537039ea0e18164d9edb0b5ca984dd"><div class="ttname"><a href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample format(the sample packing is implied by the sample format) and sample rate. The lists are not just lists</div></div>
<div class="ttc" id="aqsvvpp_8c_html_a7f5de9032aaf8da2a66d6dba2cb7e451"><div class="ttname"><a href="qsvvpp_8c.html#a7f5de9032aaf8da2a66d6dba2cb7e451">ff_qsvvpp_create</a></div><div class="ttdeci">int ff_qsvvpp_create(AVFilterContext *avctx, QSVVPPContext **vpp, QSVVPPParam *param)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00561">qsvvpp.c:561</a></div></div>
<div class="ttc" id="aqsv__internal_8h_html_a9e63255b01ca95d0077cda19c15617ee"><div class="ttname"><a href="qsv__internal_8h.html#a9e63255b01ca95d0077cda19c15617ee">QSV_RUNTIME_VERSION_ATLEAST</a></div><div class="ttdeci">#define QSV_RUNTIME_VERSION_ATLEAST(MFX_VERSION, MAJOR, MINOR)</div><div class="ttdef"><b>Definition:</b> <a href="qsv__internal_8h_source.html#l00059">qsv_internal.h:59</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a69eccc892f2e9d4457df3f077280444b"><div class="ttname"><a href="qsvvpp_8c.html#a69eccc892f2e9d4457df3f077280444b">QSVFrame</a></div><div class="ttdeci">struct QSVFrame QSVFrame</div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a2f3908bfadd569103b67ee4972ee7305"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a2f3908bfadd569103b67ee4972ee7305">AVHWFramesContext::device_ref</a></div><div class="ttdeci">AVBufferRef * device_ref</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00141">hwcontext.h:141</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_afdd184f226427e8df71b8ac2dfc9bc35"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#afdd184f226427e8df71b8ac2dfc9bc35">QSVVPPContext::in_mem_mode</a></div><div class="ttdeci">int in_mem_mode</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00056">qsvvpp.c:56</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga46d6d32f6482a3e9c19203db5877105b"><div class="ttname"><a href="group__lavu__frame.html#ga46d6d32f6482a3e9c19203db5877105b">av_frame_clone</a></div><div class="ttdeci">AVFrame * av_frame_clone(const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00540">frame.c:540</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gaf02994a8bbeaa91d4757df179cbe567f"><div class="ttname"><a href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a></div><div class="ttdeci">int64_t av_rescale_q(int64_t a, AVRational bq, AVRational cq)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00142">mathematics.c:142</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a7331e302ea7bb48e0b605a069576e135"><div class="ttname"><a href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00039">demuxing_decoding.c:40</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a12a36c5a58a60f8cfead042d260fe939"><div class="ttname"><a href="qsvvpp_8c.html#a12a36c5a58a60f8cfead042d260fe939">default_tb</a></div><div class="ttdeci">static const AVRational default_tb</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00077">qsvvpp.c:77</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV420P</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, (1 Cr &amp; Cb sample per 2x2 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00066">pixfmt.h:66</a></div></div>
<div class="ttc" id="atime_8c_html_a4eee9c65835652a808973f4bc1641a51"><div class="ttname"><a href="time_8c.html#a4eee9c65835652a808973f4bc1641a51">av_usleep</a></div><div class="ttdeci">int av_usleep(unsigned usec)</div><div class="ttdef"><b>Definition:</b> <a href="time_8c_source.html#l00084">time.c:84</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a32d92da2d179ce01ecf3223330292551"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a32d92da2d179ce01ecf3223330292551">QSVVPPContext::session</a></div><div class="ttdeci">mfxSession session</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00049">qsvvpp.c:49</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a11a6a594845d2b9bf51b9ccc8a83c83d"><div class="ttname"><a href="filter__design_8txt.html#a11a6a594845d2b9bf51b9ccc8a83c83d">link</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a link</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00023">filter_design.txt:23</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a74f599a766c6b2c2426018d87ca5564f"><div class="ttname"><a href="qsvvpp_8c.html#a74f599a766c6b2c2426018d87ca5564f">fill_frameinfo_by_link</a></div><div class="ttdeci">static int fill_frameinfo_by_link(mfxFrameInfo *frameinfo, AVFilterLink *link)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00185">qsvvpp.c:185</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_crop_html_ab873522bc5771d96a08682e7d98f0e45"><div class="ttname"><a href="struct_q_s_v_v_p_p_crop.html#ab873522bc5771d96a08682e7d98f0e45">QSVVPPCrop::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00046">qsvvpp.h:46</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gab9b275b114ace0db95c5796bc71f3012"><div class="ttname"><a href="group__lavu__frame.html#gab9b275b114ace0db95c5796bc71f3012">av_frame_copy_props</a></div><div class="ttdeci">int av_frame_copy_props(AVFrame *dst, const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00658">frame.c:658</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga135e9e929b5033bb8f68322497b2effc"><div class="ttname"><a href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a></div><div class="ttdeci">void av_buffer_unref(AVBufferRef **buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00125">buffer.c:125</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ac755aea7c3277b09a42253882ec0444e"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ac755aea7c3277b09a42253882ec0444e">AV_PIX_FMT_YUYV422</a></div><div class="ttdeci">@ AV_PIX_FMT_YUYV422</div><div class="ttdoc">packed YUV 4:2:2, 16bpp, Y0 Cb Y1 Cr</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00067">pixfmt.h:67</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00124">hwcontext.h:124</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a2bc77d1f41fb0c630c3657ce6a52bf4a"><div class="ttname"><a href="qsvvpp_8c.html#a2bc77d1f41fb0c630c3657ce6a52bf4a">pix_fmt_to_mfx_fourcc</a></div><div class="ttdeci">static int pix_fmt_to_mfx_fourcc(int format)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00136">qsvvpp.c:136</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a6f3ee0596312c90a2ef2ad160c991188"><div class="ttname"><a href="struct_a_v_frame.html#a6f3ee0596312c90a2ef2ad160c991188">AVFrame::top_field_first</a></div><div class="ttdeci">int top_field_first</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00460">frame.h:460</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a9f17285cc70842ab252aa590b046ecf5"><div class="ttname"><a href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining list</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00025">filter_design.txt:25</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_crop_html_af919153a5aabdac30d2bacc531e5f3ef"><div class="ttname"><a href="struct_q_s_v_v_p_p_crop.html#af919153a5aabdac30d2bacc531e5f3ef">QSVVPPCrop::w</a></div><div class="ttdeci">int w</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00046">qsvvpp.h:46</a></div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a5d947aa9541b02e25db472656d69ea53"><div class="ttname"><a href="struct_a_v_filter_link.html#a5d947aa9541b02e25db472656d69ea53">AVFilterLink::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00497">avfilter.h:497</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00081">pixdesc.h:81</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ac913414b6091ce30035b21b9c0bc1c8e"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ac913414b6091ce30035b21b9c0bc1c8e">AV_PIX_FMT_QSV</a></div><div class="ttdeci">@ AV_PIX_FMT_QSV</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00222">pixfmt.h:222</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_aff20042378e0151996b280a8702d7dde"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#aff20042378e0151996b280a8702d7dde">QSVVPPContext::nb_ext_buffers</a></div><div class="ttdeci">int nb_ext_buffers</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00068">qsvvpp.c:68</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html_a0cc5743f8ccbb19f0a79da2e1f65bf79"><div class="ttname"><a href="struct_a_v_filter_context.html#a0cc5743f8ccbb19f0a79da2e1f65bf79">AVFilterContext::extra_hw_frames</a></div><div class="ttdeci">int extra_hw_frames</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00427">avfilter.h:427</a></div></div>
<div class="ttc" id="astruct_q_s_v_frame_html_a3129aeb03564ec8fb97bff1b5bf0703a"><div class="ttname"><a href="struct_q_s_v_frame.html#a3129aeb03564ec8fb97bff1b5bf0703a">QSVFrame::surface</a></div><div class="ttdeci">mfxFrameSurface1 surface</div><div class="ttdef"><b>Definition:</b> <a href="qsv__internal_8h_source.html#l00074">qsv_internal.h:74</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a3f89733f429c98ba5bc64373fb0a3f13"><div class="ttname"><a href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">AVFrame::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="ah264pred__template_8c_html_a93cca9adbbca82ea00bf3250781f6dce"><div class="ttname"><a href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a></div><div class="ttdeci">for(j=16;j &gt;0;--j)</div><div class="ttdef"><b>Definition:</b> <a href="h264pred__template_8c_source.html#l00469">h264pred_template.c:469</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a8c7265310cfab48f8488acdb3b895d13"><div class="ttname"><a href="qsvvpp_8c.html#a8c7265310cfab48f8488acdb3b895d13">ff_qsvvpp_free</a></div><div class="ttdeci">int ff_qsvvpp_free(QSVVPPContext **vpp)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00664">qsvvpp.c:664</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a54e38c3e4355321e23e0f4c7411cb8ee"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a54e38c3e4355321e23e0f4c7411cb8ee">AVHWFramesContext::hwctx</a></div><div class="ttdeci">void * hwctx</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00162">hwcontext.h:162</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_param_html_a3fa63f24d6a83d91b92724ee4d4f4151"><div class="ttname"><a href="struct_q_s_v_v_p_p_param.html#a3fa63f24d6a83d91b92724ee4d4f4151">QSVVPPParam::crop</a></div><div class="ttdeci">QSVVPPCrop * crop</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00062">qsvvpp.h:62</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a17eabe05311f1fee17a383ee133d9300"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a17eabe05311f1fee17a383ee133d9300">QSVVPPContext::surface_ptrs_in</a></div><div class="ttdeci">mfxFrameSurface1 ** surface_ptrs_in</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00062">qsvvpp.c:62</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gaec4e92f6e1e75ffaf76e07586fb0c9ed"><div class="ttname"><a href="group__lavu__frame.html#gaec4e92f6e1e75ffaf76e07586fb0c9ed">av_frame_copy</a></div><div class="ttdeci">int av_frame_copy(AVFrame *dst, const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00799">frame.c:799</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_crop_html_acdf7f5e15ff1987d2656cba27eda441a"><div class="ttname"><a href="struct_q_s_v_v_p_p_crop.html#acdf7f5e15ff1987d2656cba27eda441a">QSVVPPCrop::in_idx</a></div><div class="ttdeci">int in_idx</div><div class="ttdoc">Input index.</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00045">qsvvpp.h:45</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a147b0a4bff624106a1990c2346e53053"><div class="ttname"><a href="qsvvpp_8c.html#a147b0a4bff624106a1990c2346e53053">IS_VIDEO_MEMORY</a></div><div class="ttdeci">#define IS_VIDEO_MEMORY(mode)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00035">qsvvpp.c:35</a></div></div>
<div class="ttc" id="astruct_q_s_v_frame_html"><div class="ttname"><a href="struct_q_s_v_frame.html">QSVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="qsv__internal_8h_source.html#l00072">qsv_internal.h:72</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_param_html_ab6e74ef19832d63ecf8e0bd1b8d736dc"><div class="ttname"><a href="struct_q_s_v_v_p_p_param.html#ab6e74ef19832d63ecf8e0bd1b8d736dc">QSVVPPParam::out_sw_format</a></div><div class="ttdeci">enum AVPixelFormat out_sw_format</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00055">qsvvpp.h:58</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_ad98c9959d58461d45084a6644c26cb45"><div class="ttname"><a href="qsvvpp_8c.html#ad98c9959d58461d45084a6644c26cb45">frame_unlock</a></div><div class="ttdeci">static mfxStatus frame_unlock(mfxHDL pthis, mfxMemId mid, mfxFrameData *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00125">qsvvpp.c:125</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a40ccc70aa5b182a5e54d87bae59a6025"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a40ccc70aa5b182a5e54d87bae59a6025">QSVVPPContext::nb_surface_ptrs_out</a></div><div class="ttdeci">int nb_surface_ptrs_out</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00061">qsvvpp.c:61</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html"><div class="ttname"><a href="struct_a_v_buffer_ref.html">AVBufferRef</a></div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00081">buffer.h:81</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a4ade5981be5cf8a31c56477390786125"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a4ade5981be5cf8a31c56477390786125">QSVVPPContext::surface_ptrs_out</a></div><div class="ttdeci">mfxFrameSurface1 ** surface_ptrs_out</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00063">qsvvpp.c:63</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a4235dd42fe0349b12926a805cabea413"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a4235dd42fe0349b12926a805cabea413">QSVVPPContext::nb_surface_ptrs_in</a></div><div class="ttdeci">int nb_surface_ptrs_in</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00060">qsvvpp.c:60</a></div></div>
<div class="ttc" id="apixfmt_8h_html_afa47a1e5163830c51665a3da04a318a0"><div class="ttname"><a href="pixfmt_8h.html#afa47a1e5163830c51665a3da04a318a0">AV_PIX_FMT_RGB32</a></div><div class="ttdeci">#define AV_PIX_FMT_RGB32</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00372">pixfmt.h:372</a></div></div>
<div class="ttc" id="amem_8c_html_aedc3761897b7e9ea8ae1222b3d013c94"><div class="ttname"><a href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a></div><div class="ttdeci">void * av_mallocz_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00190">mem.c:190</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aa52bfc6605f6a3059a0c3226cc0f6567"><div class="ttname"><a href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">AVFrame::linesize</a></div><div class="ttdeci">int linesize[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00339">frame.h:339</a></div></div>
<div class="ttc" id="astruct_q_s_v_frame_html_a27124c669971fdfa00dd8f486dc9ac4c"><div class="ttname"><a href="struct_q_s_v_frame.html#a27124c669971fdfa00dd8f486dc9ac4c">QSVFrame::surface</a></div><div class="ttdeci">mfxFrameSurface1 * surface</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00042">qsvvpp.c:42</a></div></div>
<div class="ttc" id="astruct_q_s_v_frame_html_a1bc31f167ed441b3de1150c381db34d2"><div class="ttname"><a href="struct_q_s_v_frame.html#a1bc31f167ed441b3de1150c381db34d2">QSVFrame::frame</a></div><div class="ttdeci">AVFrame * frame</div><div class="ttdef"><b>Definition:</b> <a href="qsv__internal_8h_source.html#l00073">qsv_internal.h:73</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1e71ce60cedd5f3b6811714a9f7f9e0a"><div class="ttname"><a href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">AVFrame::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="ahwcontext__qsv_8h_html"><div class="ttname"><a href="hwcontext__qsv_8h.html">hwcontext_qsv.h</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_param_html_acb6785e9920aa5f43fd0d3b223face52"><div class="ttname"><a href="struct_q_s_v_v_p_p_param.html#acb6785e9920aa5f43fd0d3b223face52">QSVVPPParam::num_ext_buf</a></div><div class="ttdeci">int num_ext_buf</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00054">qsvvpp.h:54</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a4ed74bf972be6e87bd6281f29d35bef2"><div class="ttname"><a href="struct_a_v_filter_link.html#a4ed74bf972be6e87bd6281f29d35bef2">AVFilterLink::src</a></div><div class="ttdeci">AVFilterContext * src</div><div class="ttdoc">source filter</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00472">avfilter.h:472</a></div></div>
<div class="ttc" id="acommon_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a791047364870cba9824a059a30f0daab"><div class="ttname"><a href="qsvvpp_8c.html#a791047364870cba9824a059a30f0daab">frame_lock</a></div><div class="ttdeci">static mfxStatus frame_lock(mfxHDL pthis, mfxMemId mid, mfxFrameData *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00120">qsvvpp.c:120</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a9da9417a2c1eab8c4c3509e004041790"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a9da9417a2c1eab8c4c3509e004041790">QSVVPPContext::frame_infos</a></div><div class="ttdeci">mfxFrameInfo * frame_infos</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00053">qsvvpp.c:53</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a855bf9094785e4644a4e3ee2d420e7e4"><div class="ttname"><a href="qsvvpp_8c.html#a855bf9094785e4644a4e3ee2d420e7e4">map_frame_to_surface</a></div><div class="ttdeci">static int map_frame_to_surface(AVFrame *frame, mfxFrameSurface1 *surface)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00152">qsvvpp.c:152</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a></div><div class="ttdeci">@ AV_PIX_FMT_NV12</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, 1 plane for Y and 1 plane for the UV components, which are interleaved (firs...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00089">pixfmt.h:89</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_param_html"><div class="ttname"><a href="struct_q_s_v_v_p_p_param.html">QSVVPPParam</a></div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00049">qsvvpp.h:49</a></div></div>
<div class="ttc" id="asinewin__tablegen__template_8c_html_a3508a98d3ee7e2c9a4841fe264cf70f7"><div class="ttname"><a href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a></div><div class="ttdeci">#define FF_ARRAY_ELEMS(a)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen__template_8c_source.html#l00038">sinewin_tablegen_template.c:38</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1d0f65014a8d1bf78cec8cbed2304992"><div class="ttname"><a href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">AVFrame::data</a></div><div class="ttdeci">uint8_t * data[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00322">frame.h:322</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_ae4fc2598c7943370937424fa416a3b5b"><div class="ttname"><a href="qsvvpp_8c.html#ae4fc2598c7943370937424fa416a3b5b">ff_qsvvpp_filter_frame</a></div><div class="ttdeci">int ff_qsvvpp_filter_frame(QSVVPPContext *s, AVFilterLink *inlink, AVFrame *picref)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00688">qsvvpp.c:688</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aed14fa772ce46881020fd1545c86432c"><div class="ttname"><a href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">AVFrame::format</a></div><div class="ttdeci">int format</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00381">frame.h:381</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_abf6e19c9fe982458610f130353f2b6ff"><div class="ttname"><a href="struct_a_v_filter_link.html#abf6e19c9fe982458610f130353f2b6ff">AVFilterLink::format</a></div><div class="ttdeci">int format</div><div class="ttdoc">agreed upon media format</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00488">avfilter.h:488</a></div></div>
<div class="ttc" id="alibavfilter_2internal_8h_html_ac4a2f2ab57aee82cdec4b46d65cd418d"><div class="ttname"><a href="libavfilter_2internal_8h.html#ac4a2f2ab57aee82cdec4b46d65cd418d">FF_INLINK_IDX</a></div><div class="ttdeci">#define FF_INLINK_IDX(link)</div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2internal_8h_source.html#l00302">internal.h:302</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html_ae9e65e98275f789bb5fbb72c52d4f3ad"><div class="ttname"><a href="struct_a_v_filter_context.html#ae9e65e98275f789bb5fbb72c52d4f3ad">AVFilterContext::outputs</a></div><div class="ttdeci">AVFilterLink ** outputs</div><div class="ttdoc">array of pointers to output links</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00353">avfilter.h:353</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_param_html_a8efe3687dbbdbb2b6b1e43b3ba9417fa"><div class="ttname"><a href="struct_q_s_v_v_p_p_param.html#a8efe3687dbbdbb2b6b1e43b3ba9417fa">QSVVPPParam::filter_frame</a></div><div class="ttdeci">int(* filter_frame)(AVFilterLink *outlink, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00051">qsvvpp.h:51</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a42f9238aba1bcd1d214cbf551d6f8775"><div class="ttname"><a href="qsvvpp_8c.html#a42f9238aba1bcd1d214cbf551d6f8775">clear_frame_list</a></div><div class="ttdeci">static void clear_frame_list(QSVFrame **list)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00243">qsvvpp.c:243</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a6265531cbe491ec34449e3769e545f1f"><div class="ttname"><a href="pixfmt_8h.html#a6265531cbe491ec34449e3769e545f1f">AV_PIX_FMT_P010</a></div><div class="ttdeci">#define AV_PIX_FMT_P010</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00448">pixfmt.h:448</a></div></div>
<div class="ttc" id="alibsvtav1_8c_html_a710bce51374aba96ab04912897666c35"><div class="ttname"><a href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a></div><div class="ttdeci">const char * desc</div><div class="ttdef"><b>Definition:</b> <a href="libsvtav1_8c_source.html#l00079">libsvtav1.c:79</a></div></div>
<div class="ttc" id="astruct_a_v_q_s_v_device_context_html_abfdc22dbded8e90950b3dfce3f3bd83d"><div class="ttname"><a href="struct_a_v_q_s_v_device_context.html#abfdc22dbded8e90950b3dfce3f3bd83d">AVQSVDeviceContext::session</a></div><div class="ttdeci">mfxSession session</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__qsv_8h_source.html#l00036">hwcontext_qsv.h:36</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a435216cd2bc457060a31fa26dab5cf34"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a435216cd2bc457060a31fa26dab5cf34">QSVVPPContext::out_sw_format</a></div><div class="ttdeci">enum AVPixelFormat out_sw_format</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00050">qsvvpp.c:51</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a0452833e3ab6ddd7acbf82817a7818a4"><div class="ttname"><a href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">AVFrame::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00401">frame.h:401</a></div></div>
<div class="ttc" id="astruct_a_v_q_s_v_frames_context_html_a80ce1c761479c7fe226d1eeed5f131ed"><div class="ttname"><a href="struct_a_v_q_s_v_frames_context.html#a80ce1c761479c7fe226d1eeed5f131ed">AVQSVFramesContext::nb_surfaces</a></div><div class="ttdeci">int nb_surfaces</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__qsv_8h_source.html#l00044">hwcontext_qsv.h:44</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_af93f40c8cf44a5858a95ff0bb8f714fb"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#af93f40c8cf44a5858a95ff0bb8f714fb">QSVVPPContext::ext_buffers</a></div><div class="ttdeci">mfxExtBuffer ** ext_buffers</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00067">qsvvpp.c:67</a></div></div>
<div class="ttc" id="amacros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a7b75b04b9c8b71faf7ab4271327949f8"><div class="ttname"><a href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">AVFilterLink::hw_frames_ctx</a></div><div class="ttdeci">AVBufferRef * hw_frames_ctx</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00616">avfilter.h:616</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="ahwcontext_8h_html"><div class="ttname"><a href="hwcontext_8h.html">hwcontext.h</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa102cde7ec5acbc099c3bcbb58556a18"><div class="ttname"><a href="group__lavu__error.html#gaa102cde7ec5acbc099c3bcbb58556a18">AVERROR_BUG</a></div><div class="ttdeci">#define AVERROR_BUG</div><div class="ttdoc">Internal bug, also see AVERROR_BUG2.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00050">error.h:50</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a84b5a80a82e36c692712b4f0928e3edc"><div class="ttname"><a href="qsvvpp_8c.html#a84b5a80a82e36c692712b4f0928e3edc">IS_SYSTEM_MEMORY</a></div><div class="ttdeci">#define IS_SYSTEM_MEMORY(mode)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00038">qsvvpp.c:38</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html_addd946fbe5af506a2b19f9ad7cb97c35"><div class="ttname"><a href="struct_a_v_filter_context.html#addd946fbe5af506a2b19f9ad7cb97c35">AVFilterContext::hw_device_ctx</a></div><div class="ttdeci">AVBufferRef * hw_device_ctx</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00397">avfilter.h:397</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_adcdeba02cfe512b3634ac44094b88bd9"><div class="ttname"><a href="qsvvpp_8c.html#adcdeba02cfe512b3634ac44094b88bd9">get_free_frame</a></div><div class="ttdeci">static QSVFrame * get_free_frame(QSVFrame **list)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00255">qsvvpp.c:255</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a663a9aceca97aa7b2426c9aba6543e4a"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a663a9aceca97aa7b2426c9aba6543e4a">AVHWFramesContext::sw_format</a></div><div class="ttdeci">enum AVPixelFormat sw_format</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00199">hwcontext.h:222</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a0869d85470b167852be39ecd19cf5027"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a0869d85470b167852be39ecd19cf5027">QSVVPPContext::opaque_alloc</a></div><div class="ttdeci">mfxExtOpaqueSurfaceAlloc opaque_alloc</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00066">qsvvpp.c:66</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html_a6837bf4b3d70c0a2bd3122f9daadc0d4"><div class="ttname"><a href="struct_a_v_filter_context.html#a6837bf4b3d70c0a2bd3122f9daadc0d4">AVFilterContext::inputs</a></div><div class="ttdeci">AVFilterLink ** inputs</div><div class="ttdoc">array of pointers to input links</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00349">avfilter.h:349</a></div></div>
<div class="ttc" id="astruct_a_v_q_s_v_frames_context_html_aadf9983d5965bd4c2cbe09c25fa2757a"><div class="ttname"><a href="struct_a_v_q_s_v_frames_context.html#aadf9983d5965bd4c2cbe09c25fa2757a">AVQSVFramesContext::frame_type</a></div><div class="ttdeci">int frame_type</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__qsv_8h_source.html#l00049">hwcontext_qsv.h:49</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a08e3e25929bb29d5f6ef768343ff7f57"><div class="ttname"><a href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">AVFilterLink::w</a></div><div class="ttdeci">int w</div><div class="ttdoc">agreed upon image width</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00481">avfilter.h:481</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_adfa5aaa3a4f69b163ea30cadc6d663dc"><div class="ttname"><a href="hwcontext_8c.html#adfa5aaa3a4f69b163ea30cadc6d663dc">av_hwframe_get_buffer</a></div><div class="ttdeci">int av_hwframe_get_buffer(AVBufferRef *hwframe_ref, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00502">hwcontext.c:502</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_acb8eeb6e668f19381ec8cac034decd71"><div class="ttname"><a href="qsvvpp_8c.html#acb8eeb6e668f19381ec8cac034decd71">frame_free</a></div><div class="ttdeci">static mfxStatus frame_free(mfxHDL pthis, mfxFrameAllocResponse *resp)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00114">qsvvpp.c:114</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_context_html_a9a18b52d9112dd11ef1cdd6c7332c116"><div class="ttname"><a href="struct_q_s_v_v_p_p_context.html#a9a18b52d9112dd11ef1cdd6c7332c116">QSVVPPContext::in_frame_list</a></div><div class="ttdeci">QSVFrame * in_frame_list</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00058">qsvvpp.c:58</a></div></div>
<div class="ttc" id="astruct_q_s_v_v_p_p_param_html_a78c483363bac66686d013743bb56b194"><div class="ttname"><a href="struct_q_s_v_v_p_p_param.html#a78c483363bac66686d013743bb56b194">QSVVPPParam::ext_buf</a></div><div class="ttdeci">mfxExtBuffer ** ext_buf</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8h_source.html#l00055">qsvvpp.h:55</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a3b6bbad6e4b9fac5e0f42b6ccee4bf14"><div class="ttname"><a href="qsvvpp_8c.html#a3b6bbad6e4b9fac5e0f42b6ccee4bf14">submit_frame</a></div><div class="ttdeci">static QSVFrame * submit_frame(QSVVPPContext *s, AVFilterLink *inlink, AVFrame *picref)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00278">qsvvpp.c:278</a></div></div>
<div class="ttc" id="aqsvvpp_8c_html_a0f9fbd1763ef6d16eabfa044f283768a"><div class="ttname"><a href="qsvvpp_8c.html#a0f9fbd1763ef6d16eabfa044f283768a">query_frame</a></div><div class="ttdeci">static QSVFrame * query_frame(QSVVPPContext *s, AVFilterLink *outlink)</div><div class="ttdef"><b>Definition:</b> <a href="qsvvpp_8c_source.html#l00350">qsvvpp.c:350</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
