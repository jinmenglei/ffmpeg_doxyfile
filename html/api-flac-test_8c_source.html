<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/tests/api/api-flac-test.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_029ae61b19cf5d51b5f5dd6fbc0ef0d6.html">tests</a></li><li class="navelem"><a class="el" href="dir_3f21608da9d407bcd40b8c1e719950c9.html">api</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">api-flac-test.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="api-flac-test_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2015 Ludmila Glinskih</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2001 Fabrice Bellard</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a copy</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * in the Software without restriction, including without limitation the rights</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * copies of the Software, and to permit persons to whom the Software is</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * furnished to do so, subject to the following conditions:</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included in</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * THE SOFTWARE.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * FLAC codec test.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * Encodes raw data to FLAC format and decodes it back to raw. Compares raw-data</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * after that.</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">libavcodec/avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">libavutil/common.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="samplefmt_8h.html">libavutil/samplefmt.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="api-flac-test_8c.html#a6459ff7599096f561bf89e7c2cdcffed">   34</a></span>&#160;<span class="preprocessor">#define NUMBER_OF_AUDIO_FRAMES 200</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="api-flac-test_8c.html#a8f0aae02907a64569feacada6439a152">   35</a></span>&#160;<span class="preprocessor">#define NAME_BUFF_SIZE 100</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/* generate i-th frame of test audio */</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="api-flac-test_8c.html#a27cc2d5171f95fc148d4e0cb899cf02e">   38</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="api-flac-test_8c.html#a27cc2d5171f95fc148d4e0cb899cf02e">generate_raw_frame</a>(uint16_t *frame_data, <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keywordtype">int</span> <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                              <span class="keywordtype">int</span> <a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>, <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">int</span> j, k;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>; j++) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        frame_data[<a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a> * j] = 10000 * ((j / 10 * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) % 2);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keywordflow">for</span> (k = 1; k &lt; <a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>; k++)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            frame_data[<a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a> * j + k] = frame_data[<a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a> * j] * (k + 1);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="api-flac-test_8c.html#a6bef7c1bc3d20facbd48799a363c02b2">   51</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="api-flac-test_8c.html#a6bef7c1bc3d20facbd48799a363c02b2">init_encoder</a>(<a class="code" href="struct_a_v_codec.html">AVCodec</a> *enc, <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> **enc_ctx,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                        int64_t ch_layout, <span class="keywordtype">int</span> <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">char</span> name_buff[<a class="code" href="api-flac-test_8c.html#a8f0aae02907a64569feacada6439a152">NAME_BUFF_SIZE</a>];</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="group__channel__mask__c.html#ga99d0b5bb80534d13a6cc96336cf9076a">av_get_channel_layout_string</a>(name_buff, <a class="code" href="api-flac-test_8c.html#a8f0aae02907a64569feacada6439a152">NAME_BUFF_SIZE</a>, 0, ch_layout);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;channel layout: %s, sample rate: %i\n&quot;</span>, name_buff, <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="group__lavc__core.html#gae80afec6f26df6607eaacf39b561c315">avcodec_alloc_context3</a>(enc);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t allocate encoder context\n&quot;</span>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_fmt = <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_rate = <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_layout = ch_layout;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = <a class="code" href="group__lavc__core.html#ga11f785a188d7d9df71621001465b0f1d">avcodec_open2</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, enc, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> &lt; 0) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t open encoder\n&quot;</span>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    *enc_ctx = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="api-flac-test_8c.html#a8a80cb921d199470b93f341837044b58">   81</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="api-flac-test_8c.html#a8a80cb921d199470b93f341837044b58">init_decoder</a>(<a class="code" href="struct_a_v_codec.html">AVCodec</a> *dec, <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> **<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                        int64_t ch_layout)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="group__lavc__core.html#gae80afec6f26df6607eaacf39b561c315">avcodec_alloc_context3</a>(dec);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a> , <span class="stringliteral">&quot;Can&#39;t allocate decoder context\n&quot;</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;request_sample_fmt = <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">/* XXX: FLAC ignores it for some reason */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;request_channel_layout = ch_layout;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_layout = ch_layout;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = <a class="code" href="group__lavc__core.html#ga11f785a188d7d9df71621001465b0f1d">avcodec_open2</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, dec, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> &lt; 0) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t open decoder\n&quot;</span>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    *<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="api-flac-test_8c.html#a91f491b47a5e5b08495f56c457413b54">  108</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="api-flac-test_8c.html#a91f491b47a5e5b08495f56c457413b54">run_test</a>(<a class="code" href="struct_a_v_codec.html">AVCodec</a> *enc, <a class="code" href="struct_a_v_codec.html">AVCodec</a> *dec, <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc_ctx,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> enc_pkt;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *in_frame, *out_frame;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *raw_in = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *raw_out = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">int</span> in_offset = 0, out_offset = 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = 0;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">int</span> got_output = 0;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">int</span> in_frame_bytes, out_frame_bytes;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    in_frame = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (!in_frame) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t allocate input frame\n&quot;</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    in_frame-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a> = enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    in_frame-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a> = enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">sample_fmt</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    in_frame-&gt;<a class="code" href="struct_a_v_frame.html#a5f343e0325e3e9d9ed20e34c9e156aef">channel_layout</a> = enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">channel_layout</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__frame.html#ga6b1acbfa82c79bf7fd78d868572f0ceb">av_frame_get_buffer</a>(in_frame, 0) != 0) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t allocate a buffer for input frame\n&quot;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    out_frame = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (!out_frame) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t allocate output frame\n&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    raw_in = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(in_frame-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] * <a class="code" href="api-flac-test_8c.html#a6459ff7599096f561bf89e7c2cdcffed">NUMBER_OF_AUDIO_FRAMES</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (!raw_in) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t allocate memory for raw_in\n&quot;</span>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    raw_out = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(in_frame-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] * <a class="code" href="api-flac-test_8c.html#a6459ff7599096f561bf89e7c2cdcffed">NUMBER_OF_AUDIO_FRAMES</a>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (!raw_out) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t allocate memory for raw_out\n&quot;</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="api-flac-test_8c.html#a6459ff7599096f561bf89e7c2cdcffed">NUMBER_OF_AUDIO_FRAMES</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;enc_pkt);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        enc_pkt.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        enc_pkt.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = 0;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="api-flac-test_8c.html#a27cc2d5171f95fc148d4e0cb899cf02e">generate_raw_frame</a>((uint16_t*)(in_frame-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0]), <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                           enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a>, enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        in_frame_bytes = in_frame-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a> * in_frame-&gt;<a class="code" href="struct_a_v_frame.html#a58c663568a99c1477c163e64858b3fef">channels</a> * <span class="keyword">sizeof</span>(uint16_t);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">if</span> (in_frame_bytes &gt; in_frame-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0]) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Incorrect value of input frame linesize\n&quot;</span>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        memcpy(raw_in + in_offset, in_frame-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0], in_frame_bytes);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        in_offset += in_frame_bytes;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = <a class="code" href="group__lavc__encoding.html#gae4b5ba4d50b1264a5cf5408ff32fb622">avcodec_encode_audio2</a>(enc_ctx, &amp;enc_pkt, in_frame, &amp;got_output);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> &lt; 0) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error encoding audio frame\n&quot;</span>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">/* if we get an encoded packet, feed it straight to the decoder */</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span> (got_output) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = <a class="code" href="group__lavc__decoding.html#gaaa1fbe477c04455cdc7a994090100db4">avcodec_decode_audio4</a>(<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>, out_frame, &amp;got_output, &amp;enc_pkt);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> &lt; 0) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error decoding audio packet\n&quot;</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">if</span> (got_output) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> != enc_pkt.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Decoder consumed only part of a packet, it is allowed to do so -- need to update this test\n&quot;</span>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="keywordflow">if</span> (in_frame-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a> != out_frame-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a>) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error frames before and after decoding has different number of samples\n&quot;</span>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="keywordflow">if</span> (in_frame-&gt;<a class="code" href="struct_a_v_frame.html#a5f343e0325e3e9d9ed20e34c9e156aef">channel_layout</a> != out_frame-&gt;<a class="code" href="struct_a_v_frame.html#a5f343e0325e3e9d9ed20e34c9e156aef">channel_layout</a>) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error frames before and after decoding has different channel layout\n&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="keywordflow">if</span> (in_frame-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a> != out_frame-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a>) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error frames before and after decoding has different sample format\n&quot;</span>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                out_frame_bytes = out_frame-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a> * out_frame-&gt;<a class="code" href="struct_a_v_frame.html#a58c663568a99c1477c163e64858b3fef">channels</a> * <span class="keyword">sizeof</span>(uint16_t);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <span class="keywordflow">if</span> (out_frame_bytes &gt; out_frame-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0]) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Incorrect value of output frame linesize\n&quot;</span>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                memcpy(raw_out + out_offset, out_frame-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0], out_frame_bytes);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                out_offset += out_frame_bytes;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;enc_pkt);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span> (memcmp(raw_in, raw_out, out_frame_bytes * <a class="code" href="api-flac-test_8c.html#a6459ff7599096f561bf89e7c2cdcffed">NUMBER_OF_AUDIO_FRAMES</a>) != 0) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Output differs\n&quot;</span>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;OK\n&quot;</span>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;raw_in);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;raw_out);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;in_frame);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;out_frame);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="api-flac-test_8c.html#a840291bc02cba5474a4cb46a9b9566fe">  226</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="api-flac-test_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="struct_a_v_codec.html">AVCodec</a> *enc = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *dec = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc_ctx = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    uint64_t <a class="code" href="dca__lbr_8c.html#a3e70a65f622cd9cd1b7ea3d2a19bca5d">channel_layouts</a>[] = {<a class="code" href="group__channel__mask__c.html#gabc6d6651bba254cd0fa2c42a57228e65">AV_CH_LAYOUT_STEREO</a>, <a class="code" href="group__channel__mask__c.html#gae9da5d6069701241a22f3af19b152662">AV_CH_LAYOUT_5POINT1_BACK</a>, <a class="code" href="group__channel__mask__c.html#ga625aec7f2285dc35e3ed801e91889564">AV_CH_LAYOUT_SURROUND</a>, <a class="code" href="group__channel__mask__c.html#ga3004e784b29fd907a0d4aebeca0e6933">AV_CH_LAYOUT_STEREO_DOWNMIX</a>};</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ffmpeg__filter_8c.html#a12ee30995b3ac94a573f01870d1289e8">sample_rates</a>[] = {8000, 44100, 48000, 192000};</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">int</span> cl, sr;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    enc = <a class="code" href="group__lavc__core.html#ga9f820c481615c3a02d0407bac0bdbf25">avcodec_find_encoder</a>(<a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceabab880efbebbd91d3817debef9e4dc00">AV_CODEC_ID_FLAC</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (!enc) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t find encoder\n&quot;</span>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    dec = <a class="code" href="group__lavc__core.html#ga19a0ca553277f019dd5b0fec6e1f9dca">avcodec_find_decoder</a>(<a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceabab880efbebbd91d3817debef9e4dc00">AV_CODEC_ID_FLAC</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (!dec) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t find decoder\n&quot;</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">for</span> (cl = 0; cl &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="dca__lbr_8c.html#a3e70a65f622cd9cd1b7ea3d2a19bca5d">channel_layouts</a>); cl++) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">for</span> (sr = 0; sr &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="ffmpeg__filter_8c.html#a12ee30995b3ac94a573f01870d1289e8">sample_rates</a>); sr++) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="api-flac-test_8c.html#a6bef7c1bc3d20facbd48799a363c02b2">init_encoder</a>(enc, &amp;enc_ctx, <a class="code" href="dca__lbr_8c.html#a3e70a65f622cd9cd1b7ea3d2a19bca5d">channel_layouts</a>[cl], <a class="code" href="ffmpeg__filter_8c.html#a12ee30995b3ac94a573f01870d1289e8">sample_rates</a>[sr]) != 0)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="api-flac-test_8c.html#a8a80cb921d199470b93f341837044b58">init_decoder</a>(dec, &amp;<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>, <a class="code" href="dca__lbr_8c.html#a3e70a65f622cd9cd1b7ea3d2a19bca5d">channel_layouts</a>[cl]) != 0)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="api-flac-test_8c.html#a91f491b47a5e5b08495f56c457413b54">run_test</a>(enc, dec, enc_ctx, <a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>) != 0)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <a class="code" href="group__lavc__core.html#gaf869d0829ed607cec3a4a02a1c7026b3">avcodec_free_context</a>(&amp;enc_ctx);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <a class="code" href="group__lavc__core.html#gaf869d0829ed607cec3a4a02a1c7026b3">avcodec_free_context</a>(&amp;<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aec57f0d859a6df8b479cd93ca3a44a33"><div class="ttname"><a href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">AVCodecContext::frame_size</a></div><div class="ttdeci">int frame_size</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01206">avcodec.h:1206</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga6b1acbfa82c79bf7fd78d868572f0ceb"><div class="ttname"><a href="group__lavu__frame.html#ga6b1acbfa82c79bf7fd78d868572f0ceb">av_frame_get_buffer</a></div><div class="ttdeci">int av_frame_get_buffer(AVFrame *frame, int align)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00337">frame.c:337</a></div></div>
<div class="ttc" id="agroup__lavc__encoding_html_gae4b5ba4d50b1264a5cf5408ff32fb622"><div class="ttname"><a href="group__lavc__encoding.html#gae4b5ba4d50b1264a5cf5408ff32fb622">avcodec_encode_audio2</a></div><div class="ttdeci">attribute_deprecated int avcodec_encode_audio2(AVCodecContext *avctx, AVPacket *avpkt, const AVFrame *frame, int *got_packet_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="encode_8c_source.html#l00434">encode.c:434</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a58c663568a99c1477c163e64858b3fef"><div class="ttname"><a href="struct_a_v_frame.html#a58c663568a99c1477c163e64858b3fef">AVFrame::channels</a></div><div class="ttdeci">int channels</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00614">frame.h:614</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gaaa1fbe477c04455cdc7a994090100db4"><div class="ttname"><a href="group__lavc__decoding.html#gaaa1fbe477c04455cdc7a994090100db4">avcodec_decode_audio4</a></div><div class="ttdeci">attribute_deprecated int avcodec_decode_audio4(AVCodecContext *avctx, AVFrame *frame, int *got_frame_ptr, const AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l00833">decode.c:833</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga99d0b5bb80534d13a6cc96336cf9076a"><div class="ttname"><a href="group__channel__mask__c.html#ga99d0b5bb80534d13a6cc96336cf9076a">av_get_channel_layout_string</a></div><div class="ttdeci">void av_get_channel_layout_string(char *buf, int buf_size, int nb_channels, uint64_t channel_layout)</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8c_source.html#l00217">channel_layout.c:217</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceabab880efbebbd91d3817debef9e4dc00"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceabab880efbebbd91d3817debef9e4dc00">AV_CODEC_ID_FLAC</a></div><div class="ttdeci">@ AV_CODEC_ID_FLAC</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00430">codec_id.h:430</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga4ebaa288c7684a26a591c501208910e4"><div class="ttname"><a href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a></div><div class="ttdeci">#define AVERROR_UNKNOWN</div><div class="ttdoc">Unknown error, typically from an external library.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00071">error.h:71</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a9feef5270e0e54f103868362df0cd27a"><div class="ttname"><a href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a></div><div class="ttdeci">sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="aapi-flac-test_8c_html_a91f491b47a5e5b08495f56c457413b54"><div class="ttname"><a href="api-flac-test_8c.html#a91f491b47a5e5b08495f56c457413b54">run_test</a></div><div class="ttdeci">static int run_test(AVCodec *enc, AVCodec *dec, AVCodecContext *enc_ctx, AVCodecContext *dec_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="api-flac-test_8c_source.html#l00108">api-flac-test.c:108</a></div></div>
<div class="ttc" id="asamplefmt_8h_html"><div class="ttname"><a href="samplefmt_8h.html">samplefmt.h</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga9f820c481615c3a02d0407bac0bdbf25"><div class="ttname"><a href="group__lavc__core.html#ga9f820c481615c3a02d0407bac0bdbf25">avcodec_find_encoder</a></div><div class="ttdeci">AVCodec * avcodec_find_encoder(enum AVCodecID id)</div><div class="ttdef"><b>Definition:</b> <a href="allcodecs_8c_source.html#l00933">allcodecs.c:933</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gabc6d6651bba254cd0fa2c42a57228e65"><div class="ttname"><a href="group__channel__mask__c.html#gabc6d6651bba254cd0fa2c42a57228e65">AV_CH_LAYOUT_STEREO</a></div><div class="ttdeci">#define AV_CH_LAYOUT_STEREO</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00091">channel_layout.h:91</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gac700017c5270c79c1e1befdeeb008b2f"><div class="ttname"><a href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a></div><div class="ttdeci">AVFrame * av_frame_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00190">frame.c:190</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gae80afec6f26df6607eaacf39b561c315"><div class="ttname"><a href="group__lavc__core.html#gae80afec6f26df6607eaacf39b561c315">avcodec_alloc_context3</a></div><div class="ttdeci">AVCodecContext * avcodec_alloc_context3(const AVCodec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2options_8c_source.html#l00172">options.c:172</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ad662aa56c1696f09c0ac6b97abafac6d"><div class="ttname"><a href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a></div><div class="ttdeci">int frame_size</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02166">mxfenc.c:2166</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga3004e784b29fd907a0d4aebeca0e6933"><div class="ttname"><a href="group__channel__mask__c.html#ga3004e784b29fd907a0d4aebeca0e6933">AV_CH_LAYOUT_STEREO_DOWNMIX</a></div><div class="ttdeci">#define AV_CH_LAYOUT_STEREO_DOWNMIX</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00117">channel_layout.h:117</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="aaptx_8h_html_ac9da8d7a4bd192b8a7dccbc024542709"><div class="ttname"><a href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a></div><div class="ttdeci">channels</div><div class="ttdef"><b>Definition:</b> <a href="aptx_8h_source.html#l00033">aptx.h:33</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf51c0fafb1c1b683c7f943c2a349904"><div class="ttname"><a href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a></div><div class="ttdeci">and forward the result(frame or status change) to the corresponding input. If nothing is possible</div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaf869d0829ed607cec3a4a02a1c7026b3"><div class="ttname"><a href="group__lavc__core.html#gaf869d0829ed607cec3a4a02a1c7026b3">avcodec_free_context</a></div><div class="ttdeci">void avcodec_free_context(AVCodecContext **avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2options_8c_source.html#l00187">options.c:187</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga11f785a188d7d9df71621001465b0f1d"><div class="ttname"><a href="group__lavc__core.html#ga11f785a188d7d9df71621001465b0f1d">avcodec_open2</a></div><div class="ttdeci">int avcodec_open2(AVCodecContext *avctx, const AVCodec *codec, AVDictionary **options)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00550">utils.c:550</a></div></div>
<div class="ttc" id="aapi-flac-test_8c_html_a8f0aae02907a64569feacada6439a152"><div class="ttname"><a href="api-flac-test_8c.html#a8f0aae02907a64569feacada6439a152">NAME_BUFF_SIZE</a></div><div class="ttdeci">#define NAME_BUFF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="api-flac-test_8c_source.html#l00035">api-flac-test.c:35</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gae9da5d6069701241a22f3af19b152662"><div class="ttname"><a href="group__channel__mask__c.html#gae9da5d6069701241a22f3af19b152662">AV_CH_LAYOUT_5POINT1_BACK</a></div><div class="ttdeci">#define AV_CH_LAYOUT_5POINT1_BACK</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00103">channel_layout.h:103</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aa52bfc6605f6a3059a0c3226cc0f6567"><div class="ttname"><a href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">AVFrame::linesize</a></div><div class="ttdeci">int linesize[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00339">frame.h:339</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1bdba69ea111e2a9d03fdaa7a46a4c45"><div class="ttname"><a href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">AVCodecContext::sample_fmt</a></div><div class="ttdeci">enum AVSampleFormat sample_fmt</div><div class="ttdoc">sample format</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1194</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a5f343e0325e3e9d9ed20e34c9e156aef"><div class="ttname"><a href="struct_a_v_frame.html#a5f343e0325e3e9d9ed20e34c9e156aef">AVFrame::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00485">frame.h:485</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a12ee30995b3ac94a573f01870d1289e8"><div class="ttname"><a href="ffmpeg__filter_8c.html#a12ee30995b3ac94a573f01870d1289e8">sample_rates</a></div><div class="ttdeci">sample_rates</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="aapi-flac-test_8c_html_a6459ff7599096f561bf89e7c2cdcffed"><div class="ttname"><a href="api-flac-test_8c.html#a6459ff7599096f561bf89e7c2cdcffed">NUMBER_OF_AUDIO_FRAMES</a></div><div class="ttdeci">#define NUMBER_OF_AUDIO_FRAMES</div><div class="ttdef"><b>Definition:</b> <a href="api-flac-test_8c_source.html#l00034">api-flac-test.c:34</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a02f45ab8191aea1660159f1e464237ea"><div class="ttname"><a href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">AVFrame::nb_samples</a></div><div class="ttdeci">int nb_samples</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00374">frame.h:374</a></div></div>
<div class="ttc" id="acommon_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_S16</div><div class="ttdoc">signed 16 bits</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00061">samplefmt.h:61</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga625aec7f2285dc35e3ed801e91889564"><div class="ttname"><a href="group__channel__mask__c.html#ga625aec7f2285dc35e3ed801e91889564">AV_CH_LAYOUT_SURROUND</a></div><div class="ttdeci">#define AV_CH_LAYOUT_SURROUND</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00094">channel_layout.h:94</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga19a0ca553277f019dd5b0fec6e1f9dca"><div class="ttname"><a href="group__lavc__core.html#ga19a0ca553277f019dd5b0fec6e1f9dca">avcodec_find_decoder</a></div><div class="ttdeci">AVCodec * avcodec_find_decoder(enum AVCodecID id)</div><div class="ttdef"><b>Definition:</b> <a href="allcodecs_8c_source.html#l00938">allcodecs.c:938</a></div></div>
<div class="ttc" id="aapi-flac-test_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="api-flac-test_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdef"><b>Definition:</b> <a href="api-flac-test_8c_source.html#l00226">api-flac-test.c:226</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="asinewin__tablegen__template_8c_html_a3508a98d3ee7e2c9a4841fe264cf70f7"><div class="ttname"><a href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a></div><div class="ttdeci">#define FF_ARRAY_ELEMS(a)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen__template_8c_source.html#l00038">sinewin_tablegen_template.c:38</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1d0f65014a8d1bf78cec8cbed2304992"><div class="ttname"><a href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">AVFrame::data</a></div><div class="ttdeci">uint8_t * data[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00322">frame.h:322</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aed14fa772ce46881020fd1545c86432c"><div class="ttname"><a href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">AVFrame::format</a></div><div class="ttdeci">int format</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00381">frame.h:381</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="aapi-flac-test_8c_html_a6bef7c1bc3d20facbd48799a363c02b2"><div class="ttname"><a href="api-flac-test_8c.html#a6bef7c1bc3d20facbd48799a363c02b2">init_encoder</a></div><div class="ttdeci">static int init_encoder(AVCodec *enc, AVCodecContext **enc_ctx, int64_t ch_layout, int sample_rate)</div><div class="ttdef"><b>Definition:</b> <a href="api-flac-test_8c_source.html#l00051">api-flac-test.c:51</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="adca__lbr_8c_html_a3e70a65f622cd9cd1b7ea3d2a19bca5d"><div class="ttname"><a href="dca__lbr_8c.html#a3e70a65f622cd9cd1b7ea3d2a19bca5d">channel_layouts</a></div><div class="ttdeci">static const uint16_t channel_layouts[7]</div><div class="ttdef"><b>Definition:</b> <a href="dca__lbr_8c_source.html#l00113">dca_lbr.c:113</a></div></div>
<div class="ttc" id="aapi-flac-test_8c_html_a27cc2d5171f95fc148d4e0cb899cf02e"><div class="ttname"><a href="api-flac-test_8c.html#a27cc2d5171f95fc148d4e0cb899cf02e">generate_raw_frame</a></div><div class="ttdeci">static int generate_raw_frame(uint16_t *frame_data, int i, int sample_rate, int channels, int frame_size)</div><div class="ttdef"><b>Definition:</b> <a href="api-flac-test_8c_source.html#l00038">api-flac-test.c:38</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac1e6c2cd1269caa7570575725c682a49"><div class="ttname"><a href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">AVCodecContext::channels</a></div><div class="ttdeci">int channels</div><div class="ttdoc">number of audio channels</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1187</a></div></div>
<div class="ttc" id="aapi-flac-test_8c_html_a8a80cb921d199470b93f341837044b58"><div class="ttname"><a href="api-flac-test_8c.html#a8a80cb921d199470b93f341837044b58">init_decoder</a></div><div class="ttdeci">static int init_decoder(AVCodec *dec, AVCodecContext **dec_ctx, int64_t ch_layout)</div><div class="ttdef"><b>Definition:</b> <a href="api-flac-test_8c_source.html#l00081">api-flac-test.c:81</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aeb08c575a79eb84fc4155dda88f46c06"><div class="ttname"><a href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">AVCodecContext::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01237">avcodec.h:1237</a></div></div>
<div class="ttc" id="afiltering__audio_8c_html_ac2bf6798f37e95d3d2ff2d44e4ab3c12"><div class="ttname"><a href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a></div><div class="ttdeci">static AVCodecContext * dec_ctx</div><div class="ttdef"><b>Definition:</b> <a href="filtering__audio_8c_source.html#l00043">filtering_audio.c:43</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8ff0b000c463361e234af48d03aadfc0"><div class="ttname"><a href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">AVCodecContext::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdoc">samples per second</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01186">avcodec.h:1186</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gac9cb9756175b96e7441575803757fb73"><div class="ttname"><a href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a></div><div class="ttdeci">void av_init_packet(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00035">avpacket.c:35</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
