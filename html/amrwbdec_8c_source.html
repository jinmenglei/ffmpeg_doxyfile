<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/amrwbdec.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">amrwbdec.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="amrwbdec_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * AMR wideband decoder</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2010 Marcelo Galvao Povoa</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A particular PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="channel__layout_8h.html">libavutil/channel_layout.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">libavutil/common.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="float__dsp_8h.html">libavutil/float_dsp.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lfg_8h.html">libavutil/lfg.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lsp_8h.html">lsp.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="celp__filters_8h.html">celp_filters.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="celp__math_8h.html">celp_math.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="acelp__filters_8h.html">acelp_filters.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="acelp__vectors_8h.html">acelp_vectors.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="acelp__pitch__delay_8h.html">acelp_pitch_delay.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a82b5f8151f67a54afc5092ffe418e17d">   41</a></span>&#160;<span class="preprocessor">#define AMR_USE_16BIT_TABLES</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="amr_8h.html">amr.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="amrwbdata_8h.html">amrwbdata.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="amrwbdec__mips_8h.html">mips/amrwbdec_mips.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html">   47</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> {</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a496ba0152df0e2c7e34591740efb2cb9">   48</a></span>&#160;    <a class="code" href="struct_a_m_r_w_b_frame.html">AMRWBFrame</a>                             <a class="code" href="struct_a_m_r_w_b_context.html#a496ba0152df0e2c7e34591740efb2cb9">frame</a>; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keyword">enum</span> <a class="code" href="amrnbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>                        <a class="code" href="struct_a_m_r_w_b_context.html#abff7913ba231a07bd375c8c76d9fff98">fr_cur_mode</a>; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#aafef0510908bee8408dfa6d6532f9a3d">   50</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>                           <a class="code" href="struct_a_m_r_w_b_context.html#aafef0510908bee8408dfa6d6532f9a3d">fr_quality</a>; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#af5c172f6fb9ce2fbe8033c7eaafe64e4">   51</a></span>&#160;    <span class="keywordtype">float</span>                      <a class="code" href="struct_a_m_r_w_b_context.html#af5c172f6fb9ce2fbe8033c7eaafe64e4">isf_cur</a>[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>]; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a64eb4477ee66bd68f0e0a714023b205b">   52</a></span>&#160;    <span class="keywordtype">float</span>                   <a class="code" href="struct_a_m_r_w_b_context.html#a64eb4477ee66bd68f0e0a714023b205b">isf_q_past</a>[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>]; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a2fe73400ea946aa976aafb86e865aed4">   53</a></span>&#160;    <span class="keywordtype">float</span>               <a class="code" href="struct_a_m_r_w_b_context.html#a2fe73400ea946aa976aafb86e865aed4">isf_past_final</a>[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>]; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#ab50d1d86ff5045734c4ce824a7aae62f">   54</a></span>&#160;    <span class="keywordtype">double</span>                      <a class="code" href="struct_a_m_r_w_b_context.html#ab50d1d86ff5045734c4ce824a7aae62f">isp</a>[4][<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>]; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#ae8c13d0867d4e4a9b5cf8f7dac0ee3d9">   55</a></span>&#160;    <span class="keywordtype">double</span>               <a class="code" href="struct_a_m_r_w_b_context.html#ae8c13d0867d4e4a9b5cf8f7dac0ee3d9">isp_sub4_past</a>[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>]; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#aecc13f1ae83a7d33e90c5df4465e69a7">   57</a></span>&#160;    <span class="keywordtype">float</span>                   <a class="code" href="struct_a_m_r_w_b_context.html#aecc13f1ae83a7d33e90c5df4465e69a7">lp_coef</a>[4][<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>]; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a0c8933b009557c5e218bf13cb7b89fb8">   59</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>                       <a class="code" href="struct_a_m_r_w_b_context.html#a0c8933b009557c5e218bf13cb7b89fb8">base_pitch_lag</a>; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#ab69b64a9e9582239532020cda680ed6a">   60</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>                        <a class="code" href="struct_a_m_r_w_b_context.html#ab69b64a9e9582239532020cda680ed6a">pitch_lag_int</a>; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a6de0dff7a48ea1f3d96c7f8b1966dca0">   62</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_a_m_r_w_b_context.html#a6de0dff7a48ea1f3d96c7f8b1966dca0">excitation_buf</a>[<a class="code" href="amrwbdata_8h.html#a583f865cc122fb5eec822bbc248be35d">AMRWB_P_DELAY_MAX</a> + <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> + 2 + <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>]; </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a9a7560be7832274a46f9d9b203b25708">   63</a></span>&#160;    <span class="keywordtype">float</span>                            *<a class="code" href="struct_a_m_r_w_b_context.html#a9a7560be7832274a46f9d9b203b25708">excitation</a>; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#aeb609ce508df9e0592ba1e9e5d959ea2">   65</a></span>&#160;    <span class="keywordtype">float</span>           <a class="code" href="struct_a_m_r_w_b_context.html#aeb609ce508df9e0592ba1e9e5d959ea2">pitch_vector</a>[<a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>]; </div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a6f67ed7dc69c91cfd1edcf536c3c7086">   66</a></span>&#160;    <span class="keywordtype">float</span>           <a class="code" href="struct_a_m_r_w_b_context.html#a6f67ed7dc69c91cfd1edcf536c3c7086">fixed_vector</a>[<a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>]; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#ad381c46cd76ec70752f442f51195a45b">   68</a></span>&#160;    <span class="keywordtype">float</span>                    <a class="code" href="struct_a_m_r_w_b_context.html#ad381c46cd76ec70752f442f51195a45b">prediction_error</a>[4]; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a594f20e9b92d5415fa8e64f4de516231">   69</a></span>&#160;    <span class="keywordtype">float</span>                          <a class="code" href="struct_a_m_r_w_b_context.html#a594f20e9b92d5415fa8e64f4de516231">pitch_gain</a>[6]; </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#af5ab5bd51c5ba560fa7dac5df2c897f1">   70</a></span>&#160;    <span class="keywordtype">float</span>                          <a class="code" href="struct_a_m_r_w_b_context.html#af5ab5bd51c5ba560fa7dac5df2c897f1">fixed_gain</a>[2]; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#ad6199dd8c0746a92853c2b3a8ba244b6">   72</a></span>&#160;    <span class="keywordtype">float</span>                              <a class="code" href="struct_a_m_r_w_b_context.html#ad6199dd8c0746a92853c2b3a8ba244b6">tilt_coef</a>; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a241a8d99774f1350beefa39af8c7f50d">   74</a></span>&#160;    <span class="keywordtype">float</span>                 <a class="code" href="struct_a_m_r_w_b_context.html#a241a8d99774f1350beefa39af8c7f50d">prev_sparse_fixed_gain</a>; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#abb47213cac0e874dd6d9f51611d04ce7">   75</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>                    <a class="code" href="struct_a_m_r_w_b_context.html#abb47213cac0e874dd6d9f51611d04ce7">prev_ir_filter_nr</a>; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a9f840325a186f1907279f3fa65db1513">   76</a></span>&#160;    <span class="keywordtype">float</span>                           <a class="code" href="struct_a_m_r_w_b_context.html#a9f840325a186f1907279f3fa65db1513">prev_tr_gain</a>; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a5898ba8e8dca64d019c4df4971ec8e6e">   78</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_a_m_r_w_b_context.html#a5898ba8e8dca64d019c4df4971ec8e6e">samples_az</a>[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> + <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>];         </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#affbd4900256fc2ae71a3854a31f9490a">   79</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_a_m_r_w_b_context.html#affbd4900256fc2ae71a3854a31f9490a">samples_up</a>[<a class="code" href="amrwbdata_8h.html#a22db63d2b8b9bc2d190a0b857c90323e">UPS_MEM_SIZE</a> + <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>];     </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#ab49225cec6026feed5d81cfb5b5a5df9">   80</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_a_m_r_w_b_context.html#ab49225cec6026feed5d81cfb5b5a5df9">samples_hb</a>[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> + <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>]; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a7074f277c3e3278938d68b562bdd1a65">   82</a></span>&#160;    <span class="keywordtype">float</span>          <a class="code" href="struct_a_m_r_w_b_context.html#ae9ddb9300e6328292bee74721ba20968">hpf_31_mem</a>[2], <a class="code" href="struct_a_m_r_w_b_context.html#a7074f277c3e3278938d68b562bdd1a65">hpf_400_mem</a>[2]; </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#af0598d28282a1b104c6fdae9381f78f7">   83</a></span>&#160;    <span class="keywordtype">float</span>                           <a class="code" href="struct_a_m_r_w_b_context.html#af0598d28282a1b104c6fdae9381f78f7">demph_mem</a>[1]; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a8bb0e062ad4c9ac009ee3febc5b43722">   84</a></span>&#160;    <span class="keywordtype">float</span>               <a class="code" href="struct_a_m_r_w_b_context.html#a8bb0e062ad4c9ac009ee3febc5b43722">bpf_6_7_mem</a>[<a class="code" href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a>]; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a99aa83ec6fc57b8bbf288c38d8c66ff1">   85</a></span>&#160;    <span class="keywordtype">float</span>                 <a class="code" href="struct_a_m_r_w_b_context.html#a99aa83ec6fc57b8bbf288c38d8c66ff1">lpf_7_mem</a>[<a class="code" href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a>]; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a93432e7ab4e259c3e4ed259a28293333">   87</a></span>&#160;    <a class="code" href="struct_a_v_l_f_g.html">AVLFG</a>                                   <a class="code" href="struct_a_m_r_w_b_context.html#a93432e7ab4e259c3e4ed259a28293333">prng</a>; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a22596793d193929e8a01a4570afc256e">   88</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>                          <a class="code" href="struct_a_m_r_w_b_context.html#a22596793d193929e8a01a4570afc256e">first_frame</a>; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a3ecd7b7ea65f551ac901e059defeec5a">   89</a></span>&#160;    <a class="code" href="struct_a_c_e_l_p_f_context.html">ACELPFContext</a>                     <a class="code" href="struct_a_m_r_w_b_context.html#a3ecd7b7ea65f551ac901e059defeec5a">acelpf_ctx</a>; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a6a63a26f9d87f08eaa01b82293789670">   90</a></span>&#160;    <a class="code" href="struct_a_c_e_l_p_v_context.html">ACELPVContext</a>                     <a class="code" href="struct_a_m_r_w_b_context.html#a6a63a26f9d87f08eaa01b82293789670">acelpv_ctx</a>; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a2a7af55e171b4f5c3e786b3ceac7348f">   91</a></span>&#160;    <a class="code" href="struct_c_e_l_p_f_context.html">CELPFContext</a>                       <a class="code" href="struct_a_m_r_w_b_context.html#a2a7af55e171b4f5c3e786b3ceac7348f">celpf_ctx</a>; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_a_m_r_w_b_context.html#a0006d38e57794aa6814a2edddbf02ad0">   92</a></span>&#160;    <a class="code" href="struct_c_e_l_p_m_context.html">CELPMContext</a>                       <a class="code" href="struct_a_m_r_w_b_context.html#a0006d38e57794aa6814a2edddbf02ad0">celpm_ctx</a>; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a62cf5b11b92bccdd03fe338851a6a2d7">   94</a></span>&#160;} <a class="code" href="amrwbdec_8c.html#a62cf5b11b92bccdd03fe338851a6a2d7">AMRWBContext</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a924792924cde559bce7760ef0db31429">   96</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="amrwbdec_8c.html#a924792924cde559bce7760ef0db31429">amrwb_decode_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;{</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a> &gt; 1) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="libavutil_2internal_8h.html#a8ef6489170ea2f26698b7298e6d26ded">avpriv_report_missing_feature</a>(avctx, <span class="stringliteral">&quot;multi-channel AMR&quot;</span>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a>       = 1;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">channel_layout</a> = <a class="code" href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (!avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a> = 16000;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">sample_fmt</a>     = <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="lfg_8c.html#aa8cc657d3dca15bc50a94730a4346d58">av_lfg_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prng, 1);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;excitation  = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;excitation_buf[<a class="code" href="amrwbdata_8h.html#a583f865cc122fb5eec822bbc248be35d">AMRWB_P_DELAY_MAX</a> + <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> + 1];</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;first_frame = 1;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_past_final[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="amrwbdata_8h.html#a784b5717ddf8e30747108194390529e0">isf_init</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0f / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prediction_error[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="amrnbdec_8c.html#acaf1374d6ee289b87034543bec682af6">MIN_ENERGY</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="acelp__filters_8c.html#a99b7af03a2d6656d924f955c23313a8d">ff_acelp_filter_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;acelpf_ctx);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="acelp__vectors_8c.html#a2305842938498aac58a3ad357b591b12">ff_acelp_vectors_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;acelpv_ctx);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="celp__filters_8c.html#a7ecb4e6b6db5ab58029e77736065a249">ff_celp_filter_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpf_ctx);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="celp__math_8c.html#a1834fa36a22b937dbb1a76e1e7a7869e">ff_celp_math_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpm_ctx);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a98b7f1d6a8e4d762b5f22712d97dee90">  140</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="amrwbdec_8c.html#a98b7f1d6a8e4d762b5f22712d97dee90">decode_mime_header</a>(<a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">/* Decode frame header (1st octet) */</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode  = buf[0] &gt;&gt; 3 &amp; 0x0F;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_quality   = (buf[0] &amp; 0x4) == 0x4;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a55e7f6adecafd1ba7f050e0eaef6b74b">  155</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a55e7f6adecafd1ba7f050e0eaef6b74b">decode_isf_indices_36b</a>(uint16_t *ind, <span class="keywordtype">float</span> *isf_q)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 9; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]      = <a class="code" href="amrwbdata_8h.html#a3488d1ce8f4c1a2f8c3a7b938baa009d">dico1_isf</a>[ind[0]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]      * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 7; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 9]  = <a class="code" href="amrwbdata_8h.html#a8ce73b1afd21ab427fd980019ffd84aa">dico2_isf</a>[ind[1]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]      * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]     += <a class="code" href="amrwbdata_8h.html#acc82ad8a916ce670c16fb2910ff16ae5">dico21_isf_36b</a>[ind[2]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 5] += <a class="code" href="amrwbdata_8h.html#af797c4df0d4ed76a7c331a3a19dd1b6e">dico22_isf_36b</a>[ind[3]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 7; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 9] += <a class="code" href="amrwbdata_8h.html#a8899c7d1c2d5c08c42f6a60d0436f3df">dico23_isf_36b</a>[ind[4]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#ad29bf43e84a97f7f0f5cce3ef58d0056">  181</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#ad29bf43e84a97f7f0f5cce3ef58d0056">decode_isf_indices_46b</a>(uint16_t *ind, <span class="keywordtype">float</span> *isf_q)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 9; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]       = <a class="code" href="amrwbdata_8h.html#a3488d1ce8f4c1a2f8c3a7b938baa009d">dico1_isf</a>[ind[0]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]  * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 7; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 9]   = <a class="code" href="amrwbdata_8h.html#a8ce73b1afd21ab427fd980019ffd84aa">dico2_isf</a>[ind[1]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]  * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]      += <a class="code" href="amrwbdata_8h.html#a73aebbae29015232adf06983bd43145a">dico21_isf</a>[ind[2]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 3]  += <a class="code" href="amrwbdata_8h.html#aef709c53358e5c6c6f538fd6370f6f61">dico22_isf</a>[ind[3]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 6]  += <a class="code" href="amrwbdata_8h.html#af14e394a464cc8746ca39062d5b61559">dico23_isf</a>[ind[4]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 9]  += <a class="code" href="amrwbdata_8h.html#a0fc8143dd3ecb56f2112d02eb62e8ef3">dico24_isf</a>[ind[5]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 12] += <a class="code" href="amrwbdata_8h.html#a48a45ca5d5224cda282262c5e9fac2dc">dico25_isf</a>[ind[6]][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a1b61fbaf38c39717aacc5b2bd6e2d28b">  214</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a1b61fbaf38c39717aacc5b2bd6e2d28b">isf_add_mean_and_past</a>(<span class="keywordtype">float</span> *isf_q, <span class="keywordtype">float</span> *isf_past)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordtype">float</span> tmp;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        tmp = isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += <a class="code" href="amrwbdata_8h.html#a3a5a026f100e10f70468594364bc53e0">isf_mean</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0f / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        isf_q[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += <a class="code" href="amrwbdata_8h.html#ae5319ac6f6b4184e1c4cd82a1db6ccbf">PRED_FACTOR</a> * isf_past[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        isf_past[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = tmp;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a7267b19010b9342b087710bb96dcfb51">  234</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a7267b19010b9342b087710bb96dcfb51">interpolate_isp</a>(<span class="keywordtype">double</span> isp_q[4][<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>], <span class="keyword">const</span> <span class="keywordtype">double</span> *isp4_past)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;{</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, k;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span> (k = 0; k &lt; 3; k++) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordtype">float</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = <a class="code" href="amrwbdata_8h.html#af1bd92828220872a4398125001e30dec">isfp_inter</a>[k];</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            isp_q[k][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (1.0 - <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>) * isp4_past[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> * isp_q[3][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a73cfd1848984997ec2e6ad4b1e7f1b1c">  256</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a73cfd1848984997ec2e6ad4b1e7f1b1c">decode_pitch_lag_high</a>(<span class="keywordtype">int</span> *lag_int, <span class="keywordtype">int</span> *lag_frac, <span class="keywordtype">int</span> pitch_index,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                  <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *base_lag_int, <span class="keywordtype">int</span> subframe)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (subframe == 0 || subframe == 2) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">if</span> (pitch_index &lt; 376) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            *lag_int  = (pitch_index + 137) &gt;&gt; 2;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            *lag_frac = pitch_index - (*lag_int &lt;&lt; 2) + 136;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pitch_index &lt; 440) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            *lag_int  = (pitch_index + 257 - 376) &gt;&gt; 1;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            *lag_frac = (pitch_index - (*lag_int &lt;&lt; 1) + 256 - 376) * 2;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="comment">/* the actual resolution is 1/2 but expressed as 1/4 */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            *lag_int  = pitch_index - 280;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            *lag_frac = 0;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="comment">/* minimum lag for next subframe */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        *base_lag_int = av_clip(*lag_int - 8 - (*lag_frac &lt; 0),</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                <a class="code" href="amrwbdata_8h.html#a4c0c38838f6b66edbbb2056b4e3acf0a">AMRWB_P_DELAY_MIN</a>, <a class="code" href="amrwbdata_8h.html#a583f865cc122fb5eec822bbc248be35d">AMRWB_P_DELAY_MAX</a> - 15);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// XXX: the spec states clearly that *base_lag_int should be</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">// the nearest integer to *lag_int (minus 8), but the ref code</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="comment">// actually always uses its floor, I&#39;m following the latter</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        *lag_int  = (pitch_index + 1) &gt;&gt; 2;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        *lag_frac = pitch_index - (*lag_int &lt;&lt; 2);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        *lag_int += *base_lag_int;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a31f54c5c7e5b3992782ef5e70b1bdd10">  289</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a31f54c5c7e5b3992782ef5e70b1bdd10">decode_pitch_lag_low</a>(<span class="keywordtype">int</span> *lag_int, <span class="keywordtype">int</span> *lag_frac, <span class="keywordtype">int</span> pitch_index,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                 <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *base_lag_int, <span class="keywordtype">int</span> subframe, <span class="keyword">enum</span> <a class="code" href="amrnbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;{</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (subframe == 0 || (subframe == 2 &amp;&amp; <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> != <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911ae8ce13192251673619783dc33159f82f">MODE_6k60</a>)) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> (pitch_index &lt; 116) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            *lag_int  = (pitch_index + 69) &gt;&gt; 1;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            *lag_frac = (pitch_index - (*lag_int &lt;&lt; 1) + 68) * 2;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            *lag_int  = pitch_index - 24;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            *lag_frac = 0;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="comment">// XXX: same problem as before</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        *base_lag_int = av_clip(*lag_int - 8 - (*lag_frac &lt; 0),</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                <a class="code" href="amrwbdata_8h.html#a4c0c38838f6b66edbbb2056b4e3acf0a">AMRWB_P_DELAY_MIN</a>, <a class="code" href="amrwbdata_8h.html#a583f865cc122fb5eec822bbc248be35d">AMRWB_P_DELAY_MAX</a> - 15);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        *lag_int  = (pitch_index + 1) &gt;&gt; 1;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        *lag_frac = (pitch_index - (*lag_int &lt;&lt; 1)) * 2;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        *lag_int += *base_lag_int;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a170baa2e50aaa1e8132de7f9ce6d3b24">  318</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a170baa2e50aaa1e8132de7f9ce6d3b24">decode_pitch_vector</a>(<a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                <span class="keyword">const</span> <a class="code" href="struct_a_m_r_w_b_sub_frame.html">AMRWBSubFrame</a> *amr_subframe,</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> subframe)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordtype">int</span> pitch_lag_int, pitch_lag_frac;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">float</span> *exc     = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;excitation;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keyword">enum</span> <a class="code" href="amrnbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> &lt;= <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a16a00ba9eddee496e558dbc282f4336a">MODE_8k85</a>) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <a class="code" href="amrwbdec_8c.html#a31f54c5c7e5b3992782ef5e70b1bdd10">decode_pitch_lag_low</a>(&amp;pitch_lag_int, &amp;pitch_lag_frac, amr_subframe-&gt;<a class="code" href="struct_a_m_r_w_b_sub_frame.html#a45db731250b1d0f534f1438a57ae835c">adap</a>,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                              &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;base_pitch_lag, subframe, <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="amrwbdec_8c.html#a73cfd1848984997ec2e6ad4b1e7f1b1c">decode_pitch_lag_high</a>(&amp;pitch_lag_int, &amp;pitch_lag_frac, amr_subframe-&gt;<a class="code" href="struct_a_m_r_w_b_sub_frame.html#a45db731250b1d0f534f1438a57ae835c">adap</a>,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                              &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;base_pitch_lag, subframe);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_lag_int = pitch_lag_int;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    pitch_lag_int += pitch_lag_frac &gt; 0;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">/* Calculate the pitch vector by interpolating the past excitation at the</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">       pitch lag using a hamming windowed sinc function */</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;acelpf_ctx.acelp_interpolatef(exc,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                          exc + 1 - pitch_lag_int,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                          <a class="code" href="amrwbdata_8h.html#a9cd5a4e6157b785e325c660049749956">ac_inter</a>, 4,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                          pitch_lag_frac + (pitch_lag_frac &gt; 0 ? 0 : 4),</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                          <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>, <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a> + 1);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">/* Check which pitch signal path should be used</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">     * 6k60 and 8k85 modes have the ltp flag set to 0 */</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (amr_subframe-&gt;<a class="code" href="struct_a_m_r_w_b_sub_frame.html#abea20687117331cca29e599343f3bb97">ltp</a>) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        memcpy(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_vector, exc, <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0.18 * exc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] + 0.64 * exc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] +</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                   0.18 * exc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1];</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        memcpy(exc, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_vector, <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">  358</a></span>&#160;<span class="preprocessor">#define BIT_STR(x,lsb,len) av_mod_uintp2((x) &gt;&gt; (lsb), (len))</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">  361</a></span>&#160;<span class="preprocessor">#define BIT_POS(x, p) (((x) &gt;&gt; (p)) &amp; 1)</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">  376</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">decode_1p_track</a>(<span class="keywordtype">int</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> off)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, m) + off; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[0] = <a class="code" href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">BIT_POS</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, m) ? -<a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> : <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">  383</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(<span class="keywordtype">int</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> off) </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;{</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">int</span> pos0 = <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, m, m) + off;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordtype">int</span> pos1 = <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, m) + off;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[0] = <a class="code" href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">BIT_POS</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 2*m) ? -pos0 : pos0;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[1] = <a class="code" href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">BIT_POS</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 2*m) ? -pos1 : pos1;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[1] = pos0 &gt; pos1 ? -<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[1] : <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[1];</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">  393</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">decode_3p_track</a>(<span class="keywordtype">int</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> off) </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;{</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">int</span> half_2p = <a class="code" href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">BIT_POS</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 2*m - 1) &lt;&lt; (m - 1);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, 2*m - 1),</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    m - 1, off + half_2p);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">decode_1p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 2, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 2*m, m + 1), m, off);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#aa45fc23509455de4c79085302d3fc833">  402</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#aa45fc23509455de4c79085302d3fc833">decode_4p_track</a>(<span class="keywordtype">int</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> off) </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">int</span> half_4p, subhalf_2p;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordtype">int</span> b_offset = 1 &lt;&lt; (m - 1);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 4*m - 2, 2)) { <span class="comment">/* case ID (2 bits) */</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">case</span> 0: <span class="comment">/* 0 pulses in A, 4 pulses in B or vice versa */</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        half_4p = <a class="code" href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">BIT_POS</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 4*m - 3) &lt;&lt; (m - 1); <span class="comment">// which has 4 pulses</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        subhalf_2p = <a class="code" href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">BIT_POS</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 2*m - 3) &lt;&lt; (m - 2);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, 2*m - 3),</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                        m - 2, off + half_4p + subhalf_2p);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 2, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 2*m - 2, 2*m - 1),</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                        m - 1, off + half_4p);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">case</span> 1: <span class="comment">/* 1 pulse in A, 3 pulses in B */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">decode_1p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>,  3*m - 2, m),</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        m - 1, off);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">decode_3p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 1, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, 3*m - 2),</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                        m - 1, off + b_offset);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">case</span> 2: <span class="comment">/* 2 pulses in each half */</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 2*m - 1, 2*m - 1),</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                        m - 1, off);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 2, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, 2*m - 1),</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                        m - 1, off + b_offset);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">case</span> 3: <span class="comment">/* 3 pulses in A, 1 pulse in B */</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">decode_3p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, m, 3*m - 2),</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                        m - 1, off);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">decode_1p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 3, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, m),</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        m - 1, off + b_offset);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#ae211a32c34d410503a7aa1b2878d5e36">  438</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#ae211a32c34d410503a7aa1b2878d5e36">decode_5p_track</a>(<span class="keywordtype">int</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> off) </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;{</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordtype">int</span> half_3p = <a class="code" href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">BIT_POS</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 5*m - 1) &lt;&lt; (m - 1);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">decode_3p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 2*m + 1, 3*m - 2),</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    m - 1, off + half_3p);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 3, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, 2*m + 1), m, off);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a115152a5aaec76df9a7948a41031acdd">  448</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a115152a5aaec76df9a7948a41031acdd">decode_6p_track</a>(<span class="keywordtype">int</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> off) </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;{</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordtype">int</span> b_offset = 1 &lt;&lt; (m - 1);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">/* which half has more pulses in cases 0 to 2 */</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordtype">int</span> half_more  = <a class="code" href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">BIT_POS</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 6*m - 5) &lt;&lt; (m - 1);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordtype">int</span> half_other = b_offset - half_more;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 6*m - 4, 2)) { <span class="comment">/* case ID (2 bits) */</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">case</span> 0: <span class="comment">/* 0 pulses in A, 6 pulses in B or vice versa */</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">decode_1p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, m),</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                        m - 1, off + half_more);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="amrwbdec_8c.html#ae211a32c34d410503a7aa1b2878d5e36">decode_5p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 1, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, m, 5*m - 5),</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                        m - 1, off + half_more);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">case</span> 1: <span class="comment">/* 1 pulse in A, 5 pulses in B or vice versa */</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <a class="code" href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">decode_1p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, m),</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                        m - 1, off + half_other);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="amrwbdec_8c.html#ae211a32c34d410503a7aa1b2878d5e36">decode_5p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 1, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, m, 5*m - 5),</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        m - 1, off + half_more);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">case</span> 2: <span class="comment">/* 2 pulses in A, 4 pulses in B or vice versa */</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, 2*m - 1),</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                        m - 1, off + half_other);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <a class="code" href="amrwbdec_8c.html#aa45fc23509455de4c79085302d3fc833">decode_4p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 2, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 2*m - 1, 4*m - 4),</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                        m - 1, off + half_more);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">case</span> 3: <span class="comment">/* 3 pulses in A, 3 pulses in B */</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">decode_3p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 3*m - 2, 3*m - 2),</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                        m - 1, off);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">decode_3p_track</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 3, <a class="code" href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a>(<a class="code" href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a>, 0, 3*m - 2),</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                        m - 1, off + b_offset);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a6c8a660995775b0ae9c174b0ade83001">  492</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a6c8a660995775b0ae9c174b0ade83001">decode_fixed_vector</a>(<span class="keywordtype">float</span> *fixed_vector, <span class="keyword">const</span> uint16_t *pulse_hi,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                <span class="keyword">const</span> uint16_t *pulse_lo, <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="amrnbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">/* sig_pos stores for each track the decoded pulse position indexes</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">     * (1-based) multiplied by its corresponding amplitude (+1 or -1) */</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordtype">int</span> sig_pos[4][6];</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordtype">int</span> spacing = (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> == <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911ae8ce13192251673619783dc33159f82f">MODE_6k60</a>) ? 2 : 4;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911ae8ce13192251673619783dc33159f82f">MODE_6k60</a>:</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <a class="code" href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">decode_1p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 5, 1);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a16a00ba9eddee496e558dbc282f4336a">MODE_8k85</a>:</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <a class="code" href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">decode_1p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 4, 1);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a0281a239710c001f6ed63931438243d6">MODE_12k65</a>:</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 4, 1);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a559b6e58ffd0263d46009d01c1bcbbc5">MODE_14k25</a>:</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <a class="code" href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">decode_3p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 4, 1);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <a class="code" href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 4, 1);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a361a22f664a54158139317053eff4cf0">MODE_15k85</a>:</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <a class="code" href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">decode_3p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 4, 1);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a3203b10a278b86996ddafd40a2ff745b">MODE_18k25</a>:</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <a class="code" href="amrwbdec_8c.html#aa45fc23509455de4c79085302d3fc833">decode_4p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], (<span class="keywordtype">int</span>) pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] +</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                           ((<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>) pulse_hi[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; 14), 4, 1);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a3bed97ee837dd9caee31d370da9f446d">MODE_19k85</a>:</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <a class="code" href="amrwbdec_8c.html#ae211a32c34d410503a7aa1b2878d5e36">decode_5p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], (<span class="keywordtype">int</span>) pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] +</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                           ((<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>) pulse_hi[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; 10), 4, 1);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <a class="code" href="amrwbdec_8c.html#aa45fc23509455de4c79085302d3fc833">decode_4p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], (<span class="keywordtype">int</span>) pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] +</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                           ((<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>) pulse_hi[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; 14), 4, 1);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a01976c8d32712bb64bf581a60ff5ebce">MODE_23k05</a>:</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a5458440c004c6c76f577a0bea0b676ba">MODE_23k85</a>:</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <a class="code" href="amrwbdec_8c.html#a115152a5aaec76df9a7948a41031acdd">decode_6p_track</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], (<span class="keywordtype">int</span>) pulse_lo[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] +</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                           ((<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>) pulse_hi[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; 11), 4, 1);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    memset(fixed_vector, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="amrwbdata_8h.html#afd952ebf11a2b16d0f8cf49642887309">pulses_nb_per_mode_tr</a>[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]; j++) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j]) - 1) * spacing + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            fixed_vector[<a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>] += sig_pos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j] &lt; 0 ? -1.0 : 1.0;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a041121e2e6ec282cc35d9811adfc32e2">  563</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a041121e2e6ec282cc35d9811adfc32e2">decode_gains</a>(<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> vq_gain, <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="amrnbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>,</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                         <span class="keywordtype">float</span> *fixed_gain_factor, <span class="keywordtype">float</span> *pitch_gain)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;{</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keyword">const</span> int16_t *gains = (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> &lt;= <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a16a00ba9eddee496e558dbc282f4336a">MODE_8k85</a> ? <a class="code" href="amrwbdata_8h.html#a52d169ebb736e2fad7c01cd683bbb55e">qua_gain_6b</a>[vq_gain] :</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                                                <a class="code" href="amrwbdata_8h.html#a1f779b042bd27bd3fec2f5f901d378cf">qua_gain_7b</a>[vq_gain]);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    *pitch_gain        = gains[0] * (1.0f / (1 &lt;&lt; 14));</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    *fixed_gain_factor = gains[1] * (1.0f / (1 &lt;&lt; 11));</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;}</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">// XXX: Spec states this procedure should be applied when the pitch</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">// lag is less than 64, but this checking seems absent in reference and AMR-NB</span></div>
<div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#af057656d12496156f76bca3946bea0a8">  581</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#af057656d12496156f76bca3946bea0a8">pitch_sharpening</a>(<a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">float</span> *fixed_vector)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;{</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">/* Tilt part */</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> != 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] -= fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;tilt_coef;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">/* Periodicity enhancement part */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_lag_int; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_lag_int] * 0.85;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;}</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">// XXX: There is something wrong with the precision here! The magnitudes</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">// of the energies are not correct. Please check the reference code carefully</span></div>
<div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a48a67827eaf285f55f20ca10e4b5df2a">  603</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="amrwbdec_8c.html#a48a67827eaf285f55f20ca10e4b5df2a">voice_factor</a>(<span class="keywordtype">float</span> *p_vector, <span class="keywordtype">float</span> p_gain,</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                          <span class="keywordtype">float</span> *f_vector, <span class="keywordtype">float</span> f_gain,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                          <a class="code" href="struct_c_e_l_p_m_context.html">CELPMContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;{</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordtype">double</span> p_ener = (double) <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dot_productf(p_vector, p_vector,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                                          <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>) *</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    p_gain * p_gain;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordtype">double</span> f_ener = (double) <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dot_productf(f_vector, f_vector,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                                          <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>) *</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    f_gain * f_gain;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">return</span> (p_ener - f_ener) / (p_ener + f_ener + 0.01);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a8f235a027140613ea7a2b963782b7e54">  627</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> *<a class="code" href="amrwbdec_8c.html#a8f235a027140613ea7a2b963782b7e54">anti_sparseness</a>(<a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                              <span class="keywordtype">float</span> *fixed_vector, <span class="keywordtype">float</span> *buf)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;{</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordtype">int</span> ir_filter_nr;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode &gt; <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a16a00ba9eddee496e558dbc282f4336a">MODE_8k85</a>) <span class="comment">// no filtering in higher modes</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">return</span> fixed_vector;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0] &lt; 0.6) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        ir_filter_nr = 0;      <span class="comment">// strong filtering</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0] &lt; 0.9) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        ir_filter_nr = 1;      <span class="comment">// medium filtering</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        ir_filter_nr = 2;      <span class="comment">// no filtering</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">/* detect &#39;onset&#39; */</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_gain[0] &gt; 3.0 * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_gain[1]) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">if</span> (ir_filter_nr &lt; 2)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            ir_filter_nr++;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, count = 0;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; 0.6)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                count++;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> (count &gt; 2)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            ir_filter_nr = 0;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">if</span> (ir_filter_nr &gt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_ir_filter_nr + 1)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            ir_filter_nr--;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">/* update ir filter strength history */</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_ir_filter_nr = ir_filter_nr;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    ir_filter_nr += (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode == <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a16a00ba9eddee496e558dbc282f4336a">MODE_8k85</a>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">if</span> (ir_filter_nr &lt; 2) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> *coef = <a class="code" href="amrnbdata_8h.html#a09183f9560014dbb769d60531d9c0271">ir_filters_lookup</a>[ir_filter_nr];</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">/* Circular convolution code in the reference</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">         * decoder was modified to avoid using one</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">         * extra array. The filtered vector is given by:</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">         * c2(n) = sum(i,0,len-1){ c(i) * coef( (n - i + len) % len ) }</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        memset(buf, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordflow">if</span> (fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                <a class="code" href="celp__filters_8c.html#a7b398ff49015b42adf109e6c82015f5a">ff_celp_circ_addf</a>(buf, buf, coef, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                  <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        fixed_vector = buf;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">return</span> fixed_vector;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;}</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a317c2762699ff2b6b157b2f3713d90f9">  691</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="amrwbdec_8c.html#a317c2762699ff2b6b157b2f3713d90f9">stability_factor</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *isf, <span class="keyword">const</span> <span class="keywordtype">float</span> *isf_past)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;{</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="yuv2rgb_8c.html#af4737dfbbc138ccc0868064f253cbcc8">acc</a> = 0.0;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <a class="code" href="yuv2rgb_8c.html#af4737dfbbc138ccc0868064f253cbcc8">acc</a> += (isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - isf_past[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) * (isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - isf_past[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="comment">// XXX: This part is not so clear from the reference code</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment">// the result is more accurate changing the &quot;/ 256&quot; to &quot;* 512&quot;</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(0.0, 1.25 - <a class="code" href="yuv2rgb_8c.html#af4737dfbbc138ccc0868064f253cbcc8">acc</a> * 0.8 * 512);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;}</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a9405e4a1fa99c7d145e71af43f3d7b8b">  715</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="amrwbdec_8c.html#a9405e4a1fa99c7d145e71af43f3d7b8b">noise_enhancer</a>(<span class="keywordtype">float</span> fixed_gain, <span class="keywordtype">float</span> *prev_tr_gain,</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                            <span class="keywordtype">float</span> voice_fac,  <span class="keywordtype">float</span> stab_fac)</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;{</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordtype">float</span> sm_fac = 0.5 * (1 - voice_fac) * stab_fac;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordtype">float</span> g0;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="comment">// XXX: the following fixed-point constants used to in(de)crement</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="comment">// gain by 1.5dB were taken from the reference code, maybe it could</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">// be simpler</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (fixed_gain &lt; *prev_tr_gain) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        g0 = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(*prev_tr_gain, fixed_gain + fixed_gain *</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                     (6226 * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15)))); <span class="comment">// +1.5 dB</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        g0 = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(*prev_tr_gain, fixed_gain *</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                    (27536 * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15)))); <span class="comment">// -1.5 dB</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    *prev_tr_gain = g0; <span class="comment">// update next frame threshold</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">return</span> sm_fac * g0 + (1 - sm_fac) * fixed_gain;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;}</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a5917f4427a4c0958df06aa78a2bc7b27">  742</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a5917f4427a4c0958df06aa78a2bc7b27">pitch_enhancer</a>(<span class="keywordtype">float</span> *fixed_vector, <span class="keywordtype">float</span> voice_fac)</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;{</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordtype">float</span> cpe  = 0.125 * (1 + voice_fac);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordtype">float</span> last = fixed_vector[0]; <span class="comment">// holds c(i - 1)</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    fixed_vector[0] -= cpe * fixed_vector[1];</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordtype">float</span> cur = fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] -= cpe * (last + fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1]);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        last = cur;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    fixed_vector[<a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a> - 1] -= cpe * last;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#ae08bc4188cdebf1ef164f94a1b2e109f">  770</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#ae08bc4188cdebf1ef164f94a1b2e109f">synthesis</a>(<a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">float</span> *lpc, <span class="keywordtype">float</span> *excitation,</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                      <span class="keywordtype">float</span> fixed_gain, <span class="keyword">const</span> <span class="keywordtype">float</span> *fixed_vector,</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                      <span class="keywordtype">float</span> *<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;{</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;acelpv_ctx.weighted_vector_sumf(excitation, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_vector, fixed_vector,</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0], fixed_gain, <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">/* emphasize pitch vector contribution in low bitrate modes */</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0] &gt; 0.5 &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode &lt;= <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a16a00ba9eddee496e558dbc282f4336a">MODE_8k85</a>) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="keywordtype">float</span> energy = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpm_ctx.dot_productf(excitation, excitation,</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                                    <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="comment">// XXX: Weird part in both ref code and spec. A unknown parameter</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="comment">// {beta} seems to be identical to the current pitch gain</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="keywordtype">float</span> pitch_factor = 0.25 * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0] * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0];</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            excitation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += pitch_factor * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <a class="code" href="acelp__vectors_8c.html#a481a48508d8e6261a38b187f78caaea7">ff_scale_vector_to_given_sum_of_squares</a>(excitation, excitation,</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                                                energy, <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpf_ctx.celp_lp_synthesis_filterf(<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, lpc, excitation,</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                                 <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>, <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;}</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#ade2ef483832b02ea6108c2b28852b5cb">  807</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#ade2ef483832b02ea6108c2b28852b5cb">de_emphasis</a>(<span class="keywordtype">float</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keywordtype">float</span> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <span class="keywordtype">float</span> m, <span class="keywordtype">float</span> mem[1])</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;{</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[0] = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[0] + m * mem[0];</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;         <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] * m;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    mem[0] = <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a> - 1];</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a23bf45ebaec7797dad5a133371579605">  828</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a23bf45ebaec7797dad5a133371579605">upsample_5_4</a>(<span class="keywordtype">float</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <span class="keywordtype">int</span> o_size, <a class="code" href="struct_c_e_l_p_m_context.html">CELPMContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;{</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> *in0 = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a> - <a class="code" href="amrwbdata_8h.html#a78c02721f5439323aa8def445c8dcb8e">UPS_FIR_SIZE</a> + 1;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordtype">int</span> int_part = 0, frac_part;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; o_size / 5; j++) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[int_part];</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        frac_part = 4;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">for</span> (k = 1; k &lt; 5; k++) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dot_productf(in0 + int_part,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                                                  <a class="code" href="amrwbdata_8h.html#abbf200ad31ebf9ce4d035a82b980b1bb">upsample_fir</a>[4 - frac_part],</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                                                  <a class="code" href="amrwbdata_8h.html#a22db63d2b8b9bc2d190a0b857c90323e">UPS_MEM_SIZE</a>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            int_part++;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            frac_part--;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;}</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#aec2646df415561a7f6cd0a6163a0bac2">  860</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="amrwbdec_8c.html#aec2646df415561a7f6cd0a6163a0bac2">find_hb_gain</a>(<a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *synth,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                          uint16_t hb_idx, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> vad)</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;{</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordtype">int</span> wsp = (vad &gt; 0);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordtype">float</span> tilt;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordtype">float</span> tmp;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode == <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a5458440c004c6c76f577a0bea0b676ba">MODE_23k85</a>)</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="amrwbdata_8h.html#a2c654e1340e35ddd969cccd4f6646af7">qua_hb_gain</a>[hb_idx] * (1.0f / (1 &lt;&lt; 14));</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    tmp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpm_ctx.dot_productf(synth, synth + 1, <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a> - 1);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">if</span> (tmp &gt; 0) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        tilt = tmp / <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpm_ctx.dot_productf(synth, synth, <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        tilt = 0;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="comment">/* return gain bounded by [0.1, 1.0] */</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">return</span> av_clipf((1.0 - tilt) * (1.25 - 0.25 * wsp), 0.1, 1.0);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;}</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a264d12c87ed7977e10aa4e2b1a061dc3">  890</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a264d12c87ed7977e10aa4e2b1a061dc3">scaled_hb_excitation</a>(<a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">float</span> *hb_exc,</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">float</span> *synth_exc, <span class="keywordtype">float</span> hb_gain)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;{</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordtype">float</span> energy = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpm_ctx.dot_productf(synth_exc, synth_exc,</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                                                <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="comment">/* Generate a white-noise excitation */</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        hb_exc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 32768.0 - (uint16_t) <a class="code" href="lfg_8h.html#a58feb242e560adee0b7a16e11cce43e9">av_lfg_get</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prng);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <a class="code" href="acelp__vectors_8c.html#a481a48508d8e6261a38b187f78caaea7">ff_scale_vector_to_given_sum_of_squares</a>(hb_exc, hb_exc,</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                                            energy * hb_gain * hb_gain,</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                                            <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;}</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#ac484ac0b6459c4c3cb74ab94566bb4e1">  909</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="amrwbdec_8c.html#ac484ac0b6459c4c3cb74ab94566bb4e1">auto_correlation</a>(<span class="keywordtype">float</span> *diff_isf, <span class="keywordtype">float</span> mean, <span class="keywordtype">int</span> lag)</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;{</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordtype">float</span> sum = 0.0;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 7; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordtype">float</span> prod = (diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - mean) * (diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - lag] - mean);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        sum += prod * prod;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">return</span> sum;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;}</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a05fb0cd1ead33b0a3e49c7002b605ac9">  928</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a05fb0cd1ead33b0a3e49c7002b605ac9">extrapolate_isf</a>(<span class="keywordtype">float</span> isf[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a>])</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;{</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordtype">float</span> diff_isf[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 2], diff_mean;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordtype">float</span> corr_lag[3];</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordtype">float</span> est, scale;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, i_max_corr;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    isf[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> - 1] = isf[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 1];</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">/* Calculate the difference vector */</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] - isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    diff_mean = 0.0;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        diff_mean += diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 4));</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="comment">/* Find which is the maximum autocorrelation */</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    i_max_corr = 0;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        corr_lag[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="amrwbdec_8c.html#ac484ac0b6459c4c3cb74ab94566bb4e1">auto_correlation</a>(diff_isf, diff_mean, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 2);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="keywordflow">if</span> (corr_lag[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; corr_lag[i_max_corr])</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            i_max_corr = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    i_max_corr++;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] + isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1 - i_max_corr]</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                            - isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2 - i_max_corr];</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">/* Calculate an estimate for ISF(18) and scale ISF based on the error */</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    est   = 7965 + (isf[2] - isf[3] - isf[4]) / 6.0;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    scale = 0.5 * (<a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(est, 7600) - isf[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 2]) /</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            (isf[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> - 2] - isf[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 2]);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 1, j = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++, j++)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        diff_isf[j] = scale * (isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1]);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="comment">/* Stability insurance */</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> - <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="keywordflow">if</span> (diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] &lt; 5.0) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <span class="keywordflow">if</span> (diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1]) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] = 5.0 - diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 5.0 - diff_isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1];</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 1, j = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++, j++)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] + diff_isf[j] * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">/* Scale the ISF vector for 16000 Hz */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        isf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= 0.8;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;}</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#ace73bb135fd0e430e96be18832ae8787">  993</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#ace73bb135fd0e430e96be18832ae8787">lpc_weighting</a>(<span class="keywordtype">float</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *lpc, <span class="keywordtype">float</span> gamma, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;{</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordtype">float</span> fac = gamma;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = lpc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * fac;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        fac   *= gamma;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    }</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;}</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a8ef6b361680b7985ba8277d6ee107fde"> 1015</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a8ef6b361680b7985ba8277d6ee107fde">hb_synthesis</a>(<a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">int</span> subframe, <span class="keywordtype">float</span> *<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>,</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">float</span> *exc, <span class="keyword">const</span> <span class="keywordtype">float</span> *isf, <span class="keyword">const</span> <span class="keywordtype">float</span> *isf_past)</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;{</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordtype">float</span> hb_lpc[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a>];</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keyword">enum</span> <a class="code" href="amrnbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> == <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911ae8ce13192251673619783dc33159f82f">MODE_6k60</a>) {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="keywordtype">float</span> e_isf[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a>]; <span class="comment">// ISF vector for extrapolation</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordtype">double</span> e_isp[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a>];</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;acelpv_ctx.weighted_vector_sumf(e_isf, isf_past, isf, <a class="code" href="amrwbdata_8h.html#af1bd92828220872a4398125001e30dec">isfp_inter</a>[subframe],</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                                1.0 - <a class="code" href="amrwbdata_8h.html#af1bd92828220872a4398125001e30dec">isfp_inter</a>[subframe], <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="amrwbdec_8c.html#a05fb0cd1ead33b0a3e49c7002b605ac9">extrapolate_isf</a>(e_isf);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        e_isf[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> - 1] *= 2.0;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <a class="code" href="lsp_8c.html#a37c58af4234a1a79fc1315d25a94fc3b">ff_acelp_lsf2lspd</a>(e_isp, e_isf, <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a>);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <a class="code" href="lsp_8c.html#a68114ebd69906fba92161bb3c3c33d26">ff_amrwb_lsp2lpc</a>(e_isp, hb_lpc, <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a>);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <a class="code" href="amrwbdec_8c.html#ace73bb135fd0e430e96be18832ae8787">lpc_weighting</a>(hb_lpc, hb_lpc, 0.9, <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a>);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <a class="code" href="amrwbdec_8c.html#ace73bb135fd0e430e96be18832ae8787">lpc_weighting</a>(hb_lpc, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lp_coef[subframe], 0.6, <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpf_ctx.celp_lp_synthesis_filterf(<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, hb_lpc, exc, <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>,</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                                 (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> == <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911ae8ce13192251673619783dc33159f82f">MODE_6k60</a>) ? <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> : <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;}</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="preprocessor">#ifndef hb_fir_filter</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#ab819d4a465abf7e311dfa970936d6b32"> 1056</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#ab819d4a465abf7e311dfa970936d6b32">hb_fir_filter</a>(<span class="keywordtype">float</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> fir_coef[<a class="code" href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a> + 1],</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                          <span class="keywordtype">float</span> mem[<a class="code" href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a>], <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>)</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;{</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[<a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a> + <a class="code" href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a>]; <span class="comment">// past and current samples</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    memcpy(<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, mem, <a class="code" href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    memcpy(<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> + <a class="code" href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0.0;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt;= <a class="code" href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a>; j++)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + j] * fir_coef[j];</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    memcpy(mem, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> + <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>, <a class="code" href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;}</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* hb_fir_filter */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a064a16714ecf2a11225faf2013899d89"> 1078</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="amrwbdec_8c.html#a064a16714ecf2a11225faf2013899d89">update_sub_state</a>(<a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;{</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    memmove(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;excitation_buf[0], &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;excitation_buf[<a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>],</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            (<a class="code" href="amrwbdata_8h.html#a583f865cc122fb5eec822bbc248be35d">AMRWB_P_DELAY_MAX</a> + <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> + 1) * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    memmove(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[1], &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0], 5 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    memmove(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_gain[1], &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_gain[0], 1 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    memmove(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_az[0], &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_az[<a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>],</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    memmove(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_up[0], &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_up[<a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>],</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            <a class="code" href="amrwbdata_8h.html#a22db63d2b8b9bc2d190a0b857c90323e">UPS_MEM_SIZE</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    memmove(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_hb[0], &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_hb[<a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>],</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            <a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;}</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160; </div>
<div class="line"><a name="l01094"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#a845faf285a7ef1c07373c560512f9dc5"> 1094</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="amrwbdec_8c.html#a845faf285a7ef1c07373c560512f9dc5">amrwb_decode_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>,</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                              <span class="keywordtype">int</span> *got_frame_ptr, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;{</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="struct_a_m_r_w_b_context.html">AMRWBContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>  = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>     = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <a class="code" href="struct_a_m_r_w_b_frame.html">AMRWBFrame</a>   *cf   = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordtype">int</span> buf_size       = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordtype">int</span> expected_fr_size, header_size;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordtype">float</span> *buf_out;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordtype">float</span> spare_vector[<a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>];      <span class="comment">// extra stack space to hold result from anti-sparseness processing</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordtype">float</span> fixed_gain_factor;                 <span class="comment">// fixed gain correction factor (gamma)</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordtype">float</span> *synth_fixed_vector;               <span class="comment">// pointer to the fixed vector that synthesis should use</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordtype">float</span> synth_fixed_gain;                  <span class="comment">// the fixed gain that synthesis should use</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordtype">float</span> voice_fac, stab_fac;               <span class="comment">// parameters used for gain smoothing</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordtype">float</span> synth_exc[<a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>];         <span class="comment">// post-processed excitation for synthesis</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordtype">float</span> hb_exc[<a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>];        <span class="comment">// excitation for the high frequency band</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordtype">float</span> hb_samples[<a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>];    <span class="comment">// filtered high-band samples from synthesis</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordtype">float</span> hb_gain;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">/* get output buffer */</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;nb_samples = 4 * <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(avctx, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    buf_out = (<span class="keywordtype">float</span> *)<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0];</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    header_size      = <a class="code" href="amrwbdec_8c.html#a98b7f1d6a8e4d762b5f22712d97dee90">decode_mime_header</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, buf);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    expected_fr_size = ((<a class="code" href="amrwbdata_8h.html#a9ca312ccf032e19a22ef46044ae0dc11">cf_sizes_wb</a>[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode] + 7) &gt;&gt; 3) + 1;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_quality)</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Encountered a bad or corrupted frame\n&quot;</span>);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode == <a class="code" href="amrnbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911ad2c08fb8362bb7bc8b17aa5a6df6e498">NO_DATA</a> || !<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_quality) {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="comment">/* The specification suggests a &quot;random signal&quot; and</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">           &quot;a muting technique&quot; to &quot;gradually decrease the output level&quot;. */</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <a class="code" href="group__lavu__sampmanip.html#ga6f287e5c4f426a8be8a8b5b8f708a05c">av_samples_set_silence</a>(&amp;<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0], 0, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;nb_samples, 1, <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        *got_frame_ptr = 1;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">return</span> expected_fr_size;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode &gt; <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a49c7a51e80e9f6bb24da8a13c9560459">MODE_SID</a>) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;               <span class="stringliteral">&quot;Invalid mode %d\n&quot;</span>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    }</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">if</span> (buf_size &lt; expected_fr_size) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <span class="stringliteral">&quot;Frame too small (%d bytes). Truncated file?\n&quot;</span>, buf_size);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        *got_frame_ptr = 0;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode == <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a49c7a51e80e9f6bb24da8a13c9560459">MODE_SID</a>) { <span class="comment">/* Comfort noise frame */</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(avctx, <span class="stringliteral">&quot;SID mode&quot;</span>);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    }</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <a class="code" href="amr_8h.html#a9441d751afb75ff743ffaaadebacf265">ff_amr_bit_reorder</a>((uint16_t *) &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame, <span class="keyword">sizeof</span>(<a class="code" href="struct_a_m_r_w_b_frame.html">AMRWBFrame</a>),</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        buf + header_size, <a class="code" href="amrwbdata_8h.html#a38f6b82830de0e97470705085e732cfd">amr_bit_orderings_by_mode</a>[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode]);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">/* Decode the quantized ISF vector */</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode == <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911ae8ce13192251673619783dc33159f82f">MODE_6k60</a>) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <a class="code" href="amrwbdec_8c.html#a55e7f6adecafd1ba7f050e0eaef6b74b">decode_isf_indices_36b</a>(cf-&gt;<a class="code" href="struct_a_m_r_w_b_frame.html#a100a4e73e1cb82d9831358438d757b02">isp_id</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_cur);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <a class="code" href="amrwbdec_8c.html#ad29bf43e84a97f7f0f5cce3ef58d0056">decode_isf_indices_46b</a>(cf-&gt;<a class="code" href="struct_a_m_r_w_b_frame.html#a100a4e73e1cb82d9831358438d757b02">isp_id</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_cur);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <a class="code" href="amrwbdec_8c.html#a1b61fbaf38c39717aacc5b2bd6e2d28b">isf_add_mean_and_past</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_cur, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_q_past);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <a class="code" href="lsp_8c.html#a2026a93891f9e1e5c6a3d8bb514f4a9b">ff_set_min_dist_lsf</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_cur, <a class="code" href="amrwbdata_8h.html#a30317eac39a6e75e40246fb09f204f86">MIN_ISF_SPACING</a>, <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 1);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160; </div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    stab_fac = <a class="code" href="amrwbdec_8c.html#a317c2762699ff2b6b157b2f3713d90f9">stability_factor</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_cur, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_past_final);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_cur[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> - 1] *= 2.0;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <a class="code" href="lsp_8c.html#a37c58af4234a1a79fc1315d25a94fc3b">ff_acelp_lsf2lspd</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isp[3], <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_cur, <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">/* Generate a ISP vector for each subframe */</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;first_frame) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;first_frame = 0;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        memcpy(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isp_sub4_past, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isp[3], <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="amrwbdec_8c.html#a7267b19010b9342b087710bb96dcfb51">interpolate_isp</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isp, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isp_sub4_past);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a> = 0; <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a> &lt; 4; <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>++)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <a class="code" href="lsp_8c.html#a68114ebd69906fba92161bb3c3c33d26">ff_amrwb_lsp2lpc</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isp[<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>], <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lp_coef[<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>], <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a> = 0; <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a> &lt; 4; <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>++) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_a_m_r_w_b_sub_frame.html">AMRWBSubFrame</a> *cur_subframe = &amp;cf-&gt;<a class="code" href="struct_a_m_r_w_b_frame.html#a9cbaee1fa9088e0d06bee7f2f7a5730e">subframe</a>[<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>];</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <span class="keywordtype">float</span> *sub_buf = buf_out + <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a> * <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="comment">/* Decode adaptive codebook (pitch vector) */</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <a class="code" href="amrwbdec_8c.html#a170baa2e50aaa1e8132de7f9ce6d3b24">decode_pitch_vector</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, cur_subframe, <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="comment">/* Decode innovative codebook (fixed vector) */</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <a class="code" href="amrwbdec_8c.html#a6c8a660995775b0ae9c174b0ade83001">decode_fixed_vector</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_vector, cur_subframe-&gt;<a class="code" href="struct_a_m_r_w_b_sub_frame.html#ae528cb0b7e9abdb55cfbdd88567c3f95">pul_ih</a>,</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                            cur_subframe-&gt;<a class="code" href="struct_a_m_r_w_b_sub_frame.html#ad266dfc247d4ff69823b09c81db377c0">pul_il</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <a class="code" href="amrwbdec_8c.html#af057656d12496156f76bca3946bea0a8">pitch_sharpening</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_vector);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <a class="code" href="amrwbdec_8c.html#a041121e2e6ec282cc35d9811adfc32e2">decode_gains</a>(cur_subframe-&gt;<a class="code" href="struct_a_m_r_w_b_sub_frame.html#aa7afe7b8a90298ccb757881411cdd6dc">vq_gain</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode,</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                     &amp;fixed_gain_factor, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0]);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_gain[0] =</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            <a class="code" href="acelp__pitch__delay_8c.html#a845e6137ff9bf95a6a460495f0363455">ff_amr_set_fixed_gain</a>(fixed_gain_factor,</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                                  <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpm_ctx.dot_productf(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_vector,</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                                                               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_vector,</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                                                               <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>) /</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                                  <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>,</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                       <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prediction_error,</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                       <a class="code" href="amrwbdata_8h.html#ac3e32f11352b43c7b740941648680597">ENERGY_MEAN</a>, <a class="code" href="amrnbdata_8h.html#aca56082ca0ee183cc4d18f1a90c397af">energy_pred_fac</a>);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160; </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="comment">/* Calculate voice factor and store tilt for next subframe */</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        voice_fac      = <a class="code" href="amrwbdec_8c.html#a48a67827eaf285f55f20ca10e4b5df2a">voice_factor</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_vector, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0],</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                                      <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_vector, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_gain[0],</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                                      &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpm_ctx);</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;tilt_coef = voice_fac * 0.25 + 0.25;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="comment">/* Construct current excitation */</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;excitation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;pitch_gain[0];</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;excitation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_gain[0] * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;excitation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cuda__runtime_8h.html#a330f40925de787e7c0740b1d97c731f0">truncf</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;excitation[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <span class="comment">/* Post-processing of excitation elements */</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        synth_fixed_gain = <a class="code" href="amrwbdec_8c.html#a9405e4a1fa99c7d145e71af43f3d7b8b">noise_enhancer</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_gain[0], &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_tr_gain,</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                                          voice_fac, stab_fac);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        synth_fixed_vector = <a class="code" href="amrwbdec_8c.html#a8f235a027140613ea7a2b963782b7e54">anti_sparseness</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fixed_vector,</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                                             spare_vector);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <a class="code" href="amrwbdec_8c.html#a5917f4427a4c0958df06aa78a2bc7b27">pitch_enhancer</a>(synth_fixed_vector, voice_fac);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <a class="code" href="amrwbdec_8c.html#ae08bc4188cdebf1ef164f94a1b2e109f">synthesis</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lp_coef[<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>], synth_exc, synth_fixed_gain,</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                  synth_fixed_vector, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_az[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>]);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <span class="comment">/* Synthesis speech post-processing */</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <a class="code" href="amrwbdec_8c.html#ade2ef483832b02ea6108c2b28852b5cb">de_emphasis</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_up[<a class="code" href="amrwbdata_8h.html#a22db63d2b8b9bc2d190a0b857c90323e">UPS_MEM_SIZE</a>],</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                    &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_az[<a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a>], <a class="code" href="amrwbdata_8h.html#abb54df10fdb5eb52303fad3ab37074f3">PREEMPH_FAC</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;demph_mem);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;acelpf_ctx.acelp_apply_order_2_transfer_function(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_up[<a class="code" href="amrwbdata_8h.html#a22db63d2b8b9bc2d190a0b857c90323e">UPS_MEM_SIZE</a>],</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_up[<a class="code" href="amrwbdata_8h.html#a22db63d2b8b9bc2d190a0b857c90323e">UPS_MEM_SIZE</a>], <a class="code" href="amrwbdata_8h.html#a30c1c29e2c6d0119d8dec7009dadc52b">hpf_zeros</a>, <a class="code" href="amrwbdata_8h.html#a3eb4a40c2fde016030b9e8f41945d115">hpf_31_poles</a>,</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <a class="code" href="amrwbdata_8h.html#a7e4482020c96b7bcb9aae1e74f5f8bbc">hpf_31_gain</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hpf_31_mem, <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <a class="code" href="amrwbdec_8c.html#a23bf45ebaec7797dad5a133371579605">upsample_5_4</a>(sub_buf, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_up[<a class="code" href="amrwbdata_8h.html#a78c02721f5439323aa8def445c8dcb8e">UPS_FIR_SIZE</a>],</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                     <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;celpm_ctx);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="comment">/* High frequency band (6.4 - 7.0 kHz) generation part */</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;acelpf_ctx.acelp_apply_order_2_transfer_function(hb_samples,</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_up[<a class="code" href="amrwbdata_8h.html#a22db63d2b8b9bc2d190a0b857c90323e">UPS_MEM_SIZE</a>], <a class="code" href="amrwbdata_8h.html#a30c1c29e2c6d0119d8dec7009dadc52b">hpf_zeros</a>, <a class="code" href="amrwbdata_8h.html#aa0952febbdf4541c183bdbb59f462662">hpf_400_poles</a>,</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <a class="code" href="amrwbdata_8h.html#a680f7828654452afca5fb666d85a5c87">hpf_400_gain</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hpf_400_mem, <a class="code" href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a>);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        hb_gain = <a class="code" href="amrwbdec_8c.html#aec2646df415561a7f6cd0a6163a0bac2">find_hb_gain</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, hb_samples,</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                               cur_subframe-&gt;<a class="code" href="struct_a_m_r_w_b_sub_frame.html#ab371a458770225df77ef2c3603bc59e6">hb_gain</a>, cf-&gt;<a class="code" href="struct_a_m_r_w_b_frame.html#a7247add10589c8266df3be6381a7fc6f">vad</a>);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160; </div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <a class="code" href="amrwbdec_8c.html#a264d12c87ed7977e10aa4e2b1a061dc3">scaled_hb_excitation</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, hb_exc, synth_exc, hb_gain);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <a class="code" href="amrwbdec_8c.html#a8ef6b361680b7985ba8277d6ee107fde">hb_synthesis</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_hb[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a>],</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                     hb_exc, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_cur, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_past_final);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <span class="comment">/* High-band post-processing filters */</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <a class="code" href="amrwbdec_8c.html#ab819d4a465abf7e311dfa970936d6b32">hb_fir_filter</a>(hb_samples, <a class="code" href="amrwbdata_8h.html#aa21752e939f66fa17dd0c733bd7d1518">bpf_6_7_coef</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bpf_6_7_mem,</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                      &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;samples_hb[<a class="code" href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a>]);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fr_cur_mode == <a class="code" href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a5458440c004c6c76f577a0bea0b676ba">MODE_23k85</a>)</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <a class="code" href="amrwbdec_8c.html#ab819d4a465abf7e311dfa970936d6b32">hb_fir_filter</a>(hb_samples, <a class="code" href="amrwbdata_8h.html#a345229d3fc6009649776702b05cbc1af">lpf_7_coef</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lpf_7_mem,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                          hb_samples);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="comment">/* Add the low and high frequency bands */</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            sub_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (sub_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + hb_samples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) * (1.0f / (1 &lt;&lt; 15));</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        <span class="comment">/* Update buffers and history */</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <a class="code" href="amrwbdec_8c.html#a064a16714ecf2a11225faf2013899d89">update_sub_state</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">/* update state for next frame */</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    memcpy(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isp_sub4_past, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isp[3], <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> * <span class="keyword">sizeof</span>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isp[3][0]));</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    memcpy(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_past_final, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;isf_cur, <a class="code" href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    *got_frame_ptr = 1;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">return</span> expected_fr_size;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="amrwbdec_8c.html#aa5123721523243eec52bf4a0d9115087"> 1278</a></span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="amrwbdec_8c.html#aa5123721523243eec52bf4a0d9115087">ff_amrwb_decoder</a> = {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>           = <span class="stringliteral">&quot;amrwb&quot;</span>,</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;AMR-WB (Adaptive Multi-Rate WideBand)&quot;</span>),</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    .type           = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>,</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    .id             = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac62343eecae501ff795fe264ce19d965">AV_CODEC_ID_AMR_WB</a>,</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="amrwbdec_8c.html#a62cf5b11b92bccdd03fe338851a6a2d7">AMRWBContext</a>),</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>           = <a class="code" href="amrwbdec_8c.html#a924792924cde559bce7760ef0db31429">amrwb_decode_init</a>,</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    .<a class="code" href="decode__audio_8c.html#a1704ae53d7f426e1b67341785b5b2b58">decode</a>         = <a class="code" href="amrwbdec_8c.html#a845faf285a7ef1c07373c560512f9dc5">amrwb_decode_frame</a>,</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    .capabilities   = <a class="code" href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a>,</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    .<a class="code" href="adpcmenc_8c.html#a0b94bda9858853d90b77d15331ca0ae1">sample_fmts</a>    = (<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a>[]){ <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a>,</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                                                     <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912">AV_SAMPLE_FMT_NONE</a> },</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aamrwbdec_8c_html_ace73bb135fd0e430e96be18832ae8787"><div class="ttname"><a href="amrwbdec_8c.html#ace73bb135fd0e430e96be18832ae8787">lpc_weighting</a></div><div class="ttdeci">static void lpc_weighting(float *out, const float *lpc, float gamma, int size)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00993">amrwbdec.c:993</a></div></div>
<div class="ttc" id="astruct_a_c_e_l_p_f_context_html"><div class="ttname"><a href="struct_a_c_e_l_p_f_context.html">ACELPFContext</a></div><div class="ttdef"><b>Definition:</b> <a href="acelp__filters_8h_source.html#l00028">acelp_filters.h:28</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a5917f4427a4c0958df06aa78a2bc7b27"><div class="ttname"><a href="amrwbdec_8c.html#a5917f4427a4c0958df06aa78a2bc7b27">pitch_enhancer</a></div><div class="ttdeci">static void pitch_enhancer(float *fixed_vector, float voice_fac)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00742">amrwbdec.c:742</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a41c0c9c8aa8e1fd12d65b18dd6948b09"><div class="ttname"><a href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a></div><div class="ttdeci">static av_cold int init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00035">avrndec.c:35</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a78c02721f5439323aa8def445c8dcb8e"><div class="ttname"><a href="amrwbdata_8h.html#a78c02721f5439323aa8def445c8dcb8e">UPS_FIR_SIZE</a></div><div class="ttdeci">#define UPS_FIR_SIZE</div><div class="ttdoc">upsampling filter size</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00036">amrwbdata.h:36</a></div></div>
<div class="ttc" id="aacelp__vectors_8h_html"><div class="ttname"><a href="acelp__vectors_8h.html">acelp_vectors.h</a></div></div>
<div class="ttc" id="ayuv2rgb_8c_html_af4737dfbbc138ccc0868064f253cbcc8"><div class="ttname"><a href="yuv2rgb_8c.html#af4737dfbbc138ccc0868064f253cbcc8">acc</a></div><div class="ttdeci">int acc</div><div class="ttdef"><b>Definition:</b> <a href="yuv2rgb_8c_source.html#l00555">yuv2rgb.c:555</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911ae8ce13192251673619783dc33159f82f"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911ae8ce13192251673619783dc33159f82f">MODE_6k60</a></div><div class="ttdeci">@ MODE_6k60</div><div class="ttdoc">6.60 kbit/s</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00052">amrwbdata.h:52</a></div></div>
<div class="ttc" id="aacelp__pitch__delay_8c_html_a845e6137ff9bf95a6a460495f0363455"><div class="ttname"><a href="acelp__pitch__delay_8c.html#a845e6137ff9bf95a6a460495f0363455">ff_amr_set_fixed_gain</a></div><div class="ttdeci">float ff_amr_set_fixed_gain(float fixed_gain_factor, float fixed_mean_energy, float *prediction_error, float energy_mean, const float *pred_table)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__pitch__delay_8c_source.html#l00127">acelp_pitch_delay.c:127</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_afa21ba8993c20f56ea35959231aa173d"><div class="ttname"><a href="amrwbdec_8c.html#afa21ba8993c20f56ea35959231aa173d">decode_2p_track</a></div><div class="ttdeci">static void decode_2p_track(int *out, int code, int m, int off)</div><div class="ttdoc">code: 2m+1 bits</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00383">amrwbdec.c:383</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_aef709c53358e5c6c6f538fd6370f6f61"><div class="ttname"><a href="amrwbdata_8h.html#aef709c53358e5c6c6f538fd6370f6f61">dico22_isf</a></div><div class="ttdeci">static const int16_t dico22_isf[128][3]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01245">amrwbdata.h:1245</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_abbf200ad31ebf9ce4d035a82b980b1bb"><div class="ttname"><a href="amrwbdata_8h.html#abbf200ad31ebf9ce4d035a82b980b1bb">upsample_fir</a></div><div class="ttdeci">static const float upsample_fir[4][24]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01822">amrwbdata.h:1822</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a2c654e1340e35ddd969cccd4f6646af7"><div class="ttname"><a href="amrwbdata_8h.html#a2c654e1340e35ddd969cccd4f6646af7">qua_hb_gain</a></div><div class="ttdeci">static const uint16_t qua_hb_gain[16]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01850">amrwbdata.h:1850</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="alfg_8c_html_aa8cc657d3dca15bc50a94730a4346d58"><div class="ttname"><a href="lfg_8c.html#aa8cc657d3dca15bc50a94730a4346d58">av_lfg_init</a></div><div class="ttdeci">av_cold void av_lfg_init(AVLFG *c, unsigned int seed)</div><div class="ttdef"><b>Definition:</b> <a href="lfg_8c_source.html#l00032">lfg.c:32</a></div></div>
<div class="ttc" id="adnn__backend__native__layer__mathbinary_8c_html_aec238e230db0cd41b80558db403931dd"><div class="ttname"><a href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a></div><div class="ttdeci">static float sub(float src0, float src1)</div><div class="ttdef"><b>Definition:</b> <a href="dnn__backend__native__layer__mathbinary_8c_source.html#l00033">dnn_backend_native_layer_mathbinary.c:33</a></div></div>
<div class="ttc" id="aadpcmenc_8c_html_a0b94bda9858853d90b77d15331ca0ae1"><div class="ttname"><a href="adpcmenc_8c.html#a0b94bda9858853d90b77d15331ca0ae1">sample_fmts</a></div><div class="ttdeci">static enum AVSampleFormat sample_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="adpcmenc_8c_source.html#l00566">adpcmenc.c:925</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a845faf285a7ef1c07373c560512f9dc5"><div class="ttname"><a href="amrwbdec_8c.html#a845faf285a7ef1c07373c560512f9dc5">amrwb_decode_frame</a></div><div class="ttdeci">static int amrwb_decode_frame(AVCodecContext *avctx, void *data, int *got_frame_ptr, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l01094">amrwbdec.c:1094</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga53d6da2dcd56f5f87c7afd8b33fa15ba"><div class="ttname"><a href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a></div><div class="ttdeci">#define AV_CH_LAYOUT_MONO</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00090">channel_layout.h:90</a></div></div>
<div class="ttc" id="astruct_a_c_e_l_p_v_context_html"><div class="ttname"><a href="struct_a_c_e_l_p_v_context.html">ACELPVContext</a></div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8h_source.html#l00028">acelp_vectors.h:28</a></div></div>
<div class="ttc" id="alsp_8c_html_a68114ebd69906fba92161bb3c3c33d26"><div class="ttname"><a href="lsp_8c.html#a68114ebd69906fba92161bb3c3c33d26">ff_amrwb_lsp2lpc</a></div><div class="ttdeci">void ff_amrwb_lsp2lpc(const double *lsp, float *lp, int lp_order)</div><div class="ttdef"><b>Definition:</b> <a href="lsp_8c_source.html#l00145">lsp.c:145</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a8ce73b1afd21ab427fd980019ffd84aa"><div class="ttname"><a href="amrwbdata_8h.html#a8ce73b1afd21ab427fd980019ffd84aa">dico2_isf</a></div><div class="ttdeci">static const int16_t dico2_isf[256][7]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00951">amrwbdata.h:951</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a55e7f6adecafd1ba7f050e0eaef6b74b"><div class="ttname"><a href="amrwbdec_8c.html#a55e7f6adecafd1ba7f050e0eaef6b74b">decode_isf_indices_36b</a></div><div class="ttdeci">static void decode_isf_indices_36b(uint16_t *ind, float *isf_q)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00155">amrwbdec.c:155</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_affbd4900256fc2ae71a3854a31f9490a"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#affbd4900256fc2ae71a3854a31f9490a">AMRWBContext::samples_up</a></div><div class="ttdeci">float samples_up[UPS_MEM_SIZE+AMRWB_SFR_SIZE]</div><div class="ttdoc">low-band samples and memory processed for upsampling</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00079">amrwbdec.c:79</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_sub_frame_html_abea20687117331cca29e599343f3bb97"><div class="ttname"><a href="struct_a_m_r_w_b_sub_frame.html#abea20687117331cca29e599343f3bb97">AMRWBSubFrame::ltp</a></div><div class="ttdeci">uint16_t ltp</div><div class="ttdoc">ltp-filtering flag</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00071">amrwbdata.h:71</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="aacelp__filters_8c_html_a99b7af03a2d6656d924f955c23313a8d"><div class="ttname"><a href="acelp__filters_8c.html#a99b7af03a2d6656d924f955c23313a8d">ff_acelp_filter_init</a></div><div class="ttdeci">void ff_acelp_filter_init(ACELPFContext *c)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__filters_8c_source.html#l00148">acelp_filters.c:148</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a48a67827eaf285f55f20ca10e4b5df2a"><div class="ttname"><a href="amrwbdec_8c.html#a48a67827eaf285f55f20ca10e4b5df2a">voice_factor</a></div><div class="ttdeci">static float voice_factor(float *p_vector, float p_gain, float *f_vector, float f_gain, CELPMContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00603">amrwbdec.c:603</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a2a7af55e171b4f5c3e786b3ceac7348f"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a2a7af55e171b4f5c3e786b3ceac7348f">AMRWBContext::celpf_ctx</a></div><div class="ttdeci">CELPFContext celpf_ctx</div><div class="ttdoc">context for filters for CELP-based codecs</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00091">amrwbdec.c:91</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911a5458440c004c6c76f577a0bea0b676ba"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a5458440c004c6c76f577a0bea0b676ba">MODE_23k85</a></div><div class="ttdeci">@ MODE_23k85</div><div class="ttdoc">23.85 kbit/s</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00060">amrwbdata.h:60</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a22db63d2b8b9bc2d190a0b857c90323e"><div class="ttname"><a href="amrwbdata_8h.html#a22db63d2b8b9bc2d190a0b857c90323e">UPS_MEM_SIZE</a></div><div class="ttdeci">#define UPS_MEM_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00037">amrwbdata.h:37</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911a361a22f664a54158139317053eff4cf0"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a361a22f664a54158139317053eff4cf0">MODE_15k85</a></div><div class="ttdeci">@ MODE_15k85</div><div class="ttdoc">15.85 kbit/s</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00056">amrwbdata.h:56</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceac62343eecae501ff795fe264ce19d965"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac62343eecae501ff795fe264ce19d965">AV_CODEC_ID_AMR_WB</a></div><div class="ttdeci">@ AV_CODEC_ID_AMR_WB</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00401">codec_id.h:401</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="astruct_c_e_l_p_f_context_html"><div class="ttname"><a href="struct_c_e_l_p_f_context.html">CELPFContext</a></div><div class="ttdef"><b>Definition:</b> <a href="celp__filters_8h_source.html#l00028">celp_filters.h:28</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_aa5123721523243eec52bf4a0d9115087"><div class="ttname"><a href="amrwbdec_8c.html#aa5123721523243eec52bf4a0d9115087">ff_amrwb_decoder</a></div><div class="ttdeci">AVCodec ff_amrwb_decoder</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l01278">amrwbdec.c:1278</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_ae8c13d0867d4e4a9b5cf8f7dac0ee3d9"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#ae8c13d0867d4e4a9b5cf8f7dac0ee3d9">AMRWBContext::isp_sub4_past</a></div><div class="ttdeci">double isp_sub4_past[LP_ORDER]</div><div class="ttdoc">ISP vector for the 4th subframe of the previous frame.</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00055">amrwbdec.c:55</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a583f865cc122fb5eec822bbc248be35d"><div class="ttname"><a href="amrwbdata_8h.html#a583f865cc122fb5eec822bbc248be35d">AMRWB_P_DELAY_MAX</a></div><div class="ttdeci">#define AMRWB_P_DELAY_MAX</div><div class="ttdoc">maximum pitch delay value</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00047">amrwbdata.h:47</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_aa21752e939f66fa17dd0c733bd7d1518"><div class="ttname"><a href="amrwbdata_8h.html#aa21752e939f66fa17dd0c733bd7d1518">bpf_6_7_coef</a></div><div class="ttdeci">static const float bpf_6_7_coef[31]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01856">amrwbdata.h:1856</a></div></div>
<div class="ttc" id="aamrwbdec__mips_8h_html"><div class="ttname"><a href="amrwbdec__mips_8h.html">amrwbdec_mips.h</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_af14e394a464cc8746ca39062d5b61559"><div class="ttname"><a href="amrwbdata_8h.html#af14e394a464cc8746ca39062d5b61559">dico23_isf</a></div><div class="ttdeci">static const int16_t dico23_isf[128][3]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01312">amrwbdata.h:1312</a></div></div>
<div class="ttc" id="astruct_a_v_l_f_g_html"><div class="ttname"><a href="struct_a_v_l_f_g.html">AVLFG</a></div><div class="ttdef"><b>Definition:</b> <a href="lfg_8h_source.html#l00033">lfg.h:33</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_ab69b64a9e9582239532020cda680ed6a"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#ab69b64a9e9582239532020cda680ed6a">AMRWBContext::pitch_lag_int</a></div><div class="ttdeci">uint8_t pitch_lag_int</div><div class="ttdoc">integer part of pitch lag of the previous subframe</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00060">amrwbdec.c:60</a></div></div>
<div class="ttc" id="astruct_c_e_l_p_m_context_html"><div class="ttname"><a href="struct_c_e_l_p_m_context.html">CELPMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="celp__math_8h_source.html#l00028">celp_math.h:28</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911a3bed97ee837dd9caee31d370da9f446d"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a3bed97ee837dd9caee31d370da9f446d">MODE_19k85</a></div><div class="ttdeci">@ MODE_19k85</div><div class="ttdoc">19.85 kbit/s</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00058">amrwbdata.h:58</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_ad381c46cd76ec70752f442f51195a45b"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#ad381c46cd76ec70752f442f51195a45b">AMRWBContext::prediction_error</a></div><div class="ttdeci">float prediction_error[4]</div><div class="ttdoc">quantified prediction errors {20log10(^gamma_gc)} for previous four subframes</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00068">amrwbdec.c:68</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a31f54c5c7e5b3992782ef5e70b1bdd10"><div class="ttname"><a href="amrwbdec_8c.html#a31f54c5c7e5b3992782ef5e70b1bdd10">decode_pitch_lag_low</a></div><div class="ttdeci">static void decode_pitch_lag_low(int *lag_int, int *lag_frac, int pitch_index, uint8_t *base_lag_int, int subframe, enum Mode mode)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00289">amrwbdec.c:289</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a064a16714ecf2a11225faf2013899d89"><div class="ttname"><a href="amrwbdec_8c.html#a064a16714ecf2a11225faf2013899d89">update_sub_state</a></div><div class="ttdeci">static void update_sub_state(AMRWBContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l01078">amrwbdec.c:1078</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_abb47213cac0e874dd6d9f51611d04ce7"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#abb47213cac0e874dd6d9f51611d04ce7">AMRWBContext::prev_ir_filter_nr</a></div><div class="ttdeci">uint8_t prev_ir_filter_nr</div><div class="ttdoc">previous impulse response filter &quot;impNr&quot;: 0 - strong, 1 - medium, 2 - none</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00075">amrwbdec.c:75</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_sub_frame_html_aa7afe7b8a90298ccb757881411cdd6dc"><div class="ttname"><a href="struct_a_m_r_w_b_sub_frame.html#aa7afe7b8a90298ccb757881411cdd6dc">AMRWBSubFrame::vq_gain</a></div><div class="ttdeci">uint16_t vq_gain</div><div class="ttdoc">VQ adaptive and innovative gains.</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00072">amrwbdata.h:72</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a6de0dff7a48ea1f3d96c7f8b1966dca0"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a6de0dff7a48ea1f3d96c7f8b1966dca0">AMRWBContext::excitation_buf</a></div><div class="ttdeci">float excitation_buf[AMRWB_P_DELAY_MAX+LP_ORDER+2+AMRWB_SFR_SIZE]</div><div class="ttdoc">current excitation and all necessary excitation history</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00062">amrwbdec.c:62</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a5898ba8e8dca64d019c4df4971ec8e6e"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a5898ba8e8dca64d019c4df4971ec8e6e">AMRWBContext::samples_az</a></div><div class="ttdeci">float samples_az[LP_ORDER+AMRWB_SFR_SIZE]</div><div class="ttdoc">low-band samples and memory from synthesis at 12.8kHz</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00078">amrwbdec.c:78</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a977c89423bb9b7e5808ea08a7da3aae2"><div class="ttname"><a href="amrwbdec_8c.html#a977c89423bb9b7e5808ea08a7da3aae2">BIT_STR</a></div><div class="ttdeci">#define BIT_STR(x, lsb, len)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00358">amrwbdec.c:358</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a7267b19010b9342b087710bb96dcfb51"><div class="ttname"><a href="amrwbdec_8c.html#a7267b19010b9342b087710bb96dcfb51">interpolate_isp</a></div><div class="ttdeci">static void interpolate_isp(double isp_q[4][LP_ORDER], const double *isp4_past)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00234">amrwbdec.c:234</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a05fb0cd1ead33b0a3e49c7002b605ac9"><div class="ttname"><a href="amrwbdec_8c.html#a05fb0cd1ead33b0a3e49c7002b605ac9">extrapolate_isf</a></div><div class="ttdeci">static void extrapolate_isf(float isf[LP_ORDER_16k])</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00928">amrwbdec.c:928</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a98b7f1d6a8e4d762b5f22712d97dee90"><div class="ttname"><a href="amrwbdec_8c.html#a98b7f1d6a8e4d762b5f22712d97dee90">decode_mime_header</a></div><div class="ttdeci">static int decode_mime_header(AMRWBContext *ctx, const uint8_t *buf)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00140">amrwbdec.c:140</a></div></div>
<div class="ttc" id="aamrnbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911"><div class="ttname"><a href="amrnbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a></div><div class="ttdeci">Mode</div><div class="ttdef"><b>Definition:</b> <a href="amrnbdata_8h_source.html#l00039">amrnbdata.h:39</a></div></div>
<div class="ttc" id="adecode__audio_8c_html_a1704ae53d7f426e1b67341785b5b2b58"><div class="ttname"><a href="decode__audio_8c.html#a1704ae53d7f426e1b67341785b5b2b58">decode</a></div><div class="ttdeci">static void decode(AVCodecContext *dec_ctx, AVPacket *pkt, AVFrame *frame, FILE *outfile)</div><div class="ttdef"><b>Definition:</b> <a href="decode__audio_8c_source.html#l00071">decode_audio.c:71</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_acc82ad8a916ce670c16fb2910ff16ae5"><div class="ttname"><a href="amrwbdata_8h.html#acc82ad8a916ce670c16fb2910ff16ae5">dico21_isf_36b</a></div><div class="ttdeci">static const int16_t dico21_isf_36b[128][5]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01417">amrwbdata.h:1417</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a941deb30ff19a9a3e5f1a23191166f3b"><div class="ttname"><a href="amrwbdec_8c.html#a941deb30ff19a9a3e5f1a23191166f3b">BIT_POS</a></div><div class="ttdeci">#define BIT_POS(x, p)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00361">amrwbdec.c:361</a></div></div>
<div class="ttc" id="alfg_8h_html_a58feb242e560adee0b7a16e11cce43e9"><div class="ttname"><a href="lfg_8h.html#a58feb242e560adee0b7a16e11cce43e9">av_lfg_get</a></div><div class="ttdeci">static unsigned int av_lfg_get(AVLFG *c)</div><div class="ttdef"><b>Definition:</b> <a href="lfg_8h_source.html#l00053">lfg.h:53</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a3a5a026f100e10f70468594364bc53e0"><div class="ttname"><a href="amrwbdata_8h.html#a3a5a026f100e10f70468594364bc53e0">isf_mean</a></div><div class="ttdeci">static const int16_t isf_mean[LP_ORDER]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01619">amrwbdata.h:1619</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_aecc13f1ae83a7d33e90c5df4465e69a7"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#aecc13f1ae83a7d33e90c5df4465e69a7">AMRWBContext::lp_coef</a></div><div class="ttdeci">float lp_coef[4][LP_ORDER]</div><div class="ttdoc">Linear Prediction Coefficients from ISP vector.</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00057">amrwbdec.c:57</a></div></div>
<div class="ttc" id="aamrnbdata_8h_html_aca56082ca0ee183cc4d18f1a90c397af"><div class="ttname"><a href="amrnbdata_8h.html#aca56082ca0ee183cc4d18f1a90c397af">energy_pred_fac</a></div><div class="ttdeci">static const float energy_pred_fac[4]</div><div class="ttdef"><b>Definition:</b> <a href="amrnbdata_8h_source.html#l01463">amrnbdata.h:1463</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a041121e2e6ec282cc35d9811adfc32e2"><div class="ttname"><a href="amrwbdec_8c.html#a041121e2e6ec282cc35d9811adfc32e2">decode_gains</a></div><div class="ttdeci">static void decode_gains(const uint8_t vq_gain, const enum Mode mode, float *fixed_gain_factor, float *pitch_gain)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00563">amrwbdec.c:563</a></div></div>
<div class="ttc" id="alfg_8h_html"><div class="ttname"><a href="lfg_8h.html">lfg.h</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html"><div class="ttname"><a href="struct_a_m_r_w_b_context.html">AMRWBContext</a></div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00047">amrwbdec.c:47</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a30c1c29e2c6d0119d8dec7009dadc52b"><div class="ttname"><a href="amrwbdata_8h.html#a30c1c29e2c6d0119d8dec7009dadc52b">hpf_zeros</a></div><div class="ttdeci">static const float hpf_zeros[2]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01813">amrwbdata.h:1813</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a30317eac39a6e75e40246fb09f204f86"><div class="ttname"><a href="amrwbdata_8h.html#a30317eac39a6e75e40246fb09f204f86">MIN_ISF_SPACING</a></div><div class="ttdeci">#define MIN_ISF_SPACING</div><div class="ttdoc">minimum isf gap</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00039">amrwbdata.h:39</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_abff7913ba231a07bd375c8c76d9fff98"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#abff7913ba231a07bd375c8c76d9fff98">AMRWBContext::fr_cur_mode</a></div><div class="ttdeci">enum Mode fr_cur_mode</div><div class="ttdoc">mode index of current frame</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00048">amrwbdec.c:49</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_af5c172f6fb9ce2fbe8033c7eaafe64e4"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#af5c172f6fb9ce2fbe8033c7eaafe64e4">AMRWBContext::isf_cur</a></div><div class="ttdeci">float isf_cur[LP_ORDER]</div><div class="ttdoc">working ISF vector from current frame</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00051">amrwbdec.c:51</a></div></div>
<div class="ttc" id="alsp_8c_html_a37c58af4234a1a79fc1315d25a94fc3b"><div class="ttname"><a href="lsp_8c.html#a37c58af4234a1a79fc1315d25a94fc3b">ff_acelp_lsf2lspd</a></div><div class="ttdeci">void ff_acelp_lsf2lspd(double *lsp, const float *lsf, int lp_order)</div><div class="ttdef"><b>Definition:</b> <a href="lsp_8c_source.html#l00093">lsp.c:93</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_frame_html_a9cbaee1fa9088e0d06bee7f2f7a5730e"><div class="ttname"><a href="struct_a_m_r_w_b_frame.html#a9cbaee1fa9088e0d06bee7f2f7a5730e">AMRWBFrame::subframe</a></div><div class="ttdeci">AMRWBSubFrame subframe[4]</div><div class="ttdoc">data for subframes</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00081">amrwbdata.h:81</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a38f6b82830de0e97470705085e732cfd"><div class="ttname"><a href="amrwbdata_8h.html#a38f6b82830de0e97470705085e732cfd">amr_bit_orderings_by_mode</a></div><div class="ttdeci">static const uint16_t *const amr_bit_orderings_by_mode[]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00676">amrwbdata.h:676</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_af057656d12496156f76bca3946bea0a8"><div class="ttname"><a href="amrwbdec_8c.html#af057656d12496156f76bca3946bea0a8">pitch_sharpening</a></div><div class="ttdeci">static void pitch_sharpening(AMRWBContext *ctx, float *fixed_vector)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00581">amrwbdec.c:581</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_frame_html"><div class="ttname"><a href="struct_a_m_r_w_b_frame.html">AMRWBFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00078">amrwbdata.h:78</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911a16a00ba9eddee496e558dbc282f4336a"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a16a00ba9eddee496e558dbc282f4336a">MODE_8k85</a></div><div class="ttdeci">@ MODE_8k85</div><div class="ttdoc">8.85 kbit/s</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00053">amrwbdata.h:53</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_frame_html_a7247add10589c8266df3be6381a7fc6f"><div class="ttname"><a href="struct_a_m_r_w_b_frame.html#a7247add10589c8266df3be6381a7fc6f">AMRWBFrame::vad</a></div><div class="ttdeci">uint16_t vad</div><div class="ttdoc">voice activity detection flag</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00079">amrwbdata.h:79</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a62cf5b11b92bccdd03fe338851a6a2d7"><div class="ttname"><a href="amrwbdec_8c.html#a62cf5b11b92bccdd03fe338851a6a2d7">AMRWBContext</a></div><div class="ttdeci">struct AMRWBContext AMRWBContext</div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a264d12c87ed7977e10aa4e2b1a061dc3"><div class="ttname"><a href="amrwbdec_8c.html#a264d12c87ed7977e10aa4e2b1a061dc3">scaled_hb_excitation</a></div><div class="ttdeci">static void scaled_hb_excitation(AMRWBContext *ctx, float *hb_exc, const float *synth_exc, float hb_gain)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00890">amrwbdec.c:890</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_sub_frame_html_ae528cb0b7e9abdb55cfbdd88567c3f95"><div class="ttname"><a href="struct_a_m_r_w_b_sub_frame.html#ae528cb0b7e9abdb55cfbdd88567c3f95">AMRWBSubFrame::pul_ih</a></div><div class="ttdeci">uint16_t pul_ih[4]</div><div class="ttdoc">MSBs part of codebook index (high modes only)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00074">amrwbdata.h:74</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a7074f277c3e3278938d68b562bdd1a65"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a7074f277c3e3278938d68b562bdd1a65">AMRWBContext::hpf_400_mem</a></div><div class="ttdeci">float hpf_400_mem[2]</div><div class="ttdoc">previous values in the high pass filters</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00082">amrwbdec.c:82</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911a49c7a51e80e9f6bb24da8a13c9560459"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a49c7a51e80e9f6bb24da8a13c9560459">MODE_SID</a></div><div class="ttdeci">@ MODE_SID</div><div class="ttdoc">comfort noise frame</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00061">amrwbdata.h:61</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a1f779b042bd27bd3fec2f5f901d378cf"><div class="ttname"><a href="amrwbdata_8h.html#a1f779b042bd27bd3fec2f5f901d378cf">qua_gain_7b</a></div><div class="ttdeci">static const int16_t qua_gain_7b[128][2]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01698">amrwbdata.h:1698</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911a0281a239710c001f6ed63931438243d6"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a0281a239710c001f6ed63931438243d6">MODE_12k65</a></div><div class="ttdeci">@ MODE_12k65</div><div class="ttdoc">12.65 kbit/s</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00054">amrwbdata.h:54</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a9ca312ccf032e19a22ef46044ae0dc11"><div class="ttname"><a href="amrwbdata_8h.html#a9ca312ccf032e19a22ef46044ae0dc11">cf_sizes_wb</a></div><div class="ttdeci">static const uint16_t cf_sizes_wb[]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01885">amrwbdata.h:1885</a></div></div>
<div class="ttc" id="aamrnbdata_8h_html_a09183f9560014dbb769d60531d9c0271"><div class="ttname"><a href="amrnbdata_8h.html#a09183f9560014dbb769d60531d9c0271">ir_filters_lookup</a></div><div class="ttdeci">static const float *const ir_filters_lookup[2]</div><div class="ttdef"><b>Definition:</b> <a href="amrnbdata_8h_source.html#l01658">amrnbdata.h:1658</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_frame_html_a100a4e73e1cb82d9831358438d757b02"><div class="ttname"><a href="struct_a_m_r_w_b_frame.html#a100a4e73e1cb82d9831358438d757b02">AMRWBFrame::isp_id</a></div><div class="ttdeci">uint16_t isp_id[7]</div><div class="ttdoc">index of ISP subvectors</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00080">amrwbdata.h:80</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a3eb4a40c2fde016030b9e8f41945d115"><div class="ttname"><a href="amrwbdata_8h.html#a3eb4a40c2fde016030b9e8f41945d115">hpf_31_poles</a></div><div class="ttdeci">static const float hpf_31_poles[2]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01814">amrwbdata.h:1814</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_afe50dd248b85b5945377c4e9e03c2fc7"><div class="ttname"><a href="amrwbdata_8h.html#afe50dd248b85b5945377c4e9e03c2fc7">AMRWB_SFR_SIZE</a></div><div class="ttdeci">#define AMRWB_SFR_SIZE</div><div class="ttdoc">samples per subframe at 12.8 kHz</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00045">amrwbdata.h:45</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a73aebbae29015232adf06983bd43145a"><div class="ttname"><a href="amrwbdata_8h.html#a73aebbae29015232adf06983bd43145a">dico21_isf</a></div><div class="ttdeci">static const int16_t dico21_isf[64][3]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01210">amrwbdata.h:1210</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_sub_frame_html_ad266dfc247d4ff69823b09c81db377c0"><div class="ttname"><a href="struct_a_m_r_w_b_sub_frame.html#ad266dfc247d4ff69823b09c81db377c0">AMRWBSubFrame::pul_il</a></div><div class="ttdeci">uint16_t pul_il[4]</div><div class="ttdoc">LSBs part of codebook index.</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00075">amrwbdata.h:75</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_ae41fd47d51adfb2f6ce117ad5073e6d6"><div class="ttname"><a href="amrwbdata_8h.html#ae41fd47d51adfb2f6ce117ad5073e6d6">AMRWB_SFR_SIZE_16k</a></div><div class="ttdeci">#define AMRWB_SFR_SIZE_16k</div><div class="ttdoc">samples per subframe at 16 kHz</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00046">amrwbdata.h:46</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a9a7560be7832274a46f9d9b203b25708"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a9a7560be7832274a46f9d9b203b25708">AMRWBContext::excitation</a></div><div class="ttdeci">float * excitation</div><div class="ttdoc">points to current excitation in excitation_buf[]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00063">amrwbdec.c:63</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a48a45ca5d5224cda282262c5e9fac2dc"><div class="ttname"><a href="amrwbdata_8h.html#a48a45ca5d5224cda282262c5e9fac2dc">dico25_isf</a></div><div class="ttdeci">static const int16_t dico25_isf[32][4]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01398">amrwbdata.h:1398</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a496ba0152df0e2c7e34591740efb2cb9"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a496ba0152df0e2c7e34591740efb2cb9">AMRWBContext::frame</a></div><div class="ttdeci">AMRWBFrame frame</div><div class="ttdoc">AMRWB parameters decoded from bitstream.</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00048">amrwbdec.c:48</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a8899c7d1c2d5c08c42f6a60d0436f3df"><div class="ttname"><a href="amrwbdata_8h.html#a8899c7d1c2d5c08c42f6a60d0436f3df">dico23_isf_36b</a></div><div class="ttdeci">static const int16_t dico23_isf_36b[64][7]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01551">amrwbdata.h:1551</a></div></div>
<div class="ttc" id="acelp__filters_8h_html"><div class="ttname"><a href="celp__filters_8h.html">celp_filters.h</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a9405e4a1fa99c7d145e71af43f3d7b8b"><div class="ttname"><a href="amrwbdec_8c.html#a9405e4a1fa99c7d145e71af43f3d7b8b">noise_enhancer</a></div><div class="ttdeci">static float noise_enhancer(float fixed_gain, float *prev_tr_gain, float voice_fac, float stab_fac)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00715">amrwbdec.c:715</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_afd952ebf11a2b16d0f8cf49642887309"><div class="ttname"><a href="amrwbdata_8h.html#afd952ebf11a2b16d0f8cf49642887309">pulses_nb_per_mode_tr</a></div><div class="ttdeci">static const uint8_t pulses_nb_per_mode_tr[][4]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01656">amrwbdata.h:1656</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_ac484ac0b6459c4c3cb74ab94566bb4e1"><div class="ttname"><a href="amrwbdec_8c.html#ac484ac0b6459c4c3cb74ab94566bb4e1">auto_correlation</a></div><div class="ttdeci">static float auto_correlation(float *diff_isf, float mean, int lag)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00909">amrwbdec.c:909</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a4c0c38838f6b66edbbb2056b4e3acf0a"><div class="ttname"><a href="amrwbdata_8h.html#a4c0c38838f6b66edbbb2056b4e3acf0a">AMRWB_P_DELAY_MIN</a></div><div class="ttdeci">#define AMRWB_P_DELAY_MIN</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00048">amrwbdata.h:48</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a6a63a26f9d87f08eaa01b82293789670"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a6a63a26f9d87f08eaa01b82293789670">AMRWBContext::acelpv_ctx</a></div><div class="ttdeci">ACELPVContext acelpv_ctx</div><div class="ttdoc">context for vector operations for ACELP-based codecs</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00090">amrwbdec.c:90</a></div></div>
<div class="ttc" id="afloat__dsp_8h_html"><div class="ttname"><a href="float__dsp_8h.html">float_dsp.h</a></div></div>
<div class="ttc" id="ah264pred__template_8c_html_a93cca9adbbca82ea00bf3250781f6dce"><div class="ttname"><a href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a></div><div class="ttdeci">for(j=16;j &gt;0;--j)</div><div class="ttdef"><b>Definition:</b> <a href="h264pred__template_8c_source.html#l00469">h264pred_template.c:469</a></div></div>
<div class="ttc" id="aacelp__vectors_8c_html_a2305842938498aac58a3ad357b591b12"><div class="ttname"><a href="acelp__vectors_8c.html#a2305842938498aac58a3ad357b591b12">ff_acelp_vectors_init</a></div><div class="ttdeci">void ff_acelp_vectors_init(ACELPVContext *c)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8c_source.html#l00268">acelp_vectors.c:268</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_sub_frame_html_a45db731250b1d0f534f1438a57ae835c"><div class="ttname"><a href="struct_a_m_r_w_b_sub_frame.html#a45db731250b1d0f534f1438a57ae835c">AMRWBSubFrame::adap</a></div><div class="ttdeci">uint16_t adap</div><div class="ttdoc">adaptive codebook index</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00070">amrwbdata.h:70</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_ad6199dd8c0746a92853c2b3a8ba244b6"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#ad6199dd8c0746a92853c2b3a8ba244b6">AMRWBContext::tilt_coef</a></div><div class="ttdeci">float tilt_coef</div><div class="ttdoc">{beta_1} related to the voicing of the previous subframe</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00072">amrwbdec.c:72</a></div></div>
<div class="ttc" id="acelp__math_8c_html_a1834fa36a22b937dbb1a76e1e7a7869e"><div class="ttname"><a href="celp__math_8c.html#a1834fa36a22b937dbb1a76e1e7a7869e">ff_celp_math_init</a></div><div class="ttdeci">void ff_celp_math_init(CELPMContext *c)</div><div class="ttdef"><b>Definition:</b> <a href="celp__math_8c_source.html#l00120">celp_math.c:120</a></div></div>
<div class="ttc" id="adecode_8c_html_a0d5adb2b84051826883605b3ab4d1bab"><div class="ttname"><a href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a></div><div class="ttdeci">int ff_get_buffer(AVCodecContext *avctx, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01879">decode.c:1879</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a6f67ed7dc69c91cfd1edcf536c3c7086"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a6f67ed7dc69c91cfd1edcf536c3c7086">AMRWBContext::fixed_vector</a></div><div class="ttdeci">float fixed_vector[AMRWB_SFR_SIZE]</div><div class="ttdoc">algebraic codebook (fixed) vector for current subframe</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00066">amrwbdec.c:66</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga5f35425595395c76cfa406c883f78aed"><div class="ttname"><a href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a></div><div class="ttdeci">#define AV_CODEC_CAP_DR1</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_aec2646df415561a7f6cd0a6163a0bac2"><div class="ttname"><a href="amrwbdec_8c.html#aec2646df415561a7f6cd0a6163a0bac2">find_hb_gain</a></div><div class="ttdeci">static float find_hb_gain(AMRWBContext *ctx, const float *synth, uint16_t hb_idx, uint8_t vad)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00860">amrwbdec.c:860</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_ac3e32f11352b43c7b740941648680597"><div class="ttname"><a href="amrwbdata_8h.html#ac3e32f11352b43c7b740941648680597">ENERGY_MEAN</a></div><div class="ttdeci">#define ENERGY_MEAN</div><div class="ttdoc">mean innovation energy (dB) in all modes</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00042">amrwbdata.h:42</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_af6658d0e2f078c46a4357646790a69a8"><div class="ttname"><a href="amrwbdata_8h.html#af6658d0e2f078c46a4357646790a69a8">LP_ORDER_16k</a></div><div class="ttdeci">#define LP_ORDER_16k</div><div class="ttdoc">lpc filter order at 16kHz</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00034">amrwbdata.h:34</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a7e4482020c96b7bcb9aae1e74f5f8bbc"><div class="ttname"><a href="amrwbdata_8h.html#a7e4482020c96b7bcb9aae1e74f5f8bbc">hpf_31_gain</a></div><div class="ttdeci">static const float hpf_31_gain</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01815">amrwbdata.h:1815</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a99aa83ec6fc57b8bbf288c38d8c66ff1"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a99aa83ec6fc57b8bbf288c38d8c66ff1">AMRWBContext::lpf_7_mem</a></div><div class="ttdeci">float lpf_7_mem[HB_FIR_SIZE]</div><div class="ttdoc">previous values in the high-band low pass filter</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00085">amrwbdec.c:85</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_ade2ef483832b02ea6108c2b28852b5cb"><div class="ttname"><a href="amrwbdec_8c.html#ade2ef483832b02ea6108c2b28852b5cb">de_emphasis</a></div><div class="ttdeci">static void de_emphasis(float *out, float *in, float m, float mem[1])</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00807">amrwbdec.c:807</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_ae211a32c34d410503a7aa1b2878d5e36"><div class="ttname"><a href="amrwbdec_8c.html#ae211a32c34d410503a7aa1b2878d5e36">decode_5p_track</a></div><div class="ttdeci">static void decode_5p_track(int *out, int code, int m, int off)</div><div class="ttdoc">code: 5m bits</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00438">amrwbdec.c:438</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912">AV_SAMPLE_FMT_NONE</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00059">samplefmt.h:59</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_ab819d4a465abf7e311dfa970936d6b32"><div class="ttname"><a href="amrwbdec_8c.html#ab819d4a465abf7e311dfa970936d6b32">hb_fir_filter</a></div><div class="ttdeci">static void hb_fir_filter(float *out, const float fir_coef[HB_FIR_SIZE+1], float mem[HB_FIR_SIZE], const float *in)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l01056">amrwbdec.c:1056</a></div></div>
<div class="ttc" id="acelp__math_8h_html"><div class="ttname"><a href="celp__math_8h.html">celp_math.h</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_af797c4df0d4ed76a7c331a3a19dd1b6e"><div class="ttname"><a href="amrwbdata_8h.html#af797c4df0d4ed76a7c331a3a19dd1b6e">dico22_isf_36b</a></div><div class="ttdeci">static const int16_t dico22_isf_36b[128][4]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01484">amrwbdata.h:1484</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a22596793d193929e8a01a4570afc256e"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a22596793d193929e8a01a4570afc256e">AMRWBContext::first_frame</a></div><div class="ttdeci">uint8_t first_frame</div><div class="ttdoc">flag active during decoding of the first frame</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00088">amrwbdec.c:88</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a8ef6489170ea2f26698b7298e6d26ded"><div class="ttname"><a href="libavutil_2internal_8h.html#a8ef6489170ea2f26698b7298e6d26ded">avpriv_report_missing_feature</a></div><div class="ttdeci">void avpriv_report_missing_feature(void *avc, const char *msg,...) av_printf_format(2</div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a93432e7ab4e259c3e4ed259a28293333"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a93432e7ab4e259c3e4ed259a28293333">AMRWBContext::prng</a></div><div class="ttdeci">AVLFG prng</div><div class="ttdoc">random number generator for white noise excitation</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00087">amrwbdec.c:87</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a0fc8143dd3ecb56f2112d02eb62e8ef3"><div class="ttname"><a href="amrwbdata_8h.html#a0fc8143dd3ecb56f2112d02eb62e8ef3">dico24_isf</a></div><div class="ttdeci">static const int16_t dico24_isf[32][3]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01379">amrwbdata.h:1379</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a73cfd1848984997ec2e6ad4b1e7f1b1c"><div class="ttname"><a href="amrwbdec_8c.html#a73cfd1848984997ec2e6ad4b1e7f1b1c">decode_pitch_lag_high</a></div><div class="ttdeci">static void decode_pitch_lag_high(int *lag_int, int *lag_frac, int pitch_index, uint8_t *base_lag_int, int subframe)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00256">amrwbdec.c:256</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_aeb609ce508df9e0592ba1e9e5d959ea2"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#aeb609ce508df9e0592ba1e9e5d959ea2">AMRWBContext::pitch_vector</a></div><div class="ttdeci">float pitch_vector[AMRWB_SFR_SIZE]</div><div class="ttdoc">adaptive codebook (pitch) vector for current subframe</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00065">amrwbdec.c:65</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a3ecd7b7ea65f551ac901e059defeec5a"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a3ecd7b7ea65f551ac901e059defeec5a">AMRWBContext::acelpf_ctx</a></div><div class="ttdeci">ACELPFContext acelpf_ctx</div><div class="ttdoc">context for filters for ACELP-based codecs</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00089">amrwbdec.c:89</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a784b5717ddf8e30747108194390529e0"><div class="ttname"><a href="amrwbdata_8h.html#a784b5717ddf8e30747108194390529e0">isf_init</a></div><div class="ttdeci">static const int16_t isf_init[LP_ORDER]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01625">amrwbdata.h:1625</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1bdba69ea111e2a9d03fdaa7a46a4c45"><div class="ttname"><a href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">AVCodecContext::sample_fmt</a></div><div class="ttdeci">enum AVSampleFormat sample_fmt</div><div class="ttdoc">sample format</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1194</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a317c2762699ff2b6b157b2f3713d90f9"><div class="ttname"><a href="amrwbdec_8c.html#a317c2762699ff2b6b157b2f3713d90f9">stability_factor</a></div><div class="ttdeci">static float stability_factor(const float *isf, const float *isf_past)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00691">amrwbdec.c:691</a></div></div>
<div class="ttc" id="acelp__filters_8c_html_a7ecb4e6b6db5ab58029e77736065a249"><div class="ttname"><a href="celp__filters_8c.html#a7ecb4e6b6db5ab58029e77736065a249">ff_celp_filter_init</a></div><div class="ttdeci">void ff_celp_filter_init(CELPFContext *c)</div><div class="ttdef"><b>Definition:</b> <a href="celp__filters_8c_source.html#l00212">celp_filters.c:212</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a1b61fbaf38c39717aacc5b2bd6e2d28b"><div class="ttname"><a href="amrwbdec_8c.html#a1b61fbaf38c39717aacc5b2bd6e2d28b">isf_add_mean_and_past</a></div><div class="ttdeci">static void isf_add_mean_and_past(float *isf_q, float *isf_past)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00214">amrwbdec.c:214</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ab92ad91055387e15b43ff5f6f60f2895"><div class="ttname"><a href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16, int16_t,(*(const int16_t *) pi &gt;&gt; 8)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32, int32_t,(*(const int32_t *) pi &gt;&gt; 24)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, float, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, float, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, float, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, double, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, double, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, double, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) #define SET_CONV_FUNC_GROUP(ofmt, ifmt) static void set_generic_function(AudioConvert *ac) { } void ff_audio_convert_free(AudioConvert **ac) { if(! *ac) return;ff_dither_free(&amp;(*ac) -&gt;dc);av_freep(ac);} AudioConvert *ff_audio_convert_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map) { AudioConvert *ac;int in_planar, out_planar;ac=av_mallocz(sizeof(*ac));if(!ac) return NULL;ac-&gt;avr=avr;ac-&gt;out_fmt=out_fmt;ac-&gt;in_fmt=in_fmt;ac-&gt;channels=channels;ac-&gt;apply_map=apply_map;if(avr-&gt;dither_method !=AV_RESAMPLE_DITHER_NONE &amp;&amp;av_get_packed_sample_fmt(out_fmt)==AV_SAMPLE_FMT_S16 &amp;&amp;av_get_bytes_per_sample(in_fmt) &gt; 2) { ac-&gt;dc=ff_dither_alloc(avr, out_fmt, in_fmt, channels, sample_rate, apply_map);if(!ac-&gt;dc) { av_free(ac);return NULL;} return ac;} in_planar=ff_sample_fmt_is_planar(in_fmt, channels);out_planar=ff_sample_fmt_is_planar(out_fmt, channels);if(in_planar==out_planar) { ac-&gt;func_type=CONV_FUNC_TYPE_FLAT;ac-&gt;planes=in_planar ? ac-&gt;channels :1;} else if(in_planar) ac-&gt;func_type=CONV_FUNC_TYPE_INTERLEAVE;else ac-&gt;func_type=CONV_FUNC_TYPE_DEINTERLEAVE;set_generic_function(ac);if(ARCH_AARCH64) ff_audio_convert_init_aarch64(ac);if(ARCH_ARM) ff_audio_convert_init_arm(ac);if(ARCH_X86) ff_audio_convert_init_x86(ac);return ac;} int ff_audio_convert(AudioConvert *ac, AudioData *out, AudioData *in) { int use_generic=1;int len=in-&gt;nb_samples;int p;if(ac-&gt;dc) { av_log(ac-&gt;avr, AV_LOG_TRACE, &quot;%d samples - audio_convert: %s to %s (dithered)\n&quot;, len, av_get_sample_fmt_name(ac-&gt;in_fmt), av_get_sample_fmt_name(ac-&gt;out_fmt));return ff_convert_dither(ac-&gt; in</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00326">audio_convert.c:326</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a30adc75414e0a59ca94aad7a56e17e42"><div class="ttname"><a href="filter__design_8txt.html#a30adc75414e0a59ca94aad7a56e17e42">code</a></div><div class="ttdeci">and forward the test the status of outputs and forward it to the corresponding return FFERROR_NOT_READY If the filters stores internally one or a few frame for some it can consider them to be part of the FIFO and delay acknowledging a status change accordingly Example code</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00176">filter_design.txt:178</a></div></div>
<div class="ttc" id="aamrnbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911ad2c08fb8362bb7bc8b17aa5a6df6e498"><div class="ttname"><a href="amrnbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911ad2c08fb8362bb7bc8b17aa5a6df6e498">NO_DATA</a></div><div class="ttdeci">@ NO_DATA</div><div class="ttdoc">no transmission</div><div class="ttdef"><b>Definition:</b> <a href="amrnbdata_8h_source.html#l00051">amrnbdata.h:50</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="acommon_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_gaf9a51ca15301871723577c730b5865c5"><div class="ttname"><a href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a></div><div class="ttdeci">AVSampleFormat</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00058">samplefmt.h:58</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="aacelp__filters_8h_html"><div class="ttname"><a href="acelp__filters_8h.html">acelp_filters.h</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911a01976c8d32712bb64bf581a60ff5ebce"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a01976c8d32712bb64bf581a60ff5ebce">MODE_23k05</a></div><div class="ttdeci">@ MODE_23k05</div><div class="ttdoc">23.05 kbit/s</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00059">amrwbdata.h:59</a></div></div>
<div class="ttc" id="aamr_8h_html"><div class="ttname"><a href="amr_8h.html">amr.h</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a0c8933b009557c5e218bf13cb7b89fb8"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a0c8933b009557c5e218bf13cb7b89fb8">AMRWBContext::base_pitch_lag</a></div><div class="ttdeci">uint8_t base_pitch_lag</div><div class="ttdoc">integer part of pitch lag for the next relative subframe</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00059">amrwbdec.c:59</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="agroup__lavu__sampmanip_html_ga6f287e5c4f426a8be8a8b5b8f708a05c"><div class="ttname"><a href="group__lavu__sampmanip.html#ga6f287e5c4f426a8be8a8b5b8f708a05c">av_samples_set_silence</a></div><div class="ttdeci">int av_samples_set_silence(uint8_t **audio_data, int offset, int nb_samples, int nb_channels, enum AVSampleFormat sample_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8c_source.html#l00237">samplefmt.c:237</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_sub_frame_html_ab371a458770225df77ef2c3603bc59e6"><div class="ttname"><a href="struct_a_m_r_w_b_sub_frame.html#ab371a458770225df77ef2c3603bc59e6">AMRWBSubFrame::hb_gain</a></div><div class="ttdeci">uint16_t hb_gain</div><div class="ttdoc">high-band energy index (mode 23k85 only)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00073">amrwbdata.h:73</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_aa45fc23509455de4c79085302d3fc833"><div class="ttname"><a href="amrwbdec_8c.html#aa45fc23509455de4c79085302d3fc833">decode_4p_track</a></div><div class="ttdeci">static void decode_4p_track(int *out, int code, int m, int off)</div><div class="ttdoc">code: 4m bits</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00402">amrwbdec.c:402</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a345229d3fc6009649776702b05cbc1af"><div class="ttname"><a href="amrwbdata_8h.html#a345229d3fc6009649776702b05cbc1af">lpf_7_coef</a></div><div class="ttdeci">static const float lpf_7_coef[31]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01870">amrwbdata.h:1870</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="alsp_8h_html"><div class="ttname"><a href="lsp_8h.html">lsp.h</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a8ef6b361680b7985ba8277d6ee107fde"><div class="ttname"><a href="amrwbdec_8c.html#a8ef6b361680b7985ba8277d6ee107fde">hb_synthesis</a></div><div class="ttdeci">static void hb_synthesis(AMRWBContext *ctx, int subframe, float *samples, const float *exc, const float *isf, const float *isf_past)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l01015">amrwbdec.c:1015</a></div></div>
<div class="ttc" id="aspdifenc_8c_html_addcb93d939ffa259ff1d9247bdd590fd"><div class="ttname"><a href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a></div><div class="ttdeci">unsigned int pos</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00410">spdifenc.c:410</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a241a8d99774f1350beefa39af8c7f50d"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a241a8d99774f1350beefa39af8c7f50d">AMRWBContext::prev_sparse_fixed_gain</a></div><div class="ttdeci">float prev_sparse_fixed_gain</div><div class="ttdoc">previous fixed gain; used by anti-sparseness to determine &quot;onset&quot;</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00074">amrwbdec.c:74</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a9cd5a4e6157b785e325c660049749956"><div class="ttname"><a href="amrwbdata_8h.html#a9cd5a4e6157b785e325c660049749956">ac_inter</a></div><div class="ttdeci">static const float ac_inter[65]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01635">amrwbdata.h:1635</a></div></div>
<div class="ttc" id="acelp__filters_8c_html_a7b398ff49015b42adf109e6c82015f5a"><div class="ttname"><a href="celp__filters_8c.html#a7b398ff49015b42adf109e6c82015f5a">ff_celp_circ_addf</a></div><div class="ttdeci">void ff_celp_circ_addf(float *out, const float *in, const float *lagged, int lag, float fac, int n)</div><div class="ttdef"><b>Definition:</b> <a href="celp__filters_8c_source.html#l00050">celp_filters.c:50</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_ab50d1d86ff5045734c4ce824a7aae62f"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#ab50d1d86ff5045734c4ce824a7aae62f">AMRWBContext::isp</a></div><div class="ttdeci">double isp[4][LP_ORDER]</div><div class="ttdoc">ISP vectors from current frame.</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00054">amrwbdec.c:54</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a2fe73400ea946aa976aafb86e865aed4"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a2fe73400ea946aa976aafb86e865aed4">AMRWBContext::isf_past_final</a></div><div class="ttdeci">float isf_past_final[LP_ORDER]</div><div class="ttdoc">final processed ISF vector of the previous frame</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00053">amrwbdec.c:53</a></div></div>
<div class="ttc" id="achannel__layout_8h_html"><div class="ttname"><a href="channel__layout_8h.html">channel_layout.h</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_sub_frame_html"><div class="ttname"><a href="struct_a_m_r_w_b_sub_frame.html">AMRWBSubFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00069">amrwbdata.h:69</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a8f235a027140613ea7a2b963782b7e54"><div class="ttname"><a href="amrwbdec_8c.html#a8f235a027140613ea7a2b963782b7e54">anti_sparseness</a></div><div class="ttdeci">static float * anti_sparseness(AMRWBContext *ctx, float *fixed_vector, float *buf)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00627">amrwbdec.c:627</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a680f7828654452afca5fb666d85a5c87"><div class="ttname"><a href="amrwbdata_8h.html#a680f7828654452afca5fb666d85a5c87">hpf_400_gain</a></div><div class="ttdeci">static const float hpf_400_gain</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01818">amrwbdata.h:1818</a></div></div>
<div class="ttc" id="aebur128_8h_html_a1a6b6fb557d8d37d59700faf4e4c9167"><div class="ttname"><a href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> <a href="ebur128_8h_source.html#l00083">ebur128.h:83</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a8bb0e062ad4c9ac009ee3febc5b43722"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a8bb0e062ad4c9ac009ee3febc5b43722">AMRWBContext::bpf_6_7_mem</a></div><div class="ttdeci">float bpf_6_7_mem[HB_FIR_SIZE]</div><div class="ttdoc">previous values in the high-band band pass filter</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00084">amrwbdec.c:84</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_ad29bf43e84a97f7f0f5cce3ef58d0056"><div class="ttname"><a href="amrwbdec_8c.html#ad29bf43e84a97f7f0f5cce3ef58d0056">decode_isf_indices_46b</a></div><div class="ttdeci">static void decode_isf_indices_46b(uint16_t *ind, float *isf_q)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00181">amrwbdec.c:181</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_ab49225cec6026feed5d81cfb5b5a5df9"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#ab49225cec6026feed5d81cfb5b5a5df9">AMRWBContext::samples_hb</a></div><div class="ttdeci">float samples_hb[LP_ORDER_16k+AMRWB_SFR_SIZE_16k]</div><div class="ttdoc">high-band samples and memory from synthesis at 16kHz</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00080">amrwbdec.c:80</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_aafef0510908bee8408dfa6d6532f9a3d"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#aafef0510908bee8408dfa6d6532f9a3d">AMRWBContext::fr_quality</a></div><div class="ttdeci">uint8_t fr_quality</div><div class="ttdoc">frame quality index (FQI)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00050">amrwbdec.c:50</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html"><div class="ttname"><a href="amrwbdata_8h.html">amrwbdata.h</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ac53f7e33bdbd6ea3ec96ee0f1292ee84"><div class="ttname"><a href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio samples</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00008">filter_design.txt:8</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_af1bd92828220872a4398125001e30dec"><div class="ttname"><a href="amrwbdata_8h.html#af1bd92828220872a4398125001e30dec">isfp_inter</a></div><div class="ttdeci">static const float isfp_inter[4]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01631">amrwbdata.h:1631</a></div></div>
<div class="ttc" id="aamr_8h_html_a9441d751afb75ff743ffaaadebacf265"><div class="ttname"><a href="amr_8h.html#a9441d751afb75ff743ffaaadebacf265">ff_amr_bit_reorder</a></div><div class="ttdeci">static void ff_amr_bit_reorder(uint16_t *out, int size, const uint8_t *data, const R_TABLE_TYPE *ord_table)</div><div class="ttdef"><b>Definition:</b> <a href="amr_8h_source.html#l00051">amr.h:51</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_aa2e5985e700c929fad072b814be73762"><div class="ttname"><a href="amrwbdata_8h.html#aa2e5985e700c929fad072b814be73762">LP_ORDER</a></div><div class="ttdeci">#define LP_ORDER</div><div class="ttdoc">linear predictive coding filter order</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00033">amrwbdata.h:33</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a64eb4477ee66bd68f0e0a714023b205b"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a64eb4477ee66bd68f0e0a714023b205b">AMRWBContext::isf_q_past</a></div><div class="ttdeci">float isf_q_past[LP_ORDER]</div><div class="ttdoc">quantized ISF vector of the previous frame</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00052">amrwbdec.c:52</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_af3604f0b039c35a9d7477422f4f8a8fa"><div class="ttname"><a href="amrwbdec_8c.html#af3604f0b039c35a9d7477422f4f8a8fa">decode_3p_track</a></div><div class="ttdeci">static void decode_3p_track(int *out, int code, int m, int off)</div><div class="ttdoc">code: 3m+1 bits</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00393">amrwbdec.c:393</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_af5ab5bd51c5ba560fa7dac5df2c897f1"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#af5ab5bd51c5ba560fa7dac5df2c897f1">AMRWBContext::fixed_gain</a></div><div class="ttdeci">float fixed_gain[2]</div><div class="ttdoc">quantified fixed gains for the current and previous subframes</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00070">amrwbdec.c:70</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a6c8a660995775b0ae9c174b0ade83001"><div class="ttname"><a href="amrwbdec_8c.html#a6c8a660995775b0ae9c174b0ade83001">decode_fixed_vector</a></div><div class="ttdeci">static void decode_fixed_vector(float *fixed_vector, const uint16_t *pulse_hi, const uint16_t *pulse_lo, const enum Mode mode)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00492">amrwbdec.c:492</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a594f20e9b92d5415fa8e64f4de516231"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a594f20e9b92d5415fa8e64f4de516231">AMRWBContext::pitch_gain</a></div><div class="ttdeci">float pitch_gain[6]</div><div class="ttdoc">quantified pitch gains for the current and previous five subframes</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00069">amrwbdec.c:69</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adb009f1d85ac852f5a0f6da3dd88ba56"><div class="ttname"><a href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a></div><div class="ttdeci">#define avpriv_request_sample(...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00039">tableprint_vlc.h:39</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a198bf14c68a2f0b237c24e7023099806"><div class="ttname"><a href="amrwbdec_8c.html#a198bf14c68a2f0b237c24e7023099806">decode_1p_track</a></div><div class="ttdeci">static void decode_1p_track(int *out, int code, int m, int off)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00376">amrwbdec.c:376</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_ae08bc4188cdebf1ef164f94a1b2e109f"><div class="ttname"><a href="amrwbdec_8c.html#ae08bc4188cdebf1ef164f94a1b2e109f">synthesis</a></div><div class="ttdeci">static void synthesis(AMRWBContext *ctx, float *lpc, float *excitation, float fixed_gain, const float *fixed_vector, float *samples)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00770">amrwbdec.c:770</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a364cf552ce6c95c364d679b1770a1723"><div class="ttname"><a href="amrwbdata_8h.html#a364cf552ce6c95c364d679b1770a1723">HB_FIR_SIZE</a></div><div class="ttdeci">#define HB_FIR_SIZE</div><div class="ttdoc">amount of past data needed by HB filters</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00035">amrwbdata.h:35</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911a3203b10a278b86996ddafd40a2ff745b"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a3203b10a278b86996ddafd40a2ff745b">MODE_18k25</a></div><div class="ttdeci">@ MODE_18k25</div><div class="ttdoc">18.25 kbit/s</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00057">amrwbdata.h:57</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a924792924cde559bce7760ef0db31429"><div class="ttname"><a href="amrwbdec_8c.html#a924792924cde559bce7760ef0db31429">amrwb_decode_init</a></div><div class="ttdeci">static av_cold int amrwb_decode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00096">amrwbdec.c:96</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a3488d1ce8f4c1a2f8c3a7b938baa009d"><div class="ttname"><a href="amrwbdata_8h.html#a3488d1ce8f4c1a2f8c3a7b938baa009d">dico1_isf</a></div><div class="ttdeci">static const int16_t dico1_isf[256][9]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00692">amrwbdata.h:692</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a9f840325a186f1907279f3fa65db1513"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a9f840325a186f1907279f3fa65db1513">AMRWBContext::prev_tr_gain</a></div><div class="ttdeci">float prev_tr_gain</div><div class="ttdoc">previous initial gain used by noise enhancer for threshold</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00076">amrwbdec.c:76</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a115152a5aaec76df9a7948a41031acdd"><div class="ttname"><a href="amrwbdec_8c.html#a115152a5aaec76df9a7948a41031acdd">decode_6p_track</a></div><div class="ttdeci">static void decode_6p_track(int *out, int code, int m, int off)</div><div class="ttdoc">code: 6m-2 bits</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00448">amrwbdec.c:448</a></div></div>
<div class="ttc" id="aacelp__vectors_8c_html_a481a48508d8e6261a38b187f78caaea7"><div class="ttname"><a href="acelp__vectors_8c.html#a481a48508d8e6261a38b187f78caaea7">ff_scale_vector_to_given_sum_of_squares</a></div><div class="ttdeci">void ff_scale_vector_to_given_sum_of_squares(float *out, const float *in, float sum_of_squares, const int n)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8c_source.html#l00224">acelp_vectors.c:224</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_af0598d28282a1b104c6fdae9381f78f7"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#af0598d28282a1b104c6fdae9381f78f7">AMRWBContext::demph_mem</a></div><div class="ttdeci">float demph_mem[1]</div><div class="ttdoc">previous value in the de-emphasis filter</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00083">amrwbdec.c:83</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac1e6c2cd1269caa7570575725c682a49"><div class="ttname"><a href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">AVCodecContext::channels</a></div><div class="ttdeci">int channels</div><div class="ttdoc">number of audio channels</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1187</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="aamrnbdec_8c_html_acaf1374d6ee289b87034543bec682af6"><div class="ttname"><a href="amrnbdec_8c.html#acaf1374d6ee289b87034543bec682af6">MIN_ENERGY</a></div><div class="ttdeci">#define MIN_ENERGY</div><div class="ttdef"><b>Definition:</b> <a href="amrnbdec_8c_source.html#l00084">amrnbdec.c:84</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a46c8a310cf4c094f8c80e1cb8dc1f911a559b6e58ffd0263d46009d01c1bcbbc5"><div class="ttname"><a href="amrwbdata_8h.html#a46c8a310cf4c094f8c80e1cb8dc1f911a559b6e58ffd0263d46009d01c1bcbbc5">MODE_14k25</a></div><div class="ttdeci">@ MODE_14k25</div><div class="ttdoc">14.25 kbit/s</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00055">amrwbdata.h:55</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_a52d169ebb736e2fad7c01cd683bbb55e"><div class="ttname"><a href="amrwbdata_8h.html#a52d169ebb736e2fad7c01cd683bbb55e">qua_gain_6b</a></div><div class="ttdeci">static const int16_t qua_gain_6b[64][2]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01663">amrwbdata.h:1663</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_a330f40925de787e7c0740b1d97c731f0"><div class="ttname"><a href="cuda__runtime_8h.html#a330f40925de787e7c0740b1d97c731f0">truncf</a></div><div class="ttdeci">static __device__ float truncf(float a)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00178">cuda_runtime.h:178</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a23bf45ebaec7797dad5a133371579605"><div class="ttname"><a href="amrwbdec_8c.html#a23bf45ebaec7797dad5a133371579605">upsample_5_4</a></div><div class="ttdeci">static void upsample_5_4(float *out, const float *in, int o_size, CELPMContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00828">amrwbdec.c:828</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_ae5319ac6f6b4184e1c4cd82a1db6ccbf"><div class="ttname"><a href="amrwbdata_8h.html#ae5319ac6f6b4184e1c4cd82a1db6ccbf">PRED_FACTOR</a></div><div class="ttdeci">#define PRED_FACTOR</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00040">amrwbdata.h:40</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_ae9ddb9300e6328292bee74721ba20968"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#ae9ddb9300e6328292bee74721ba20968">AMRWBContext::hpf_31_mem</a></div><div class="ttdeci">float hpf_31_mem[2]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00082">amrwbdec.c:82</a></div></div>
<div class="ttc" id="aamrwbdec_8c_html_a170baa2e50aaa1e8132de7f9ce6d3b24"><div class="ttname"><a href="amrwbdec_8c.html#a170baa2e50aaa1e8132de7f9ce6d3b24">decode_pitch_vector</a></div><div class="ttdeci">static void decode_pitch_vector(AMRWBContext *ctx, const AMRWBSubFrame *amr_subframe, const int subframe)</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00318">amrwbdec.c:318</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_FLT</div><div class="ttdoc">float</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00063">samplefmt.h:63</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aeb08c575a79eb84fc4155dda88f46c06"><div class="ttname"><a href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">AVCodecContext::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01237">avcodec.h:1237</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_aa0952febbdf4541c183bdbb59f462662"><div class="ttname"><a href="amrwbdata_8h.html#aa0952febbdf4541c183bdbb59f462662">hpf_400_poles</a></div><div class="ttdeci">static const float hpf_400_poles[2]</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l01817">amrwbdata.h:1817</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8ff0b000c463361e234af48d03aadfc0"><div class="ttname"><a href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">AVCodecContext::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdoc">samples per second</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01186">avcodec.h:1186</a></div></div>
<div class="ttc" id="alsp_8c_html_a2026a93891f9e1e5c6a3d8bb514f4a9b"><div class="ttname"><a href="lsp_8c.html#a2026a93891f9e1e5c6a3d8bb514f4a9b">ff_set_min_dist_lsf</a></div><div class="ttdeci">void ff_set_min_dist_lsf(float *lsf, double min_spacing, int size)</div><div class="ttdef"><b>Definition:</b> <a href="lsp_8c_source.html#l00051">lsp.c:51</a></div></div>
<div class="ttc" id="aamrwbdata_8h_html_abb54df10fdb5eb52303fad3ab37074f3"><div class="ttname"><a href="amrwbdata_8h.html#abb54df10fdb5eb52303fad3ab37074f3">PREEMPH_FAC</a></div><div class="ttdeci">#define PREEMPH_FAC</div><div class="ttdoc">factor used to de-emphasize synthesis</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdata_8h_source.html#l00043">amrwbdata.h:43</a></div></div>
<div class="ttc" id="astruct_a_m_r_w_b_context_html_a0006d38e57794aa6814a2edddbf02ad0"><div class="ttname"><a href="struct_a_m_r_w_b_context.html#a0006d38e57794aa6814a2edddbf02ad0">AMRWBContext::celpm_ctx</a></div><div class="ttdeci">CELPMContext celpm_ctx</div><div class="ttdoc">context for fixed point math operations</div><div class="ttdef"><b>Definition:</b> <a href="amrwbdec_8c_source.html#l00092">amrwbdec.c:92</a></div></div>
<div class="ttc" id="aacelp__pitch__delay_8h_html"><div class="ttname"><a href="acelp__pitch__delay_8h.html">acelp_pitch_delay.h</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
