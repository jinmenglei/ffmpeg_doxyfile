<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavfilter/vf_removelogo.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_e1bd69597e95623f2084619f16269321.html">libavfilter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">vf_removelogo.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="vf__removelogo_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2005 Robert Edele &lt;yartrebo@earthlink.net&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2012 Stefano Sabatini</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avfilter_8h.html">avfilter.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="formats_8h.html">formats.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="video_8h.html">video.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bbox_8h.html">bbox.h</a>&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lavfutils_8h.html">lavfutils.h</a>&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lswsutils_8h.html">lswsutils.h</a>&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html">   82</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_removelogo_context.html">RemovelogoContext</a> {</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html#a4fd10f21d99caa7a73ab5b3b788a19a9">   83</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> *<span class="keyword">class</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html#a44a6d39e356c139e988cbaf77eb9fc60">   84</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="struct_removelogo_context.html#a44a6d39e356c139e988cbaf77eb9fc60">filename</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">/* Stores our collection of masks. The first is for an array of</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">       the second for the y axis, and the third for the x axis. */</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html#aa78f911d80baecff1f2e827db46e9fb4">   87</a></span>&#160;    <span class="keywordtype">int</span> ***<a class="code" href="struct_removelogo_context.html#aa78f911d80baecff1f2e827db46e9fb4">mask</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html#ab74db9c36ee396792a8003d35d1d6bbc">   88</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_removelogo_context.html#ab74db9c36ee396792a8003d35d1d6bbc">max_mask_size</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html#a4bc1536ab10636406fdec8443c34f460">   89</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_removelogo_context.html#a4bc1536ab10636406fdec8443c34f460">mask_w</a>, <a class="code" href="struct_removelogo_context.html#a476c147bbc757fe4c9edf7ac6584e58f">mask_h</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html#a37f0f811f59b9c708878bbd409cd8acb">   91</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>      *<a class="code" href="struct_removelogo_context.html#a37f0f811f59b9c708878bbd409cd8acb">full_mask_data</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html#a817aac0459d07e51d51bdea91ea306f4">   92</a></span>&#160;    <a class="code" href="struct_f_f_bounding_box.html">FFBoundingBox</a> <a class="code" href="struct_removelogo_context.html#a817aac0459d07e51d51bdea91ea306f4">full_mask_bbox</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html#a60c2e869704389dcd869b16dd32fd305">   93</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>      *<a class="code" href="struct_removelogo_context.html#a60c2e869704389dcd869b16dd32fd305">half_mask_data</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="struct_removelogo_context.html#af8a4a8b35a72f1424cb0603364e71213">   94</a></span>&#160;    <a class="code" href="struct_f_f_bounding_box.html">FFBoundingBox</a> <a class="code" href="struct_removelogo_context.html#af8a4a8b35a72f1424cb0603364e71213">half_mask_bbox</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#afdfc3e0ec4df00de41f46495ed578375">   95</a></span>&#160;} <a class="code" href="vf__removelogo_8c.html#afdfc3e0ec4df00de41f46495ed578375">RemovelogoContext</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#ad12dce0a7bf9d908b172a28155b3d261">   97</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(RemovelogoContext, x)</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">   98</a></span>&#160;<span class="preprocessor">#define FLAGS AV_OPT_FLAG_FILTERING_PARAM|AV_OPT_FLAG_VIDEO_PARAM</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a94aa8f40dba6b5cf974cdb7245c9480d">   99</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="vf__removelogo_8c.html#a94aa8f40dba6b5cf974cdb7245c9480d">removelogo_options</a>[] = {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    { <span class="stringliteral">&quot;filename&quot;</span>, <span class="stringliteral">&quot;set bitmap filename&quot;</span>, <a class="code" href="vf__removelogo_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(filename), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a>, {.str=<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>}, .flags = <a class="code" href="vf__removelogo_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    { <span class="stringliteral">&quot;f&quot;</span>,        <span class="stringliteral">&quot;set bitmap filename&quot;</span>, <a class="code" href="vf__removelogo_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(filename), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a>, {.str=<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>}, .flags = <a class="code" href="vf__removelogo_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;};</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a398e248c8122f3ec50aa79ae02439e36">  105</a></span>&#160;<a class="code" href="vf__removelogo_8c.html#a398e248c8122f3ec50aa79ae02439e36">AVFILTER_DEFINE_CLASS</a>(removelogo);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#ab7d1882e24f466b2b1ec354473b0e15f">  117</a></span>&#160;<span class="preprocessor">#define apply_mask_fudge_factor(x) (((x) &gt;&gt; 2) + (x))</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a8ec46bc3f41fb28da80689ca58099d4f">  133</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__removelogo_8c.html#a8ec46bc3f41fb28da80689ca58099d4f">convert_mask_to_strength_mask</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">int</span> linesize,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                          <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <span class="keywordtype">int</span> min_val,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                          <span class="keywordtype">int</span> *max_mask_size)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">/* How many times we&#39;ve gone through the loop. Used in the</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">       in-place erosion algorithm and to get us max_mask_size later on. */</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">int</span> current_pass = 0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">/* set all non-zero values to 1 */</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>; y++)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>; x++)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[y*linesize + x] = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[y*linesize + x] &gt; min_val;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">/* For each pass, if a pixel is itself the same value as the</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">       current pass, and its four neighbors are too, then it is</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">       incremented. If no pixels are incremented by the end of the</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">       pass, then we go again. Edge pixels are counted as always</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">       excluded (this should be true anyway for any sane mask, but if</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">       it isn&#39;t this will ensure that we eventually exit). */</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment">/* If this doesn&#39;t get set by the end of this pass, then we&#39;re done. */</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordtype">int</span> has_anything_changed = 0;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *current_pixel0 = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> + 1 + linesize, *current_pixel;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        current_pass++;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">for</span> (y = 1; y &lt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-1; y++) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            current_pixel = current_pixel0;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordflow">for</span> (x = 1; x &lt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>-1; x++) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="comment">/* Apply the in-place erosion transform. It is based</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">                   on the following two premises:</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">                   1 - Any pixel that fails 1 erosion will fail all</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">                       future erosions.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">                   2 - Only pixels having survived all erosions up to</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">                       the present will be &gt;= to current_pass.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">                   It doesn&#39;t matter if it survived the current pass,</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">                   failed it, or hasn&#39;t been tested yet.  By using &gt;=</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">                   instead of ==, we allow the algorithm to work in</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">                   place. */</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <span class="keywordflow">if</span> ( *current_pixel      &gt;= current_pass &amp;&amp;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                    *(current_pixel + 1) &gt;= current_pass &amp;&amp;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                    *(current_pixel - 1) &gt;= current_pass &amp;&amp;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                    *(current_pixel + linesize) &gt;= current_pass &amp;&amp;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                    *(current_pixel - linesize) &gt;= current_pass) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    <span class="comment">/* Increment the value since it still has not been</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">                     * eroded, as evidenced by the if statement that</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">                     * just evaluated to true. */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    (*current_pixel)++;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    has_anything_changed = 1;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                current_pixel++;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            current_pixel0 += linesize;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> (!has_anything_changed)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">/* Apply the fudge factor, which will increase the size of the</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">     * mask a little to reduce jitter at the cost of more blur. */</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">for</span> (y = 1; y &lt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> - 1; y++)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">for</span> (x = 1; x &lt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> - 1; x++)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[(y * linesize) + x] = <a class="code" href="vf__removelogo_8c.html#ab7d1882e24f466b2b1ec354473b0e15f">apply_mask_fudge_factor</a>(<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[(y * linesize) + x]);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">/* As a side-effect, we now know the maximum mask size, which</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">     * we&#39;ll use to generate our masks. */</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">/* Apply the fudge factor to this number too, since we must ensure</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">     * that enough masks are generated. */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    *max_mask_size = <a class="code" href="vf__removelogo_8c.html#ab7d1882e24f466b2b1ec354473b0e15f">apply_mask_fudge_factor</a>(current_pass + 1);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">  206</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vf__removelogo_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>[] = { <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a> };</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="struct_a_v_filter_formats.html">AVFilterFormats</a> *fmts_list = <a class="code" href="formats_8c.html#a43e709e9689273a94a5edc40d1cb5aed">ff_make_format_list</a>(<a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> (!fmts_list)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="formats_8c.html#a3ea436a8d465066eecdfb2ff513ff504">ff_set_common_formats</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, fmts_list);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a8e0c33333b062c292c246ae7a3385840">  215</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vf__removelogo_8c.html#a8e0c33333b062c292c246ae7a3385840">load_mask</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>, <span class="keywordtype">int</span> *<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">void</span> *log_ctx)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *src_data[4], *gray_data[4];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">int</span> src_linesize[4], gray_linesize[4];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">/* load image from file */</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="lavfutils_8c.html#a3dbee75137ecb978711b412c494589c4">ff_load_image</a>(src_data, src_linesize, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, &amp;<a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a>, filename, log_ctx)) &lt; 0)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">/* convert the image to GRAY8 */</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="lswsutils_8c.html#a62b2e0b856f53f3f6983db778c29ea3d">ff_scale_image</a>(gray_data, gray_linesize, *<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a4616a6eaaf5419e2aa7dcb03031d500e">AV_PIX_FMT_GRAY8</a>,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                              src_data, src_linesize, *<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a>,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                              log_ctx)) &lt; 0)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">/* copy mask to a newly allocated array */</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    *<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(*<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> * *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (!*<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="group__lavu__picture.html#ga735cb949320867e9c2fffcb327d0ece2">av_image_copy_plane</a>(*<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>, *<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, gray_data[0], gray_linesize[0], *<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>:</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;src_data[0]);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;gray_data[0]);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a487829aa6698feb1511e85e3a44b7276">  256</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__removelogo_8c.html#a487829aa6698feb1511e85e3a44b7276">generate_half_size_image</a>(<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *src_data, <span class="keywordtype">int</span> src_linesize,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                     <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_data, <span class="keywordtype">int</span> dst_linesize,</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                                     <span class="keywordtype">int</span> src_w, <span class="keywordtype">int</span> src_h,</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                     <span class="keywordtype">int</span> *max_mask_size)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">/* Copy over the image data, using the average of 4 pixels for to</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">     * calculate each downsampled pixel. */</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; src_h/2; y++) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; src_w/2; x++) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment">/* Set the pixel if there exists a non-zero value in the</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">             * source pixels, else clear it. */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            dst_data[(y * dst_linesize) + x] =</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                src_data[((y &lt;&lt; 1) * src_linesize) + (x &lt;&lt; 1)] ||</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                src_data[((y &lt;&lt; 1) * src_linesize) + (x &lt;&lt; 1) + 1] ||</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                src_data[(((y &lt;&lt; 1) + 1) * src_linesize) + (x &lt;&lt; 1)] ||</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                src_data[(((y &lt;&lt; 1) + 1) * src_linesize) + (x &lt;&lt; 1) + 1];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            dst_data[(y * dst_linesize) + x] = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(1, dst_data[(y * dst_linesize) + x]);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="vf__removelogo_8c.html#a8ec46bc3f41fb28da80689ca58099d4f">convert_mask_to_strength_mask</a>(dst_data, dst_linesize,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                  src_w/2, src_h/2, 0, max_mask_size);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#ab7cd5b404747a481115ce1d090fd11b8">  282</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="vf__removelogo_8c.html#ab7cd5b404747a481115ce1d090fd11b8">init</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="struct_removelogo_context.html">RemovelogoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">int</span> ***<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">int</span> full_max_mask_size, half_max_mask_size;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filename) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;The bitmap file name is mandatory\n&quot;</span>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">/* Load our mask image. */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="vf__removelogo_8c.html#a8e0c33333b062c292c246ae7a3385840">load_mask</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;full_mask_data, &amp;<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, &amp;<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filename, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)) &lt; 0)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask_w = <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask_h = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="vf__removelogo_8c.html#a8ec46bc3f41fb28da80689ca58099d4f">convert_mask_to_strength_mask</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;full_mask_data, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>,</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                  16, &amp;full_max_mask_size);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">/* Create the scaled down mask image for the chroma planes. */</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;half_mask_data = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>/2 * <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>/2)))</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="vf__removelogo_8c.html#a487829aa6698feb1511e85e3a44b7276">generate_half_size_image</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;full_mask_data, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>,</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;half_mask_data, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>/2,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                             <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, &amp;half_max_mask_size);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_mask_size = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(full_max_mask_size, half_max_mask_size);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">/* Create a circular mask for each size up to max_mask_size. When</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">       the filter is applied, the mask size is determined on a pixel</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">       by pixel basis, with pixels nearer the edge of the logo getting</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">       smaller mask sizes. */</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a> = (<span class="keywordtype">int</span> ***)<a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_mask_size + 1, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span> **));</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = 0; <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> &lt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_mask_size; <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>++) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>] = (<span class="keywordtype">int</span> **)<a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>((<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> * 2) + 1, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span> *));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>]) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = -<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &lt;= <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>++) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>][<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> + <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>] = (<span class="keywordtype">int</span> *)<a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>((<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> * 2) + 1, <span class="keyword">sizeof</span>(<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>));</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>][<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> + <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>]) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = -<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt;= <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> * <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>) + (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> * <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>) &lt;= (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> * <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>)) <span class="comment">/* Circular 0/1 mask. */</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                    <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>][<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> + <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>][<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> + <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>] = 1;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>][<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> + <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>][<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> + <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>] = 0;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask = <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">/* Calculate our bounding rectangles, which determine in what</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">     * region the logo resides for faster processing. */</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="bbox_8c.html#ad655542e7d5199bffe5d606249b5518d">ff_calculate_bounding_box</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;full_mask_bbox, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;full_mask_data, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, 0);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="bbox_8c.html#ad655542e7d5199bffe5d606249b5518d">ff_calculate_bounding_box</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;half_mask_bbox, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;half_mask_data, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>/2, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>/2, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>/2, 0);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">#define SHOW_LOGO_INFO(mask_type)                                       \</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor">    av_log(ctx, AV_LOG_VERBOSE, #mask_type &quot; x1:%d x2:%d y1:%d y2:%d max_mask_size:%d\n&quot;, \</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="preprocessor">           s-&gt;mask_type##_mask_bbox.x1, s-&gt;mask_type##_mask_bbox.x2, \</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">           s-&gt;mask_type##_mask_bbox.y1, s-&gt;mask_type##_mask_bbox.y2, \</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">           mask_type##_max_mask_size);</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="vf__removelogo_8c.html#aeafc4275c9846106c39e07729b6bd3cd">SHOW_LOGO_INFO</a>(full);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="vf__removelogo_8c.html#aeafc4275c9846106c39e07729b6bd3cd">SHOW_LOGO_INFO</a>(<a class="code" href="mobiclip_8c.html#a6ffd80ece34e6c24852a6d1c563cf25b">half</a>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#afe4a0f1afa95e519217447eb871d38a8">  359</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vf__removelogo_8c.html#afe4a0f1afa95e519217447eb871d38a8">config_props_input</a>(<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="struct_removelogo_context.html">RemovelogoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask_w || <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;h != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask_h) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>,</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;               <span class="stringliteral">&quot;Mask image size %dx%d does not match with the input video size %dx%d\n&quot;</span>,</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask_w, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask_h, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;h);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#ae58af1dd8ca852009ea5c1bfdb671d6e">  388</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="vf__removelogo_8c.html#ae58af1dd8ca852009ea5c1bfdb671d6e">blur_pixel</a>(<span class="keywordtype">int</span> ***<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                               <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *mask_data, <span class="keywordtype">int</span> mask_linesize,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                               <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>       *image_data, <span class="keywordtype">int</span> image_linesize,</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                               <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">/* Mask size tells how large a circle to use. The radius is about</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">     * (slightly larger than) mask size. */</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">int</span> mask_size;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordtype">int</span> start_posx, start_posy, end_posx, end_posy;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="phase__template_8c.html#af7c2d3e9c6f18d729a436fd17a90e0d3">accumulator</a> = 0, divisor = 0;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">/* What pixel we are reading out of the circular blur mask. */</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *image_read_position;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">/* What pixel we are reading out of the filter image. */</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *mask_read_position;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">/* Prepare our bounding rectangle and clip it if need be. */</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    mask_size  = mask_data[y * mask_linesize + x];</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    start_posx = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(0, x - mask_size);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    start_posy = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(0, y - mask_size);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    end_posx   = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> - 1, x + mask_size);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    end_posy   = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> - 1, y + mask_size);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    image_read_position = image_data + image_linesize * start_posy + start_posx;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    mask_read_position  = mask_data  + mask_linesize  * start_posy + start_posx;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">for</span> (j = start_posy; j &lt;= end_posy; j++) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = start_posx; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= end_posx; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="comment">/* Check if this pixel is in the mask or not. Only use the</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">             * pixel if it is not. */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">if</span> (!(*mask_read_position) &amp;&amp; <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>[mask_size][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - start_posx][j - start_posy]) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <a class="code" href="phase__template_8c.html#af7c2d3e9c6f18d729a436fd17a90e0d3">accumulator</a> += *image_read_position;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                divisor++;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            image_read_position++;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            mask_read_position++;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        image_read_position += (image_linesize - ((end_posx + 1) - start_posx));</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        mask_read_position  += (mask_linesize - ((end_posx + 1) - start_posx));</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">/* If divisor is 0, it means that not a single pixel is outside of</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">       the logo, so we have no data.  Else we need to normalise the</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">       data using the divisor. */</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span> divisor == 0 ? 255:</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        (<a class="code" href="phase__template_8c.html#af7c2d3e9c6f18d729a436fd17a90e0d3">accumulator</a> + (divisor / 2)) / divisor;  <span class="comment">/* divide, taking into account average rounding error */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a3618517fea30c6f8309141b365c3ce6a">  461</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__removelogo_8c.html#a3618517fea30c6f8309141b365c3ce6a">blur_image</a>(<span class="keywordtype">int</span> ***<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>,</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                       <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *src_data,  <span class="keywordtype">int</span> src_linesize,</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                             <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_data,  <span class="keywordtype">int</span> dst_linesize,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                       <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *mask_data, <span class="keywordtype">int</span> mask_linesize,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                       <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <span class="keywordtype">int</span> <a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a>,</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                       <a class="code" href="struct_f_f_bounding_box.html">FFBoundingBox</a> *bbox)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;{</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_line;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *src_line;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a>)</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="group__lavu__picture.html#ga735cb949320867e9c2fffcb327d0ece2">av_image_copy_plane</a>(dst_data, dst_linesize, src_data, src_linesize, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">for</span> (y = bbox-&gt;<a class="code" href="struct_f_f_bounding_box.html#a108c309ef3f2f7a864328d15c15fca80">y1</a>; y &lt;= bbox-&gt;y2; y++) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        src_line = src_data + src_linesize * y;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        dst_line = dst_data + dst_linesize * y;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">for</span> (x = bbox-&gt;<a class="code" href="struct_f_f_bounding_box.html#a2a08988aeb22d90c0d314ea43f857db0">x1</a>; x &lt;= bbox-&gt;x2; x++) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;             <span class="keywordflow">if</span> (mask_data[y * mask_linesize + x]) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <span class="comment">/* Only process if we are in the mask. */</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                 dst_line[x] = <a class="code" href="vf__removelogo_8c.html#ae58af1dd8ca852009ea5c1bfdb671d6e">blur_pixel</a>(<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>,</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                          mask_data, mask_linesize,</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                                          dst_data, dst_linesize,</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                          <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, x, y);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                <span class="comment">/* Else just copy the data. */</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a>)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                    dst_line[x] = src_line[x];</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a6488998983896e30d1b975c8d56dab48">  495</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vf__removelogo_8c.html#a6488998983896e30d1b975c8d56dab48">filter_frame</a>(<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *inpicref)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;{</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="struct_removelogo_context.html">RemovelogoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst-&gt;priv;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *outlink = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst-&gt;outputs[0];</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *outpicref;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a> = 0;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__frame.html#ga3ba755bada5c3c8883361ef43fb5fb7a">av_frame_is_writable</a>(inpicref)) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a> = 1;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        outpicref = inpicref;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        outpicref = <a class="code" href="video_8c.html#a7f0f699d7689ef551622672dcd39a96a">ff_get_video_buffer</a>(outlink, outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">w</a>, outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">h</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">if</span> (!outpicref) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;inpicref);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <a class="code" href="group__lavu__frame.html#gab9b275b114ace0db95c5796bc71f3012">av_frame_copy_props</a>(outpicref, inpicref);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="vf__removelogo_8c.html#a3618517fea30c6f8309141b365c3ce6a">blur_image</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;               inpicref -&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0], inpicref -&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0],</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;               outpicref-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0], outpicref-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0],</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;full_mask_data, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;               <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;h, <a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;full_mask_bbox);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="vf__removelogo_8c.html#a3618517fea30c6f8309141b365c3ce6a">blur_image</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;               inpicref -&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[1], inpicref -&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[1],</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;               outpicref-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[1], outpicref-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[1],</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;half_mask_data, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w/2,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;               <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w/2, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;h/2, <a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;half_mask_bbox);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="vf__removelogo_8c.html#a3618517fea30c6f8309141b365c3ce6a">blur_image</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;               inpicref -&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[2], inpicref -&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[2],</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;               outpicref-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[2], outpicref-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[2],</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;half_mask_data, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w/2,</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;               <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w/2, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;h/2, <a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;half_mask_bbox);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a>)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;inpicref);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="avfilter_8c.html#a65d6e9755eadf69367843dfc738143b4">ff_filter_frame</a>(outlink, outpicref);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#abbead6cde1da3e72ce200578c426f1e6">  536</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="vf__removelogo_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="struct_removelogo_context.html">RemovelogoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;full_mask_data);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;half_mask_data);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="comment">/* Loop through each mask. */</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = 0; <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> &lt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_mask_size; <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>++) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <span class="comment">/* Loop through each scanline in a mask. */</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = -<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &lt;= <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>++) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>][<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> + <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>]); <span class="comment">/* Free a scanline. */</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>]);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">/* Free the array of pointers pointing to the masks. */</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mask);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#abe50eff1de33968cf59d1fd3c2f31331">  558</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_filter_pad.html">AVFilterPad</a> <a class="code" href="vf__removelogo_8c.html#abe50eff1de33968cf59d1fd3c2f31331">removelogo_inputs</a>[] = {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        .<a class="code" href="struct_a_v_filter_pad.html#afc112061a6035639934e0135aab7d425">name</a>         = <span class="stringliteral">&quot;default&quot;</span>,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        .type         = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        .config_props = <a class="code" href="vf__removelogo_8c.html#afe4a0f1afa95e519217447eb871d38a8">config_props_input</a>,</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        .filter_frame = <a class="code" href="vf__removelogo_8c.html#a6488998983896e30d1b975c8d56dab48">filter_frame</a>,</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    },</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;};</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a53823a2202d4162a1939cd96600a12b1">  568</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_filter_pad.html">AVFilterPad</a> <a class="code" href="vf__removelogo_8c.html#a53823a2202d4162a1939cd96600a12b1">removelogo_outputs</a>[] = {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        .<a class="code" href="struct_a_v_filter_pad.html#afc112061a6035639934e0135aab7d425">name</a> = <span class="stringliteral">&quot;default&quot;</span>,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        .type = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    },</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;};</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="vf__removelogo_8c.html#a1bcaaeb74b5057798c9fba0bde19cc22">  576</a></span>&#160;<a class="code" href="struct_a_v_filter.html">AVFilter</a> <a class="code" href="vf__removelogo_8c.html#a1bcaaeb74b5057798c9fba0bde19cc22">ff_vf_removelogo</a> = {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    .<a class="code" href="struct_a_v_filter.html#a28a4776f344f91055f42a4c2a1b15c0c">name</a>          = <span class="stringliteral">&quot;removelogo&quot;</span>,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    .description   = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;Remove a TV logo based on a mask image.&quot;</span>),</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    .priv_size     = <span class="keyword">sizeof</span>(<a class="code" href="vf__removelogo_8c.html#afdfc3e0ec4df00de41f46495ed578375">RemovelogoContext</a>),</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    .<a class="code" href="vf__removelogo_8c.html#ab7cd5b404747a481115ce1d090fd11b8">init</a>          = <a class="code" href="vf__removelogo_8c.html#ab7cd5b404747a481115ce1d090fd11b8">init</a>,</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    .<a class="code" href="vf__removelogo_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a>        = <a class="code" href="vf__removelogo_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a>,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    .<a class="code" href="vf__removelogo_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a> = <a class="code" href="vf__removelogo_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a>,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    .<a class="code" href="filter__design_8txt.html#a45917ba5e6c8b798c6e2ba6ca7301a5d">inputs</a>        = <a class="code" href="vf__removelogo_8c.html#abe50eff1de33968cf59d1fd3c2f31331">removelogo_inputs</a>,</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    .<a class="code" href="af__acontrast_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a>       = <a class="code" href="vf__removelogo_8c.html#a53823a2202d4162a1939cd96600a12b1">removelogo_outputs</a>,</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    .priv_class    = &amp;removelogo_class,</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    .<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>         = <a class="code" href="group__lavfi.html#ga00c4b8da7d5d89fa4ddc5dcdf72bffca">AVFILTER_FLAG_SUPPORT_TIMELINE_GENERIC</a>,</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="avideo_8c_html_a7f0f699d7689ef551622672dcd39a96a"><div class="ttname"><a href="video_8c.html#a7f0f699d7689ef551622672dcd39a96a">ff_get_video_buffer</a></div><div class="ttdeci">AVFrame * ff_get_video_buffer(AVFilterLink *link, int w, int h)</div><div class="ttdef"><b>Definition:</b> <a href="video_8c_source.html#l00099">video.c:99</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a398e248c8122f3ec50aa79ae02439e36"><div class="ttname"><a href="vf__removelogo_8c.html#a398e248c8122f3ec50aa79ae02439e36">AVFILTER_DEFINE_CLASS</a></div><div class="ttdeci">AVFILTER_DEFINE_CLASS(removelogo)</div></div>
<div class="ttc" id="alibavfilter_2af__afir_8c_html_a2935ad4574b6b85a524d227a44e8f171"><div class="ttname"><a href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a></div><div class="ttdeci">static void direct(const float *in, const FFTComplex *ir, int len, float *out)</div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2af__afir_8c_source.html#l00060">af_afir.c:60</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="aformats_8c_html_a43e709e9689273a94a5edc40d1cb5aed"><div class="ttname"><a href="formats_8c.html#a43e709e9689273a94a5edc40d1cb5aed">ff_make_format_list</a></div><div class="ttdeci">AVFilterFormats * ff_make_format_list(const int *fmts)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00286">formats.c:286</a></div></div>
<div class="ttc" id="abbox_8h_html"><div class="ttname"><a href="bbox_8h.html">bbox.h</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html"><div class="ttname"><a href="struct_a_v_filter_link.html">AVFilterLink</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00471">avfilter.h:471</a></div></div>
<div class="ttc" id="astruct_f_f_bounding_box_html"><div class="ttname"><a href="struct_f_f_bounding_box.html">FFBoundingBox</a></div><div class="ttdef"><b>Definition:</b> <a href="bbox_8h_source.html#l00026">bbox.h:26</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html"><div class="ttname"><a href="struct_a_v_filter_context.html">AVFilterContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00341">avfilter.h:341</a></div></div>
<div class="ttc" id="aavfilter_8c_html_a65d6e9755eadf69367843dfc738143b4"><div class="ttname"><a href="avfilter_8c.html#a65d6e9755eadf69367843dfc738143b4">ff_filter_frame</a></div><div class="ttdeci">int ff_filter_frame(AVFilterLink *link, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8c_source.html#l01091">avfilter.c:1091</a></div></div>
<div class="ttc" id="amem_8c_html_a254f3455439c15a2c8a75b8f0235fdbd"><div class="ttname"><a href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a></div><div class="ttdeci">void * av_malloc_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00182">mem.c:182</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_afdfc3e0ec4df00de41f46495ed578375"><div class="ttname"><a href="vf__removelogo_8c.html#afdfc3e0ec4df00de41f46495ed578375">RemovelogoContext</a></div><div class="ttdeci">struct RemovelogoContext RemovelogoContext</div></div>
<div class="ttc" id="afilter__design_8txt_html_a720b17cc89203cfc793b5d7e17a6ca88"><div class="ttname"><a href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a></div><div class="ttdeci">The exact code depends on how similar the blocks are and how related they are to the and needs to apply these operations to the correct inlink or outlink if there are several Macros are available to factor that when no extra processing is inlink</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00212">filter_design.txt:212</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html_a60c2e869704389dcd869b16dd32fd305"><div class="ttname"><a href="struct_removelogo_context.html#a60c2e869704389dcd869b16dd32fd305">RemovelogoContext::half_mask_data</a></div><div class="ttdeci">uint8_t * half_mask_data</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00093">vf_removelogo.c:93</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a1bcaaeb74b5057798c9fba0bde19cc22"><div class="ttname"><a href="vf__removelogo_8c.html#a1bcaaeb74b5057798c9fba0bde19cc22">ff_vf_removelogo</a></div><div class="ttdeci">AVFilter ff_vf_removelogo</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00576">vf_removelogo.c:576</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_abe50eff1de33968cf59d1fd3c2f31331"><div class="ttname"><a href="vf__removelogo_8c.html#abe50eff1de33968cf59d1fd3c2f31331">removelogo_inputs</a></div><div class="ttdeci">static const AVFilterPad removelogo_inputs[]</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00558">vf_removelogo.c:558</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00092">avrndec.c:92</a></div></div>
<div class="ttc" id="allviddspenc_8c_html_aba9ed0487b0aa23eba534648df8384c0"><div class="ttname"><a href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a></div><div class="ttdeci">uint8_t w</div><div class="ttdef"><b>Definition:</b> <a href="llviddspenc_8c_source.html#l00038">llviddspenc.c:38</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="vf__removelogo_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00097">vf_removelogo.c:97</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a8ec46bc3f41fb28da80689ca58099d4f"><div class="ttname"><a href="vf__removelogo_8c.html#a8ec46bc3f41fb28da80689ca58099d4f">convert_mask_to_strength_mask</a></div><div class="ttdeci">static void convert_mask_to_strength_mask(uint8_t *data, int linesize, int w, int h, int min_val, int *max_mask_size)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00133">vf_removelogo.c:133</a></div></div>
<div class="ttc" id="ainput_8c_html_ad6cdb6a14abe3eab42eaaadc93409aec"><div class="ttname"><a href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a></div><div class="ttdeci">#define b</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00041">input.c:41</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="amobiclip_8c_html_a6ffd80ece34e6c24852a6d1c563cf25b"><div class="ttname"><a href="mobiclip_8c.html#a6ffd80ece34e6c24852a6d1c563cf25b">half</a></div><div class="ttdeci">static uint8_t half(int a, int b)</div><div class="ttdef"><b>Definition:</b> <a href="mobiclip_8c_source.html#l00592">mobiclip.c:592</a></div></div>
<div class="ttc" id="astruct_a_v_filter_pad_html"><div class="ttname"><a href="struct_a_v_filter_pad.html">AVFilterPad</a></div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2internal_8h_source.html#l00054">internal.h:54</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a6488998983896e30d1b975c8d56dab48"><div class="ttname"><a href="vf__removelogo_8c.html#a6488998983896e30d1b975c8d56dab48">filter_frame</a></div><div class="ttdeci">static int filter_frame(AVFilterLink *inlink, AVFrame *inpicref)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00495">vf_removelogo.c:495</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a1efd10db9d097b6d27054da46e06e133"><div class="ttname"><a href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">AVFilterLink::h</a></div><div class="ttdeci">int h</div><div class="ttdoc">agreed upon image height</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00482">avfilter.h:482</a></div></div>
<div class="ttc" id="avideo_8h_html"><div class="ttname"><a href="video_8h.html">video.h</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_afe4a0f1afa95e519217447eb871d38a8"><div class="ttname"><a href="vf__removelogo_8c.html#afe4a0f1afa95e519217447eb871d38a8">config_props_input</a></div><div class="ttdeci">static int config_props_input(AVFilterLink *inlink)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00359">vf_removelogo.c:359</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html_a476c147bbc757fe4c9edf7ac6584e58f"><div class="ttname"><a href="struct_removelogo_context.html#a476c147bbc757fe4c9edf7ac6584e58f">RemovelogoContext::mask_h</a></div><div class="ttdeci">int mask_h</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00089">vf_removelogo.c:89</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ga735cb949320867e9c2fffcb327d0ece2"><div class="ttname"><a href="group__lavu__picture.html#ga735cb949320867e9c2fffcb327d0ece2">av_image_copy_plane</a></div><div class="ttdeci">void av_image_copy_plane(uint8_t *dst, int dst_linesize, const uint8_t *src, int src_linesize, int bytewidth, int height)</div><div class="ttdef"><b>Definition:</b> <a href="imgutils_8c_source.html#l00373">imgutils.c:373</a></div></div>
<div class="ttc" id="aformats_8h_html"><div class="ttname"><a href="formats_8h.html">formats.h</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_ae58af1dd8ca852009ea5c1bfdb671d6e"><div class="ttname"><a href="vf__removelogo_8c.html#ae58af1dd8ca852009ea5c1bfdb671d6e">blur_pixel</a></div><div class="ttdeci">static unsigned int blur_pixel(int ***mask, const uint8_t *mask_data, int mask_linesize, uint8_t *image_data, int image_linesize, int w, int h, int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00388">vf_removelogo.c:388</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html_a817aac0459d07e51d51bdea91ea306f4"><div class="ttname"><a href="struct_removelogo_context.html#a817aac0459d07e51d51bdea91ea306f4">RemovelogoContext::full_mask_bbox</a></div><div class="ttdeci">FFBoundingBox full_mask_bbox</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00092">vf_removelogo.c:92</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="aformats_8c_html_a3ea436a8d465066eecdfb2ff513ff504"><div class="ttname"><a href="formats_8c.html#a3ea436a8d465066eecdfb2ff513ff504">ff_set_common_formats</a></div><div class="ttdeci">int ff_set_common_formats(AVFilterContext *ctx, AVFilterFormats *formats)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00587">formats.c:587</a></div></div>
<div class="ttc" id="alzw_8c_html_a450ea4ae52aeb4ca6e2fabf02c695153"><div class="ttname"><a href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a></div><div class="ttdeci">static const uint16_t mask[17]</div><div class="ttdef"><b>Definition:</b> <a href="lzw_8c_source.html#l00038">lzw.c:38</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="aaf__acontrast_8c_html_a7ddb0b5ac76101c5bee71e9840bf1698"><div class="ttname"><a href="af__acontrast_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a></div><div class="ttdeci">static const AVFilterPad outputs[]</div><div class="ttdef"><b>Definition:</b> <a href="af__acontrast_8c_source.html#l00203">af_acontrast.c:203</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_aa1219ee396a270ba57fd4f2306b64c6e"><div class="ttname"><a href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00162">libkvazaar.c:300</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a7331e302ea7bb48e0b605a069576e135"><div class="ttname"><a href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00039">demuxing_decoding.c:40</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a94aa8f40dba6b5cf974cdb7245c9480d"><div class="ttname"><a href="vf__removelogo_8c.html#a94aa8f40dba6b5cf974cdb7245c9480d">removelogo_options</a></div><div class="ttdeci">static const AVOption removelogo_options[]</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00099">vf_removelogo.c:99</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV420P</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, (1 Cr &amp; Cb sample per 2x2 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00066">pixfmt.h:66</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html_af8a4a8b35a72f1424cb0603364e71213"><div class="ttname"><a href="struct_removelogo_context.html#af8a4a8b35a72f1424cb0603364e71213">RemovelogoContext::half_mask_bbox</a></div><div class="ttdeci">FFBoundingBox half_mask_bbox</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00094">vf_removelogo.c:94</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gab9b275b114ace0db95c5796bc71f3012"><div class="ttname"><a href="group__lavu__frame.html#gab9b275b114ace0db95c5796bc71f3012">av_frame_copy_props</a></div><div class="ttdeci">int av_frame_copy_props(AVFrame *dst, const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00658">frame.c:658</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_ab7d1882e24f466b2b1ec354473b0e15f"><div class="ttname"><a href="vf__removelogo_8c.html#ab7d1882e24f466b2b1ec354473b0e15f">apply_mask_fudge_factor</a></div><div class="ttdeci">#define apply_mask_fudge_factor(x)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00117">vf_removelogo.c:117</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html_aa78f911d80baecff1f2e827db46e9fb4"><div class="ttname"><a href="struct_removelogo_context.html#aa78f911d80baecff1f2e827db46e9fb4">RemovelogoContext::mask</a></div><div class="ttdeci">int *** mask</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00087">vf_removelogo.c:87</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a45917ba5e6c8b798c6e2ba6ca7301a5d"><div class="ttname"><a href="filter__design_8txt.html#a45917ba5e6c8b798c6e2ba6ca7301a5d">inputs</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several inputs</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00243">filter_design.txt:243</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html_a4bc1536ab10636406fdec8443c34f460"><div class="ttname"><a href="struct_removelogo_context.html#a4bc1536ab10636406fdec8443c34f460">RemovelogoContext::mask_w</a></div><div class="ttdeci">int mask_w</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00089">vf_removelogo.c:89</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a4616a6eaaf5419e2aa7dcb03031d500e"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a4616a6eaaf5419e2aa7dcb03031d500e">AV_PIX_FMT_GRAY8</a></div><div class="ttdeci">@ AV_PIX_FMT_GRAY8</div><div class="ttdoc">Y , 8bpp.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00074">pixfmt.h:74</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="aphase__template_8c_html_af7c2d3e9c6f18d729a436fd17a90e0d3"><div class="ttname"><a href="phase__template_8c.html#af7c2d3e9c6f18d729a436fd17a90e0d3">accumulator</a></div><div class="ttdeci">#define accumulator</div><div class="ttdef"><b>Definition:</b> <a href="phase__template_8c_source.html#l00034">phase_template.c:34</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="astruct_a_v_filter_pad_html_afc112061a6035639934e0135aab7d425"><div class="ttname"><a href="struct_a_v_filter_pad.html#afc112061a6035639934e0135aab7d425">AVFilterPad::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2internal_8h_source.html#l00060">internal.h:60</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a5b4e302dfe4b2ee5369f0278621acd5f"><div class="ttname"><a href="vf__removelogo_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a></div><div class="ttdeci">static int query_formats(AVFilterContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00206">vf_removelogo.c:206</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_aeafc4275c9846106c39e07729b6bd3cd"><div class="ttname"><a href="vf__removelogo_8c.html#aeafc4275c9846106c39e07729b6bd3cd">SHOW_LOGO_INFO</a></div><div class="ttdeci">#define SHOW_LOGO_INFO(mask_type)</div></div>
<div class="ttc" id="avf__removelogo_8c_html_a3618517fea30c6f8309141b365c3ce6a"><div class="ttname"><a href="vf__removelogo_8c.html#a3618517fea30c6f8309141b365c3ce6a">blur_image</a></div><div class="ttdeci">static void blur_image(int ***mask, const uint8_t *src_data, int src_linesize, uint8_t *dst_data, int dst_linesize, const uint8_t *mask_data, int mask_linesize, int w, int h, int direct, FFBoundingBox *bbox)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00461">vf_removelogo.c:461</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga3ba755bada5c3c8883361ef43fb5fb7a"><div class="ttname"><a href="group__lavu__frame.html#ga3ba755bada5c3c8883361ef43fb5fb7a">av_frame_is_writable</a></div><div class="ttdeci">int av_frame_is_writable(AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00594">frame.c:594</a></div></div>
<div class="ttc" id="alavfutils_8c_html_a3dbee75137ecb978711b412c494589c4"><div class="ttname"><a href="lavfutils_8c.html#a3dbee75137ecb978711b412c494589c4">ff_load_image</a></div><div class="ttdeci">int ff_load_image(uint8_t *data[4], int linesize[4], int *w, int *h, enum AVPixelFormat *pix_fmt, const char *filename, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="lavfutils_8c_source.html#l00024">lavfutils.c:24</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="aundefined_8txt_html_ad99f336d4c117c453fef82993434eb4d"><div class="ttname"><a href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a></div><div class="ttdeci">The reader does not expect b to be semantically here and if the code is changed by maybe adding a a division or other the signedness will almost certainly be mistaken To avoid this confusion a new type was SUINT is the C unsigned type but it holds a signed int to use the same example SUINT a</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00041">undefined.txt:41</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aa52bfc6605f6a3059a0c3226cc0f6567"><div class="ttname"><a href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">AVFrame::linesize</a></div><div class="ttdeci">int linesize[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00339">frame.h:339</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="agroup__lavfi_html_ga00c4b8da7d5d89fa4ddc5dcdf72bffca"><div class="ttname"><a href="group__lavfi.html#ga00c4b8da7d5d89fa4ddc5dcdf72bffca">AVFILTER_FLAG_SUPPORT_TIMELINE_GENERIC</a></div><div class="ttdeci">#define AVFILTER_FLAG_SUPPORT_TIMELINE_GENERIC</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00126">avfilter.h:126</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html_a37f0f811f59b9c708878bbd409cd8acb"><div class="ttname"><a href="struct_removelogo_context.html#a37f0f811f59b9c708878bbd409cd8acb">RemovelogoContext::full_mask_data</a></div><div class="ttdeci">uint8_t * full_mask_data</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00091">vf_removelogo.c:91</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_abbead6cde1da3e72ce200578c426f1e6"><div class="ttname"><a href="vf__removelogo_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a></div><div class="ttdeci">static av_cold void uninit(AVFilterContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00536">vf_removelogo.c:536</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="astruct_a_v_filter_formats_html"><div class="ttname"><a href="struct_a_v_filter_formats.html">AVFilterFormats</a></div><div class="ttdef"><b>Definition:</b> <a href="formats_8h_source.html#l00065">formats.h:65</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html_ab74db9c36ee396792a8003d35d1d6bbc"><div class="ttname"><a href="struct_removelogo_context.html#ab74db9c36ee396792a8003d35d1d6bbc">RemovelogoContext::max_mask_size</a></div><div class="ttdeci">int max_mask_size</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00088">vf_removelogo.c:88</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html_a44a6d39e356c139e988cbaf77eb9fc60"><div class="ttname"><a href="struct_removelogo_context.html#a44a6d39e356c139e988cbaf77eb9fc60">RemovelogoContext::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00084">vf_removelogo.c:84</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1d0f65014a8d1bf78cec8cbed2304992"><div class="ttname"><a href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">AVFrame::data</a></div><div class="ttdeci">uint8_t * data[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00322">frame.h:322</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a487829aa6698feb1511e85e3a44b7276"><div class="ttname"><a href="vf__removelogo_8c.html#a487829aa6698feb1511e85e3a44b7276">generate_half_size_image</a></div><div class="ttdeci">static void generate_half_size_image(const uint8_t *src_data, int src_linesize, uint8_t *dst_data, int dst_linesize, int src_w, int src_h, int *max_mask_size)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00256">vf_removelogo.c:256</a></div></div>
<div class="ttc" id="astruct_removelogo_context_html"><div class="ttname"><a href="struct_removelogo_context.html">RemovelogoContext</a></div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00082">vf_removelogo.c:82</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="aavfilter_8h_html"><div class="ttname"><a href="avfilter_8h.html">avfilter.h</a></div></div>
<div class="ttc" id="alavfutils_8h_html"><div class="ttname"><a href="lavfutils_8h.html">lavfutils.h</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_ab7cd5b404747a481115ce1d090fd11b8"><div class="ttname"><a href="vf__removelogo_8c.html#ab7cd5b404747a481115ce1d090fd11b8">init</a></div><div class="ttdeci">static av_cold int init(AVFilterContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00282">vf_removelogo.c:282</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="astruct_a_v_filter_html"><div class="ttname"><a href="struct_a_v_filter.html">AVFilter</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00145">avfilter.h:145</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a079eab092887563f2bef9106c6120089"><div class="ttname"><a href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a></div><div class="ttdeci">#define av_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00034">tableprint_vlc.h:34</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a53823a2202d4162a1939cd96600a12b1"><div class="ttname"><a href="vf__removelogo_8c.html#a53823a2202d4162a1939cd96600a12b1">removelogo_outputs</a></div><div class="ttdeci">static const AVFilterPad removelogo_outputs[]</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00568">vf_removelogo.c:568</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="aimgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a8e0c33333b062c292c246ae7a3385840"><div class="ttname"><a href="vf__removelogo_8c.html#a8e0c33333b062c292c246ae7a3385840">load_mask</a></div><div class="ttdeci">static int load_mask(uint8_t **mask, int *w, int *h, const char *filename, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00215">vf_removelogo.c:215</a></div></div>
<div class="ttc" id="avf__removelogo_8c_html_a6ccad09b4a2a06ae178418fdccf5940d"><div class="ttname"><a href="vf__removelogo_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a></div><div class="ttdeci">#define FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="vf__removelogo_8c_source.html#l00098">vf_removelogo.c:98</a></div></div>
<div class="ttc" id="avp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="astruct_a_v_filter_html_a28a4776f344f91055f42a4c2a1b15c0c"><div class="ttname"><a href="struct_a_v_filter.html#a28a4776f344f91055f42a4c2a1b15c0c">AVFilter::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00149">avfilter.h:149</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a></div><div class="ttdeci">@ AV_OPT_TYPE_STRING</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00229">opt.h:229</a></div></div>
<div class="ttc" id="astruct_f_f_bounding_box_html_a108c309ef3f2f7a864328d15c15fca80"><div class="ttname"><a href="struct_f_f_bounding_box.html#a108c309ef3f2f7a864328d15c15fca80">FFBoundingBox::y1</a></div><div class="ttdeci">int y1</div><div class="ttdef"><b>Definition:</b> <a href="bbox_8h_source.html#l00027">bbox.h:27</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="alswsutils_8c_html_a62b2e0b856f53f3f6983db778c29ea3d"><div class="ttname"><a href="lswsutils_8c.html#a62b2e0b856f53f3f6983db778c29ea3d">ff_scale_image</a></div><div class="ttdeci">int ff_scale_image(uint8_t *dst_data[4], int dst_linesize[4], int dst_w, int dst_h, enum AVPixelFormat dst_pix_fmt, uint8_t *const src_data[4], int src_linesize[4], int src_w, int src_h, enum AVPixelFormat src_pix_fmt, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="lswsutils_8c_source.html#l00022">lswsutils.c:22</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a08e3e25929bb29d5f6ef768343ff7f57"><div class="ttname"><a href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">AVFilterLink::w</a></div><div class="ttdeci">int w</div><div class="ttdoc">agreed upon image width</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00481">avfilter.h:481</a></div></div>
<div class="ttc" id="alswsutils_8h_html"><div class="ttname"><a href="lswsutils_8h.html">lswsutils.h</a></div></div>
<div class="ttc" id="abbox_8c_html_ad655542e7d5199bffe5d606249b5518d"><div class="ttname"><a href="bbox_8c.html#ad655542e7d5199bffe5d606249b5518d">ff_calculate_bounding_box</a></div><div class="ttdeci">int ff_calculate_bounding_box(FFBoundingBox *bbox, const uint8_t *data, int linesize, int w, int h, int min_val)</div><div class="ttdef"><b>Definition:</b> <a href="bbox_8c_source.html#l00023">bbox.c:23</a></div></div>
<div class="ttc" id="astruct_f_f_bounding_box_html_a2a08988aeb22d90c0d314ea43f857db0"><div class="ttname"><a href="struct_f_f_bounding_box.html#a2a08988aeb22d90c0d314ea43f857db0">FFBoundingBox::x1</a></div><div class="ttdeci">int x1</div><div class="ttdef"><b>Definition:</b> <a href="bbox_8h_source.html#l00027">bbox.h:27</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
