<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/vp9recon.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">vp9recon.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="vp9recon_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * VP9 compatible video decoder</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2013 Ronald S. Bultje &lt;rsbultje gmail com&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (C) 2013 Clément Bœsch &lt;u pkh me&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="videodsp_8h.html">videodsp.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vp9data_8h.html">vp9data.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vp9dec_8h.html">vp9dec.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#a83333287e38e08d97005202ab3b3aa6b">   32</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">int</span> <a class="code" href="vp9recon_8c.html#a83333287e38e08d97005202ab3b3aa6b">check_intra_mode</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                             <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_edge, ptrdiff_t stride_edge,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                                             <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_inner, ptrdiff_t stride_inner,</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                                             <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *l, <span class="keywordtype">int</span> col, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>,</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                                             <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> y, <span class="keyword">enum</span> <a class="code" href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedf">TxfmMode</a> tx,</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                             <span class="keywordtype">int</span> p, <span class="keywordtype">int</span> ss_h, <span class="keywordtype">int</span> ss_v, <span class="keywordtype">int</span> bytesperpixel)</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="struct_v_p9_context.html">VP9Context</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;s;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordtype">int</span> have_top = row &gt; 0 || y &gt; 0;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">int</span> have_left = col &gt; <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;tile_col_start || x &gt; 0;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordtype">int</span> have_right = x &lt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> - 1;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordtype">int</span> bpp = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.h.bpp;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> mode_conv[10][2 <span class="comment">/* have_left */</span>][2 <span class="comment">/* have_top */</span>] = {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca7ba9a3d80ed4c0514a825afd4cbf9d8e">VERT_PRED</a>]            = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca390ba2c40204f8889092e2f7b325a7ef">DC_127_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca7ba9a3d80ed4c0514a825afd4cbf9d8e">VERT_PRED</a>            },</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca390ba2c40204f8889092e2f7b325a7ef">DC_127_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca7ba9a3d80ed4c0514a825afd4cbf9d8e">VERT_PRED</a>            } },</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaca53c32a372459fc6c74a36f66e454a2">HOR_PRED</a>]             = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecae75e941928a27c27ec75b2fd502b3c48">DC_129_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecae75e941928a27c27ec75b2fd502b3c48">DC_129_PRED</a>          },</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaca53c32a372459fc6c74a36f66e454a2">HOR_PRED</a>,             <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaca53c32a372459fc6c74a36f66e454a2">HOR_PRED</a>             } },</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaee86abbe5868eaea023a934f0ce73882">DC_PRED</a>]              = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca771574e39134daab118369aabdcdf767">DC_128_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca0d7b795eb0f328fe31b2f4ff3441d70f">TOP_DC_PRED</a>          },</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca4ae520390cd1d2117e36c717b59c22b6">LEFT_DC_PRED</a>,         <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaee86abbe5868eaea023a934f0ce73882">DC_PRED</a>              } },</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca58d49f2441b6434f266f6927ce1c420b">DIAG_DOWN_LEFT_PRED</a>]  = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca390ba2c40204f8889092e2f7b325a7ef">DC_127_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca58d49f2441b6434f266f6927ce1c420b">DIAG_DOWN_LEFT_PRED</a>  },</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca390ba2c40204f8889092e2f7b325a7ef">DC_127_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca58d49f2441b6434f266f6927ce1c420b">DIAG_DOWN_LEFT_PRED</a>  } },</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca5f322cfece0841e1a553ba5f5ccfb3e4">DIAG_DOWN_RIGHT_PRED</a>] = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca5f322cfece0841e1a553ba5f5ccfb3e4">DIAG_DOWN_RIGHT_PRED</a>, <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca5f322cfece0841e1a553ba5f5ccfb3e4">DIAG_DOWN_RIGHT_PRED</a> },</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca5f322cfece0841e1a553ba5f5ccfb3e4">DIAG_DOWN_RIGHT_PRED</a>, <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca5f322cfece0841e1a553ba5f5ccfb3e4">DIAG_DOWN_RIGHT_PRED</a> } },</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca03a6514a01b1b71013465d825ff3dacf">VERT_RIGHT_PRED</a>]      = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca03a6514a01b1b71013465d825ff3dacf">VERT_RIGHT_PRED</a>,      <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca03a6514a01b1b71013465d825ff3dacf">VERT_RIGHT_PRED</a>      },</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca03a6514a01b1b71013465d825ff3dacf">VERT_RIGHT_PRED</a>,      <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca03a6514a01b1b71013465d825ff3dacf">VERT_RIGHT_PRED</a>      } },</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecabaf22a735ce5367d66dd63f905db8d3f">HOR_DOWN_PRED</a>]        = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecabaf22a735ce5367d66dd63f905db8d3f">HOR_DOWN_PRED</a>,        <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecabaf22a735ce5367d66dd63f905db8d3f">HOR_DOWN_PRED</a>        },</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecabaf22a735ce5367d66dd63f905db8d3f">HOR_DOWN_PRED</a>,        <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecabaf22a735ce5367d66dd63f905db8d3f">HOR_DOWN_PRED</a>        } },</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca13d0dce96d24944d45b7b8b37fa237e2">VERT_LEFT_PRED</a>]       = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca390ba2c40204f8889092e2f7b325a7ef">DC_127_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca13d0dce96d24944d45b7b8b37fa237e2">VERT_LEFT_PRED</a>       },</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca390ba2c40204f8889092e2f7b325a7ef">DC_127_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca13d0dce96d24944d45b7b8b37fa237e2">VERT_LEFT_PRED</a>       } },</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca2ef6e147229d049339a3b6d80c3d72b9">HOR_UP_PRED</a>]          = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecae75e941928a27c27ec75b2fd502b3c48">DC_129_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecae75e941928a27c27ec75b2fd502b3c48">DC_129_PRED</a>          },</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca2ef6e147229d049339a3b6d80c3d72b9">HOR_UP_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca2ef6e147229d049339a3b6d80c3d72b9">HOR_UP_PRED</a>          } },</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca3dfc65d3345dc7b54337aa05885ebbbc">TM_VP8_PRED</a>]          = { { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecae75e941928a27c27ec75b2fd502b3c48">DC_129_PRED</a>,          <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca7ba9a3d80ed4c0514a825afd4cbf9d8e">VERT_PRED</a>            },</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                   { <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaca53c32a372459fc6c74a36f66e454a2">HOR_PRED</a>,             <a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca3dfc65d3345dc7b54337aa05885ebbbc">TM_VP8_PRED</a>          } },</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    };</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> needs_left:1;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> needs_top:1;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> needs_topleft:1;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> needs_topright:1;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> invert_left:1;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    } edges[<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca8b91f5065f538c7511d7f6c6b63b6b51">N_INTRA_PRED_MODES</a>] = {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca7ba9a3d80ed4c0514a825afd4cbf9d8e">VERT_PRED</a>]            = { .needs_top  = 1 },</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaca53c32a372459fc6c74a36f66e454a2">HOR_PRED</a>]             = { .needs_left = 1 },</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaee86abbe5868eaea023a934f0ce73882">DC_PRED</a>]              = { .needs_top  = 1, .needs_left = 1 },</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca58d49f2441b6434f266f6927ce1c420b">DIAG_DOWN_LEFT_PRED</a>]  = { .needs_top  = 1, .needs_topright = 1 },</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca5f322cfece0841e1a553ba5f5ccfb3e4">DIAG_DOWN_RIGHT_PRED</a>] = { .needs_left = 1, .needs_top = 1,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                   .needs_topleft = 1 },</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca03a6514a01b1b71013465d825ff3dacf">VERT_RIGHT_PRED</a>]      = { .needs_left = 1, .needs_top = 1,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                   .needs_topleft = 1 },</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecabaf22a735ce5367d66dd63f905db8d3f">HOR_DOWN_PRED</a>]        = { .needs_left = 1, .needs_top = 1,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                                   .needs_topleft = 1 },</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca13d0dce96d24944d45b7b8b37fa237e2">VERT_LEFT_PRED</a>]       = { .needs_top  = 1, .needs_topright = 1 },</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca2ef6e147229d049339a3b6d80c3d72b9">HOR_UP_PRED</a>]          = { .needs_left = 1, .invert_left = 1 },</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca3dfc65d3345dc7b54337aa05885ebbbc">TM_VP8_PRED</a>]          = { .needs_left = 1, .needs_top = 1,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                   .needs_topleft = 1 },</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca4ae520390cd1d2117e36c717b59c22b6">LEFT_DC_PRED</a>]         = { .needs_left = 1 },</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca0d7b795eb0f328fe31b2f4ff3441d70f">TOP_DC_PRED</a>]          = { .needs_top  = 1 },</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca771574e39134daab118369aabdcdf767">DC_128_PRED</a>]          = { 0 },</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca390ba2c40204f8889092e2f7b325a7ef">DC_127_PRED</a>]          = { 0 },</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        [<a class="code" href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecae75e941928a27c27ec75b2fd502b3c48">DC_129_PRED</a>]          = { 0 }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    };</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> &gt;= 0 &amp;&amp; <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> &lt; 10);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = mode_conv[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>][have_left][have_top];</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (edges[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>].needs_top) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *top, *topleft;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordtype">int</span> n_px_need = 4 &lt;&lt; tx, n_px_have = (((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cols - col) &lt;&lt; !ss_h) - x) * 4;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordtype">int</span> n_px_need_tr = 0;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">if</span> (tx == <a class="code" href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfa2b87d07c19e7ba008980585f5618aff6">TX_4X4</a> &amp;&amp; edges[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>].needs_topright &amp;&amp; have_right)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            n_px_need_tr = 4;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="comment">// if top of sb64-row, use s-&gt;intra_pred_data[] instead of</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">// dst[-stride] for intra prediction (it contains pre- instead of</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="comment">// post-loopfilter data)</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> (have_top) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            top = !(row &amp; 7) &amp;&amp; !y ?</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_pred_data[p] + (col * (8 &gt;&gt; ss_h) + x * 4) * bytesperpixel :</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                y == 0 ? &amp;dst_edge[-stride_edge] : &amp;dst_inner[-stride_inner];</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordflow">if</span> (have_left)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                topleft = !(row &amp; 7) &amp;&amp; !y ?</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_pred_data[p] + (col * (8 &gt;&gt; ss_h) + x * 4) * bytesperpixel :</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    y == 0 || x == 0 ? &amp;dst_edge[-stride_edge] :</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    &amp;dst_inner[-stride_inner];</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (have_top &amp;&amp;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            (!edges[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>].needs_topleft || (have_left &amp;&amp; top == topleft)) &amp;&amp;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            (tx != <a class="code" href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfa2b87d07c19e7ba008980585f5618aff6">TX_4X4</a> || !edges[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>].needs_topright || have_right) &amp;&amp;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            n_px_need + n_px_need_tr &lt;= n_px_have) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            *<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = top;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="keywordflow">if</span> (have_top) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <span class="keywordflow">if</span> (n_px_need &lt;= n_px_have) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                    memcpy(*<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, top, n_px_need * bytesperpixel);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#define memset_bpp(c, i1, v, i2, num) do { \</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">    if (bytesperpixel == 1) { \</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">        memset(&amp;(c)[(i1)], (v)[(i2)], (num)); \</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">    } else { \</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">        int n, val = AV_RN16A(&amp;(v)[(i2) * 2]); \</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">        for (n = 0; n &lt; (num); n++) { \</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">            AV_WN16A(&amp;(c)[((i1) + n) * 2], val); \</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">        } \</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">    } \</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">} while (0)</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                    memcpy(*<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, top, n_px_have * bytesperpixel);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    <a class="code" href="vp9recon_8c.html#a72e3b3c6c4d98578f83c9c9f35513a00">memset_bpp</a>(*<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, n_px_have, (*<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>), n_px_have - 1, n_px_need - n_px_have);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#define memset_val(c, val, num) do { \</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">    if (bytesperpixel == 1) { \</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">        memset((c), (val), (num)); \</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">    } else { \</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">        int n; \</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">        for (n = 0; n &lt; (num); n++) { \</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">            AV_WN16A(&amp;(c)[n * 2], (val)); \</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">        } \</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">    } \</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">} while (0)</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <a class="code" href="vp9recon_8c.html#af08db62c2d7a8e4ceeb83c773308ae69">memset_val</a>(*<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, (128 &lt;&lt; (bpp - 8)) - 1, n_px_need);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">if</span> (edges[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>].needs_topleft) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">if</span> (have_left &amp;&amp; have_top) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#define assign_bpp(c, i1, v, i2) do { \</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">    if (bytesperpixel == 1) { \</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">        (c)[(i1)] = (v)[(i2)]; \</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">    } else { \</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">        AV_COPY16(&amp;(c)[(i1) * 2], &amp;(v)[(i2) * 2]); \</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">    } \</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">} while (0)</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                    <a class="code" href="vp9recon_8c.html#a5a43b3d5baf537f3c44194069ca105c3">assign_bpp</a>(*<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, -1, topleft, -1);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#define assign_val(c, i, v) do { \</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">    if (bytesperpixel == 1) { \</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">        (c)[(i)] = (v); \</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">    } else { \</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">        AV_WN16A(&amp;(c)[(i) * 2], (v)); \</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">    } \</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">} while (0)</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                    <a class="code" href="vp9recon_8c.html#a24392b4a815e24b6bab713b3b9e9ce6d">assign_val</a>((*<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>), -1, (128 &lt;&lt; (bpp - 8)) + (have_top ? +1 : -1));</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">if</span> (tx == <a class="code" href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfa2b87d07c19e7ba008980585f5618aff6">TX_4X4</a> &amp;&amp; edges[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>].needs_topright) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="keywordflow">if</span> (have_top &amp;&amp; have_right &amp;&amp;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                    n_px_need + n_px_need_tr &lt;= n_px_have) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                    memcpy(&amp;(*<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>)[4 * bytesperpixel], &amp;top[4 * bytesperpixel], 4 * bytesperpixel);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    <a class="code" href="vp9recon_8c.html#a72e3b3c6c4d98578f83c9c9f35513a00">memset_bpp</a>(*<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, 4, *<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, 3, 4);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> (edges[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>].needs_left) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> (have_left) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordtype">int</span> n_px_need = 4 &lt;&lt; tx, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, n_px_have = (((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rows - row) &lt;&lt; !ss_v) - y) * 4;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst = x == 0 ? dst_edge : dst_inner;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            ptrdiff_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> = x == 0 ? stride_edge : stride_inner;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">if</span> (edges[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>].invert_left) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <span class="keywordflow">if</span> (n_px_need &lt;= n_px_have) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n_px_need; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        <a class="code" href="vp9recon_8c.html#a5a43b3d5baf537f3c44194069ca105c3">assign_bpp</a>(l, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, &amp;dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>], -1);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n_px_have; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        <a class="code" href="vp9recon_8c.html#a5a43b3d5baf537f3c44194069ca105c3">assign_bpp</a>(l, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, &amp;dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>], -1);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <a class="code" href="vp9recon_8c.html#a72e3b3c6c4d98578f83c9c9f35513a00">memset_bpp</a>(l, n_px_have, l, n_px_have - 1, n_px_need - n_px_have);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <span class="keywordflow">if</span> (n_px_need &lt;= n_px_have) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n_px_need; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        <a class="code" href="vp9recon_8c.html#a5a43b3d5baf537f3c44194069ca105c3">assign_bpp</a>(l, n_px_need - 1 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, &amp;dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>], -1);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n_px_have; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                        <a class="code" href="vp9recon_8c.html#a5a43b3d5baf537f3c44194069ca105c3">assign_bpp</a>(l, n_px_need - 1 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, &amp;dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>], -1);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <a class="code" href="vp9recon_8c.html#a72e3b3c6c4d98578f83c9c9f35513a00">memset_bpp</a>(l, 0, l, n_px_need - n_px_have, n_px_need - n_px_have);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="vp9recon_8c.html#af08db62c2d7a8e4ceeb83c773308ae69">memset_val</a>(l, (128 &lt;&lt; (bpp - 8)) + 1, 4 &lt;&lt; tx);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#a88ac3d0f6edb21d279472e0bdd3e05ba">  218</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#a88ac3d0f6edb21d279472e0bdd3e05ba">intra_recon</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, ptrdiff_t y_off,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                         ptrdiff_t uv_off, <span class="keywordtype">int</span> bytesperpixel)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="struct_v_p9_context.html">VP9Context</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;s;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="struct_v_p9_block.html">VP9Block</a> *<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;b;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">int</span> row = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;row, col = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;col;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">int</span> w4 = <a class="code" href="vp9data_8c.html#a57a11a759fcfe35724435214f142ad20">ff_vp9_bwh_tab</a>[1][<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bs][0] &lt;&lt; 1, step1d = 1 &lt;&lt; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx, n;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">int</span> h4 = <a class="code" href="vp9data_8c.html#a57a11a759fcfe35724435214f142ad20">ff_vp9_bwh_tab</a>[1][<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bs][1] &lt;&lt; 1, x, y, <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a> = 1 &lt;&lt; (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx * 2);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">int</span> end_x = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(2 * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cols - col), w4);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">int</span> end_y = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(2 * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rows - row), h4);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordtype">int</span> tx = 4 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.h.lossless + <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx, uvtx = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx + 4 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.h.lossless;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">int</span> uvstep1d = 1 &lt;&lt; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx, p;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;dst[0], *dst_r = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;data[0] + y_off;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#a383804ed89972f458d08d83cbc3029e0">LOCAL_ALIGNED_32</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>, a_buf, [96]);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#a383804ed89972f458d08d83cbc3029e0">LOCAL_ALIGNED_32</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>, l, [64]);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">for</span> (n = 0, y = 0; y &lt; end_y; y += step1d) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ptr = dst, *ptr_r = dst_r;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; end_x; x += step1d, ptr += 4 * step1d * bytesperpixel,</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                               ptr_r += 4 * step1d * bytesperpixel, n += <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mode[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bs &gt; <a class="code" href="vp9shared_8h.html#ae0fbc20bcc22876be05929a6fd01da35a9d0a4f9dd777508b8402870ce8784915">BS_8x8</a> &amp;&amp; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx == <a class="code" href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfa2b87d07c19e7ba008980585f5618aff6">TX_4X4</a> ?</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                               y * 2 + x : 0];</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = &amp;a_buf[32];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keyword">enum</span> <a class="code" href="vp9_8h.html#a7ac211a44431d91b14b14e3a415ca62d">TxfmType</a> txtp = <a class="code" href="vp9data_8c.html#a0d24d6d2f70eab2a63745889584df486">ff_vp9_intra_txfm_type</a>[<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>];</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordtype">int</span> eob = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;skip ? 0 : <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx &gt; <a class="code" href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfaf1ab924c9f31805f042e0dc9a4137def">TX_8X8</a> ? <a class="code" href="intreadwrite_8h.html#a57f0352b91eafb6ee4fa7b4bee5422de">AV_RN16A</a>(&amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;eob[n]) : <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;eob[n];</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="vp9recon_8c.html#a83333287e38e08d97005202ab3b3aa6b">check_intra_mode</a>(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>, &amp;<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, ptr_r,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;linesize[0],</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                    ptr, <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;y_stride, l,</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                    col, x, w4, row, y, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx, 0, 0, 0, bytesperpixel);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dsp.intra_pred[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx][<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>](ptr, <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;y_stride, l, <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">if</span> (eob)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dsp.itxfm_add[tx][txtp](ptr, <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;y_stride,</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                           <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;block + 16 * n * bytesperpixel, eob);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        dst_r += 4 * step1d * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;linesize[0];</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        dst   += 4 * step1d * <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;y_stride;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// U/V</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    w4    &gt;&gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_h;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    end_x &gt;&gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_h;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    end_y &gt;&gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_v;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a> = 1 &lt;&lt; (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx * 2);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">for</span> (p = 0; p &lt; 2; p++) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        dst   = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;dst[1 + p];</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        dst_r = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;data[1 + p] + uv_off;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">for</span> (n = 0, y = 0; y &lt; end_y; y += uvstep1d) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ptr = dst, *ptr_r = dst_r;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordflow">for</span> (x = 0; x &lt; end_x; x += uvstep1d, ptr += 4 * uvstep1d * bytesperpixel,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                   ptr_r += 4 * uvstep1d * bytesperpixel, n += <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvmode;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = &amp;a_buf[32];</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordtype">int</span> eob = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;skip ? 0 : <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx &gt; <a class="code" href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfaf1ab924c9f31805f042e0dc9a4137def">TX_8X8</a> ? <a class="code" href="intreadwrite_8h.html#a57f0352b91eafb6ee4fa7b4bee5422de">AV_RN16A</a>(&amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uveob[p][n]) : <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uveob[p][n];</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="vp9recon_8c.html#a83333287e38e08d97005202ab3b3aa6b">check_intra_mode</a>(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>, &amp;<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, ptr_r,</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;linesize[1],</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                        ptr, <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uv_stride, l, col, x, w4, row, y,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                                        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx, p + 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_h, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_v, bytesperpixel);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dsp.intra_pred[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx][<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>](ptr, <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uv_stride, l, <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <span class="keywordflow">if</span> (eob)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dsp.itxfm_add[uvtx][<a class="code" href="vp9_8h.html#a7ac211a44431d91b14b14e3a415ca62daab1c56b790ed288266c0c565390d8b95">DCT_DCT</a>](ptr, <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uv_stride,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                                    <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uvblock[p] + 16 * n * bytesperpixel, eob);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            dst_r += 4 * uvstep1d * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;linesize[1];</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            dst   += 4 * uvstep1d * <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uv_stride;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#ad8f98e656fd4835a409634a825e55f7e">  288</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#ad8f98e656fd4835a409634a825e55f7e">ff_vp9_intra_recon_8bpp</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, ptrdiff_t y_off, ptrdiff_t uv_off)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;{</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="vp9recon_8c.html#a88ac3d0f6edb21d279472e0bdd3e05ba">intra_recon</a>(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, y_off, uv_off, 1);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;}</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#a20f5f77fb726cbb300d1b272ebbff180">  293</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#a20f5f77fb726cbb300d1b272ebbff180">ff_vp9_intra_recon_16bpp</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, ptrdiff_t y_off, ptrdiff_t uv_off)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;{</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="vp9recon_8c.html#a88ac3d0f6edb21d279472e0bdd3e05ba">intra_recon</a>(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, y_off, uv_off, 2);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#ac8db7e9d13e2b15fca85b0492c01904f">  298</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#ac8db7e9d13e2b15fca85b0492c01904f">mc_luma_unscaled</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="vp9dsp_8h.html#a3e27a69afc3248cba7574b82a8cdbd8f">vp9_mc_func</a> (*<a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>)[2],</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                              <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst, ptrdiff_t dst_stride,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, ptrdiff_t ref_stride,</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                              <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *ref_frame,</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                              ptrdiff_t y, ptrdiff_t x, <span class="keyword">const</span> <a class="code" href="struct_v_p56mv.html">VP56mv</a> *<a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                              <span class="keywordtype">int</span> bw, <span class="keywordtype">int</span> bh, <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <span class="keywordtype">int</span> bytesperpixel)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="struct_v_p9_context.html">VP9Context</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;s;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">int</span> mx = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>-&gt;x, my = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>-&gt;y, <a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    y += my &gt;&gt; 3;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    x += mx &gt;&gt; 3;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> += y * ref_stride + x * bytesperpixel;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    mx &amp;= 7;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    my &amp;= 7;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// FIXME bilinear filter only needs 0/1 pixels, not 3/4</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// we use +7 because the last 7 pixels of each sbrow can be changed in</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// the longest loopfilter of the next sbrow</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a> = (y + bh + 4 * !!my + 7) &gt;&gt; 6;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(ref_frame, <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a>, 0), 0);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// The arm/aarch64 _hv filters read one more row than what actually is</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">// needed, so switch to emulated edge one pixel sooner vertically</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// (!!my * 5) than horizontally (!!mx * 4).</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (x &lt; !!mx * 3 || y &lt; !!my * 3 ||</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        x + !!mx * 4 &gt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> - bw || y + !!my * 5 &gt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> - bh) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                 <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> - !!my * 3 * ref_stride - !!mx * 3 * bytesperpixel,</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                 160, ref_stride,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                 bw + !!mx * 7, bh + !!my * 7,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                                 x - !!mx * 3, y - !!my * 3, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer + !!my * 3 * 160 + !!mx * 3 * bytesperpixel;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        ref_stride = 160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>[!!mx][!!my](dst, dst_stride, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, ref_stride, bh, mx &lt;&lt; 1, my &lt;&lt; 1);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#a13ccc4c92e642d86f2dd36bfe271154b">  334</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#a13ccc4c92e642d86f2dd36bfe271154b">mc_chroma_unscaled</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="vp9dsp_8h.html#a3e27a69afc3248cba7574b82a8cdbd8f">vp9_mc_func</a> (*<a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>)[2],</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_u, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_v,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                                ptrdiff_t dst_stride,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ref_u, ptrdiff_t src_stride_u,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ref_v, ptrdiff_t src_stride_v,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                                <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *ref_frame,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                                ptrdiff_t y, ptrdiff_t x, <span class="keyword">const</span> <a class="code" href="struct_v_p56mv.html">VP56mv</a> *<a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                                <span class="keywordtype">int</span> bw, <span class="keywordtype">int</span> bh, <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <span class="keywordtype">int</span> bytesperpixel)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="struct_v_p9_context.html">VP9Context</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;s;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">int</span> mx = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>-&gt;x * (1 &lt;&lt; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_h), my = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>-&gt;y * (1 &lt;&lt; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_v), <a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    y += my &gt;&gt; 4;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    x += mx &gt;&gt; 4;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    ref_u += y * src_stride_u + x * bytesperpixel;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    ref_v += y * src_stride_v + x * bytesperpixel;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    mx &amp;= 15;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    my &amp;= 15;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// FIXME bilinear filter only needs 0/1 pixels, not 3/4</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// we use +7 because the last 7 pixels of each sbrow can be changed in</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// the longest loopfilter of the next sbrow</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a> = (y + bh + 4 * !!my + 7) &gt;&gt; (6 - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_v);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(ref_frame, <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a>, 0), 0);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// The arm/aarch64 _hv filters read one more row than what actually is</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">// needed, so switch to emulated edge one pixel sooner vertically</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// (!!my * 5) than horizontally (!!mx * 4).</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (x &lt; !!mx * 3 || y &lt; !!my * 3 ||</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        x + !!mx * 4 &gt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> - bw || y + !!my * 5 &gt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> - bh) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer,</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                                 ref_u - !!my * 3 * src_stride_u - !!mx * 3 * bytesperpixel,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                 160, src_stride_u,</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                 bw + !!mx * 7, bh + !!my * 7,</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                 x - !!mx * 3, y - !!my * 3, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        ref_u = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer + !!my * 3 * 160 + !!mx * 3 * bytesperpixel;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>[!!mx][!!my](dst_u, dst_stride, ref_u, 160, bh, mx, my);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                 ref_v - !!my * 3 * src_stride_v - !!mx * 3 * bytesperpixel,</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                 160, src_stride_v,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                 bw + !!mx * 7, bh + !!my * 7,</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                 x - !!mx * 3, y - !!my * 3, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        ref_v = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer + !!my * 3 * 160 + !!mx * 3 * bytesperpixel;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>[!!mx][!!my](dst_v, dst_stride, ref_v, 160, bh, mx, my);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>[!!mx][!!my](dst_u, dst_stride, ref_u, src_stride_u, bh, mx, my);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>[!!mx][!!my](dst_v, dst_stride, ref_v, src_stride_v, bh, mx, my);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">#define mc_luma_dir(td, mc, dst, dst_ls, src, src_ls, tref, row, col, mv, \</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor">                    px, py, pw, ph, bw, bh, w, h, i) \</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">    mc_luma_unscaled(td, s-&gt;dsp.mc, dst, dst_ls, src, src_ls, tref, row, col, \</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">                     mv, bw, bh, w, h, bytesperpixel)</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#define mc_chroma_dir(td, mc, dstu, dstv, dst_ls, srcu, srcu_ls, srcv, srcv_ls, tref, \</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">                      row, col, mv, px, py, pw, ph, bw, bh, w, h, i) \</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">    mc_chroma_unscaled(td, s-&gt;dsp.mc, dstu, dstv, dst_ls, srcu, srcu_ls, srcv, srcv_ls, tref, \</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="preprocessor">                       row, col, mv, bw, bh, w, h, bytesperpixel)</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">#define SCALED 0</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="preprocessor">#define FN(x) x##_8bpp</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">#define BYTES_PER_PIXEL 1</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vp9__mc__template_8c.html">vp9_mc_template.c</a>&quot;</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor">#undef FN</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">#undef BYTES_PER_PIXEL</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">#define FN(x) x##_16bpp</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor">#define BYTES_PER_PIXEL 2</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vp9__mc__template_8c.html">vp9_mc_template.c</a>&quot;</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="preprocessor">#undef mc_luma_dir</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">#undef mc_chroma_dir</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor">#undef FN</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="preprocessor">#undef BYTES_PER_PIXEL</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="preprocessor">#undef SCALED</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#ad7b5f7c87417694391b7dbf95d75419e">  406</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#ad7b5f7c87417694391b7dbf95d75419e">mc_luma_scaled</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="vp9dsp_8h.html#a2612a5da1606c5b9f7bbb436896ad357">vp9_scaled_mc_func</a> smc,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                            <a class="code" href="vp9dsp_8h.html#a3e27a69afc3248cba7574b82a8cdbd8f">vp9_mc_func</a> (*<a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>)[2],</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst, ptrdiff_t dst_stride,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, ptrdiff_t ref_stride,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                                            <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *ref_frame,</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                            ptrdiff_t y, ptrdiff_t x, <span class="keyword">const</span> <a class="code" href="struct_v_p56mv.html">VP56mv</a> *in_mv,</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                                            <span class="keywordtype">int</span> px, <span class="keywordtype">int</span> py, <span class="keywordtype">int</span> pw, <span class="keywordtype">int</span> ph,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                                            <span class="keywordtype">int</span> bw, <span class="keywordtype">int</span> bh, <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <span class="keywordtype">int</span> bytesperpixel,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                            <span class="keyword">const</span> uint16_t *scale, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="struct_v_p9_context.html">VP9Context</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;s;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;width == ref_frame-&gt;<a class="code" href="struct_thread_frame.html#a6d4ef36cc340178903e148e89903f1a1">f</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a> &amp;&amp;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;height == ref_frame-&gt;<a class="code" href="struct_thread_frame.html#a6d4ef36cc340178903e148e89903f1a1">f</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a>) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="vp9recon_8c.html#ac8db7e9d13e2b15fca85b0492c01904f">mc_luma_unscaled</a>(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>, dst, dst_stride, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, ref_stride, ref_frame,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                         y, x, in_mv, bw, bh, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, bytesperpixel);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="preprocessor">#define scale_mv(n, dim) (((int64_t)(n) * scale[dim]) &gt;&gt; 14)</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordtype">int</span> mx, my;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">int</span> refbw_m1, refbh_m1;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="struct_v_p56mv.html">VP56mv</a> <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.x = av_clip(in_mv-&gt;x, -(x + pw - px + 4) * 8, (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cols * 8 - x + px + 3) * 8);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.y = av_clip(in_mv-&gt;<a class="code" href="struct_v_p56mv.html#a6f4a476e711d63f22055efdc59220571">y</a>, -(y + ph - py + 4) * 8, (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rows * 8 - y + py + 3) * 8);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// BUG libvpx seems to scale the two components separately. This introduces</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// rounding errors but we have to reproduce them to be exactly compatible</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// with the output from libvpx...</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    mx = <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(<a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.x * 2, 0) + <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(x * 16, 0);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    my = <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(<a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.y * 2, 1) + <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(y * 16, 1);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    y = my &gt;&gt; 4;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    x = mx &gt;&gt; 4;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> += y * ref_stride + x * bytesperpixel;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    mx &amp;= 15;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    my &amp;= 15;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    refbw_m1 = ((bw - 1) * <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[0] + mx) &gt;&gt; 4;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    refbh_m1 = ((bh - 1) * <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[1] + my) &gt;&gt; 4;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// FIXME bilinear filter only needs 0/1 pixels, not 3/4</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">// we use +7 because the last 7 pixels of each sbrow can be changed in</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// the longest loopfilter of the next sbrow</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a> = (y + refbh_m1 + 4 + 7) &gt;&gt; 6;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(ref_frame, <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a>, 0), 0);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">// The arm/aarch64 _hv filters read one more row than what actually is</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// needed, so switch to emulated edge one pixel sooner vertically</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// (y + 5 &gt;= h - refbh_m1) than horizontally (x + 4 &gt;= w - refbw_m1).</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (x &lt; 3 || y &lt; 3 || x + 4 &gt;= <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> - refbw_m1 || y + 5 &gt;= <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> - refbh_m1) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer,</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                                 <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> - 3 * ref_stride - 3 * bytesperpixel,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                 288, ref_stride,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                 refbw_m1 + 8, refbh_m1 + 8,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                 x - 3, y - 3, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer + 3 * 288 + 3 * bytesperpixel;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        ref_stride = 288;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    smc(dst, dst_stride, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, ref_stride, bh, mx, my, <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[0], <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[1]);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#ac7fa0b6fd3d5a8ab2b444fc791c083cb">  464</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#ac7fa0b6fd3d5a8ab2b444fc791c083cb">mc_chroma_scaled</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="vp9dsp_8h.html#a2612a5da1606c5b9f7bbb436896ad357">vp9_scaled_mc_func</a> smc,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                              <a class="code" href="vp9dsp_8h.html#a3e27a69afc3248cba7574b82a8cdbd8f">vp9_mc_func</a> (*<a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>)[2],</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                              <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_u, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_v,</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                              ptrdiff_t dst_stride,</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ref_u, ptrdiff_t src_stride_u,</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ref_v, ptrdiff_t src_stride_v,</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                              <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *ref_frame,</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                                              ptrdiff_t y, ptrdiff_t x, <span class="keyword">const</span> <a class="code" href="struct_v_p56mv.html">VP56mv</a> *in_mv,</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                              <span class="keywordtype">int</span> px, <span class="keywordtype">int</span> py, <span class="keywordtype">int</span> pw, <span class="keywordtype">int</span> ph,</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                              <span class="keywordtype">int</span> bw, <span class="keywordtype">int</span> bh, <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <span class="keywordtype">int</span> bytesperpixel,</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                              <span class="keyword">const</span> uint16_t *scale, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>)</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;{</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="struct_v_p9_context.html">VP9Context</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;s;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;width == ref_frame-&gt;<a class="code" href="struct_thread_frame.html#a6d4ef36cc340178903e148e89903f1a1">f</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a> &amp;&amp;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.frames[<a class="code" href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a>].tf.f-&gt;height == ref_frame-&gt;<a class="code" href="struct_thread_frame.html#a6d4ef36cc340178903e148e89903f1a1">f</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a>) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="vp9recon_8c.html#a13ccc4c92e642d86f2dd36bfe271154b">mc_chroma_unscaled</a>(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>, dst_u, dst_v, dst_stride, ref_u, src_stride_u,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                           ref_v, src_stride_v, ref_frame,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                           y, x, in_mv, bw, bh, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, bytesperpixel);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">int</span> mx, my;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordtype">int</span> refbw_m1, refbh_m1;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="struct_v_p56mv.html">VP56mv</a> <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_h) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="comment">// BUG https://code.google.com/p/webm/issues/detail?id=820</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.x = av_clip(in_mv-&gt;x, -(x + pw - px + 4) * 16, (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cols * 4 - x + px + 3) * 16);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        mx = <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(<a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.x, 0) + (<a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(x * 16, 0) &amp; ~15) + (<a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(x * 32, 0) &amp; 15);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.x = av_clip(in_mv-&gt;x, -(x + pw - px + 4) * 8, (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cols * 8 - x + px + 3) * 8);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        mx = <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(<a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.x * 2, 0) + <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(x * 16, 0);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_v) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="comment">// BUG https://code.google.com/p/webm/issues/detail?id=820</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.y = av_clip(in_mv-&gt;<a class="code" href="struct_v_p56mv.html#a6f4a476e711d63f22055efdc59220571">y</a>, -(y + ph - py + 4) * 16, (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rows * 4 - y + py + 3) * 16);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        my = <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(<a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.y, 1) + (<a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(y * 16, 1) &amp; ~15) + (<a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(y * 32, 1) &amp; 15);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.y = av_clip(in_mv-&gt;<a class="code" href="struct_v_p56mv.html#a6f4a476e711d63f22055efdc59220571">y</a>, -(y + ph - py + 4) * 8, (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rows * 8 - y + py + 3) * 8);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        my = <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(<a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>.y * 2, 1) + <a class="code" href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a>(y * 16, 1);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="preprocessor">#undef scale_mv</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    y = my &gt;&gt; 4;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    x = mx &gt;&gt; 4;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    ref_u += y * src_stride_u + x * bytesperpixel;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    ref_v += y * src_stride_v + x * bytesperpixel;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    mx &amp;= 15;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    my &amp;= 15;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    refbw_m1 = ((bw - 1) * <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[0] + mx) &gt;&gt; 4;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    refbh_m1 = ((bh - 1) * <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[1] + my) &gt;&gt; 4;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// FIXME bilinear filter only needs 0/1 pixels, not 3/4</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// we use +7 because the last 7 pixels of each sbrow can be changed in</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// the longest loopfilter of the next sbrow</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a> = (y + refbh_m1 + 4 + 7) &gt;&gt; (6 - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_v);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(ref_frame, <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a>, 0), 0);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">// The arm/aarch64 _hv filters read one more row than what actually is</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">// needed, so switch to emulated edge one pixel sooner vertically</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">// (y + 5 &gt;= h - refbh_m1) than horizontally (x + 4 &gt;= w - refbw_m1).</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (x &lt; 3 || y &lt; 3 || x + 4 &gt;= <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> - refbw_m1 || y + 5 &gt;= <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> - refbh_m1) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                 ref_u - 3 * src_stride_u - 3 * bytesperpixel,</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                                 288, src_stride_u,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                 refbw_m1 + 8, refbh_m1 + 8,</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                                 x - 3, y - 3, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        ref_u = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer + 3 * 288 + 3 * bytesperpixel;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        smc(dst_u, dst_stride, ref_u, 288, bh, mx, my, <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[0], <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[1]);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                 ref_v - 3 * src_stride_v - 3 * bytesperpixel,</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                                 288, src_stride_v,</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                                 refbw_m1 + 8, refbh_m1 + 8,</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                                 x - 3, y - 3, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        ref_v = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;edge_emu_buffer + 3 * 288 + 3 * bytesperpixel;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        smc(dst_v, dst_stride, ref_v, 288, bh, mx, my, <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[0], <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[1]);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        smc(dst_u, dst_stride, ref_u, src_stride_u, bh, mx, my, <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[0], <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[1]);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        smc(dst_v, dst_stride, ref_v, src_stride_v, bh, mx, my, <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[0], <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>[1]);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#aace99de9e6f806bbc2232a7930365da5">  544</a></span>&#160;<span class="preprocessor">#define mc_luma_dir(td, mc, dst, dst_ls, src, src_ls, tref, row, col, mv, \</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">                    px, py, pw, ph, bw, bh, w, h, i) \</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="preprocessor">    mc_luma_scaled(td, s-&gt;dsp.s##mc, s-&gt;dsp.mc, dst, dst_ls, src, src_ls, tref, row, col, \</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="preprocessor">                   mv, px, py, pw, ph, bw, bh, w, h, bytesperpixel, \</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="preprocessor">                   s-&gt;mvscale[b-&gt;ref[i]], s-&gt;mvstep[b-&gt;ref[i]])</span></div>
<div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#a9bb967a30d74490858eee6d48435d7cd">  549</a></span>&#160;<span class="preprocessor">#define mc_chroma_dir(td, mc, dstu, dstv, dst_ls, srcu, srcu_ls, srcv, srcv_ls, tref, \</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="preprocessor">                      row, col, mv, px, py, pw, ph, bw, bh, w, h, i) \</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="preprocessor">    mc_chroma_scaled(td, s-&gt;dsp.s##mc, s-&gt;dsp.mc, dstu, dstv, dst_ls, srcu, srcu_ls, srcv, srcv_ls, tref, \</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="preprocessor">                     row, col, mv, px, py, pw, ph, bw, bh, w, h, bytesperpixel, \</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="preprocessor">                     s-&gt;mvscale[b-&gt;ref[i]], s-&gt;mvstep[b-&gt;ref[i]])</span></div>
<div class="line"><a name="l00554"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#a2f554f1091b13862bd2d32bdd3a00581">  554</a></span>&#160;<span class="preprocessor">#define SCALED 1</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="preprocessor">#define FN(x) x##_scaled_8bpp</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="preprocessor">#define BYTES_PER_PIXEL 1</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vp9__mc__template_8c.html">vp9_mc_template.c</a>&quot;</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor">#undef FN</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="preprocessor">#undef BYTES_PER_PIXEL</span></div>
<div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#a9f8663858f8eb03e9f1f706edfa519a4">  560</a></span>&#160;<span class="preprocessor">#define FN(x) x##_scaled_16bpp</span></div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#ae138b2e443649ca9546c99e80957faac">  561</a></span>&#160;<span class="preprocessor">#define BYTES_PER_PIXEL 2</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vp9__mc__template_8c.html">vp9_mc_template.c</a>&quot;</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor">#undef mc_luma_dir</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor">#undef mc_chroma_dir</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="preprocessor">#undef FN</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="preprocessor">#undef BYTES_PER_PIXEL</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor">#undef SCALED</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#ac67e91f855f52512acc0e992b6573ef7">  569</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#ac67e91f855f52512acc0e992b6573ef7">inter_recon</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, <span class="keywordtype">int</span> bytesperpixel)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;{</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="struct_v_p9_context.html">VP9Context</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;s;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="struct_v_p9_block.html">VP9Block</a> *<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;b;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordtype">int</span> row = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;row, col = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;col;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mvscale[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;ref[0]][0] == <a class="code" href="vp9dec_8h.html#a14269cd39b11d3c9bcf5c7a02da5c477">REF_INVALID_SCALE</a> ||</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;comp &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mvscale[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;ref[1]][0] == <a class="code" href="vp9dec_8h.html#a14269cd39b11d3c9bcf5c7a02da5c477">REF_INVALID_SCALE</a>)) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;td-&gt;error_info) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;td-&gt;error_info = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Bitstream not supported, &quot;</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                       <span class="stringliteral">&quot;reference frame has invalid dimensions\n&quot;</span>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mvscale[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;ref[0]][0] || (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;comp &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mvscale[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;ref[1]][0])) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">if</span> (bytesperpixel == 1) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            inter_pred_scaled_8bpp(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            inter_pred_scaled_16bpp(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">if</span> (bytesperpixel == 1) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            inter_pred_8bpp(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            inter_pred_16bpp(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;skip) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">/* mostly copied intra_recon() */</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordtype">int</span> w4 = <a class="code" href="vp9data_8c.html#a57a11a759fcfe35724435214f142ad20">ff_vp9_bwh_tab</a>[1][<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bs][0] &lt;&lt; 1, step1d = 1 &lt;&lt; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx, n;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordtype">int</span> h4 = <a class="code" href="vp9data_8c.html#a57a11a759fcfe35724435214f142ad20">ff_vp9_bwh_tab</a>[1][<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bs][1] &lt;&lt; 1, x, y, <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a> = 1 &lt;&lt; (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx * 2);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordtype">int</span> end_x = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(2 * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cols - col), w4);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordtype">int</span> end_y = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(2 * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rows - row), h4);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordtype">int</span> tx = 4 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.h.lossless + <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx, uvtx = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx + 4 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;s.h.lossless;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordtype">int</span> uvstep1d = 1 &lt;&lt; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx, p;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;dst[0];</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="comment">// y itxfm add</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">for</span> (n = 0, y = 0; y &lt; end_y; y += step1d) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ptr = dst;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keywordflow">for</span> (x = 0; x &lt; end_x; x += step1d,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                 ptr += 4 * step1d * bytesperpixel, n += <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <span class="keywordtype">int</span> eob = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;tx &gt; <a class="code" href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfaf1ab924c9f31805f042e0dc9a4137def">TX_8X8</a> ? <a class="code" href="intreadwrite_8h.html#a57f0352b91eafb6ee4fa7b4bee5422de">AV_RN16A</a>(&amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;eob[n]) : <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;eob[n];</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <span class="keywordflow">if</span> (eob)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dsp.itxfm_add[tx][<a class="code" href="vp9_8h.html#a7ac211a44431d91b14b14e3a415ca62daab1c56b790ed288266c0c565390d8b95">DCT_DCT</a>](ptr, <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;y_stride,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                                                  <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;block + 16 * n * bytesperpixel, eob);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            dst += 4 * <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;y_stride * step1d;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="comment">// uv itxfm add</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        end_x &gt;&gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_h;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        end_y &gt;&gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ss_v;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a> = 1 &lt;&lt; (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx * 2);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">for</span> (p = 0; p &lt; 2; p++) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            dst = <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;dst[p + 1];</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="keywordflow">for</span> (n = 0, y = 0; y &lt; end_y; y += uvstep1d) {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ptr = dst;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <span class="keywordflow">for</span> (x = 0; x &lt; end_x; x += uvstep1d,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                     ptr += 4 * uvstep1d * bytesperpixel, n += <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    <span class="keywordtype">int</span> eob = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;uvtx &gt; <a class="code" href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfaf1ab924c9f31805f042e0dc9a4137def">TX_8X8</a> ? <a class="code" href="intreadwrite_8h.html#a57f0352b91eafb6ee4fa7b4bee5422de">AV_RN16A</a>(&amp;<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uveob[p][n]) : <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uveob[p][n];</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    <span class="keywordflow">if</span> (eob)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dsp.itxfm_add[uvtx][<a class="code" href="vp9_8h.html#a7ac211a44431d91b14b14e3a415ca62daab1c56b790ed288266c0c565390d8b95">DCT_DCT</a>](ptr, <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uv_stride,</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                                                        <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uvblock[p] + 16 * n * bytesperpixel, eob);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                dst += 4 * uvstep1d * <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>-&gt;uv_stride;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;}</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#a86482d59dc033262600e96a5c6550943">  646</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#a86482d59dc033262600e96a5c6550943">ff_vp9_inter_recon_8bpp</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>)</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;{</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="vp9recon_8c.html#ac67e91f855f52512acc0e992b6573ef7">inter_recon</a>(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, 1);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="vp9recon_8c.html#a7c5b792b624ef0c757b2d6bb2b09fe3b">  651</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vp9recon_8c.html#a7c5b792b624ef0c757b2d6bb2b09fe3b">ff_vp9_inter_recon_16bpp</a>(<a class="code" href="struct_v_p9_tile_data.html">VP9TileData</a> *<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;{</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="vp9recon_8c.html#ac67e91f855f52512acc0e992b6573ef7">inter_recon</a>(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>, 2);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="amace_8c_html_a08f66a6870d87afcd5dc1b60d1019692"><div class="ttname"><a href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a></div><div class="ttdeci">int stride</div><div class="ttdef"><b>Definition:</b> <a href="mace_8c_source.html#l00144">mace.c:144</a></div></div>
<div class="ttc" id="aregdef_8h_html_ab2c359e6c325062d33a4152752d8a820"><div class="ttname"><a href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a></div><div class="ttdeci">#define td</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00070">regdef.h:70</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca771574e39134daab118369aabdcdf767"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca771574e39134daab118369aabdcdf767">DC_128_PRED</a></div><div class="ttdeci">@ DC_128_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00058">vp9.h:58</a></div></div>
<div class="ttc" id="alibavcodec_24xm_8c_html_a19c59215a57cc549287f6d8481937b12"><div class="ttname"><a href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a></div><div class="ttdeci">static const int8_t mv[256][2]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_24xm_8c_source.html#l00077">4xm.c:77</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca3dfc65d3345dc7b54337aa05885ebbbc"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca3dfc65d3345dc7b54337aa05885ebbbc">TM_VP8_PRED</a></div><div class="ttdeci">@ TM_VP8_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00055">vp9.h:55</a></div></div>
<div class="ttc" id="arate__distortion_8txt_html_a0e018beb061c7ac6d1f9121683a6f2c2"><div class="ttname"><a href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a></div><div class="ttdeci">trying all byte sequences megabyte in length and selecting the best looking sequence will yield cases to try But a word about which is also called distortion Distortion can be quantified by almost any quality measurement one chooses the sum of squared differences is used but more complex methods that consider psychovisual effects can be used as well It makes no difference in this discussion First step</div><div class="ttdef"><b>Definition:</b> <a href="rate__distortion_8txt_source.html#l00019">rate_distortion.txt:58</a></div></div>
<div class="ttc" id="allviddspenc_8c_html_aba9ed0487b0aa23eba534648df8384c0"><div class="ttname"><a href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a></div><div class="ttdeci">uint8_t w</div><div class="ttdef"><b>Definition:</b> <a href="llviddspenc_8c_source.html#l00038">llviddspenc.c:38</a></div></div>
<div class="ttc" id="astruct_thread_frame_html_a6d4ef36cc340178903e148e89903f1a1"><div class="ttname"><a href="struct_thread_frame.html#a6d4ef36cc340178903e148e89903f1a1">ThreadFrame::f</a></div><div class="ttdeci">AVFrame * f</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2thread_8h_source.html#l00035">thread.h:35</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aecaee86abbe5868eaea023a934f0ce73882"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaee86abbe5868eaea023a934f0ce73882">DC_PRED</a></div><div class="ttdeci">@ DC_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00048">vp9.h:48</a></div></div>
<div class="ttc" id="ainput_8c_html_ad6cdb6a14abe3eab42eaaadc93409aec"><div class="ttname"><a href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a></div><div class="ttdeci">#define b</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00041">input.c:41</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca13d0dce96d24944d45b7b8b37fa237e2"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca13d0dce96d24944d45b7b8b37fa237e2">VERT_LEFT_PRED</a></div><div class="ttdeci">@ VERT_LEFT_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00053">vp9.h:53</a></div></div>
<div class="ttc" id="avp9recon_8c_html_ac67e91f855f52512acc0e992b6573ef7"><div class="ttname"><a href="vp9recon_8c.html#ac67e91f855f52512acc0e992b6573ef7">inter_recon</a></div><div class="ttdeci">static av_always_inline void inter_recon(VP9TileData *td, int bytesperpixel)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00569">vp9recon.c:569</a></div></div>
<div class="ttc" id="amultithreading_8txt_html_ab66ca23680e500f1f51b1608e8a5419a"><div class="ttname"><a href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a></div><div class="ttdeci">the pkt_dts and pkt_pts fields in AVFrame will work as usual Restrictions on codec whose streams don t reset across will not work because their bitstreams cannot be decoded in parallel *The contents of buffers must not be read before ff_thread_await_progress() has been called on them. reget_buffer() and buffer age optimizations no longer work. *The contents of buffers must not be written to after ff_thread_report_progress() has been called on them. This includes draw_edges(). Porting codecs to frame threading</div></div>
<div class="ttc" id="avp9recon_8c_html_a20f5f77fb726cbb300d1b272ebbff180"><div class="ttname"><a href="vp9recon_8c.html#a20f5f77fb726cbb300d1b272ebbff180">ff_vp9_intra_recon_16bpp</a></div><div class="ttdeci">void ff_vp9_intra_recon_16bpp(VP9TileData *td, ptrdiff_t y_off, ptrdiff_t uv_off)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00293">vp9recon.c:293</a></div></div>
<div class="ttc" id="astruct_v_p9_context_html"><div class="ttname"><a href="struct_v_p9_context.html">VP9Context</a></div><div class="ttdef"><b>Definition:</b> <a href="vp9dec_8h_source.html#l00093">vp9dec.h:93</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca390ba2c40204f8889092e2f7b325a7ef"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca390ba2c40204f8889092e2f7b325a7ef">DC_127_PRED</a></div><div class="ttdeci">@ DC_127_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00059">vp9.h:59</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca7ba9a3d80ed4c0514a825afd4cbf9d8e"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca7ba9a3d80ed4c0514a825afd4cbf9d8e">VERT_PRED</a></div><div class="ttdeci">@ VERT_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00046">vp9.h:46</a></div></div>
<div class="ttc" id="avp9recon_8c_html_a24392b4a815e24b6bab713b3b9e9ce6d"><div class="ttname"><a href="vp9recon_8c.html#a24392b4a815e24b6bab713b3b9e9ce6d">assign_val</a></div><div class="ttdeci">#define assign_val(c, i, v)</div></div>
<div class="ttc" id="avp9recon_8c_html_a83333287e38e08d97005202ab3b3aa6b"><div class="ttname"><a href="vp9recon_8c.html#a83333287e38e08d97005202ab3b3aa6b">check_intra_mode</a></div><div class="ttdeci">static av_always_inline int check_intra_mode(VP9TileData *td, int mode, uint8_t **a, uint8_t *dst_edge, ptrdiff_t stride_edge, uint8_t *dst_inner, ptrdiff_t stride_inner, uint8_t *l, int col, int x, int w, int row, int y, enum TxfmMode tx, int p, int ss_h, int ss_v, int bytesperpixel)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00032">vp9recon.c:32</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca5f322cfece0841e1a553ba5f5ccfb3e4"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca5f322cfece0841e1a553ba5f5ccfb3e4">DIAG_DOWN_RIGHT_PRED</a></div><div class="ttdeci">@ DIAG_DOWN_RIGHT_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00050">vp9.h:50</a></div></div>
<div class="ttc" id="astruct_v_p9_tile_data_html"><div class="ttname"><a href="struct_v_p9_tile_data.html">VP9TileData</a></div><div class="ttdef"><b>Definition:</b> <a href="vp9dec_8h_source.html#l00163">vp9dec.h:163</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aecaca53c32a372459fc6c74a36f66e454a2"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecaca53c32a372459fc6c74a36f66e454a2">HOR_PRED</a></div><div class="ttdeci">@ HOR_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00047">vp9.h:47</a></div></div>
<div class="ttc" id="astruct_v_p56mv_html_a6f4a476e711d63f22055efdc59220571"><div class="ttname"><a href="struct_v_p56mv.html#a6f4a476e711d63f22055efdc59220571">VP56mv::y</a></div><div class="ttdeci">int16_t y</div><div class="ttdef"><b>Definition:</b> <a href="vp56_8h_source.html#l00068">vp56.h:68</a></div></div>
<div class="ttc" id="avp9dsp_8h_html_a2612a5da1606c5b9f7bbb436896ad357"><div class="ttname"><a href="vp9dsp_8h.html#a2612a5da1606c5b9f7bbb436896ad357">vp9_scaled_mc_func</a></div><div class="ttdeci">void(* vp9_scaled_mc_func)(uint8_t *dst, ptrdiff_t dst_stride, const uint8_t *ref, ptrdiff_t ref_stride, int h, int mx, int my, int dx, int dy)</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp_8h_source.html#l00035">vp9dsp.h:35</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="avp9data_8h_html"><div class="ttname"><a href="vp9data_8h.html">vp9data.h</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca4ae520390cd1d2117e36c717b59c22b6"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca4ae520390cd1d2117e36c717b59c22b6">LEFT_DC_PRED</a></div><div class="ttdeci">@ LEFT_DC_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00056">vp9.h:56</a></div></div>
<div class="ttc" id="avp9recon_8c_html_af08db62c2d7a8e4ceeb83c773308ae69"><div class="ttname"><a href="vp9recon_8c.html#af08db62c2d7a8e4ceeb83c773308ae69">memset_val</a></div><div class="ttdeci">#define memset_val(c, val, num)</div></div>
<div class="ttc" id="avp9recon_8c_html_a7c5b792b624ef0c757b2d6bb2b09fe3b"><div class="ttname"><a href="vp9recon_8c.html#a7c5b792b624ef0c757b2d6bb2b09fe3b">ff_vp9_inter_recon_16bpp</a></div><div class="ttdeci">void ff_vp9_inter_recon_16bpp(VP9TileData *td)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00651">vp9recon.c:651</a></div></div>
<div class="ttc" id="avp9recon_8c_html_a5a43b3d5baf537f3c44194069ca105c3"><div class="ttname"><a href="vp9recon_8c.html#a5a43b3d5baf537f3c44194069ca105c3">assign_bpp</a></div><div class="ttdeci">#define assign_bpp(c, i1, v, i2)</div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="avp9recon_8c_html_ac7fa0b6fd3d5a8ab2b444fc791c083cb"><div class="ttname"><a href="vp9recon_8c.html#ac7fa0b6fd3d5a8ab2b444fc791c083cb">mc_chroma_scaled</a></div><div class="ttdeci">static av_always_inline void mc_chroma_scaled(VP9TileData *td, vp9_scaled_mc_func smc, vp9_mc_func(*mc)[2], uint8_t *dst_u, uint8_t *dst_v, ptrdiff_t dst_stride, const uint8_t *ref_u, ptrdiff_t src_stride_u, const uint8_t *ref_v, ptrdiff_t src_stride_v, ThreadFrame *ref_frame, ptrdiff_t y, ptrdiff_t x, const VP56mv *in_mv, int px, int py, int pw, int ph, int bw, int bh, int w, int h, int bytesperpixel, const uint16_t *scale, const uint8_t *step)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00464">vp9recon.c:464</a></div></div>
<div class="ttc" id="avp9_8h_html_afb98eb066ec19071c75e37a8bbccaedfaf1ab924c9f31805f042e0dc9a4137def"><div class="ttname"><a href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfaf1ab924c9f31805f042e0dc9a4137def">TX_8X8</a></div><div class="ttdeci">@ TX_8X8</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00029">vp9.h:29</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a3f89733f429c98ba5bc64373fb0a3f13"><div class="ttname"><a href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">AVFrame::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="avp9__mc__template_8c_html"><div class="ttname"><a href="vp9__mc__template_8c.html">vp9_mc_template.c</a></div></div>
<div class="ttc" id="avp9_8h_html_afb98eb066ec19071c75e37a8bbccaedf"><div class="ttname"><a href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedf">TxfmMode</a></div><div class="ttdeci">TxfmMode</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00027">vp9.h:27</a></div></div>
<div class="ttc" id="avp9_8h_html_a7ac211a44431d91b14b14e3a415ca62daab1c56b790ed288266c0c565390d8b95"><div class="ttname"><a href="vp9_8h.html#a7ac211a44431d91b14b14e3a415ca62daab1c56b790ed288266c0c565390d8b95">DCT_DCT</a></div><div class="ttdeci">@ DCT_DCT</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00038">vp9.h:38</a></div></div>
<div class="ttc" id="avp9_8h_html_a7ac211a44431d91b14b14e3a415ca62d"><div class="ttname"><a href="vp9_8h.html#a7ac211a44431d91b14b14e3a415ca62d">TxfmType</a></div><div class="ttdeci">TxfmType</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00037">vp9.h:37</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca8b91f5065f538c7511d7f6c6b63b6b51"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca8b91f5065f538c7511d7f6c6b63b6b51">N_INTRA_PRED_MODES</a></div><div class="ttdeci">@ N_INTRA_PRED_MODES</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00062">vp9.h:61</a></div></div>
<div class="ttc" id="avp9dec_8h_html_a14269cd39b11d3c9bcf5c7a02da5c477"><div class="ttname"><a href="vp9dec_8h.html#a14269cd39b11d3c9bcf5c7a02da5c477">REF_INVALID_SCALE</a></div><div class="ttdeci">#define REF_INVALID_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="vp9dec_8h_source.html#l00039">vp9dec.h:39</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="avp9recon_8c_html_ac8db7e9d13e2b15fca85b0492c01904f"><div class="ttname"><a href="vp9recon_8c.html#ac8db7e9d13e2b15fca85b0492c01904f">mc_luma_unscaled</a></div><div class="ttdeci">static av_always_inline void mc_luma_unscaled(VP9TileData *td, vp9_mc_func(*mc)[2], uint8_t *dst, ptrdiff_t dst_stride, const uint8_t *ref, ptrdiff_t ref_stride, ThreadFrame *ref_frame, ptrdiff_t y, ptrdiff_t x, const VP56mv *mv, int bw, int bh, int w, int h, int bytesperpixel)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00298">vp9recon.c:298</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca03a6514a01b1b71013465d825ff3dacf"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca03a6514a01b1b71013465d825ff3dacf">VERT_RIGHT_PRED</a></div><div class="ttdeci">@ VERT_RIGHT_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00051">vp9.h:51</a></div></div>
<div class="ttc" id="avp9shared_8h_html_ae0fbc20bcc22876be05929a6fd01da35a9d0a4f9dd777508b8402870ce8784915"><div class="ttname"><a href="vp9shared_8h.html#ae0fbc20bcc22876be05929a6fd01da35a9d0a4f9dd777508b8402870ce8784915">BS_8x8</a></div><div class="ttdeci">@ BS_8x8</div><div class="ttdef"><b>Definition:</b> <a href="vp9shared_8h_source.html#l00087">vp9shared.h:87</a></div></div>
<div class="ttc" id="avp9recon_8c_html_a82defdd282052c1fbe3c7c651337c8a0"><div class="ttname"><a href="vp9recon_8c.html#a82defdd282052c1fbe3c7c651337c8a0">scale_mv</a></div><div class="ttdeci">#define scale_mv(n, dim)</div></div>
<div class="ttc" id="avp9_8h_html_afb98eb066ec19071c75e37a8bbccaedfa2b87d07c19e7ba008980585f5618aff6"><div class="ttname"><a href="vp9_8h.html#afb98eb066ec19071c75e37a8bbccaedfa2b87d07c19e7ba008980585f5618aff6">TX_4X4</a></div><div class="ttdeci">@ TX_4X4</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00028">vp9.h:28</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="aundefined_8txt_html_ad99f336d4c117c453fef82993434eb4d"><div class="ttname"><a href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a></div><div class="ttdeci">The reader does not expect b to be semantically here and if the code is changed by maybe adding a a division or other the signedness will almost certainly be mistaken To avoid this confusion a new type was SUINT is the C unsigned type but it holds a signed int to use the same example SUINT a</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00041">undefined.txt:41</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1e71ce60cedd5f3b6811714a9f7f9e0a"><div class="ttname"><a href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">AVFrame::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="aregdef_8h_html_a13d252428836cb17e8183d427299d370"><div class="ttname"><a href="regdef_8h.html#a13d252428836cb17e8183d427299d370">th</a></div><div class="ttdeci">#define th</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00075">regdef.h:75</a></div></div>
<div class="ttc" id="avp9recon_8c_html_a13ccc4c92e642d86f2dd36bfe271154b"><div class="ttname"><a href="vp9recon_8c.html#a13ccc4c92e642d86f2dd36bfe271154b">mc_chroma_unscaled</a></div><div class="ttdeci">static av_always_inline void mc_chroma_unscaled(VP9TileData *td, vp9_mc_func(*mc)[2], uint8_t *dst_u, uint8_t *dst_v, ptrdiff_t dst_stride, const uint8_t *ref_u, ptrdiff_t src_stride_u, const uint8_t *ref_v, ptrdiff_t src_stride_v, ThreadFrame *ref_frame, ptrdiff_t y, ptrdiff_t x, const VP56mv *mv, int bw, int bh, int w, int h, int bytesperpixel)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00334">vp9recon.c:334</a></div></div>
<div class="ttc" id="aavassert_8h_html_a2764bf422e4df5bf3aac652f21fe780a"><div class="ttname"><a href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a></div><div class="ttdeci">#define av_assert2(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00064">avassert.h:64</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aecae75e941928a27c27ec75b2fd502b3c48"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecae75e941928a27c27ec75b2fd502b3c48">DC_129_PRED</a></div><div class="ttdeci">@ DC_129_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00060">vp9.h:60</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="avp9data_8c_html_a0d24d6d2f70eab2a63745889584df486"><div class="ttname"><a href="vp9data_8c.html#a0d24d6d2f70eab2a63745889584df486">ff_vp9_intra_txfm_type</a></div><div class="ttdeci">enum TxfmType ff_vp9_intra_txfm_type[14]</div><div class="ttdef"><b>Definition:</b> <a href="vp9data_8c_source.html#l00334">vp9data.c:437</a></div></div>
<div class="ttc" id="aattributes_8h_html_a28f50f4c125959216885f01d56dbe866"><div class="ttname"><a href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a></div><div class="ttdeci">#define av_always_inline</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00049">attributes.h:49</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="astruct_thread_frame_html"><div class="ttname"><a href="struct_thread_frame.html">ThreadFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2thread_8h_source.html#l00034">thread.h:34</a></div></div>
<div class="ttc" id="avp9recon_8c_html_ad7b5f7c87417694391b7dbf95d75419e"><div class="ttname"><a href="vp9recon_8c.html#ad7b5f7c87417694391b7dbf95d75419e">mc_luma_scaled</a></div><div class="ttdeci">static av_always_inline void mc_luma_scaled(VP9TileData *td, vp9_scaled_mc_func smc, vp9_mc_func(*mc)[2], uint8_t *dst, ptrdiff_t dst_stride, const uint8_t *ref, ptrdiff_t ref_stride, ThreadFrame *ref_frame, ptrdiff_t y, ptrdiff_t x, const VP56mv *in_mv, int px, int py, int pw, int ph, int bw, int bh, int w, int h, int bytesperpixel, const uint16_t *scale, const uint8_t *step)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00406">vp9recon.c:406</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="astruct_v_p56mv_html"><div class="ttname"><a href="struct_v_p56mv.html">VP56mv</a></div><div class="ttdef"><b>Definition:</b> <a href="vp56_8h_source.html#l00066">vp56.h:66</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca2ef6e147229d049339a3b6d80c3d72b9"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca2ef6e147229d049339a3b6d80c3d72b9">HOR_UP_PRED</a></div><div class="ttdeci">@ HOR_UP_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00054">vp9.h:54</a></div></div>
<div class="ttc" id="aebur128_8h_html_a1a6b6fb557d8d37d59700faf4e4c9167"><div class="ttname"><a href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> <a href="ebur128_8h_source.html#l00083">ebur128.h:83</a></div></div>
<div class="ttc" id="avp9data_8c_html_a57a11a759fcfe35724435214f142ad20"><div class="ttname"><a href="vp9data_8c.html#a57a11a759fcfe35724435214f142ad20">ff_vp9_bwh_tab</a></div><div class="ttdeci">const uint8_t ff_vp9_bwh_tab[2][N_BS_SIZES][2]</div><div class="ttdef"><b>Definition:</b> <a href="vp9data_8c_source.html#l00025">vp9data.c:25</a></div></div>
<div class="ttc" id="astruct_v_p9_block_html"><div class="ttname"><a href="struct_v_p9_block.html">VP9Block</a></div><div class="ttdef"><b>Definition:</b> <a href="vp9dec_8h_source.html#l00081">vp9dec.h:81</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a57f0352b91eafb6ee4fa7b4bee5422de"><div class="ttname"><a href="intreadwrite_8h.html#a57f0352b91eafb6ee4fa7b4bee5422de">AV_RN16A</a></div><div class="ttdeci">#define AV_RN16A(p)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00522">intreadwrite.h:522</a></div></div>
<div class="ttc" id="avp9dsp_8h_html_a3e27a69afc3248cba7574b82a8cdbd8f"><div class="ttname"><a href="vp9dsp_8h.html#a3e27a69afc3248cba7574b82a8cdbd8f">vp9_mc_func</a></div><div class="ttdeci">void(* vp9_mc_func)(uint8_t *dst, ptrdiff_t dst_stride, const uint8_t *ref, ptrdiff_t ref_stride, int h, int mx, int my)</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp_8h_source.html#l00032">vp9dsp.h:32</a></div></div>
<div class="ttc" id="atests_2jpeg2000dwt_8c_html_a5cabdd8be5af41f675fed06498e094b7"><div class="ttname"><a href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a></div><div class="ttdeci">static int ref[MAX_W *MAX_W]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2jpeg2000dwt_8c_source.html#l00107">jpeg2000dwt.c:107</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aecabaf22a735ce5367d66dd63f905db8d3f"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aecabaf22a735ce5367d66dd63f905db8d3f">HOR_DOWN_PRED</a></div><div class="ttdeci">@ HOR_DOWN_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00052">vp9.h:52</a></div></div>
<div class="ttc" id="avp9dec_8h_html"><div class="ttname"><a href="vp9dec_8h.html">vp9dec.h</a></div></div>
<div class="ttc" id="avp9shared_8h_html_ab9bfd73cb47bb2696e44f8154450b6fe"><div class="ttname"><a href="vp9shared_8h.html#ab9bfd73cb47bb2696e44f8154450b6fe">CUR_FRAME</a></div><div class="ttdeci">#define CUR_FRAME</div><div class="ttdef"><b>Definition:</b> <a href="vp9shared_8h_source.html#l00163">vp9shared.h:163</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca0d7b795eb0f328fe31b2f4ff3441d70f"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca0d7b795eb0f328fe31b2f4ff3441d70f">TOP_DC_PRED</a></div><div class="ttdeci">@ TOP_DC_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00057">vp9.h:57</a></div></div>
<div class="ttc" id="avideodsp_8h_html"><div class="ttname"><a href="videodsp_8h.html">videodsp.h</a></div></div>
<div class="ttc" id="avp9_8h_html_a59fe1b30a50c6a1d90c35cb53e8c0aeca58d49f2441b6434f266f6927ce1c420b"><div class="ttname"><a href="vp9_8h.html#a59fe1b30a50c6a1d90c35cb53e8c0aeca58d49f2441b6434f266f6927ce1c420b">DIAG_DOWN_LEFT_PRED</a></div><div class="ttdeci">@ DIAG_DOWN_LEFT_PRED</div><div class="ttdef"><b>Definition:</b> <a href="vp9_8h_source.html#l00049">vp9.h:49</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="avp9recon_8c_html_a72e3b3c6c4d98578f83c9c9f35513a00"><div class="ttname"><a href="vp9recon_8c.html#a72e3b3c6c4d98578f83c9c9f35513a00">memset_bpp</a></div><div class="ttdeci">#define memset_bpp(c, i1, v, i2, num)</div></div>
<div class="ttc" id="avp9recon_8c_html_a86482d59dc033262600e96a5c6550943"><div class="ttname"><a href="vp9recon_8c.html#a86482d59dc033262600e96a5c6550943">ff_vp9_inter_recon_8bpp</a></div><div class="ttdeci">void ff_vp9_inter_recon_8bpp(VP9TileData *td)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00646">vp9recon.c:646</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a383804ed89972f458d08d83cbc3029e0"><div class="ttname"><a href="libavutil_2internal_8h.html#a383804ed89972f458d08d83cbc3029e0">LOCAL_ALIGNED_32</a></div><div class="ttdeci">#define LOCAL_ALIGNED_32(t, v,...)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00137">internal.h:137</a></div></div>
<div class="ttc" id="avp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="avp9recon_8c_html_a88ac3d0f6edb21d279472e0bdd3e05ba"><div class="ttname"><a href="vp9recon_8c.html#a88ac3d0f6edb21d279472e0bdd3e05ba">intra_recon</a></div><div class="ttdeci">static av_always_inline void intra_recon(VP9TileData *td, ptrdiff_t y_off, ptrdiff_t uv_off, int bytesperpixel)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00218">vp9recon.c:218</a></div></div>
<div class="ttc" id="avp9recon_8c_html_ad8f98e656fd4835a409634a825e55f7e"><div class="ttname"><a href="vp9recon_8c.html#ad8f98e656fd4835a409634a825e55f7e">ff_vp9_intra_recon_8bpp</a></div><div class="ttdeci">void ff_vp9_intra_recon_8bpp(VP9TileData *td, ptrdiff_t y_off, ptrdiff_t uv_off)</div><div class="ttdef"><b>Definition:</b> <a href="vp9recon_8c_source.html#l00288">vp9recon.c:288</a></div></div>
<div class="ttc" id="avf__colormatrix_8c_html_a1d186814fab3cde25d43ffbfe151487f"><div class="ttname"><a href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a></div><div class="ttdeci">#define mc</div><div class="ttdef"><b>Definition:</b> <a href="vf__colormatrix_8c_source.html#l00102">vf_colormatrix.c:102</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
