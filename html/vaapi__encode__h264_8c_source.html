<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/vaapi_encode_h264.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">vaapi_encode_h264.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="vaapi__encode__h264_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;va/va.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;va/va_enc_h264.h&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">libavutil/common.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">libavutil/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cbs_8h.html">cbs.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cbs__h264_8h.html">cbs_h264.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264_8h.html">h264.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264__levels_8h.html">h264_levels.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264__sei_8h.html">h264_sei.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vaapi__encode_8h.html">vaapi_encode.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">enum</span> {</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">   39</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">SEI_TIMING</a>         = 0x01,</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3">   40</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3">SEI_IDENTIFIER</a>     = 0x02,</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba754d87f1bfd9ebdff42d90c98cff764a">   41</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba754d87f1bfd9ebdff42d90c98cff764a">SEI_RECOVERY_POINT</a> = 0x04,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;};</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// Random (version 4) ISO 11578 UUID.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a7fb8a6a0e4cc7738b70c73a446d090d5">   45</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="vaapi__encode__h264_8c.html#a7fb8a6a0e4cc7738b70c73a446d090d5">vaapi_encode_h264_sei_identifier_uuid</a>[16] = {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    0x59, 0x94, 0x8b, 0x28, 0x11, 0xec, 0x45, 0xaf,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    0x96, 0x75, 0x19, 0xd4, 0x1f, 0xea, 0xa9, 0x4d,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;};</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_picture.html">   50</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html">VAAPIEncodeH264Picture</a> {</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">   51</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">   52</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_picture.html#a6f723213a2606427379e4c5e584b3a42">   54</a></span>&#160;    int64_t <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a6f723213a2606427379e4c5e584b3a42">last_idr_frame</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_picture.html#ae2fd63e8c8340b47f3c54a3d6220a3b6">   55</a></span>&#160;    uint16_t <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ae2fd63e8c8340b47f3c54a3d6220a3b6">idr_pic_id</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_picture.html#a5ebbd617148d0a0c8b945b06d33ac39f">   57</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a5ebbd617148d0a0c8b945b06d33ac39f">primary_pic_type</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_picture.html#a38075cfa84242ecfccca88a571dbb132">   58</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a38075cfa84242ecfccca88a571dbb132">slice_type</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_picture.html#a3388f8fa298e2c0a7cf1b3d8c8f752a4">   60</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a3388f8fa298e2c0a7cf1b3d8c8f752a4">cpb_delay</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_picture.html#a1a32bab80a15cffb2b1531ae16e9559f">   61</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a1a32bab80a15cffb2b1531ae16e9559f">dpb_delay</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a0f2f7eab693c3eb986542b62fb534e4e">   62</a></span>&#160;} <a class="code" href="vaapi__encode__h264_8c.html#a0f2f7eab693c3eb986542b62fb534e4e">VAAPIEncodeH264Picture</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html">   64</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a> {</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a1b765286d6f6cece0689584917515365">   65</a></span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_context.html">VAAPIEncodeContext</a> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a1b765286d6f6cece0689584917515365">common</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// User options.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a2d75a9fdf64581d998c2ded626ec3d7d">   68</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a2d75a9fdf64581d998c2ded626ec3d7d">qp</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a031628f5cee134074b409a835f3833c1">   69</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a031628f5cee134074b409a835f3833c1">quality</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#ab70e9ab7351da221b8c769b67c0ab47a">   70</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ab70e9ab7351da221b8c769b67c0ab47a">coder</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a4d675b30e23806f0e355f97b42889ad4">   71</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a4d675b30e23806f0e355f97b42889ad4">aud</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#ae55e10eec4d9eb34512be96f630a7f82">   72</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae55e10eec4d9eb34512be96f630a7f82">sei</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a5db5b340a711eabb33db0f5ea279bafd">   73</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a5db5b340a711eabb33db0f5ea279bafd">profile</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a47a594ad119b9cd71947f02d655fe8de">   74</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a47a594ad119b9cd71947f02d655fe8de">level</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// Derived settings.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#aa119dd6b0cbec47b83cc0a4bd91b4771">   77</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aa119dd6b0cbec47b83cc0a4bd91b4771">mb_width</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#aec3ef055d4ee1fc29eaeb93da5c5442e">   78</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aec3ef055d4ee1fc29eaeb93da5c5442e">mb_height</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#af015864e1cc8d3844d83def92ad2e158">   80</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#af015864e1cc8d3844d83def92ad2e158">fixed_qp_idr</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">   81</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">fixed_qp_p</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#aeb5b431bc6374592dd6a8aeffc3be4b6">   82</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aeb5b431bc6374592dd6a8aeffc3be4b6">fixed_qp_b</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a0ba4a3a26efa17546e15e5f12b30fd3e">   84</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0ba4a3a26efa17546e15e5f12b30fd3e">dpb_frames</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// Writer structures.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#afaa0e64941b5672a0ada3d5bc29bf2a2">   87</a></span>&#160;    <a class="code" href="struct_coded_bitstream_context.html">CodedBitstreamContext</a> *<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#afaa0e64941b5672a0ada3d5bc29bf2a2">cbc</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#ac3287a57a3209ae7198040fe3a1f0568">   88</a></span>&#160;    <a class="code" href="struct_coded_bitstream_fragment.html">CodedBitstreamFragment</a> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ac3287a57a3209ae7198040fe3a1f0568">current_access_unit</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#ae49687a0c1f509270dc1faad777fbff3">   90</a></span>&#160;    <a class="code" href="struct_h264_raw_a_u_d.html">H264RawAUD</a>   <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae49687a0c1f509270dc1faad777fbff3">raw_aud</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a3bd8c19054273e701494b69ad11c0462">   91</a></span>&#160;    <a class="code" href="struct_h264_raw_s_p_s.html">H264RawSPS</a>   <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3bd8c19054273e701494b69ad11c0462">raw_sps</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a763f5346f558c505776b3934a74907a9">   92</a></span>&#160;    <a class="code" href="struct_h264_raw_p_p_s.html">H264RawPPS</a>   <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a763f5346f558c505776b3934a74907a9">raw_pps</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#ae54604ec451cc4578669a1fc98a264dc">   93</a></span>&#160;    <a class="code" href="struct_h264_raw_s_e_i.html">H264RawSEI</a>   <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae54604ec451cc4578669a1fc98a264dc">raw_sei</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a5df6bdb61bd08abf20c5fb1c9a2756a6">   94</a></span>&#160;    <a class="code" href="struct_h264_raw_slice.html">H264RawSlice</a> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a5df6bdb61bd08abf20c5fb1c9a2756a6">raw_slice</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#ae53c00cf9e51297871ad4aed4d176d8b">   96</a></span>&#160;    <a class="code" href="struct_h264_raw_s_e_i_buffering_period.html">H264RawSEIBufferingPeriod</a>      <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae53c00cf9e51297871ad4aed4d176d8b">sei_buffering_period</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a679cfd4b2525d2c74cf3736733ca8911">   97</a></span>&#160;    <a class="code" href="struct_h264_raw_s_e_i_pic_timing.html">H264RawSEIPicTiming</a>            <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a679cfd4b2525d2c74cf3736733ca8911">sei_pic_timing</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a9343bf8e5072f036f59d6c225b8bed27">   98</a></span>&#160;    <a class="code" href="struct_h264_raw_s_e_i_recovery_point.html">H264RawSEIRecoveryPoint</a>        <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a9343bf8e5072f036f59d6c225b8bed27">sei_recovery_point</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a3a527ca297adcca8023fc2fc80cc46f4">   99</a></span>&#160;    <a class="code" href="struct_h264_raw_s_e_i_user_data_unregistered.html">H264RawSEIUserDataUnregistered</a> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3a527ca297adcca8023fc2fc80cc46f4">sei_identifier</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a0d39bf75ecc061610664d07dfdfa71af">  100</a></span>&#160;    <span class="keywordtype">char</span>                          *<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0d39bf75ecc061610664d07dfdfa71af">sei_identifier_string</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">  102</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">aud_needed</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">  103</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="struct_v_a_a_p_i_encode_h264_context.html#ad30cbc039cacbceb6ccc9621c5b2f288">  104</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ad30cbc039cacbceb6ccc9621c5b2f288">sei_cbr_workaround_needed</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#ad9167b04e7bc7006d170280e7c222382">  105</a></span>&#160;} <a class="code" href="vaapi__encode__h264_8c.html#ad9167b04e7bc7006d170280e7c222382">VAAPIEncodeH264Context</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#af7c5db5c664a1ac29073f1e933c4e854">  108</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#af7c5db5c664a1ac29073f1e933c4e854">vaapi_encode_h264_write_access_unit</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                               <span class="keywordtype">char</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">size_t</span> *data_len,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                               <a class="code" href="struct_coded_bitstream_fragment.html">CodedBitstreamFragment</a> *au)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a> *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    err = <a class="code" href="cbs_8c.html#ab102e392bf66ea81fd4ab660d0eb1a55">ff_cbs_write_fragment_data</a>(priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#afaa0e64941b5672a0ada3d5bc29bf2a2">cbc</a>, au);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to write packed header.\n&quot;</span>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (*data_len &lt; 8 * au-&gt;data_size - au-&gt;<a class="code" href="struct_coded_bitstream_fragment.html#a7eb062e0098963ca1f0734ecf97f6d2b">data_bit_padding</a>) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Access unit too large: &quot;</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;               <span class="stringliteral">&quot;%zu &lt; %zu.\n&quot;</span>, *data_len,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;               8 * au-&gt;<a class="code" href="struct_coded_bitstream_fragment.html#abc4ae0aacd4ad9726b85446629e5ddba">data_size</a> - au-&gt;<a class="code" href="struct_coded_bitstream_fragment.html#a7eb062e0098963ca1f0734ecf97f6d2b">data_bit_padding</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOSPC);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    memcpy(<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, au-&gt;<a class="code" href="struct_coded_bitstream_fragment.html#ac13b60257e4932c7ca183b29a7581bb4">data</a>, au-&gt;<a class="code" href="struct_coded_bitstream_fragment.html#abc4ae0aacd4ad9726b85446629e5ddba">data_size</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    *data_len = 8 * au-&gt;<a class="code" href="struct_coded_bitstream_fragment.html#abc4ae0aacd4ad9726b85446629e5ddba">data_size</a> - au-&gt;<a class="code" href="struct_coded_bitstream_fragment.html#a7eb062e0098963ca1f0734ecf97f6d2b">data_bit_padding</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">  134</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">vaapi_encode_h264_add_nal</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                     <a class="code" href="struct_coded_bitstream_fragment.html">CodedBitstreamFragment</a> *au,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                                     <span class="keywordtype">void</span> *nal_unit)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="struct_h264_raw_n_a_l_unit_header.html">H264RawNALUnitHeader</a> *<a class="code" href="sdr2_8c.html#abd18f6ed7dc5da8824a97bc504e4280e">header</a> = nal_unit;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    err = <a class="code" href="cbs_8c.html#a7407231caba0bf0ebde5ae921f81948d">ff_cbs_insert_unit_content</a>(au, -1,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                     <a class="code" href="sdr2_8c.html#abd18f6ed7dc5da8824a97bc504e4280e">header</a>-&gt;nal_unit_type, nal_unit, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to add NAL unit: &quot;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;               <span class="stringliteral">&quot;type = %d.\n&quot;</span>, <a class="code" href="sdr2_8c.html#abd18f6ed7dc5da8824a97bc504e4280e">header</a>-&gt;nal_unit_type);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a1ffc305ab4e3f95c8d9529fe2658f070">  152</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#a1ffc305ab4e3f95c8d9529fe2658f070">vaapi_encode_h264_write_sequence_header</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                                                   <span class="keywordtype">char</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">size_t</span> *data_len)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a> *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="struct_coded_bitstream_fragment.html">CodedBitstreamFragment</a>   *au = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ac3287a57a3209ae7198040fe3a1f0568">current_access_unit</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">aud_needed</a>) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        err = <a class="code" href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">vaapi_encode_h264_add_nal</a>(avctx, au, &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae49687a0c1f509270dc1faad777fbff3">raw_aud</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">aud_needed</a> = 0;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    err = <a class="code" href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">vaapi_encode_h264_add_nal</a>(avctx, au, &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3bd8c19054273e701494b69ad11c0462">raw_sps</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    err = <a class="code" href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">vaapi_encode_h264_add_nal</a>(avctx, au, &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a763f5346f558c505776b3934a74907a9">raw_pps</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    err = <a class="code" href="vaapi__encode__h264_8c.html#af7c5db5c664a1ac29073f1e933c4e854">vaapi_encode_h264_write_access_unit</a>(avctx, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, data_len, au);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="cbs_8c.html#aaa28071334c4823ab5d299a458c06070">ff_cbs_fragment_reset</a>(au);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a4afc9160be1e21ac23122f74333b83b1">  180</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#a4afc9160be1e21ac23122f74333b83b1">vaapi_encode_h264_write_slice_header</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                                <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> *pic,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                                <a class="code" href="struct_v_a_a_p_i_encode_slice.html">VAAPIEncodeSlice</a> *slice,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                                <span class="keywordtype">char</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">size_t</span> *data_len)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a> *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="struct_coded_bitstream_fragment.html">CodedBitstreamFragment</a>   *au = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ac3287a57a3209ae7198040fe3a1f0568">current_access_unit</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">aud_needed</a>) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        err = <a class="code" href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">vaapi_encode_h264_add_nal</a>(avctx, au, &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae49687a0c1f509270dc1faad777fbff3">raw_aud</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">aud_needed</a> = 0;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    err = <a class="code" href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">vaapi_encode_h264_add_nal</a>(avctx, au, &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a5df6bdb61bd08abf20c5fb1c9a2756a6">raw_slice</a>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    err = <a class="code" href="vaapi__encode__h264_8c.html#af7c5db5c664a1ac29073f1e933c4e854">vaapi_encode_h264_write_access_unit</a>(avctx, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, data_len, au);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="cbs_8c.html#aaa28071334c4823ab5d299a458c06070">ff_cbs_fragment_reset</a>(au);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#ace3b5d98e4c9458d680e62562a2176a8">  206</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#ace3b5d98e4c9458d680e62562a2176a8">vaapi_encode_h264_write_extra_header</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                                <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> *pic,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                                <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <span class="keywordtype">int</span> *<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>,</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                                <span class="keywordtype">char</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">size_t</span> *data_len)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a> *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="struct_coded_bitstream_fragment.html">CodedBitstreamFragment</a>   *au = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ac3287a57a3209ae7198040fe3a1f0568">current_access_unit</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">int</span> err, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a>) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="struct_h264_raw_s_e_i.html">H264RawSEI</a> *<a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a> = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae54604ec451cc4578669a1fc98a264dc">raw_sei</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">aud_needed</a>) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            err = <a class="code" href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">vaapi_encode_h264_add_nal</a>(avctx, au, &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae49687a0c1f509270dc1faad777fbff3">raw_aud</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">aud_needed</a> = 0;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        *<a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a> = (<a class="code" href="cbs__h264_8h.html#aea0f09a092659f3d390b796890d1df03">H264RawSEI</a>) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            .nal_unit_header = {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                .nal_unit_type = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae3091622b1b99e74d09b16673e98b1d0">H264_NAL_SEI</a>,</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            },</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        };</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a> &amp; <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3">SEI_IDENTIFIER</a>) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].payload_type = <a class="code" href="h264__sei_8h.html#a3b0ca74529cda763a8cc0848fcaf04fdae1ab6064907797caf937da4507d3ab11">H264_SEI_TYPE_USER_DATA_UNREGISTERED</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].payload.user_data_unregistered = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3a527ca297adcca8023fc2fc80cc46f4">sei_identifier</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            ++<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a> &amp; <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">SEI_TIMING</a>) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ab56d9a8ef94cff8f64aff4c9f115503a">PICTURE_TYPE_IDR</a>) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].payload_type = <a class="code" href="h264__sei_8h.html#a3b0ca74529cda763a8cc0848fcaf04fda097244dd42e69481e2f18330835b25c4">H264_SEI_TYPE_BUFFERING_PERIOD</a>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].payload.buffering_period = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae53c00cf9e51297871ad4aed4d176d8b">sei_buffering_period</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                ++<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].payload_type = <a class="code" href="h264__sei_8h.html#a3b0ca74529cda763a8cc0848fcaf04fda04bbc7fb504a0eee46500e764c357c6b">H264_SEI_TYPE_PIC_TIMING</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].payload.pic_timing = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a679cfd4b2525d2c74cf3736733ca8911">sei_pic_timing</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            ++<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a> &amp; <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba754d87f1bfd9ebdff42d90c98cff764a">SEI_RECOVERY_POINT</a>) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].payload_type = <a class="code" href="h264__sei_8h.html#a3b0ca74529cda763a8cc0848fcaf04fda8e1e9cb874f69ced6089468c4d088071">H264_SEI_TYPE_RECOVERY_POINT</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].payload.recovery_point = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a9343bf8e5072f036f59d6c225b8bed27">sei_recovery_point</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            ++<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload_count = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>-&gt;payload_count &gt; 0);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        err = <a class="code" href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">vaapi_encode_h264_add_nal</a>(avctx, au, <a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a> = 0;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        err = <a class="code" href="vaapi__encode__h264_8c.html#af7c5db5c664a1ac29073f1e933c4e854">vaapi_encode_h264_write_access_unit</a>(avctx, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, data_len, au);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="cbs_8c.html#aaa28071334c4823ab5d299a458c06070">ff_cbs_fragment_reset</a>(au);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        *<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = VAEncPackedHeaderRawData;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#if !CONFIG_VAAPI_1</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ad30cbc039cacbceb6ccc9621c5b2f288">sei_cbr_workaround_needed</a>) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment">// Insert a zero-length header using the old SEI type.  This is</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// required to avoid triggering broken behaviour on Intel platforms</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">// in CBR mode where an invalid SEI message is generated by the</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="comment">// driver and inserted into the stream.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        *data_len = 0;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        *<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = VAEncPackedHeaderH264_SEI;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ad30cbc039cacbceb6ccc9621c5b2f288">sei_cbr_workaround_needed</a> = 0;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="cbs_8c.html#aaa28071334c4823ab5d299a458c06070">ff_cbs_fragment_reset</a>(au);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a5f40686681633cf85e60157d7049bb64">  292</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#a5f40686681633cf85e60157d7049bb64">vaapi_encode_h264_init_sequence_params</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_context.html">VAAPIEncodeContext</a>                *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a>           *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="struct_h264_raw_s_p_s.html">H264RawSPS</a>                        *<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a> = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3bd8c19054273e701494b69ad11c0462">raw_sps</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="struct_h264_raw_p_p_s.html">H264RawPPS</a>                        *<a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a> = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a763f5346f558c505776b3934a74907a9">raw_pps</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    VAEncSequenceParameterBufferH264 *vseq = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;codec_sequence_params;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    VAEncPictureParameterBufferH264  *vpic = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;codec_picture_params;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    memset(<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>, 0, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>));</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    memset(<a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>, 0, <span class="keyword">sizeof</span>(*<a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>));</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;nal_unit_header.nal_ref_idc   = 3;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;nal_unit_header.nal_unit_type = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9b569b7bafbb864fe260d3b84ad78387">H264_NAL_SPS</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> &amp; 0xff;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> == <a class="code" href="avcodec_8h.html#a9467289beec698b363d7319e454c351e">FF_PROFILE_H264_CONSTRAINED_BASELINE</a> ||</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> == <a class="code" href="avcodec_8h.html#aa7d7e490128673e7747bb32ba7ea5486">FF_PROFILE_H264_MAIN</a>)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;constraint_set1_flag = 1;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> == <a class="code" href="avcodec_8h.html#a0ff6fe9cf1f7a1671d597b9524024332">FF_PROFILE_H264_HIGH</a>)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;constraint_set3_flag = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;gop_size == 1;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> == <a class="code" href="avcodec_8h.html#aa7d7e490128673e7747bb32ba7ea5486">FF_PROFILE_H264_MAIN</a> ||</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> == <a class="code" href="avcodec_8h.html#a0ff6fe9cf1f7a1671d597b9524024332">FF_PROFILE_H264_HIGH</a>) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;constraint_set4_flag = 1;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;constraint_set5_flag = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;b_per_p == 0;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;gop_size == 1)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0ba4a3a26efa17546e15e5f12b30fd3e">dpb_frames</a> = 0;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0ba4a3a26efa17546e15e5f12b30fd3e">dpb_frames</a> = 1 + <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_b_depth;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a> != <a class="code" href="avcodec_8h.html#a84a993ea19afa2cbda45b3283a598fe6">FF_LEVEL_UNKNOWN</a>) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;level_idc = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_h264_level_descriptor.html">H264LevelDescriptor</a> *<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="tests_2h264__levels_8c.html#a0e35b8d74e1ac59b82f506293654d26d">framerate</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &gt; 0 &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &gt; 0)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <a class="code" href="tests_2h264__levels_8c.html#a0e35b8d74e1ac59b82f506293654d26d">framerate</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> / avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <a class="code" href="tests_2h264__levels_8c.html#a0e35b8d74e1ac59b82f506293654d26d">framerate</a> = 0;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="h264__levels_8c.html#af7d0096e87ed51a278d9f99dd9d38f86">ff_h264_guess_level</a>(<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6b53fda85ad61baa345edbd96cb8a33c">bit_rate</a>,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                    <a class="code" href="tests_2h264__levels_8c.html#a0e35b8d74e1ac59b82f506293654d26d">framerate</a>,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                    priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aa119dd6b0cbec47b83cc0a4bd91b4771">mb_width</a>  * 16,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                    priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aec3ef055d4ee1fc29eaeb93da5c5442e">mb_height</a> * 16,</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                    priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0ba4a3a26efa17546e15e5f12b30fd3e">dpb_frames</a>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Using level %s.\n&quot;</span>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>-&gt;name);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>-&gt;constraint_set3_flag)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;constraint_set3_flag = 1;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;level_idc = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>-&gt;level_idc;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Stream will not conform &quot;</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                   <span class="stringliteral">&quot;to any level: using level 6.2.\n&quot;</span>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;level_idc = 62;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;seq_parameter_set_id = 0;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;chroma_format_idc    = 1;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;log2_max_frame_num_minus4 = 4;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;pic_order_cnt_type        = 0;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;log2_max_pic_order_cnt_lsb_minus4 = 4;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;max_num_ref_frames = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0ba4a3a26efa17546e15e5f12b30fd3e">dpb_frames</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;pic_width_in_mbs_minus1        = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aa119dd6b0cbec47b83cc0a4bd91b4771">mb_width</a>  - 1;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;pic_height_in_map_units_minus1 = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aec3ef055d4ee1fc29eaeb93da5c5442e">mb_height</a> - 1;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_mbs_only_flag = 1;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;direct_8x8_inference_flag = 1;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>  != 16 * priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aa119dd6b0cbec47b83cc0a4bd91b4771">mb_width</a> ||</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> != 16 * priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aec3ef055d4ee1fc29eaeb93da5c5442e">mb_height</a>) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_cropping_flag = 1;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_crop_left_offset   = 0;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_crop_right_offset  =</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            (16 * priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aa119dd6b0cbec47b83cc0a4bd91b4771">mb_width</a> - avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>) / 2;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_crop_top_offset    = 0;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_crop_bottom_offset =</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            (16 * priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aec3ef055d4ee1fc29eaeb93da5c5442e">mb_height</a> - avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>) / 2;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_cropping_flag = 0;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui_parameters_present_flag = 1;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> != 0 &amp;&amp;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> != 0) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_rational.html">AVRational</a> sar_idc[] = {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            {   0,  0 },</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            {   1,  1 }, {  12, 11 }, {  10, 11 }, {  16, 11 },</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            {  40, 33 }, {  24, 11 }, {  20, 11 }, {  32, 11 },</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            {  80, 33 }, {  18, 11 }, {  15, 11 }, {  64, 33 },</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            { 160, 99 }, {   4,  3 }, {   3,  2 }, {   2,  1 },</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        };</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordtype">int</span> num, den, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;num, &amp;den, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                  avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, 65535);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(sar_idc); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">if</span> (num == sar_idc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].num &amp;&amp;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                den == sar_idc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].den) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.aspect_ratio_idc = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(sar_idc)) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.aspect_ratio_idc = 255;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.sar_width  = num;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.sar_height = den;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.aspect_ratio_info_present_flag = 1;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// Unspecified video format, from table E-2.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.video_format             = 5;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.video_full_range_flag    =</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a> == <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.colour_primaries         = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.transfer_characteristics = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">color_trc</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.matrix_coefficients      = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a> != <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942">AVCOL_PRI_UNSPECIFIED</a> ||</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">color_trc</a>       != <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab">AVCOL_TRC_UNSPECIFIED</a> ||</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a>      != <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2">AVCOL_SPC_UNSPECIFIED</a>)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.colour_description_present_flag = 1;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a>     != <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aaa374becbc2b5ee0bc1886048d151ea3e">AVCOL_RANGE_UNSPECIFIED</a> ||</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.colour_description_present_flag)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.video_signal_type_present_flag = 1;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">chroma_sample_location</a> != <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffafd1c2fae7783c113d76a017c6e7b638f">AVCHROMA_LOC_UNSPECIFIED</a>) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.chroma_loc_info_present_flag = 1;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.chroma_sample_loc_type_top_field    =</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.chroma_sample_loc_type_bottom_field =</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">chroma_sample_location</a> - 1;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.timing_info_present_flag = 1;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &gt; 0 &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &gt; 0) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.num_units_in_tick = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.time_scale        = 2 * avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.fixed_frame_rate_flag = 1;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.num_units_in_tick = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.time_scale        = 2 * avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.fixed_frame_rate_flag = 0;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae55e10eec4d9eb34512be96f630a7f82">sei</a> &amp; <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">SEI_TIMING</a>) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="struct_h264_raw_h_r_d.html">H264RawHRD</a> *hrd = &amp;<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.nal_hrd_parameters;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <a class="code" href="struct_h264_raw_s_e_i_buffering_period.html">H264RawSEIBufferingPeriod</a> *bp = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae53c00cf9e51297871ad4aed4d176d8b">sei_buffering_period</a>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.nal_hrd_parameters_present_flag = 1;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#afc0f159afa4a21500b456d9551e14804">cpb_cnt_minus1</a> = 0;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="comment">// Try to scale these to a sensible range so that the</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">// golomb encode of the value is not overlong.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#a2123cfc447a03c68fa782c5c32dd637c">bit_rate_scale</a> =</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            av_clip_uintp2(<a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;va_bit_rate) - 15 - 6, 4);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#a8535a822b9ef155d8b1d66b085d10492">bit_rate_value_minus1</a>[0] =</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;va_bit_rate &gt;&gt; hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#a2123cfc447a03c68fa782c5c32dd637c">bit_rate_scale</a> + 6) - 1;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#ae97a505a03f0c5a469c69e821c3e1521">cpb_size_scale</a> =</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            av_clip_uintp2(<a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hrd_params.buffer_size) - 15 - 4, 4);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#a88024f18cf21eef310c148ef2882f37b">cpb_size_value_minus1</a>[0] =</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hrd_params.buffer_size &gt;&gt; hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#ae97a505a03f0c5a469c69e821c3e1521">cpb_size_scale</a> + 4) - 1;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">// CBR mode as defined for the HRD cannot be achieved without filler</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="comment">// data, so this flag cannot be set even with VAAPI CBR modes.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#a3ce49f07a42957c3d2fcaa75f7d5d495">cbr_flag</a>[0] = 0;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#ad17c77d0bf8a698870bc22b10d14026b">initial_cpb_removal_delay_length_minus1</a> = 23;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#ac0a8ac4fc71d29eac10b802c681099df">cpb_removal_delay_length_minus1</a>         = 23;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#a2b18e0bc09e768d7ffb2b0994780cfd1">dpb_output_delay_length_minus1</a>          = 7;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        hrd-&gt;<a class="code" href="struct_h264_raw_h_r_d.html#a2dab8b52eb5d456abe414acccd8caaa3">time_offset_length</a>                      = 0;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        bp-&gt;<a class="code" href="struct_h264_raw_s_e_i_buffering_period.html#a8fba9bb1c1f658303776e8b130ee6c2e">seq_parameter_set_id</a> = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;seq_parameter_set_id;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// This calculation can easily overflow 32 bits.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        bp-&gt;<a class="code" href="struct_h264_raw_s_e_i_buffering_period.html#a0ab71e708243a70b127edcb6b628dbe3">nal</a>.<a class="code" href="struct_h264_raw_s_e_i_buffering_period.html#ab6b444bc73e0b173d1714566fc7264ad">initial_cpb_removal_delay</a>[0] = 90000 *</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            (uint64_t)<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hrd_params.initial_buffer_fullness /</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hrd_params.buffer_size;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        bp-&gt;<a class="code" href="struct_h264_raw_s_e_i_buffering_period.html#a0ab71e708243a70b127edcb6b628dbe3">nal</a>.<a class="code" href="struct_h264_raw_s_e_i_buffering_period.html#ab448642b4e7598a6016fb885c5ebaf59">initial_cpb_removal_delay_offset</a>[0] = 0;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.nal_hrd_parameters_present_flag = 0;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.low_delay_hrd_flag = 1 - <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.fixed_frame_rate_flag;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.bitstream_restriction_flag    = 1;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.motion_vectors_over_pic_boundaries_flag = 1;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.log2_max_mv_length_horizontal = 15;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.log2_max_mv_length_vertical   = 15;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.max_num_reorder_frames        = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_b_depth;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.max_dec_frame_buffering       = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_b_depth + 1;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;nal_unit_header.nal_ref_idc = 3;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;nal_unit_header.nal_unit_type = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba7e20eaba3c2969ad80d2e9a791cf1be0">H264_NAL_PPS</a>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;pic_parameter_set_id = 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;seq_parameter_set_id = 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;entropy_coding_mode_flag =</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        !(<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc == <a class="code" href="avcodec_8h.html#ae7b88419c24001277450732a5d3abe2b">FF_PROFILE_H264_BASELINE</a> ||</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;          <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc == <a class="code" href="avcodec_8h.html#a1cccf98e5b74d346fee7fc6782cf935b">FF_PROFILE_H264_EXTENDED</a> ||</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;          <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc == <a class="code" href="avcodec_8h.html#a3fe8b4d9543555b47366600e3e77fc47">FF_PROFILE_H264_CAVLC_444</a>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (!priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ab70e9ab7351da221b8c769b67c0ab47a">coder</a> &amp;&amp; <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;entropy_coding_mode_flag)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;entropy_coding_mode_flag = 0;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;num_ref_idx_l0_default_active_minus1 = 0;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;num_ref_idx_l1_default_active_minus1 = 0;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;pic_init_qp_minus26 = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#af015864e1cc8d3844d83def92ad2e158">fixed_qp_idr</a> - 26;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc == <a class="code" href="avcodec_8h.html#ae7b88419c24001277450732a5d3abe2b">FF_PROFILE_H264_BASELINE</a> ||</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc == <a class="code" href="avcodec_8h.html#a1cccf98e5b74d346fee7fc6782cf935b">FF_PROFILE_H264_EXTENDED</a> ||</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc == <a class="code" href="avcodec_8h.html#aa7d7e490128673e7747bb32ba7ea5486">FF_PROFILE_H264_MAIN</a>) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;more_rbsp_data = 0;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;more_rbsp_data = 1;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;transform_8x8_mode_flag = 1;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    *vseq = (VAEncSequenceParameterBufferH264) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        .seq_parameter_set_id = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;seq_parameter_set_id,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        .level_idc        = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;level_idc,</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        .intra_period     = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;gop_size,</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        .intra_idr_period = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;gop_size,</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        .ip_period        = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;b_per_p + 1,</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        .bits_per_second       = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;va_bit_rate,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        .max_num_ref_frames    = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;max_num_ref_frames,</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        .picture_width_in_mbs  = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;pic_width_in_mbs_minus1 + 1,</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        .picture_height_in_mbs = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;pic_height_in_map_units_minus1 + 1,</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        .seq_fields.bits = {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            .chroma_format_idc                 = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;chroma_format_idc,</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            .frame_mbs_only_flag               = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_mbs_only_flag,</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            .mb_adaptive_frame_field_flag      = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;mb_adaptive_frame_field_flag,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            .seq_scaling_matrix_present_flag   = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;seq_scaling_matrix_present_flag,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            .direct_8x8_inference_flag         = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;direct_8x8_inference_flag,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            .log2_max_frame_num_minus4         = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;log2_max_frame_num_minus4,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            .pic_order_cnt_type                = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;pic_order_cnt_type,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            .log2_max_pic_order_cnt_lsb_minus4 = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;log2_max_pic_order_cnt_lsb_minus4,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            .delta_pic_order_always_zero_flag  = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;delta_pic_order_always_zero_flag,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        },</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        .bit_depth_luma_minus8   = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;bit_depth_luma_minus8,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        .bit_depth_chroma_minus8 = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;bit_depth_chroma_minus8,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        .frame_cropping_flag      = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_cropping_flag,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        .frame_crop_left_offset   = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_crop_left_offset,</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        .frame_crop_right_offset  = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_crop_right_offset,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        .frame_crop_top_offset    = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_crop_top_offset,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        .frame_crop_bottom_offset = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_crop_bottom_offset,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        .vui_parameters_present_flag = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui_parameters_present_flag,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        .vui_fields.bits = {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            .aspect_ratio_info_present_flag = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.aspect_ratio_info_present_flag,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            .timing_info_present_flag       = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.timing_info_present_flag,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            .bitstream_restriction_flag     = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.bitstream_restriction_flag,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            .log2_max_mv_length_horizontal  = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.log2_max_mv_length_horizontal,</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            .log2_max_mv_length_vertical    = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.log2_max_mv_length_vertical,</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        },</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        .aspect_ratio_idc  = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.aspect_ratio_idc,</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        .sar_width         = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.sar_width,</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        .sar_height        = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.sar_height,</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        .num_units_in_tick = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.num_units_in_tick,</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        .time_scale        = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;vui.time_scale,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    };</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    *vpic = (VAEncPictureParameterBufferH264) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        .CurrPic = {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            .picture_id = VA_INVALID_ID,</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            .flags      = VA_PICTURE_H264_INVALID,</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        },</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        .coded_buf = VA_INVALID_ID,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        .pic_parameter_set_id = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;pic_parameter_set_id,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        .seq_parameter_set_id = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;seq_parameter_set_id,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        .pic_init_qp                  = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;pic_init_qp_minus26 + 26,</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        .num_ref_idx_l0_active_minus1 = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;num_ref_idx_l0_default_active_minus1,</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        .num_ref_idx_l1_active_minus1 = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;num_ref_idx_l1_default_active_minus1,</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        .chroma_qp_index_offset        = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;chroma_qp_index_offset,</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        .second_chroma_qp_index_offset = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;second_chroma_qp_index_offset,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        .pic_fields.bits = {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            .entropy_coding_mode_flag        = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;entropy_coding_mode_flag,</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            .weighted_pred_flag              = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;weighted_pred_flag,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            .weighted_bipred_idc             = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;weighted_bipred_idc,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            .constrained_intra_pred_flag     = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;constrained_intra_pred_flag,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            .transform_8x8_mode_flag         = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;transform_8x8_mode_flag,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            .deblocking_filter_control_present_flag =</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;deblocking_filter_control_present_flag,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            .redundant_pic_cnt_present_flag  = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;redundant_pic_cnt_present_flag,</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            .pic_order_present_flag          =</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;bottom_field_pic_order_in_frame_present_flag,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            .pic_scaling_matrix_present_flag = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;pic_scaling_matrix_present_flag,</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        },</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    };</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a0c36b2bd9f63727e9f24364f981280b1">  609</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#a0c36b2bd9f63727e9f24364f981280b1">vaapi_encode_h264_init_picture_params</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                                 <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> *pic)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_context.html">VAAPIEncodeContext</a>               *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a>          *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html">VAAPIEncodeH264Picture</a>          *hpic = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a>              *prev = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a990d7ec9ddfeda0d522e0856eaf84efd">prev</a>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html">VAAPIEncodeH264Picture</a>         *hprev = prev ? prev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a> : <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    VAEncPictureParameterBufferH264 *vpic = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0b5603bae3f5d92488a246b62b7393e6">codec_picture_params</a>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ab56d9a8ef94cff8f64aff4c9f115503a">PICTURE_TYPE_IDR</a>) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a4c211c3d8a02e456836bf7c7102151b2">display_order</a> == pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#aeebf0e912cc72cb3f0d394fe86019cda">encode_order</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>      = 0;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a6f723213a2606427379e4c5e584b3a42">last_idr_frame</a> = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a4c211c3d8a02e456836bf7c7102151b2">display_order</a>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ae2fd63e8c8340b47f3c54a3d6220a3b6">idr_pic_id</a>     = hprev ? hprev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ae2fd63e8c8340b47f3c54a3d6220a3b6">idr_pic_id</a> + 1 : 0;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a5ebbd617148d0a0c8b945b06d33ac39f">primary_pic_type</a> = 0;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a38075cfa84242ecfccca88a571dbb132">slice_type</a>       = 7;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(prev);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> = hprev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> + prev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a766b1e3c4288cc9024524fee987c1fce">is_reference</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a6f723213a2606427379e4c5e584b3a42">last_idr_frame</a> = hprev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a6f723213a2606427379e4c5e584b3a42">last_idr_frame</a>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ae2fd63e8c8340b47f3c54a3d6220a3b6">idr_pic_id</a>     = hprev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ae2fd63e8c8340b47f3c54a3d6220a3b6">idr_pic_id</a>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7acc8409d697602a190af45b91bb061624">PICTURE_TYPE_I</a>) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a38075cfa84242ecfccca88a571dbb132">slice_type</a>       = 7;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a5ebbd617148d0a0c8b945b06d33ac39f">primary_pic_type</a> = 0;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a653f32daa38a2adc6d8abebcfdf44173">PICTURE_TYPE_P</a>) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a38075cfa84242ecfccca88a571dbb132">slice_type</a>       = 5;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a5ebbd617148d0a0c8b945b06d33ac39f">primary_pic_type</a> = 1;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a38075cfa84242ecfccca88a571dbb132">slice_type</a>       = 6;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a5ebbd617148d0a0c8b945b06d33ac39f">primary_pic_type</a> = 2;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a4c211c3d8a02e456836bf7c7102151b2">display_order</a> - hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a6f723213a2606427379e4c5e584b3a42">last_idr_frame</a>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a1a32bab80a15cffb2b1531ae16e9559f">dpb_delay</a>     = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a4c211c3d8a02e456836bf7c7102151b2">display_order</a> - pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#aeebf0e912cc72cb3f0d394fe86019cda">encode_order</a> + <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_b_depth;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a3388f8fa298e2c0a7cf1b3d8c8f752a4">cpb_delay</a>     = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#aeebf0e912cc72cb3f0d394fe86019cda">encode_order</a> - hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a6f723213a2606427379e4c5e584b3a42">last_idr_frame</a>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a4d675b30e23806f0e355f97b42889ad4">aud</a>) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">aud_needed</a> = 1;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae49687a0c1f509270dc1faad777fbff3">raw_aud</a> = (<a class="code" href="cbs__h264_8h.html#ad416a2aab04e6f3988596580ac0da61a">H264RawAUD</a>) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            .<a class="code" href="struct_h264_raw_a_u_d.html#a240bd5da1007d03acaf0b775fe08d792">nal_unit_header</a> = {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                .<a class="code" href="struct_h264_raw_n_a_l_unit_header.html#aff0731b20305b6d42b49521b4f06899b">nal_unit_type</a> = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baf6a508f5b414bc605a853f180be5f4bf">H264_NAL_AUD</a>,</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            },</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            .primary_pic_type  = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a5ebbd617148d0a0c8b945b06d33ac39f">primary_pic_type</a>,</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        };</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">aud_needed</a> = 0;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a> = 0;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae55e10eec4d9eb34512be96f630a7f82">sei</a> &amp; <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3">SEI_IDENTIFIER</a> &amp;&amp; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#aeebf0e912cc72cb3f0d394fe86019cda">encode_order</a> == 0)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a> |= <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3">SEI_IDENTIFIER</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="preprocessor">#if !CONFIG_VAAPI_1</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;va_rc_mode == VA_RC_CBR)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ad30cbc039cacbceb6ccc9621c5b2f288">sei_cbr_workaround_needed</a> = 1;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae55e10eec4d9eb34512be96f630a7f82">sei</a> &amp; <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">SEI_TIMING</a>) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a679cfd4b2525d2c74cf3736733ca8911">sei_pic_timing</a> = (<a class="code" href="cbs__h264_8h.html#a2678c16d522989e4f6e0bbcbe6312021">H264RawSEIPicTiming</a>) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            .<a class="code" href="struct_h264_raw_s_e_i_pic_timing.html#a563a8368cbb1899ac33aa9c0da55efe2">cpb_removal_delay</a> = 2 * hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a3388f8fa298e2c0a7cf1b3d8c8f752a4">cpb_delay</a>,</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            .dpb_output_delay  = 2 * hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a1a32bab80a15cffb2b1531ae16e9559f">dpb_delay</a>,</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        };</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a> |= <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">SEI_TIMING</a>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae55e10eec4d9eb34512be96f630a7f82">sei</a> &amp; <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba754d87f1bfd9ebdff42d90c98cff764a">SEI_RECOVERY_POINT</a> &amp;&amp; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7acc8409d697602a190af45b91bb061624">PICTURE_TYPE_I</a>) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a9343bf8e5072f036f59d6c225b8bed27">sei_recovery_point</a> = (<a class="code" href="cbs__h264_8h.html#af94c37a8511ef1a1a4fb364a74d19b4f">H264RawSEIRecoveryPoint</a>) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            .<a class="code" href="struct_h264_raw_s_e_i_recovery_point.html#a7f72719a3d4025baa2afe68336b7eb1c">recovery_frame_cnt</a> = 0,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            .exact_match_flag   = 1,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            .broken_link_flag   = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;b_per_p &gt; 0,</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        };</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">sei_needed</a> |= <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba754d87f1bfd9ebdff42d90c98cff764a">SEI_RECOVERY_POINT</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    vpic-&gt;CurrPic = (VAPictureH264) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        .picture_id          = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a7b20419c52cbcfb242f90a8b35edfc14">recon_surface</a>,</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        .frame_idx           = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>,</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        .flags               = 0,</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        .TopFieldOrderCnt    = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>,</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        .BottomFieldOrderCnt = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>,</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    };</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">nb_refs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a>      *<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html">VAAPIEncodeH264Picture</a> *href;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> &amp;&amp; <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;encode_order &lt; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#aeebf0e912cc72cb3f0d394fe86019cda">encode_order</a>);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        href = <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;priv_data;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        vpic-&gt;ReferenceFrames[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (VAPictureH264) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            .picture_id          = <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;recon_surface,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            .frame_idx           = href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>,</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            .flags               = VA_PICTURE_H264_SHORT_TERM_REFERENCE,</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            .TopFieldOrderCnt    = href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>,</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            .BottomFieldOrderCnt = href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        };</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(vpic-&gt;ReferenceFrames); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        vpic-&gt;ReferenceFrames[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (VAPictureH264) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            .picture_id = VA_INVALID_ID,</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            .flags      = VA_PICTURE_H264_INVALID,</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        };</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    vpic-&gt;coded_buf = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#ab10d79f488c154649c6b6c9ff223f8c6">output_buffer</a>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    vpic-&gt;frame_num = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    vpic-&gt;pic_fields.bits.idr_pic_flag       = (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ab56d9a8ef94cff8f64aff4c9f115503a">PICTURE_TYPE_IDR</a>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    vpic-&gt;pic_fields.bits.reference_pic_flag = (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> != <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a>);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a7b80d0b21ea1bd7cc77c6fc8317ea86d">  732</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vaapi__encode__h264_8c.html#a7b80d0b21ea1bd7cc77c6fc8317ea86d">vaapi_encode_h264_default_ref_pic_list</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                                                   <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> *pic,</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                                   <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> **rpl0,</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                                                   <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> **rpl1,</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                                                   <span class="keywordtype">int</span> *rpl_size)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;{</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> *prev;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html">VAAPIEncodeH264Picture</a> *hp, *<a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>, *hc;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, n = 0;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    prev = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a990d7ec9ddfeda0d522e0856eaf84efd">prev</a>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(prev);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    hp = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a990d7ec9ddfeda0d522e0856eaf84efd">prev</a>-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a00607efbf6665511840f09b80e257f50">nb_dpb_pics</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a> = prev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a83158ec0aff37a9b2337525a0d4b7b0c">dpb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;frame_num &lt; hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a653f32daa38a2adc6d8abebcfdf44173">PICTURE_TYPE_P</a>) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            <span class="keywordflow">for</span> (j = n; j &gt; 0; j--) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                hc = rpl0[j - 1]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> != <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;frame_num);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                <span class="keywordflow">if</span> (hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> &gt; <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;frame_num)</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                rpl0[j] = rpl0[j - 1];</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            rpl0[j] = prev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a83158ec0aff37a9b2337525a0d4b7b0c">dpb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <span class="keywordflow">for</span> (j = n; j &gt; 0; j--) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                hc = rpl0[j - 1]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> != hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                <span class="keywordflow">if</span> (hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> &lt; hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;pic_order_cnt &gt; hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> ||</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                        <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;pic_order_cnt &lt; hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;pic_order_cnt &gt; hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>)</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                rpl0[j] = rpl0[j - 1];</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            rpl0[j] = prev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a83158ec0aff37a9b2337525a0d4b7b0c">dpb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="keywordflow">for</span> (j = n; j &gt; 0; j--) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                hc = rpl1[j - 1]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> != hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                <span class="keywordflow">if</span> (hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> &gt; hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;pic_order_cnt &lt; hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> ||</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                        <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;pic_order_cnt &gt; hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>)</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;pic_order_cnt &lt; hc-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                rpl1[j] = rpl1[j - 1];</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            rpl1[j] = prev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a83158ec0aff37a9b2337525a0d4b7b0c">dpb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        ++n;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <span class="keywordflow">if</span> (rpl0[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != rpl1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == n)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a>*, rpl1[0], rpl1[1]);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a653f32daa38a2adc6d8abebcfdf44173">PICTURE_TYPE_P</a> ||</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Default RefPicList0 for fn=%d/poc=%d:&quot;</span>,</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;               hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>, hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a> = rpl0[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;  fn=%d/poc=%d&quot;</span>,</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                   <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;frame_num, <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;pic_order_cnt);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Default RefPicList1 for fn=%d/poc=%d:&quot;</span>,</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;               hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>, hp-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a> = rpl1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;  fn=%d/poc=%d&quot;</span>,</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                   <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;frame_num, <a class="code" href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a>-&gt;pic_order_cnt);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    *rpl_size = n;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;}</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#af4e96d76fba1497e8f6d6fb270328141">  829</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#af4e96d76fba1497e8f6d6fb270328141">vaapi_encode_h264_init_slice_params</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                                               <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> *pic,</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                                               <a class="code" href="struct_v_a_a_p_i_encode_slice.html">VAAPIEncodeSlice</a> *slice)</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;{</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a>          *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html">VAAPIEncodeH264Picture</a>          *hpic = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a>              *prev = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a990d7ec9ddfeda0d522e0856eaf84efd">prev</a>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <a class="code" href="struct_h264_raw_s_p_s.html">H264RawSPS</a>                       *<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a> = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3bd8c19054273e701494b69ad11c0462">raw_sps</a>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="struct_h264_raw_p_p_s.html">H264RawPPS</a>                       *<a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a> = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a763f5346f558c505776b3934a74907a9">raw_pps</a>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="struct_h264_raw_slice_header.html">H264RawSliceHeader</a>                *sh = &amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a5df6bdb61bd08abf20c5fb1c9a2756a6">raw_slice</a>.<a class="code" href="struct_h264_raw_slice.html#aa30f38df5fd49b4a7411accf949ddddd">header</a>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    VAEncPictureParameterBufferH264 *vpic = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0b5603bae3f5d92488a246b62b7393e6">codec_picture_params</a>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    VAEncSliceParameterBufferH264 *vslice = slice-&gt;<a class="code" href="struct_v_a_a_p_i_encode_slice.html#a4ef0c52a1f5c8310dd26c65016c039ef">codec_slice_params</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ab56d9a8ef94cff8f64aff4c9f115503a">PICTURE_TYPE_IDR</a>) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#ad9a48882ed5baf7149fd70bb7884d003">nal_unit_header</a>.<a class="code" href="struct_h264_raw_n_a_l_unit_header.html#aff0731b20305b6d42b49521b4f06899b">nal_unit_type</a> = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bafecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#ad9a48882ed5baf7149fd70bb7884d003">nal_unit_header</a>.<a class="code" href="struct_h264_raw_n_a_l_unit_header.html#a5afb254b89837b4ceeadaced595e5605">nal_ref_idc</a>   = 3;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#ad9a48882ed5baf7149fd70bb7884d003">nal_unit_header</a>.<a class="code" href="struct_h264_raw_n_a_l_unit_header.html#aff0731b20305b6d42b49521b4f06899b">nal_unit_type</a> = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9f5ecee4fcf069f90853d39dda680dfe">H264_NAL_SLICE</a>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#ad9a48882ed5baf7149fd70bb7884d003">nal_unit_header</a>.<a class="code" href="struct_h264_raw_n_a_l_unit_header.html#a5afb254b89837b4ceeadaced595e5605">nal_ref_idc</a>   = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a766b1e3c4288cc9024524fee987c1fce">is_reference</a>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#ab2cca1533816e0a218644b5ea3561c25">first_mb_in_slice</a> = slice-&gt;<a class="code" href="struct_v_a_a_p_i_encode_slice.html#a3a0ea0892268d865f4981ac1b56baff9">block_start</a>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#aa63e42496180d1c0624247adaf18eae7">slice_type</a>        = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a38075cfa84242ecfccca88a571dbb132">slice_type</a>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a4c0734a38e8323f17dc59846dec6af0d">pic_parameter_set_id</a> = <a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;pic_parameter_set_id;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a80a71ff1a2d3dcdc1262ddea8f133a7d">frame_num</a> = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> &amp;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        ((1 &lt;&lt; (4 + <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;log2_max_frame_num_minus4)) - 1);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a14afa6e874193ae23a27cf332903c3d9">idr_pic_id</a> = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ae2fd63e8c8340b47f3c54a3d6220a3b6">idr_pic_id</a>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#aecfd62f2069a931e797359eebc0a6fe6">pic_order_cnt_lsb</a> = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> &amp;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        ((1 &lt;&lt; (4 + <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;log2_max_pic_order_cnt_lsb_minus4)) - 1);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a4fa014d096114e67ce1f0f469d01ea06">direct_spatial_mv_pred_flag</a> = 1;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a>)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a62ca6a07a59bef2a174a21e29cf94310">slice_qp_delta</a> = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aeb5b431bc6374592dd6a8aeffc3be4b6">fixed_qp_b</a> - (<a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;pic_init_qp_minus26 + 26);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a653f32daa38a2adc6d8abebcfdf44173">PICTURE_TYPE_P</a>)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a62ca6a07a59bef2a174a21e29cf94310">slice_qp_delta</a> = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">fixed_qp_p</a> - (<a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;pic_init_qp_minus26 + 26);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a62ca6a07a59bef2a174a21e29cf94310">slice_qp_delta</a> = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#af015864e1cc8d3844d83def92ad2e158">fixed_qp_idr</a> - (<a class="code" href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a>-&gt;pic_init_qp_minus26 + 26);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a766b1e3c4288cc9024524fee987c1fce">is_reference</a> &amp;&amp; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> != <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ab56d9a8ef94cff8f64aff4c9f115503a">PICTURE_TYPE_IDR</a>) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> *discard_list[<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baca65838438d536410bdc17544ec1531c">MAX_DPB_SIZE</a>];</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordtype">int</span> discard = 0, keep = 0;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="comment">// Discard everything which is in the DPB of the previous frame but</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="comment">// not in the DPB of this one.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; prev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a00607efbf6665511840f09b80e257f50">nb_dpb_pics</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a00607efbf6665511840f09b80e257f50">nb_dpb_pics</a>; j++) {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a83158ec0aff37a9b2337525a0d4b7b0c">dpb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] == pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a83158ec0aff37a9b2337525a0d4b7b0c">dpb</a>[j])</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="keywordflow">if</span> (j == pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a00607efbf6665511840f09b80e257f50">nb_dpb_pics</a>) {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                discard_list[discard] = prev-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a83158ec0aff37a9b2337525a0d4b7b0c">dpb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                ++discard;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                ++keep;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(keep &lt;= priv-&gt;<a class="code" href="tests_2h264__levels_8c.html#a29811c049d12a1e95952f1115970281f">dpb_frames</a>);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">if</span> (discard == 0) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a23bf5641f7800bd27a0c7695020c57d7">adaptive_ref_pic_marking_mode_flag</a> = 0;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a23bf5641f7800bd27a0c7695020c57d7">adaptive_ref_pic_marking_mode_flag</a> = 1;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; discard; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html">VAAPIEncodeH264Picture</a> *old = discard_list[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(old-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> &lt; hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a3ade1bdb5a27abd0415e91bd9de83f18">mmco</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_raw_slice_header.html#a1c9bb8ee8f13d2db26389557d156c154">memory_management_control_operation</a> = 1;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a3ade1bdb5a27abd0415e91bd9de83f18">mmco</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_raw_slice_header.html#ae650bd4266736780ffb8c1e363e7403b">difference_of_pic_nums_minus1</a> =</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                    hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> - old-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> - 1;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            }</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a3ade1bdb5a27abd0415e91bd9de83f18">mmco</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_raw_slice_header.html#a1c9bb8ee8f13d2db26389557d156c154">memory_management_control_operation</a> = 0;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        }</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="comment">// If the intended references are not the first entries of RefPicListN</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="comment">// by default, use ref-pic-list-modification to move them there.</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a653f32daa38a2adc6d8abebcfdf44173">PICTURE_TYPE_P</a> || pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <a class="code" href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a> *def_l0[<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baca65838438d536410bdc17544ec1531c">MAX_DPB_SIZE</a>], *def_l1[<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baca65838438d536410bdc17544ec1531c">MAX_DPB_SIZE</a>];</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html">VAAPIEncodeH264Picture</a> *href;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <a class="code" href="vaapi__encode__h264_8c.html#a7b80d0b21ea1bd7cc77c6fc8317ea86d">vaapi_encode_h264_default_ref_pic_list</a>(avctx, pic,</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                                               def_l0, def_l1, &amp;n);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a653f32daa38a2adc6d8abebcfdf44173">PICTURE_TYPE_P</a>) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <span class="keywordtype">int</span> need_rplm = 0;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">nb_refs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != def_l0[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                    need_rplm = 1;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a0d38d6757bc1bb89090335de8c9eed00">ref_pic_list_modification_flag_l0</a> = need_rplm;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <span class="keywordflow">if</span> (need_rplm) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                <span class="keywordtype">int</span> pic_num = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">nb_refs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                    href = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> != pic_num);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                    <span class="keywordflow">if</span> (href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> &lt; pic_num) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">modification_of_pic_nums_idc</a> = 0;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_raw_slice_header.html#a0ee6ad6ac104e4e917959639a96a338b">abs_diff_pic_num_minus1</a> =</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                            pic_num - href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> - 1;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">modification_of_pic_nums_idc</a> = 1;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_raw_slice_header.html#a0ee6ad6ac104e4e917959639a96a338b">abs_diff_pic_num_minus1</a> =</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                            href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> - pic_num - 1;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                    }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                    pic_num = href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">modification_of_pic_nums_idc</a> = 3;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keywordtype">int</span> need_rplm_l0 = 0, need_rplm_l1 = 0;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            <span class="keywordtype">int</span> n0 = 0, n1 = 0;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">nb_refs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                href = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> != hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                <span class="keywordflow">if</span> (href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> &lt; hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != def_l0[n0])</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                        need_rplm_l0 = 1;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                    ++n0;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != def_l1[n1])</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                        need_rplm_l1 = 1;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                    ++n1;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a0d38d6757bc1bb89090335de8c9eed00">ref_pic_list_modification_flag_l0</a> = need_rplm_l0;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <span class="keywordflow">if</span> (need_rplm_l0) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <span class="keywordtype">int</span> pic_num = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = j = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">nb_refs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                    href = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                    <span class="keywordflow">if</span> (href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> &gt; hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>)</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> != pic_num);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                    <span class="keywordflow">if</span> (href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> &lt; pic_num) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">modification_of_pic_nums_idc</a> = 0;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#a0ee6ad6ac104e4e917959639a96a338b">abs_diff_pic_num_minus1</a> =</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                            pic_num - href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> - 1;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">modification_of_pic_nums_idc</a> = 1;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#a0ee6ad6ac104e4e917959639a96a338b">abs_diff_pic_num_minus1</a> =</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                            href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> - pic_num - 1;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                    }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                    pic_num = href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                    ++j;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(j == n0);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">rplm_l0</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">modification_of_pic_nums_idc</a> = 3;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a9c3c19426944ed822f7ede205e5b7bd6">ref_pic_list_modification_flag_l1</a> = need_rplm_l1;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <span class="keywordflow">if</span> (need_rplm_l1) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                <span class="keywordtype">int</span> pic_num = hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = j = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">nb_refs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                    href = pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">refs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">priv_data</a>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                    <span class="keywordflow">if</span> (href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a> &lt; hpic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">pic_order_cnt</a>)</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> != pic_num);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                    <span class="keywordflow">if</span> (href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> &lt; pic_num) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#aeca8b4e34ebd5e8ac5cd5fb31c5396ce">rplm_l1</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">modification_of_pic_nums_idc</a> = 0;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#aeca8b4e34ebd5e8ac5cd5fb31c5396ce">rplm_l1</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#a0ee6ad6ac104e4e917959639a96a338b">abs_diff_pic_num_minus1</a> =</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                            pic_num - href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> - 1;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#aeca8b4e34ebd5e8ac5cd5fb31c5396ce">rplm_l1</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">modification_of_pic_nums_idc</a> = 1;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                        sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#aeca8b4e34ebd5e8ac5cd5fb31c5396ce">rplm_l1</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#a0ee6ad6ac104e4e917959639a96a338b">abs_diff_pic_num_minus1</a> =</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                            href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a> - pic_num - 1;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                    }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                    pic_num = href-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">frame_num</a>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                    ++j;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(j == n1);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#aeca8b4e34ebd5e8ac5cd5fb31c5396ce">rplm_l1</a>[j].<a class="code" href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">modification_of_pic_nums_idc</a> = 3;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    vslice-&gt;macroblock_address = slice-&gt;<a class="code" href="struct_v_a_a_p_i_encode_slice.html#a3a0ea0892268d865f4981ac1b56baff9">block_start</a>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    vslice-&gt;num_macroblocks    = slice-&gt;<a class="code" href="struct_v_a_a_p_i_encode_slice.html#a21f0b514e8ad6659f990543021c83326">block_size</a>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    vslice-&gt;macroblock_info = VA_INVALID_ID;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    vslice-&gt;slice_type           = sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#aa63e42496180d1c0624247adaf18eae7">slice_type</a> % 5;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    vslice-&gt;pic_parameter_set_id = sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a4c0734a38e8323f17dc59846dec6af0d">pic_parameter_set_id</a>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    vslice-&gt;idr_pic_id           = sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a14afa6e874193ae23a27cf332903c3d9">idr_pic_id</a>;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    vslice-&gt;pic_order_cnt_lsb = sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#aecfd62f2069a931e797359eebc0a6fe6">pic_order_cnt_lsb</a>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    vslice-&gt;direct_spatial_mv_pred_flag = sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a4fa014d096114e67ce1f0f469d01ea06">direct_spatial_mv_pred_flag</a>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(vslice-&gt;RefPicList0); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        vslice-&gt;RefPicList0[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].picture_id = VA_INVALID_ID;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        vslice-&gt;RefPicList0[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].flags      = VA_PICTURE_H264_INVALID;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        vslice-&gt;RefPicList1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].picture_id = VA_INVALID_ID;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        vslice-&gt;RefPicList1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].flags      = VA_PICTURE_H264_INVALID;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">nb_refs</a> &lt;= 2);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">nb_refs</a> &gt;= 1) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="comment">// Backward reference for P- or B-frame.</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a653f32daa38a2adc6d8abebcfdf44173">PICTURE_TYPE_P</a> ||</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                   pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        vslice-&gt;RefPicList0[0] = vpic-&gt;ReferenceFrames[0];</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span> (pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">nb_refs</a> &gt;= 2) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="comment">// Forward reference for B-frame.</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(pic-&gt;<a class="code" href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">type</a> == <a class="code" href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a>);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        vslice-&gt;RefPicList1[0] = vpic-&gt;ReferenceFrames[1];</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    vslice-&gt;slice_qp_delta = sh-&gt;<a class="code" href="struct_h264_raw_slice_header.html#a62ca6a07a59bef2a174a21e29cf94310">slice_qp_delta</a>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;}</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160; </div>
<div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#aeb243c07e2df840c2ccb26406e868c34"> 1050</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#aeb243c07e2df840c2ccb26406e868c34">vaapi_encode_h264_configure</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;{</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_context.html">VAAPIEncodeContext</a>      *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a> *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    err = <a class="code" href="cbs_8c.html#af4e737d195acae80b9337f9a4127a7d3">ff_cbs_init</a>(&amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#afaa0e64941b5672a0ada3d5bc29bf2a2">cbc</a>, <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>, avctx);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aa119dd6b0cbec47b83cc0a4bd91b4771">mb_width</a>  = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>,  16) / 16;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aec3ef055d4ee1fc29eaeb93da5c5442e">mb_height</a> = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>, 16) / 16;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;va_rc_mode == VA_RC_CQP) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">fixed_qp_p</a> = av_clip(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;rc_quality, 1, 51);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aef7017818f06f053f2e63fe759b30eb1">i_quant_factor</a> &gt; 0.0)</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#af015864e1cc8d3844d83def92ad2e158">fixed_qp_idr</a> =</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                av_clip((avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aef7017818f06f053f2e63fe759b30eb1">i_quant_factor</a> * priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">fixed_qp_p</a> +</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                         avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#afe9b149e17b9e28823ab3cf9732b990d">i_quant_offset</a>) + 0.5, 1, 51);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#af015864e1cc8d3844d83def92ad2e158">fixed_qp_idr</a> = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">fixed_qp_p</a>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a40a7fdf60f853d9140bbe1204a66efb2">b_quant_factor</a> &gt; 0.0)</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aeb5b431bc6374592dd6a8aeffc3be4b6">fixed_qp_b</a> =</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                av_clip((avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a40a7fdf60f853d9140bbe1204a66efb2">b_quant_factor</a> * priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">fixed_qp_p</a> +</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                         avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a31a2ef78cf186083c2c676dda8e226db">b_quant_offset</a>) + 0.5, 1, 51);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aeb5b431bc6374592dd6a8aeffc3be4b6">fixed_qp_b</a> = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">fixed_qp_p</a>;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Using fixed QP = &quot;</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;               <span class="stringliteral">&quot;%d / %d / %d for IDR- / P- / B-frames.\n&quot;</span>,</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;               priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#af015864e1cc8d3844d83def92ad2e158">fixed_qp_idr</a>, priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">fixed_qp_p</a>, priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aeb5b431bc6374592dd6a8aeffc3be4b6">fixed_qp_b</a>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="comment">// These still need to be  set for pic_init_qp/slice_qp_delta.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#af015864e1cc8d3844d83def92ad2e158">fixed_qp_idr</a> = 26;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">fixed_qp_p</a>   = 26;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#aeb5b431bc6374592dd6a8aeffc3be4b6">fixed_qp_b</a>   = 26;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;rc_mode-&gt;hrd) {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="comment">// Timing SEI requires a mode respecting HRD parameters.</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae55e10eec4d9eb34512be96f630a7f82">sei</a> &amp;= ~<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">SEI_TIMING</a>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160; </div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ae55e10eec4d9eb34512be96f630a7f82">sei</a> &amp; <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3">SEI_IDENTIFIER</a>) {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *lavc  = <a class="code" href="libavcodec_2version_8h.html#a391ab92645796653bdc9eed09e1f8e0b">LIBAVCODEC_IDENT</a>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *vaapi = VA_VERSION_S;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *driver;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        memcpy(priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3a527ca297adcca8023fc2fc80cc46f4">sei_identifier</a>.<a class="code" href="struct_h264_raw_s_e_i_user_data_unregistered.html#a91f5f5cca983153a364bf1ed3428b63a">uuid_iso_iec_11578</a>,</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;               <a class="code" href="vaapi__encode__h264_8c.html#a7fb8a6a0e4cc7738b70c73a446d090d5">vaapi_encode_h264_sei_identifier_uuid</a>,</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;               <span class="keyword">sizeof</span>(priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3a527ca297adcca8023fc2fc80cc46f4">sei_identifier</a>.<a class="code" href="struct_h264_raw_s_e_i_user_data_unregistered.html#a91f5f5cca983153a364bf1ed3428b63a">uuid_iso_iec_11578</a>));</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        driver = vaQueryVendorString(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwctx-&gt;display);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="keywordflow">if</span> (!driver)</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            driver = <span class="stringliteral">&quot;unknown driver&quot;</span>;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <span class="stringliteral">&quot;%s / VAAPI %s / %s&quot;</span>, lavc, vaapi, driver);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;= 0) {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0d39bf75ecc061610664d07dfdfa71af">sei_identifier_string</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + 1);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <span class="keywordflow">if</span> (!priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0d39bf75ecc061610664d07dfdfa71af">sei_identifier_string</a>)</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0d39bf75ecc061610664d07dfdfa71af">sei_identifier_string</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + 1,</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                     <span class="stringliteral">&quot;%s / VAAPI %s / %s&quot;</span>, lavc, vaapi, driver);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3a527ca297adcca8023fc2fc80cc46f4">sei_identifier</a>.<a class="code" href="struct_h264_raw_s_e_i_user_data_unregistered.html#a8d7b87926eb9589d4da8211ba855a8f1">data</a>        = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0d39bf75ecc061610664d07dfdfa71af">sei_identifier_string</a>;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a3a527ca297adcca8023fc2fc80cc46f4">sei_identifier</a>.<a class="code" href="struct_h264_raw_s_e_i_user_data_unregistered.html#a5dc8beeaefae7b0ee81a359be3aa889a">data_length</a> = <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + 1;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    }</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;roi_quant_range = 51 + 6 * (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;profile-&gt;depth - 8);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;}</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a7b6f5446f01edb541e180562cb916349"> 1127</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_v_a_a_p_i_encode_profile.html">VAAPIEncodeProfile</a> <a class="code" href="vaapi__encode__h264_8c.html#a7b6f5446f01edb541e180562cb916349">vaapi_encode_h264_profiles</a>[] = {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    { <a class="code" href="avcodec_8h.html#a0ff6fe9cf1f7a1671d597b9524024332">FF_PROFILE_H264_HIGH</a>, 8, 3, 1, 1, VAProfileH264High },</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    { <a class="code" href="avcodec_8h.html#aa7d7e490128673e7747bb32ba7ea5486">FF_PROFILE_H264_MAIN</a>, 8, 3, 1, 1, VAProfileH264Main },</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    { <a class="code" href="avcodec_8h.html#a9467289beec698b363d7319e454c351e">FF_PROFILE_H264_CONSTRAINED_BASELINE</a>,</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                            8, 3, 1, 1, VAProfileH264ConstrainedBaseline },</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    { <a class="code" href="avcodec_8h.html#a1d8d03f5be975b8a728574cbdb00c896">FF_PROFILE_UNKNOWN</a> }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;};</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a3f6738fb4f0f6776caa2e398a32608ad"> 1135</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_v_a_a_p_i_encode_type.html">VAAPIEncodeType</a> <a class="code" href="vaapi__encode__h264_8c.html#a3f6738fb4f0f6776caa2e398a32608ad">vaapi_encode_type_h264</a> = {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    .<a class="code" href="struct_v_a_a_p_i_encode_type.html#a4f12ecc975c957802691314dd58bcfd6">profiles</a>              = <a class="code" href="vaapi__encode__h264_8c.html#a7b6f5446f01edb541e180562cb916349">vaapi_encode_h264_profiles</a>,</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    .flags                 = <a class="code" href="vaapi__encode_8h.html#abc6126af1d45847bc59afa0aa3216b04a0bd3695af879bf892f15bfe02355b902">FLAG_SLICE_CONTROL</a> |</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                             <a class="code" href="vaapi__encode_8h.html#abc6126af1d45847bc59afa0aa3216b04a4894ca430a745f72a320a8510f49abbf">FLAG_B_PICTURES</a> |</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                             <a class="code" href="vaapi__encode_8h.html#abc6126af1d45847bc59afa0aa3216b04adb158c6c9512d48028d0dba677934703">FLAG_B_PICTURE_REFERENCES</a> |</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                             <a class="code" href="vaapi__encode_8h.html#abc6126af1d45847bc59afa0aa3216b04abe8e15036905c4de8a6355add509c896">FLAG_NON_IDR_KEY_PICTURES</a>,</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    .default_quality       = 20,</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    .configure             = &amp;<a class="code" href="vaapi__encode__h264_8c.html#aeb243c07e2df840c2ccb26406e868c34">vaapi_encode_h264_configure</a>,</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    .picture_priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="vaapi__encode__h264_8c.html#a0f2f7eab693c3eb986542b62fb534e4e">VAAPIEncodeH264Picture</a>),</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    .sequence_params_size  = <span class="keyword">sizeof</span>(VAEncSequenceParameterBufferH264),</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    .init_sequence_params  = &amp;<a class="code" href="vaapi__encode__h264_8c.html#a5f40686681633cf85e60157d7049bb64">vaapi_encode_h264_init_sequence_params</a>,</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    .picture_params_size   = <span class="keyword">sizeof</span>(VAEncPictureParameterBufferH264),</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    .init_picture_params   = &amp;<a class="code" href="vaapi__encode__h264_8c.html#a0c36b2bd9f63727e9f24364f981280b1">vaapi_encode_h264_init_picture_params</a>,</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    .slice_params_size     = <span class="keyword">sizeof</span>(VAEncSliceParameterBufferH264),</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    .init_slice_params     = &amp;<a class="code" href="vaapi__encode__h264_8c.html#af4e96d76fba1497e8f6d6fb270328141">vaapi_encode_h264_init_slice_params</a>,</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    .sequence_header_type  = VAEncPackedHeaderSequence,</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    .write_sequence_header = &amp;<a class="code" href="vaapi__encode__h264_8c.html#a1ffc305ab4e3f95c8d9529fe2658f070">vaapi_encode_h264_write_sequence_header</a>,</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    .slice_header_type     = VAEncPackedHeaderH264_Slice,</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    .write_slice_header    = &amp;<a class="code" href="vaapi__encode__h264_8c.html#a4afc9160be1e21ac23122f74333b83b1">vaapi_encode_h264_write_slice_header</a>,</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    .write_extra_header    = &amp;<a class="code" href="vaapi__encode__h264_8c.html#ace3b5d98e4c9458d680e62562a2176a8">vaapi_encode_h264_write_extra_header</a>,</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;};</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a22083d5e4363cb33737876ab629042c3"> 1167</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#a22083d5e4363cb33737876ab629042c3">vaapi_encode_h264_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;{</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_context.html">VAAPIEncodeContext</a>      *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a> *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;codec = &amp;<a class="code" href="vaapi__encode__h264_8c.html#a3f6738fb4f0f6776caa2e398a32608ad">vaapi_encode_type_h264</a>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> == <a class="code" href="avcodec_8h.html#a1d8d03f5be975b8a728574cbdb00c896">FF_PROFILE_UNKNOWN</a>)</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a5db5b340a711eabb33db0f5ea279bafd">profile</a>;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a> == <a class="code" href="avcodec_8h.html#a84a993ea19afa2cbda45b3283a598fe6">FF_LEVEL_UNKNOWN</a>)</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a> = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a47a594ad119b9cd71947f02d655fe8de">level</a>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa401ca663644caa51ede1889659c23d6">compression_level</a> == <a class="code" href="avcodec_8h.html#a6787143040c08e5c1da558371a732425">FF_COMPRESSION_DEFAULT</a>)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa401ca663644caa51ede1889659c23d6">compression_level</a> = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a031628f5cee134074b409a835f3833c1">quality</a>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="comment">// Reject unsupported profiles.</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">switch</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a>) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#ae7b88419c24001277450732a5d3abe2b">FF_PROFILE_H264_BASELINE</a>:</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;H.264 baseline profile is not &quot;</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;               <span class="stringliteral">&quot;supported, using constrained baseline profile instead.\n&quot;</span>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> = <a class="code" href="avcodec_8h.html#a9467289beec698b363d7319e454c351e">FF_PROFILE_H264_CONSTRAINED_BASELINE</a>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#a1cccf98e5b74d346fee7fc6782cf935b">FF_PROFILE_H264_EXTENDED</a>:</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;H.264 extended profile &quot;</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;               <span class="stringliteral">&quot;is not supported.\n&quot;</span>);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#ae37ffdc67dbb499d0274323d9449960b">FF_PROFILE_H264_HIGH_10</a>:</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#a9ee5bfe5f87de36d059560de0bb65ad5">FF_PROFILE_H264_HIGH_10_INTRA</a>:</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;H.264 10-bit profiles &quot;</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;               <span class="stringliteral">&quot;are not supported.\n&quot;</span>);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#a65b6dedc096e294a66bf12cf69f51b39">FF_PROFILE_H264_HIGH_422</a>:</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#ad8cd548567a051c1fba93870baf0376c">FF_PROFILE_H264_HIGH_422_INTRA</a>:</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#a1f3bda7a7ad53bfadfb8318915e4c22e">FF_PROFILE_H264_HIGH_444</a>:</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#adbd58c1bfa90fb3b5520d76ba9744251">FF_PROFILE_H264_HIGH_444_PREDICTIVE</a>:</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#aca63846bdb57646770faec7632e9018c">FF_PROFILE_H264_HIGH_444_INTRA</a>:</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="avcodec_8h.html#a3fe8b4d9543555b47366600e3e77fc47">FF_PROFILE_H264_CAVLC_444</a>:</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;H.264 non-4:2:0 profiles &quot;</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;               <span class="stringliteral">&quot;are not supported.\n&quot;</span>);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; </div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a> != <a class="code" href="avcodec_8h.html#a84a993ea19afa2cbda45b3283a598fe6">FF_LEVEL_UNKNOWN</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a> &amp; ~0xff) {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid level %d: must fit &quot;</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;               <span class="stringliteral">&quot;in 8-bit unsigned integer.\n&quot;</span>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a>);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160; </div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;desired_packed_headers =</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        VA_ENC_PACKED_HEADER_SEQUENCE | <span class="comment">// SPS and PPS.</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        VA_ENC_PACKED_HEADER_SLICE    | <span class="comment">// Slice headers.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        VA_ENC_PACKED_HEADER_MISC;      <span class="comment">// SEI.</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;surface_width  = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>,  16);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;surface_height = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>, 16);</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160; </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;slice_block_height = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;slice_block_width = 16;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> (priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a2d75a9fdf64581d998c2ded626ec3d7d">qp</a> &gt; 0)</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;explicit_qp = priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a2d75a9fdf64581d998c2ded626ec3d7d">qp</a>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libavcodec_2vaapi__encode_8c.html#ab55f58e120cb3bc6c0c7ab82385bc6d1">ff_vaapi_encode_init</a>(avctx);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a51660e555a780a73e3fe610e0575b4ca"> 1230</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="vaapi__encode__h264_8c.html#a51660e555a780a73e3fe610e0575b4ca">vaapi_encode_h264_close</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;{</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <a class="code" href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a> *priv = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160; </div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <a class="code" href="cbs_8c.html#afac1187cc18c3e4d8f3978f46437fb6a">ff_cbs_fragment_free</a>(&amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#ac3287a57a3209ae7198040fe3a1f0568">current_access_unit</a>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <a class="code" href="cbs_8c.html#a6dbebb8d16b38af408586aaebcbc70c4">ff_cbs_close</a>(&amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#afaa0e64941b5672a0ada3d5bc29bf2a2">cbc</a>);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;priv-&gt;<a class="code" href="struct_v_a_a_p_i_encode_h264_context.html#a0d39bf75ecc061610664d07dfdfa71af">sei_identifier_string</a>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libavcodec_2vaapi__encode_8c.html#ac75ceee4c1b5bb20cff6639320bccf32">ff_vaapi_encode_close</a>(avctx);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;}</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#ad12dce0a7bf9d908b172a28155b3d261"> 1241</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(VAAPIEncodeH264Context, x)</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d"> 1242</a></span>&#160;<span class="preprocessor">#define FLAGS (AV_OPT_FLAG_VIDEO_PARAM | AV_OPT_FLAG_ENCODING_PARAM)</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a7c075003d88924cbbab6d93568c8a393"> 1243</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="vaapi__encode__h264_8c.html#a7c075003d88924cbbab6d93568c8a393">vaapi_encode_h264_options</a>[] = {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="vaapi__encode_8h.html#a47f5bde2d480d3ab8d0f591a38b25080">VAAPI_ENCODE_COMMON_OPTIONS</a>,</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <a class="code" href="vaapi__encode_8h.html#a52fce90aec391a11f7587f490bc5cf9a">VAAPI_ENCODE_RC_OPTIONS</a>,</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    { <span class="stringliteral">&quot;qp&quot;</span>, <span class="stringliteral">&quot;Constant QP (for P-frames; scaled by qfactor/qoffset for I/B)&quot;</span>,</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <a class="code" href="vaapi__encode__h264_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(qp), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, { .i64 = 0 }, 0, 52, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    { <span class="stringliteral">&quot;quality&quot;</span>, <span class="stringliteral">&quot;Set encode quality (trades off against speed, higher is faster)&quot;</span>,</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <a class="code" href="vaapi__encode__h264_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="rate__distortion_8txt.html#a098873585d16d8a7349bd6424684d45c">quality</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, { .i64 = -1 }, -1, INT_MAX, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    { <span class="stringliteral">&quot;coder&quot;</span>, <span class="stringliteral">&quot;Entropy coder type&quot;</span>,</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <a class="code" href="vaapi__encode__h264_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(coder), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, { .i64 = 1 }, 0, 1, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;coder&quot;</span> },</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        { <span class="stringliteral">&quot;cavlc&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = 0 }, INT_MIN, INT_MAX, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;coder&quot;</span> },</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        { <span class="stringliteral">&quot;cabac&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = 1 }, INT_MIN, INT_MAX, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;coder&quot;</span> },</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        { <span class="stringliteral">&quot;vlc&quot;</span>,   <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = 0 }, INT_MIN, INT_MAX, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;coder&quot;</span> },</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        { <span class="stringliteral">&quot;ac&quot;</span>,    <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = 1 }, INT_MIN, INT_MAX, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;coder&quot;</span> },</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    { <span class="stringliteral">&quot;aud&quot;</span>, <span class="stringliteral">&quot;Include AUD&quot;</span>,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <a class="code" href="vaapi__encode__h264_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="cbs__h264__syntax__template_8c.html#a7504445d398235ced7f02944d1146623">aud</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, { .i64 = 0 }, 0, 1, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    { <span class="stringliteral">&quot;sei&quot;</span>, <span class="stringliteral">&quot;Set SEI to include&quot;</span>,</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <a class="code" href="vaapi__encode__h264_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a7aaeee142b88a3078ddc57c644b49a7e">AV_OPT_TYPE_FLAGS</a>,</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      { .i64 = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3">SEI_IDENTIFIER</a> | <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">SEI_TIMING</a> | <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba754d87f1bfd9ebdff42d90c98cff764a">SEI_RECOVERY_POINT</a> },</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      0, INT_MAX, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;sei&quot;</span> },</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    { <span class="stringliteral">&quot;identifier&quot;</span>, <span class="stringliteral">&quot;Include encoder version identifier&quot;</span>,</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3">SEI_IDENTIFIER</a> },</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      INT_MIN, INT_MAX, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;sei&quot;</span> },</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    { <span class="stringliteral">&quot;timing&quot;</span>, <span class="stringliteral">&quot;Include timing parameters (buffering_period and pic_timing)&quot;</span>,</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">SEI_TIMING</a> },</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      INT_MIN, INT_MAX, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;sei&quot;</span> },</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    { <span class="stringliteral">&quot;recovery_point&quot;</span>, <span class="stringliteral">&quot;Include recovery points where appropriate&quot;</span>,</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba754d87f1bfd9ebdff42d90c98cff764a">SEI_RECOVERY_POINT</a> },</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      INT_MIN, INT_MAX, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;sei&quot;</span> },</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    { <span class="stringliteral">&quot;profile&quot;</span>, <span class="stringliteral">&quot;Set profile (profile_idc and constraint_set*_flag)&quot;</span>,</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <a class="code" href="vaapi__encode__h264_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>,</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      { .i64 = <a class="code" href="avcodec_8h.html#a1d8d03f5be975b8a728574cbdb00c896">FF_PROFILE_UNKNOWN</a> }, <a class="code" href="avcodec_8h.html#a1d8d03f5be975b8a728574cbdb00c896">FF_PROFILE_UNKNOWN</a>, 0xffff, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;profile&quot;</span> },</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="preprocessor">#define PROFILE(name, value)  name, NULL, 0, AV_OPT_TYPE_CONST, \</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="preprocessor">      { .i64 = value }, 0, 0, FLAGS, &quot;profile&quot;</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#ac576ed29d05a998ce895176ea812bfb0">PROFILE</a>(<span class="stringliteral">&quot;constrained_baseline&quot;</span>, <a class="code" href="avcodec_8h.html#a9467289beec698b363d7319e454c351e">FF_PROFILE_H264_CONSTRAINED_BASELINE</a>) },</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#ac576ed29d05a998ce895176ea812bfb0">PROFILE</a>(<span class="stringliteral">&quot;main&quot;</span>,                 <a class="code" href="avcodec_8h.html#aa7d7e490128673e7747bb32ba7ea5486">FF_PROFILE_H264_MAIN</a>) },</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#ac576ed29d05a998ce895176ea812bfb0">PROFILE</a>(<span class="stringliteral">&quot;high&quot;</span>,                 <a class="code" href="avcodec_8h.html#a0ff6fe9cf1f7a1671d597b9524024332">FF_PROFILE_H264_HIGH</a>) },</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="preprocessor">#undef PROFILE</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    { <span class="stringliteral">&quot;level&quot;</span>, <span class="stringliteral">&quot;Set level (level_idc)&quot;</span>,</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      <a class="code" href="vaapi__encode__h264_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>,</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      { .i64 = <a class="code" href="avcodec_8h.html#a84a993ea19afa2cbda45b3283a598fe6">FF_LEVEL_UNKNOWN</a> }, <a class="code" href="avcodec_8h.html#a84a993ea19afa2cbda45b3283a598fe6">FF_LEVEL_UNKNOWN</a>, 0xff, <a class="code" href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;level&quot;</span> },</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="preprocessor">#define LEVEL(name, value) name, NULL, 0, AV_OPT_TYPE_CONST, \</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="preprocessor">      { .i64 = value }, 0, 0, FLAGS, &quot;level&quot;</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;1&quot;</span>,   10) },</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;1.1&quot;</span>, 11) },</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;1.2&quot;</span>, 12) },</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;1.3&quot;</span>, 13) },</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;2&quot;</span>,   20) },</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;2.1&quot;</span>, 21) },</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;2.2&quot;</span>, 22) },</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;3&quot;</span>,   30) },</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;3.1&quot;</span>, 31) },</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;3.2&quot;</span>, 32) },</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;4&quot;</span>,   40) },</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;4.1&quot;</span>, 41) },</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;4.2&quot;</span>, 42) },</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;5&quot;</span>,   50) },</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;5.1&quot;</span>, 51) },</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;5.2&quot;</span>, 52) },</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;6&quot;</span>,   60) },</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;6.1&quot;</span>, 61) },</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    { <a class="code" href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a>(<span class="stringliteral">&quot;6.2&quot;</span>, 62) },</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="preprocessor">#undef LEVEL</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;};</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#ab2aebe7204af5eabe276207de75b7b13"> 1316</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_codec_default.html">AVCodecDefault</a> <a class="code" href="vaapi__encode__h264_8c.html#ab2aebe7204af5eabe276207de75b7b13">vaapi_encode_h264_defaults</a>[] = {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    { <span class="stringliteral">&quot;b&quot;</span>,              <span class="stringliteral">&quot;0&quot;</span>   },</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    { <span class="stringliteral">&quot;bf&quot;</span>,             <span class="stringliteral">&quot;2&quot;</span>   },</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    { <span class="stringliteral">&quot;g&quot;</span>,              <span class="stringliteral">&quot;120&quot;</span> },</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    { <span class="stringliteral">&quot;i_qfactor&quot;</span>,      <span class="stringliteral">&quot;1&quot;</span>   },</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    { <span class="stringliteral">&quot;i_qoffset&quot;</span>,      <span class="stringliteral">&quot;0&quot;</span>   },</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    { <span class="stringliteral">&quot;b_qfactor&quot;</span>,      <span class="stringliteral">&quot;6/5&quot;</span> },</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    { <span class="stringliteral">&quot;b_qoffset&quot;</span>,      <span class="stringliteral">&quot;0&quot;</span>   },</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    { <span class="stringliteral">&quot;qmin&quot;</span>,           <span class="stringliteral">&quot;-1&quot;</span>  },</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    { <span class="stringliteral">&quot;qmax&quot;</span>,           <span class="stringliteral">&quot;-1&quot;</span>  },</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;};</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160; </div>
<div class="line"><a name="l01329"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#acfa10631ecb945aa5d6a11c5f0b26bda"> 1329</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <a class="code" href="vaapi__encode__h264_8c.html#acfa10631ecb945aa5d6a11c5f0b26bda">vaapi_encode_h264_class</a> = {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a> = <span class="stringliteral">&quot;h264_vaapi&quot;</span>,</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    .item_name  = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    .option     = <a class="code" href="vaapi__encode__h264_8c.html#a7c075003d88924cbbab6d93568c8a393">vaapi_encode_h264_options</a>,</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    .version    = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;};</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"><a class="line" href="vaapi__encode__h264_8c.html#a1d1850765286e60cb74dcf3a6ec6a2a9"> 1336</a></span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="vaapi__encode__h264_8c.html#a1d1850765286e60cb74dcf3a6ec6a2a9">ff_h264_vaapi_encoder</a> = {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>           = <span class="stringliteral">&quot;h264_vaapi&quot;</span>,</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;H.264/AVC (VAAPI)&quot;</span>),</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    .type           = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    .id             = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>,</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="vaapi__encode__h264_8c.html#ad9167b04e7bc7006d170280e7c222382">VAAPIEncodeH264Context</a>),</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>           = &amp;<a class="code" href="vaapi__encode__h264_8c.html#a22083d5e4363cb33737876ab629042c3">vaapi_encode_h264_init</a>,</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    .receive_packet = &amp;<a class="code" href="libavcodec_2vaapi__encode_8c.html#aa28619b3d9fec15b23657f531b1dd6ee">ff_vaapi_encode_receive_packet</a>,</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    .close          = &amp;<a class="code" href="vaapi__encode__h264_8c.html#a51660e555a780a73e3fe610e0575b4ca">vaapi_encode_h264_close</a>,</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    .priv_class     = &amp;<a class="code" href="vaapi__encode__h264_8c.html#acfa10631ecb945aa5d6a11c5f0b26bda">vaapi_encode_h264_class</a>,</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    .capabilities   = <a class="code" href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a> | <a class="code" href="group__lavc__core.html#gad4cbd44018d5bf16beefd73b465327c2">AV_CODEC_CAP_HARDWARE</a>,</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    .caps_internal  = <a class="code" href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a>,</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    .<a class="code" href="amfenc__h264_8c.html#a06a81528f29475b48d86ad34c9e65223">defaults</a>       = <a class="code" href="vaapi__encode__h264_8c.html#ab2aebe7204af5eabe276207de75b7b13">vaapi_encode_h264_defaults</a>,</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    .<a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a> = (<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a>[]) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5abb09cadf3b2d6b5ce5980401bcf638a8">AV_PIX_FMT_VAAPI</a>,</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>,</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    },</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    .hw_configs     = <a class="code" href="libavcodec_2vaapi__encode_8c.html#a35f8a0672b026556d23848415260b9e3">ff_vaapi_encode_hw_configs</a>,</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    .wrapper_name   = <span class="stringliteral">&quot;vaapi&quot;</span>,</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="avaapi__encode__h264_8c_html_a6ccad09b4a2a06ae178418fdccf5940d"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a></div><div class="ttdeci">#define FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01242">vaapi_encode_h264.c:1242</a></div></div>
<div class="ttc" id="ah264__sei_8h_html_a3b0ca74529cda763a8cc0848fcaf04fda097244dd42e69481e2f18330835b25c4"><div class="ttname"><a href="h264__sei_8h.html#a3b0ca74529cda763a8cc0848fcaf04fda097244dd42e69481e2f18330835b25c4">H264_SEI_TYPE_BUFFERING_PERIOD</a></div><div class="ttdeci">@ H264_SEI_TYPE_BUFFERING_PERIOD</div><div class="ttdoc">buffering period (H.264, D.1.1)</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00029">h264_sei.h:29</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a23bf5641f7800bd27a0c7695020c57d7"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a23bf5641f7800bd27a0c7695020c57d7">H264RawSliceHeader::adaptive_ref_pic_marking_mode_flag</a></div><div class="ttdeci">uint8_t adaptive_ref_pic_marking_mode_flag</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00406">cbs_h264.h:406</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a0f2f7eab693c3eb986542b62fb534e4e"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a0f2f7eab693c3eb986542b62fb534e4e">VAAPIEncodeH264Picture</a></div><div class="ttdeci">struct VAAPIEncodeH264Picture VAAPIEncodeH264Picture</div></div>
<div class="ttc" id="avaapi__encode_8h_html_adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b"><div class="ttname"><a href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a4a3d20bd96935a81d334d85be050639b">PICTURE_TYPE_B</a></div><div class="ttdeci">@ PICTURE_TYPE_B</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00058">vaapi_encode.h:58</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_ae53c00cf9e51297871ad4aed4d176d8b"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#ae53c00cf9e51297871ad4aed4d176d8b">VAAPIEncodeH264Context::sei_buffering_period</a></div><div class="ttdeci">H264RawSEIBufferingPeriod sei_buffering_period</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00096">vaapi_encode_h264.c:96</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_buffering_period_html"><div class="ttname"><a href="struct_h264_raw_s_e_i_buffering_period.html">H264RawSEIBufferingPeriod</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00233">cbs_h264.h:233</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="vaapi__encode__h264_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01241">vaapi_encode_h264.c:1241</a></div></div>
<div class="ttc" id="astruct_h264_raw_a_u_d_html_a240bd5da1007d03acaf0b775fe08d792"><div class="ttname"><a href="struct_h264_raw_a_u_d.html#a240bd5da1007d03acaf0b775fe08d792">H264RawAUD::nal_unit_header</a></div><div class="ttdeci">H264RawNALUnitHeader nal_unit_header</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00228">cbs_h264.h:228</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a6b53fda85ad61baa345edbd96cb8a33c"><div class="ttname"><a href="struct_a_v_codec_context.html#a6b53fda85ad61baa345edbd96cb8a33c">AVCodecContext::bit_rate</a></div><div class="ttdeci">int64_t bit_rate</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00576">avcodec.h:576</a></div></div>
<div class="ttc" id="asvq3_8c_html_abbb6c7c49508c1ac374683f2d1159e08"><div class="ttname"><a href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a></div><div class="ttdeci">uint8_t level</div><div class="ttdef"><b>Definition:</b> <a href="svq3_8c_source.html#l00205">svq3.c:205</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab649e8c599f5a0e2a30448e67a36deb6"><div class="ttname"><a href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">AVCodecContext::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1147</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_af015864e1cc8d3844d83def92ad2e158"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#af015864e1cc8d3844d83def92ad2e158">VAAPIEncodeH264Context::fixed_qp_idr</a></div><div class="ttdeci">int fixed_qp_idr</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00080">vaapi_encode_h264.c:80</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a41c0c9c8aa8e1fd12d65b18dd6948b09"><div class="ttname"><a href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a></div><div class="ttdeci">static av_cold int init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00035">avrndec.c:35</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a031628f5cee134074b409a835f3833c1"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a031628f5cee134074b409a835f3833c1">VAAPIEncodeH264Context::quality</a></div><div class="ttdeci">int quality</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00069">vaapi_encode_h264.c:69</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a7b20419c52cbcfb242f90a8b35edfc14"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a7b20419c52cbcfb242f90a8b35edfc14">VAAPIEncodePicture::recon_surface</a></div><div class="ttdeci">VASurfaceID recon_surface</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00094">vaapi_encode.h:94</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="alibavcodec_2version_8h_html_a391ab92645796653bdc9eed09e1f8e0b"><div class="ttname"><a href="libavcodec_2version_8h.html#a391ab92645796653bdc9eed09e1f8e0b">LIBAVCODEC_IDENT</a></div><div class="ttdeci">#define LIBAVCODEC_IDENT</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2version_8h_source.html#l00042">version.h:42</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a4d675b30e23806f0e355f97b42889ad4"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a4d675b30e23806f0e355f97b42889ad4">VAAPIEncodeH264Context::aud</a></div><div class="ttdeci">int aud</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00071">vaapi_encode_h264.c:71</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="acommon_8h_html_a09a0bb7d8fcfac416de7a5fe7fd8b0f1"><div class="ttname"><a href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a></div><div class="ttdeci">#define FFSWAP(type, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00099">common.h:99</a></div></div>
<div class="ttc" id="ah264__levels_8h_html"><div class="ttname"><a href="h264__levels_8h.html">h264_levels.h</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gab4faa0afdf35076914824200331defff"><div class="ttname"><a href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a></div><div class="ttdeci">#define AVERROR_EOF</div><div class="ttdoc">End of file.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00055">error.h:55</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gad4cbd44018d5bf16beefd73b465327c2"><div class="ttname"><a href="group__lavc__core.html#gad4cbd44018d5bf16beefd73b465327c2">AV_CODEC_CAP_HARDWARE</a></div><div class="ttdeci">#define AV_CODEC_CAP_HARDWARE</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00150">codec.h:150</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_aeb5b431bc6374592dd6a8aeffc3be4b6"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#aeb5b431bc6374592dd6a8aeffc3be4b6">VAAPIEncodeH264Context::fixed_qp_b</a></div><div class="ttdeci">int fixed_qp_b</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00082">vaapi_encode_h264.c:82</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html_abc6126af1d45847bc59afa0aa3216b04adb158c6c9512d48028d0dba677934703"><div class="ttname"><a href="vaapi__encode_8h.html#abc6126af1d45847bc59afa0aa3216b04adb158c6c9512d48028d0dba677934703">FLAG_B_PICTURE_REFERENCES</a></div><div class="ttdeci">@ FLAG_B_PICTURE_REFERENCES</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00360">vaapi_encode.h:360</a></div></div>
<div class="ttc" id="aavcodec_8h_html_ae7b88419c24001277450732a5d3abe2b"><div class="ttname"><a href="avcodec_8h.html#ae7b88419c24001277450732a5d3abe2b">FF_PROFILE_H264_BASELINE</a></div><div class="ttdeci">#define FF_PROFILE_H264_BASELINE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01898">avcodec.h:1898</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_buffering_period_html_a8fba9bb1c1f658303776e8b130ee6c2e"><div class="ttname"><a href="struct_h264_raw_s_e_i_buffering_period.html#a8fba9bb1c1f658303776e8b130ee6c2e">H264RawSEIBufferingPeriod::seq_parameter_set_id</a></div><div class="ttdeci">uint8_t seq_parameter_set_id</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00234">cbs_h264.h:234</a></div></div>
<div class="ttc" id="acbs__h264_8h_html"><div class="ttname"><a href="cbs__h264_8h.html">cbs_h264.h</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_ab2aebe7204af5eabe276207de75b7b13"><div class="ttname"><a href="vaapi__encode__h264_8c.html#ab2aebe7204af5eabe276207de75b7b13">vaapi_encode_h264_defaults</a></div><div class="ttdeci">static const AVCodecDefault vaapi_encode_h264_defaults[]</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01316">vaapi_encode_h264.c:1316</a></div></div>
<div class="ttc" id="atests_2h264__levels_8c_html_a29811c049d12a1e95952f1115970281f"><div class="ttname"><a href="tests_2h264__levels_8c.html#a29811c049d12a1e95952f1115970281f">dpb_frames</a></div><div class="ttdeci">int dpb_frames</div><div class="ttdef"><b>Definition:</b> <a href="tests_2h264__levels_8c_source.html#l00159">h264_levels.c:159</a></div></div>
<div class="ttc" id="ah264__sei_8h_html_a3b0ca74529cda763a8cc0848fcaf04fda8e1e9cb874f69ced6089468c4d088071"><div class="ttname"><a href="h264__sei_8h.html#a3b0ca74529cda763a8cc0848fcaf04fda8e1e9cb874f69ced6089468c4d088071">H264_SEI_TYPE_RECOVERY_POINT</a></div><div class="ttdeci">@ H264_SEI_TYPE_RECOVERY_POINT</div><div class="ttdoc">recovery point (frame # to decoder sync)</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00035">h264_sei.h:35</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_afaa0e64941b5672a0ada3d5bc29bf2a2"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#afaa0e64941b5672a0ada3d5bc29bf2a2">VAAPIEncodeH264Context::cbc</a></div><div class="ttdeci">CodedBitstreamContext * cbc</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00087">vaapi_encode_h264.c:87</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a1c9bb8ee8f13d2db26389557d156c154"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a1c9bb8ee8f13d2db26389557d156c154">H264RawSliceHeader::memory_management_control_operation</a></div><div class="ttdeci">uint8_t memory_management_control_operation</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00408">cbs_h264.h:408</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_ad9a48882ed5baf7149fd70bb7884d003"><div class="ttname"><a href="struct_h264_raw_slice_header.html#ad9a48882ed5baf7149fd70bb7884d003">H264RawSliceHeader::nal_unit_header</a></div><div class="ttdeci">H264RawNALUnitHeader nal_unit_header</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00352">cbs_h264.h:352</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a990d7ec9ddfeda0d522e0856eaf84efd"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a990d7ec9ddfeda0d522e0856eaf84efd">VAAPIEncodePicture::prev</a></div><div class="ttdeci">struct VAAPIEncodePicture * prev</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00119">vaapi_encode.h:119</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a9467289beec698b363d7319e454c351e"><div class="ttname"><a href="avcodec_8h.html#a9467289beec698b363d7319e454c351e">FF_PROFILE_H264_CONSTRAINED_BASELINE</a></div><div class="ttdeci">#define FF_PROFILE_H264_CONSTRAINED_BASELINE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01899">avcodec.h:1899</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a7fb8a6a0e4cc7738b70c73a446d090d5"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a7fb8a6a0e4cc7738b70c73a446d090d5">vaapi_encode_h264_sei_identifier_uuid</a></div><div class="ttdeci">static const uint8_t vaapi_encode_h264_sei_identifier_uuid[16]</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00045">vaapi_encode_h264.c:45</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a1b765286d6f6cece0689584917515365"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a1b765286d6f6cece0689584917515365">VAAPIEncodeH264Context::common</a></div><div class="ttdeci">VAAPIEncodeContext common</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00065">vaapi_encode_h264.c:65</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_afc0f159afa4a21500b456d9551e14804"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#afc0f159afa4a21500b456d9551e14804">H264RawHRD::cpb_cnt_minus1</a></div><div class="ttdeci">uint8_t cpb_cnt_minus1</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00053">cbs_h264.h:53</a></div></div>
<div class="ttc" id="aqsvenc_8c_html_aacd2c6f4a09d71ea05bdcc1c2e9d42dd"><div class="ttname"><a href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a></div><div class="ttdeci">mfxU16 profile</div><div class="ttdef"><b>Definition:</b> <a href="qsvenc_8c_source.html#l00045">qsvenc.c:45</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a0ba4a3a26efa17546e15e5f12b30fd3e"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a0ba4a3a26efa17546e15e5f12b30fd3e">VAAPIEncodeH264Context::dpb_frames</a></div><div class="ttdeci">int dpb_frames</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00084">vaapi_encode_h264.c:84</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a></div><div class="ttdeci">@ AVCOL_RANGE_JPEG</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00586">pixfmt.h:586</a></div></div>
<div class="ttc" id="acbs_8c_html_aaa28071334c4823ab5d299a458c06070"><div class="ttname"><a href="cbs_8c.html#aaa28071334c4823ab5d299a458c06070">ff_cbs_fragment_reset</a></div><div class="ttdeci">void ff_cbs_fragment_reset(CodedBitstreamFragment *frag)</div><div class="ttdef"><b>Definition:</b> <a href="cbs_8c_source.html#l00147">cbs.c:147</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_acfa10631ecb945aa5d6a11c5f0b26bda"><div class="ttname"><a href="vaapi__encode__h264_8c.html#acfa10631ecb945aa5d6a11c5f0b26bda">vaapi_encode_h264_class</a></div><div class="ttdeci">static const AVClass vaapi_encode_h264_class</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01329">vaapi_encode_h264.c:1329</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_picture_html"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_picture.html">VAAPIEncodeH264Picture</a></div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00050">vaapi_encode_h264.c:50</a></div></div>
<div class="ttc" id="astruct_coded_bitstream_context_html"><div class="ttname"><a href="struct_coded_bitstream_context.html">CodedBitstreamContext</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs_8h_source.html#l00170">cbs.h:170</a></div></div>
<div class="ttc" id="acbs_8c_html_a6dbebb8d16b38af408586aaebcbc70c4"><div class="ttname"><a href="cbs_8c.html#a6dbebb8d16b38af408586aaebcbc70c4">ff_cbs_close</a></div><div class="ttdeci">void ff_cbs_close(CodedBitstreamContext **ctx_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="cbs_8c_source.html#l00121">cbs.c:121</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab"><div class="ttname"><a href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab">AVCOL_TRC_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_TRC_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00486">pixfmt.h:486</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="aavcodec_8h_html_adbd58c1bfa90fb3b5520d76ba9744251"><div class="ttname"><a href="avcodec_8h.html#adbd58c1bfa90fb3b5520d76ba9744251">FF_PROFILE_H264_HIGH_444_PREDICTIVE</a></div><div class="ttdeci">#define FF_PROFILE_H264_HIGH_444_PREDICTIVE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01910">avcodec.h:1910</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a0c36b2bd9f63727e9f24364f981280b1"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a0c36b2bd9f63727e9f24364f981280b1">vaapi_encode_h264_init_picture_params</a></div><div class="ttdeci">static int vaapi_encode_h264_init_picture_params(AVCodecContext *avctx, VAAPIEncodePicture *pic)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00609">vaapi_encode_h264.c:609</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga9b58b28e2d429b930b69db19877f76a8"><div class="ttname"><a href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a></div><div class="ttdeci">#define AV_LOG_VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00210">log.h:210</a></div></div>
<div class="ttc" id="alibavcodec_2vaapi__encode_8c_html_ac75ceee4c1b5bb20cff6639320bccf32"><div class="ttname"><a href="libavcodec_2vaapi__encode_8c.html#ac75ceee4c1b5bb20cff6639320bccf32">ff_vaapi_encode_close</a></div><div class="ttdeci">av_cold int ff_vaapi_encode_close(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2vaapi__encode_8c_source.html#l02528">vaapi_encode.c:2528</a></div></div>
<div class="ttc" id="acbs_8h_html"><div class="ttname"><a href="cbs_8h.html">cbs.h</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a84a993ea19afa2cbda45b3283a598fe6"><div class="ttname"><a href="avcodec_8h.html#a84a993ea19afa2cbda45b3283a598fe6">FF_LEVEL_UNKNOWN</a></div><div class="ttdeci">#define FF_LEVEL_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01983">avcodec.h:1983</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a427e308515e79f6f553e5f0cf60e9562"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a427e308515e79f6f553e5f0cf60e9562">H264RawSliceHeader::rplm_l0</a></div><div class="ttdeci">struct H264RawSliceHeader::@4 rplm_l0[H264_MAX_RPLM_COUNT]</div></div>
<div class="ttc" id="aavcodec_8h_html_a3fe8b4d9543555b47366600e3e77fc47"><div class="ttname"><a href="avcodec_8h.html#a3fe8b4d9543555b47366600e3e77fc47">FF_PROFILE_H264_CAVLC_444</a></div><div class="ttdeci">#define FF_PROFILE_H264_CAVLC_444</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01912">avcodec.h:1912</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a6787143040c08e5c1da558371a732425"><div class="ttname"><a href="avcodec_8h.html#a6787143040c08e5c1da558371a732425">FF_COMPRESSION_DEFAULT</a></div><div class="ttdeci">#define FF_COMPRESSION_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00599">avcodec.h:599</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba424fc2af11450802d90237a8dbb162c3">SEI_IDENTIFIER</a></div><div class="ttdeci">@ SEI_IDENTIFIER</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00040">vaapi_encode_h264.c:40</a></div></div>
<div class="ttc" id="acbs_8c_html_afac1187cc18c3e4d8f3978f46437fb6a"><div class="ttname"><a href="cbs_8c.html#afac1187cc18c3e4d8f3978f46437fb6a">ff_cbs_fragment_free</a></div><div class="ttdeci">void ff_cbs_fragment_free(CodedBitstreamFragment *frag)</div><div class="ttdef"><b>Definition:</b> <a href="cbs_8c_source.html#l00161">cbs.c:161</a></div></div>
<div class="ttc" id="arate__distortion_8txt_html_a098873585d16d8a7349bd6424684d45c"><div class="ttname"><a href="rate__distortion_8txt.html#a098873585d16d8a7349bd6424684d45c">quality</a></div><div class="ttdeci">trying all byte sequences megabyte in length and selecting the best looking sequence will yield cases to try But a word about quality</div><div class="ttdef"><b>Definition:</b> <a href="rate__distortion_8txt_source.html#l00012">rate_distortion.txt:12</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_recovery_point_html_a7f72719a3d4025baa2afe68336b7eb1c"><div class="ttname"><a href="struct_h264_raw_s_e_i_recovery_point.html#a7f72719a3d4025baa2afe68336b7eb1c">H264RawSEIRecoveryPoint::recovery_frame_cnt</a></div><div class="ttdeci">uint16_t recovery_frame_cnt</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00293">cbs_h264.h:293</a></div></div>
<div class="ttc" id="atests_2h264__levels_8c_html_a0e35b8d74e1ac59b82f506293654d26d"><div class="ttname"><a href="tests_2h264__levels_8c.html#a0e35b8d74e1ac59b82f506293654d26d">framerate</a></div><div class="ttdeci">int framerate</div><div class="ttdef"><b>Definition:</b> <a href="tests_2h264__levels_8c_source.html#l00065">h264_levels.c:65</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html_abc6126af1d45847bc59afa0aa3216b04a4894ca430a745f72a320a8510f49abbf"><div class="ttname"><a href="vaapi__encode_8h.html#abc6126af1d45847bc59afa0aa3216b04a4894ca430a745f72a320a8510f49abbf">FLAG_B_PICTURES</a></div><div class="ttdeci">@ FLAG_B_PICTURES</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00358">vaapi_encode.h:358</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a0b5603bae3f5d92488a246b62b7393e6"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a0b5603bae3f5d92488a246b62b7393e6">VAAPIEncodePicture::codec_picture_params</a></div><div class="ttdeci">void * codec_picture_params</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00103">vaapi_encode.h:103</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_user_data_unregistered_html"><div class="ttname"><a href="struct_h264_raw_s_e_i_user_data_unregistered.html">H264RawSEIUserDataUnregistered</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00285">cbs_h264.h:285</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_picture_html_a6f723213a2606427379e4c5e584b3a42"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_picture.html#a6f723213a2606427379e4c5e584b3a42">VAAPIEncodeH264Picture::last_idr_frame</a></div><div class="ttdeci">int64_t last_idr_frame</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00054">vaapi_encode_h264.c:54</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_pic_timing_html"><div class="ttname"><a href="struct_h264_raw_s_e_i_pic_timing.html">H264RawSEIPicTiming</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00258">cbs_h264.h:258</a></div></div>
<div class="ttc" id="ah264__levels_8c_html_af7d0096e87ed51a278d9f99dd9d38f86"><div class="ttname"><a href="h264__levels_8c.html#af7d0096e87ed51a278d9f99dd9d38f86">ff_h264_guess_level</a></div><div class="ttdeci">const H264LevelDescriptor * ff_h264_guess_level(int profile_idc, int64_t bitrate, int framerate, int width, int height, int max_dec_frame_buffering)</div><div class="ttdef"><b>Definition:</b> <a href="h264__levels_8c_source.html#l00090">h264_levels.c:90</a></div></div>
<div class="ttc" id="astruct_a_v_codec_default_html"><div class="ttname"><a href="struct_a_v_codec_default.html">AVCodecDefault</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00208">internal.h:208</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html"><div class="ttname"><a href="vaapi__encode_8h.html">vaapi_encode.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac60a0209642b5d74068cab0ac35a78b2"><div class="ttname"><a href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">AVCodecContext::chroma_sample_location</a></div><div class="ttdeci">enum AVChromaLocation chroma_sample_location</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1168</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3a41b3e5bde23b877799f6e72dac8ef3"><div class="ttname"><a href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">AVCodecContext::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1140</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a455b050a491e1ce16c0b80781643be42"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a455b050a491e1ce16c0b80781643be42">VAAPIEncodePicture::type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00085">vaapi_encode.h:85</a></div></div>
<div class="ttc" id="astruct_h264_raw_a_u_d_html"><div class="ttname"><a href="struct_h264_raw_a_u_d.html">H264RawAUD</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00227">cbs_h264.h:227</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_buffering_period_html_ab6b444bc73e0b173d1714566fc7264ad"><div class="ttname"><a href="struct_h264_raw_s_e_i_buffering_period.html#ab6b444bc73e0b173d1714566fc7264ad">H264RawSEIBufferingPeriod::initial_cpb_removal_delay</a></div><div class="ttdeci">uint32_t initial_cpb_removal_delay[H264_MAX_CPB_CNT]</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00236">cbs_h264.h:236</a></div></div>
<div class="ttc" id="aamfenc__h264_8c_html_a06a81528f29475b48d86ad34c9e65223"><div class="ttname"><a href="amfenc__h264_8c.html#a06a81528f29475b48d86ad34c9e65223">defaults</a></div><div class="ttdeci">static const AVCodecDefault defaults[]</div><div class="ttdef"><b>Definition:</b> <a href="amfenc__h264_8c_source.html#l00361">amfenc_h264.c:361</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a0ff6fe9cf1f7a1671d597b9524024332"><div class="ttname"><a href="avcodec_8h.html#a0ff6fe9cf1f7a1671d597b9524024332">FF_PROFILE_H264_HIGH</a></div><div class="ttdeci">#define FF_PROFILE_H264_HIGH</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01902">avcodec.h:1902</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a860450fba1f740387dc082792ad89517"><div class="ttname"><a href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf type</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_ab2cca1533816e0a218644b5ea3561c25"><div class="ttname"><a href="struct_h264_raw_slice_header.html#ab2cca1533816e0a218644b5ea3561c25">H264RawSliceHeader::first_mb_in_slice</a></div><div class="ttdeci">uint32_t first_mb_in_slice</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00354">cbs_h264.h:354</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga4fd9c0b8e663cf3d55e89fbc6ce71602"><div class="ttname"><a href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a></div><div class="ttdeci">int av_reduce(int *dst_num, int *dst_den, int64_t num, int64_t den, int64_t max)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00035">rational.c:35</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html">VAAPIEncodeH264Context</a></div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00064">vaapi_encode_h264.c:64</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_p_s_html"><div class="ttname"><a href="struct_h264_raw_s_p_s.html">H264RawSPS</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00111">cbs_h264.h:111</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html"><div class="ttname"><a href="struct_h264_raw_slice_header.html">H264RawSliceHeader</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00351">cbs_h264.h:351</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a31a2ef78cf186083c2c676dda8e226db"><div class="ttname"><a href="struct_a_v_codec_context.html#a31a2ef78cf186083c2c676dda8e226db">AVCodecContext::b_quant_offset</a></div><div class="ttdeci">float b_quant_offset</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00808">avcodec.h:808</a></div></div>
<div class="ttc" id="astruct_h264_raw_n_a_l_unit_header_html_a5afb254b89837b4ceeadaced595e5605"><div class="ttname"><a href="struct_h264_raw_n_a_l_unit_header.html#a5afb254b89837b4ceeadaced595e5605">H264RawNALUnitHeader::nal_ref_idc</a></div><div class="ttdeci">uint8_t nal_ref_idc</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00041">cbs_h264.h:41</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html_abc6126af1d45847bc59afa0aa3216b04abe8e15036905c4de8a6355add509c896"><div class="ttname"><a href="vaapi__encode_8h.html#abc6126af1d45847bc59afa0aa3216b04abe8e15036905c4de8a6355add509c896">FLAG_NON_IDR_KEY_PICTURES</a></div><div class="ttdeci">@ FLAG_NON_IDR_KEY_PICTURES</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00363">vaapi_encode.h:363</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_aa63e42496180d1c0624247adaf18eae7"><div class="ttname"><a href="struct_h264_raw_slice_header.html#aa63e42496180d1c0624247adaf18eae7">H264RawSliceHeader::slice_type</a></div><div class="ttdeci">uint8_t slice_type</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00355">cbs_h264.h:355</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a1d1850765286e60cb74dcf3a6ec6a2a9"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a1d1850765286e60cb74dcf3a6ec6a2a9">ff_h264_vaapi_encoder</a></div><div class="ttdeci">AVCodec ff_h264_vaapi_encoder</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01336">vaapi_encode_h264.c:1336</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_aecfd62f2069a931e797359eebc0a6fe6"><div class="ttname"><a href="struct_h264_raw_slice_header.html#aecfd62f2069a931e797359eebc0a6fe6">H264RawSliceHeader::pic_order_cnt_lsb</a></div><div class="ttdeci">uint16_t pic_order_cnt_lsb</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00367">cbs_h264.h:367</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_aa119dd6b0cbec47b83cc0a4bd91b4771"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#aa119dd6b0cbec47b83cc0a4bd91b4771">VAAPIEncodeH264Context::mb_width</a></div><div class="ttdeci">int mb_width</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00077">vaapi_encode_h264.c:77</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_afe9b149e17b9e28823ab3cf9732b990d"><div class="ttname"><a href="struct_a_v_codec_context.html#afe9b149e17b9e28823ab3cf9732b990d">AVCodecContext::i_quant_offset</a></div><div class="ttdeci">float i_quant_offset</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00838">avcodec.h:838</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a7fc4ecc324cd5096f219ebc00623b561"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a7fc4ecc324cd5096f219ebc00623b561">LEVEL</a></div><div class="ttdeci">#define LEVEL(name, value)</div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_user_data_unregistered_html_a8d7b87926eb9589d4da8211ba855a8f1"><div class="ttname"><a href="struct_h264_raw_s_e_i_user_data_unregistered.html#a8d7b87926eb9589d4da8211ba855a8f1">H264RawSEIUserDataUnregistered::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00287">cbs_h264.h:287</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_aec3ef055d4ee1fc29eaeb93da5c5442e"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#aec3ef055d4ee1fc29eaeb93da5c5442e">VAAPIEncodeH264Context::mb_height</a></div><div class="ttdeci">int mb_height</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00078">vaapi_encode_h264.c:78</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba7e20eaba3c2969ad80d2e9a791cf1be0"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba7e20eaba3c2969ad80d2e9a791cf1be0">H264_NAL_PPS</a></div><div class="ttdeci">@ H264_NAL_PPS</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00042">h264.h:42</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_ae54604ec451cc4578669a1fc98a264dc"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#ae54604ec451cc4578669a1fc98a264dc">VAAPIEncodeH264Context::raw_sei</a></div><div class="ttdeci">H264RawSEI raw_sei</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00093">vaapi_encode_h264.c:93</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_ae650bd4266736780ffb8c1e363e7403b"><div class="ttname"><a href="struct_h264_raw_slice_header.html#ae650bd4266736780ffb8c1e363e7403b">H264RawSliceHeader::difference_of_pic_nums_minus1</a></div><div class="ttdeci">int32_t difference_of_pic_nums_minus1</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00409">cbs_h264.h:409</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a4c0734a38e8323f17dc59846dec6af0d"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a4c0734a38e8323f17dc59846dec6af0d">H264RawSliceHeader::pic_parameter_set_id</a></div><div class="ttdeci">uint8_t pic_parameter_set_id</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00357">cbs_h264.h:357</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a22083d5e4363cb33737876ab629042c3"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a22083d5e4363cb33737876ab629042c3">vaapi_encode_h264_init</a></div><div class="ttdeci">static av_cold int vaapi_encode_h264_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01167">vaapi_encode_h264.c:1167</a></div></div>
<div class="ttc" id="astruct_coded_bitstream_fragment_html_abc4ae0aacd4ad9726b85446629e5ddba"><div class="ttname"><a href="struct_coded_bitstream_fragment.html#abc4ae0aacd4ad9726b85446629e5ddba">CodedBitstreamFragment::data_size</a></div><div class="ttdeci">size_t data_size</div><div class="ttdef"><b>Definition:</b> <a href="cbs_8h_source.html#l00131">cbs.h:131</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a0ee6ad6ac104e4e917959639a96a338b"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a0ee6ad6ac104e4e917959639a96a338b">H264RawSliceHeader::abs_diff_pic_num_minus1</a></div><div class="ttdeci">int32_t abs_diff_pic_num_minus1</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00382">cbs_h264.h:382</a></div></div>
<div class="ttc" id="acbs__h264_8h_html_a2678c16d522989e4f6e0bbcbe6312021"><div class="ttname"><a href="cbs__h264_8h.html#a2678c16d522989e4f6e0bbcbe6312021">H264RawSEIPicTiming</a></div><div class="ttdeci">struct H264RawSEIPicTiming H264RawSEIPicTiming</div></div>
<div class="ttc" id="aavcodec_8h_html_a1cccf98e5b74d346fee7fc6782cf935b"><div class="ttname"><a href="avcodec_8h.html#a1cccf98e5b74d346fee7fc6782cf935b">FF_PROFILE_H264_EXTENDED</a></div><div class="ttdeci">#define FF_PROFILE_H264_EXTENDED</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01901">avcodec.h:1901</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_recovery_point_html"><div class="ttname"><a href="struct_h264_raw_s_e_i_recovery_point.html">H264RawSEIRecoveryPoint</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00292">cbs_h264.h:292</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a1d8d03f5be975b8a728574cbdb00c896"><div class="ttname"><a href="avcodec_8h.html#a1d8d03f5be975b8a728574cbdb00c896">FF_PROFILE_UNKNOWN</a></div><div class="ttdeci">#define FF_PROFILE_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01860">avcodec.h:1860</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_aa1219ee396a270ba57fd4f2306b64c6e"><div class="ttname"><a href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00162">libkvazaar.c:300</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5252d34fbce300228d4dbda19a8c3293"><div class="ttname"><a href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">AVCodecContext::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00905">avcodec.h:905</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="astruct_coded_bitstream_fragment_html_ac13b60257e4932c7ca183b29a7581bb4"><div class="ttname"><a href="struct_coded_bitstream_fragment.html#ac13b60257e4932c7ca183b29a7581bb4">CodedBitstreamFragment::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="cbs_8h_source.html#l00124">cbs.h:124</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_ace3b5d98e4c9458d680e62562a2176a8"><div class="ttname"><a href="vaapi__encode__h264_8c.html#ace3b5d98e4c9458d680e62562a2176a8">vaapi_encode_h264_write_extra_header</a></div><div class="ttdeci">static int vaapi_encode_h264_write_extra_header(AVCodecContext *avctx, VAAPIEncodePicture *pic, int index, int *type, char *data, size_t *data_len)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00206">vaapi_encode_h264.c:206</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a7c075003d88924cbbab6d93568c8a393"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a7c075003d88924cbbab6d93568c8a393">vaapi_encode_h264_options</a></div><div class="ttdeci">static const AVOption vaapi_encode_h264_options[]</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01243">vaapi_encode_h264.c:1243</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_a3ce49f07a42957c3d2fcaa75f7d5d495"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#a3ce49f07a42957c3d2fcaa75f7d5d495">H264RawHRD::cbr_flag</a></div><div class="ttdeci">uint8_t cbr_flag[H264_MAX_CPB_CNT]</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00059">cbs_h264.h:59</a></div></div>
<div class="ttc" id="alibavcodec_2vaapi__encode_8c_html_aa28619b3d9fec15b23657f531b1dd6ee"><div class="ttname"><a href="libavcodec_2vaapi__encode_8c.html#aa28619b3d9fec15b23657f531b1dd6ee">ff_vaapi_encode_receive_packet</a></div><div class="ttdeci">int ff_vaapi_encode_receive_packet(AVCodecContext *avctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2vaapi__encode_8c_source.html#l01154">vaapi_encode.c:1154</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a65a8cf3b06dfd7b612cb28dada9c7ce7"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a65a8cf3b06dfd7b612cb28dada9c7ce7">VAAPIEncodeH264Context::fixed_qp_p</a></div><div class="ttdeci">int fixed_qp_p</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00081">vaapi_encode_h264.c:81</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a9343bf8e5072f036f59d6c225b8bed27"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a9343bf8e5072f036f59d6c225b8bed27">VAAPIEncodeH264Context::sei_recovery_point</a></div><div class="ttdeci">H264RawSEIRecoveryPoint sei_recovery_point</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00098">vaapi_encode_h264.c:98</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a0d39bf75ecc061610664d07dfdfa71af"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a0d39bf75ecc061610664d07dfdfa71af">VAAPIEncodeH264Context::sei_identifier_string</a></div><div class="ttdeci">char * sei_identifier_string</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00100">vaapi_encode_h264.c:100</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942">AVCOL_PRI_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_PRI_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00461">pixfmt.h:461</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a></div><div class="ttdeci">@ AV_CODEC_ID_H264</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00076">codec_id.h:76</a></div></div>
<div class="ttc" id="astruct_a_v_class_html_aa8883e113a3f2965abd008f7667db7eb"><div class="ttname"><a href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">AVClass::class_name</a></div><div class="ttdeci">const char * class_name</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00072">log.h:72</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba278836ec16f5c10327364e56f0dfb5c0">SEI_TIMING</a></div><div class="ttdeci">@ SEI_TIMING</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00039">vaapi_encode_h264.c:39</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55baca65838438d536410bdc17544ec1531c"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baca65838438d536410bdc17544ec1531c">MAX_DPB_SIZE</a></div><div class="ttdeci">@ MAX_DPB_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00042">vaapi_encode.h:42</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a766b1e3c4288cc9024524fee987c1fce"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a766b1e3c4288cc9024524fee987c1fce">VAAPIEncodePicture::is_reference</a></div><div class="ttdeci">int is_reference</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00106">vaapi_encode.h:106</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_a88024f18cf21eef310c148ef2882f37b"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#a88024f18cf21eef310c148ef2882f37b">H264RawHRD::cpb_size_value_minus1</a></div><div class="ttdeci">uint32_t cpb_size_value_minus1[H264_MAX_CPB_CNT]</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00058">cbs_h264.h:58</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba9b569b7bafbb864fe260d3b84ad78387"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9b569b7bafbb864fe260d3b84ad78387">H264_NAL_SPS</a></div><div class="ttdeci">@ H264_NAL_SPS</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00041">h264.h:41</a></div></div>
<div class="ttc" id="agroup__lavu__ver_html_ga36e17e3fc9bcbe5c55820a8ac8b47e3c"><div class="ttname"><a href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a></div><div class="ttdeci">#define LIBAVUTIL_VERSION_INT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2version_8h_source.html#l00085">version.h:85</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_html"><div class="ttname"><a href="struct_h264_raw_slice.html">H264RawSlice</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00429">cbs_h264.h:429</a></div></div>
<div class="ttc" id="astruct_coded_bitstream_fragment_html"><div class="ttname"><a href="struct_coded_bitstream_fragment.html">CodedBitstreamFragment</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs_8h_source.html#l00118">cbs.h:118</a></div></div>
<div class="ttc" id="acbs_8c_html_a7407231caba0bf0ebde5ae921f81948d"><div class="ttname"><a href="cbs_8c.html#a7407231caba0bf0ebde5ae921f81948d">ff_cbs_insert_unit_content</a></div><div class="ttdeci">int ff_cbs_insert_unit_content(CodedBitstreamFragment *frag, int position, CodedBitstreamUnitType type, void *content, AVBufferRef *content_buf)</div><div class="ttdef"><b>Definition:</b> <a href="cbs_8c_source.html#l00721">cbs.c:721</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a00607efbf6665511840f09b80e257f50"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a00607efbf6665511840f09b80e257f50">VAAPIEncodePicture::nb_dpb_pics</a></div><div class="ttdeci">int nb_dpb_pics</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00111">vaapi_encode.h:111</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a6927dc652ae6241f1dfdbad4e12d3a40"><div class="ttname"><a href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">AVCodecContext::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01982">avcodec.h:1982</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga791fcd0dba1d19fe0c3677509344328e"><div class="ttname"><a href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a></div><div class="ttdeci">const char * av_default_item_name(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00235">log.c:235</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_pic_timing_html_a563a8368cbb1899ac33aa9c0da55efe2"><div class="ttname"><a href="struct_h264_raw_s_e_i_pic_timing.html#a563a8368cbb1899ac33aa9c0da55efe2">H264RawSEIPicTiming::cpb_removal_delay</a></div><div class="ttdeci">uint32_t cpb_removal_delay</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00259">cbs_h264.h:259</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_type_html_a4f12ecc975c957802691314dd58bcfd6"><div class="ttname"><a href="struct_v_a_a_p_i_encode_type.html#a4f12ecc975c957802691314dd58bcfd6">VAAPIEncodeType::profiles</a></div><div class="ttdeci">const VAAPIEncodeProfile * profiles</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00369">vaapi_encode.h:369</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba9f5ecee4fcf069f90853d39dda680dfe"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9f5ecee4fcf069f90853d39dda680dfe">H264_NAL_SLICE</a></div><div class="ttdeci">@ H264_NAL_SLICE</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00035">h264.h:35</a></div></div>
<div class="ttc" id="astruct_h264_raw_n_a_l_unit_header_html"><div class="ttname"><a href="struct_h264_raw_n_a_l_unit_header.html">H264RawNALUnitHeader</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00040">cbs_h264.h:40</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_aeca8b4e34ebd5e8ac5cd5fb31c5396ce"><div class="ttname"><a href="struct_h264_raw_slice_header.html#aeca8b4e34ebd5e8ac5cd5fb31c5396ce">H264RawSliceHeader::rplm_l1</a></div><div class="ttdeci">struct H264RawSliceHeader::@4 rplm_l1[H264_MAX_RPLM_COUNT]</div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_buffering_period_html_a0ab71e708243a70b127edcb6b628dbe3"><div class="ttname"><a href="struct_h264_raw_s_e_i_buffering_period.html#a0ab71e708243a70b127edcb6b628dbe3">H264RawSEIBufferingPeriod::nal</a></div><div class="ttdeci">struct H264RawSEIBufferingPeriod::@1 nal</div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_ac3287a57a3209ae7198040fe3a1f0568"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#ac3287a57a3209ae7198040fe3a1f0568">VAAPIEncodeH264Context::current_access_unit</a></div><div class="ttdeci">CodedBitstreamFragment current_access_unit</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00088">vaapi_encode_h264.c:88</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a0f6b20a3de817daa22251145f0967213"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a0f6b20a3de817daa22251145f0967213">VAAPIEncodePicture::refs</a></div><div class="ttdeci">struct VAAPIEncodePicture * refs[MAX_PICTURE_REFERENCES]</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00116">vaapi_encode.h:116</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a7b6f5446f01edb541e180562cb916349"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a7b6f5446f01edb541e180562cb916349">vaapi_encode_h264_profiles</a></div><div class="ttdeci">static const VAAPIEncodeProfile vaapi_encode_h264_profiles[]</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01127">vaapi_encode_h264.c:1127</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_ad70dd9f95be9b2851fcfff9e3460b213"><div class="ttname"><a href="vaapi__encode__h264_8c.html#ad70dd9f95be9b2851fcfff9e3460b213">vaapi_encode_h264_add_nal</a></div><div class="ttdeci">static int vaapi_encode_h264_add_nal(AVCodecContext *avctx, CodedBitstreamFragment *au, void *nal_unit)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00134">vaapi_encode_h264.c:134</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a3bd8c19054273e701494b69ad11c0462"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a3bd8c19054273e701494b69ad11c0462">VAAPIEncodeH264Context::raw_sps</a></div><div class="ttdeci">H264RawSPS raw_sps</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00091">vaapi_encode_h264.c:91</a></div></div>
<div class="ttc" id="acbs__h264__syntax__template_8c_html_a3dc51375a796326e3f512b374c328002"><div class="ttname"><a href="cbs__h264__syntax__template_8c.html#a3dc51375a796326e3f512b374c328002">sei</a></div><div class="ttdeci">static int FUNC() sei(CodedBitstreamContext *ctx, RWContext *rw, H264RawSEI *current)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264__syntax__template_8c_source.html#l00924">cbs_h264_syntax_template.c:924</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aaa374becbc2b5ee0bc1886048d151ea3e"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aaa374becbc2b5ee0bc1886048d151ea3e">AVCOL_RANGE_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_RANGE_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00552">pixfmt.h:552</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_html_aa30f38df5fd49b4a7411accf949ddddd"><div class="ttname"><a href="struct_h264_raw_slice.html#aa30f38df5fd49b4a7411accf949ddddd">H264RawSlice::header</a></div><div class="ttdeci">H264RawSliceHeader header</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00430">cbs_h264.h:430</a></div></div>
<div class="ttc" id="agxfenc_8c_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="gxfenc_8c_source.html#l00089">gxfenc.c:89</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a7abe7095de73df98df4895bf9e25fc6b"><div class="ttname"><a href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">AVCodecContext::profile</a></div><div class="ttdeci">int profile</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01859">avcodec.h:1859</a></div></div>
<div class="ttc" id="astruct_h264_raw_n_a_l_unit_header_html_aff0731b20305b6d42b49521b4f06899b"><div class="ttname"><a href="struct_h264_raw_n_a_l_unit_header.html#aff0731b20305b6d42b49521b4f06899b">H264RawNALUnitHeader::nal_unit_type</a></div><div class="ttdeci">uint8_t nal_unit_type</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00042">cbs_h264.h:42</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a3ade1bdb5a27abd0415e91bd9de83f18"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a3ade1bdb5a27abd0415e91bd9de83f18">H264RawSliceHeader::mmco</a></div><div class="ttdeci">struct H264RawSliceHeader::@5 mmco[H264_MAX_MMCO_COUNT]</div></div>
<div class="ttc" id="acbs__h264__syntax__template_8c_html_a7504445d398235ced7f02944d1146623"><div class="ttname"><a href="cbs__h264__syntax__template_8c.html#a7504445d398235ced7f02944d1146623">aud</a></div><div class="ttdeci">static int FUNC() aud(CodedBitstreamContext *ctx, RWContext *rw, H264RawAUD *current)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264__syntax__template_8c_source.html#l01006">cbs_h264_syntax_template.c:1006</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_html"><div class="ttname"><a href="struct_h264_raw_s_e_i.html">H264RawSEI</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00344">cbs_h264.h:344</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_af7c5db5c664a1ac29073f1e933c4e854"><div class="ttname"><a href="vaapi__encode__h264_8c.html#af7c5db5c664a1ac29073f1e933c4e854">vaapi_encode_h264_write_access_unit</a></div><div class="ttdeci">static int vaapi_encode_h264_write_access_unit(AVCodecContext *avctx, char *data, size_t *data_len, CodedBitstreamFragment *au)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00108">vaapi_encode_h264.c:108</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a40a7fdf60f853d9140bbe1204a66efb2"><div class="ttname"><a href="struct_a_v_codec_context.html#a40a7fdf60f853d9140bbe1204a66efb2">AVCodecContext::b_quant_factor</a></div><div class="ttdeci">float b_quant_factor</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00795">avcodec.h:795</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="aaf__superequalizer_8c_html_a24cd1a1b46bb75ded27b66423c63c137"><div class="ttname"><a href="af__superequalizer_8c.html#a24cd1a1b46bb75ded27b66423c63c137">hn</a></div><div class="ttdeci">static float hn(int n, EqParameter *param, float fs)</div><div class="ttdef"><b>Definition:</b> <a href="af__superequalizer_8c_source.html#l00091">af_superequalizer.c:91</a></div></div>
<div class="ttc" id="acbs__h264__syntax__template_8c_html_a1e6d2c6dff68c6128ac0dcc8d2d9b77f"><div class="ttname"><a href="cbs__h264__syntax__template_8c.html#a1e6d2c6dff68c6128ac0dcc8d2d9b77f">pps</a></div><div class="ttdeci">static int FUNC() pps(CodedBitstreamContext *ctx, RWContext *rw, H264RawPPS *current)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264__syntax__template_8c_source.html#l00404">cbs_h264_syntax_template.c:404</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html_a52fce90aec391a11f7587f490bc5cf9a"><div class="ttname"><a href="vaapi__encode_8h.html#a52fce90aec391a11f7587f490bc5cf9a">VAAPI_ENCODE_RC_OPTIONS</a></div><div class="ttdeci">#define VAAPI_ENCODE_RC_OPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00463">vaapi_encode.h:463</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a65b6dedc096e294a66bf12cf69f51b39"><div class="ttname"><a href="avcodec_8h.html#a65b6dedc096e294a66bf12cf69f51b39">FF_PROFILE_H264_HIGH_422</a></div><div class="ttdeci">#define FF_PROFILE_H264_HIGH_422</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01906">avcodec.h:1906</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_ad30cbc039cacbceb6ccc9621c5b2f288"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#ad30cbc039cacbceb6ccc9621c5b2f288">VAAPIEncodeH264Context::sei_cbr_workaround_needed</a></div><div class="ttdeci">int sei_cbr_workaround_needed</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00104">vaapi_encode_h264.c:104</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a14afa6e874193ae23a27cf332903c3d9"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a14afa6e874193ae23a27cf332903c3d9">H264RawSliceHeader::idr_pic_id</a></div><div class="ttdeci">uint16_t idr_pic_id</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00365">cbs_h264.h:365</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a4c211c3d8a02e456836bf7c7102151b2"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a4c211c3d8a02e456836bf7c7102151b2">VAAPIEncodePicture::display_order</a></div><div class="ttdeci">int64_t display_order</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00073">vaapi_encode.h:73</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a5f40686681633cf85e60157d7049bb64"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a5f40686681633cf85e60157d7049bb64">vaapi_encode_h264_init_sequence_params</a></div><div class="ttdeci">static int vaapi_encode_h264_init_sequence_params(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00292">vaapi_encode_h264.c:292</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_slice_html_a21f0b514e8ad6659f990543021c83326"><div class="ttname"><a href="struct_v_a_a_p_i_encode_slice.html#a21f0b514e8ad6659f990543021c83326">VAAPIEncodeSlice::block_size</a></div><div class="ttdeci">int block_size</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00066">vaapi_encode.h:66</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_user_data_unregistered_html_a91f5f5cca983153a364bf1ed3428b63a"><div class="ttname"><a href="struct_h264_raw_s_e_i_user_data_unregistered.html#a91f5f5cca983153a364bf1ed3428b63a">H264RawSEIUserDataUnregistered::uuid_iso_iec_11578</a></div><div class="ttdeci">uint8_t uuid_iso_iec_11578[16]</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00286">cbs_h264.h:286</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a4d08b297e97eefd66c714df4fff493c8"><div class="ttname"><a href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">AVCodecContext::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02069">avcodec.h:2069</a></div></div>
<div class="ttc" id="acbs__h264_8h_html_ad416a2aab04e6f3988596580ac0da61a"><div class="ttname"><a href="cbs__h264_8h.html#ad416a2aab04e6f3988596580ac0da61a">H264RawAUD</a></div><div class="ttdeci">struct H264RawAUD H264RawAUD</div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a4afc9160be1e21ac23122f74333b83b1"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a4afc9160be1e21ac23122f74333b83b1">vaapi_encode_h264_write_slice_header</a></div><div class="ttdeci">static int vaapi_encode_h264_write_slice_header(AVCodecContext *avctx, VAAPIEncodePicture *pic, VAAPIEncodeSlice *slice, char *data, size_t *data_len)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00180">vaapi_encode_h264.c:180</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffafd1c2fae7783c113d76a017c6e7b638f"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffafd1c2fae7783c113d76a017c6e7b638f">AVCHROMA_LOC_UNSPECIFIED</a></div><div class="ttdeci">@ AVCHROMA_LOC_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00606">pixfmt.h:606</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab7bfeb9fa5840aac090e2b0bd0ef7589"><div class="ttname"><a href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">AVCodecContext::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00649">avcodec.h:649</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a5ebeafc2d09071a391659e2acf38dda3"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a5ebeafc2d09071a391659e2acf38dda3">VAAPIEncodePicture::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00102">vaapi_encode.h:102</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="asdr2_8c_html_abd18f6ed7dc5da8824a97bc504e4280e"><div class="ttname"><a href="sdr2_8c.html#abd18f6ed7dc5da8824a97bc504e4280e">header</a></div><div class="ttdeci">static const uint8_t header[24]</div><div class="ttdef"><b>Definition:</b> <a href="sdr2_8c_source.html#l00067">sdr2.c:67</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_af4e96d76fba1497e8f6d6fb270328141"><div class="ttname"><a href="vaapi__encode__h264_8c.html#af4e96d76fba1497e8f6d6fb270328141">vaapi_encode_h264_init_slice_params</a></div><div class="ttdeci">static int vaapi_encode_h264_init_slice_params(AVCodecContext *avctx, VAAPIEncodePicture *pic, VAAPIEncodeSlice *slice)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00829">vaapi_encode_h264.c:829</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a2d75a9fdf64581d998c2ded626ec3d7d"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a2d75a9fdf64581d998c2ded626ec3d7d">VAAPIEncodeH264Context::qp</a></div><div class="ttdeci">int qp</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00068">vaapi_encode_h264.c:68</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_ab70e9ab7351da221b8c769b67c0ab47a"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#ab70e9ab7351da221b8c769b67c0ab47a">VAAPIEncodeH264Context::coder</a></div><div class="ttdeci">int coder</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00070">vaapi_encode_h264.c:70</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html_a47f5bde2d480d3ab8d0f591a38b25080"><div class="ttname"><a href="vaapi__encode_8h.html#a47f5bde2d480d3ab8d0f591a38b25080">VAAPI_ENCODE_COMMON_OPTIONS</a></div><div class="ttdeci">#define VAAPI_ENCODE_COMMON_OPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00445">vaapi_encode.h:445</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a679cfd4b2525d2c74cf3736733ca8911"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a679cfd4b2525d2c74cf3736733ca8911">VAAPIEncodeH264Context::sei_pic_timing</a></div><div class="ttdeci">H264RawSEIPicTiming sei_pic_timing</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00097">vaapi_encode_h264.c:97</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_af7067b239d6821ab286c9c268d1bb799"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#af7067b239d6821ab286c9c268d1bb799">VAAPIEncodePicture::nb_refs</a></div><div class="ttdeci">int nb_refs</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00115">vaapi_encode.h:115</a></div></div>
<div class="ttc" id="ah264__sei_8h_html_a3b0ca74529cda763a8cc0848fcaf04fdae1ab6064907797caf937da4507d3ab11"><div class="ttname"><a href="h264__sei_8h.html#a3b0ca74529cda763a8cc0848fcaf04fdae1ab6064907797caf937da4507d3ab11">H264_SEI_TYPE_USER_DATA_UNREGISTERED</a></div><div class="ttdeci">@ H264_SEI_TYPE_USER_DATA_UNREGISTERED</div><div class="ttdoc">unregistered user data</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00034">h264_sei.h:34</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_picture_html_a38075cfa84242ecfccca88a571dbb132"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_picture.html#a38075cfa84242ecfccca88a571dbb132">VAAPIEncodeH264Picture::slice_type</a></div><div class="ttdeci">int slice_type</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00058">vaapi_encode_h264.c:58</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_user_data_unregistered_html_a5dc8beeaefae7b0ee81a359be3aa889a"><div class="ttname"><a href="struct_h264_raw_s_e_i_user_data_unregistered.html#a5dc8beeaefae7b0ee81a359be3aa889a">H264RawSEIUserDataUnregistered::data_length</a></div><div class="ttdeci">size_t data_length</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00289">cbs_h264.h:289</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_profile_html"><div class="ttname"><a href="struct_v_a_a_p_i_encode_profile.html">VAAPIEncodeProfile</a></div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00130">vaapi_encode.h:130</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5abb09cadf3b2d6b5ce5980401bcf638a8"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5abb09cadf3b2d6b5ce5980401bcf638a8">AV_PIX_FMT_VAAPI</a></div><div class="ttdeci">@ AV_PIX_FMT_VAAPI</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00122">pixfmt.h:122</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_picture_html_a1a32bab80a15cffb2b1531ae16e9559f"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_picture.html#a1a32bab80a15cffb2b1531ae16e9559f">VAAPIEncodeH264Picture::dpb_delay</a></div><div class="ttdeci">int dpb_delay</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00061">vaapi_encode_h264.c:61</a></div></div>
<div class="ttc" id="aintmath_8h_html_a2998e3360a5d1a5763e8c1008b7b2e1d"><div class="ttname"><a href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a></div><div class="ttdeci">#define av_log2</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00083">intmath.h:83</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a1ffc305ab4e3f95c8d9529fe2658f070"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a1ffc305ab4e3f95c8d9529fe2658f070">vaapi_encode_h264_write_sequence_header</a></div><div class="ttdeci">static int vaapi_encode_h264_write_sequence_header(AVCodecContext *avctx, char *data, size_t *data_len)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00152">vaapi_encode_h264.c:152</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a47a594ad119b9cd71947f02d655fe8de"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a47a594ad119b9cd71947f02d655fe8de">VAAPIEncodeH264Context::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00074">vaapi_encode_h264.c:74</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_a83158ec0aff37a9b2337525a0d4b7b0c"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#a83158ec0aff37a9b2337525a0d4b7b0c">VAAPIEncodePicture::dpb</a></div><div class="ttdeci">struct VAAPIEncodePicture * dpb[MAX_DPB_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00112">vaapi_encode.h:112</a></div></div>
<div class="ttc" id="ah264__sei_8h_html"><div class="ttname"><a href="h264__sei_8h.html">h264_sei.h</a></div></div>
<div class="ttc" id="astruct_h264_raw_s_e_i_buffering_period_html_ab448642b4e7598a6016fb885c5ebaf59"><div class="ttname"><a href="struct_h264_raw_s_e_i_buffering_period.html#ab448642b4e7598a6016fb885c5ebaf59">H264RawSEIBufferingPeriod::initial_cpb_removal_delay_offset</a></div><div class="ttdeci">uint32_t initial_cpb_removal_delay_offset[H264_MAX_CPB_CNT]</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00237">cbs_h264.h:237</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html_adf764cbdea00d65edcd07bb9953ad2b7a653f32daa38a2adc6d8abebcfdf44173"><div class="ttname"><a href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a653f32daa38a2adc6d8abebcfdf44173">PICTURE_TYPE_P</a></div><div class="ttdeci">@ PICTURE_TYPE_P</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00057">vaapi_encode.h:57</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_context_html"><div class="ttname"><a href="struct_v_a_a_p_i_encode_context.html">VAAPIEncodeContext</a></div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00175">vaapi_encode.h:175</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html_adf764cbdea00d65edcd07bb9953ad2b7ab56d9a8ef94cff8f64aff4c9f115503a"><div class="ttname"><a href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ab56d9a8ef94cff8f64aff4c9f115503a">PICTURE_TYPE_IDR</a></div><div class="ttdeci">@ PICTURE_TYPE_IDR</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00055">vaapi_encode.h:55</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_slice_html"><div class="ttname"><a href="struct_v_a_a_p_i_encode_slice.html">VAAPIEncodeSlice</a></div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00061">vaapi_encode.h:61</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_ac0a8ac4fc71d29eac10b802c681099df"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#ac0a8ac4fc71d29eac10b802c681099df">H264RawHRD::cpb_removal_delay_length_minus1</a></div><div class="ttdeci">uint8_t cpb_removal_delay_length_minus1</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00062">cbs_h264.h:62</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a62ca6a07a59bef2a174a21e29cf94310"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a62ca6a07a59bef2a174a21e29cf94310">H264RawSliceHeader::slice_qp_delta</a></div><div class="ttdeci">int8_t slice_qp_delta</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00417">cbs_h264.h:417</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ab4ca16b0fda02840383d0b6d08a44660"><div class="ttname"><a href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a></div><div class="ttdeci">#define FF_CODEC_CAP_INIT_CLEANUP</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00048">internal.h:48</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="acommon_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_ae55e10eec4d9eb34512be96f630a7f82"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#ae55e10eec4d9eb34512be96f630a7f82">VAAPIEncodeH264Context::sei</a></div><div class="ttdeci">int sei</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00072">vaapi_encode_h264.c:72</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a51660e555a780a73e3fe610e0575b4ca"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a51660e555a780a73e3fe610e0575b4ca">vaapi_encode_h264_close</a></div><div class="ttdeci">static av_cold int vaapi_encode_h264_close(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01230">vaapi_encode_h264.c:1230</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html">VAAPIEncodePicture</a></div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00070">vaapi_encode.h:70</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html_adf764cbdea00d65edcd07bb9953ad2b7acc8409d697602a190af45b91bb061624"><div class="ttname"><a href="vaapi__encode_8h.html#adf764cbdea00d65edcd07bb9953ad2b7acc8409d697602a190af45b91bb061624">PICTURE_TYPE_I</a></div><div class="ttdeci">@ PICTURE_TYPE_I</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00056">vaapi_encode.h:56</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="apixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2">AVCOL_SPC_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_SPC_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00515">pixfmt.h:515</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a9ee5bfe5f87de36d059560de0bb65ad5"><div class="ttname"><a href="avcodec_8h.html#a9ee5bfe5f87de36d059560de0bb65ad5">FF_PROFILE_H264_HIGH_10_INTRA</a></div><div class="ttdeci">#define FF_PROFILE_H264_HIGH_10_INTRA</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01904">avcodec.h:1904</a></div></div>
<div class="ttc" id="acbs_8c_html_ab102e392bf66ea81fd4ab660d0eb1a55"><div class="ttname"><a href="cbs_8c.html#ab102e392bf66ea81fd4ab660d0eb1a55">ff_cbs_write_fragment_data</a></div><div class="ttdeci">int ff_cbs_write_fragment_data(CodedBitstreamContext *ctx, CodedBitstreamFragment *frag)</div><div class="ttdef"><b>Definition:</b> <a href="cbs_8c_source.html#l00342">cbs.c:342</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html"><div class="ttname"><a href="struct_h264_raw_h_r_d.html">H264RawHRD</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00052">cbs_h264.h:52</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_picture_html_a255cf48e3e85a66be97180f9587b8bb9"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_picture.html#a255cf48e3e85a66be97180f9587b8bb9">VAAPIEncodeH264Picture::frame_num</a></div><div class="ttdeci">int frame_num</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00051">vaapi_encode_h264.c:51</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aef7017818f06f053f2e63fe759b30eb1"><div class="ttname"><a href="struct_a_v_codec_context.html#aef7017818f06f053f2e63fe759b30eb1">AVCodecContext::i_quant_factor</a></div><div class="ttdeci">float i_quant_factor</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00831">avcodec.h:831</a></div></div>
<div class="ttc" id="aavcodec_8h_html_aca63846bdb57646770faec7632e9018c"><div class="ttname"><a href="avcodec_8h.html#aca63846bdb57646770faec7632e9018c">FF_PROFILE_H264_HIGH_444_INTRA</a></div><div class="ttdeci">#define FF_PROFILE_H264_HIGH_444_INTRA</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01911">avcodec.h:1911</a></div></div>
<div class="ttc" id="alibavcodec_2vaapi__encode_8c_html_a35f8a0672b026556d23848415260b9e3"><div class="ttname"><a href="libavcodec_2vaapi__encode_8c.html#a35f8a0672b026556d23848415260b9e3">ff_vaapi_encode_hw_configs</a></div><div class="ttdeci">const AVCodecHWConfigInternal *const ff_vaapi_encode_hw_configs[]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2vaapi__encode_8c_source.html#l00031">vaapi_encode.c:31</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a93b9a93a1da6002c28c9eeadc241d35d"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a93b9a93a1da6002c28c9eeadc241d35d">VAAPIEncodeH264Context::sei_needed</a></div><div class="ttdeci">int sei_needed</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00103">vaapi_encode_h264.c:103</a></div></div>
<div class="ttc" id="alibavcodec_2vaapi__encode_8c_html_ab55f58e120cb3bc6c0c7ab82385bc6d1"><div class="ttname"><a href="libavcodec_2vaapi__encode_8c.html#ab55f58e120cb3bc6c0c7ab82385bc6d1">ff_vaapi_encode_init</a></div><div class="ttdeci">av_cold int ff_vaapi_encode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2vaapi__encode_8c_source.html#l02361">vaapi_encode.c:2361</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a0d38d6757bc1bb89090335de8c9eed00"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a0d38d6757bc1bb89090335de8c9eed00">H264RawSliceHeader::ref_pic_list_modification_flag_l0</a></div><div class="ttdeci">uint8_t ref_pic_list_modification_flag_l0</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00378">cbs_h264.h:378</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a3a527ca297adcca8023fc2fc80cc46f4"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a3a527ca297adcca8023fc2fc80cc46f4">VAAPIEncodeH264Context::sei_identifier</a></div><div class="ttdeci">H264RawSEIUserDataUnregistered sei_identifier</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00099">vaapi_encode_h264.c:99</a></div></div>
<div class="ttc" id="acbs__h264__syntax__template_8c_html_a242a701bcfbec850a5843e7fad901352"><div class="ttname"><a href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a></div><div class="ttdeci">static int FUNC() sps(CodedBitstreamContext *ctx, RWContext *rw, H264RawSPS *current)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264__syntax__template_8c_source.html#l00260">cbs_h264_syntax_template.c:260</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aa401ca663644caa51ede1889659c23d6"><div class="ttname"><a href="struct_a_v_codec_context.html#aa401ca663644caa51ede1889659c23d6">AVCodecContext::compression_level</a></div><div class="ttdeci">int compression_level</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00598">avcodec.h:598</a></div></div>
<div class="ttc" id="acbs_8c_html_af4e737d195acae80b9337f9a4127a7d3"><div class="ttname"><a href="cbs_8c.html#af4e737d195acae80b9337f9a4127a7d3">ff_cbs_init</a></div><div class="ttdeci">int ff_cbs_init(CodedBitstreamContext **ctx_ptr, enum AVCodecID codec_id, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="cbs_8c_source.html#l00074">cbs.c:74</a></div></div>
<div class="ttc" id="acbs__h264_8h_html_aea0f09a092659f3d390b796890d1df03"><div class="ttname"><a href="cbs__h264_8h.html#aea0f09a092659f3d390b796890d1df03">H264RawSEI</a></div><div class="ttdeci">struct H264RawSEI H264RawSEI</div></div>
<div class="ttc" id="aavcodec_8h_html_a1f3bda7a7ad53bfadfb8318915e4c22e"><div class="ttname"><a href="avcodec_8h.html#a1f3bda7a7ad53bfadfb8318915e4c22e">FF_PROFILE_H264_HIGH_444</a></div><div class="ttdeci">#define FF_PROFILE_H264_HIGH_444</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01909">avcodec.h:1909</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_aeebf0e912cc72cb3f0d394fe86019cda"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#aeebf0e912cc72cb3f0d394fe86019cda">VAAPIEncodePicture::encode_order</a></div><div class="ttdeci">int64_t encode_order</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00074">vaapi_encode.h:74</a></div></div>
<div class="ttc" id="asinewin__tablegen__template_8c_html_a3508a98d3ee7e2c9a4841fe264cf70f7"><div class="ttname"><a href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a></div><div class="ttdeci">#define FF_ARRAY_ELEMS(a)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen__template_8c_source.html#l00038">sinewin_tablegen_template.c:38</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a80a71ff1a2d3dcdc1262ddea8f133a7d"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a80a71ff1a2d3dcdc1262ddea8f133a7d">H264RawSliceHeader::frame_num</a></div><div class="ttdeci">uint16_t frame_num</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00361">cbs_h264.h:361</a></div></div>
<div class="ttc" id="aavcodec_8h_html_ad8cd548567a051c1fba93870baf0376c"><div class="ttname"><a href="avcodec_8h.html#ad8cd548567a051c1fba93870baf0376c">FF_PROFILE_H264_HIGH_422_INTRA</a></div><div class="ttdeci">#define FF_PROFILE_H264_HIGH_422_INTRA</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01907">avcodec.h:1907</a></div></div>
<div class="ttc" id="astruct_h264_raw_p_p_s_html"><div class="ttname"><a href="struct_h264_raw_p_p_s.html">H264RawPPS</a></div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00180">cbs_h264.h:180</a></div></div>
<div class="ttc" id="astruct_h264_level_descriptor_html"><div class="ttname"><a href="struct_h264_level_descriptor.html">H264LevelDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="h264__levels_8h_source.html#l00025">h264_levels.h:25</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba754d87f1bfd9ebdff42d90c98cff764a"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba754d87f1bfd9ebdff42d90c98cff764a">SEI_RECOVERY_POINT</a></div><div class="ttdeci">@ SEI_RECOVERY_POINT</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00041">vaapi_encode_h264.c:41</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a5df6bdb61bd08abf20c5fb1c9a2756a6"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a5df6bdb61bd08abf20c5fb1c9a2756a6">VAAPIEncodeH264Context::raw_slice</a></div><div class="ttdeci">H264RawSlice raw_slice</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00094">vaapi_encode_h264.c:94</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a48b79752d514f52b5d9334cb86343fa8"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a48b79752d514f52b5d9334cb86343fa8">VAAPIEncodeH264Context::aud_needed</a></div><div class="ttdeci">int aud_needed</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00102">vaapi_encode_h264.c:102</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_picture_html_a5ebbd617148d0a0c8b945b06d33ac39f"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_picture.html#a5ebbd617148d0a0c8b945b06d33ac39f">VAAPIEncodeH264Picture::primary_pic_type</a></div><div class="ttdeci">int primary_pic_type</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00057">vaapi_encode_h264.c:57</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a></div><div class="ttdeci">@ AV_OPT_TYPE_INT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00225">opt.h:225</a></div></div>
<div class="ttc" id="astruct_coded_bitstream_fragment_html_a7eb062e0098963ca1f0734ecf97f6d2b"><div class="ttname"><a href="struct_coded_bitstream_fragment.html#a7eb062e0098963ca1f0734ecf97f6d2b">CodedBitstreamFragment::data_bit_padding</a></div><div class="ttdeci">size_t data_bit_padding</div><div class="ttdef"><b>Definition:</b> <a href="cbs_8h_source.html#l00135">cbs.h:135</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_ad9167b04e7bc7006d170280e7c222382"><div class="ttname"><a href="vaapi__encode__h264_8c.html#ad9167b04e7bc7006d170280e7c222382">VAAPIEncodeH264Context</a></div><div class="ttdeci">struct VAAPIEncodeH264Context VAAPIEncodeH264Context</div></div>
<div class="ttc" id="atests_2jpeg2000dwt_8c_html_a5cabdd8be5af41f675fed06498e094b7"><div class="ttname"><a href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a></div><div class="ttdeci">static int ref[MAX_W *MAX_W]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2jpeg2000dwt_8c_source.html#l00107">jpeg2000dwt.c:107</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga3f55f5bcfbb12e06c7cb1195028855e6"><div class="ttname"><a href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a></div><div class="ttdeci">#define AV_CODEC_CAP_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00075">codec.h:75</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_a2123cfc447a03c68fa782c5c32dd637c"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#a2123cfc447a03c68fa782c5c32dd637c">H264RawHRD::bit_rate_scale</a></div><div class="ttdeci">uint8_t bit_rate_scale</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00054">cbs_h264.h:54</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_picture_html_ac478552400d248eece4d513b7500b94b"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_picture.html#ac478552400d248eece4d513b7500b94b">VAAPIEncodeH264Picture::pic_order_cnt</a></div><div class="ttdeci">int pic_order_cnt</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00052">vaapi_encode_h264.c:52</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_slice_html_a4ef0c52a1f5c8310dd26c65016c039ef"><div class="ttname"><a href="struct_v_a_a_p_i_encode_slice.html#a4ef0c52a1f5c8310dd26c65016c039ef">VAAPIEncodeSlice::codec_slice_params</a></div><div class="ttdeci">void * codec_slice_params</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00067">vaapi_encode.h:67</a></div></div>
<div class="ttc" id="aavcodec_8h_html_aa7d7e490128673e7747bb32ba7ea5486"><div class="ttname"><a href="avcodec_8h.html#aa7d7e490128673e7747bb32ba7ea5486">FF_PROFILE_H264_MAIN</a></div><div class="ttdeci">#define FF_PROFILE_H264_MAIN</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01900">avcodec.h:1900</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a4fa014d096114e67ce1f0f469d01ea06"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a4fa014d096114e67ce1f0f469d01ea06">H264RawSliceHeader::direct_spatial_mv_pred_flag</a></div><div class="ttdeci">uint8_t direct_spatial_mv_pred_flag</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00372">cbs_h264.h:372</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55baf6a508f5b414bc605a853f180be5f4bf"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baf6a508f5b414bc605a853f180be5f4bf">H264_NAL_AUD</a></div><div class="ttdeci">@ H264_NAL_AUD</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00043">h264.h:43</a></div></div>
<div class="ttc" id="ah264__sei_8h_html_a3b0ca74529cda763a8cc0848fcaf04fda04bbc7fb504a0eee46500e764c357c6b"><div class="ttname"><a href="h264__sei_8h.html#a3b0ca74529cda763a8cc0848fcaf04fda04bbc7fb504a0eee46500e764c357c6b">H264_SEI_TYPE_PIC_TIMING</a></div><div class="ttdeci">@ H264_SEI_TYPE_PIC_TIMING</div><div class="ttdoc">picture timing</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00030">h264_sei.h:30</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a3f6738fb4f0f6776caa2e398a32608ad"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a3f6738fb4f0f6776caa2e398a32608ad">vaapi_encode_type_h264</a></div><div class="ttdeci">static const VAAPIEncodeType vaapi_encode_type_h264</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01135">vaapi_encode_h264.c:1135</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_aeb243c07e2df840c2ccb26406e868c34"><div class="ttname"><a href="vaapi__encode__h264_8c.html#aeb243c07e2df840c2ccb26406e868c34">vaapi_encode_h264_configure</a></div><div class="ttdeci">static av_cold int vaapi_encode_h264_configure(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l01050">vaapi_encode_h264.c:1050</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55bafecaaa64bb1dfd9df3d21e7253ecb973"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bafecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a></div><div class="ttdeci">@ H264_NAL_IDR_SLICE</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00039">h264.h:39</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a5db5b340a711eabb33db0f5ea279bafd"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a5db5b340a711eabb33db0f5ea279bafd">VAAPIEncodeH264Context::profile</a></div><div class="ttdeci">int profile</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00073">vaapi_encode_h264.c:73</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="amacros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_abcc2b15259e3d2271f95eecd3dcf3aed"><div class="ttname"><a href="struct_h264_raw_slice_header.html#abcc2b15259e3d2271f95eecd3dcf3aed">H264RawSliceHeader::modification_of_pic_nums_idc</a></div><div class="ttdeci">uint8_t modification_of_pic_nums_idc</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00381">cbs_h264.h:381</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a></div><div class="ttdeci">@ AV_OPT_TYPE_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00242">opt.h:242</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_a2dab8b52eb5d456abe414acccd8caaa3"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#a2dab8b52eb5d456abe414acccd8caaa3">H264RawHRD::time_offset_length</a></div><div class="ttdeci">uint8_t time_offset_length</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00064">cbs_h264.h:64</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_a2b18e0bc09e768d7ffb2b0994780cfd1"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#a2b18e0bc09e768d7ffb2b0994780cfd1">H264RawHRD::dpb_output_delay_length_minus1</a></div><div class="ttdeci">uint8_t dpb_output_delay_length_minus1</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00063">cbs_h264.h:63</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_ae97a505a03f0c5a469c69e821c3e1521"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#ae97a505a03f0c5a469c69e821c3e1521">H264RawHRD::cpb_size_scale</a></div><div class="ttdeci">uint8_t cpb_size_scale</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00055">cbs_h264.h:55</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_ac576ed29d05a998ce895176ea812bfb0"><div class="ttname"><a href="vaapi__encode__h264_8c.html#ac576ed29d05a998ce895176ea812bfb0">PROFILE</a></div><div class="ttdeci">#define PROFILE(name, value)</div></div>
<div class="ttc" id="aavcodec_8h_html_ae37ffdc67dbb499d0274323d9449960b"><div class="ttname"><a href="avcodec_8h.html#ae37ffdc67dbb499d0274323d9449960b">FF_PROFILE_H264_HIGH_10</a></div><div class="ttdeci">#define FF_PROFILE_H264_HIGH_10</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01903">avcodec.h:1903</a></div></div>
<div class="ttc" id="acbs__h264_8h_html_af94c37a8511ef1a1a4fb364a74d19b4f"><div class="ttname"><a href="cbs__h264_8h.html#af94c37a8511ef1a1a4fb364a74d19b4f">H264RawSEIRecoveryPoint</a></div><div class="ttdeci">struct H264RawSEIRecoveryPoint H264RawSEIRecoveryPoint</div></div>
<div class="ttc" id="astruct_h264_raw_slice_header_html_a9c3c19426944ed822f7ede205e5b7bd6"><div class="ttname"><a href="struct_h264_raw_slice_header.html#a9c3c19426944ed822f7ede205e5b7bd6">H264RawSliceHeader::ref_pic_list_modification_flag_l1</a></div><div class="ttdeci">uint8_t ref_pic_list_modification_flag_l1</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00379">cbs_h264.h:379</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a7aaeee142b88a3078ddc57c644b49a7e"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a7aaeee142b88a3078ddc57c644b49a7e">AV_OPT_TYPE_FLAGS</a></div><div class="ttdeci">@ AV_OPT_TYPE_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00224">opt.h:224</a></div></div>
<div class="ttc" id="ah264_8h_html"><div class="ttname"><a href="h264_8h.html">h264.h</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_ad17c77d0bf8a698870bc22b10d14026b"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#ad17c77d0bf8a698870bc22b10d14026b">H264RawHRD::initial_cpb_removal_delay_length_minus1</a></div><div class="ttdeci">uint8_t initial_cpb_removal_delay_length_minus1</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00061">cbs_h264.h:61</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_a763f5346f558c505776b3934a74907a9"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#a763f5346f558c505776b3934a74907a9">VAAPIEncodeH264Context::raw_pps</a></div><div class="ttdeci">H264RawPPS raw_pps</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00092">vaapi_encode_h264.c:92</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a255bf7100a4ba6dcb6ee5d87740a4f35"><div class="ttname"><a href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">AVCodecContext::color_range</a></div><div class="ttdeci">enum AVColorRange color_range</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1161</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_context_html_ae49687a0c1f509270dc1faad777fbff3"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_context.html#ae49687a0c1f509270dc1faad777fbff3">VAAPIEncodeH264Context::raw_aud</a></div><div class="ttdeci">H264RawAUD raw_aud</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00090">vaapi_encode_h264.c:90</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_slice_html_a3a0ea0892268d865f4981ac1b56baff9"><div class="ttname"><a href="struct_v_a_a_p_i_encode_slice.html#a3a0ea0892268d865f4981ac1b56baff9">VAAPIEncodeSlice::block_start</a></div><div class="ttdeci">int block_start</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00065">vaapi_encode.h:65</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_picture_html_a3388f8fa298e2c0a7cf1b3d8c8f752a4"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_picture.html#a3388f8fa298e2c0a7cf1b3d8c8f752a4">VAAPIEncodeH264Picture::cpb_delay</a></div><div class="ttdeci">int cpb_delay</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00060">vaapi_encode_h264.c:60</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_type_html"><div class="ttname"><a href="struct_v_a_a_p_i_encode_type.html">VAAPIEncodeType</a></div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00366">vaapi_encode.h:366</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a></div><div class="ttdeci">@ AV_OPT_TYPE_CONST</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00234">opt.h:234</a></div></div>
<div class="ttc" id="asnprintf_8h_html_aa367b75c5aed883fef5befbdf04835a4"><div class="ttname"><a href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a></div><div class="ttdeci">#define snprintf</div><div class="ttdef"><b>Definition:</b> <a href="snprintf_8h_source.html#l00034">snprintf.h:34</a></div></div>
<div class="ttc" id="avaapi__encode_8h_html_abc6126af1d45847bc59afa0aa3216b04a0bd3695af879bf892f15bfe02355b902"><div class="ttname"><a href="vaapi__encode_8h.html#abc6126af1d45847bc59afa0aa3216b04a0bd3695af879bf892f15bfe02355b902">FLAG_SLICE_CONTROL</a></div><div class="ttdeci">@ FLAG_SLICE_CONTROL</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00352">vaapi_encode.h:352</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8cd8caa7d40319324ce3d879a2edbd9f"><div class="ttname"><a href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">AVCodecContext::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1154</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55bae3091622b1b99e74d09b16673e98b1d0"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae3091622b1b99e74d09b16673e98b1d0">H264_NAL_SEI</a></div><div class="ttdeci">@ H264_NAL_SEI</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00040">h264.h:40</a></div></div>
<div class="ttc" id="astruct_h264_raw_h_r_d_html_a8535a822b9ef155d8b1d66b085d10492"><div class="ttname"><a href="struct_h264_raw_h_r_d.html#a8535a822b9ef155d8b1d66b085d10492">H264RawHRD::bit_rate_value_minus1</a></div><div class="ttdeci">uint32_t bit_rate_value_minus1[H264_MAX_CPB_CNT]</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264_8h_source.html#l00057">cbs_h264.h:57</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_picture_html_ab10d79f488c154649c6b6c9ff223f8c6"><div class="ttname"><a href="struct_v_a_a_p_i_encode_picture.html#ab10d79f488c154649c6b6c9ff223f8c6">VAAPIEncodePicture::output_buffer</a></div><div class="ttdeci">VABufferID output_buffer</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00100">vaapi_encode.h:100</a></div></div>
<div class="ttc" id="avaapi__encode__h264_8c_html_a7b80d0b21ea1bd7cc77c6fc8317ea86d"><div class="ttname"><a href="vaapi__encode__h264_8c.html#a7b80d0b21ea1bd7cc77c6fc8317ea86d">vaapi_encode_h264_default_ref_pic_list</a></div><div class="ttdeci">static void vaapi_encode_h264_default_ref_pic_list(AVCodecContext *avctx, VAAPIEncodePicture *pic, VAAPIEncodePicture **rpl0, VAAPIEncodePicture **rpl1, int *rpl_size)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00732">vaapi_encode_h264.c:732</a></div></div>
<div class="ttc" id="astruct_v_a_a_p_i_encode_h264_picture_html_ae2fd63e8c8340b47f3c54a3d6220a3b6"><div class="ttname"><a href="struct_v_a_a_p_i_encode_h264_picture.html#ae2fd63e8c8340b47f3c54a3d6220a3b6">VAAPIEncodeH264Picture::idr_pic_id</a></div><div class="ttdeci">uint16_t idr_pic_id</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h264_8c_source.html#l00055">vaapi_encode_h264.c:55</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
