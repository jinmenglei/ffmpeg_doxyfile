<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavformat/mux.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_5dbf34d3eccfe93a92dd48ea427d25bd.html">libavformat</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mux.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mux_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * muxing functions for use within FFmpeg</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2000, 2001, 2002 Fabrice Bellard</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avformat_8h.html">avformat.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavcodec_2internal_8h.html">libavcodec/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict_8h.html">libavutil/dict.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixdesc_8h.html">libavutil/pixdesc.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timestamp_8h.html">libavutil/timestamp.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avstring_8h.html">libavutil/avstring.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">libavutil/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mathematics_8h.html">libavutil/mathematics.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/* fraction handling */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="mux_8c.html#adbe775f4635e7936a8f7b57461bb1d98">   51</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mux_8c.html#adbe775f4635e7936a8f7b57461bb1d98">frac_init</a>(<a class="code" href="struct_f_f_frac.html">FFFrac</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, int64_t <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>, int64_t num, int64_t den)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    num += (den &gt;&gt; 1);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (num &gt;= den) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> += num / den;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        num  = num % den;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;val = <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;num = num;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;den = den;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="mux_8c.html#a712be436065d5ba81ddef99e9ea30ee8">   69</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mux_8c.html#a712be436065d5ba81ddef99e9ea30ee8">frac_add</a>(<a class="code" href="struct_f_f_frac.html">FFFrac</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, int64_t incr)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    int64_t num, den;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    num = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;num + incr;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    den = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;den;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span> (num &lt; 0) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;val += num / den;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        num     = num % den;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">if</span> (num &lt; 0) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            num += den;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;val--;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num &gt;= den) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;val += num / den;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        num     = num % den;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;num = num;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="mux_8c.html#a6ce888a0b1efa290670467216ecf3da2">   89</a></span>&#160;<a class="code" href="struct_a_v_rational.html">AVRational</a> <a class="code" href="mux_8c.html#a6ce888a0b1efa290670467216ecf3da2">ff_choose_timebase</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <span class="keywordtype">int</span> min_precision)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> q;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    q = st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">for</span> (j=2; j&lt;14; j+= 1+(j&gt;2))</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">while</span> (q.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> / q.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &lt; min_precision &amp;&amp; q.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> % j == 0)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            q.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> /= j;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">while</span> (q.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> / q.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &lt; min_precision &amp;&amp; q.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &lt; (1&lt;&lt;24))</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        q.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &lt;&lt;= 1;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> q;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ff">AVChromaLocation</a> <a class="code" href="mux_8c.html#a20eeb69d7bb4044a354c5b46652b53ac">ff_choose_chroma_location</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a> *pix_desc = <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abee943e65d98f9763fa6602a356e774f">format</a>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#ae4c7ac718a75adb31b5f2076a02fdedf">chroma_location</a> != <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffafd1c2fae7783c113d76a017c6e7b638f">AVCHROMA_LOC_UNSPECIFIED</a>)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">return</span> par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#ae4c7ac718a75adb31b5f2076a02fdedf">chroma_location</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (pix_desc) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">if</span> (pix_desc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#abea8ed308fe00644fc066a00018afa95">log2_chroma_h</a> == 0) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffa4b008b490563459a3f04826049cee43f">AVCHROMA_LOC_TOPLEFT</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pix_desc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#a4abca4534188ff94627e88c0d8362058">log2_chroma_w</a> == 1 &amp;&amp; pix_desc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#abea8ed308fe00644fc066a00018afa95">log2_chroma_h</a> == 1) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a153946872548cd56132907b93f05f9aa">field_order</a> == <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca886b3191488ef874bf3e94b3d9cec713">AV_FIELD_UNKNOWN</a> || par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a153946872548cd56132907b93f05f9aa">field_order</a> == <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a>) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keywordflow">switch</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409">AV_CODEC_ID_MJPEG</a>:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a>: <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffaef6df526ade7e565876d539b34151368">AVCHROMA_LOC_CENTER</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a153946872548cd56132907b93f05f9aa">field_order</a> == <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca886b3191488ef874bf3e94b3d9cec713">AV_FIELD_UNKNOWN</a> || par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a153946872548cd56132907b93f05f9aa">field_order</a> != <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a>) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                <span class="keywordflow">switch</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>: <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffab75254964869bf3bf25806ad0cad44b2">AVCHROMA_LOC_LEFT</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffafd1c2fae7783c113d76a017c6e7b638f">AVCHROMA_LOC_UNSPECIFIED</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="mux_8c.html#aca0c94e14d26c72cdf3e8aedb6810cb0">  135</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mux_8c.html#aca0c94e14d26c72cdf3e8aedb6810cb0">avformat_alloc_output_context2</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> **avctx, <a class="code" href="avformat_8h.html#aa5496b84535113646e96c8cf3b624aaf">ff_const59</a> <a class="code" href="struct_a_v_output_format.html">AVOutputFormat</a> *oformat,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *filename)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="group__lavf__core.html#gac7a91abf2f59648d995894711f070f62">avformat_alloc_context</a>();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    *avctx = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">goto</span> nomem;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (!oformat) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            oformat = <a class="code" href="group__lavf__encoding.html#ga2020642d84f919764eed55848c9e69da">av_guess_format</a>(<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">if</span> (!oformat) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Requested output format &#39;%s&#39; is not a suitable output format\n&quot;</span>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            oformat = <a class="code" href="group__lavf__encoding.html#ga2020642d84f919764eed55848c9e69da">av_guess_format</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, filename, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">if</span> (!oformat) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to find a suitable output format for &#39;%s&#39;\n&quot;</span>,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                       filename);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat = oformat;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;priv_data_size &gt; 0) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;priv_data_size);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="keywordflow">goto</span> nomem;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;priv_class) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            *(<span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a>**)<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;priv_class;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <a class="code" href="group__avoptions.html#gad4ca968e9058b39b2da630ad0a091bdb">av_opt_set_defaults</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (filename) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#if FF_API_FORMAT_FILENAME</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="group__lavu__string.html#ga716447ae73b612bcf3a405b9b4608f6c">av_strlcpy</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filename, filename, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filename));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;url = <a class="code" href="group__lavu__mem__funcs.html#ga7c352f4cff02184f005323691375fea9">av_strdup</a>(filename)))</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">goto</span> nomem;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    *avctx = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;nomem:</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Out of memory\n&quot;</span>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="group__lavf__core.html#gac2990b13b68e831a408fce8e1d0d6445">avformat_free_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="mux_8c.html#af4b5ceacab5f67a03c5d18fcb3cc8fe5">  196</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#af4b5ceacab5f67a03c5d18fcb3cc8fe5">validate_codec_tag</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_codec_tag.html">AVCodecTag</a> *avctag;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <span class="keywordtype">id</span> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    int64_t <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>  = -1;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">for</span> (n = 0; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;codec_tag[n]; n++) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        avctag = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;codec_tag[n];</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">while</span> (avctag-&gt;<a class="code" href="struct_a_v_codec_tag.html#a50eeaf9fe0757af14ed345ced488481e">id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a>) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2internal_8h.html#ad4714ae1c93972fd9c8ff2a303fcd051">avpriv_toupper4</a>(avctag-&gt;<a class="code" href="struct_a_v_codec_tag.html#ac3c7db3b0a20647687b74af8b9fb3afd">tag</a>) == <a class="code" href="libavcodec_2internal_8h.html#ad4714ae1c93972fd9c8ff2a303fcd051">avpriv_toupper4</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a>)) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="keywordtype">id</span> = avctag-&gt;<a class="code" href="struct_a_v_codec_tag.html#a50eeaf9fe0757af14ed345ced488481e">id</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordflow">if</span> (avctag-&gt;<a class="code" href="struct_a_v_codec_tag.html#a50eeaf9fe0757af14ed345ced488481e">id</a> == st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> = avctag-&gt;<a class="code" href="struct_a_v_codec_tag.html#ac3c7db3b0a20647687b74af8b9fb3afd">tag</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            avctag++;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a>)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> &gt;= 0 &amp;&amp; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;strict_std_compliance &gt;= <a class="code" href="avcodec_8h.html#a661eaec472e284a3b2920647349471dd">FF_COMPLIANCE_NORMAL</a>))</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="mux_8c.html#ac8f9f65622e9a54df25a103394d11097">  230</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#ac8f9f65622e9a54df25a103394d11097">init_muxer</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_dictionary.html">AVDictionary</a> **<a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="struct_a_v_dictionary.html">AVDictionary</a> *tmp = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_output_format.html">AVOutputFormat</a> *of = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_codec_descriptor.html">AVCodecDescriptor</a> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *e;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <a class="code" href="group__lavu__dict.html#ga59a6372b124b306e3a2233723c5cdc78">av_dict_copy</a>(&amp;tmp, *<a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>, 0);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__avoptions.html#gaf1a88e8f152d7835f111b1ef8813fb2e">av_opt_set_dict</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;tmp)) &lt; 0)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;priv_class &amp;&amp; *(<span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a>**)<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data==<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;priv_class &amp;&amp;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__avoptions.html#ga1824a600b215f1807e77b5f6cfa58586">av_opt_set_dict2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data, &amp;tmp, <a class="code" href="group__avoptions.html#ga25801ba4fc9b5313eb33ec84e082dd72">AV_OPT_SEARCH_CHILDREN</a>)) &lt; 0)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor">#if FF_API_FORMAT_FILENAME</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;url &amp;&amp; !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;url = <a class="code" href="group__lavu__mem__funcs.html#ga7c352f4cff02184f005323691375fea9">av_strdup</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;filename))) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;url &amp;&amp; !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;url = <a class="code" href="group__lavu__mem__funcs.html#ga7c352f4cff02184f005323691375fea9">av_strdup</a>(<span class="stringliteral">&quot;&quot;</span>))) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#if FF_API_LAVF_AVCTX</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[0]-&gt;codec-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a>) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#a2fa1d95841e62af509ba733a11c1b25b">AVFMT_FLAG_BITEXACT</a>)) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                   <span class="stringliteral">&quot;The AVFormatContext is not in set to bitexact mode, only &quot;</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                   <span class="stringliteral">&quot;the AVCodecContext. If this is not intended, set &quot;</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                   <span class="stringliteral">&quot;AVFormatContext.flags |= AVFMT_FLAG_BITEXACT.\n&quot;</span>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// some sanity checks</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams == 0 &amp;&amp; !(of-&gt;<a class="code" href="struct_a_v_output_format.html#aad55a00e728a020c1dcfaaf695320445">flags</a> &amp; <a class="code" href="avformat_8h.html#a1500ed92d07addf13d1e9dfd0fff6672">AVFMT_NOSTREAMS</a>)) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;No streams to mux were specified\n&quot;</span>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        st  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        par = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#if FF_API_LAVF_AVCTX</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48afdadbd6c4f612c59f6b6c7c6f84fd347">AVMEDIA_TYPE_UNKNOWN</a> &amp;&amp;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            st-&gt;codec-&gt;codec_type    != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48afdadbd6c4f612c59f6b6c7c6f84fd347">AVMEDIA_TYPE_UNKNOWN</a>) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Using AVStream.codec to pass codec &quot;</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                   <span class="stringliteral">&quot;parameters to muxers is deprecated, use AVStream.codecpar &quot;</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                   <span class="stringliteral">&quot;instead.\n&quot;</span>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#ga0c7058f764778615e7978a1821ab3cfe">avcodec_parameters_from_context</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, st-&gt;codec);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="comment">/* fall back on the default timebase values */</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp; par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, 1, par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 33, 1, 90000);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">switch</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> &lt;= 0) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;sample rate not set\n&quot;</span>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">if</span> (!par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a>)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a> = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> *</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                   <a class="code" href="group__lavc__misc.html#ga0717e7440fdb123f708082f66cd9b41d">av_get_bits_per_sample</a>(par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) &gt;&gt; 3;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keywordflow">if</span> ((par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> &lt;= 0 || par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> &lt;= 0) &amp;&amp;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                !(of-&gt;<a class="code" href="struct_a_v_output_format.html#aad55a00e728a020c1dcfaaf695320445">flags</a> &amp; <a class="code" href="avformat_8h.html#a21abb57f90931c92c853e696cc1c358c">AVFMT_NODIMENSIONS</a>)) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;dimensions not set\n&quot;</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__lavu__math__rational.html#gaa440bf42ede128219a571ae4ce0f90b8">av_cmp_q</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>, par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                &amp;&amp; <a class="code" href="cuda__runtime_8h.html#a7a87cd25426a228ce8ecbef48ab00de8">fabs</a>(<a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>) - <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>)) &gt; 0.004*<a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            ) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> != 0 &amp;&amp;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                    st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> != 0 &amp;&amp;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> != 0 &amp;&amp;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> != 0) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Aspect ratio mismatch between muxer &quot;</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                           <span class="stringliteral">&quot;(%d/%d) and encoder layer (%d/%d)\n&quot;</span>,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                           st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>,</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                           par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                           par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="group__lavc__core.html#gac09f8ddc2d4b36c5a85c6befba0d0888">avcodec_descriptor_get</a>(par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> &amp;&amp; <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;props &amp; <a class="code" href="group__lavc__core.html#gaf28f8da6f74d303c115635d696a318b6">AV_CODEC_PROP_REORDER</a>)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a21ba32ae9c62456afdc40fe7495e4584">reorder</a> = 1;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a34e67886c4dd250aa7bd562ea2b78d79">is_intra_only</a> = <a class="code" href="libavformat_2internal_8h.html#a513c91d8ee98a29b942c2cb4c955177f">ff_is_intra_only</a>(par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> (of-&gt;<a class="code" href="struct_a_v_output_format.html#ac55f4c21dd75c8c48b9de5080681eed4">codec_tag</a>) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">if</span> (   par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                &amp;&amp; par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc">AV_CODEC_ID_RAWVIDEO</a></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                &amp;&amp; (   <a class="code" href="group__lavf__misc.html#ga126917b7ce8b4f05505098b72f4997de">av_codec_get_tag</a>(of-&gt;<a class="code" href="struct_a_v_output_format.html#ac55f4c21dd75c8c48b9de5080681eed4">codec_tag</a>, par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) == 0</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    || <a class="code" href="group__lavf__misc.html#ga126917b7ce8b4f05505098b72f4997de">av_codec_get_tag</a>(of-&gt;<a class="code" href="struct_a_v_output_format.html#ac55f4c21dd75c8c48b9de5080681eed4">codec_tag</a>, par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;r&#39;</span>, <span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;w&#39;</span>, <span class="charliteral">&#39; &#39;</span>))</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                &amp;&amp; !<a class="code" href="mux_8c.html#af4b5ceacab5f67a03c5d18fcb3cc8fe5">validate_codec_tag</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st)) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                <span class="comment">// the current rawvideo encoding system ends up setting</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <span class="comment">// the wrong codec_tag for avi/mov, we override it here</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> = 0;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a>) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="mux_8c.html#af4b5ceacab5f67a03c5d18fcb3cc8fe5">validate_codec_tag</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st)) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    <span class="keyword">const</span> uint32_t otag = <a class="code" href="group__lavf__misc.html#ga126917b7ce8b4f05505098b72f4997de">av_codec_get_tag</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;codec_tag, par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                           <span class="stringliteral">&quot;Tag %s incompatible with output codec id &#39;%d&#39; (%s)\n&quot;</span>,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                           <a class="code" href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a>(par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a>), par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>, <a class="code" href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a>(otag));</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> = <a class="code" href="group__lavf__misc.html#ga126917b7ce8b4f05505098b72f4997de">av_codec_get_tag</a>(of-&gt;<a class="code" href="struct_a_v_output_format.html#ac55f4c21dd75c8c48b9de5080681eed4">codec_tag</a>, par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a2d09f16df8631e64e8fa566142cdc99d">AVMEDIA_TYPE_ATTACHMENT</a>)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;nb_interleaved_streams++;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data &amp;&amp; of-&gt;<a class="code" href="struct_a_v_output_format.html#ad7677ef35d272b2dad5498c51b4d2204">priv_data_size</a> &gt; 0) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(of-&gt;<a class="code" href="struct_a_v_output_format.html#ad7677ef35d272b2dad5498c51b4d2204">priv_data_size</a>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">if</span> (of-&gt;<a class="code" href="struct_a_v_output_format.html#ae030463c5c08de99f8c9e727c822ca87">priv_class</a>) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            *(<span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> **)<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data = of-&gt;<a class="code" href="struct_a_v_output_format.html#ae030463c5c08de99f8c9e727c822ca87">priv_class</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <a class="code" href="group__avoptions.html#gad4ca968e9058b39b2da630ad0a091bdb">av_opt_set_defaults</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__avoptions.html#ga1824a600b215f1807e77b5f6cfa58586">av_opt_set_dict2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data, &amp;tmp, <a class="code" href="group__avoptions.html#ga25801ba4fc9b5313eb33ec84e082dd72">AV_OPT_SEARCH_CHILDREN</a>)) &lt; 0)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">/* set muxer identification string */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#a2fa1d95841e62af509ba733a11c1b25b">AVFMT_FLAG_BITEXACT</a>)) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, <span class="stringliteral">&quot;encoder&quot;</span>, <a class="code" href="libavformat_2version_8h.html#a052e19399c636f5fe37639a6625f03ae">LIBAVFORMAT_IDENT</a>, 0);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, <span class="stringliteral">&quot;encoder&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">for</span> (e = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; e = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, <span class="stringliteral">&quot;encoder-&quot;</span>, e, <a class="code" href="group__lavu__dict.html#ga341bbd1ea599dfb0510f419e5272fecc">AV_DICT_IGNORE_SUFFIX</a>); ) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, e-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#a38fc80176f8f839282bb61c03392e194">key</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;         <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(<a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;         *<a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a> = tmp;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;init) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;init(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;deinit)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;deinit(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;tmp);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="mux_8c.html#a23ff0c8cbade2fd65c53e5614b95cb41">  422</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a23ff0c8cbade2fd65c53e5614b95cb41">init_pts</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;{</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">/* init PTS generation */</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        int64_t den = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">switch</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            den = (int64_t)st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> * st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            den = (int64_t)st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> * st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>));</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span> (den != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordflow">if</span> (den &lt;= 0)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <a class="code" href="mux_8c.html#adbe775f4635e7936a8f7b57461bb1d98">frac_init</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>, 0, 0, den);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avoid_negative_ts &lt; 0) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avoid_negative_ts == <a class="code" href="avformat_8h.html#a8de664fdbd6e2a5bd327f75b185a97ef">AVFMT_AVOID_NEG_TS_AUTO</a>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; (<a class="code" href="avformat_8h.html#a886476ebe41f52a2232ee10f97ac11d0">AVFMT_TS_NEGATIVE</a> | <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>)) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avoid_negative_ts = 0;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avoid_negative_ts = <a class="code" href="avformat_8h.html#ab82d3e1a4a5bba30941fcc4402317831">AVFMT_AVOID_NEG_TS_MAKE_NON_NEGATIVE</a>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="mux_8c.html#a79a148203d497dac7c04fd43c9fd4e1f">  467</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mux_8c.html#a79a148203d497dac7c04fd43c9fd4e1f">flush_if_needed</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;error &gt;= 0) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flush_packets == 1 || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#a1d9ca54477304fc143bc6594c4dec102">AVFMT_FLAG_FLUSH_PACKETS</a>)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <a class="code" href="avio_8h.html#ad88b866a118c17c95663f7782b2e8946">avio_flush</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flush_packets &amp;&amp; !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a752cce390d480521919aa5d8be24ac0b">AVFMT_NOFILE</a>))</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <a class="code" href="avio_8h.html#a03e0cde48d492b5433e136152e47cb4c">avio_write_marker</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>, <a class="code" href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a870634b3c75cf4bcff8306fac01b04be">AVIO_DATA_MARKER_FLUSH_POINT</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="mux_8c.html#a0e0de442dbf020a004245170119aebb8">  477</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mux_8c.html#a0e0de442dbf020a004245170119aebb8">deinit_muxer</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;{</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;deinit &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;initialized)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;deinit(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;initialized =</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;streams_initialized = 0;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="group__lavf__encoding.html#ga169cfa28508e22e138c5b99be8517ea4">  485</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__lavf__encoding.html#ga169cfa28508e22e138c5b99be8517ea4">avformat_init_output</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_dictionary.html">AVDictionary</a> **<a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#ac8f9f65622e9a54df25a103394d11097">init_muxer</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>)) &lt; 0)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;initialized = 1;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;streams_initialized = <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;init &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#a23ff0c8cbade2fd65c53e5614b95cb41">init_pts</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavf__encoding.html#ga5268e4fbbb73b5ed1e4083f44f565ffd">AVSTREAM_INIT_IN_INIT_OUTPUT</a>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavf__encoding.html#ga5396ff79e3c1ec7220765499f2efc74d">AVSTREAM_INIT_IN_WRITE_HEADER</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="group__lavf__encoding.html#ga18b7b10bb5b94c4842de18166bc677cb">  505</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__lavf__encoding.html#ga18b7b10bb5b94c4842de18166bc677cb">avformat_write_header</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_dictionary.html">AVDictionary</a> **<a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;{</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordtype">int</span> already_initialized = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;initialized;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordtype">int</span> streams_already_initialized = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;streams_initialized;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (!already_initialized)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__encoding.html#ga169cfa28508e22e138c5b99be8517ea4">avformat_init_output</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>)) &lt; 0)</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a752cce390d480521919aa5d8be24ac0b">AVFMT_NOFILE</a>) &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="avio_8h.html#a03e0cde48d492b5433e136152e47cb4c">avio_write_marker</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>, <a class="code" href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a441e77bcb3e96420bc9a9ce480aa821a">AVIO_DATA_MARKER_HEADER</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_header) {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_header(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0 &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;error &lt; 0)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;error;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="mux_8c.html#a79a148203d497dac7c04fd43c9fd4e1f">flush_if_needed</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a752cce390d480521919aa5d8be24ac0b">AVFMT_NOFILE</a>) &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="avio_8h.html#a03e0cde48d492b5433e136152e47cb4c">avio_write_marker</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>, <a class="code" href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a845e4c0e9d3840c36370ced5d9a54922">AVIO_DATA_MARKER_UNKNOWN</a>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;streams_initialized) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#a23ff0c8cbade2fd65c53e5614b95cb41">init_pts</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0)</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">return</span> streams_already_initialized;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="mux_8c.html#a0e0de442dbf020a004245170119aebb8">deinit_muxer</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="mux_8c.html#a06b8cba5d771304f8276f08691ed67d6">  540</a></span>&#160;<span class="preprocessor">#define AV_PKT_FLAG_UNCODED_FRAME 0x2000</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="preprocessor">#if FF_API_COMPUTE_PKT_FIELDS2 &amp;&amp; FF_API_LAVF_AVCTX</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">//FIXME merge with compute_pkt_fields</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> compute_muxer_pkt_fields(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;{</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordtype">int</span> delay = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">video_delay</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a26f84d225b515a5184bb5ce6b7f3b147">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3e5334a611a3e2a6a653805bb9e2d4d4">max_b_frames</a> &gt; 0);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordtype">int</span> num, den, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;missing_ts_warning &amp;&amp;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>) &amp;&amp;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        (!(st-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a> &amp; <a class="code" href="avformat_8h.html#ab54a3e54e88a8f7d7760e60b49944e44">AV_DISPOSITION_ATTACHED_PIC</a>) || (st-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a> &amp; <a class="code" href="avformat_8h.html#af7e859adfb2f1819dd733bc19b600585">AV_DISPOSITION_TIMED_THUMBNAILS</a>)) &amp;&amp;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> || <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;               <span class="stringliteral">&quot;Timestamps are unset in a packet for stream %d. &quot;</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;               <span class="stringliteral">&quot;This is deprecated and will stop working in the future. &quot;</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;               <span class="stringliteral">&quot;Fix your code to set the timestamps properly\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;missing_ts_warning = 1;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;debug &amp; <a class="code" href="avformat_8h.html#a3d60713d578ad1ef6505e05779c112cf">FF_FDEBUG_TS</a>)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;compute_muxer_pkt_fields: pts:%s dts:%s cur_dts:%s b:%d size:%d st:%d\n&quot;</span>,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>), <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>), <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a>), delay, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> &lt; 0 &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Packet with invalid duration %&quot;</span>PRId64<span class="stringliteral">&quot; in stream %d\n&quot;</span>,</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;               <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> = 0;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">/* duration field */</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> == 0) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="libavformat_2internal_8h.html#a6351818196357654cde11506036add89">ff_compute_frame_duration</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;num, &amp;den, st, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">if</span> (den &amp;&amp; num) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(1, num * (int64_t)st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> * st-&gt;codec-&gt;ticks_per_frame, den * (int64_t)st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; delay == 0)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">//XXX/FIXME this is a temporary hack until all encoders output pts</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> == 0 || <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; !delay) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">int</span> warned;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">if</span> (!warned) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Encoder did not produce proper pts, making some up.\n&quot;</span>);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            warned = 1;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> =</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">//        pkt-&gt;pts= st-&gt;cur_dts;</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>-&gt;<a class="code" href="struct_f_f_frac.html#a4a517bcbb9977d1010798cc97d1be675">val</a>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">//calculate dts from pts</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; delay &lt;= <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bad196c6de8e599a9779876aa36720085a">MAX_REORDER_DELAY</a>) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aa34d34689036af1c54d76901d95a3efe">pts_buffer</a>[0] = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; delay + 1 &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aa34d34689036af1c54d76901d95a3efe">pts_buffer</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aa34d34689036af1c54d76901d95a3efe">pts_buffer</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - delay - 1) * <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;delay &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aa34d34689036af1c54d76901d95a3efe">pts_buffer</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aa34d34689036af1c54d76901d95a3efe">pts_buffer</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(int64_t, st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aa34d34689036af1c54d76901d95a3efe">pts_buffer</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aa34d34689036af1c54d76901d95a3efe">pts_buffer</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1]);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aa34d34689036af1c54d76901d95a3efe">pts_buffer</a>[0];</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        ((!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a918dc7abf0d4f7abd36a2ea2a594feaf">AVFMT_TS_NONSTRICT</a>) &amp;&amp;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a> &amp;&amp;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;          st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a> &amp;&amp;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;          st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> &gt;= <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>) || st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> &gt; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>)) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;               <span class="stringliteral">&quot;Application provided invalid, non monotonically increasing dts to muxer in stream %d: %s &gt;= %s\n&quot;</span>,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;               st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a>), <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>));</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> &lt; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;               <span class="stringliteral">&quot;pts (%s) &lt; dts (%s) in stream %d\n&quot;</span>,</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>), <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>),</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;               st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;debug &amp; <a class="code" href="avformat_8h.html#a3d60713d578ad1ef6505e05779c112cf">FF_FDEBUG_TS</a>)</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;av_write_frame: pts2:%s dts2:%s\n&quot;</span>,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>), <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>));</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>-&gt;<a class="code" href="struct_f_f_frac.html#a4a517bcbb9977d1010798cc97d1be675">val</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">/* update pts */</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">switch</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> = (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> &amp; <a class="code" href="mux_8c.html#a06b8cba5d771304f8276f08691ed67d6">AV_PKT_FLAG_UNCODED_FRAME</a>) ?</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                     (*(<a class="code" href="struct_a_v_frame.html">AVFrame</a> **)<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>)-&gt;nb_samples :</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                     <a class="code" href="group__lavc__misc.html#ga3266a8c3df0790c62259f91afcde45a9">av_get_audio_frame_duration</a>(st-&gt;codec, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="comment">/* HACK/FIXME, we skip the initial 0 size packets as they are most</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">         * likely equal to the encoder delay, but it would be better if we</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">         * had the real timestamps from the encoder */</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> &gt;= 0 &amp;&amp; (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> || st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>-&gt;<a class="code" href="struct_f_f_frac.html#a2f045fdeb069ab4b24cdcc18dbc97c3f">num</a> != st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>-&gt;<a class="code" href="struct_f_f_frac.html#a4ffae3f9d8e5526eeaa28b95d5fa7f33">den</a> &gt;&gt; 1 || st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>-&gt;<a class="code" href="struct_f_f_frac.html#a4a517bcbb9977d1010798cc97d1be675">val</a>)) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            <a class="code" href="mux_8c.html#a712be436065d5ba81ddef99e9ea30ee8">frac_add</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>, (int64_t)st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> * <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <a class="code" href="mux_8c.html#a712be436065d5ba81ddef99e9ea30ee8">frac_add</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">priv_pts</a>, (int64_t)st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> * st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;}</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="mux_8c.html#a35b04d31f9156dd1dbca471d097741d8">  663</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a35b04d31f9156dd1dbca471d097741d8">write_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;{</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// If the timestamp offsetting below is adjusted, adjust</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// ff_interleaved_peek similarly.</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_ts_offset) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        int64_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_ts_offset, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> += <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> += <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avoid_negative_ts &gt; 0) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        int64_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a3d29af398725c52954b8e3651515701d">mux_ts_offset</a>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        int64_t ts = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;avoid_negative_ts_use_pts ? <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> : <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;offset == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; ts != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            (ts &lt; 0 || s-&gt;avoid_negative_ts == <a class="code" href="avformat_8h.html#aeb387b52a67154ded3aeee38400f358a">AVFMT_AVOID_NEG_TS_MAKE_ZERO</a>)) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;offset = -ts;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;offset_timebase = st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;offset != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; !<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a3d29af398725c52954b8e3651515701d">mux_ts_offset</a> =</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                <a class="code" href="group__lavu__math.html#gab706bfec9bf56534e02ca9564cb968f6">av_rescale_q_rnd</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;offset,</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;offset_timebase,</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                                 st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>,</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                                 <a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aa1d28e08e2f8b49b256e056f93038c1a">AV_ROUND_UP</a>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> += <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> += <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;avoid_negative_ts_use_pts) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> &lt; 0) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;failed to avoid negative &quot;</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                    <span class="stringliteral">&quot;pts %s in stream %d.\n&quot;</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                    <span class="stringliteral">&quot;Try -avoid_negative_ts 1 as a possible workaround.\n&quot;</span>,</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                    <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>),</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                );</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> || <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> &gt;= 0 || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_interleave_delta &gt; 0);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> &lt; 0) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                    <span class="stringliteral">&quot;Packets poorly interleaved, failed to avoid negative &quot;</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                    <span class="stringliteral">&quot;timestamp %s in stream %d.\n&quot;</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                    <span class="stringliteral">&quot;Try -max_interleave_delta 0 as a possible workaround.\n&quot;</span>,</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                    <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>),</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> &amp; <a class="code" href="mux_8c.html#a06b8cba5d771304f8276f08691ed67d6">AV_PKT_FLAG_UNCODED_FRAME</a>)) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <a class="code" href="struct_a_v_frame.html">AVFrame</a> **<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = (<a class="code" href="struct_a_v_frame.html">AVFrame</a> **)<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> == <span class="keyword">sizeof</span>(*<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>));</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_uncoded_frame(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_packet(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <a class="code" href="mux_8c.html#a79a148203d497dac7c04fd43c9fd4e1f">flush_if_needed</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;error &lt; 0)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;error;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0)</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;nb_frames++;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="mux_8c.html#aa34b7ca6722fb59cc7a9661a22368850">  746</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#aa34b7ca6722fb59cc7a9661a22368850">check_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;{</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> &lt; 0 || <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid packet stream index: %d\n&quot;</span>,</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;               <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;codecpar-&gt;codec_type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a2d09f16df8631e64e8fa566142cdc99d">AVMEDIA_TYPE_ATTACHMENT</a>) {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Received a packet for an attachment stream.\n&quot;</span>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="mux_8c.html#ace503e72eb2954c673f44f2c20e7a4d0">  762</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#ace503e72eb2954c673f44f2c20e7a4d0">prepare_input_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;{</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="preprocessor">#if !FF_API_COMPUTE_PKT_FIELDS2 || !FF_API_LAVF_AVCTX</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">/* sanitize the timestamps */</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>)) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="comment">/* when there is no reordering (so dts is equal to pts), but</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">         * only one of them is set, set the other as well */</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a21ba32ae9c62456afdc40fe7495e4584">reorder</a>) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="comment">/* check that the timestamps are set */</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> || <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                   <span class="stringliteral">&quot;Timestamps are unset in a packet for stream %d\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="comment">/* check that the dts are increasing (or at least non-decreasing,</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">         * if the format allows it */</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            ((!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a918dc7abf0d4f7abd36a2ea2a594feaf">AVFMT_TS_NONSTRICT</a>) &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> &gt;= <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>) ||</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;             st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> &gt; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>)) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                   <span class="stringliteral">&quot;Application provided invalid, non monotonically increasing &quot;</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                   <span class="stringliteral">&quot;dts to muxer in stream %d: %&quot;</span> PRId64 <span class="stringliteral">&quot; &gt;= %&quot;</span> PRId64 <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                   st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> &lt; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;pts %&quot;</span> PRId64 <span class="stringliteral">&quot; &lt; dts %&quot;</span> PRId64 <span class="stringliteral">&quot; in stream %d\n&quot;</span>,</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                   <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="comment">/* update flags */</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a34e67886c4dd250aa7bd562ea2b78d79">is_intra_only</a>)</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> |= <a class="code" href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="mux_8c.html#a92b7d9862600be019e36fdbac3e7e631">  810</a></span>&#160;<span class="preprocessor">#define CHUNK_START 0x1000</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno"><a class="line" href="mux_8c.html#a647151ae012e11d05dbeb01c5a502704">  812</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a647151ae012e11d05dbeb01c5a502704">ff_interleave_add_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>,</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                             <span class="keywordtype">int</span> (*<a class="code" href="vf__find__rect_8c.html#a0f2f2f7d5f9a99706f6f30347c8baf61">compare</a>)(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *, <span class="keyword">const</span> <a class="code" href="struct_a_v_packet.html">AVPacket</a> *, <span class="keyword">const</span> <a class="code" href="struct_a_v_packet.html">AVPacket</a> *))</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;{</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> **next_point, *this_pktl;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordtype">int</span> chunked  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_chunk_size || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_chunk_duration;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    this_pktl    = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_packet_list.html">AVPacketList</a>));</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span> (!this_pktl) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__packet.html#ga8a6deff6c1809029037ffd760db3e0d4">av_packet_make_refcounted</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) &lt; 0) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(this_pktl);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <a class="code" href="group__lavc__packet.html#ga91dbb1359f99547adb544ee96a406b21">av_packet_move_ref</a>(&amp;this_pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> = &amp;this_pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aed4a636701527d7d841e2f70f104dd51">last_in_packet_buffer</a>) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        next_point = &amp;(st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aed4a636701527d7d841e2f70f104dd51">last_in_packet_buffer</a>-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a>);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        next_point = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">if</span> (chunked) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        uint64_t <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>= <a class="code" href="group__lavu__math.html#gab706bfec9bf56534e02ca9564cb968f6">av_rescale_q_rnd</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_chunk_duration, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aa1d28e08e2f8b49b256e056f93038c1a">AV_ROUND_UP</a>);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aee6c99af482bbefa0070a5b30c883a74">interleaver_chunk_size</a>     += <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a2ae737b4162864f9582d4ac31c300308">interleaver_chunk_duration</a> += <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keywordflow">if</span> (   (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_chunk_size &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aee6c99af482bbefa0070a5b30c883a74">interleaver_chunk_size</a> &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_chunk_size)</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            || (<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a2ae737b4162864f9582d4ac31c300308">interleaver_chunk_duration</a>           &gt; <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aee6c99af482bbefa0070a5b30c883a74">interleaver_chunk_size</a> = 0;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> |= <a class="code" href="mux_8c.html#a92b7d9862600be019e36fdbac3e7e631">CHUNK_START</a>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a2ae737b4162864f9582d4ac31c300308">interleaver_chunk_duration</a> &gt; <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                int64_t syncoffset = (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>)*<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>/2;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                int64_t syncto = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> + syncoffset, 1, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)*<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> - syncoffset;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a2ae737b4162864f9582d4ac31c300308">interleaver_chunk_duration</a> += (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> - syncto)/8 - <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a2ae737b4162864f9582d4ac31c300308">interleaver_chunk_duration</a> = 0;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    }</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> (*next_point) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">if</span> (chunked &amp;&amp; !(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> &amp; <a class="code" href="mux_8c.html#a92b7d9862600be019e36fdbac3e7e631">CHUNK_START</a>))</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="keywordflow">goto</span> next_non_null;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vf__find__rect_8c.html#a0f2f2f7d5f9a99706f6f30347c8baf61">compare</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer_end-&gt;pkt, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">while</span> (   *next_point</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                   &amp;&amp; ((chunked &amp;&amp; !((*next_point)-&gt;pkt.flags&amp;<a class="code" href="mux_8c.html#a92b7d9862600be019e36fdbac3e7e631">CHUNK_START</a>))</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                       || !<a class="code" href="vf__find__rect_8c.html#a0f2f2f7d5f9a99706f6f30347c8baf61">compare</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;(*next_point)-&gt;pkt, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)))</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                next_point = &amp;(*next_point)-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (*next_point)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                <span class="keywordflow">goto</span> next_non_null;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            next_point = &amp;(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer_end-&gt;next);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(!*next_point);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer_end = this_pktl;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;next_non_null:</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    this_pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a> = *next_point;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aed4a636701527d7d841e2f70f104dd51">last_in_packet_buffer</a> = *next_point = this_pktl;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="mux_8c.html#ab20211f2b59a998ed5254720a3f8a62f">  884</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#ab20211f2b59a998ed5254720a3f8a62f">interleave_compare_dts</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keyword">const</span> <a class="code" href="struct_a_v_packet.html">AVPacket</a> *next,</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                                                      <span class="keyword">const</span> <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;{</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st2 = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[next-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="eamad_8c.html#a1bd38494185c28133622c86bcc95d650">comp</a>      = <a class="code" href="group__lavu__math.html#ga151744358fff630942b926e67e67c415">av_compare_ts</a>(next-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, st2-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>,</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                                  st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;audio_preload) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="keywordtype">int</span> preload  = st -&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordtype">int</span> preload2 = st2-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">if</span> (preload != preload2) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            int64_t ts, ts2;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            preload  *= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;audio_preload;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            preload2 *= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;audio_preload;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            ts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> -&gt;dts, st -&gt;time_base, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>) - preload;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            ts2= <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(next-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, st2-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>) - preload2;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="keywordflow">if</span> (ts == ts2) {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                ts  = ((uint64_t)<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> -&gt;dts*st -&gt;time_base.num*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> - (uint64_t)preload *st -&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>)*st2-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    - ((uint64_t)next-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>*st2-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> - (uint64_t)preload2*st2-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>)*st -&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                ts2 = 0;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <a class="code" href="eamad_8c.html#a1bd38494185c28133622c86bcc95d650">comp</a> = (ts2 &gt; ts) - (ts2 &lt; ts);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="eamad_8c.html#a1bd38494185c28133622c86bcc95d650">comp</a> == 0)</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> &lt; next-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="eamad_8c.html#a1bd38494185c28133622c86bcc95d650">comp</a> &gt; 0;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="mux_8c.html#a0e71649f97c9039b54273f07b348cb0f">  914</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a0e71649f97c9039b54273f07b348cb0f">ff_interleave_packet_per_dts</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>,</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                                 <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>)</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;{</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *pktl;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordtype">int</span> stream_count = 0;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordtype">int</span> noninterleaved_count = 0;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordtype">int</span> eof = <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#a647151ae012e11d05dbeb01c5a502704">ff_interleave_add_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="mux_8c.html#ab20211f2b59a998ed5254720a3f8a62f">interleave_compare_dts</a>)) &lt; 0)</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;internal-&gt;last_in_packet_buffer) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            ++stream_count;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;codecpar-&gt;codec_type != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a2d09f16df8631e64e8fa566142cdc99d">AVMEDIA_TYPE_ATTACHMENT</a> &amp;&amp;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;codecpar-&gt;codec_id != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea77772369e1d305824b08b53a8d5c56b6">AV_CODEC_ID_VP8</a> &amp;&amp;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;codecpar-&gt;codec_id != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72">AV_CODEC_ID_VP9</a>) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            ++noninterleaved_count;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;nb_interleaved_streams == stream_count)</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a> = 1;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_interleave_delta &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer &amp;&amp;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        !<a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a> &amp;&amp;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;nb_interleaved_streams == stream_count+noninterleaved_count</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    ) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> *top_pkt = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer-&gt;pkt;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        int64_t delta_dts = INT64_MIN;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        int64_t top_dts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(top_pkt-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>,</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[top_pkt-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;time_base,</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                       <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            int64_t last_dts;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            <span class="keyword">const</span> <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *last = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;internal-&gt;last_in_packet_buffer;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            <span class="keywordflow">if</span> (!last)</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            last_dts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(last-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>,</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;time_base,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                    <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            delta_dts = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(delta_dts, last_dts - top_dts);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">if</span> (delta_dts &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_interleave_delta) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                   <span class="stringliteral">&quot;Delay between the first packet and last packet in the &quot;</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                   <span class="stringliteral">&quot;muxing queue is %&quot;</span>PRId64<span class="stringliteral">&quot; &gt; %&quot;</span>PRId64<span class="stringliteral">&quot;: forcing output\n&quot;</span>,</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                   delta_dts, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_interleave_delta);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a> = 1;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer &amp;&amp;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        eof &amp;&amp;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#a0353bdeb6ae20a2f655a6ab288e95030">AVFMT_FLAG_SHORTEST</a>) &amp;&amp;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;shortest_end == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> *top_pkt = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer-&gt;pkt;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;shortest_end = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(top_pkt-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>,</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[top_pkt-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;time_base,</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                       <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;shortest_end != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer) {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <a class="code" href="struct_a_v_packet.html">AVPacket</a> *top_pkt = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer-&gt;pkt;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            int64_t top_dts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(top_pkt-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>,</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[top_pkt-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;time_base,</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                                        <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;shortest_end + 1 &gt;= top_dts)</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            pktl = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            st   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer = pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer_end = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aed4a636701527d7d841e2f70f104dd51">last_in_packet_buffer</a> == pktl)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aed4a636701527d7d841e2f70f104dd51">last_in_packet_buffer</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pktl);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a> = 0;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">if</span> (stream_count &amp;&amp; <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        pktl = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        st   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;stream_index];</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer = pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer)</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer_end = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aed4a636701527d7d841e2f70f104dd51">last_in_packet_buffer</a> == pktl)</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#aed4a636701527d7d841e2f70f104dd51">last_in_packet_buffer</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pktl);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;}</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="mux_8c.html#a987884ac12fdbae7dc8096925715ad5a"> 1032</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a987884ac12fdbae7dc8096925715ad5a">ff_interleaved_peek</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> stream,</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                        <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> add_offset)</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;{</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *pktl = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">while</span> (pktl) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="keywordflow">if</span> (pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> == stream) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> = pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            <span class="keywordflow">if</span> (add_offset) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                int64_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a3d29af398725c52954b8e3651515701d">mux_ts_offset</a>;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_ts_offset)</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_ts_offset, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> += <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> += <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        pktl = pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOENT);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;}</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"><a class="line" href="mux_8c.html#a552b572c3ac81421ed684256de0eb815"> 1067</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a552b572c3ac81421ed684256de0eb815">interleave_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <span class="keywordtype">int</span> <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;{</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;interleave_packet) {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;interleave_packet(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mux_8c.html#a0e71649f97c9039b54273f07b348cb0f">ff_interleave_packet_per_dts</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;}</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"><a class="line" href="mux_8c.html#aca5a6c46876cf13e21d43603489665b6"> 1075</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#aca5a6c46876cf13e21d43603489665b6">check_bitstream</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;{</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#aa1683260287285a2a6a91476a5f2ffd5">AVFMT_FLAG_AUTO_BSF</a>))</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;check_bitstream) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a7a4618591e5efc36c8a2782a3fe29330">bitstream_checked</a>) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;check_bitstream(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) &lt; 0)</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == 1)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a7a4618591e5efc36c8a2782a3fe29330">bitstream_checked</a> = 1;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160; </div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;}</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160; </div>
<div class="line"><a name="l01094"></a><span class="lineno"><a class="line" href="mux_8c.html#a109662cdbfd484f70a0d0b1586bc269c"> 1094</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a109662cdbfd484f70a0d0b1586bc269c">interleaved_write_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>)</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;{</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">for</span> (;; ) {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> opkt;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#a552b572c3ac81421ed684256de0eb815">interleave_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;opkt, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt;= 0)</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#a35b04d31f9156dd1dbca471d097741d8">write_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;opkt);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;opkt);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;}</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"><a class="line" href="mux_8c.html#a7e1e909aad84833561952f64ffab1ddc"> 1113</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a7e1e909aad84833561952f64ffab1ddc">write_packet_common</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> interleaved)</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;{</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;debug &amp; <a class="code" href="avformat_8h.html#a3d60713d578ad1ef6505e05779c112cf">FF_FDEBUG_TS</a>)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;%s size:%d dts:%s pts:%s\n&quot;</span>, __FUNCTION__,</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;               <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>, <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>), <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>));</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="preprocessor">#if FF_API_COMPUTE_PKT_FIELDS2 &amp;&amp; FF_API_LAVF_AVCTX</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = compute_muxer_pkt_fields(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) &lt; 0 &amp;&amp; !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>))</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">if</span> (interleaved) {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>))</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mux_8c.html#a109662cdbfd484f70a0d0b1586bc269c">interleaved_write_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, 0);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mux_8c.html#a35b04d31f9156dd1dbca471d097741d8">write_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;}</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="mux_8c.html#a7412a139636861df6383f330b98abb1a"> 1135</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a7412a139636861df6383f330b98abb1a">write_packets_from_bsfs</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> interleaved)</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;{</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="struct_a_v_b_s_f_context.html">AVBSFContext</a> *bsfc = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ae325fff950b722fc370518c3a4da949e">bsfc</a>;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#gaada9ea8f08d3dcf23c14564dbc88992c">av_bsf_send_packet</a>(bsfc, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) &lt; 0) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                <span class="stringliteral">&quot;Failed to send packet to filter %s for stream %d\n&quot;</span>,</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                bsfc-&gt;<a class="code" href="struct_a_v_b_s_f_context.html#aee0c46a9a0d19ec7c8970565fd56c5bf">filter</a>-&gt;<a class="code" href="struct_a_v_bit_stream_filter.html#a33c3cb51bd13060da35481655b41e4e5">name</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#ga7fffb6c87b91250956e7a2367af56b38">av_bsf_receive_packet</a>(bsfc, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN) || <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error applying bitstream filters to an output &quot;</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                   <span class="stringliteral">&quot;packet for stream #%d: %s\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_recognition &amp; <a class="code" href="avcodec_8h.html#a6101c3b2a02c61ea41f3c97e88b64d39">AV_EF_EXPLODE</a>) &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM))</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        }</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <a class="code" href="group__lavc__packet.html#gae5c86e4d93f6e7aa62ef2c60763ea67e">av_packet_rescale_ts</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, bsfc-&gt;<a class="code" href="struct_a_v_b_s_f_context.html#a571e7d7c14cbd318254cea33ee5a61e3">time_base_out</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#a7e1e909aad84833561952f64ffab1ddc">write_packet_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, interleaved);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0 &amp;&amp; !interleaved) <span class="comment">// a successful write_packet_common already unrefed pkt for interleaved</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    } <span class="keywordflow">while</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;}</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"><a class="line" href="mux_8c.html#a590f65b3cc4b23dc746864d7c22c6dbf"> 1167</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a590f65b3cc4b23dc746864d7c22c6dbf">write_packets_common</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> interleaved)</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;{</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#aa34b7ca6722fb59cc7a9661a22368850">check_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#ace503e72eb2954c673f44f2c20e7a4d0">prepare_input_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#aca5a6c46876cf13e21d43603489665b6">check_bitstream</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#ae325fff950b722fc370518c3a4da949e">bsfc</a>) {</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mux_8c.html#a7412a139636861df6383f330b98abb1a">write_packets_from_bsfs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, interleaved);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mux_8c.html#a7e1e909aad84833561952f64ffab1ddc">write_packet_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, interleaved);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;}</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"><a class="line" href="group__lavf__encoding.html#gaa85cc1774f18f306cd20a40fc50d0b36"> 1190</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__lavf__encoding.html#gaa85cc1774f18f306cd20a40fc50d0b36">av_write_frame</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>)</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;{</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> local_pkt, *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> = &amp;local_pkt;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>) {</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a3b9a2012b993edb9e2ba3db6d55db1ae">AVFMT_ALLOW_FLUSH</a>) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_packet(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <a class="code" href="mux_8c.html#a79a148203d497dac7c04fd43c9fd4e1f">flush_if_needed</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0 &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;error &lt; 0)</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;error;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    }</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; </div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;flags &amp; <a class="code" href="mux_8c.html#a06b8cba5d771304f8276f08691ed67d6">AV_PKT_FLAG_UNCODED_FRAME</a>) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <span class="comment">/* We don&#39;t own in, so we have to make sure not to modify it.</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">         * The following avoids copying in&#39;s data unnecessarily.</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">         * Copying side data is unavoidable as a bitstream filter</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">         * may change it, e.g. free it on errors. */</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a>  = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;size;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__packet.html#gade00f67930f4e2a3401b67b701d5b3a2">av_packet_copy_props</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;buf) {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a> = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;buf);</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a>) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            }</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#a590f65b3cc4b23dc746864d7c22c6dbf">write_packets_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, 0<span class="comment">/*non-interleaved*/</span>);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="comment">// Uncoded frames using the noninterleaved codepath are also freed here</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;}</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"><a class="line" href="group__lavf__encoding.html#ga37352ed2c63493c38219d935e71db6c1"> 1236</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__lavf__encoding.html#ga37352ed2c63493c38219d935e71db6c1">av_interleaved_write_frame</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;{</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mux_8c.html#a590f65b3cc4b23dc746864d7c22c6dbf">write_packets_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, 1<span class="comment">/*interleaved*/</span>);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;av_interleaved_write_frame FLUSH\n&quot;</span>);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mux_8c.html#a109662cdbfd484f70a0d0b1586bc269c">interleaved_write_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1<span class="comment">/*flush*/</span>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;}</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"><a class="line" href="group__lavf__encoding.html#ga7f14007e7dc8f481f054b21614dfec13"> 1251</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__lavf__encoding.html#ga7f14007e7dc8f481f054b21614dfec13">av_write_trailer</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;{</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, ret1, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> = {0};</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;internal-&gt;bsfc) {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            ret1 = <a class="code" href="mux_8c.html#a7412a139636861df6383f330b98abb1a">write_packets_from_bsfs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, 1<span class="comment">/*interleaved*/</span>);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="keywordflow">if</span> (ret1 &lt; 0)</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0)</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ret1;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    ret1 = <a class="code" href="mux_8c.html#a109662cdbfd484f70a0d0b1586bc269c">interleaved_write_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ret1;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_trailer) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a752cce390d480521919aa5d8be24ac0b">AVFMT_NOFILE</a>) &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb)</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            <a class="code" href="avio_8h.html#a03e0cde48d492b5433e136152e47cb4c">avio_write_marker</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>, <a class="code" href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a435d96ce655020a8b0b456ad51703c50">AVIO_DATA_MARKER_TRAILER</a>);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0) {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_trailer(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_trailer(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <a class="code" href="mux_8c.html#a0e0de442dbf020a004245170119aebb8">deinit_muxer</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb)</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;       <a class="code" href="avio_8h.html#ad88b866a118c17c95663f7782b2e8946">avio_flush</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == 0)</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;       <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;error : 0;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;priv_data);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;internal-&gt;index_entries);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    }</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;priv_class)</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <a class="code" href="group__avoptions.html#gac14db824af52baf8181406e98d116097">av_opt_free</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;}</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"><a class="line" href="group__lavf__encoding.html#ga661ee0b2f3dbcaaef5d68f2f5d75e2d4"> 1296</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__lavf__encoding.html#ga661ee0b2f3dbcaaef5d68f2f5d75e2d4">av_get_output_timestamp</a>(<span class="keyword">struct</span> <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> stream,</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                            int64_t *dts, int64_t *wall)</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;{</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;get_output_timestamp)</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOSYS);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;get_output_timestamp(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, stream, dts, wall);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;}</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"><a class="line" href="mux_8c.html#a5e5b06d6dc78cbe6112e42f8069b12b5"> 1305</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mux_8c.html#a5e5b06d6dc78cbe6112e42f8069b12b5">ff_write_chained</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *dst, <span class="keywordtype">int</span> dst_stream, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>,</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                     <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">int</span> <a class="code" href="dirac__dwt__template_8c.html#aebaee04bd82e55ff988f30afcd5766a5">interleave</a>)</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;{</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> local_pkt;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    local_pkt = *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    local_pkt.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = dst_stream;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <a class="code" href="group__lavc__packet.html#gae5c86e4d93f6e7aa62ef2c60763ea67e">av_packet_rescale_ts</a>(&amp;local_pkt,</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                         <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;time_base,</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                         dst-&gt;<a class="code" href="struct_a_v_format_context.html#acfefb6b6cf21e87a0dcbd1a547ba2348">streams</a>[dst_stream]-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dirac__dwt__template_8c.html#aebaee04bd82e55ff988f30afcd5766a5">interleave</a>) <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__encoding.html#ga37352ed2c63493c38219d935e71db6c1">av_interleaved_write_frame</a>(dst, &amp;local_pkt);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">else</span>            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__encoding.html#gaa85cc1774f18f306cd20a40fc50d0b36">av_write_frame</a>(dst, &amp;local_pkt);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a> = local_pkt.<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a>;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#ac55bfef91c33f02704ba76518d0f294c">side_data</a>       = local_pkt.<a class="code" href="struct_a_v_packet.html#ac55bfef91c33f02704ba76518d0f294c">side_data</a>;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#af415e25244b26921e8fc249d45499b84">side_data_elems</a> = local_pkt.<a class="code" href="struct_a_v_packet.html#af415e25244b26921e8fc249d45499b84">side_data_elems</a>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;}</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"><a class="line" href="mux_8c.html#a2fb0d69b36fd984c267cd892968d0d9a"> 1326</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mux_8c.html#a2fb0d69b36fd984c267cd892968d0d9a">uncoded_frame_free</a>(<span class="keywordtype">void</span> *unused, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>)</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;{</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>((<a class="code" href="struct_a_v_frame.html">AVFrame</a> **)<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"><a class="line" href="mux_8c.html#ad3c24cb7c90cc5d2b5f4cb46a5c13cfd"> 1332</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mux_8c.html#ad3c24cb7c90cc5d2b5f4cb46a5c13cfd">write_uncoded_frame_internal</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> stream_index,</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                                        <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <span class="keywordtype">int</span> interleaved)</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;{</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, *pktp;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_uncoded_frame) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOSYS);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    }</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>) {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        pktp = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordtype">size_t</span>   bufsize = <span class="keyword">sizeof</span>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>) + <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <a class="code" href="struct_a_v_frame.html">AVFrame</a> **framep = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(bufsize);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160; </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="keywordflow">if</span> (!framep)</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        pktp = &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a> = <a class="code" href="group__lavu__buffer.html#ga3e7f4c92db85ccba0b2a16dd0069842a">av_buffer_create</a>((<span class="keywordtype">void</span> *)framep, bufsize,</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                                   <a class="code" href="mux_8c.html#a2fb0d69b36fd984c267cd892968d0d9a">uncoded_frame_free</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a>) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(framep);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        *framep = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>         = (<span class="keywordtype">void</span> *)framep;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>         = <span class="keyword">sizeof</span>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>          =</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>          = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>     = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pkt_duration;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = stream_index;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> |= <a class="code" href="mux_8c.html#a06b8cba5d771304f8276f08691ed67d6">AV_PKT_FLAG_UNCODED_FRAME</a>;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    }</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">return</span> interleaved ? <a class="code" href="group__lavf__encoding.html#ga37352ed2c63493c38219d935e71db6c1">av_interleaved_write_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, pktp) :</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                         <a class="code" href="group__lavf__encoding.html#gaa85cc1774f18f306cd20a40fc50d0b36">av_write_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, pktp);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;}</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"><a class="line" href="group__lavf__encoding.html#gaab766dccdff1bf323a2fc604e723b441"> 1376</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__lavf__encoding.html#gaab766dccdff1bf323a2fc604e723b441">av_write_uncoded_frame</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> stream_index,</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                           <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;{</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mux_8c.html#ad3c24cb7c90cc5d2b5f4cb46a5c13cfd">write_uncoded_frame_internal</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, stream_index, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;}</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"><a class="line" href="group__lavf__encoding.html#gafe9916c601bba6827d6f9271a61260e4"> 1382</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__lavf__encoding.html#gafe9916c601bba6827d6f9271a61260e4">av_interleaved_write_uncoded_frame</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> stream_index,</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                                       <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;{</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mux_8c.html#ad3c24cb7c90cc5d2b5f4cb46a5c13cfd">write_uncoded_frame_internal</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, stream_index, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 1);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;}</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"><a class="line" href="group__lavf__encoding.html#ga5f6bebdc8c234a5ad9740de89acb15e6"> 1388</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__lavf__encoding.html#ga5f6bebdc8c234a5ad9740de89acb15e6">av_write_uncoded_frame_query</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> stream_index)</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;{</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_uncoded_frame)</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOSYS);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;write_uncoded_frame(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, stream_index, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                                           <a class="code" href="libavformat_2internal_8h.html#a69fb49797d2b6771a17f5e1eb1db6e74a8759fe94afa0a9905288315ae4ba698b">AV_WRITE_UNCODED_FRAME_QUERY</a>);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="atarget__bsf__fuzzer_8c_html_aa3d85a3469f60990fdff296efb86a9c2"><div class="ttname"><a href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a></div><div class="ttdeci">static void error(const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="target__bsf__fuzzer_8c_source.html#l00030">target_bsf_fuzzer.c:30</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_abee943e65d98f9763fa6602a356e774f"><div class="ttname"><a href="struct_a_v_codec_parameters.html#abee943e65d98f9763fa6602a356e774f">AVCodecParameters::format</a></div><div class="ttdeci">int format</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00084">codec_par.h:84</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a34e67886c4dd250aa7bd562ea2b78d79"><div class="ttname"><a href="struct_a_v_stream_internal.html#a34e67886c4dd250aa7bd562ea2b78d79">AVStreamInternal::is_intra_only</a></div><div class="ttdeci">int is_intra_only</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00191">internal.h:191</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_aed4a636701527d7d841e2f70f104dd51"><div class="ttname"><a href="struct_a_v_stream_internal.html#aed4a636701527d7d841e2f70f104dd51">AVStreamInternal::last_in_packet_buffer</a></div><div class="ttdeci">struct AVPacketList * last_in_packet_buffer</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00345">internal.h:345</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_aa6ef004d10669ab4ee062367a014ea33"><div class="ttname"><a href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_ENABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00085">internal.h:85</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a></div><div class="ttdeci">@ AVMEDIA_TYPE_SUBTITLE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00204">avutil.h:204</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="amux_8c_html_ab20211f2b59a998ed5254720a3f8a62f"><div class="ttname"><a href="mux_8c.html#ab20211f2b59a998ed5254720a3f8a62f">interleave_compare_dts</a></div><div class="ttdeci">static int interleave_compare_dts(AVFormatContext *s, const AVPacket *next, const AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00884">mux.c:884</a></div></div>
<div class="ttc" id="astruct_f_f_frac_html"><div class="ttname"><a href="struct_f_f_frac.html">FFFrac</a></div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00059">internal.h:59</a></div></div>
<div class="ttc" id="alibavformat_2version_8h_html_a052e19399c636f5fe37639a6625f03ae"><div class="ttname"><a href="libavformat_2version_8h.html#a052e19399c636f5fe37639a6625f03ae">LIBAVFORMAT_IDENT</a></div><div class="ttdeci">#define LIBAVFORMAT_IDENT</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2version_8h_source.html#l00046">version.h:46</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a7d6ef91120ffe80040c699e747a1ad68"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">AVCodecParameters::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:136</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga5396ff79e3c1ec7220765499f2efc74d"><div class="ttname"><a href="group__lavf__encoding.html#ga5396ff79e3c1ec7220765499f2efc74d">AVSTREAM_INIT_IN_WRITE_HEADER</a></div><div class="ttdeci">#define AVSTREAM_INIT_IN_WRITE_HEADER</div><div class="ttdoc">stream parameters initialized in avformat_write_header</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l02401">avformat.h:2401</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_html"><div class="ttname"><a href="struct_a_v_dictionary.html">AVDictionary</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00030">dict.c:30</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga151744358fff630942b926e67e67c415"><div class="ttname"><a href="group__lavu__math.html#ga151744358fff630942b926e67e67c415">av_compare_ts</a></div><div class="ttdeci">int av_compare_ts(int64_t ts_a, AVRational tb_a, int64_t ts_b, AVRational tb_b)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00147">mathematics.c:147</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gad4ca968e9058b39b2da630ad0a091bdb"><div class="ttname"><a href="group__avoptions.html#gad4ca968e9058b39b2da630ad0a091bdb">av_opt_set_defaults</a></div><div class="ttdeci">void av_opt_set_defaults(void *s)</div><div class="ttdef"><b>Definition:</b> <a href="opt_8c_source.html#l01357">opt.c:1357</a></div></div>
<div class="ttc" id="aavformat_8h_html_a21abb57f90931c92c853e696cc1c358c"><div class="ttname"><a href="avformat_8h.html#a21abb57f90931c92c853e696cc1c358c">AVFMT_NODIMENSIONS</a></div><div class="ttdeci">#define AVFMT_NODIMENSIONS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00466">avformat.h:466</a></div></div>
<div class="ttc" id="aavformat_8h_html_a3d60713d578ad1ef6505e05779c112cf"><div class="ttname"><a href="avformat_8h.html#a3d60713d578ad1ef6505e05779c112cf">FF_FDEBUG_TS</a></div><div class="ttdeci">#define FF_FDEBUG_TS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01507">avformat.h:1507</a></div></div>
<div class="ttc" id="astruct_a_v_packet_list_html"><div class="ttname"><a href="struct_a_v_packet_list.html">AVPacketList</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00396">packet.h:396</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="amux_8c_html_ace503e72eb2954c673f44f2c20e7a4d0"><div class="ttname"><a href="mux_8c.html#ace503e72eb2954c673f44f2c20e7a4d0">prepare_input_packet</a></div><div class="ttdeci">static int prepare_input_packet(AVFormatContext *s, AVStream *st, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00762">mux.c:762</a></div></div>
<div class="ttc" id="acommon_8h_html_a09a0bb7d8fcfac416de7a5fe7fd8b0f1"><div class="ttname"><a href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a></div><div class="ttdeci">#define FFSWAP(type, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00099">common.h:99</a></div></div>
<div class="ttc" id="aeamad_8c_html_a1bd38494185c28133622c86bcc95d650"><div class="ttname"><a href="eamad_8c.html#a1bd38494185c28133622c86bcc95d650">comp</a></div><div class="ttdeci">static void comp(unsigned char *dst, ptrdiff_t dst_stride, unsigned char *src, ptrdiff_t src_stride, int add)</div><div class="ttdef"><b>Definition:</b> <a href="eamad_8c_source.html#l00083">eamad.c:83</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_a6351818196357654cde11506036add89"><div class="ttname"><a href="libavformat_2internal_8h.html#a6351818196357654cde11506036add89">ff_compute_frame_duration</a></div><div class="ttdeci">void ff_compute_frame_duration(AVFormatContext *s, int *pnum, int *pden, AVStream *st, AVCodecParserContext *pc, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l00918">utils.c:918</a></div></div>
<div class="ttc" id="apixdesc_8c_html_afe0c3e8aef5173de28bbdaea4298f5f0"><div class="ttname"><a href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a></div><div class="ttdeci">const AVPixFmtDescriptor * av_pix_fmt_desc_get(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02573">pixdesc.c:2573</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gab4faa0afdf35076914824200331defff"><div class="ttname"><a href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a></div><div class="ttdeci">#define AVERROR_EOF</div><div class="ttdoc">End of file.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00055">error.h:55</a></div></div>
<div class="ttc" id="acommon_8h_html_a19c68e2b5efcbab914d79db1e4fee734"><div class="ttname"><a href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a></div><div class="ttdeci">#define MKTAG(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00405">common.h:405</a></div></div>
<div class="ttc" id="aavformat_8h_html_ab54a3e54e88a8f7d7760e60b49944e44"><div class="ttname"><a href="avformat_8h.html#ab54a3e54e88a8f7d7760e60b49944e44">AV_DISPOSITION_ATTACHED_PIC</a></div><div class="ttdeci">#define AV_DISPOSITION_ATTACHED_PIC</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00837">avformat.h:837</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga0c7058f764778615e7978a1821ab3cfe"><div class="ttname"><a href="group__lavc__core.html#ga0c7058f764778615e7978a1821ab3cfe">avcodec_parameters_from_context</a></div><div class="ttdeci">int avcodec_parameters_from_context(AVCodecParameters *par, const AVCodecContext *codec)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l02095">utils.c:2095</a></div></div>
<div class="ttc" id="aavformat_8h_html_ae4418d32b17890be22da9c5f95087168"><div class="ttname"><a href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a></div><div class="ttdeci">#define AVFMT_NOTIMESTAMPS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00462">avformat.h:462</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_gafd07a13a4ddaa6015275cad6022d9ee3"><div class="ttname"><a href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a></div><div class="ttdeci">#define AV_TIME_BASE_Q</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00260">avutil.h:260</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc">AV_CODEC_ID_RAWVIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_RAWVIDEO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00062">codec_id.h:62</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="apixdesc_8h_html"><div class="ttname"><a href="pixdesc_8h.html">pixdesc.h</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ad4714ae1c93972fd9c8ff2a303fcd051"><div class="ttname"><a href="libavcodec_2internal_8h.html#ad4714ae1c93972fd9c8ff2a303fcd051">avpriv_toupper4</a></div><div class="ttdeci">unsigned int avpriv_toupper4(unsigned int x)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01868">utils.c:1868</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a51639f88aef9f4f283f538a0c033fbb8"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">AVCodecParameters::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00126">codec_par.h:126</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html"><div class="ttname"><a href="libavcodec_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_gaab766dccdff1bf323a2fc604e723b441"><div class="ttname"><a href="group__lavf__encoding.html#gaab766dccdff1bf323a2fc604e723b441">av_write_uncoded_frame</a></div><div class="ttdeci">int av_write_uncoded_frame(AVFormatContext *s, int stream_index, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01376">mux.c:1376</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga341bbd1ea599dfb0510f419e5272fecc"><div class="ttname"><a href="group__lavu__dict.html#ga341bbd1ea599dfb0510f419e5272fecc">AV_DICT_IGNORE_SUFFIX</a></div><div class="ttdeci">#define AV_DICT_IGNORE_SUFFIX</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00071">dict.h:70</a></div></div>
<div class="ttc" id="aavformat_8h_html_a0353bdeb6ae20a2f655a6ab288e95030"><div class="ttname"><a href="avformat_8h.html#a0353bdeb6ae20a2f655a6ab288e95030">AVFMT_FLAG_SHORTEST</a></div><div class="ttdeci">#define AVFMT_FLAG_SHORTEST</div><div class="ttdoc">Stop muxing when the shortest stream stops.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01381">avformat.h:1381</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html"><div class="ttname"><a href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00081">dict.h:81</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga3e7f4c92db85ccba0b2a16dd0069842a"><div class="ttname"><a href="group__lavu__buffer.html#ga3e7f4c92db85ccba0b2a16dd0069842a">av_buffer_create</a></div><div class="ttdeci">AVBufferRef * av_buffer_create(uint8_t *data, int size, void(*free)(void *opaque, uint8_t *data), void *opaque, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00029">buffer.c:29</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_aea05abdb8e45405048d7923a68c23ef5"><div class="ttname"><a href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">AVStream::disposition</a></div><div class="ttdeci">int disposition</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00922">avformat.h:922</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a7a4618591e5efc36c8a2782a3fe29330"><div class="ttname"><a href="struct_a_v_stream_internal.html#a7a4618591e5efc36c8a2782a3fe29330">AVStreamInternal::bitstream_checked</a></div><div class="ttdeci">int bitstream_checked</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00164">internal.h:164</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00033">cuda_runtime.h:33</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_aa34d34689036af1c54d76901d95a3efe"><div class="ttname"><a href="struct_a_v_stream_internal.html#aa34d34689036af1c54d76901d95a3efe">AVStreamInternal::pts_buffer</a></div><div class="ttdeci">int64_t pts_buffer[MAX_REORDER_DELAY+1]</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00319">internal.h:319</a></div></div>
<div class="ttc" id="amathematics_8h_html"><div class="ttname"><a href="mathematics_8h.html">mathematics.h</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga5f6bebdc8c234a5ad9740de89acb15e6"><div class="ttname"><a href="group__lavf__encoding.html#ga5f6bebdc8c234a5ad9740de89acb15e6">av_write_uncoded_frame_query</a></div><div class="ttdeci">int av_write_uncoded_frame_query(AVFormatContext *s, int stream_index)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01388">mux.c:1388</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga169cfa28508e22e138c5b99be8517ea4"><div class="ttname"><a href="group__lavf__encoding.html#ga169cfa28508e22e138c5b99be8517ea4">avformat_init_output</a></div><div class="ttdeci">int avformat_init_output(AVFormatContext *s, AVDictionary **options)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00485">mux.c:485</a></div></div>
<div class="ttc" id="astruct_a_v_bit_stream_filter_html_a33c3cb51bd13060da35481655b41e4e5"><div class="ttname"><a href="struct_a_v_bit_stream_filter.html#a33c3cb51bd13060da35481655b41e4e5">AVBitStreamFilter::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8h_source.html#l00099">bsf.h:99</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga75603d7c2b8adf5829f4fd2fb860168f"><div class="ttname"><a href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a></div><div class="ttdeci">#define AV_PKT_FLAG_KEY</div><div class="ttdoc">The packet contains a keyframe.</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00401">packet.h:401</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="aavformat_8h_html_aa5496b84535113646e96c8cf3b624aaf"><div class="ttname"><a href="avformat_8h.html#aa5496b84535113646e96c8cf3b624aaf">ff_const59</a></div><div class="ttdeci">#define ff_const59</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00535">avformat.h:535</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_a513c91d8ee98a29b942c2cb4c955177f"><div class="ttname"><a href="libavformat_2internal_8h.html#a513c91d8ee98a29b942c2cb4c955177f">ff_is_intra_only</a></div><div class="ttdeci">int ff_is_intra_only(enum AVCodecID id)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l00981">utils.c:981</a></div></div>
<div class="ttc" id="aavio_8h_html_a03e0cde48d492b5433e136152e47cb4c"><div class="ttname"><a href="avio_8h.html#a03e0cde48d492b5433e136152e47cb4c">avio_write_marker</a></div><div class="ttdeci">void avio_write_marker(AVIOContext *s, int64_t time, enum AVIODataMarkerType type)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00483">aviobuf.c:483</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga2020642d84f919764eed55848c9e69da"><div class="ttname"><a href="group__lavf__encoding.html#ga2020642d84f919764eed55848c9e69da">av_guess_format</a></div><div class="ttdeci">ff_const59 AVOutputFormat * av_guess_format(const char *short_name, const char *filename, const char *mime_type)</div><div class="ttdef"><b>Definition:</b> <a href="format_8c_source.html#l00051">format.c:51</a></div></div>
<div class="ttc" id="astruct_a_v_b_s_f_context_html_aee0c46a9a0d19ec7c8970565fd56c5bf"><div class="ttname"><a href="struct_a_v_b_s_f_context.html#aee0c46a9a0d19ec7c8970565fd56c5bf">AVBSFContext::filter</a></div><div class="ttdeci">const struct AVBitStreamFilter * filter</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8h_source.html#l00058">bsf.h:58</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a12826d21779289356722971d362c583c"><div class="ttname"><a href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">AVStream::codecpar</a></div><div class="ttdeci">AVCodecParameters * codecpar</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01034">avformat.h:1034</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="aavformat_8h_html_aa1683260287285a2a6a91476a5f2ffd5"><div class="ttname"><a href="avformat_8h.html#aa1683260287285a2a6a91476a5f2ffd5">AVFMT_FLAG_AUTO_BSF</a></div><div class="ttdeci">#define AVFMT_FLAG_AUTO_BSF</div><div class="ttdoc">Add bitstream filters as requested by the muxer.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01382">avformat.h:1382</a></div></div>
<div class="ttc" id="astruct_a_v_b_s_f_context_html_a571e7d7c14cbd318254cea33ee5a61e3"><div class="ttname"><a href="struct_a_v_b_s_f_context.html#a571e7d7c14cbd318254cea33ee5a61e3">AVBSFContext::time_base_out</a></div><div class="ttdeci">AVRational time_base_out</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8h_source.html#l00095">bsf.h:95</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_ac244957f399be61298e7286bb89ae3fa"><div class="ttname"><a href="struct_a_v_stream_internal.html#ac244957f399be61298e7286bb89ae3fa">AVStreamInternal::priv_pts</a></div><div class="ttdeci">FFFrac * priv_pts</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00193">internal.h:193</a></div></div>
<div class="ttc" id="aaeval_8c_html_a16aca557f352132b55bbc3c4769daa8b"><div class="ttname"><a href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a></div><div class="ttdeci">static double val(void *priv, double ch)</div><div class="ttdef"><b>Definition:</b> <a href="aeval_8c_source.html#l00076">aeval.c:76</a></div></div>
<div class="ttc" id="aavformat_8h_html_aeb387b52a67154ded3aeee38400f358a"><div class="ttname"><a href="avformat_8h.html#aeb387b52a67154ded3aeee38400f358a">AVFMT_AVOID_NEG_TS_MAKE_ZERO</a></div><div class="ttdeci">#define AVFMT_AVOID_NEG_TS_MAKE_ZERO</div><div class="ttdoc">Shift timestamps so that they start at 0.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01569">avformat.h:1569</a></div></div>
<div class="ttc" id="amux_8c_html_a552b572c3ac81421ed684256de0eb815"><div class="ttname"><a href="mux_8c.html#a552b572c3ac81421ed684256de0eb815">interleave_packet</a></div><div class="ttdeci">static int interleave_packet(AVFormatContext *s, AVPacket *out, AVPacket *in, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01067">mux.c:1067</a></div></div>
<div class="ttc" id="aavformat_8h_html_af7e859adfb2f1819dd733bc19b600585"><div class="ttname"><a href="avformat_8h.html#af7e859adfb2f1819dd733bc19b600585">AV_DISPOSITION_TIMED_THUMBNAILS</a></div><div class="ttdeci">#define AV_DISPOSITION_TIMED_THUMBNAILS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00842">avformat.h:842</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gga921d656eaf2c4d6800a734a13af021d0aa1d28e08e2f8b49b256e056f93038c1a"><div class="ttname"><a href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aa1d28e08e2f8b49b256e056f93038c1a">AV_ROUND_UP</a></div><div class="ttdeci">@ AV_ROUND_UP</div><div class="ttdoc">Round toward +infinity.</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00083">mathematics.h:83</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_ae495a86ddec02af7d5a2805beba9ac9f"><div class="ttname"><a href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">AVStream::internal</a></div><div class="ttdeci">AVStreamInternal * internal</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01108">avformat.h:1108</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html_ac55f4c21dd75c8c48b9de5080681eed4"><div class="ttname"><a href="struct_a_v_output_format.html#ac55f4c21dd75c8c48b9de5080681eed4">AVOutputFormat::codec_tag</a></div><div class="ttdeci">const struct AVCodecTag *const  * codec_tag</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00516">avformat.h:516</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a0d1cb9b5a32b00fb6edc81ea3aae2a49"><div class="ttname"><a href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">AVPacket::stream_index</a></div><div class="ttdeci">int stream_index</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00365">packet.h:365</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a26f84d225b515a5184bb5ce6b7f3b147"><div class="ttname"><a href="struct_a_v_stream_internal.html#a26f84d225b515a5184bb5ce6b7f3b147">AVStreamInternal::avctx</a></div><div class="ttdeci">AVCodecContext * avctx</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00169">internal.h:169</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga030300ea4843c53b2fe178a434964b39"><div class="ttname"><a href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a></div><div class="ttdeci">#define AV_LOG_TRACE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00220">log.h:220</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html_abea8ed308fe00644fc066a00018afa95"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html#abea8ed308fe00644fc066a00018afa95">AVPixFmtDescriptor::log2_chroma_h</a></div><div class="ttdeci">uint8_t log2_chroma_h</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00101">pixdesc.h:101</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a9db755451f14e2bf590d4b85d82b32e6"><div class="ttname"><a href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">AVStream::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00898">avformat.h:898</a></div></div>
<div class="ttc" id="amux_8c_html_a35b04d31f9156dd1dbca471d097741d8"><div class="ttname"><a href="mux_8c.html#a35b04d31f9156dd1dbca471d097741d8">write_packet</a></div><div class="ttdeci">static int write_packet(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00663">mux.c:663</a></div></div>
<div class="ttc" id="amux_8c_html_a7e1e909aad84833561952f64ffab1ddc"><div class="ttname"><a href="mux_8c.html#a7e1e909aad84833561952f64ffab1ddc">write_packet_common</a></div><div class="ttdeci">static int write_packet_common(AVFormatContext *s, AVStream *st, AVPacket *pkt, int interleaved)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01113">mux.c:1113</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_gae67f143237b2cb2936c9b147aa6dfde3"><div class="ttname"><a href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a></div><div class="ttdeci">AVDictionaryEntry * av_dict_get(const AVDictionary *m, const char *key, const AVDictionaryEntry *prev, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00040">dict.c:40</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gaf1a88e8f152d7835f111b1ef8813fb2e"><div class="ttname"><a href="group__avoptions.html#gaf1a88e8f152d7835f111b1ef8813fb2e">av_opt_set_dict</a></div><div class="ttdeci">int av_opt_set_dict(void *obj, AVDictionary **options)</div><div class="ttdef"><b>Definition:</b> <a href="opt_8c_source.html#l01655">opt.c:1655</a></div></div>
<div class="ttc" id="amux_8c_html_a06b8cba5d771304f8276f08691ed67d6"><div class="ttname"><a href="mux_8c.html#a06b8cba5d771304f8276f08691ed67d6">AV_PKT_FLAG_UNCODED_FRAME</a></div><div class="ttdeci">#define AV_PKT_FLAG_UNCODED_FRAME</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00540">mux.c:540</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a4d418b807283607a231d2d8cdf559f00"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">AVCodecParameters::channels</a></div><div class="ttdeci">int channels</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00166">codec_par.h:166</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a7d537039ea0e18164d9edb0b5ca984dd"><div class="ttname"><a href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample format(the sample packing is implied by the sample format) and sample rate. The lists are not just lists</div></div>
<div class="ttc" id="amxfenc_8c_html_ad662aa56c1696f09c0ac6b97abafac6d"><div class="ttname"><a href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a></div><div class="ttdeci">int frame_size</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02166">mxfenc.c:2166</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72">AV_CODEC_ID_VP9</a></div><div class="ttdeci">@ AV_CODEC_ID_VP9</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00217">codec_id.h:217</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9f76f2475ef24ff4c9771dd53072d040"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">AVCodecParameters::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:60</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga935dbbf6bde8dfe5fa7ddb1da582eb07"><div class="ttname"><a href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a></div><div class="ttdeci">static double av_q2d(AVRational a)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00104">rational.h:104</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="amux_8c_html_a92b7d9862600be019e36fdbac3e7e631"><div class="ttname"><a href="mux_8c.html#a92b7d9862600be019e36fdbac3e7e631">CHUNK_START</a></div><div class="ttdeci">#define CHUNK_START</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00810">mux.c:810</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca886b3191488ef874bf3e94b3d9cec713"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca886b3191488ef874bf3e94b3d9cec713">AV_FIELD_UNKNOWN</a></div><div class="ttdeci">@ AV_FIELD_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00037">codec_par.h:37</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a3d29af398725c52954b8e3651515701d"><div class="ttname"><a href="struct_a_v_stream_internal.html#a3d29af398725c52954b8e3651515701d">AVStreamInternal::mux_ts_offset</a></div><div class="ttdeci">int64_t mux_ts_offset</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00287">internal.h:287</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gaf02994a8bbeaa91d4757df179cbe567f"><div class="ttname"><a href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a></div><div class="ttdeci">int64_t av_rescale_q(int64_t a, AVRational bq, AVRational cq)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00142">mathematics.c:142</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_gafe9916c601bba6827d6f9271a61260e4"><div class="ttname"><a href="group__lavf__encoding.html#gafe9916c601bba6827d6f9271a61260e4">av_interleaved_write_uncoded_frame</a></div><div class="ttdeci">int av_interleaved_write_uncoded_frame(AVFormatContext *s, int stream_index, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01382">mux.c:1382</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_af415e25244b26921e8fc249d45499b84"><div class="ttname"><a href="struct_a_v_packet.html#af415e25244b26921e8fc249d45499b84">AVPacket::side_data_elems</a></div><div class="ttdeci">int side_data_elems</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00375">packet.h:375</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_ae4c7ac718a75adb31b5f2076a02fdedf"><div class="ttname"><a href="struct_a_v_codec_parameters.html#ae4c7ac718a75adb31b5f2076a02fdedf">AVCodecParameters::chroma_location</a></div><div class="ttdeci">enum AVChromaLocation chroma_location</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:150</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a></div><div class="ttdeci">@ AVMEDIA_TYPE_DATA</div><div class="ttdoc">Opaque data information usually continuous.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00203">avutil.h:203</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga18b7b10bb5b94c4842de18166bc677cb"><div class="ttname"><a href="group__lavf__encoding.html#ga18b7b10bb5b94c4842de18166bc677cb">avformat_write_header</a></div><div class="ttdeci">int avformat_write_header(AVFormatContext *s, AVDictionary **options)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00505">mux.c:505</a></div></div>
<div class="ttc" id="amux_8c_html_ac8f9f65622e9a54df25a103394d11097"><div class="ttname"><a href="mux_8c.html#ac8f9f65622e9a54df25a103394d11097">init_muxer</a></div><div class="ttdeci">static int init_muxer(AVFormatContext *s, AVDictionary **options)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00230">mux.c:230</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="aavio_8h_html_ad88b866a118c17c95663f7782b2e8946"><div class="ttname"><a href="avio_8h.html#ad88b866a118c17c95663f7782b2e8946">avio_flush</a></div><div class="ttdeci">void avio_flush(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00245">aviobuf.c:245</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_aee6c99af482bbefa0070a5b30c883a74"><div class="ttname"><a href="struct_a_v_stream_internal.html#aee6c99af482bbefa0070a5b30c883a74">AVStreamInternal::interleaver_chunk_size</a></div><div class="ttdeci">int64_t interleaver_chunk_size</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00233">internal.h:233</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a437be96a9da675f12caa228a9c81bd82"><div class="ttname"><a href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">AVPacket::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00369">packet.h:369</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_a7a87cd25426a228ce8ecbef48ab00de8"><div class="ttname"><a href="cuda__runtime_8h.html#a7a87cd25426a228ce8ecbef48ab00de8">fabs</a></div><div class="ttdeci">static __device__ float fabs(float a)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00182">cuda_runtime.h:182</a></div></div>
<div class="ttc" id="aaacdec__template_8c_html_affa0ccbe2ef7fd24bb8c61e28d1a6631"><div class="ttname"><a href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a></div><div class="ttdeci">static void flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="aacdec__template_8c_source.html#l00592">aacdec_template.c:592</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffab75254964869bf3bf25806ad0cad44b2"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffab75254964869bf3bf25806ad0cad44b2">AVCHROMA_LOC_LEFT</a></div><div class="ttdeci">@ AVCHROMA_LOC_LEFT</div><div class="ttdoc">MPEG-2/4 4:2:0, H.264 default for 4:2:0.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00607">pixfmt.h:607</a></div></div>
<div class="ttc" id="aavio_8h_html_a4dbe7c0b3d5c86e46b9991ee805c5e21a435d96ce655020a8b0b456ad51703c50"><div class="ttname"><a href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a435d96ce655020a8b0b456ad51703c50">AVIO_DATA_MARKER_TRAILER</a></div><div class="ttdeci">@ AVIO_DATA_MARKER_TRAILER</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00140">avio.h:140</a></div></div>
<div class="ttc" id="amux_8c_html_a647151ae012e11d05dbeb01c5a502704"><div class="ttname"><a href="mux_8c.html#a647151ae012e11d05dbeb01c5a502704">ff_interleave_add_packet</a></div><div class="ttdeci">int ff_interleave_add_packet(AVFormatContext *s, AVPacket *pkt, int(*compare)(AVFormatContext *, const AVPacket *, const AVPacket *))</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00812">mux.c:812</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffa4b008b490563459a3f04826049cee43f"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffa4b008b490563459a3f04826049cee43f">AVCHROMA_LOC_TOPLEFT</a></div><div class="ttdeci">@ AVCHROMA_LOC_TOPLEFT</div><div class="ttdoc">ITU-R 601, SMPTE 274M 296M S314M(DV 4:1:1), mpeg2 4:2:2.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00609">pixfmt.h:609</a></div></div>
<div class="ttc" id="astruct_a_v_codec_tag_html_a50eeaf9fe0757af14ed345ced488481e"><div class="ttname"><a href="struct_a_v_codec_tag.html#a50eeaf9fe0757af14ed345ced488481e">AVCodecTag::id</a></div><div class="ttdeci">enum AVCodecID id</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00885">internal.h:43</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a3f19c60ac6da237cd10e4d97150c118e"><div class="ttname"><a href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">AVStream::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00931">avformat.h:931</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html_a38fc80176f8f839282bb61c03392e194"><div class="ttname"><a href="struct_a_v_dictionary_entry.html#a38fc80176f8f839282bb61c03392e194">AVDictionaryEntry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00082">dict.h:82</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gac14db824af52baf8181406e98d116097"><div class="ttname"><a href="group__avoptions.html#gac14db824af52baf8181406e98d116097">av_opt_free</a></div><div class="ttdeci">void av_opt_free(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="opt_8c_source.html#l01610">opt.c:1610</a></div></div>
<div class="ttc" id="amux_8c_html_a712be436065d5ba81ddef99e9ea30ee8"><div class="ttname"><a href="mux_8c.html#a712be436065d5ba81ddef99e9ea30ee8">frac_add</a></div><div class="ttdeci">static void frac_add(FFFrac *f, int64_t incr)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00069">mux.c:69</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00081">pixdesc.h:81</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_gaa85cc1774f18f306cd20a40fc50d0b36"><div class="ttname"><a href="group__lavf__encoding.html#gaa85cc1774f18f306cd20a40fc50d0b36">av_write_frame</a></div><div class="ttdeci">int av_write_frame(AVFormatContext *s, AVPacket *in)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01190">mux.c:1190</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a6101c3b2a02c61ea41f3c97e88b64d39"><div class="ttname"><a href="avcodec_8h.html#a6101c3b2a02c61ea41f3c97e88b64d39">AV_EF_EXPLODE</a></div><div class="ttdeci">#define AV_EF_EXPLODE</div><div class="ttdoc">abort decoding on minor error detection</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01666">avcodec.h:1666</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga91dbb1359f99547adb544ee96a406b21"><div class="ttname"><a href="group__lavc__packet.html#ga91dbb1359f99547adb544ee96a406b21">av_packet_move_ref</a></div><div class="ttdeci">void av_packet_move_ref(AVPacket *dst, AVPacket *src)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00664">avpacket.c:664</a></div></div>
<div class="ttc" id="amux_8c_html_a5e5b06d6dc78cbe6112e42f8069b12b5"><div class="ttname"><a href="mux_8c.html#a5e5b06d6dc78cbe6112e42f8069b12b5">ff_write_chained</a></div><div class="ttdeci">int ff_write_chained(AVFormatContext *dst, int dst_stream, AVPacket *pkt, AVFormatContext *src, int interleave)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01305">mux.c:1305</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG1VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00050">codec_id.h:50</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a8aeefb8cf55cb147f930424c488f9693"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">AVCodecParameters::video_delay</a></div><div class="ttdeci">int video_delay</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00155">codec_par.h:155</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaadca229ad2c20e060a14fec08a5cc7ce"><div class="ttname"><a href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a></div><div class="ttdeci">AVCodecID</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00046">codec_id.h:46</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9b6f7d220d100ba73defab295623356b"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">AVCodecParameters::codec_tag</a></div><div class="ttdeci">uint32_t codec_tag</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00064">codec_par.h:64</a></div></div>
<div class="ttc" id="amux_8c_html_a590f65b3cc4b23dc746864d7c22c6dbf"><div class="ttname"><a href="mux_8c.html#a590f65b3cc4b23dc746864d7c22c6dbf">write_packets_common</a></div><div class="ttdeci">static int write_packets_common(AVFormatContext *s, AVPacket *pkt, int interleaved)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01167">mux.c:1167</a></div></div>
<div class="ttc" id="amux_8c_html_af4b5ceacab5f67a03c5d18fcb3cc8fe5"><div class="ttname"><a href="mux_8c.html#af4b5ceacab5f67a03c5d18fcb3cc8fe5">validate_codec_tag</a></div><div class="ttdeci">static int validate_codec_tag(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00196">mux.c:196</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a21ba32ae9c62456afdc40fe7495e4584"><div class="ttname"><a href="struct_a_v_stream_internal.html#a21ba32ae9c62456afdc40fe7495e4584">AVStreamInternal::reorder</a></div><div class="ttdeci">int reorder</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00152">internal.h:152</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="agroup__lavc__misc_html_ga0717e7440fdb123f708082f66cd9b41d"><div class="ttname"><a href="group__lavc__misc.html#ga0717e7440fdb123f708082f66cd9b41d">av_get_bits_per_sample</a></div><div class="ttdeci">int av_get_bits_per_sample(enum AVCodecID codec_id)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01578">utils.c:1578</a></div></div>
<div class="ttc" id="affmpeg_8h_html_affee77914991e4f6048c708556a7edbe"><div class="ttname"><a href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a></div><div class="ttdeci">const OptionDef options[]</div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a1ec57ee84f19cf65d00eaa4d2a2253ce"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">AVCodecParameters::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00127">codec_par.h:127</a></div></div>
<div class="ttc" id="astruct_a_v_packet_list_html_a6a1d0f1a75cfafa4643b93752edef643"><div class="ttname"><a href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">AVPacketList::next</a></div><div class="ttdeci">struct AVPacketList * next</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00398">packet.h:398</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_gac7a91abf2f59648d995894711f070f62"><div class="ttname"><a href="group__lavf__core.html#gac7a91abf2f59648d995894711f070f62">avformat_alloc_context</a></div><div class="ttdeci">AVFormatContext * avformat_alloc_context(void)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2options_8c_source.html#l00211">options.c:211</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_ga126917b7ce8b4f05505098b72f4997de"><div class="ttname"><a href="group__lavf__misc.html#ga126917b7ce8b4f05505098b72f4997de">av_codec_get_tag</a></div><div class="ttdeci">unsigned int av_codec_get_tag(const struct AVCodecTag *const *tags, enum AVCodecID id)</div></div>
<div class="ttc" id="amux_8c_html_a79a148203d497dac7c04fd43c9fd4e1f"><div class="ttname"><a href="mux_8c.html#a79a148203d497dac7c04fd43c9fd4e1f">flush_if_needed</a></div><div class="ttdeci">static void flush_if_needed(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00467">mux.c:467</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaf28f8da6f74d303c115635d696a318b6"><div class="ttname"><a href="group__lavc__core.html#gaf28f8da6f74d303c115635d696a318b6">AV_CODEC_PROP_REORDER</a></div><div class="ttdeci">#define AV_CODEC_PROP_REORDER</div><div class="ttdef"><b>Definition:</b> <a href="codec__desc_8h_source.html#l00092">codec_desc.h:92</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gac4f6e109c242c81aeee21868d3f35e12"><div class="ttname"><a href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a></div><div class="ttdeci">#define av_err2str(errnum)</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00119">error.h:119</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_aab5542950d6beb910dc9237aac99989e"><div class="ttname"><a href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a></div><div class="ttdeci">void avpriv_set_pts_info(AVStream *s, int pts_wrap_bits, unsigned int pts_num, unsigned int pts_den)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04871">utils.c:4871</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_ga2eaefe702f95f619ea6f2d08afa01be1"><div class="ttname"><a href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a></div><div class="ttdeci">#define AV_NOPTS_VALUE</div><div class="ttdoc">Undefined timestamp value.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00248">avutil.h:248</a></div></div>
<div class="ttc" id="aavformat_8h_html_a3b9a2012b993edb9e2ba3db6d55db1ae"><div class="ttname"><a href="avformat_8h.html#a3b9a2012b993edb9e2ba3db6d55db1ae">AVFMT_ALLOW_FLUSH</a></div><div class="ttdeci">#define AVFMT_ALLOW_FLUSH</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00471">avformat.h:471</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html_a4abca4534188ff94627e88c0d8362058"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html#a4abca4534188ff94627e88c0d8362058">AVPixFmtDescriptor::log2_chroma_w</a></div><div class="ttdeci">uint8_t log2_chroma_w</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00092">pixdesc.h:92</a></div></div>
<div class="ttc" id="aavformat_8h_html_a752cce390d480521919aa5d8be24ac0b"><div class="ttname"><a href="avformat_8h.html#a752cce390d480521919aa5d8be24ac0b">AVFMT_NOFILE</a></div><div class="ttdeci">#define AVFMT_NOFILE</div><div class="ttdoc">Demuxer will use avio_open, no opened file should be provided by the caller.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00458">avformat.h:458</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffafd1c2fae7783c113d76a017c6e7b638f"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffafd1c2fae7783c113d76a017c6e7b638f">AVCHROMA_LOC_UNSPECIFIED</a></div><div class="ttdeci">@ AVCHROMA_LOC_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00606">pixfmt.h:606</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a85dbbd306b44b02390cd91c45e6a0f76"><div class="ttname"><a href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">AVPacket::dts</a></div><div class="ttdeci">int64_t dts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00362">packet.h:362</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48afdadbd6c4f612c59f6b6c7c6f84fd347"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48afdadbd6c4f612c59f6b6c7c6f84fd347">AVMEDIA_TYPE_UNKNOWN</a></div><div class="ttdeci">@ AVMEDIA_TYPE_UNKNOWN</div><div class="ttdoc">Usually treated as AVMEDIA_TYPE_DATA.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00200">avutil.h:200</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="aavformat_8h_html_a1500ed92d07addf13d1e9dfd0fff6672"><div class="ttname"><a href="avformat_8h.html#a1500ed92d07addf13d1e9dfd0fff6672">AVFMT_NOSTREAMS</a></div><div class="ttdeci">#define AVFMT_NOSTREAMS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00467">avformat.h:467</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ga25801ba4fc9b5313eb33ec84e082dd72"><div class="ttname"><a href="group__avoptions.html#ga25801ba4fc9b5313eb33ec84e082dd72">AV_OPT_SEARCH_CHILDREN</a></div><div class="ttdeci">#define AV_OPT_SEARCH_CHILDREN</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00561">opt.h:560</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_ac55bfef91c33f02704ba76518d0f294c"><div class="ttname"><a href="struct_a_v_packet.html#ac55bfef91c33f02704ba76518d0f294c">AVPacket::side_data</a></div><div class="ttdeci">AVPacketSideData * side_data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00374">packet.h:374</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ga1824a600b215f1807e77b5f6cfa58586"><div class="ttname"><a href="group__avoptions.html#ga1824a600b215f1807e77b5f6cfa58586">av_opt_set_dict2</a></div><div class="ttdeci">int av_opt_set_dict2(void *obj, AVDictionary **options, int search_flags)</div><div class="ttdef"><b>Definition:</b> <a href="opt_8c_source.html#l01630">opt.c:1630</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga8a6deff6c1809029037ffd760db3e0d4"><div class="ttname"><a href="group__lavc__packet.html#ga8a6deff6c1809029037ffd760db3e0d4">av_packet_make_refcounted</a></div><div class="ttdeci">int av_packet_make_refcounted(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00672">avpacket.c:672</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga1bafd682b1fbb90e48a4cc3814b820f7"><div class="ttname"><a href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a></div><div class="ttdeci">void av_dict_free(AVDictionary **pm)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00203">dict.c:203</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gae5c86e4d93f6e7aa62ef2c60763ea67e"><div class="ttname"><a href="group__lavc__packet.html#gae5c86e4d93f6e7aa62ef2c60763ea67e">av_packet_rescale_ts</a></div><div class="ttdeci">void av_packet_rescale_ts(AVPacket *pkt, AVRational src_tb, AVRational dst_tb)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00713">avpacket.c:713</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a661eaec472e284a3b2920647349471dd"><div class="ttname"><a href="avcodec_8h.html#a661eaec472e284a3b2920647349471dd">FF_COMPLIANCE_NORMAL</a></div><div class="ttdeci">#define FF_COMPLIANCE_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01592">avcodec.h:1592</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a786f81429bb25853af449fe5737bf2c7"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">AVCodecParameters::block_align</a></div><div class="ttdeci">int block_align</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00177">codec_par.h:177</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ff"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ff">AVChromaLocation</a></div><div class="ttdeci">AVChromaLocation</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00605">pixfmt.h:605</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409">AV_CODEC_ID_MJPEG</a></div><div class="ttdeci">@ AV_CODEC_ID_MJPEG</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00056">codec_id.h:56</a></div></div>
<div class="ttc" id="adirac__dwt__template_8c_html_aebaee04bd82e55ff988f30afcd5766a5"><div class="ttname"><a href="dirac__dwt__template_8c.html#aebaee04bd82e55ff988f30afcd5766a5">interleave</a></div><div class="ttdeci">static av_always_inline void RENAME() interleave(TYPE *dst, TYPE *src0, TYPE *src1, int w2, int add, int shift)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt__template_8c_source.html#l00055">dirac_dwt_template.c:55</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ab92ad91055387e15b43ff5f6f60f2895"><div class="ttname"><a href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16, int16_t,(*(const int16_t *) pi &gt;&gt; 8)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32, int32_t,(*(const int32_t *) pi &gt;&gt; 24)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, float, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, float, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, float, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, double, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, double, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, double, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) #define SET_CONV_FUNC_GROUP(ofmt, ifmt) static void set_generic_function(AudioConvert *ac) { } void ff_audio_convert_free(AudioConvert **ac) { if(! *ac) return;ff_dither_free(&amp;(*ac) -&gt;dc);av_freep(ac);} AudioConvert *ff_audio_convert_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map) { AudioConvert *ac;int in_planar, out_planar;ac=av_mallocz(sizeof(*ac));if(!ac) return NULL;ac-&gt;avr=avr;ac-&gt;out_fmt=out_fmt;ac-&gt;in_fmt=in_fmt;ac-&gt;channels=channels;ac-&gt;apply_map=apply_map;if(avr-&gt;dither_method !=AV_RESAMPLE_DITHER_NONE &amp;&amp;av_get_packed_sample_fmt(out_fmt)==AV_SAMPLE_FMT_S16 &amp;&amp;av_get_bytes_per_sample(in_fmt) &gt; 2) { ac-&gt;dc=ff_dither_alloc(avr, out_fmt, in_fmt, channels, sample_rate, apply_map);if(!ac-&gt;dc) { av_free(ac);return NULL;} return ac;} in_planar=ff_sample_fmt_is_planar(in_fmt, channels);out_planar=ff_sample_fmt_is_planar(out_fmt, channels);if(in_planar==out_planar) { ac-&gt;func_type=CONV_FUNC_TYPE_FLAT;ac-&gt;planes=in_planar ? ac-&gt;channels :1;} else if(in_planar) ac-&gt;func_type=CONV_FUNC_TYPE_INTERLEAVE;else ac-&gt;func_type=CONV_FUNC_TYPE_DEINTERLEAVE;set_generic_function(ac);if(ARCH_AARCH64) ff_audio_convert_init_aarch64(ac);if(ARCH_ARM) ff_audio_convert_init_arm(ac);if(ARCH_X86) ff_audio_convert_init_x86(ac);return ac;} int ff_audio_convert(AudioConvert *ac, AudioData *out, AudioData *in) { int use_generic=1;int len=in-&gt;nb_samples;int p;if(ac-&gt;dc) { av_log(ac-&gt;avr, AV_LOG_TRACE, &quot;%d samples - audio_convert: %s to %s (dithered)\n&quot;, len, av_get_sample_fmt_name(ac-&gt;in_fmt), av_get_sample_fmt_name(ac-&gt;out_fmt));return ff_convert_dither(ac-&gt; in</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00326">audio_convert.c:326</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga7f14007e7dc8f481f054b21614dfec13"><div class="ttname"><a href="group__lavf__encoding.html#ga7f14007e7dc8f481f054b21614dfec13">av_write_trailer</a></div><div class="ttdeci">int av_write_trailer(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01251">mux.c:1251</a></div></div>
<div class="ttc" id="aavassert_8h_html_a2764bf422e4df5bf3aac652f21fe780a"><div class="ttname"><a href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a></div><div class="ttdeci">#define av_assert2(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00064">avassert.h:64</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gade00f67930f4e2a3401b67b701d5b3a2"><div class="ttname"><a href="group__lavc__packet.html#gade00f67930f4e2a3401b67b701d5b3a2">av_packet_copy_props</a></div><div class="ttdeci">int av_packet_copy_props(AVPacket *dst, const AVPacket *src)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00572">avpacket.c:572</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_acfefb6b6cf21e87a0dcbd1a547ba2348"><div class="ttname"><a href="struct_a_v_format_context.html#acfefb6b6cf21e87a0dcbd1a547ba2348">AVFormatContext::streams</a></div><div class="ttdeci">AVStream ** streams</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01291">avformat.h:1291</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a></div><div class="ttdeci">@ AV_CODEC_ID_NONE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00047">codec_id.h:47</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga7fffb6c87b91250956e7a2367af56b38"><div class="ttname"><a href="group__lavc__core.html#ga7fffb6c87b91250956e7a2367af56b38">av_bsf_receive_packet</a></div><div class="ttdeci">int av_bsf_receive_packet(AVBSFContext *ctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8c_source.html#l00226">bsf.c:226</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html_ad7677ef35d272b2dad5498c51b4d2204"><div class="ttname"><a href="struct_a_v_output_format.html#ad7677ef35d272b2dad5498c51b4d2204">AVOutputFormat::priv_data_size</a></div><div class="ttdeci">int priv_data_size</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00543">avformat.h:543</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html_aad55a00e728a020c1dcfaaf695320445"><div class="ttname"><a href="struct_a_v_output_format.html#aad55a00e728a020c1dcfaaf695320445">AVOutputFormat::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00510">avformat.h:510</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_gaa11ed202b70e1f52bac809811a910e2a"><div class="ttname"><a href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a></div><div class="ttdeci">#define AV_TIME_BASE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00254">avutil.h:254</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga661ee0b2f3dbcaaef5d68f2f5d75e2d4"><div class="ttname"><a href="group__lavf__encoding.html#ga661ee0b2f3dbcaaef5d68f2f5d75e2d4">av_get_output_timestamp</a></div><div class="ttdeci">int av_get_output_timestamp(struct AVFormatContext *s, int stream, int64_t *dts, int64_t *wall)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01296">mux.c:1296</a></div></div>
<div class="ttc" id="aavassert_8h_html_a557ed9c8df70c282bf6b7e0e07d7d5b0"><div class="ttname"><a href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a></div><div class="ttdeci">#define av_assert1(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00053">avassert.h:53</a></div></div>
<div class="ttc" id="aavformat_8h_html_ab82d3e1a4a5bba30941fcc4402317831"><div class="ttname"><a href="avformat_8h.html#ab82d3e1a4a5bba30941fcc4402317831">AVFMT_AVOID_NEG_TS_MAKE_NON_NEGATIVE</a></div><div class="ttdeci">#define AVFMT_AVOID_NEG_TS_MAKE_NON_NEGATIVE</div><div class="ttdoc">Shift timestamps so they are non negative.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01568">avformat.h:1568</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a6ca823054632821e085377f7d371a2d1"><div class="ttname"><a href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">AVStream::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00870">avformat.h:870</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a2d09f16df8631e64e8fa566142cdc99d"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a2d09f16df8631e64e8fa566142cdc99d">AVMEDIA_TYPE_ATTACHMENT</a></div><div class="ttdeci">@ AVMEDIA_TYPE_ATTACHMENT</div><div class="ttdoc">Opaque data information usually sparse.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00205">avutil.h:205</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavc__misc_html_ga3266a8c3df0790c62259f91afcde45a9"><div class="ttname"><a href="group__lavc__misc.html#ga3266a8c3df0790c62259f91afcde45a9">av_get_audio_frame_duration</a></div><div class="ttdeci">int av_get_audio_frame_duration(AVCodecContext *avctx, int frame_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01792">utils.c:1792</a></div></div>
<div class="ttc" id="astruct_a_v_codec_descriptor_html"><div class="ttname"><a href="struct_a_v_codec_descriptor.html">AVCodecDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="codec__desc_8h_source.html#l00038">codec_desc.h:38</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_abfc9b0aa975206f7e77a125e6b78536e"><div class="ttname"><a href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">AVCodecParameters::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00170">codec_par.h:170</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga3daf97178dd1b08b5e916be381cd33e4"><div class="ttname"><a href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a></div><div class="ttdeci">int64_t av_rescale(int64_t a, int64_t b, int64_t c)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00129">mathematics.c:129</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html"><div class="ttname"><a href="struct_a_v_codec_parameters.html">AVCodecParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00052">codec_par.h:52</a></div></div>
<div class="ttc" id="aavio_8h_html_a4dbe7c0b3d5c86e46b9991ee805c5e21a845e4c0e9d3840c36370ced5d9a54922"><div class="ttname"><a href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a845e4c0e9d3840c36370ced5d9a54922">AVIO_DATA_MARKER_UNKNOWN</a></div><div class="ttdeci">@ AVIO_DATA_MARKER_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00135">avio.h:135</a></div></div>
<div class="ttc" id="aavformat_8h_html_a886476ebe41f52a2232ee10f97ac11d0"><div class="ttname"><a href="avformat_8h.html#a886476ebe41f52a2232ee10f97ac11d0">AVFMT_TS_NEGATIVE</a></div><div class="ttdeci">#define AVFMT_TS_NEGATIVE</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00482">avformat.h:475</a></div></div>
<div class="ttc" id="aavformat_8h_html_a918dc7abf0d4f7abd36a2ea2a594feaf"><div class="ttname"><a href="avformat_8h.html#a918dc7abf0d4f7abd36a2ea2a594feaf">AVFMT_TS_NONSTRICT</a></div><div class="ttdeci">#define AVFMT_TS_NONSTRICT</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00474">avformat.h:472</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_gaa440bf42ede128219a571ae4ce0f90b8"><div class="ttname"><a href="group__lavu__math__rational.html#gaa440bf42ede128219a571ae4ce0f90b8">av_cmp_q</a></div><div class="ttdeci">static int av_cmp_q(AVRational a, AVRational b)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00089">rational.h:89</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a2ae737b4162864f9582d4ac31c300308"><div class="ttname"><a href="struct_a_v_stream_internal.html#a2ae737b4162864f9582d4ac31c300308">AVStreamInternal::interleaver_chunk_duration</a></div><div class="ttdeci">int64_t interleaver_chunk_duration</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00234">internal.h:234</a></div></div>
<div class="ttc" id="amovenc_8c_html_a1c50fcd1195659821729f52af8f3bb7d"><div class="ttname"><a href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a></div><div class="ttdeci">uint32_t tag</div><div class="ttdef"><b>Definition:</b> <a href="movenc_8c_source.html#l01597">movenc.c:1597</a></div></div>
<div class="ttc" id="aavformat_8h_html_a2fa1d95841e62af509ba733a11c1b25b"><div class="ttname"><a href="avformat_8h.html#a2fa1d95841e62af509ba733a11c1b25b">AVFMT_FLAG_BITEXACT</a></div><div class="ttdeci">#define AVFMT_FLAG_BITEXACT</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01371">avformat.h:1371</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="astruct_f_f_frac_html_a2f045fdeb069ab4b24cdcc18dbc97c3f"><div class="ttname"><a href="struct_f_f_frac.html#a2f045fdeb069ab4b24cdcc18dbc97c3f">FFFrac::num</a></div><div class="ttdeci">int64_t num</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00060">internal.h:60</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_ad552f602c2113bd5152cff3c58ba1f9f"><div class="ttname"><a href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">AVStream::cur_dts</a></div><div class="ttdeci">int64_t cur_dts</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01062">avformat.h:1062</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="aavformat_8h_html"><div class="ttname"><a href="avformat_8h.html">avformat.h</a></div></div>
<div class="ttc" id="adict_8h_html"><div class="ttname"><a href="dict_8h.html">dict.h</a></div></div>
<div class="ttc" id="amux_8c_html_a6ce888a0b1efa290670467216ecf3da2"><div class="ttname"><a href="mux_8c.html#a6ce888a0b1efa290670467216ecf3da2">ff_choose_timebase</a></div><div class="ttdeci">AVRational ff_choose_timebase(AVFormatContext *s, AVStream *st, int min_precision)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00089">mux.c:89</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga8f5b632a03ce83ac8e025894b1fc307a"><div class="ttname"><a href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a></div><div class="ttdeci">#define AV_INPUT_BUFFER_PADDING_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00215">avcodec.h:215</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaada9ea8f08d3dcf23c14564dbc88992c"><div class="ttname"><a href="group__lavc__core.html#gaada9ea8f08d3dcf23c14564dbc88992c">av_bsf_send_packet</a></div><div class="ttdeci">int av_bsf_send_packet(AVBSFContext *ctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8c_source.html#l00200">bsf.c:200</a></div></div>
<div class="ttc" id="amux_8c_html_a0e0de442dbf020a004245170119aebb8"><div class="ttname"><a href="mux_8c.html#a0e0de442dbf020a004245170119aebb8">deinit_muxer</a></div><div class="ttdeci">static void deinit_muxer(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00477">mux.c:477</a></div></div>
<div class="ttc" id="amux_8c_html_aa34b7ca6722fb59cc7a9661a22368850"><div class="ttname"><a href="mux_8c.html#aa34b7ca6722fb59cc7a9661a22368850">check_packet</a></div><div class="ttdeci">static int check_packet(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00746">mux.c:746</a></div></div>
<div class="ttc" id="avf__find__rect_8c_html_a0f2f2f7d5f9a99706f6f30347c8baf61"><div class="ttname"><a href="vf__find__rect_8c.html#a0f2f2f7d5f9a99706f6f30347c8baf61">compare</a></div><div class="ttdeci">static float compare(const AVFrame *haystack, const AVFrame *obj, int offx, int offy)</div><div class="ttdef"><b>Definition:</b> <a href="vf__find__rect_8c_source.html#l00104">vf_find_rect.c:104</a></div></div>
<div class="ttc" id="amux_8c_html_ad3c24cb7c90cc5d2b5f4cb46a5c13cfd"><div class="ttname"><a href="mux_8c.html#ad3c24cb7c90cc5d2b5f4cb46a5c13cfd">write_uncoded_frame_internal</a></div><div class="ttdeci">static int write_uncoded_frame_internal(AVFormatContext *s, int stream_index, AVFrame *frame, int interleaved)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01332">mux.c:1332</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffaef6df526ade7e565876d539b34151368"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffaef6df526ade7e565876d539b34151368">AVCHROMA_LOC_CENTER</a></div><div class="ttdeci">@ AVCHROMA_LOC_CENTER</div><div class="ttdoc">MPEG-1 4:2:0, JPEG 4:2:0, H.263 4:2:0.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00608">pixfmt.h:608</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="aavio_8h_html_a4dbe7c0b3d5c86e46b9991ee805c5e21a441e77bcb3e96420bc9a9ce480aa821a"><div class="ttname"><a href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a441e77bcb3e96420bc9a9ce480aa821a">AVIO_DATA_MARKER_HEADER</a></div><div class="ttdeci">@ AVIO_DATA_MARKER_HEADER</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00115">avio.h:115</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html"><div class="ttname"><a href="struct_a_v_format_context.html">AVFormatContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01223">avformat.h:1223</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_gac2990b13b68e831a408fce8e1d0d6445"><div class="ttname"><a href="group__lavf__core.html#gac2990b13b68e831a408fce8e1d0d6445">avformat_free_context</a></div><div class="ttdeci">void avformat_free_context(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04382">utils.c:4382</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga5268e4fbbb73b5ed1e4083f44f565ffd"><div class="ttname"><a href="group__lavf__encoding.html#ga5268e4fbbb73b5ed1e4083f44f565ffd">AVSTREAM_INIT_IN_INIT_OUTPUT</a></div><div class="ttdeci">#define AVSTREAM_INIT_IN_INIT_OUTPUT</div><div class="ttdoc">stream parameters initialized in avformat_init_output</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l02402">avformat.h:2402</a></div></div>
<div class="ttc" id="astruct_a_v_packet_list_html_a2d7ef80c60c0c3a804248ab691b9c5a7"><div class="ttname"><a href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">AVPacketList::pkt</a></div><div class="ttdeci">AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00397">packet.h:397</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_gaa40ce7d3ede946a89d03323bbd7268c1"><div class="ttname"><a href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a></div><div class="ttdeci">AVBufferRef * av_buffer_ref(AVBufferRef *buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00093">buffer.c:93</a></div></div>
<div class="ttc" id="amux_8c_html_a987884ac12fdbae7dc8096925715ad5a"><div class="ttname"><a href="mux_8c.html#a987884ac12fdbae7dc8096925715ad5a">ff_interleaved_peek</a></div><div class="ttdeci">int ff_interleaved_peek(AVFormatContext *s, int stream, AVPacket *pkt, int add_offset)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01032">mux.c:1032</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a3bf81872813551fe9343dd0e09993e38"><div class="ttname"><a href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">AVPacket::buf</a></div><div class="ttdeci">AVBufferRef * buf</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00346">packet.h:346</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a5837cafc419c2b5ecdb1dfa330675d13"><div class="ttname"><a href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_DISABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00084">internal.h:84</a></div></div>
<div class="ttc" id="astruct_a_v_codec_tag_html_ac3c7db3b0a20647687b74af8b9fb3afd"><div class="ttname"><a href="struct_a_v_codec_tag.html#ac3c7db3b0a20647687b74af8b9fb3afd">AVCodecTag::tag</a></div><div class="ttdeci">unsigned int tag</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00044">internal.h:44</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga7c352f4cff02184f005323691375fea9"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga7c352f4cff02184f005323691375fea9">av_strdup</a></div><div class="ttdeci">char * av_strdup(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00253">mem.c:253</a></div></div>
<div class="ttc" id="alibsvtav1_8c_html_a710bce51374aba96ab04912897666c35"><div class="ttname"><a href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a></div><div class="ttdeci">const char * desc</div><div class="ttdef"><b>Definition:</b> <a href="libsvtav1_8c_source.html#l00079">libsvtav1.c:79</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="amux_8c_html_a7412a139636861df6383f330b98abb1a"><div class="ttname"><a href="mux_8c.html#a7412a139636861df6383f330b98abb1a">write_packets_from_bsfs</a></div><div class="ttdeci">static int write_packets_from_bsfs(AVFormatContext *s, AVStream *st, AVPacket *pkt, int interleaved)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01135">mux.c:1135</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga17ae68044f725fd5ba26c54162b96490"><div class="ttname"><a href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a></div><div class="ttdeci">#define AV_CODEC_FLAG_BITEXACT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00333">avcodec.h:333</a></div></div>
<div class="ttc" id="amux_8c_html_a0e71649f97c9039b54273f07b348cb0f"><div class="ttname"><a href="mux_8c.html#a0e71649f97c9039b54273f07b348cb0f">ff_interleave_packet_per_dts</a></div><div class="ttdeci">int ff_interleave_packet_per_dts(AVFormatContext *s, AVPacket *out, AVPacket *pkt, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00914">mux.c:914</a></div></div>
<div class="ttc" id="amux_8c_html_a20eeb69d7bb4044a354c5b46652b53ac"><div class="ttname"><a href="mux_8c.html#a20eeb69d7bb4044a354c5b46652b53ac">ff_choose_chroma_location</a></div><div class="ttdeci">enum AVChromaLocation ff_choose_chroma_location(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00089">mux.c:105</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a></div><div class="ttdeci">@ AV_FIELD_PROGRESSIVE</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00038">codec_par.h:38</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html"><div class="ttname"><a href="struct_a_v_stream.html">AVStream</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00869">avformat.h:869</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a58369c3a8a986935b572df5aa6361ce2"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">AVCodecParameters::codec_type</a></div><div class="ttdeci">enum AVMediaType codec_type</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:56</a></div></div>
<div class="ttc" id="amux_8c_html_a23ff0c8cbade2fd65c53e5614b95cb41"><div class="ttname"><a href="mux_8c.html#a23ff0c8cbade2fd65c53e5614b95cb41">init_pts</a></div><div class="ttdeci">static int init_pts(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00422">mux.c:422</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a079eab092887563f2bef9106c6120089"><div class="ttname"><a href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a></div><div class="ttdeci">#define av_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00034">tableprint_vlc.h:34</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a153946872548cd56132907b93f05f9aa"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a153946872548cd56132907b93f05f9aa">AVCodecParameters::field_order</a></div><div class="ttdeci">enum AVFieldOrder field_order</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:141</a></div></div>
<div class="ttc" id="amux_8c_html_adbe775f4635e7936a8f7b57461bb1d98"><div class="ttname"><a href="mux_8c.html#adbe775f4635e7936a8f7b57461bb1d98">frac_init</a></div><div class="ttdeci">static void frac_init(FFFrac *f, int64_t val, int64_t num, int64_t den)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00051">mux.c:51</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_a69fb49797d2b6771a17f5e1eb1db6e74a8759fe94afa0a9905288315ae4ba698b"><div class="ttname"><a href="libavformat_2internal_8h.html#a69fb49797d2b6771a17f5e1eb1db6e74a8759fe94afa0a9905288315ae4ba698b">AV_WRITE_UNCODED_FRAME_QUERY</a></div><div class="ttdeci">@ AV_WRITE_UNCODED_FRAME_QUERY</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00772">internal.h:772</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga37352ed2c63493c38219d935e71db6c1"><div class="ttname"><a href="group__lavf__encoding.html#ga37352ed2c63493c38219d935e71db6c1">av_interleaved_write_frame</a></div><div class="ttdeci">int av_interleaved_write_frame(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01236">mux.c:1236</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga8d9c2de72b310cef8e6a28c9cd3acbbe"><div class="ttname"><a href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a></div><div class="ttdeci">int av_dict_set(AVDictionary **pm, const char *key, const char *value, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00070">dict.c:70</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga59a6372b124b306e3a2233723c5cdc78"><div class="ttname"><a href="group__lavu__dict.html#ga59a6372b124b306e3a2233723c5cdc78">av_dict_copy</a></div><div class="ttdeci">int av_dict_copy(AVDictionary **dst, const AVDictionary *src, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00217">dict.c:217</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_ae325fff950b722fc370518c3a4da949e"><div class="ttname"><a href="struct_a_v_stream_internal.html#ae325fff950b722fc370518c3a4da949e">AVStreamInternal::bsfc</a></div><div class="ttdeci">AVBSFContext * bsfc</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00159">internal.h:159</a></div></div>
<div class="ttc" id="amux_8c_html_a2fb0d69b36fd984c267cd892968d0d9a"><div class="ttname"><a href="mux_8c.html#a2fb0d69b36fd984c267cd892968d0d9a">uncoded_frame_free</a></div><div class="ttdeci">static void uncoded_frame_free(void *unused, uint8_t *data)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01326">mux.c:1326</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a622e758be29fd500aed0ffdc069550f7"><div class="ttname"><a href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">AVPacket::duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00381">packet.h:381</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3e5334a611a3e2a6a653805bb9e2d4d4"><div class="ttname"><a href="struct_a_v_codec_context.html#a3e5334a611a3e2a6a653805bb9e2d4d4">AVCodecContext::max_b_frames</a></div><div class="ttdeci">int max_b_frames</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00786">avcodec.h:786</a></div></div>
<div class="ttc" id="atimestamp_8h_html"><div class="ttname"><a href="timestamp_8h.html">timestamp.h</a></div></div>
<div class="ttc" id="amux_8c_html_a109662cdbfd484f70a0d0b1586bc269c"><div class="ttname"><a href="mux_8c.html#a109662cdbfd484f70a0d0b1586bc269c">interleaved_write_packet</a></div><div class="ttdeci">static int interleaved_write_packet(AVFormatContext *s, AVPacket *pkt, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01094">mux.c:1094</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea77772369e1d305824b08b53a8d5c56b6"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea77772369e1d305824b08b53a8d5c56b6">AV_CODEC_ID_VP8</a></div><div class="ttdeci">@ AV_CODEC_ID_VP8</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00189">codec_id.h:189</a></div></div>
<div class="ttc" id="astruct_f_f_frac_html_a4ffae3f9d8e5526eeaa28b95d5fa7f33"><div class="ttname"><a href="struct_f_f_frac.html#a4ffae3f9d8e5526eeaa28b95d5fa7f33">FFFrac::den</a></div><div class="ttdeci">int64_t den</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00060">internal.h:60</a></div></div>
<div class="ttc" id="astruct_f_f_frac_html_a4a517bcbb9977d1010798cc97d1be675"><div class="ttname"><a href="struct_f_f_frac.html#a4a517bcbb9977d1010798cc97d1be675">FFFrac::val</a></div><div class="ttdeci">int64_t val</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00060">internal.h:60</a></div></div>
<div class="ttc" id="agroup__lavu__string_html_ga716447ae73b612bcf3a405b9b4608f6c"><div class="ttname"><a href="group__lavu__string.html#ga716447ae73b612bcf3a405b9b4608f6c">av_strlcpy</a></div><div class="ttdeci">size_t av_strlcpy(char *dst, const char *src, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="avstring_8c_source.html#l00083">avstring.c:83</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55bad196c6de8e599a9779876aa36720085a"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bad196c6de8e599a9779876aa36720085a">MAX_REORDER_DELAY</a></div><div class="ttdeci">@ MAX_REORDER_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode_8h_source.html#l00044">vaapi_encode.h:44</a></div></div>
<div class="ttc" id="atimestamp_8h_html_a86d797e907fa454ed5fd34bfb0bcd747"><div class="ttname"><a href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a></div><div class="ttdeci">#define av_ts2str(ts)</div><div class="ttdef"><b>Definition:</b> <a href="timestamp_8h_source.html#l00054">timestamp.h:54</a></div></div>
<div class="ttc" id="aavformat_8h_html_a1d9ca54477304fc143bc6594c4dec102"><div class="ttname"><a href="avformat_8h.html#a1d9ca54477304fc143bc6594c4dec102">AVFMT_FLAG_FLUSH_PACKETS</a></div><div class="ttdeci">#define AVFMT_FLAG_FLUSH_PACKETS</div><div class="ttdoc">Flush the AVIOContext every packet.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01364">avformat.h:1364</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gac09f8ddc2d4b36c5a85c6befba0d0888"><div class="ttname"><a href="group__lavc__core.html#gac09f8ddc2d4b36c5a85c6befba0d0888">avcodec_descriptor_get</a></div><div class="ttdeci">const AVCodecDescriptor * avcodec_descriptor_get(enum AVCodecID id)</div><div class="ttdef"><b>Definition:</b> <a href="codec__desc_8c_source.html#l03457">codec_desc.c:3457</a></div></div>
<div class="ttc" id="aavformat_8h_html_a8de664fdbd6e2a5bd327f75b185a97ef"><div class="ttname"><a href="avformat_8h.html#a8de664fdbd6e2a5bd327f75b185a97ef">AVFMT_AVOID_NEG_TS_AUTO</a></div><div class="ttdeci">#define AVFMT_AVOID_NEG_TS_AUTO</div><div class="ttdoc">Enabled when required by target format.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01567">avformat.h:1567</a></div></div>
<div class="ttc" id="astruct_a_v_b_s_f_context_html"><div class="ttname"><a href="struct_a_v_b_s_f_context.html">AVBSFContext</a></div><div class="ttdef"><b>Definition:</b> <a href="bsf_8h_source.html#l00049">bsf.h:49</a></div></div>
<div class="ttc" id="astruct_a_v_codec_tag_html"><div class="ttname"><a href="struct_a_v_codec_tag.html">AVCodecTag</a></div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00042">internal.h:42</a></div></div>
<div class="ttc" id="aavstring_8h_html"><div class="ttname"><a href="avstring_8h.html">avstring.h</a></div></div>
<div class="ttc" id="amux_8c_html_aca0c94e14d26c72cdf3e8aedb6810cb0"><div class="ttname"><a href="mux_8c.html#aca0c94e14d26c72cdf3e8aedb6810cb0">avformat_alloc_output_context2</a></div><div class="ttdeci">int avformat_alloc_output_context2(AVFormatContext **avctx, ff_const59 AVOutputFormat *oformat, const char *format, const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00135">mux.c:135</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html_ae030463c5c08de99f8c9e727c822ca87"><div class="ttname"><a href="struct_a_v_output_format.html#ae030463c5c08de99f8c9e727c822ca87">AVOutputFormat::priv_class</a></div><div class="ttdeci">const AVClass * priv_class</div><div class="ttdoc">AVClass for the private context.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00519">avformat.h:519</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="amux_8c_html_aca5a6c46876cf13e21d43603489665b6"><div class="ttname"><a href="mux_8c.html#aca5a6c46876cf13e21d43603489665b6">check_bitstream</a></div><div class="ttdeci">static int check_bitstream(AVFormatContext *s, AVStream *st, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01075">mux.c:1075</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG2VIDEO</div><div class="ttdoc">preferred ID for MPEG-1/2 video decoding</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00051">codec_id.h:51</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html"><div class="ttname"><a href="struct_a_v_output_format.html">AVOutputFormat</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00490">avformat.h:490</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gab706bfec9bf56534e02ca9564cb968f6"><div class="ttname"><a href="group__lavu__math.html#gab706bfec9bf56534e02ca9564cb968f6">av_rescale_q_rnd</a></div><div class="ttdeci">int64_t av_rescale_q_rnd(int64_t a, AVRational bq, AVRational cq, enum AVRounding rnd)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00134">mathematics.c:134</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gae07d7cbf511060210152a89ad0d137ad"><div class="ttname"><a href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a></div><div class="ttdeci">#define av_fourcc2str(fourcc)</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00348">avutil.h:348</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gac9cb9756175b96e7441575803757fb73"><div class="ttname"><a href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a></div><div class="ttdeci">void av_init_packet(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00035">avpacket.c:35</a></div></div>
<div class="ttc" id="aavio_8h_html_a4dbe7c0b3d5c86e46b9991ee805c5e21a870634b3c75cf4bcff8306fac01b04be"><div class="ttname"><a href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a870634b3c75cf4bcff8306fac01b04be">AVIO_DATA_MARKER_FLUSH_POINT</a></div><div class="ttdeci">@ AVIO_DATA_MARKER_FLUSH_POINT</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00146">avio.h:146</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
