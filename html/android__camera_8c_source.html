<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavdevice/android_camera.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_48592b5c3a3534c0c7026c4e6bbb7be4.html">libavdevice</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">android_camera.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="android__camera_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Android camera input device</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2017 Felix Matouschek</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;stdatomic.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;camera/NdkCameraDevice.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;camera/NdkCameraManager.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;media/NdkImage.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;media/NdkImageReader.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avformat_8h.html">libavformat/avformat.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavformat_2internal_8h.html">libavformat/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avstring_8h.html">libavutil/avstring.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="display_8h.html">libavutil/display.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">libavutil/log.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="parseutils_8h.html">libavutil/parseutils.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixfmt_8h.html">libavutil/pixfmt.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="threadmessage_8h.html">libavutil/threadmessage.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="time_8h.html">libavutil/time.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libswscale_2version_8h.html">version.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/* This image format is available on all Android devices</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> * supporting the Camera2 API */</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a60f02f366843fde932c6aea2407a81c1">   50</a></span>&#160;<span class="preprocessor">#define IMAGE_FORMAT_ANDROID AIMAGE_FORMAT_YUV_420_888</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="android__camera_8c.html#ae59bce1290988141d8e3dade88c1c915">   52</a></span>&#160;<span class="preprocessor">#define MAX_BUF_COUNT 2</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a6317b279a8fc6f4c110b29825aa367ab">   53</a></span>&#160;<span class="preprocessor">#define VIDEO_STREAM_INDEX 0</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a7575968db29933e4eec236a3be6c555e">   54</a></span>&#160;<span class="preprocessor">#define VIDEO_TIMEBASE_ANDROID 1000000000</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">   56</a></span>&#160;<span class="preprocessor">#define RETURN_CASE(x) case x: return AV_STRINGIFY(x);</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a23502b02dcab5161818c3d229c7fb474">   57</a></span>&#160;<span class="preprocessor">#define RETURN_DEFAULT(x) default: return AV_STRINGIFY(x);</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html">   59</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> {</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#ae3b1a5843b2821631744376aca8bc890">   60</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> *<span class="keyword">class</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#ae80904482ec290ad2a9830eb61c64802">   62</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_android_camera_ctx.html#ae80904482ec290ad2a9830eb61c64802">requested_width</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#ae23838a8b2755597f522c654713d989e">   63</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_android_camera_ctx.html#ae23838a8b2755597f522c654713d989e">requested_height</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a24aa559d3b49be38b1482526a29fd8d2">   64</a></span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> <a class="code" href="struct_android_camera_ctx.html#a24aa559d3b49be38b1482526a29fd8d2">framerate</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#abe8fa730f5d71518e0fd9d54695a8674">   65</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_android_camera_ctx.html#abe8fa730f5d71518e0fd9d54695a8674">camera_index</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a69c0ea49ea15c3c565b58cf23913038c">   66</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_android_camera_ctx.html#a69c0ea49ea15c3c565b58cf23913038c">input_queue_size</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a2d3f88aaebc4661c6b1f45b86d176ce2">   68</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_android_camera_ctx.html#a2d3f88aaebc4661c6b1f45b86d176ce2">lens_facing</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#ae85c352da95abc196469af6a6acf272f">   69</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="struct_android_camera_ctx.html#ae85c352da95abc196469af6a6acf272f">sensor_orientation</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#ab12970765bd3efa1e26f8ad007ec593b">   70</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_android_camera_ctx.html#ab12970765bd3efa1e26f8ad007ec593b">width</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#abcd60c4c65b72fc89b682ac0072735ae">   71</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_android_camera_ctx.html#abcd60c4c65b72fc89b682ac0072735ae">height</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#aa039398dbe5beb4073706223423678a6">   72</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="struct_android_camera_ctx.html#aa039398dbe5beb4073706223423678a6">framerate_range</a>[2];</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a1c0332803e77a81b02f366151376f1d8">   73</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_android_camera_ctx.html#a1c0332803e77a81b02f366151376f1d8">image_format</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a79eb39567c7b4f83993e5924e1836941">   75</a></span>&#160;    ACameraManager *<a class="code" href="struct_android_camera_ctx.html#a79eb39567c7b4f83993e5924e1836941">camera_mgr</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#adcca014a26a4d23bdf69d3aa8635dcad">   76</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="struct_android_camera_ctx.html#adcca014a26a4d23bdf69d3aa8635dcad">camera_id</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#ad288cdfebea01129e31d6e907aabecf2">   77</a></span>&#160;    ACameraMetadata *<a class="code" href="struct_android_camera_ctx.html#ad288cdfebea01129e31d6e907aabecf2">camera_metadata</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#aa68cd1ba2a710d313042579578d3085f">   78</a></span>&#160;    ACameraDevice *<a class="code" href="struct_android_camera_ctx.html#aa68cd1ba2a710d313042579578d3085f">camera_dev</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a0ca51c87d2b0cf87e794f7ccbd232e97">   79</a></span>&#160;    ACameraDevice_StateCallbacks <a class="code" href="struct_android_camera_ctx.html#a0ca51c87d2b0cf87e794f7ccbd232e97">camera_state_callbacks</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#ac4415782daad0c45e6d69992c253939b">   80</a></span>&#160;    AImageReader *<a class="code" href="struct_android_camera_ctx.html#ac4415782daad0c45e6d69992c253939b">image_reader</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a642345be438351e43761a168489648ac">   81</a></span>&#160;    AImageReader_ImageListener <a class="code" href="struct_android_camera_ctx.html#a642345be438351e43761a168489648ac">image_listener</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a2982e568ec59ae0f12aa883571a5dac6">   82</a></span>&#160;    ANativeWindow *<a class="code" href="struct_android_camera_ctx.html#a2982e568ec59ae0f12aa883571a5dac6">image_reader_window</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#aec7adc65e8d0851b0f48a8f4f59a75cc">   83</a></span>&#160;    ACaptureSessionOutputContainer *<a class="code" href="struct_android_camera_ctx.html#aec7adc65e8d0851b0f48a8f4f59a75cc">capture_session_output_container</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#af80973bacfb487f18b54c43e239580b4">   84</a></span>&#160;    ACaptureSessionOutput *<a class="code" href="struct_android_camera_ctx.html#af80973bacfb487f18b54c43e239580b4">capture_session_output</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#ab6dc4954067a549ba1b15f769b949472">   85</a></span>&#160;    ACameraOutputTarget *<a class="code" href="struct_android_camera_ctx.html#ab6dc4954067a549ba1b15f769b949472">camera_output_target</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#aec01576479f22b8bbd38ce09f0f4901b">   86</a></span>&#160;    ACaptureRequest *<a class="code" href="struct_android_camera_ctx.html#aec01576479f22b8bbd38ce09f0f4901b">capture_request</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a2bb95ea7149cc7b7dc81cf5328a6c0f1">   87</a></span>&#160;    ACameraCaptureSession_stateCallbacks <a class="code" href="struct_android_camera_ctx.html#a2bb95ea7149cc7b7dc81cf5328a6c0f1">capture_session_state_callbacks</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a5ab24148a7e8bf750f2aab080f92dde6">   88</a></span>&#160;    ACameraCaptureSession *<a class="code" href="struct_android_camera_ctx.html#a5ab24148a7e8bf750f2aab080f92dde6">capture_session</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#ae74db7a6a8c47d54563cdc26812721e0">   90</a></span>&#160;    <a class="code" href="struct_a_v_thread_message_queue.html">AVThreadMessageQueue</a> *<a class="code" href="struct_android_camera_ctx.html#ae74db7a6a8c47d54563cdc26812721e0">input_queue</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a33402231991a928a17764ab91dcf31e5">   91</a></span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a> <a class="code" href="struct_android_camera_ctx.html#a33402231991a928a17764ab91dcf31e5">exit</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_android_camera_ctx.html#a2735d436e9867072f9980b19e0db825f">   92</a></span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a> <a class="code" href="struct_android_camera_ctx.html#a2735d436e9867072f9980b19e0db825f">got_image_format</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a914f89e1c42d605b074ac8fb597224e4">   93</a></span>&#160;} <a class="code" href="android__camera_8c.html#a914f89e1c42d605b074ac8fb597224e4">AndroidCameraCtx</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">   95</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(camera_status_t <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;{</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_OK)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_UNKNOWN)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_INVALID_PARAMETER)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_CAMERA_DISCONNECTED)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_NOT_ENOUGH_MEMORY)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_METADATA_NOT_FOUND)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_CAMERA_DEVICE)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_CAMERA_SERVICE)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_SESSION_CLOSED)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_INVALID_OPERATION)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_STREAM_CONFIGURE_FAIL)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_CAMERA_IN_USE)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_MAX_CAMERA_IN_USE)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_CAMERA_DISABLED)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ACAMERA_ERROR_PERMISSION_DENIED)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="android__camera_8c.html#a23502b02dcab5161818c3d229c7fb474">RETURN_DEFAULT</a>(ACAMERA_ERROR_UNKNOWN)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a73e86a659c31127465c5a3076fe17118">  117</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="android__camera_8c.html#a73e86a659c31127465c5a3076fe17118">media_status_string</a>(media_status_t <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_OK)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_ERROR_UNKNOWN)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_ERROR_MALFORMED)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_ERROR_UNSUPPORTED)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_ERROR_INVALID_OBJECT)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_ERROR_INVALID_PARAMETER)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_ERROR_INVALID_OPERATION)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_DRM_NOT_PROVISIONED)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_DRM_RESOURCE_BUSY)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_DRM_DEVICE_REVOKED)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_DRM_SHORT_BUFFER)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_DRM_SESSION_NOT_OPENED)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_DRM_TAMPER_DETECTED)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_DRM_VERIFY_FAILED)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_DRM_NEED_KEY)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_DRM_LICENSE_EXPIRED)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_IMGREADER_NO_BUFFER_AVAILABLE)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_IMGREADER_MAX_IMAGES_ACQUIRED)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_IMGREADER_CANNOT_LOCK_IMAGE)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_IMGREADER_CANNOT_UNLOCK_IMAGE)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(AMEDIA_IMGREADER_IMAGE_NOT_LOCKED)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="android__camera_8c.html#a23502b02dcab5161818c3d229c7fb474">RETURN_DEFAULT</a>(AMEDIA_ERROR_UNKNOWN)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="android__camera_8c.html#aa4c03ecc7ae39ef5bee9039bb125082a">  145</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="android__camera_8c.html#aa4c03ecc7ae39ef5bee9039bb125082a">error_state_callback_string</a>(<span class="keywordtype">int</span> <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ERROR_CAMERA_IN_USE)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ERROR_MAX_CAMERAS_IN_USE)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ERROR_CAMERA_DISABLED)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ERROR_CAMERA_DEVICE)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a>(ERROR_CAMERA_SERVICE)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;ERROR_CAMERA_UNKNOWN&quot;</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a6a183d79594fc8d2a715fd061e36b05b">  158</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="android__camera_8c.html#a6a183d79594fc8d2a715fd061e36b05b">camera_dev_disconnected</a>(<span class="keywordtype">void</span> *<a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>, ACameraDevice *device)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx = <a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;exit, 1);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Camera with id %s disconnected.\n&quot;</span>,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;           ACameraDevice_getId(device));</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a603a52b53ae7d9611fb3ddcdf800a6b7">  167</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="android__camera_8c.html#a603a52b53ae7d9611fb3ddcdf800a6b7">camera_dev_error</a>(<span class="keywordtype">void</span> *<a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>, ACameraDevice *device, <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx = <a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;exit, 1);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error %s on camera with id %s.\n&quot;</span>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;           <a class="code" href="android__camera_8c.html#aa4c03ecc7ae39ef5bee9039bb125082a">error_state_callback_string</a>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>), ACameraDevice_getId(device));</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a98bd0a4347500043483876fedb23298b">  176</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#a98bd0a4347500043483876fedb23298b">open_camera</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    camera_status_t <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    ACameraIdList *camera_ids;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACameraManager_getCameraIdList(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_mgr, &amp;camera_ids);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get camera id list, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_index &lt; camera_ids-&gt;numCameras) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_id = <a class="code" href="group__lavu__mem__funcs.html#ga7c352f4cff02184f005323691375fea9">av_strdup</a>(camera_ids-&gt;cameraIds[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_index]);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_id) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to allocate memory for camera_id.\n&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;No camera with index %d available.\n&quot;</span>,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_index);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENXIO);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    ACameraManager_deleteCameraIdList(camera_ids);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACameraManager_getCameraCharacteristics(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_mgr,</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_id, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_metadata);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get metadata for camera with id %s, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_id, <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_state_callbacks.context = avctx;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_state_callbacks.onDisconnected = <a class="code" href="android__camera_8c.html#a6a183d79594fc8d2a715fd061e36b05b">camera_dev_disconnected</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_state_callbacks.onError = <a class="code" href="android__camera_8c.html#a603a52b53ae7d9611fb3ddcdf800a6b7">camera_dev_error</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACameraManager_openCamera(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_mgr, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_id,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                    &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_state_callbacks, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_dev);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to open camera with id %s, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_id, <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a9350f08e589544114cc7898df331b907">  226</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="android__camera_8c.html#a9350f08e589544114cc7898df331b907">get_sensor_orientation</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    ACameraMetadata_const_entry lens_facing;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    ACameraMetadata_const_entry sensor_orientation;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    ACameraMetadata_getConstEntry(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_metadata,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                  ACAMERA_LENS_FACING, &amp;lens_facing);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    ACameraMetadata_getConstEntry(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_metadata,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                  ACAMERA_SENSOR_ORIENTATION, &amp;sensor_orientation);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lens_facing = lens_facing.data.u8[0];</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sensor_orientation = sensor_orientation.data.i32[0];</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="android__camera_8c.html#af75916095c5e11bda1cf2b6333923970">  241</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="android__camera_8c.html#af75916095c5e11bda1cf2b6333923970">match_video_size</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    ACameraMetadata_const_entry available_configs;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">int</span> found = 0;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    ACameraMetadata_getConstEntry(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_metadata,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                  ACAMERA_SCALER_AVAILABLE_STREAM_CONFIGURATIONS,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                  &amp;available_configs);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; available_configs.count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a> = available_configs.data.i32[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 4 + 3];</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> = available_configs.<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>.i32[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 4 + 0];</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> == <a class="code" href="android__camera_8c.html#a60f02f366843fde932c6aea2407a81c1">IMAGE_FORMAT_ANDROID</a>) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> = available_configs.data.i32[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 4 + 1];</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> = available_configs.data.i32[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 4 + 2];</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="comment">//Same ratio</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;requested_width == <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;requested_height == <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>) ||</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                    (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;requested_width == <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;requested_height == <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>)) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;width = <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;height = <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                found = 1;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (!found || <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;width == 0 || <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;height == 0) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;width = available_configs.data.i32[1];</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;height = available_configs.data.i32[2];</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;               <span class="stringliteral">&quot;Requested video_size %dx%d not available, falling back to %dx%d\n&quot;</span>,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;requested_width, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;requested_height, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;width, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;height);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="android__camera_8c.html#aec50f5b7707c45ad8e8d95c959451ac8">  286</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="android__camera_8c.html#aec50f5b7707c45ad8e8d95c959451ac8">match_framerate</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    ACameraMetadata_const_entry available_framerates;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordtype">int</span> found = 0;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordtype">int</span> current_best_match = -1;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordtype">int</span> requested_framerate = <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    ACameraMetadata_getConstEntry(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_metadata,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                  ACAMERA_CONTROL_AE_AVAILABLE_TARGET_FPS_RANGES,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                  &amp;available_framerates);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; available_framerates.count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> = available_framerates.data.i32[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 2 + 0];</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = available_framerates.data.i32[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 2 + 1];</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">if</span> (requested_framerate == <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> == <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[0] = <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[1] = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                found = 1;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (current_best_match &gt;= 0) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> current_best_match_min = available_framerates.data.i32[current_best_match * 2 + 0];</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> &gt; current_best_match_min) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                    current_best_match = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                current_best_match = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (!found) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">if</span> (current_best_match &gt;= 0) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[0] = available_framerates.data.i32[current_best_match * 2 + 0];</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[1] = available_framerates.data.i32[current_best_match * 2 + 1];</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[0] = available_framerates.data.i32[0];</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[1] = available_framerates.data.i32[1];</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;               <span class="stringliteral">&quot;Requested framerate %d not available, falling back to min: %d and max: %d fps\n&quot;</span>,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;               requested_framerate, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[0], <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[1]);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a565429fea0cda7185472f0af1fd6cead">  337</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#a565429fea0cda7185472f0af1fd6cead">get_image_format</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, AImage *image)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> image_pixelstrides[2];</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *image_plane_data[2];</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordtype">int</span> plane_data_length[2];</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        AImage_getPlanePixelStride(image, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1, &amp;image_pixelstrides[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        AImage_getPlaneData(image, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1, &amp;image_plane_data[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;plane_data_length[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">if</span> (image_pixelstrides[0] != image_pixelstrides[1]) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;               <span class="stringliteral">&quot;Pixel strides of U and V plane should have been the same.\n&quot;</span>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">switch</span> (image_pixelstrides[0]) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_format = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">if</span> (image_plane_data[0] &lt; image_plane_data[1]) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_format = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_format = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1cf3f762c0feb0bbd9f82e4e18fe2280">AV_PIX_FMT_NV21</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                   <span class="stringliteral">&quot;Unknown pixel stride %d of U and V plane, cannot determine camera image format.\n&quot;</span>,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                   image_pixelstrides[0]);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOSYS);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a054496b512600170983d11dbb9d6cfff">  376</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="android__camera_8c.html#a054496b512600170983d11dbb9d6cfff">image_available</a>(<span class="keywordtype">void</span> *<a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>, AImageReader *reader)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx = <a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    media_status_t media_status;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    AImage *image;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    int64_t image_timestamp;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> image_linestrides[4];</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *image_plane_data[4];</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordtype">int</span> plane_data_length[4];</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">int</span> pkt_buffer_size = 0;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    media_status = AImageReader_acquireLatestImage(reader, &amp;image);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> (media_status != AMEDIA_OK) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">if</span> (media_status == AMEDIA_IMGREADER_NO_BUFFER_AVAILABLE) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                   <span class="stringliteral">&quot;An image reader frame was discarded&quot;</span>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                   <span class="stringliteral">&quot;Failed to acquire latest image from image reader, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                   <a class="code" href="android__camera_8c.html#a73e86a659c31127465c5a3076fe17118">media_status_string</a>(media_status));</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// Silently drop frames when exit is set</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;exit)) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// Determine actual image format</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;got_image_format)) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="android__camera_8c.html#a565429fea0cda7185472f0af1fd6cead">get_image_format</a>(avctx, image);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                   <span class="stringliteral">&quot;Could not get image format of camera.\n&quot;</span>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;got_image_format, 1);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    pkt_buffer_size = <a class="code" href="group__lavu__picture.html#ga24a67963c3ae0054a2a4bab35930e694">av_image_get_buffer_size</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_format, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;width, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;height, 32);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    AImage_getTimestamp(image, &amp;image_timestamp);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    AImage_getPlaneRowStride(image, 0, &amp;image_linestrides[0]);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    AImage_getPlaneData(image, 0, &amp;image_plane_data[0], &amp;plane_data_length[0]);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_format) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>:</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            AImage_getPlaneRowStride(image, 1, &amp;image_linestrides[1]);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            AImage_getPlaneData(image, 1, &amp;image_plane_data[1], &amp;plane_data_length[1]);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            AImage_getPlaneRowStride(image, 2, &amp;image_linestrides[2]);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            AImage_getPlaneData(image, 2, &amp;image_plane_data[2], &amp;plane_data_length[2]);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>:</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            AImage_getPlaneRowStride(image, 1, &amp;image_linestrides[1]);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            AImage_getPlaneData(image, 1, &amp;image_plane_data[1], &amp;plane_data_length[1]);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1cf3f762c0feb0bbd9f82e4e18fe2280">AV_PIX_FMT_NV21</a>:</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            AImage_getPlaneRowStride(image, 2, &amp;image_linestrides[1]);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            AImage_getPlaneData(image, 2, &amp;image_plane_data[1], &amp;plane_data_length[1]);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported camera image format.\n&quot;</span>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOSYS);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__packet.html#gadfa708660b85a56749c753124de2da7d">av_new_packet</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, pkt_buffer_size);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;               <span class="stringliteral">&quot;Failed to create new av packet, error: %s.\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = <a class="code" href="android__camera_8c.html#a6317b279a8fc6f4c110b29825aa367ab">VIDEO_STREAM_INDEX</a>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = image_timestamp;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="group__lavu__picture.html#ga6f8576f1ef0c2d9a9f7c5ac7f9a28c52">av_image_copy_to_buffer</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, pkt_buffer_size,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                            (<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> * <span class="keyword">const</span> *) image_plane_data,</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                            image_linestrides, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_format,</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;width, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;height, 32);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="threadmessage_8c.html#a873d588ed106d8dde339c4a16411e0b8">av_thread_message_queue_send</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="threadmessage_8h.html#a7fb8bd4d2b779ab5e2044a1b5a5b22f5adc72c40671a489c761960bafc41b1699">AV_THREAD_MESSAGE_NONBLOCK</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN)) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                   <span class="stringliteral">&quot;Error while processing new image, error: %s.\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <a class="code" href="threadmessage_8c.html#a6b2b6c47728e7d442b31a49ca8f9f971">av_thread_message_queue_set_err_recv</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;exit, 1);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                   <span class="stringliteral">&quot;Input queue was full, dropping frame, consider raising the input_queue_size option (current value: %d)\n&quot;</span>,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                   <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue_size);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">if</span> (pkt_buffer_size) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    AImage_delete(image);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a876abcebca3cb67b42e2058040b444f7">  488</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#a876abcebca3cb67b42e2058040b444f7">create_image_reader</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    media_status_t <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = AImageReader_new(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;width, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;height, <a class="code" href="android__camera_8c.html#a60f02f366843fde932c6aea2407a81c1">IMAGE_FORMAT_ANDROID</a>,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                           <a class="code" href="android__camera_8c.html#ae59bce1290988141d8e3dade88c1c915">MAX_BUF_COUNT</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != AMEDIA_OK) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;               <span class="stringliteral">&quot;Failed to create image reader, error: %s.\n&quot;</span>, <a class="code" href="android__camera_8c.html#a73e86a659c31127465c5a3076fe17118">media_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_listener.context = avctx;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_listener.onImageAvailable = <a class="code" href="android__camera_8c.html#a054496b512600170983d11dbb9d6cfff">image_available</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = AImageReader_setImageListener(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_listener);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != AMEDIA_OK) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;               <span class="stringliteral">&quot;Failed to set image listener on image reader, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;               <a class="code" href="android__camera_8c.html#a73e86a659c31127465c5a3076fe17118">media_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = AImageReader_getWindow(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader_window);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != AMEDIA_OK) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;               <span class="stringliteral">&quot;Could not get image reader window, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;               <a class="code" href="android__camera_8c.html#a73e86a659c31127465c5a3076fe17118">media_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="android__camera_8c.html#ac2c76624846fa72e49f2c512ee8e5f45">  523</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="android__camera_8c.html#ac2c76624846fa72e49f2c512ee8e5f45">capture_session_closed</a>(<span class="keywordtype">void</span> *<a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>, ACameraCaptureSession *session)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Android camera capture session was closed.\n&quot;</span>);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="android__camera_8c.html#aa86c44651dd375f5e41bfb566e5524f5">  528</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="android__camera_8c.html#aa86c44651dd375f5e41bfb566e5524f5">capture_session_ready</a>(<span class="keywordtype">void</span> *<a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>, ACameraCaptureSession *session)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;{</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Android camera capture session is ready.\n&quot;</span>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a19de03754e15a467fc92a354286f15d0">  533</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="android__camera_8c.html#a19de03754e15a467fc92a354286f15d0">capture_session_active</a>(<span class="keywordtype">void</span> *<a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>, ACameraCaptureSession *session)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;{</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Android camera capture session is active.\n&quot;</span>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="android__camera_8c.html#ae5c70b399002fcc93c96e67da432d23c">  538</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#ae5c70b399002fcc93c96e67da432d23c">create_capture_session</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;{</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    camera_status_t <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACaptureSessionOutputContainer_create(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output_container);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;               <span class="stringliteral">&quot;Failed to create capture session output container, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    ANativeWindow_acquire(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader_window);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACaptureSessionOutput_create(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader_window, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;               <span class="stringliteral">&quot;Failed to create capture session container, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACaptureSessionOutputContainer_add(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output_container,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                             <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;               <span class="stringliteral">&quot;Failed to add output to output container, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACameraOutputTarget_create(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader_window, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_output_target);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;               <span class="stringliteral">&quot;Failed to create camera output target, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACameraDevice_createCaptureRequest(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_dev, TEMPLATE_RECORD, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_request);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;               <span class="stringliteral">&quot;Failed to create capture request, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACaptureRequest_setEntry_i32(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_request, ACAMERA_CONTROL_AE_TARGET_FPS_RANGE,</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                       2, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;               <span class="stringliteral">&quot;Failed to set target fps range in capture request, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACaptureRequest_addTarget(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_request, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_output_target);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;               <span class="stringliteral">&quot;Failed to add capture request capture request, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_state_callbacks.context = avctx;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_state_callbacks.onClosed = <a class="code" href="android__camera_8c.html#ac2c76624846fa72e49f2c512ee8e5f45">capture_session_closed</a>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_state_callbacks.onReady = <a class="code" href="android__camera_8c.html#aa86c44651dd375f5e41bfb566e5524f5">capture_session_ready</a>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_state_callbacks.onActive = <a class="code" href="android__camera_8c.html#a19de03754e15a467fc92a354286f15d0">capture_session_active</a>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACameraDevice_createCaptureSession(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_dev, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output_container,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                                             &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_state_callbacks, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;               <span class="stringliteral">&quot;Failed to create capture session, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = ACameraCaptureSession_setRepeatingRequest(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_request, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != ACAMERA_OK) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;               <span class="stringliteral">&quot;Failed to set repeating request on capture session, error: %s.\n&quot;</span>,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;               <a class="code" href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="android__camera_8c.html#aaab0bc470065401d87b4df2df2ce75f9">  628</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#aaab0bc470065401d87b4df2df2ce75f9">wait_for_image_format</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;{</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;got_image_format) &amp;&amp; !<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;exit)) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="comment">//Wait until first frame arrived and actual image format was determined</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        usleep(1000);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;got_image_format);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;}</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="android__camera_8c.html#afaf7b5d63bf8d0c3d8c93891e432d0c5">  640</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#afaf7b5d63bf8d0c3d8c93891e432d0c5">add_display_matrix</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;{</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *side_data;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> display_matrix[9];</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="group__lavu__video__display.html#ga5964303bfe085ad33683bc2454768d4a">av_display_rotation_set</a>(display_matrix, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sensor_orientation);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lens_facing == ACAMERA_LENS_FACING_FRONT) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <a class="code" href="group__lavu__video__display.html#gadd236b7ced34637aa9f0a9bceaeac5c3">av_display_matrix_flip</a>(display_matrix, 1, 0);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    side_data = <a class="code" href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a>(st,</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1">AV_PKT_DATA_DISPLAYMATRIX</a>, <span class="keyword">sizeof</span>(display_matrix));</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> (!side_data) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    memcpy(side_data, display_matrix, <span class="keyword">sizeof</span>(display_matrix));</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a3fec8e9dab300248e3930a865b28a83f">  664</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#a3fec8e9dab300248e3930a865b28a83f">add_video_stream</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;{</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *codecpar;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    st = <a class="code" href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a>(avctx, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (!st) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">id</a> = <a class="code" href="android__camera_8c.html#a6317b279a8fc6f4c110b29825aa367ab">VIDEO_STREAM_INDEX</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a> = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>) { <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[1], 1 };</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">r_frame_rate</a> = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>) { <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;framerate_range[1], 1 };</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="android__camera_8c.html#aaab0bc470065401d87b4df2df2ce75f9">wait_for_image_format</a>(avctx)) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    codecpar = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    codecpar-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    codecpar-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc">AV_CODEC_ID_RAWVIDEO</a>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    codecpar-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abee943e65d98f9763fa6602a356e774f">format</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_format;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    codecpar-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;width;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    codecpar-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;height;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, 1, <a class="code" href="android__camera_8c.html#a7575968db29933e4eec236a3be6c555e">VIDEO_TIMEBASE_ANDROID</a>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="android__camera_8c.html#afaf7b5d63bf8d0c3d8c93891e432d0c5">add_display_matrix</a>(avctx, st);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;}</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="android__camera_8c.html#ad86ebf47fb6e887c06f8eefd58d76e62">  695</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#ad86ebf47fb6e887c06f8eefd58d76e62">android_camera_read_close</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;{</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;exit, 1);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session) {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        ACameraCaptureSession_stopRepeating(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="comment">// Following warning is emitted, after capture session closed callback is received:</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="comment">// ACameraCaptureSession: Device is closed but session 0 is not notified</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="comment">// Seems to be a bug in Android, we can ignore this</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        ACameraCaptureSession_close(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_request) {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        ACaptureRequest_removeTarget(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_request, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_output_target);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        ACaptureRequest_free(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_request);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_request = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_output_target) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        ACameraOutputTarget_free(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_output_target);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_output_target = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        ACaptureSessionOutputContainer_remove(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output_container,</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        ACaptureSessionOutput_free(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader_window) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        ANativeWindow_release(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader_window);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader_window = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output_container) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        ACaptureSessionOutputContainer_free(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output_container);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;capture_session_output_container = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_dev) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        ACameraDevice_close(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_dev);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_dev = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        AImageReader_delete(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;image_reader = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_metadata) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        ACameraMetadata_free(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_metadata);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_metadata = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_id);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_mgr) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        ACameraManager_delete(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_mgr);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_mgr = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <a class="code" href="threadmessage_8c.html#a01981ed85e713e682912ee6e063403ad">av_thread_message_queue_set_err_send</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue, <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="threadmessage_8c.html#a0fb9f4909ad77c541f8ba4409b253111">av_thread_message_queue_recv</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="threadmessage_8h.html#a7fb8bd4d2b779ab5e2044a1b5a5b22f5adc72c40671a489c761960bafc41b1699">AV_THREAD_MESSAGE_NONBLOCK</a>) &gt;= 0) {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <a class="code" href="threadmessage_8c.html#a95727669f1ebba16a6a49ea8b9f2276e">av_thread_message_queue_free</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a058f34d8b0fa7f24f67ae53809587b56">  772</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#a058f34d8b0fa7f24f67ae53809587b56">android_camera_read_header</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;{</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;got_image_format, 0);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;exit, 0);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="threadmessage_8c.html#a1734b65da48a88e7c78e8a29b1eee139">av_thread_message_queue_alloc</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue_size, <span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_packet.html">AVPacket</a>));</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;               <span class="stringliteral">&quot;Failed to allocate input queue, error: %s.\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_mgr = ACameraManager_create();</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;camera_mgr) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create Android camera manager.\n&quot;</span>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="android__camera_8c.html#a98bd0a4347500043483876fedb23298b">open_camera</a>(avctx);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to open camera.\n&quot;</span>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <a class="code" href="android__camera_8c.html#a9350f08e589544114cc7898df331b907">get_sensor_orientation</a>(avctx);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="android__camera_8c.html#af75916095c5e11bda1cf2b6333923970">match_video_size</a>(avctx);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="android__camera_8c.html#aec50f5b7707c45ad8e8d95c959451ac8">match_framerate</a>(avctx);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="android__camera_8c.html#a876abcebca3cb67b42e2058040b444f7">create_image_reader</a>(avctx);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="android__camera_8c.html#ae5c70b399002fcc93c96e67da432d23c">create_capture_session</a>(avctx);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="android__camera_8c.html#a3fec8e9dab300248e3930a865b28a83f">add_video_stream</a>(avctx);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <a class="code" href="android__camera_8c.html#ad86ebf47fb6e887c06f8eefd58d76e62">android_camera_read_close</a>(avctx);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to open android_camera.\n&quot;</span>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;}</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a79c73bac5cf110e6cdebd2d9595939d7">  825</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="android__camera_8c.html#a79c73bac5cf110e6cdebd2d9595939d7">android_camera_read_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;{</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="struct_android_camera_ctx.html">AndroidCameraCtx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;exit)) {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="threadmessage_8c.html#a0fb9f4909ad77c541f8ba4409b253111">av_thread_message_queue_recv</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;input_queue, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>,</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                avctx-&gt;<a class="code" href="struct_a_v_format_context.html#a32379cc371463b235d54235d4af06a15">flags</a> &amp; <a class="code" href="avformat_8h.html#a4fd189c4f2464afad342133be7bf6aeb">AVFMT_FLAG_NONBLOCK</a> ? <a class="code" href="threadmessage_8h.html#a7fb8bd4d2b779ab5e2044a1b5a5b22f5adc72c40671a489c761960bafc41b1699">AV_THREAD_MESSAGE_NONBLOCK</a> : 0);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno"><a class="line" href="android__camera_8c.html#ad12dce0a7bf9d908b172a28155b3d261">  844</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(AndroidCameraCtx, x)</span></div>
<div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="android__camera_8c.html#afe38ec6126e35e40049e27fdf4586ba5">  845</a></span>&#160;<span class="preprocessor">#define DEC AV_OPT_FLAG_DECODING_PARAM</span></div>
<div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a384ff94b5139f441c282c9b4c7b985e6">  846</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="android__camera_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a>[] = {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    { <span class="stringliteral">&quot;video_size&quot;</span>, <span class="stringliteral">&quot;set video size given as a string such as 640x480 or hd720&quot;</span>, <a class="code" href="android__camera_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(requested_width), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a078f280b98b49a9f585c5d479b711d9a">AV_OPT_TYPE_IMAGE_SIZE</a>, {.str = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>}, 0, 0, <a class="code" href="android__camera_8c.html#afe38ec6126e35e40049e27fdf4586ba5">DEC</a> },</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    { <span class="stringliteral">&quot;framerate&quot;</span>, <span class="stringliteral">&quot;set video frame rate&quot;</span>, <a class="code" href="android__camera_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="tests_2h264__levels_8c.html#a0e35b8d74e1ac59b82f506293654d26d">framerate</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a9429811abc62d4a564ec56938df0a572">AV_OPT_TYPE_VIDEO_RATE</a>, {.str = <span class="stringliteral">&quot;30&quot;</span>}, 0, INT_MAX, <a class="code" href="android__camera_8c.html#afe38ec6126e35e40049e27fdf4586ba5">DEC</a> },</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    { <span class="stringliteral">&quot;camera_index&quot;</span>, <span class="stringliteral">&quot;set index of camera to use&quot;</span>, <a class="code" href="android__camera_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(camera_index), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, {.i64 = 0}, 0, INT_MAX, <a class="code" href="android__camera_8c.html#afe38ec6126e35e40049e27fdf4586ba5">DEC</a> },</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    { <span class="stringliteral">&quot;input_queue_size&quot;</span>, <span class="stringliteral">&quot;set maximum number of frames to buffer&quot;</span>, <a class="code" href="android__camera_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(input_queue_size), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, {.i64 = 5}, 0, INT_MAX, <a class="code" href="android__camera_8c.html#afe38ec6126e35e40049e27fdf4586ba5">DEC</a> },</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;};</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="android__camera_8c.html#aeac465da41a92d7a6be7c4abe977b148">  854</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <a class="code" href="android__camera_8c.html#aeac465da41a92d7a6be7c4abe977b148">android_camera_class</a> = {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a> = <span class="stringliteral">&quot;android_camera indev&quot;</span>,</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    .item_name  = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    .option     = <a class="code" href="android__camera_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a>,</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    .version    = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    .category   = <a class="code" href="log_8h.html#aeb1c06cc3e47a029ca6afeac782ac8f9a73fb8c6b471b22685e8d2836f25ca6c7">AV_CLASS_CATEGORY_DEVICE_VIDEO_INPUT</a>,</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;};</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno"><a class="line" href="android__camera_8c.html#a08cdda22e092a2c6835822b536884f60">  862</a></span>&#160;<a class="code" href="struct_a_v_input_format.html">AVInputFormat</a> <a class="code" href="android__camera_8c.html#a08cdda22e092a2c6835822b536884f60">ff_android_camera_demuxer</a> = {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    .<a class="code" href="struct_a_v_input_format.html#a850db3eb225e22b64f3304d72134ca0c">name</a>           = <span class="stringliteral">&quot;android_camera&quot;</span>,</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;Android camera input device&quot;</span>),</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="android__camera_8c.html#a914f89e1c42d605b074ac8fb597224e4">AndroidCameraCtx</a>),</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    .<a class="code" href="ffv1dec_8c.html#a0b9c6775a65106fc8bf33cd388ec715c">read_header</a>    = <a class="code" href="android__camera_8c.html#a058f34d8b0fa7f24f67ae53809587b56">android_camera_read_header</a>,</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    .<a class="code" href="avio__reading_8c.html#a3a86bff38e7cb9093d0a32316b73b29c">read_packet</a>    = <a class="code" href="android__camera_8c.html#a79c73bac5cf110e6cdebd2d9595939d7">android_camera_read_packet</a>,</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    .<a class="code" href="libcdio_8c.html#a3469cc7152b70da4356d17e698a55850">read_close</a>     = <a class="code" href="android__camera_8c.html#ad86ebf47fb6e887c06f8eefd58d76e62">android_camera_read_close</a>,</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    .<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>          = <a class="code" href="avformat_8h.html#a752cce390d480521919aa5d8be24ac0b">AVFMT_NOFILE</a>,</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    .priv_class     = &amp;<a class="code" href="android__camera_8c.html#aeac465da41a92d7a6be7c4abe977b148">android_camera_class</a>,</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="atarget__bsf__fuzzer_8c_html_aa3d85a3469f60990fdff296efb86a9c2"><div class="ttname"><a href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a></div><div class="ttdeci">static void error(const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="target__bsf__fuzzer_8c_source.html#l00030">target_bsf_fuzzer.c:30</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_abee943e65d98f9763fa6602a356e774f"><div class="ttname"><a href="struct_a_v_codec_parameters.html#abee943e65d98f9763fa6602a356e774f">AVCodecParameters::format</a></div><div class="ttdeci">int format</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00084">codec_par.h:84</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a2735d436e9867072f9980b19e0db825f"><div class="ttname"><a href="struct_android_camera_ctx.html#a2735d436e9867072f9980b19e0db825f">AndroidCameraCtx::got_image_format</a></div><div class="ttdeci">atomic_int got_image_format</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00092">android_camera.c:92</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="astruct_a_v_input_format_html"><div class="ttname"><a href="struct_a_v_input_format.html">AVInputFormat</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00638">avformat.h:638</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_a0241b1f231c55cdf092b2d509e8d83df"><div class="ttname"><a href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a></div><div class="ttdeci">#define atomic_store(object, desired)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00085">stdatomic.h:85</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a642345be438351e43761a168489648ac"><div class="ttname"><a href="struct_android_camera_ctx.html#a642345be438351e43761a168489648ac">AndroidCameraCtx::image_listener</a></div><div class="ttdeci">AImageReader_ImageListener image_listener</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00081">android_camera.c:81</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a384ff94b5139f441c282c9b4c7b985e6"><div class="ttname"><a href="android__camera_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a></div><div class="ttdeci">static const AVOption options[]</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00846">android_camera.c:846</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_gadcb0fd3e507d9b58fe78f61f8ad39827"><div class="ttname"><a href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a></div><div class="ttdeci">AVStream * avformat_new_stream(AVFormatContext *s, const AVCodec *c)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04453">utils.c:4453</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gab4faa0afdf35076914824200331defff"><div class="ttname"><a href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a></div><div class="ttdeci">#define AVERROR_EOF</div><div class="ttdoc">End of file.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00055">error.h:55</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a9429811abc62d4a564ec56938df0a572"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a9429811abc62d4a564ec56938df0a572">AV_OPT_TYPE_VIDEO_RATE</a></div><div class="ttdeci">@ AV_OPT_TYPE_VIDEO_RATE</div><div class="ttdoc">offset must point to AVRational</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00238">opt.h:238</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_ab12970765bd3efa1e26f8ad007ec593b"><div class="ttname"><a href="struct_android_camera_ctx.html#ab12970765bd3efa1e26f8ad007ec593b">AndroidCameraCtx::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00070">android_camera.c:70</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a2982e568ec59ae0f12aa883571a5dac6"><div class="ttname"><a href="struct_android_camera_ctx.html#a2982e568ec59ae0f12aa883571a5dac6">AndroidCameraCtx::image_reader_window</a></div><div class="ttdeci">ANativeWindow * image_reader_window</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00082">android_camera.c:82</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_afe38ec6126e35e40049e27fdf4586ba5"><div class="ttname"><a href="android__camera_8c.html#afe38ec6126e35e40049e27fdf4586ba5">DEC</a></div><div class="ttdeci">#define DEC</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00845">android_camera.c:845</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_aa4c03ecc7ae39ef5bee9039bb125082a"><div class="ttname"><a href="android__camera_8c.html#aa4c03ecc7ae39ef5bee9039bb125082a">error_state_callback_string</a></div><div class="ttdeci">static const char * error_state_callback_string(int val)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00145">android_camera.c:145</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_ac2c76624846fa72e49f2c512ee8e5f45"><div class="ttname"><a href="android__camera_8c.html#ac2c76624846fa72e49f2c512ee8e5f45">capture_session_closed</a></div><div class="ttdeci">static void capture_session_closed(void *context, ACameraCaptureSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00523">android_camera.c:523</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a054496b512600170983d11dbb9d6cfff"><div class="ttname"><a href="android__camera_8c.html#a054496b512600170983d11dbb9d6cfff">image_available</a></div><div class="ttdeci">static void image_available(void *context, AImageReader *reader)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00376">android_camera.c:376</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc">AV_CODEC_ID_RAWVIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_RAWVIDEO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00062">codec_id.h:62</a></div></div>
<div class="ttc" id="athreadmessage_8h_html_a7fb8bd4d2b779ab5e2044a1b5a5b22f5adc72c40671a489c761960bafc41b1699"><div class="ttname"><a href="threadmessage_8h.html#a7fb8bd4d2b779ab5e2044a1b5a5b22f5adc72c40671a489c761960bafc41b1699">AV_THREAD_MESSAGE_NONBLOCK</a></div><div class="ttdeci">@ AV_THREAD_MESSAGE_NONBLOCK</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8h_source.html#l00031">threadmessage.h:31</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a51639f88aef9f4f283f538a0c033fbb8"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">AVCodecParameters::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00126">codec_par.h:126</a></div></div>
<div class="ttc" id="agroup__lavu__video__display_html_gadd236b7ced34637aa9f0a9bceaeac5c3"><div class="ttname"><a href="group__lavu__video__display.html#gadd236b7ced34637aa9f0a9bceaeac5c3">av_display_matrix_flip</a></div><div class="ttdeci">void av_display_matrix_flip(int32_t matrix[9], int hflip, int vflip)</div><div class="ttdef"><b>Definition:</b> <a href="display_8c_source.html#l00065">display.c:65</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_ab6dc4954067a549ba1b15f769b949472"><div class="ttname"><a href="struct_android_camera_ctx.html#ab6dc4954067a549ba1b15f769b949472">AndroidCameraCtx::camera_output_target</a></div><div class="ttdeci">ACameraOutputTarget * camera_output_target</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00085">android_camera.c:85</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_aa86c44651dd375f5e41bfb566e5524f5"><div class="ttname"><a href="android__camera_8c.html#aa86c44651dd375f5e41bfb566e5524f5">capture_session_ready</a></div><div class="ttdeci">static void capture_session_ready(void *context, ACameraCaptureSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00528">android_camera.c:528</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_af80973bacfb487f18b54c43e239580b4"><div class="ttname"><a href="struct_android_camera_ctx.html#af80973bacfb487f18b54c43e239580b4">AndroidCameraCtx::capture_session_output</a></div><div class="ttdeci">ACaptureSessionOutput * capture_session_output</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00084">android_camera.c:84</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_a60b2151806275a115118e9981cc096b2"><div class="ttname"><a href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a></div><div class="ttdeci">intptr_t atomic_int</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00055">stdatomic.h:55</a></div></div>
<div class="ttc" id="agroup__lavu__video__display_html_ga5964303bfe085ad33683bc2454768d4a"><div class="ttname"><a href="group__lavu__video__display.html#ga5964303bfe085ad33683bc2454768d4a">av_display_rotation_set</a></div><div class="ttdeci">void av_display_rotation_set(int32_t matrix[9], double angle)</div><div class="ttdef"><b>Definition:</b> <a href="display_8c_source.html#l00050">display.c:50</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_ac4415782daad0c45e6d69992c253939b"><div class="ttname"><a href="struct_android_camera_ctx.html#ac4415782daad0c45e6d69992c253939b">AndroidCameraCtx::image_reader</a></div><div class="ttdeci">AImageReader * image_reader</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00080">android_camera.c:80</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00033">cuda_runtime.h:33</a></div></div>
<div class="ttc" id="astruct_a_v_thread_message_queue_html"><div class="ttname"><a href="struct_a_v_thread_message_queue.html">AVThreadMessageQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00025">threadmessage.c:25</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_ad86ebf47fb6e887c06f8eefd58d76e62"><div class="ttname"><a href="android__camera_8c.html#ad86ebf47fb6e887c06f8eefd58d76e62">android_camera_read_close</a></div><div class="ttdeci">static int android_camera_read_close(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00695">android_camera.c:695</a></div></div>
<div class="ttc" id="atests_2h264__levels_8c_html_a0e35b8d74e1ac59b82f506293654d26d"><div class="ttname"><a href="tests_2h264__levels_8c.html#a0e35b8d74e1ac59b82f506293654d26d">framerate</a></div><div class="ttdeci">int framerate</div><div class="ttdef"><b>Definition:</b> <a href="tests_2h264__levels_8c_source.html#l00065">h264_levels.c:65</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a12826d21779289356722971d362c583c"><div class="ttname"><a href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">AVStream::codecpar</a></div><div class="ttdeci">AVCodecParameters * codecpar</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01034">avformat.h:1034</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_ac4c0777e54085af2f3f1b27130e2b21b"><div class="ttname"><a href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">AVFormatContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01251">avformat.h:1251</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a32379cc371463b235d54235d4af06a15"><div class="ttname"><a href="struct_a_v_format_context.html#a32379cc371463b235d54235d4af06a15">AVFormatContext::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01354">avformat.h:1354</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_ae80904482ec290ad2a9830eb61c64802"><div class="ttname"><a href="struct_android_camera_ctx.html#ae80904482ec290ad2a9830eb61c64802">AndroidCameraCtx::requested_width</a></div><div class="ttdeci">int requested_width</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00062">android_camera.c:62</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a6a183d79594fc8d2a715fd061e36b05b"><div class="ttname"><a href="android__camera_8c.html#a6a183d79594fc8d2a715fd061e36b05b">camera_dev_disconnected</a></div><div class="ttdeci">static void camera_dev_disconnected(void *context, ACameraDevice *device)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00158">android_camera.c:158</a></div></div>
<div class="ttc" id="alibcdio_8c_html_a3469cc7152b70da4356d17e698a55850"><div class="ttname"><a href="libcdio_8c.html#a3469cc7152b70da4356d17e698a55850">read_close</a></div><div class="ttdeci">static av_cold int read_close(AVFormatContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="libcdio_8c_source.html#l00145">libcdio.c:145</a></div></div>
<div class="ttc" id="aaeval_8c_html_a16aca557f352132b55bbc3c4769daa8b"><div class="ttname"><a href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a></div><div class="ttdeci">static double val(void *priv, double ch)</div><div class="ttdef"><b>Definition:</b> <a href="aeval_8c_source.html#l00076">aeval.c:76</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a0fb9f4909ad77c541f8ba4409b253111"><div class="ttname"><a href="threadmessage_8c.html#a0fb9f4909ad77c541f8ba4409b253111">av_thread_message_queue_recv</a></div><div class="ttdeci">int av_thread_message_queue_recv(AVThreadMessageQueue *mq, void *msg, unsigned flags)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00172">threadmessage.c:172</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a6317b279a8fc6f4c110b29825aa367ab"><div class="ttname"><a href="android__camera_8c.html#a6317b279a8fc6f4c110b29825aa367ab">VIDEO_STREAM_INDEX</a></div><div class="ttdeci">#define VIDEO_STREAM_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00053">android_camera.c:53</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1">AV_PKT_DATA_DISPLAYMATRIX</a></div><div class="ttdeci">@ AV_PKT_DATA_DISPLAYMATRIX</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00108">packet.h:108</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a0d1cb9b5a32b00fb6edc81ea3aae2a49"><div class="ttname"><a href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">AVPacket::stream_index</a></div><div class="ttdeci">int stream_index</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00365">packet.h:365</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a24aa559d3b49be38b1482526a29fd8d2"><div class="ttname"><a href="struct_android_camera_ctx.html#a24aa559d3b49be38b1482526a29fd8d2">AndroidCameraCtx::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00064">android_camera.c:64</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a873d588ed106d8dde339c4a16411e0b8"><div class="ttname"><a href="threadmessage_8c.html#a873d588ed106d8dde339c4a16411e0b8">av_thread_message_queue_send</a></div><div class="ttdeci">int av_thread_message_queue_send(AVThreadMessageQueue *mq, void *msg, unsigned flags)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00156">threadmessage.c:156</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_gae324697cedd36e7b47a1e142dc24b805"><div class="ttname"><a href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a></div><div class="ttdeci">uint8_t * av_stream_new_side_data(AVStream *stream, enum AVPacketSideDataType type, int size)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05484">utils.c:5484</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a2d3f88aaebc4661c6b1f45b86d176ce2"><div class="ttname"><a href="struct_android_camera_ctx.html#a2d3f88aaebc4661c6b1f45b86d176ce2">AndroidCameraCtx::lens_facing</a></div><div class="ttdeci">uint8_t lens_facing</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00068">android_camera.c:68</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a667b04d7fb6ef46db4da4af554c5b6f7"><div class="ttname"><a href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a></div><div class="ttdeci">#define width</div></div>
<div class="ttc" id="agroup__lavc__packet_html_gadfa708660b85a56749c753124de2da7d"><div class="ttname"><a href="group__lavc__packet.html#gadfa708660b85a56749c753124de2da7d">av_new_packet</a></div><div class="ttdeci">int av_new_packet(AVPacket *pkt, int size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00088">avpacket.c:88</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a7d537039ea0e18164d9edb0b5ca984dd"><div class="ttname"><a href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample format(the sample packing is implied by the sample format) and sample rate. The lists are not just lists</div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9f76f2475ef24ff4c9771dd53072d040"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">AVCodecParameters::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:60</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga935dbbf6bde8dfe5fa7ddb1da582eb07"><div class="ttname"><a href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a></div><div class="ttdeci">static double av_q2d(AVRational a)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00104">rational.h:104</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a3fec8e9dab300248e3930a865b28a83f"><div class="ttname"><a href="android__camera_8c.html#a3fec8e9dab300248e3930a865b28a83f">add_video_stream</a></div><div class="ttdeci">static int add_video_stream(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00664">android_camera.c:664</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html"><div class="ttname"><a href="struct_android_camera_ctx.html">AndroidCameraCtx</a></div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00059">android_camera.c:59</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a058f34d8b0fa7f24f67ae53809587b56"><div class="ttname"><a href="android__camera_8c.html#a058f34d8b0fa7f24f67ae53809587b56">android_camera_read_header</a></div><div class="ttdeci">static int android_camera_read_header(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00772">android_camera.c:772</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV420P</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, (1 Cr &amp; Cb sample per 2x2 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00066">pixfmt.h:66</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_acced2a78b2a440317feed51f3e505d1d"><div class="ttname"><a href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a></div><div class="ttdeci">#define atomic_load(object)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00093">stdatomic.h:93</a></div></div>
<div class="ttc" id="astruct_a_v_class_html_aa8883e113a3f2965abd008f7667db7eb"><div class="ttname"><a href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">AVClass::class_name</a></div><div class="ttdeci">const char * class_name</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00072">log.h:72</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_afd12020da5a235dfcf0c3c748fb5baed"><div class="ttname"><a href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a></div><div class="ttdeci">int32_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga6eff035c271caa5a533987a1e00ad43e"><div class="ttname"><a href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a></div><div class="ttdeci">struct AVRational AVRational</div></div>
<div class="ttc" id="awriting__filters_8txt_html_a5b5446e1f47af0c85ac6b45210d45117"><div class="ttname"><a href="writing__filters_8txt.html#a5b5446e1f47af0c85ac6b45210d45117">context</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf default minimum maximum flags name is the option keep it simple and lowercase description are in without and describe what they for example set the foo of the bar offset is the offset of the field in your context</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00091">writing_filters.txt:91</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a79eb39567c7b4f83993e5924e1836941"><div class="ttname"><a href="struct_android_camera_ctx.html#a79eb39567c7b4f83993e5924e1836941">AndroidCameraCtx::camera_mgr</a></div><div class="ttdeci">ACameraManager * camera_mgr</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00075">android_camera.c:75</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html"><div class="ttname"><a href="libavformat_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="agroup__lavu__ver_html_ga36e17e3fc9bcbe5c55820a8ac8b47e3c"><div class="ttname"><a href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a></div><div class="ttdeci">#define LIBAVUTIL_VERSION_INT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2version_8h_source.html#l00085">version.h:85</a></div></div>
<div class="ttc" id="affv1dec_8c_html_a0b9c6775a65106fc8bf33cd388ec715c"><div class="ttname"><a href="ffv1dec_8c.html#a0b9c6775a65106fc8bf33cd388ec715c">read_header</a></div><div class="ttdeci">static int read_header(FFV1Context *f)</div><div class="ttdef"><b>Definition:</b> <a href="ffv1dec_8c_source.html#l00527">ffv1dec.c:527</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_ae59bce1290988141d8e3dade88c1c915"><div class="ttname"><a href="android__camera_8c.html#ae59bce1290988141d8e3dade88c1c915">MAX_BUF_COUNT</a></div><div class="ttdeci">#define MAX_BUF_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00052">android_camera.c:52</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a79c73bac5cf110e6cdebd2d9595939d7"><div class="ttname"><a href="android__camera_8c.html#a79c73bac5cf110e6cdebd2d9595939d7">android_camera_read_packet</a></div><div class="ttdeci">static int android_camera_read_packet(AVFormatContext *avctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00825">android_camera.c:825</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_aec50f5b7707c45ad8e8d95c959451ac8"><div class="ttname"><a href="android__camera_8c.html#aec50f5b7707c45ad8e8d95c959451ac8">match_framerate</a></div><div class="ttdeci">static void match_framerate(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00286">android_camera.c:286</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a02a9ea90a051fe993622380a77885ede"><div class="ttname"><a href="android__camera_8c.html#a02a9ea90a051fe993622380a77885ede">RETURN_CASE</a></div><div class="ttdeci">#define RETURN_CASE(x)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00056">android_camera.c:56</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a565429fea0cda7185472f0af1fd6cead"><div class="ttname"><a href="android__camera_8c.html#a565429fea0cda7185472f0af1fd6cead">get_image_format</a></div><div class="ttdeci">static int get_image_format(AVFormatContext *avctx, AImage *image)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00337">android_camera.c:337</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a9350f08e589544114cc7898df331b907"><div class="ttname"><a href="android__camera_8c.html#a9350f08e589544114cc7898df331b907">get_sensor_orientation</a></div><div class="ttdeci">static void get_sensor_orientation(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00226">android_camera.c:226</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a33402231991a928a17764ab91dcf31e5"><div class="ttname"><a href="struct_android_camera_ctx.html#a33402231991a928a17764ab91dcf31e5">AndroidCameraCtx::exit</a></div><div class="ttdeci">atomic_int exit</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00091">android_camera.c:91</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_aa68cd1ba2a710d313042579578d3085f"><div class="ttname"><a href="struct_android_camera_ctx.html#aa68cd1ba2a710d313042579578d3085f">AndroidCameraCtx::camera_dev</a></div><div class="ttdeci">ACameraDevice * camera_dev</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00078">android_camera.c:78</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a078f280b98b49a9f585c5d479b711d9a"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a078f280b98b49a9f585c5d479b711d9a">AV_OPT_TYPE_IMAGE_SIZE</a></div><div class="ttdeci">@ AV_OPT_TYPE_IMAGE_SIZE</div><div class="ttdoc">offset must point to two consecutive integers</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00235">opt.h:235</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga791fcd0dba1d19fe0c3677509344328e"><div class="ttname"><a href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a></div><div class="ttdeci">const char * av_default_item_name(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00235">log.c:235</a></div></div>
<div class="ttc" id="aparseutils_8h_html"><div class="ttname"><a href="parseutils_8h.html">parseutils.h</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a98bd0a4347500043483876fedb23298b"><div class="ttname"><a href="android__camera_8c.html#a98bd0a4347500043483876fedb23298b">open_camera</a></div><div class="ttdeci">static int open_camera(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00176">android_camera.c:176</a></div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div></div>
<div class="ttc" id="alog_8h_html_aeb1c06cc3e47a029ca6afeac782ac8f9a73fb8c6b471b22685e8d2836f25ca6c7"><div class="ttname"><a href="log_8h.html#aeb1c06cc3e47a029ca6afeac782ac8f9a73fb8c6b471b22685e8d2836f25ca6c7">AV_CLASS_CATEGORY_DEVICE_VIDEO_INPUT</a></div><div class="ttdeci">@ AV_CLASS_CATEGORY_DEVICE_VIDEO_INPUT</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00042">log.h:42</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_afbd4ad8cb619757070beed2a43b06918"><div class="ttname"><a href="android__camera_8c.html#afbd4ad8cb619757070beed2a43b06918">camera_status_string</a></div><div class="ttdeci">static const char * camera_status_string(camera_status_t val)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00095">android_camera.c:95</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a1c0332803e77a81b02f366151376f1d8"><div class="ttname"><a href="struct_android_camera_ctx.html#a1c0332803e77a81b02f366151376f1d8">AndroidCameraCtx::image_format</a></div><div class="ttdeci">int image_format</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00073">android_camera.c:73</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a946e1e9b89eeeae4cab8a833b482c1ad"><div class="ttname"><a href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">AVStream::avg_frame_rate</a></div><div class="ttdeci">AVRational avg_frame_rate</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00942">avformat.h:942</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a1ec57ee84f19cf65d00eaa4d2a2253ce"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">AVCodecParameters::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00127">codec_par.h:127</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="athreadmessage_8h_html"><div class="ttname"><a href="threadmessage_8h.html">threadmessage.h</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_ae74db7a6a8c47d54563cdc26812721e0"><div class="ttname"><a href="struct_android_camera_ctx.html#ae74db7a6a8c47d54563cdc26812721e0">AndroidCameraCtx::input_queue</a></div><div class="ttdeci">AVThreadMessageQueue * input_queue</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00090">android_camera.c:90</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gac4f6e109c242c81aeee21868d3f35e12"><div class="ttname"><a href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a></div><div class="ttdeci">#define av_err2str(errnum)</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00119">error.h:119</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_aab5542950d6beb910dc9237aac99989e"><div class="ttname"><a href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a></div><div class="ttdeci">void avpriv_set_pts_info(AVStream *s, int pts_wrap_bits, unsigned int pts_num, unsigned int pts_den)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04871">utils.c:4871</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a6873ed62f196c24e8bf282609231786f"><div class="ttname"><a href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">AVStream::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00876">avformat.h:876</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a69c0ea49ea15c3c565b58cf23913038c"><div class="ttname"><a href="struct_android_camera_ctx.html#a69c0ea49ea15c3c565b58cf23913038c">AndroidCameraCtx::input_queue_size</a></div><div class="ttdeci">int input_queue_size</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00066">android_camera.c:66</a></div></div>
<div class="ttc" id="aavformat_8h_html_a752cce390d480521919aa5d8be24ac0b"><div class="ttname"><a href="avformat_8h.html#a752cce390d480521919aa5d8be24ac0b">AVFMT_NOFILE</a></div><div class="ttdeci">#define AVFMT_NOFILE</div><div class="ttdoc">Demuxer will use avio_open, no opened file should be provided by the caller.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00458">avformat.h:458</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a7575968db29933e4eec236a3be6c555e"><div class="ttname"><a href="android__camera_8c.html#a7575968db29933e4eec236a3be6c555e">VIDEO_TIMEBASE_ANDROID</a></div><div class="ttdeci">#define VIDEO_TIMEBASE_ANDROID</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00054">android_camera.c:54</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a73e86a659c31127465c5a3076fe17118"><div class="ttname"><a href="android__camera_8c.html#a73e86a659c31127465c5a3076fe17118">media_status_string</a></div><div class="ttdeci">static const char * media_status_string(media_status_t val)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00117">android_camera.c:117</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="agroup__lavu__picture_html_ga24a67963c3ae0054a2a4bab35930e694"><div class="ttname"><a href="group__lavu__picture.html#ga24a67963c3ae0054a2a4bab35930e694">av_image_get_buffer_size</a></div><div class="ttdeci">int av_image_get_buffer_size(enum AVPixelFormat pix_fmt, int width, int height, int align)</div><div class="ttdef"><b>Definition:</b> <a href="imgutils_8c_source.html#l00466">imgutils.c:466</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a603a52b53ae7d9611fb3ddcdf800a6b7"><div class="ttname"><a href="android__camera_8c.html#a603a52b53ae7d9611fb3ddcdf800a6b7">camera_dev_error</a></div><div class="ttdeci">static void camera_dev_error(void *context, ACameraDevice *device, int error)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00167">android_camera.c:167</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_abcd60c4c65b72fc89b682ac0072735ae"><div class="ttname"><a href="struct_android_camera_ctx.html#abcd60c4c65b72fc89b682ac0072735ae">AndroidCameraCtx::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00071">android_camera.c:71</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga9c520e483ba8648495620ffdb4c491f2"><div class="ttname"><a href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a></div><div class="ttdeci">#define AVERROR_EXTERNAL</div><div class="ttdoc">Generic error in an external library.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00057">error.h:57</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_ae85c352da95abc196469af6a6acf272f"><div class="ttname"><a href="struct_android_camera_ctx.html#ae85c352da95abc196469af6a6acf272f">AndroidCameraCtx::sensor_orientation</a></div><div class="ttdeci">int32_t sensor_orientation</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00069">android_camera.c:69</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="android__camera_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00844">android_camera.c:844</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a914f89e1c42d605b074ac8fb597224e4"><div class="ttname"><a href="android__camera_8c.html#a914f89e1c42d605b074ac8fb597224e4">AndroidCameraCtx</a></div><div class="ttdeci">struct AndroidCameraCtx AndroidCameraCtx</div></div>
<div class="ttc" id="afilter__design_8txt_html_a877535c3b6ffdf230bce90c82c597d17"><div class="ttname"><a href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a></div><div class="ttdeci">and forward the test the status of outputs and forward it to the corresponding return FFERROR_NOT_READY If the filters stores internally one or a few frame for some input</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00172">filter_design.txt:172</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a0ca51c87d2b0cf87e794f7ccbd232e97"><div class="ttname"><a href="struct_android_camera_ctx.html#a0ca51c87d2b0cf87e794f7ccbd232e97">AndroidCameraCtx::camera_state_callbacks</a></div><div class="ttdeci">ACameraDevice_StateCallbacks camera_state_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00079">android_camera.c:79</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a1734b65da48a88e7c78e8a29b1eee139"><div class="ttname"><a href="threadmessage_8c.html#a1734b65da48a88e7c78e8a29b1eee139">av_thread_message_queue_alloc</a></div><div class="ttdeci">int av_thread_message_queue_alloc(AVThreadMessageQueue **mq, unsigned nelem, unsigned elsize)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00040">threadmessage.c:40</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a60f02f366843fde932c6aea2407a81c1"><div class="ttname"><a href="android__camera_8c.html#a60f02f366843fde932c6aea2407a81c1">IMAGE_FORMAT_ANDROID</a></div><div class="ttdeci">#define IMAGE_FORMAT_ANDROID</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00050">android_camera.c:50</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="alog_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="adisplay_8h_html"><div class="ttname"><a href="display_8h.html">display.h</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a01981ed85e713e682912ee6e063403ad"><div class="ttname"><a href="threadmessage_8c.html#a01981ed85e713e682912ee6e063403ad">av_thread_message_queue_set_err_send</a></div><div class="ttdeci">void av_thread_message_queue_set_err_send(AVThreadMessageQueue *mq, int err)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00188">threadmessage.c:188</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_aeac465da41a92d7a6be7c4abe977b148"><div class="ttname"><a href="android__camera_8c.html#aeac465da41a92d7a6be7c4abe977b148">android_camera_class</a></div><div class="ttdeci">static const AVClass android_camera_class</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00854">android_camera.c:854</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1cf3f762c0feb0bbd9f82e4e18fe2280"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1cf3f762c0feb0bbd9f82e4e18fe2280">AV_PIX_FMT_NV21</a></div><div class="ttdeci">@ AV_PIX_FMT_NV21</div><div class="ttdoc">as above, but U and V bytes are swapped</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00090">pixfmt.h:90</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_afaf7b5d63bf8d0c3d8c93891e432d0c5"><div class="ttname"><a href="android__camera_8c.html#afaf7b5d63bf8d0c3d8c93891e432d0c5">add_display_matrix</a></div><div class="ttdeci">static int add_display_matrix(AVFormatContext *avctx, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00640">android_camera.c:640</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a08cdda22e092a2c6835822b536884f60"><div class="ttname"><a href="android__camera_8c.html#a08cdda22e092a2c6835822b536884f60">ff_android_camera_demuxer</a></div><div class="ttdeci">AVInputFormat ff_android_camera_demuxer</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00862">android_camera.c:862</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html"><div class="ttname"><a href="struct_a_v_codec_parameters.html">AVCodecParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00052">codec_par.h:52</a></div></div>
<div class="ttc" id="aavformat_8h_html_a4fd189c4f2464afad342133be7bf6aeb"><div class="ttname"><a href="avformat_8h.html#a4fd189c4f2464afad342133be7bf6aeb">AVFMT_FLAG_NONBLOCK</a></div><div class="ttdeci">#define AVFMT_FLAG_NONBLOCK</div><div class="ttdoc">Do not block when reading packets from input.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01357">avformat.h:1357</a></div></div>
<div class="ttc" id="alibswscale_2version_8h_html"><div class="ttname"><a href="libswscale_2version_8h.html">version.h</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="aavio__reading_8c_html_a3a86bff38e7cb9093d0a32316b73b29c"><div class="ttname"><a href="avio__reading_8c.html#a3a86bff38e7cb9093d0a32316b73b29c">read_packet</a></div><div class="ttdeci">static int read_packet(void *opaque, uint8_t *buf, int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="avio__reading_8c_source.html#l00042">avio_reading.c:42</a></div></div>
<div class="ttc" id="apixfmt_8h_html"><div class="ttname"><a href="pixfmt_8h.html">pixfmt.h</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a></div><div class="ttdeci">@ AV_PIX_FMT_NV12</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, 1 plane for Y and 1 plane for the UV components, which are interleaved (firs...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00089">pixfmt.h:89</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="aavformat_8h_html"><div class="ttname"><a href="avformat_8h.html">avformat.h</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_aec01576479f22b8bbd38ce09f0f4901b"><div class="ttname"><a href="struct_android_camera_ctx.html#aec01576479f22b8bbd38ce09f0f4901b">AndroidCameraCtx::capture_request</a></div><div class="ttdeci">ACaptureRequest * capture_request</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00086">android_camera.c:86</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_af75916095c5e11bda1cf2b6333923970"><div class="ttname"><a href="android__camera_8c.html#af75916095c5e11bda1cf2b6333923970">match_video_size</a></div><div class="ttdeci">static void match_video_size(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00241">android_camera.c:241</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a19de03754e15a467fc92a354286f15d0"><div class="ttname"><a href="android__camera_8c.html#a19de03754e15a467fc92a354286f15d0">capture_session_active</a></div><div class="ttdeci">static void capture_session_active(void *context, ACameraCaptureSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00533">android_camera.c:533</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a2bb95ea7149cc7b7dc81cf5328a6c0f1"><div class="ttname"><a href="struct_android_camera_ctx.html#a2bb95ea7149cc7b7dc81cf5328a6c0f1">AndroidCameraCtx::capture_session_state_callbacks</a></div><div class="ttdeci">ACameraCaptureSession_stateCallbacks capture_session_state_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00087">android_camera.c:87</a></div></div>
<div class="ttc" id="astruct_a_v_input_format_html_a850db3eb225e22b64f3304d72134ca0c"><div class="ttname"><a href="struct_a_v_input_format.html#a850db3eb225e22b64f3304d72134ca0c">AVInputFormat::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00643">avformat.h:643</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_aa039398dbe5beb4073706223423678a6"><div class="ttname"><a href="struct_android_camera_ctx.html#aa039398dbe5beb4073706223423678a6">AndroidCameraCtx::framerate_range</a></div><div class="ttdeci">int32_t framerate_range[2]</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00072">android_camera.c:72</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1d0f65014a8d1bf78cec8cbed2304992"><div class="ttname"><a href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">AVFrame::data</a></div><div class="ttdeci">uint8_t * data[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00322">frame.h:322</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a></div><div class="ttdeci">@ AV_OPT_TYPE_INT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00225">opt.h:225</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_aaab0bc470065401d87b4df2df2ce75f9"><div class="ttname"><a href="android__camera_8c.html#aaab0bc470065401d87b4df2df2ce75f9">wait_for_image_format</a></div><div class="ttdeci">static int wait_for_image_format(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00628">android_camera.c:628</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html"><div class="ttname"><a href="struct_a_v_format_context.html">AVFormatContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01223">avformat.h:1223</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_adcca014a26a4d23bdf69d3aa8635dcad"><div class="ttname"><a href="struct_android_camera_ctx.html#adcca014a26a4d23bdf69d3aa8635dcad">AndroidCameraCtx::camera_id</a></div><div class="ttdeci">char * camera_id</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00076">android_camera.c:76</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a23502b02dcab5161818c3d229c7fb474"><div class="ttname"><a href="android__camera_8c.html#a23502b02dcab5161818c3d229c7fb474">RETURN_DEFAULT</a></div><div class="ttdeci">#define RETURN_DEFAULT(x)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00057">android_camera.c:57</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_ae5c70b399002fcc93c96e67da432d23c"><div class="ttname"><a href="android__camera_8c.html#ae5c70b399002fcc93c96e67da432d23c">create_capture_session</a></div><div class="ttdeci">static int create_capture_session(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00538">android_camera.c:538</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga7c352f4cff02184f005323691375fea9"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga7c352f4cff02184f005323691375fea9">av_strdup</a></div><div class="ttdeci">char * av_strdup(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00253">mem.c:253</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html"><div class="ttname"><a href="struct_a_v_stream.html">AVStream</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00869">avformat.h:869</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_a5ab24148a7e8bf750f2aab080f92dde6"><div class="ttname"><a href="struct_android_camera_ctx.html#a5ab24148a7e8bf750f2aab080f92dde6">AndroidCameraCtx::capture_session</a></div><div class="ttdeci">ACameraCaptureSession * capture_session</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00088">android_camera.c:88</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a58369c3a8a986935b572df5aa6361ce2"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">AVCodecParameters::codec_type</a></div><div class="ttdeci">enum AVMediaType codec_type</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:56</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ga6f8576f1ef0c2d9a9f7c5ac7f9a28c52"><div class="ttname"><a href="group__lavu__picture.html#ga6f8576f1ef0c2d9a9f7c5ac7f9a28c52">av_image_copy_to_buffer</a></div><div class="ttdeci">int av_image_copy_to_buffer(uint8_t *dst, int dst_size, const uint8_t *const src_data[4], const int src_linesize[4], enum AVPixelFormat pix_fmt, int width, int height, int align)</div><div class="ttdef"><b>Definition:</b> <a href="imgutils_8c_source.html#l00505">imgutils.c:505</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_ad288cdfebea01129e31d6e907aabecf2"><div class="ttname"><a href="struct_android_camera_ctx.html#ad288cdfebea01129e31d6e907aabecf2">AndroidCameraCtx::camera_metadata</a></div><div class="ttdeci">ACameraMetadata * camera_metadata</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00077">android_camera.c:77</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a95727669f1ebba16a6a49ea8b9f2276e"><div class="ttname"><a href="threadmessage_8c.html#a95727669f1ebba16a6a49ea8b9f2276e">av_thread_message_queue_free</a></div><div class="ttdeci">void av_thread_message_queue_free(AVThreadMessageQueue **mq)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00091">threadmessage.c:91</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_ae23838a8b2755597f522c654713d989e"><div class="ttname"><a href="struct_android_camera_ctx.html#ae23838a8b2755597f522c654713d989e">AndroidCameraCtx::requested_height</a></div><div class="ttdeci">int requested_height</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00063">android_camera.c:63</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_aec7adc65e8d0851b0f48a8f4f59a75cc"><div class="ttname"><a href="struct_android_camera_ctx.html#aec7adc65e8d0851b0f48a8f4f59a75cc">AndroidCameraCtx::capture_session_output_container</a></div><div class="ttdeci">ACaptureSessionOutputContainer * capture_session_output_container</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00083">android_camera.c:83</a></div></div>
<div class="ttc" id="aimgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a6b2b6c47728e7d442b31a49ca8f9f971"><div class="ttname"><a href="threadmessage_8c.html#a6b2b6c47728e7d442b31a49ca8f9f971">av_thread_message_queue_set_err_recv</a></div><div class="ttdeci">void av_thread_message_queue_set_err_recv(AVThreadMessageQueue *mq, int err)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00199">threadmessage.c:199</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="aavstring_8h_html"><div class="ttname"><a href="avstring_8h.html">avstring.h</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_af8a9cbe9495fcafaa892b24b383acf96"><div class="ttname"><a href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a></div><div class="ttdeci">#define atomic_init(obj, value)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00033">stdatomic.h:33</a></div></div>
<div class="ttc" id="aandroid__camera_8c_html_a876abcebca3cb67b42e2058040b444f7"><div class="ttname"><a href="android__camera_8c.html#a876abcebca3cb67b42e2058040b444f7">create_image_reader</a></div><div class="ttdeci">static int create_image_reader(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00488">android_camera.c:488</a></div></div>
<div class="ttc" id="astruct_android_camera_ctx_html_abe8fa730f5d71518e0fd9d54695a8674"><div class="ttname"><a href="struct_android_camera_ctx.html#abe8fa730f5d71518e0fd9d54695a8674">AndroidCameraCtx::camera_index</a></div><div class="ttdeci">int camera_index</div><div class="ttdef"><b>Definition:</b> <a href="android__camera_8c_source.html#l00065">android_camera.c:65</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_ad63fb11cc1415e278e09ddc676e8a1ad"><div class="ttname"><a href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">AVStream::r_frame_rate</a></div><div class="ttdeci">AVRational r_frame_rate</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01011">avformat.h:1011</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_ad2e88d75f808e6d4e78d48bceb10c336"><div class="ttname"><a href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a></div><div class="ttdeci">float min</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00456">vorbis_enc_data.h:456</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
