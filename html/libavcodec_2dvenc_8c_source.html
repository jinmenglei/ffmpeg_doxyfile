<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/dvenc.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">dvenc.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="libavcodec_2dvenc_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * DV encoder</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2003 Roman Shaposhnik</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * quant_deadzone code and fixes sponsored by NOA GmbH</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;config.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="attributes_8h.html">libavutil/attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">libavutil/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixdesc_8h.html">libavutil/pixdesc.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavformat_2dv_8h.html">dv.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dv__profile__internal_8h.html">dv_profile_internal.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dv__tablegen_8h.html">dv_tablegen.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fdctdsp_8h.html">fdctdsp.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="x86_2mathops_8h.html">mathops.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="me__cmp_8h.html">me_cmp.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixblockdsp_8h.html">pixblockdsp.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="put__bits_8h.html">put_bits.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a0ded9f1865d6d64461decc9a98904ac5">   47</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a0ded9f1865d6d64461decc9a98904ac5">dvvideo_encode_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="struct_d_v_video_context.html">DVVideoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="struct_f_d_c_t_d_s_p_context.html">FDCTDSPContext</a> fdsp;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="struct_m_e_cmp_context.html">MECmpContext</a> mecc;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="struct_pixblock_d_s_p_context.html">PixblockDSPContext</a> pdsp;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys = <a class="code" href="dv__profile_8c.html#a6e6b2532a302003fcd0c35694867eb32">av_dv_codec_profile2</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Found no DV profile for %ix%i %s video. &quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                    <span class="stringliteral">&quot;Valid DV profiles are:\n&quot;</span>,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;               avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>, <a class="code" href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>));</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <a class="code" href="dv__profile__internal_8h.html#abcd2e4d394c8b29f2c08c340fa1f5642">ff_dv_print_profiles</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavcodec_2dv_8c.html#aee161fe3f2fa7b1b1db3664258269db4">ff_dv_init_dynamic_tables</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error initializing work tables.\n&quot;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="dv__tablegen_8h.html#a3b8fea17437b1d7b62bee307b653ee84">dv_vlc_map_tableinit</a>();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    memset(&amp;fdsp,0, <span class="keyword">sizeof</span>(fdsp));</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    memset(&amp;mecc,0, <span class="keyword">sizeof</span>(mecc));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    memset(&amp;pdsp,0, <span class="keyword">sizeof</span>(pdsp));</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="fdctdsp_8c.html#aba553d5c07fce211c12e4a09bc3227a7">ff_fdctdsp_init</a>(&amp;fdsp, avctx);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="me__cmp_8c.html#acb0172ad172925a055b234b39fc5f3dd">ff_me_cmp_init</a>(&amp;mecc, avctx);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="libavcodec_2pixblockdsp_8c.html#ae29c4c41d977bf6ffea877b2aaf721f5">ff_pixblockdsp_init</a>(&amp;pdsp, avctx);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="me__cmp_8c.html#a75513e6a622cdbbe65d692568d21b81e">ff_set_cmp</a>(&amp;mecc, mecc.<a class="code" href="struct_m_e_cmp_context.html#a1fade4a82fa292d0a6fe60cb443bac33">ildct_cmp</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa136d238dbf5ea7085f6117b59e5d5eb">ildct_cmp</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;get_pixels = pdsp.<a class="code" href="struct_pixblock_d_s_p_context.html#ade9a9ef4921d92aaaab1a54eda4f3ebe">get_pixels</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ildct_cmp  = mecc.<a class="code" href="struct_m_e_cmp_context.html#a1fade4a82fa292d0a6fe60cb443bac33">ildct_cmp</a>[5];</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fdct[0]    = fdsp.<a class="code" href="struct_f_d_c_t_d_s_p_context.html#afe2b33f970b25d529dbf12a7786d5f1d">fdct</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fdct[1]    = fdsp.<a class="code" href="struct_f_d_c_t_d_s_p_context.html#ab4006913f1419aad92d1b8c060e32dda">fdct248</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libavcodec_2dv_8c.html#a478afb9214a1d4bd4a372d25a18d227b">ff_dvvideo_init</a>(avctx);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/* bit budget for AC only in 5 MBs */</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a60034772c02f96f596937bf6f61bc2b9">   90</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a60034772c02f96f596937bf6f61bc2b9">vs_total_ac_bits_hd</a> = (68 * 6 + 52*2) * 5;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a5ad0bf8a0e3ff2fd9298c1d8a466a0c7">   91</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a5ad0bf8a0e3ff2fd9298c1d8a466a0c7">vs_total_ac_bits</a> = (100 * 4 + 68 * 2) * 5;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">   92</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">mb_area_start</a>[5] = { 1, 6, 21, 43, 64 };</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#if CONFIG_SMALL</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">/* Convert run and level (where level != 0) pair into VLC, returning bit size */</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ac1a189bf3900a1c9cb6245eed21221f9">dv_rl2vlc</a>(<span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, <span class="keywordtype">int</span> sign,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                      uint32_t *vlc)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> &lt; <a class="code" href="dv__tablegen_8h.html#aa2487abed3ab4f0b0e8b8d20f0712d8e">DV_VLC_MAP_RUN_SIZE</a> &amp;&amp; <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; <a class="code" href="dv__tablegen_8h.html#ab42d2dc0b9c919bfafea91690af32c80">DV_VLC_MAP_LEV_SIZE</a>) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        *vlc = <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>][<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>].<a class="code" href="structdv__vlc__pair.html#a751cc08510e80782d2298b913848fa49">vlc</a> | sign;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>][<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>].<a class="code" href="structdv__vlc__pair.html#a741c997dc174bc4627aa252c01c00642">size</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; <a class="code" href="dv__tablegen_8h.html#ab42d2dc0b9c919bfafea91690af32c80">DV_VLC_MAP_LEV_SIZE</a>) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            *vlc = <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[0][<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>].<a class="code" href="structdv__vlc__pair.html#a751cc08510e80782d2298b913848fa49">vlc</a> | sign;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[0][<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>].<a class="code" href="structdv__vlc__pair.html#a741c997dc174bc4627aa252c01c00642">size</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            *vlc = 0xfe00 | (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt;&lt; 1) | sign;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = 16;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            *vlc |= ((<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> &lt; 16) ? <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> - 1][0].vlc :</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                     (0x1f80 | (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> - 1))) &lt;&lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> +=  (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> &lt; 16) ? <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> - 1][0].<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> : 13;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a>(<span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> &lt; <a class="code" href="dv__tablegen_8h.html#aa2487abed3ab4f0b0e8b8d20f0712d8e">DV_VLC_MAP_RUN_SIZE</a> &amp;&amp; <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; <a class="code" href="dv__tablegen_8h.html#ab42d2dc0b9c919bfafea91690af32c80">DV_VLC_MAP_LEV_SIZE</a>) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>][<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>].<a class="code" href="structdv__vlc__pair.html#a741c997dc174bc4627aa252c01c00642">size</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; <a class="code" href="dv__tablegen_8h.html#ab42d2dc0b9c919bfafea91690af32c80">DV_VLC_MAP_LEV_SIZE</a>) ? <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[0][<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>].<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> : 16;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> += (<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> &lt; 16) ? <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a> - 1][0].<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> : 13;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ac1a189bf3900a1c9cb6245eed21221f9">  135</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ac1a189bf3900a1c9cb6245eed21221f9">dv_rl2vlc</a>(<span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, <span class="keywordtype">int</span> l, <span class="keywordtype">int</span> sign, uint32_t *vlc)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    *vlc = <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>][l].<a class="code" href="structdv__vlc__pair.html#a751cc08510e80782d2298b913848fa49">vlc</a> | sign;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>][l].<a class="code" href="structdv__vlc__pair.html#a741c997dc174bc4627aa252c01c00642">size</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">  141</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a>(<span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>, <span class="keywordtype">int</span> l)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a>[<a class="code" href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a>][l].<a class="code" href="structdv__vlc__pair.html#a741c997dc174bc4627aa252c01c00642">size</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html">  147</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> {</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#a763131c397550b34ba16a9a577d8bf36">  148</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_enc_block_info.html#a763131c397550b34ba16a9a577d8bf36">area_q</a>[4];</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">  149</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[4];</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#a016e68225ea973ef9cffb0b1d1dd19f2">  150</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_enc_block_info.html#a016e68225ea973ef9cffb0b1d1dd19f2">prev</a>[5];</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">  151</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">cur_ac</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">  152</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">cno</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">  153</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">  154</a></span>&#160;    int16_t  <a class="code" href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">mb</a>[64];</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">  155</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">next</a>[64];</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#aeaab6744a53c3f9a640eda4522c5dc87">  156</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="struct_enc_block_info.html#aeaab6744a53c3f9a640eda4522c5dc87">sign</a>[64];</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#a9d8db9c50f4ee9c703aecea6628ab070">  157</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>  <a class="code" href="struct_enc_block_info.html#a9d8db9c50f4ee9c703aecea6628ab070">partial_bit_count</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#a916333174b2c8b10f38430c034285968">  158</a></span>&#160;    uint32_t <a class="code" href="struct_enc_block_info.html#a916333174b2c8b10f38430c034285968">partial_bit_buffer</a>; <span class="comment">/* we can&#39;t use uint16_t here */</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">/* used by DV100 only: a copy of the weighted and classified but</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">       not-yet-quantized AC coefficients. This is necessary for</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">       re-quantizing at different steps. */</span></div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#a4266bf4cdcf51bf5e42c6b7aa9992df6">  162</a></span>&#160;    int16_t  <a class="code" href="struct_enc_block_info.html#a4266bf4cdcf51bf5e42c6b7aa9992df6">save</a>[64];</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="struct_enc_block_info.html#aa2fa1aeef3f0ce954460e69faee23754">  163</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_enc_block_info.html#aa2fa1aeef3f0ce954460e69faee23754">min_qlevel</a>; <span class="comment">/* DV100 only: minimum qlevel (for AC coefficients &gt;255) */</span></div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a3493d6e064beb36b6546c904a3260fa8">  164</a></span>&#160;} <a class="code" href="libavcodec_2dvenc_8c.html#a3493d6e064beb36b6546c904a3260fa8">EncBlockInfo</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a38c2be434666790f30b99c3b075c52cb">  166</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *<a class="code" href="libavcodec_2dvenc_8c.html#a38c2be434666790f30b99c3b075c52cb">dv_encode_ac</a>(<a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *bi,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                                    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb_pool,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                                    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb_end)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordtype">int</span> prev, bits_left;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb = pb_pool;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>          = bi-&gt;<a class="code" href="struct_enc_block_info.html#a9d8db9c50f4ee9c703aecea6628ab070">partial_bit_count</a>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    uint32_t vlc      = bi-&gt;<a class="code" href="struct_enc_block_info.html#a916333174b2c8b10f38430c034285968">partial_bit_buffer</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a9d8db9c50f4ee9c703aecea6628ab070">partial_bit_count</a>  =</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a916333174b2c8b10f38430c034285968">partial_bit_buffer</a> = 0;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">/* Find suitable storage space */</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">for</span> (; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; (bits_left = <a class="code" href="put__bits_8h.html#a62f48d1d285b3bf9865bd448a84d36b9">put_bits_left</a>(pb)); pb++) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">if</span> (bits_left) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> -= bits_left;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, bits_left, vlc &gt;&gt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                vlc = av_mod_uintp2(vlc, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">if</span> (pb + 1 &gt;= pb_end) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                bi-&gt;<a class="code" href="struct_enc_block_info.html#a9d8db9c50f4ee9c703aecea6628ab070">partial_bit_count</a>  = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                bi-&gt;<a class="code" href="struct_enc_block_info.html#a916333174b2c8b10f38430c034285968">partial_bit_buffer</a> = vlc;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="keywordflow">return</span> pb;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">/* Store VLC */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, vlc);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (bi-&gt;<a class="code" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">cur_ac</a> &gt;= 64)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">/* Construct the next VLC */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        prev       = bi-&gt;<a class="code" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">cur_ac</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">cur_ac</a> = bi-&gt;<a class="code" href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">next</a>[prev];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span> (bi-&gt;<a class="code" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">cur_ac</a> &lt; 64) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="libavcodec_2dvenc_8c.html#ac1a189bf3900a1c9cb6245eed21221f9">dv_rl2vlc</a>(bi-&gt;<a class="code" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">cur_ac</a> - prev - 1, bi-&gt;<a class="code" href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">mb</a>[bi-&gt;<a class="code" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">cur_ac</a>],</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                             bi-&gt;<a class="code" href="struct_enc_block_info.html#aeaab6744a53c3f9a640eda4522c5dc87">sign</a>[bi-&gt;<a class="code" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">cur_ac</a>], &amp;vlc);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = 4;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            vlc  = 6; <span class="comment">/* End Of Block stamp */</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">return</span> pb;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ac85d77b12d4b9f2cae60059320f21682">  212</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ac85d77b12d4b9f2cae60059320f21682">dv_guess_dct_mode</a>(<a class="code" href="struct_d_v_video_context.html">DVVideoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                              ptrdiff_t linesize)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;{</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga502225f65e2092fbc45945247892cb0f">AV_CODEC_FLAG_INTERLACED_DCT</a>) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordtype">int</span> ps = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ildct_cmp(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, linesize, 8) - 400;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">if</span> (ps &gt; 0) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ildct_cmp(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>,            <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, linesize * 2, 4) +</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ildct_cmp(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> + linesize, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, linesize * 2, 4);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">return</span> ps &gt; <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#af4b161f909030ddd66b686c3ace2a225">  227</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#af4b161f909030ddd66b686c3ace2a225">dv_weight_bits</a> = 18;</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#aabda450b7f15368fb9efaf8007d35304">  228</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#aabda450b7f15368fb9efaf8007d35304">dv_weight_88</a>[64] = {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    131072, 257107, 257107, 242189, 252167, 242189, 235923, 237536,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    237536, 235923, 229376, 231390, 223754, 231390, 229376, 222935,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    224969, 217965, 217965, 224969, 222935, 200636, 218652, 211916,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    212325, 211916, 218652, 200636, 188995, 196781, 205965, 206433,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    206433, 205965, 196781, 188995, 185364, 185364, 200636, 200704,</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    200636, 185364, 185364, 174609, 180568, 195068, 195068, 180568,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    174609, 170091, 175557, 189591, 175557, 170091, 165371, 170627,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    170627, 165371, 160727, 153560, 160727, 144651, 144651, 136258,</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;};</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a938dc6649cf22e7136c3837a0b66060b">  238</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a938dc6649cf22e7136c3837a0b66060b">dv_weight_248</a>[64] = {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    131072, 262144, 257107, 257107, 242189, 242189, 242189, 242189,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    237536, 237536, 229376, 229376, 200636, 200636, 224973, 224973,</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    223754, 223754, 235923, 235923, 229376, 229376, 217965, 217965,</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    211916, 211916, 196781, 196781, 185364, 185364, 206433, 206433,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    211916, 211916, 222935, 222935, 200636, 200636, 205964, 205964,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    200704, 200704, 180568, 180568, 175557, 175557, 195068, 195068,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    185364, 185364, 188995, 188995, 174606, 174606, 175557, 175557,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    170627, 170627, 153560, 153560, 165371, 165371, 144651, 144651,</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;};</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/* setting this to 1 results in a faster codec but</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"> * somewhat lower image quality */</span></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#adc772b7a7fbea7dff4840316415eb177">  251</a></span>&#160;<span class="preprocessor">#define DV100_SACRIFICE_QUALITY_FOR_SPEED 1</span></div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a029afa6c1d720b8492a81dc5c9b345a2">  252</a></span>&#160;<span class="preprocessor">#define DV100_ENABLE_FINER 1</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">/* pack combination of QNO and CNO into a single 8-bit value */</span></div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">  255</a></span>&#160;<span class="preprocessor">#define DV100_MAKE_QLEVEL(qno,cno) ((qno&lt;&lt;2) | (cno))</span></div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#aea3562d6dfe21ec697908c681194496b">  256</a></span>&#160;<span class="preprocessor">#define DV100_QLEVEL_QNO(qlevel) (qlevel&gt;&gt;2)</span></div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a8629c12a88c271bbfb03cd648a2adb47">  257</a></span>&#160;<span class="preprocessor">#define DV100_QLEVEL_CNO(qlevel) (qlevel&amp;0x3)</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a873c7016ca78a73007d0db04b5f7e53f">  259</a></span>&#160;<span class="preprocessor">#define DV100_NUM_QLEVELS 31</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">/* The quantization step is determined by a combination of QNO and</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">   CNO. We refer to these combinations as &quot;qlevels&quot; (this term is our</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">   own, it&#39;s not mentioned in the spec). We use CNO, a multiplier on</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">   the quantization step, to &quot;fill in the gaps&quot; between quantization</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">   steps associated with successive values of QNO. e.g. there is no</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">   QNO for a quantization step of 10, but we can use QNO=5 CNO=1 to</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">   get the same result. The table below encodes combinations of QNO</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">   and CNO in order of increasing quantization coarseness. */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a719180e384d6ebbfc2e21bdac490f525">  269</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="libavcodec_2dvenc_8c.html#a719180e384d6ebbfc2e21bdac490f525">dv100_qlevels</a>[<a class="code" href="libavcodec_2dvenc_8c.html#a873c7016ca78a73007d0db04b5f7e53f">DV100_NUM_QLEVELS</a>] = {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 1,0), <span class="comment">//  1*1= 1</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 1,0), <span class="comment">//  1*1= 1</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 2,0), <span class="comment">//  2*1= 2</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 3,0), <span class="comment">//  3*1= 3</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 4,0), <span class="comment">//  4*1= 4</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 5,0), <span class="comment">//  5*1= 5</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 6,0), <span class="comment">//  6*1= 6</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 7,0), <span class="comment">//  7*1= 7</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 8,0), <span class="comment">//  8*1= 8</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 5,1), <span class="comment">//  5*2=10</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 6,1), <span class="comment">//  6*2=12</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 7,1), <span class="comment">//  7*2=14</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 9,0), <span class="comment">// 16*1=16</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(10,0), <span class="comment">// 18*1=18</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(11,0), <span class="comment">// 20*1=20</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(12,0), <span class="comment">// 22*1=22</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(13,0), <span class="comment">// 24*1=24</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(14,0), <span class="comment">// 28*1=28</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 9,1), <span class="comment">// 16*2=32</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(10,1), <span class="comment">// 18*2=36</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(11,1), <span class="comment">// 20*2=40</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(12,1), <span class="comment">// 22*2=44</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(13,1), <span class="comment">// 24*2=48</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(15,0), <span class="comment">// 52*1=52</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(14,1), <span class="comment">// 28*2=56</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>( 9,2), <span class="comment">// 16*4=64</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(10,2), <span class="comment">// 18*4=72</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(11,2), <span class="comment">// 20*4=80</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(12,2), <span class="comment">// 22*4=88</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(13,2), <span class="comment">// 24*4=96</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// ...</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a>(15,3), <span class="comment">// 52*8=416</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;};</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a91dbc328fb5c5fb509ae0cccd9568bab">  304</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a91dbc328fb5c5fb509ae0cccd9568bab">dv100_min_bias</a> = 0;</div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a60ef505f3f0dfa488ed7fb95227c13a9">  305</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a60ef505f3f0dfa488ed7fb95227c13a9">dv100_chroma_bias</a> = 0;</div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a454b2b9389aaf46313ad8df13c17d015">  306</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a454b2b9389aaf46313ad8df13c17d015">dv100_starting_qno</a> = 1;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">#if DV100_SACRIFICE_QUALITY_FOR_SPEED</span></div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ac6eded4918d638c5fc8b3e6196f08fde">  309</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ac6eded4918d638c5fc8b3e6196f08fde">dv100_qlevel_inc</a> = 4;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ac6eded4918d638c5fc8b3e6196f08fde">dv100_qlevel_inc</a> = 1;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">// 1/qstep, shifted up by 16 bits</span></div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ac3d96891e7bcca1c97d1ff58cbe414c6">  315</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ac3d96891e7bcca1c97d1ff58cbe414c6">dv100_qstep_bits</a> = 16;</div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a41181d0396340efac9164dff6b5c86c3">  316</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a41181d0396340efac9164dff6b5c86c3">dv100_qstep_inv</a>[16] = {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        65536,  65536,  32768,  21845,  16384,  13107,  10923,  9362,  8192,  4096,  3641,  3277,  2979,  2731,  2341,  1260,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;};</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">/* DV100 weights are pre-zigzagged, inverted and multiplied by 2^(dv100_weight_shift)</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">   (in DV100 the AC components are divided by the spec weights) */</span></div>
<div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ab62a172132951c7c9e0f0054bfd815c7">  322</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ab62a172132951c7c9e0f0054bfd815c7">dv100_weight_shift</a> = 16;</div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ab135b2850a5c1306a852d550743fa82e">  323</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ab135b2850a5c1306a852d550743fa82e">dv_weight_1080</a>[2][64] = {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    { 8192, 65536, 65536, 61681, 61681, 61681, 58254, 58254,</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      58254, 58254, 58254, 58254, 55188, 58254, 58254, 55188,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      55188, 55188, 55188, 55188, 55188, 24966, 27594, 26214,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      26214, 26214, 27594, 24966, 23831, 24385, 25575, 25575,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      25575, 25575, 24385, 23831, 23302, 23302, 24966, 24966,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      24966, 23302, 23302, 21845, 22795, 24385, 24385, 22795,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      21845, 21400, 21845, 23831, 21845, 21400, 10382, 10700,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      10700, 10382, 10082, 9620, 10082, 9039, 9039, 8525, },</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    { 8192, 65536, 65536, 61681, 61681, 61681, 41943, 41943,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      41943, 41943, 40330, 41943, 40330, 41943, 40330, 40330,</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      40330, 38836, 38836, 40330, 40330, 24966, 27594, 26214,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      26214, 26214, 27594, 24966, 23831, 24385, 25575, 25575,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      25575, 25575, 24385, 23831, 11523, 11523, 12483, 12483,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      12483, 11523, 11523, 10923, 11275, 12193, 12193, 11275,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      10923, 5323, 5490, 5924, 5490, 5323, 5165, 5323,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      5323, 5165, 5017, 4788, 5017, 4520, 4520, 4263, }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;};</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#adb21c463226e4a6abec2c3b66ebc13df">  342</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#adb21c463226e4a6abec2c3b66ebc13df">dv_weight_720</a>[2][64] = {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    { 8192, 65536, 65536, 61681, 61681, 61681, 58254, 58254,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      58254, 58254, 58254, 58254, 55188, 58254, 58254, 55188,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      55188, 55188, 55188, 55188, 55188, 24966, 27594, 26214,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      26214, 26214, 27594, 24966, 23831, 24385, 25575, 25575,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      25575, 25575, 24385, 23831, 15420, 15420, 16644, 16644,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      16644, 15420, 15420, 10923, 11398, 12193, 12193, 11398,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      10923, 10700, 10923, 11916, 10923, 10700, 5191, 5350,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      5350, 5191, 5041, 4810, 5041, 4520, 4520, 4263, },</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    { 8192, 43691, 43691, 40330, 40330, 40330, 29127, 29127,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      29127, 29127, 29127, 29127, 27594, 29127, 29127, 27594,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      27594, 27594, 27594, 27594, 27594, 12483, 13797, 13107,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      13107, 13107, 13797, 12483, 11916, 12193, 12788, 12788,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      12788, 12788, 12193, 11916, 5761, 5761, 6242, 6242,</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      6242, 5761, 5761, 5461, 5638, 5461, 6096, 5638,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      5461, 2661, 2745, 2962, 2745, 2661, 2583, 2661,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      2661, 2583, 2509, 2394, 2509, 2260, 2260, 2131, }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;};</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a26cad9128f412460755580f6d4579ba2">  361</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a26cad9128f412460755580f6d4579ba2">dv_set_class_number_sd</a>(<a class="code" href="struct_d_v_video_context.html">DVVideoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                                   int16_t *<a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>, <a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *bi,</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *zigzag_scan,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                                   <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>, <span class="keywordtype">int</span> bias)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, area;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">/* We offer two different methods for class number assignment: the</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">     * method suggested in SMPTE 314M Table 22, and an improved</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">     * method. The SMPTE method is very conservative; it assigns class</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">     * 3 (i.e. severe quantization) to any block where the largest AC</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">     * component is greater than 36. FFmpeg&#39;s DV encoder tracks AC bit</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">     * consumption precisely, so there is no need to bias most blocks</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">     * towards strongly lossy compression. Instead, we assign class 2</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">     * to most blocks, and use class 3 only when strictly necessary</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">     * (for blocks whose largest AC component exceeds 255). */</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">/* SMPTE spec method */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> classes[] = { 12, 24, 36, 0xffff };</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* improved FFmpeg method */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> classes[] = { -1, -1, 255, 0xffff };</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>  = classes[0];</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordtype">int</span> prev = 0;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> deadzone = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quant_deadzone;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> threshold = 2 * deadzone;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">mb</a>[0] = <a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>[0];</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">for</span> (area = 0; area &lt; 4; area++) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#a016e68225ea973ef9cffb0b1d1dd19f2">prev</a>[area]     = prev;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[area] = 1; <span class="comment">// 4 areas 4 bits for EOB :)</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">mb_area_start</a>[area]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">mb_area_start</a>[area + 1]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>[zigzag_scan[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> + deadzone &gt; threshold) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                bi-&gt;<a class="code" href="struct_enc_block_info.html#aeaab6744a53c3f9a640eda4522c5dc87">sign</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &gt;&gt; 31) &amp; 1;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <span class="comment">/* Weight it and shift down into range, adding for rounding.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">                 * The extra division by a factor of 2^4 reverses the 8x</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">                 * expansion of the DCT AND the 2x doubling of the weights. */</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>     = (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) * <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + (1 &lt;&lt; (<a class="code" href="libavcodec_2dvenc_8c.html#af4b161f909030ddd66b686c3ace2a225">dv_weight_bits</a> + 3))) &gt;&gt;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                            (<a class="code" href="libavcodec_2dvenc_8c.html#af4b161f909030ddd66b686c3ace2a225">dv_weight_bits</a> + 4);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                bi-&gt;<a class="code" href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">mb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &gt; <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[area] += <a class="code" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - prev - 1, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                bi-&gt;<a class="code" href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">next</a>[prev]      = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                prev                = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">next</a>[prev] = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">for</span> (bi-&gt;<a class="code" href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">cno</a> = 0; <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> &gt; classes[bi-&gt;<a class="code" href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">cno</a>]; bi-&gt;<a class="code" href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">cno</a>++)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        ;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">cno</a> += bias;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> (bi-&gt;<a class="code" href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">cno</a> &gt;= 3) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">cno</a> = 3;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        prev    = 0;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>       = bi-&gt;<a class="code" href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">next</a>[prev];</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">for</span> (area = 0; area &lt; 4; area++) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            bi-&gt;<a class="code" href="struct_enc_block_info.html#a016e68225ea973ef9cffb0b1d1dd19f2">prev</a>[area]     = prev;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[area] = 1; <span class="comment">// 4 areas 4 bits for EOB :)</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="keywordflow">for</span> (; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">mb_area_start</a>[area + 1]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = bi-&gt;<a class="code" href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">next</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                bi-&gt;<a class="code" href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">mb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;&gt;= 1;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <span class="keywordflow">if</span> (bi-&gt;<a class="code" href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">mb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[area] += <a class="code" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - prev - 1, bi-&gt;<a class="code" href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">mb</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    bi-&gt;<a class="code" href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">next</a>[prev]      = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    prev                = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">next</a>[prev] = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[0] + bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[1] +</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;           bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[2] + bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[3];</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">/* this function just copies the DCT coefficients and performs</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">   the initial (non-)quantization. */</span></div>
<div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a539b1de14482a5af3070976425fad2f1">  445</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2dvenc_8c.html#a539b1de14482a5af3070976425fad2f1">dv_set_class_number_hd</a>(<a class="code" href="struct_d_v_video_context.html">DVVideoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                          int16_t *<a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>, <a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *bi,</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *zigzag_scan,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                                          <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>, <span class="keywordtype">int</span> bias)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;{</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = 0;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">/* the first quantization (none at all) */</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a763131c397550b34ba16a9a577d8bf36">area_q</a>[0] = 1;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">/* weigh AC components and store to save[] */</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">/* (i=0 is the DC component; we only include it to make the</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">       number of loop iterations even, for future possible SIMD optimization) */</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordtype">int</span> level0, level1;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="comment">/* get the AC component (in zig-zag order) */</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        level0 = <a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>[zigzag_scan[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+0]];</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        level1 = <a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>[zigzag_scan[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1]];</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="comment">/* extract sign and make it the lowest bit */</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#aeaab6744a53c3f9a640eda4522c5dc87">sign</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+0] = (level0&gt;&gt;31)&amp;1;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#aeaab6744a53c3f9a640eda4522c5dc87">sign</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1] = (level1&gt;&gt;31)&amp;1;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="comment">/* take absolute value of the level */</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        level0 = <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(level0);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        level1 = <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(level1);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="comment">/* weigh it */</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        level0 = (level0*<a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+0] + 4096 + (1&lt;&lt;17)) &gt;&gt; 18;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        level1 = (level1*<a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1] + 4096 + (1&lt;&lt;17)) &gt;&gt; 18;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">/* save unquantized value */</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#a4266bf4cdcf51bf5e42c6b7aa9992df6">save</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+0] = level0;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#a4266bf4cdcf51bf5e42c6b7aa9992df6">save</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1] = level1;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;         <span class="comment">/* find max component */</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">if</span> (bi-&gt;<a class="code" href="struct_enc_block_info.html#a4266bf4cdcf51bf5e42c6b7aa9992df6">save</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+0] &gt; <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = bi-&gt;<a class="code" href="struct_enc_block_info.html#a4266bf4cdcf51bf5e42c6b7aa9992df6">save</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+0];</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">if</span> (bi-&gt;<a class="code" href="struct_enc_block_info.html#a4266bf4cdcf51bf5e42c6b7aa9992df6">save</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1] &gt; <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = bi-&gt;<a class="code" href="struct_enc_block_info.html#a4266bf4cdcf51bf5e42c6b7aa9992df6">save</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1];</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">/* copy DC component */</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">mb</a>[0] = <a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>[0];</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">/* the EOB code is 4 bits */</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[0] = 4;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[1] = bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[2] = bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[3] = 0;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">/* ensure that no AC coefficients are cut off */</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#aa2fa1aeef3f0ce954460e69faee23754">min_qlevel</a> = ((<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>+256) &gt;&gt; 8);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a763131c397550b34ba16a9a577d8bf36">area_q</a>[0] = 25; <span class="comment">/* set to an &quot;impossible&quot; value */</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">cno</a> = 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">  502</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(<a class="code" href="struct_enc_block_info.html">EncBlockInfo</a>* bi, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">int</span> linesize,</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                              <a class="code" href="struct_d_v_video_context.html">DVVideoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> <a class="code" href="vf__waveform_8c.html#a155491a071a66a7795f49f3a5e079fac">chroma</a>)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;{</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#a9c40c09fa05d7001bd3171f93f233df4">LOCAL_ALIGNED_16</a>(int16_t, <a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>, [64]);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a763131c397550b34ba16a9a577d8bf36">area_q</a>[0] = bi-&gt;<a class="code" href="struct_enc_block_info.html#a763131c397550b34ba16a9a577d8bf36">area_q</a>[1] = bi-&gt;<a class="code" href="struct_enc_block_info.html#a763131c397550b34ba16a9a577d8bf36">area_q</a>[2] = bi-&gt;<a class="code" href="struct_enc_block_info.html#a763131c397550b34ba16a9a577d8bf36">area_q</a>[3] = 0;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a9d8db9c50f4ee9c703aecea6628ab070">partial_bit_count</a> = 0;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#a916333174b2c8b10f38430c034285968">partial_bit_buffer</a> = 0;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    bi-&gt;<a class="code" href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">cur_ac</a> = 0;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2dv_8h.html#aa703ed1ba5281cc867a888a500cc7c16">DV_PROFILE_IS_HD</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys)) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;get_pixels(<a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, linesize * (1 &lt;&lt; bi-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a>));</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fdct[0](<a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            bi-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a> = <a class="code" href="libavcodec_2dvenc_8c.html#ac85d77b12d4b9f2cae60059320f21682">dv_guess_dct_mode</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, linesize);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;get_pixels(<a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, linesize);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;fdct[bi-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a>](<a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="comment">/* We rely on the fact that encoding all zeros leads to an immediate EOB,</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">           which is precisely what the spec calls for in the &quot;dummy&quot; blocks. */</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        memset(<a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>, 0, 64*<span class="keyword">sizeof</span>(*<a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>));</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        bi-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a> = 0;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2dv_8h.html#aa703ed1ba5281cc867a888a500cc7c16">DV_PROFILE_IS_HD</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys)) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> *weights;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;height == 1080) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            weights = <a class="code" href="libavcodec_2dvenc_8c.html#ab135b2850a5c1306a852d550743fa82e">dv_weight_1080</a>[<a class="code" href="vf__waveform_8c.html#a155491a071a66a7795f49f3a5e079fac">chroma</a>];</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">/* 720p */</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            weights = <a class="code" href="libavcodec_2dvenc_8c.html#adb21c463226e4a6abec2c3b66ebc13df">dv_weight_720</a>[<a class="code" href="vf__waveform_8c.html#a155491a071a66a7795f49f3a5e079fac">chroma</a>];</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <a class="code" href="libavcodec_2dvenc_8c.html#a539b1de14482a5af3070976425fad2f1">dv_set_class_number_hd</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>, bi,</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                               <a class="code" href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a>,</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                               weights,</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                               <a class="code" href="libavcodec_2dvenc_8c.html#a91dbc328fb5c5fb509ae0cccd9568bab">dv100_min_bias</a>+<a class="code" href="vf__waveform_8c.html#a155491a071a66a7795f49f3a5e079fac">chroma</a>*<a class="code" href="libavcodec_2dvenc_8c.html#a60ef505f3f0dfa488ed7fb95227c13a9">dv100_chroma_bias</a>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <a class="code" href="libavcodec_2dvenc_8c.html#a26cad9128f412460755580f6d4579ba2">dv_set_class_number_sd</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>, bi,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                               bi-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a> ? <a class="code" href="dvdata_8c.html#a0eafcb54c342ead1bece6426d8a92f4f">ff_dv_zigzag248_direct</a> : <a class="code" href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a>,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                               bi-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a> ? <a class="code" href="libavcodec_2dvenc_8c.html#a938dc6649cf22e7136c3837a0b66060b">dv_weight_248</a> : <a class="code" href="libavcodec_2dvenc_8c.html#aabda450b7f15368fb9efaf8007d35304">dv_weight_88</a>,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                               <a class="code" href="vf__waveform_8c.html#a155491a071a66a7795f49f3a5e079fac">chroma</a>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">return</span> bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[0] + bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[1] + bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[2] + bi-&gt;<a class="code" href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">bit_size</a>[3];</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">/* DV100 quantize</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">   Perform quantization by divinding the AC component by the qstep.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">   As an optimization we use a fixed-point integer multiply instead</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">   of a divide. */</span></div>
<div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a10ac64a0b39a6d87b2792ba6041d9d8d">  553</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a10ac64a0b39a6d87b2792ba6041d9d8d">dv100_quantize</a>(<span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, <span class="keywordtype">int</span> qsinv)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;{</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">/* this code is equivalent to */</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">/* return (level + qs/2) / qs; */</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qsinv + 1024 + (1&lt;&lt;(<a class="code" href="libavcodec_2dvenc_8c.html#ac3d96891e7bcca1c97d1ff58cbe414c6">dv100_qstep_bits</a>-1))) &gt;&gt; <a class="code" href="libavcodec_2dvenc_8c.html#ac3d96891e7bcca1c97d1ff58cbe414c6">dv100_qstep_bits</a>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">/* the extra +1024 is needed to make the rounding come out right. */</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">/* I (DJM) have verified that the results are exactly the same as</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">       division for level 0-2048 at all QNOs. */</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;}</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a1249ff71572523f0659907d3c1db5016">  566</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a1249ff71572523f0659907d3c1db5016">dv100_actual_quantize</a>(<a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, <span class="keywordtype">int</span> qlevel)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;{</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordtype">int</span> prev, k, qsinv;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordtype">int</span> qno = <a class="code" href="libavcodec_2dvenc_8c.html#aea3562d6dfe21ec697908c681194496b">DV100_QLEVEL_QNO</a>(<a class="code" href="libavcodec_2dvenc_8c.html#a719180e384d6ebbfc2e21bdac490f525">dv100_qlevels</a>[qlevel]);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordtype">int</span> cno = <a class="code" href="libavcodec_2dvenc_8c.html#a8629c12a88c271bbfb03cd648a2adb47">DV100_QLEVEL_CNO</a>(<a class="code" href="libavcodec_2dvenc_8c.html#a719180e384d6ebbfc2e21bdac490f525">dv100_qlevels</a>[qlevel]);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;area_q[0] == qno &amp;&amp; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;cno == cno)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bit_size[0];</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    qsinv = <a class="code" href="libavcodec_2dvenc_8c.html#a41181d0396340efac9164dff6b5c86c3">dv100_qstep_inv</a>[qno];</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">/* record the new qstep */</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;area_q[0] = qno;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;cno = cno;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="comment">/* reset encoded size (EOB = 4 bits) */</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bit_size[0] = 4;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">/* visit nonzero components and quantize */</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    prev = 0;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">for</span> (k = 1; k &lt; 64; k++) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="comment">/* quantize */</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordtype">int</span> ac = <a class="code" href="libavcodec_2dvenc_8c.html#a10ac64a0b39a6d87b2792ba6041d9d8d">dv100_quantize</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;save[k], qsinv) &gt;&gt; cno;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">if</span> (ac) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <span class="keywordflow">if</span> (ac &gt; 255)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                ac = 255;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[k] = ac;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bit_size[0] += <a class="code" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a>(k - prev - 1, ac);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[prev] = k;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            prev = k;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[prev] = k;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bit_size[0];</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ae17000dbf1febb2b1347bb529e0b92db">  604</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2dvenc_8c.html#ae17000dbf1febb2b1347bb529e0b92db">dv_guess_qnos_hd</a>(<a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *blks, <span class="keywordtype">int</span> *qnos)</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;{</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordtype">int</span> min_qlevel[5];</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordtype">int</span> qlevels[5];</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[5];</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">/* cache block sizes at hypothetical qlevels */</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    uint16_t size_cache[5*8][<a class="code" href="libavcodec_2dvenc_8c.html#a873c7016ca78a73007d0db04b5f7e53f">DV100_NUM_QLEVELS</a>] = {{0}};</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">/* get minimum qlevels */</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        min_qlevel[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 1;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 8; j++) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="keywordflow">if</span> (blks[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j].min_qlevel &gt; min_qlevel[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                min_qlevel[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = blks[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j].<a class="code" href="struct_enc_block_info.html#aa2fa1aeef3f0ce954460e69faee23754">min_qlevel</a>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="comment">/* initialize sizes */</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="libavcodec_2dvenc_8c.html#a454b2b9389aaf46313ad8df13c17d015">dv100_starting_qno</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">if</span> (qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; min_qlevel[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = min_qlevel[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        qnos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="libavcodec_2dvenc_8c.html#aea3562d6dfe21ec697908c681194496b">DV100_QLEVEL_QNO</a>(<a class="code" href="libavcodec_2dvenc_8c.html#a719180e384d6ebbfc2e21bdac490f525">dv100_qlevels</a>[qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]]);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 8; j++) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            size_cache[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j][qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = <a class="code" href="libavcodec_2dvenc_8c.html#a1249ff71572523f0659907d3c1db5016">dv100_actual_quantize</a>(&amp;blks[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j], qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += size_cache[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j][qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">/* must we go coarser? */</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0]+<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[1]+<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[2]+<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[3]+<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[4] &gt; <a class="code" href="libavcodec_2dvenc_8c.html#a60034772c02f96f596937bf6f61bc2b9">vs_total_ac_bits_hd</a>) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordtype">int</span> largest = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0] % 5; <span class="comment">/* &#39;random&#39; number */</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="keywordtype">int</span> qlevels_done = 0;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            <span class="comment">/* find the macroblock with the lowest qlevel */</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <span class="keywordflow">if</span> (qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; qlevels[largest])</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                    largest = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = largest;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="comment">/* ensure that we don&#39;t enter infinite loop */</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            largest = (largest+1) % 5;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="comment">/* quantize a little bit more */</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += <a class="code" href="libavcodec_2dvenc_8c.html#ac6eded4918d638c5fc8b3e6196f08fde">dv100_qlevel_inc</a>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">if</span> (qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; <a class="code" href="libavcodec_2dvenc_8c.html#a873c7016ca78a73007d0db04b5f7e53f">DV100_NUM_QLEVELS</a>-1) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="libavcodec_2dvenc_8c.html#a873c7016ca78a73007d0db04b5f7e53f">DV100_NUM_QLEVELS</a>-1;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                qlevels_done++;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            qnos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="libavcodec_2dvenc_8c.html#aea3562d6dfe21ec697908c681194496b">DV100_QLEVEL_QNO</a>(<a class="code" href="libavcodec_2dvenc_8c.html#a719180e384d6ebbfc2e21bdac490f525">dv100_qlevels</a>[qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]]);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <span class="comment">/* for each block */</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = &amp;blks[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 8; j++, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>++) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                <span class="comment">/* accumulate block size into macroblock */</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                <span class="keywordflow">if</span>(size_cache[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j][qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] == 0) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    <span class="comment">/* it is safe to use actual_quantize() here because we only go from finer to coarser,</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">                       and it saves the final actual_quantize() down below */</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                    size_cache[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j][qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = <a class="code" href="libavcodec_2dvenc_8c.html#a1249ff71572523f0659907d3c1db5016">dv100_actual_quantize</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += size_cache[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j][qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            } <span class="comment">/* for each block */</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        } <span class="keywordflow">while</span> (<a class="code" href="libavcodec_2dvenc_8c.html#a60034772c02f96f596937bf6f61bc2b9">vs_total_ac_bits_hd</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[1] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[2] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[3] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[4] &amp;&amp; qlevels_done &lt; 5);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="comment">// can we go finer?</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2dvenc_8c.html#a029afa6c1d720b8492a81dc5c9b345a2">DV100_ENABLE_FINER</a> &amp;&amp;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;               <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0]+<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[1]+<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[2]+<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[3]+<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[4] &lt; <a class="code" href="libavcodec_2dvenc_8c.html#a60034772c02f96f596937bf6f61bc2b9">vs_total_ac_bits_hd</a>) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordtype">int</span> save_qlevel;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordtype">int</span> largest = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0] % 5; <span class="comment">/* &#39;random&#39; number */</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">while</span> (qlevels[0] &gt; min_qlevel[0] ||</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;               qlevels[1] &gt; min_qlevel[1] ||</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;               qlevels[2] &gt; min_qlevel[2] ||</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;               qlevels[3] &gt; min_qlevel[3] ||</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;               qlevels[4] &gt; min_qlevel[4]) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <span class="comment">/* find the macroblock with the highest qlevel */</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                <span class="keywordflow">if</span> (qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; min_qlevel[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp;&amp; qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; qlevels[largest])</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    largest = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = largest;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            <span class="comment">/* ensure that we don&#39;t enter infinite loop */</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            largest = (largest+1) % 5;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keywordflow">if</span> (qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;= min_qlevel[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                <span class="comment">/* can&#39;t unquantize any more */</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="comment">/* quantize a little bit less */</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            save_qlevel = qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] -= <a class="code" href="libavcodec_2dvenc_8c.html#ac6eded4918d638c5fc8b3e6196f08fde">dv100_qlevel_inc</a>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="keywordflow">if</span> (qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; min_qlevel[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = min_qlevel[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            qnos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="libavcodec_2dvenc_8c.html#aea3562d6dfe21ec697908c681194496b">DV100_QLEVEL_QNO</a>(<a class="code" href="libavcodec_2dvenc_8c.html#a719180e384d6ebbfc2e21bdac490f525">dv100_qlevels</a>[qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]]);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="comment">/* for each block */</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = &amp;blks[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 8; j++, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>++) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                <span class="comment">/* accumulate block size into macroblock */</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                <span class="keywordflow">if</span>(size_cache[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j][qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] == 0) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                    size_cache[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j][qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = <a class="code" href="libavcodec_2dvenc_8c.html#a1249ff71572523f0659907d3c1db5016">dv100_actual_quantize</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += size_cache[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+j][qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            } <span class="comment">/* for each block */</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="comment">/* did we bust the limit? */</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2dvenc_8c.html#a60034772c02f96f596937bf6f61bc2b9">vs_total_ac_bits_hd</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[1] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[2] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[3] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[4]) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                <span class="comment">/* go back down and exit */</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = save_qlevel;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                qnos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="libavcodec_2dvenc_8c.html#aea3562d6dfe21ec697908c681194496b">DV100_QLEVEL_QNO</a>(<a class="code" href="libavcodec_2dvenc_8c.html#a719180e384d6ebbfc2e21bdac490f525">dv100_qlevels</a>[qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]]);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            }</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">/* now do the actual quantization */</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="comment">/* for each block */</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = &amp;blks[8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 8; j++, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>++) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="comment">/* accumulate block size into macroblock */</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += <a class="code" href="libavcodec_2dvenc_8c.html#a1249ff71572523f0659907d3c1db5016">dv100_actual_quantize</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, qlevels[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        } <span class="comment">/* for each block */</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ac5877b51e93cb6b93588ebc1fce29e96">  746</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2dvenc_8c.html#ac5877b51e93cb6b93588ebc1fce29e96">dv_guess_qnos</a>(<a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *blks, <span class="keywordtype">int</span> *qnos)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;{</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[5];</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k, <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, prev, <a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0] =</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[1] =</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[2] =</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[3] =</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[4] = 1 &lt;&lt; 24;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = blks;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="keywordflow">if</span> (!qnos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            qnos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]--;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 6; j++, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>++) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = 0; <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> &lt; 4; <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>++) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;area_q[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>] != <a class="code" href="dvdata_8c.html#a98625e99c416e29546e9a49d507fff02">ff_dv_quant_shifts</a>[qnos[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + <a class="code" href="dvdata_8c.html#a047e9984059fb071befce801c26e9469">ff_dv_quant_offset</a>[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;cno]][<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>]) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bit_size[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>] = 1; <span class="comment">// 4 areas 4 bits for EOB :)</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;area_q[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>]++;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                        prev = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;prev[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>];</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                        <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[prev] &gt;= <a class="code" href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">mb_area_start</a>[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> + 1] || <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[prev]);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                        <span class="keywordflow">for</span> (k = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[prev]; k &lt; <a class="code" href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">mb_area_start</a>[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> + 1]; k = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k]) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                            <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[k] &gt;&gt;= 1;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[k]) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                                <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bit_size[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>] += <a class="code" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a>(k - prev - 1, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[k]);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                                prev            = k;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k] &gt;= <a class="code" href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">mb_area_start</a>[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> + 1] &amp;&amp; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k] &lt; 64) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                                    <span class="keywordflow">for</span> (<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a> = <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> + 1; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k] &gt;= <a class="code" href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">mb_area_start</a>[<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a> + 1]; <a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>++)</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;prev[<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>] = prev;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                    <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a> &lt; 4);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                                    <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k]]);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bit_size[<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>] += <a class="code" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k] - prev - 1, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k]]) -</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                                                       <a class="code" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k] - k    - 1, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k]]);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                                    <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;prev[<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>] == k &amp;&amp; (<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a> + 1 &gt;= 4 || <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;prev[<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a> + 1] != k));</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;prev[<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>] = prev;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                                }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                                <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[prev] = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k];</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                            }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                        }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;prev[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> + 1] = prev;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;bit_size[<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>];</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2dvenc_8c.html#a5ad0bf8a0e3ff2fd9298c1d8a466a0c7">vs_total_ac_bits</a> &gt;= <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[1] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[2] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[3] + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[4])</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    } <span class="keywordflow">while</span> (qnos[0] | qnos[1] | qnos[2] | qnos[3] | qnos[4]);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = 2; <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> == 2 || <a class="code" href="libavcodec_2dvenc_8c.html#a5ad0bf8a0e3ff2fd9298c1d8a466a0c7">vs_total_ac_bits</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0]; <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> += <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>       = blks;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0] = 5 * 6 * 4; <span class="comment">// EOB</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 6 * 5; j++, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>++) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            prev = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;prev[0];</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keywordflow">for</span> (k = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[prev]; k &lt; 64; k = b-&gt;next[k]) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[k] &lt; <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> &amp;&amp; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[k] &gt; -<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>) {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[prev] = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;next[k];</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>[0] += <a class="code" href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a>(k - prev - 1, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>-&gt;mb[k]);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                    prev     = k;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">/* update all cno values into the blocks, over-writing the old values without</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">   touching anything else. (only used for DV100) */</span></div>
<div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a7ab56f53802c4ecb4f13f9b95cbb3dad">  820</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2dvenc_8c.html#a7ab56f53802c4ecb4f13f9b95cbb3dad">dv_revise_cnos</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dif, <a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *<a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>, <span class="keyword">const</span> <a class="code" href="struct_a_v_d_v_profile.html">AVDVProfile</a> *<a class="code" href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a>)</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;{</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordtype">int</span> mb_index, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">for</span> (mb_index = 0; mb_index &lt; 5; mb_index++) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> = dif + mb_index*80 + 4;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a>-&gt;bpm; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="comment">/* zero out the class number */</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[1] &amp;= 0xCF;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <span class="comment">/* add the new one */</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[1] |= <a class="code" href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a>[<a class="code" href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a>-&gt;bpm*mb_index+<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].cno &lt;&lt; 4;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> += <a class="code" href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a>-&gt;block_sizes[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;&gt; 3;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#aa4d07d9b3f0b64f4f1099bfef198b748">  838</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#aa4d07d9b3f0b64f4f1099bfef198b748">dv_encode_video_segment</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;{</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="code" href="struct_d_v_video_context.html">DVVideoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="struct_d_vwork__chunk.html">DVwork_chunk</a> *work_chunk = <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordtype">int</span> mb_index, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordtype">int</span> mb_x, mb_y, c_offset;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    ptrdiff_t linesize, y_stride;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *y_ptr;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dif, *p;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#ace83d9846ec16d847efb3ae5a38b7c9a">LOCAL_ALIGNED_8</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>, scratch, [128]);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> enc_blks[5 * <a class="code" href="libavcodec_2dv_8h.html#a4d64a64a421351294ce47cdf66f5c81f">DV_MAX_BPM</a>];</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> pbs[5 * <a class="code" href="libavcodec_2dv_8h.html#a4d64a64a421351294ce47cdf66f5c81f">DV_MAX_BPM</a>];</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="struct_enc_block_info.html">EncBlockInfo</a> *enc_blk;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordtype">int</span> vs_bit_size = 0;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordtype">int</span> qnos[5];</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordtype">int</span> *qnosp = &amp;qnos[0];</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    p = dif = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buf[work_chunk-&gt;<a class="code" href="struct_d_vwork__chunk.html#aa971ad8fb3d045bc381dd0b284bea11c">buf_offset</a> * 80];</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    enc_blk = &amp;enc_blks[0];</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">for</span> (mb_index = 0; mb_index &lt; 5; mb_index++) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <a class="code" href="libavcodec_2dv_8h.html#a135536aef897df34b1e70dd4adc7d10a">dv_calculate_mb_xy</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, work_chunk, mb_index, &amp;mb_x, &amp;mb_y);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        qnos[mb_index] = <a class="code" href="libavcodec_2dv_8h.html#aa703ed1ba5281cc867a888a500cc7c16">DV_PROFILE_IS_HD</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys) ? 1 : 15;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        y_ptr    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;data[0] + (mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;linesize[0] + mb_x) * 8;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        linesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;linesize[0];</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;height == 1080 &amp;&amp; mb_y &lt; 134)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            enc_blk-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a> = <a class="code" href="libavcodec_2dvenc_8c.html#ac85d77b12d4b9f2cae60059320f21682">dv_guess_dct_mode</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, y_ptr, linesize);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            enc_blk-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a> = 0;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            enc_blk[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].dct_mode = enc_blk-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="comment">/* initializing luminance blocks */</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;pix_fmt == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>)                      ||</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;pix_fmt == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a69f441408075b0c5fea6e82439d74b06">AV_PIX_FMT_YUV411P</a> &amp;&amp; mb_x &gt;= (704 / 8)) ||</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;height &gt;= 720 &amp;&amp; mb_y != 134)) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            y_stride = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;linesize[0] * (1 &lt;&lt; (3*!enc_blk-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a>));</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            y_stride = 16;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        y_ptr    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;data[0] +</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                   (mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;linesize[0] + mb_x) * 8;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        linesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;linesize[0];</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;video_stype == 4) { <span class="comment">/* SD 422 */</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            vs_bit_size +=</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk + 0, y_ptr,                linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0) +</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk + 1, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,                 linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0) +</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk + 2, y_ptr + 8,            linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0) +</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk + 3, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,                 linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            vs_bit_size +=</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk + 0, y_ptr,                linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0) +</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk + 1, y_ptr + 8,            linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0) +</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk + 2, y_ptr +     y_stride, linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0) +</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk + 3, y_ptr + 8 + y_stride, linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        enc_blk += 4;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="comment">/* initializing chrominance blocks */</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        c_offset = ((mb_y &gt;&gt;  (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;pix_fmt == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>)) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;linesize[1] +</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    (mb_x &gt;&gt; ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;pix_fmt == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a69f441408075b0c5fea6e82439d74b06">AV_PIX_FMT_YUV411P</a>) ? 2 : 1))) * 8;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">for</span> (j = 2; j; j--) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *c_ptr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;data[j] + c_offset;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            linesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;linesize[j];</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            y_stride = (mb_y == 134) ? 8 : (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame-&gt;linesize[j] * (1 &lt;&lt; (3*!enc_blk-&gt;<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a>)));</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;pix_fmt == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a69f441408075b0c5fea6e82439d74b06">AV_PIX_FMT_YUV411P</a> &amp;&amp; mb_x &gt;= (704 / 8)) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *d;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = scratch;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    d      = c_ptr + linesize * 8;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>[0]   = c_ptr[0];</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>[1]   = c_ptr[1];</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>[2]   = c_ptr[2];</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>[3]   = c_ptr[3];</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>[4]   = d[0];</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>[5]   = d[1];</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>[6]   = d[2];</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>[7]   = d[3];</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                    c_ptr += linesize;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>     += 16;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                c_ptr    = scratch;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                linesize = 16;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            vs_bit_size += <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk++, c_ptr, linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 1);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;bpm == 8)</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                vs_bit_size += <a class="code" href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a>(enc_blk++, c_ptr + y_stride,</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                                                 linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 1);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2dv_8h.html#aa703ed1ba5281cc867a888a500cc7c16">DV_PROFILE_IS_HD</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys)) {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="comment">/* unconditional */</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <a class="code" href="libavcodec_2dvenc_8c.html#ae17000dbf1febb2b1347bb529e0b92db">dv_guess_qnos_hd</a>(&amp;enc_blks[0], qnosp);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2dvenc_8c.html#a5ad0bf8a0e3ff2fd9298c1d8a466a0c7">vs_total_ac_bits</a> &lt; vs_bit_size) {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <a class="code" href="libavcodec_2dvenc_8c.html#ac5877b51e93cb6b93588ebc1fce29e96">dv_guess_qnos</a>(&amp;enc_blks[0], qnosp);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">/* DIF encoding process */</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; 5 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;bpm;) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordtype">int</span> start_mb = j;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        p[3] = *qnosp++;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        p += 4;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="comment">/* First pass over individual cells only */</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;bpm; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++, j++) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <span class="keywordtype">int</span> sz = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;block_sizes[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;&gt; 3;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <a class="code" href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a>(&amp;pbs[j], p, sz);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <a class="code" href="put__bits_8h.html#a022bea4c1636d3229bd07d7ec301d3c8">put_sbits</a>(&amp;pbs[j], 9, ((enc_blks[j].<a class="code" href="vf__colormatrix_8c.html#a32e154471fe091d766cfadf5f7314e77">mb</a>[0] &gt;&gt; 3) - 1024 + 2) &gt;&gt; 2);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pbs[j], 1, <a class="code" href="libavcodec_2dv_8h.html#aa703ed1ba5281cc867a888a500cc7c16">DV_PROFILE_IS_HD</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys) &amp;&amp; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ? 1 : enc_blks[j].<a class="code" href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">dct_mode</a>);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pbs[j], 2, enc_blks[j].cno);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            <a class="code" href="libavcodec_2dvenc_8c.html#a38c2be434666790f30b99c3b075c52cb">dv_encode_ac</a>(&amp;enc_blks[j], &amp;pbs[j], &amp;pbs[j + 1]);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            p += sz;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="comment">/* Second pass over each MB space */</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        pb = &amp;pbs[start_mb];</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;bpm; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keywordflow">if</span> (enc_blks[start_mb + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].partial_bit_count)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                pb = <a class="code" href="libavcodec_2dvenc_8c.html#a38c2be434666790f30b99c3b075c52cb">dv_encode_ac</a>(&amp;enc_blks[start_mb + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], pb,</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                                  &amp;pbs[start_mb + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;bpm]);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="comment">/* Third and final pass over the whole video segment space */</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    pb = &amp;pbs[0];</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; 5 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;bpm; j++) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">if</span> (enc_blks[j].partial_bit_count)</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            pb = <a class="code" href="libavcodec_2dvenc_8c.html#a38c2be434666790f30b99c3b075c52cb">dv_encode_ac</a>(&amp;enc_blks[j], pb, &amp;pbs[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;bpm * 5]);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">if</span> (enc_blks[j].partial_bit_count)</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;ac bitstream overflow\n&quot;</span>);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; 5 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;bpm; j++) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = pbs[j].<a class="code" href="struct_put_bit_context.html#a4d66ad713a6bf455ddaed734bedd8b54">size_in_bits</a> &gt;&gt; 3;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <a class="code" href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a>(&amp;pbs[j]);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;pbs[j]) &gt;&gt; 3;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> &gt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                   <span class="stringliteral">&quot;bitstream written beyond buffer size\n&quot;</span>);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        memset(pbs[j].buf + <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>, 0xff, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2dv_8h.html#aa703ed1ba5281cc867a888a500cc7c16">DV_PROFILE_IS_HD</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys))</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <a class="code" href="libavcodec_2dvenc_8c.html#a7ab56f53802c4ecb4f13f9b95cbb3dad">dv_revise_cnos</a>(dif, enc_blks, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;}</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ad78a834333ad970c049eb200a4cac933">  997</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ad78a834333ad970c049eb200a4cac933">dv_write_pack</a>(<span class="keyword">enum</span> <a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cc">dv_pack_type</a> pack_id, <a class="code" href="struct_d_v_video_context.html">DVVideoContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>,</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;{</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">     * Here&#39;s what SMPTE314M says about these two:</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">     *    (page 6) APTn, AP1n, AP2n, AP3n: These data shall be identical</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">     *             as track application IDs (APTn = 001, AP1n =</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">     *             001, AP2n = 001, AP3n = 001), if the source signal</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">     *             comes from a digital VCR. If the signal source is</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">     *             unknown, all bits for these data shall be set to 1.</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment">     *    (page 12) STYPE: STYPE defines a signal type of video signal</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">     *                     00000b = 4:1:1 compression</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">     *                     00100b = 4:2:2 compression</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">     *                     XXXXXX = Reserved</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">     * Now, I&#39;ve got two problems with these statements:</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">     *   1. it looks like APT == 111b should be a safe bet, but it isn&#39;t.</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">     *      It seems that for PAL as defined in IEC 61834 we have to set</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">     *      APT to 000 and for SMPTE314M to 001.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">     *   2. It is not at all clear what STYPE is used for 4:2:0 PAL</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">     *      compression scheme (if any).</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> aspect = 0;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordtype">int</span> apt = (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sys-&gt;pix_fmt == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a> ? 0 : 1);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cbs__vp9_8c.html#af257cad12c4d046a131f33cf6cce2c48">fs</a>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;avctx-&gt;height &gt;= 720)</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="cbs__vp9_8c.html#af257cad12c4d046a131f33cf6cce2c48">fs</a> = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;avctx-&gt;height == 720 || <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frame-&gt;top_field_first ? 0x40 : 0x00;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <a class="code" href="cbs__vp9_8c.html#af257cad12c4d046a131f33cf6cce2c48">fs</a> = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frame-&gt;top_field_first ? 0x00 : 0x40;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2dv_8h.html#aa703ed1ba5281cc867a888a500cc7c16">DV_PROFILE_IS_HD</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sys) ||</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(<a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;avctx-&gt;sample_aspect_ratio) *</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;              <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;avctx-&gt;width / <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;avctx-&gt;height * 10) &gt;= 17)</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="comment">/* HD formats are always 16:9 */</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        aspect = 0x02;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    buf[0] = (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>) pack_id;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">switch</span> (pack_id) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca04593628e910cf82b19acb684d15242b">dv_header525</a>: <span class="comment">/* I can&#39;t imagine why these two weren&#39;t defined as real */</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36ccacd7f8bde0d7ede43cf0419d887b70665">dv_header625</a>: <span class="comment">/* packs in SMPTE314M -- they definitely look like ones */</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        buf[1] =  0xf8       | <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                 (apt &amp; 0x07); <span class="comment">/* APT: Track application ID */</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        buf[2] = (0    &lt;&lt; 7) | <span class="comment">/* TF1: audio data is 0 - valid; 1 - invalid */</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                 (0x0f &lt;&lt; 3) | <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                 (apt &amp; 0x07); <span class="comment">/* AP1: Audio application ID */</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        buf[3] = (0    &lt;&lt; 7) | <span class="comment">/* TF2: video data is 0 - valid; 1 - invalid */</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                 (0x0f &lt;&lt; 3) | <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                 (apt &amp; 0x07); <span class="comment">/* AP2: Video application ID */</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        buf[4] = (0    &lt;&lt; 7) | <span class="comment">/* TF3: subcode(SSYB) is 0 - valid; 1 - invalid */</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                 (0x0f &lt;&lt; 3) | <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                 (apt &amp; 0x07); <span class="comment">/* AP3: Subcode application ID */</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca3dd41724c0bc8d60dd98c0c5b8c9517d">dv_video_source</a>:</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        buf[1] = 0xff;         <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        buf[2] = (1 &lt;&lt; 7) |    <span class="comment">/* B/W: 0 - b/w, 1 - color */</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                 (1 &lt;&lt; 6) |    <span class="comment">/* following CLF is valid - 0, invalid - 1 */</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                 (3 &lt;&lt; 4) |    <span class="comment">/* CLF: color frames ID (see ITU-R BT.470-4) */</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                 0<a class="code" href="cbs__av1_8c.html#a1ff781bc4368127725d8bb494f615fb3">xf</a>;          <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        buf[3] = (3 &lt;&lt; 6)           | <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                 (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sys-&gt;dsf &lt;&lt; 5) | <span class="comment">/*  system: 60fields/50fields */</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                 <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sys-&gt;video_stype; <span class="comment">/* signal type video compression */</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        buf[4] = 0xff;         <span class="comment">/* VISC: 0xff -- no information */</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca56aa30f96f1f30008fc417f4cb2713bb">dv_video_control</a>:</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        buf[1] = (0 &lt;&lt; 6) |    <span class="comment">/* Copy generation management (CGMS) 0 -- free */</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                 0x3f;         <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        buf[2] = 0xc8 |        <span class="comment">/* reserved -- always b11001xxx */</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                 aspect;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        buf[3] = (1 &lt;&lt; 7) |    <span class="comment">/* frame/field flag 1 -- frame, 0 -- field */</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                 <a class="code" href="cbs__vp9_8c.html#af257cad12c4d046a131f33cf6cce2c48">fs</a>       |    <span class="comment">/* first/second field flag 0 -- field 2, 1 -- field 1 */</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                 (1 &lt;&lt; 5) |    <span class="comment">/* frame change flag 0 -- same picture as before, 1 -- different */</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                 (1 &lt;&lt; 4) |    <span class="comment">/* 1 - interlaced, 0 - noninterlaced */</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                 0xc;          <span class="comment">/* reserved -- always b1100 */</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        buf[4] = 0xff;         <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        buf[1] =</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        buf[2] =</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        buf[3] =</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        buf[4] = 0xff;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">return</span> 5;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;}</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a2d8a638e67664702491b4881548b4ed9"> 1081</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a2d8a638e67664702491b4881548b4ed9">dv_write_dif_id</a>(<span class="keyword">enum</span> <a class="code" href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42">dv_section_type</a> t, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> chan_num,</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                                  <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> seq_num, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> dif_num,</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                                  <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf)</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;{</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordtype">int</span> fsc = chan_num &amp; 1;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordtype">int</span> fsp = 1 - (chan_num &gt;&gt; 1);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    buf[0] = (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>) t;      <span class="comment">/* Section type */</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    buf[1] = (seq_num  &lt;&lt; 4) | <span class="comment">/* DIF seq number 0-9 for 525/60; 0-11 for 625/50 */</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;             (fsc &lt;&lt; 3) |      <span class="comment">/* FSC: for 50 and 100Mb/s 0 - first channel; 1 - second */</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;             (fsp &lt;&lt; 2) |      <span class="comment">/* FSP: for 100Mb/s 1 - channels 0-1; 0 - channels 2-3 */</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;             3;                <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    buf[2] = dif_num;          <span class="comment">/* DIF block number Video: 0-134, Audio: 0-8 */</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">return</span> 3;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;}</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a200f14efd950535df84d69165f655092"> 1097</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#a200f14efd950535df84d69165f655092">dv_write_ssyb_id</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> syb_num, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> fr, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf)</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;{</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">if</span> (syb_num == 0 || syb_num == 6) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        buf[0] = (fr &lt;&lt; 7) | <span class="comment">/* FR ID 1 - first half of each channel; 0 - second */</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                 (0  &lt;&lt; 4) | <span class="comment">/* AP3 (Subcode application ID) */</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                 0x0f;       <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (syb_num == 11) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        buf[0] = (fr &lt;&lt; 7) | <span class="comment">/* FR ID 1 - first half of each channel; 0 - second */</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                 0x7f;       <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        buf[0] = (fr &lt;&lt; 7) | <span class="comment">/* FR ID 1 - first half of each channel; 0 - second */</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                 (0  &lt;&lt; 4) | <span class="comment">/* APT (Track application ID) */</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                 0x0f;       <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    buf[1] = 0xf0 |            <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;             (syb_num &amp; 0x0f); <span class="comment">/* SSYB number 0 - 11   */</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    buf[2] = 0xff;             <span class="comment">/* reserved -- always 1 */</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">return</span> 3;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;}</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ad78a2007adbffb792ed75d8d57e441bc"> 1117</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2dvenc_8c.html#ad78a2007adbffb792ed75d8d57e441bc">dv_format_frame</a>(<a class="code" href="struct_d_v_video_context.html">DVVideoContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;{</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordtype">int</span> chan, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">/* We work with 720p frames split in half. The odd half-frame is chan 2,3 */</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordtype">int</span> chan_offset = 2*(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sys-&gt;height == 720 &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;avctx-&gt;frame_number &amp; 1);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordflow">for</span> (chan = 0; chan &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sys-&gt;n_difchan; chan++) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sys-&gt;difseg_size; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            memset(buf, 0xff, 80 * 6); <span class="comment">/* first 6 DIF blocks are for control data */</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <span class="comment">/* DV header: 1DIF */</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            buf += <a class="code" href="libavcodec_2dvenc_8c.html#a2d8a638e67664702491b4881548b4ed9">dv_write_dif_id</a>(<a class="code" href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42a0276f8cbcc86d2b596f9f680895defec">dv_sect_header</a>, chan+chan_offset, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, 0, buf);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            buf += <a class="code" href="libavcodec_2dvenc_8c.html#ad78a834333ad970c049eb200a4cac933">dv_write_pack</a>((<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sys-&gt;dsf ? <a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36ccacd7f8bde0d7ede43cf0419d887b70665">dv_header625</a> : <a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca04593628e910cf82b19acb684d15242b">dv_header525</a>),</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                                 <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, buf);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            buf += 72; <span class="comment">/* unused bytes */</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <span class="comment">/* DV subcode: 2DIFs */</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                buf += <a class="code" href="libavcodec_2dvenc_8c.html#a2d8a638e67664702491b4881548b4ed9">dv_write_dif_id</a>(<a class="code" href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42ac565296b71b62e4367c10d97139dda53">dv_sect_subcode</a>, chan+chan_offset, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, buf);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                <span class="keywordflow">for</span> (k = 0; k &lt; 6; k++)</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                    buf += <a class="code" href="libavcodec_2dvenc_8c.html#a200f14efd950535df84d69165f655092">dv_write_ssyb_id</a>(k, (i &lt; c-&gt;sys-&gt;difseg_size / 2), buf) + 5;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                buf += 29; <span class="comment">/* unused bytes */</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="comment">/* DV VAUX: 3DIFS */</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++) {</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                buf += <a class="code" href="libavcodec_2dvenc_8c.html#a2d8a638e67664702491b4881548b4ed9">dv_write_dif_id</a>(<a class="code" href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42a72a165868d35f1b1570753f2e059f3c2">dv_sect_vaux</a>, chan+chan_offset, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, buf);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                buf += <a class="code" href="libavcodec_2dvenc_8c.html#ad78a834333ad970c049eb200a4cac933">dv_write_pack</a>(<a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca3dd41724c0bc8d60dd98c0c5b8c9517d">dv_video_source</a>,  <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, buf);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                buf += <a class="code" href="libavcodec_2dvenc_8c.html#ad78a834333ad970c049eb200a4cac933">dv_write_pack</a>(<a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca56aa30f96f1f30008fc417f4cb2713bb">dv_video_control</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, buf);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                buf += 7 * 5;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                buf += <a class="code" href="libavcodec_2dvenc_8c.html#ad78a834333ad970c049eb200a4cac933">dv_write_pack</a>(<a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca3dd41724c0bc8d60dd98c0c5b8c9517d">dv_video_source</a>,  <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, buf);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                buf += <a class="code" href="libavcodec_2dvenc_8c.html#ad78a834333ad970c049eb200a4cac933">dv_write_pack</a>(<a class="code" href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca56aa30f96f1f30008fc417f4cb2713bb">dv_video_control</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, buf);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                buf += 4 * 5 + 2; <span class="comment">/* unused bytes */</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            }</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <span class="comment">/* DV Audio/Video: 135 Video DIFs + 9 Audio DIFs */</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 135; j++) {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                <span class="keywordflow">if</span> (j % 15 == 0) {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                    memset(buf, 0xff, 80);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                    buf += <a class="code" href="libavcodec_2dvenc_8c.html#a2d8a638e67664702491b4881548b4ed9">dv_write_dif_id</a>(<a class="code" href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42a0a87613889b5253c51efa873363da619">dv_sect_audio</a>, chan+chan_offset, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j/15, buf);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                    buf += 77; <span class="comment">/* audio control &amp; shuffled PCM audio */</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                buf += <a class="code" href="libavcodec_2dvenc_8c.html#a2d8a638e67664702491b4881548b4ed9">dv_write_dif_id</a>(<a class="code" href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42a5e4179a4d29df2ed166997c2da3df7cc">dv_sect_video</a>, chan+chan_offset, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, buf);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                buf += 77; <span class="comment">/* 1 video macroblock: 1 bytes control</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">                            * 4 * 14 bytes Y 8x8 data</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">                            * 10 bytes Cr 8x8 data</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">                            * 10 bytes Cb 8x8 data */</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;}</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ab65da3dc41f0ce6dbb16a95645cff317"> 1169</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2dvenc_8c.html#ab65da3dc41f0ce6dbb16a95645cff317">dvvideo_encode_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>,</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                                <span class="keyword">const</span> <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <span class="keywordtype">int</span> *got_packet)</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;{</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <a class="code" href="struct_d_v_video_context.html">DVVideoContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;priv_data;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="encode_8c.html#a699df1216e8d9d57959f99508e9aadf6">ff_alloc_packet2</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;frame_size, 0)) &lt; 0)</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;pix_fmt                = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys-&gt;pix_fmt;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame                  = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="preprocessor">#if FF_API_CODED_FRAME</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;coded_frame-&gt;key_frame = 1;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;coded_frame-&gt;pict_type = <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;buf = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <a class="code" href="libavcodec_2dvenc_8c.html#ad78a2007adbffb792ed75d8d57e441bc">dv_format_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;execute(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="libavcodec_2dvenc_8c.html#aa4d07d9b3f0b64f4f1099bfef198b748">dv_encode_video_segment</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;work_chunks, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;               <a class="code" href="libavcodec_2dv_8h.html#a84f7589d686f1cc430765725ea192dc9">dv_work_pool_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sys), <span class="keyword">sizeof</span>(<a class="code" href="struct_d_vwork__chunk.html">DVwork_chunk</a>));</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#ae59bb66df9495df417c2632403e23aa7">emms_c</a>();</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> |= <a class="code" href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    *got_packet = 1;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;}</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160; </div>
<div class="line"><a name="l01201"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a3dcf4acb9f7d9c57f43802a9a1ac4ee6"> 1201</a></span>&#160;<span class="preprocessor">#define VE AV_OPT_FLAG_VIDEO_PARAM | AV_OPT_FLAG_ENCODING_PARAM</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261"> 1202</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(DVVideoContext, x)</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#aaf9a3b75e2064dd1df1c9cb7e6b7ff82"> 1203</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="libavcodec_2dvenc_8c.html#aaf9a3b75e2064dd1df1c9cb7e6b7ff82">dv_options</a>[] = {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    { <span class="stringliteral">&quot;quant_deadzone&quot;</span>,        <span class="stringliteral">&quot;Quantizer dead zone&quot;</span>,    <a class="code" href="libavcodec_2dvenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(quant_deadzone),       <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, { .i64 = 7 }, 0, 1024, <a class="code" href="libavcodec_2dvenc_8c.html#a3dcf4acb9f7d9c57f43802a9a1ac4ee6">VE</a> },</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;};</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; </div>
<div class="line"><a name="l01208"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a56f1fbd9dee902c4f2190d47e730f5c2"> 1208</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <a class="code" href="libavcodec_2dvenc_8c.html#a56f1fbd9dee902c4f2190d47e730f5c2">dvvideo_encode_class</a> = {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a> = <span class="stringliteral">&quot;dvvideo encoder&quot;</span>,</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    .item_name  = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    .option     = <a class="code" href="libavcodec_2dvenc_8c.html#aaf9a3b75e2064dd1df1c9cb7e6b7ff82">dv_options</a>,</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    .version    = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;};</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="libavcodec_2dvenc_8c.html#a97f0fb04732592626f7bde0f2943404b"> 1215</a></span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="libavcodec_2dvenc_8c.html#a97f0fb04732592626f7bde0f2943404b">ff_dvvideo_encoder</a> = {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>           = <span class="stringliteral">&quot;dvvideo&quot;</span>,</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;DV (Digital Video)&quot;</span>),</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    .type           = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    .id             = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06">AV_CODEC_ID_DVVIDEO</a>,</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="libavcodec_2dv_8h.html#a680d4059ff493ba532c946ff5ffbc0f6">DVVideoContext</a>),</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>           = <a class="code" href="libavcodec_2dvenc_8c.html#a0ded9f1865d6d64461decc9a98904ac5">dvvideo_encode_init</a>,</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    .encode2        = <a class="code" href="libavcodec_2dvenc_8c.html#ab65da3dc41f0ce6dbb16a95645cff317">dvvideo_encode_frame</a>,</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    .capabilities   = <a class="code" href="group__lavc__core.html#ga7c4f386d1d6df0214eb35f2be1c82779">AV_CODEC_CAP_SLICE_THREADS</a> | <a class="code" href="group__lavc__core.html#gae21e6310b40920cd61f54e9c320d8e6c">AV_CODEC_CAP_FRAME_THREADS</a>,</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    .<a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>       = (<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a>[]) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a69f441408075b0c5fea6e82439d74b06">AV_PIX_FMT_YUV411P</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051">AV_PIX_FMT_YUV422P</a>,</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    },</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    .priv_class     = &amp;<a class="code" href="libavcodec_2dvenc_8c.html#a56f1fbd9dee902c4f2190d47e730f5c2">dvvideo_encode_class</a>,</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alibavutil_2internal_8h_html_aa6ef004d10669ab4ee062367a014ea33"><div class="ttname"><a href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_ENABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00085">internal.h:85</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ac5877b51e93cb6b93588ebc1fce29e96"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ac5877b51e93cb6b93588ebc1fce29e96">dv_guess_qnos</a></div><div class="ttdeci">static void dv_guess_qnos(EncBlockInfo *blks, int *qnos)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00746">dvenc.c:746</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="asvq3_8c_html_abbb6c7c49508c1ac374683f2d1159e08"><div class="ttname"><a href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a></div><div class="ttdeci">uint8_t level</div><div class="ttdef"><b>Definition:</b> <a href="svq3_8c_source.html#l00205">svq3.c:205</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a41181d0396340efac9164dff6b5c86c3"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a41181d0396340efac9164dff6b5c86c3">dv100_qstep_inv</a></div><div class="ttdeci">static const int dv100_qstep_inv[16]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00316">dvenc.c:316</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_a4d64a64a421351294ce47cdf66f5c81f"><div class="ttname"><a href="libavcodec_2dv_8h.html#a4d64a64a421351294ce47cdf66f5c81f">DV_MAX_BPM</a></div><div class="ttdeci">#define DV_MAX_BPM</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00097">dv.h:97</a></div></div>
<div class="ttc" id="adv__tablegen_8h_html_a3b8fea17437b1d7b62bee307b653ee84"><div class="ttname"><a href="dv__tablegen_8h.html#a3b8fea17437b1d7b62bee307b653ee84">dv_vlc_map_tableinit</a></div><div class="ttdeci">static av_cold void dv_vlc_map_tableinit(void)</div><div class="ttdef"><b>Definition:</b> <a href="dv__tablegen_8h_source.html#l00051">dv_tablegen.h:51</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a41c0c9c8aa8e1fd12d65b18dd6948b09"><div class="ttname"><a href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a></div><div class="ttdeci">static av_cold int init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00035">avrndec.c:35</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a029afa6c1d720b8492a81dc5c9b345a2"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a029afa6c1d720b8492a81dc5c9b345a2">DV100_ENABLE_FINER</a></div><div class="ttdeci">#define DV100_ENABLE_FINER</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00252">dvenc.c:252</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="aswscale_8txt_html_a723c667eda7f9b65ec345ca1e08ab17a"><div class="ttname"><a href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a></div><div class="ttdeci">The official guide to swscale for confused that is</div><div class="ttdef"><b>Definition:</b> <a href="swscale_8txt_source.html#l00028">swscale.txt:28</a></div></div>
<div class="ttc" id="adv__profile__internal_8h_html"><div class="ttname"><a href="dv__profile__internal_8h.html">dv_profile_internal.h</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ab135b2850a5c1306a852d550743fa82e"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ab135b2850a5c1306a852d550743fa82e">dv_weight_1080</a></div><div class="ttdeci">static const int dv_weight_1080[2][64]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00323">dvenc.c:323</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ac1a189bf3900a1c9cb6245eed21221f9"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ac1a189bf3900a1c9cb6245eed21221f9">dv_rl2vlc</a></div><div class="ttdeci">static av_always_inline int dv_rl2vlc(int run, int l, int sign, uint32_t *vlc)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00135">dvenc.c:135</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_adb21c463226e4a6abec2c3b66ebc13df"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#adb21c463226e4a6abec2c3b66ebc13df">dv_weight_720</a></div><div class="ttdeci">static const int dv_weight_720[2][64]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00342">dvenc.c:342</a></div></div>
<div class="ttc" id="adv__tablegen_8h_html"><div class="ttname"><a href="dv__tablegen_8h.html">dv_tablegen.h</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a022bea4c1636d3229bd07d7ec301d3c8"><div class="ttname"><a href="put__bits_8h.html#a022bea4c1636d3229bd07d7ec301d3c8">put_sbits</a></div><div class="ttdeci">static void put_sbits(PutBitContext *pb, int n, int32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00260">put_bits.h:260</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a0bcd3e73d6c48e50b9c8fe99a51d2c91"><div class="ttname"><a href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a></div><div class="ttdeci">static void init_put_bits(PutBitContext *s, uint8_t *buffer, int buffer_size)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00064">put_bits.h:64</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a97f0fb04732592626f7bde0f2943404b"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a97f0fb04732592626f7bde0f2943404b">ff_dvvideo_encoder</a></div><div class="ttdeci">AVCodec ff_dvvideo_encoder</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l01215">dvenc.c:1215</a></div></div>
<div class="ttc" id="astruct_f_d_c_t_d_s_p_context_html"><div class="ttname"><a href="struct_f_d_c_t_d_s_p_context.html">FDCTDSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="fdctdsp_8h_source.html#l00026">fdctdsp.h:26</a></div></div>
<div class="ttc" id="aqsvenc_8c_html_aacd2c6f4a09d71ea05bdcc1c2e9d42dd"><div class="ttname"><a href="qsvenc_8c.html#aacd2c6f4a09d71ea05bdcc1c2e9d42dd">profile</a></div><div class="ttdeci">mfxU16 profile</div><div class="ttdef"><b>Definition:</b> <a href="qsvenc_8c_source.html#l00045">qsvenc.c:45</a></div></div>
<div class="ttc" id="aj2kenc_8c_html_aafc5fd946cab2b9d67be29d48099f703"><div class="ttname"><a href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a></div><div class="ttdeci">static void put_bits(Jpeg2000EncoderContext *s, int val, int n)</div><div class="ttdef"><b>Definition:</b> <a href="j2kenc_8c_source.html#l00218">j2kenc.c:218</a></div></div>
<div class="ttc" id="apixdesc_8h_html"><div class="ttname"><a href="pixdesc_8h.html">pixdesc.h</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_ae3c590ade0b00bd194c23c21bdc5cf42a72a165868d35f1b1570753f2e059f3c2"><div class="ttname"><a href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42a72a165868d35f1b1570753f2e059f3c2">dv_sect_vaux</a></div><div class="ttdeci">@ dv_sect_vaux</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00064">dv.h:64</a></div></div>
<div class="ttc" id="astructdv__vlc__pair_html_a751cc08510e80782d2298b913848fa49"><div class="ttname"><a href="structdv__vlc__pair.html#a751cc08510e80782d2298b913848fa49">dv_vlc_pair::vlc</a></div><div class="ttdeci">uint32_t vlc</div><div class="ttdef"><b>Definition:</b> <a href="dv__tablegen_8h_source.html#l00041">dv_tablegen.h:41</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_a14a53866a006f62f309e9e4180aa36ccacd7f8bde0d7ede43cf0419d887b70665"><div class="ttname"><a href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36ccacd7f8bde0d7ede43cf0419d887b70665">dv_header625</a></div><div class="ttdeci">@ dv_header625</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00071">dv.h:71</a></div></div>
<div class="ttc" id="ainput_8c_html_ad6cdb6a14abe3eab42eaaadc93409aec"><div class="ttname"><a href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a></div><div class="ttdeci">#define b</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00041">input.c:41</a></div></div>
<div class="ttc" id="avf__waveform_8c_html_a155491a071a66a7795f49f3a5e079fac"><div class="ttname"><a href="vf__waveform_8c.html#a155491a071a66a7795f49f3a5e079fac">chroma</a></div><div class="ttdeci">static av_always_inline void chroma(WaveformContext *s, AVFrame *in, AVFrame *out, int component, int intensity, int offset_y, int offset_x, int column, int mirror, int jobnr, int nb_jobs)</div><div class="ttdef"><b>Definition:</b> <a href="vf__waveform_8c_source.html#l01631">vf_waveform.c:1631</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_aed22014c4d40d1a612ce2813c5f15a04"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#aed22014c4d40d1a612ce2813c5f15a04">mb_area_start</a></div><div class="ttdeci">static const int mb_area_start[5]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00092">dvenc.c:92</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_aa4d07d9b3f0b64f4f1099bfef198b748"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#aa4d07d9b3f0b64f4f1099bfef198b748">dv_encode_video_segment</a></div><div class="ttdeci">static int dv_encode_video_segment(AVCodecContext *avctx, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00838">dvenc.c:838</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html"><div class="ttname"><a href="struct_enc_block_info.html">EncBlockInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00147">dvenc.c:147</a></div></div>
<div class="ttc" id="alibavcodec_2pixblockdsp_8c_html_ae29c4c41d977bf6ffea877b2aaf721f5"><div class="ttname"><a href="libavcodec_2pixblockdsp_8c.html#ae29c4c41d977bf6ffea877b2aaf721f5">ff_pixblockdsp_init</a></div><div class="ttdeci">av_cold void ff_pixblockdsp_init(PixblockDSPContext *c, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2pixblockdsp_8c_source.html#l00081">pixblockdsp.c:81</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00033">cuda_runtime.h:33</a></div></div>
<div class="ttc" id="adv__tablegen_8h_html_aa2487abed3ab4f0b0e8b8d20f0712d8e"><div class="ttname"><a href="dv__tablegen_8h.html#aa2487abed3ab4f0b0e8b8d20f0712d8e">DV_VLC_MAP_RUN_SIZE</a></div><div class="ttdeci">#define DV_VLC_MAP_RUN_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="dv__tablegen_8h_source.html#l00035">dv_tablegen.h:35</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_a6a78fd564444988984d4557d9e833fdd"><div class="ttname"><a href="struct_enc_block_info.html#a6a78fd564444988984d4557d9e833fdd">EncBlockInfo::dct_mode</a></div><div class="ttdeci">int dct_mode</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00153">dvenc.c:153</a></div></div>
<div class="ttc" id="ame__cmp_8c_html_a75513e6a622cdbbe65d692568d21b81e"><div class="ttname"><a href="me__cmp_8c.html#a75513e6a622cdbbe65d692568d21b81e">ff_set_cmp</a></div><div class="ttdeci">void ff_set_cmp(MECmpContext *c, me_cmp_func *cmp, int type)</div><div class="ttdef"><b>Definition:</b> <a href="me__cmp_8c_source.html#l00474">me_cmp.c:474</a></div></div>
<div class="ttc" id="adv__profile__internal_8h_html_abcd2e4d394c8b29f2c08c340fa1f5642"><div class="ttname"><a href="dv__profile__internal_8h.html#abcd2e4d394c8b29f2c08c340fa1f5642">ff_dv_print_profiles</a></div><div class="ttdeci">void ff_dv_print_profiles(void *logctx, int loglevel)</div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga75603d7c2b8adf5829f4fd2fb860168f"><div class="ttname"><a href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a></div><div class="ttdeci">#define AV_PKT_FLAG_KEY</div><div class="ttdoc">The packet contains a keyframe.</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00401">packet.h:401</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_aabda450b7f15368fb9efaf8007d35304"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#aabda450b7f15368fb9efaf8007d35304">dv_weight_88</a></div><div class="ttdeci">static const int dv_weight_88[64]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00228">dvenc.c:228</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_aeaab6744a53c3f9a640eda4522c5dc87"><div class="ttname"><a href="struct_enc_block_info.html#aeaab6744a53c3f9a640eda4522c5dc87">EncBlockInfo::sign</a></div><div class="ttdeci">uint8_t sign[64]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00156">dvenc.c:156</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_a763131c397550b34ba16a9a577d8bf36"><div class="ttname"><a href="struct_enc_block_info.html#a763131c397550b34ba16a9a577d8bf36">EncBlockInfo::area_q</a></div><div class="ttdeci">int area_q[4]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00148">dvenc.c:148</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ac6eded4918d638c5fc8b3e6196f08fde"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ac6eded4918d638c5fc8b3e6196f08fde">dv100_qlevel_inc</a></div><div class="ttdeci">static const int dv100_qlevel_inc</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00309">dvenc.c:309</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_ae3c590ade0b00bd194c23c21bdc5cf42ac565296b71b62e4367c10d97139dda53"><div class="ttname"><a href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42ac565296b71b62e4367c10d97139dda53">dv_sect_subcode</a></div><div class="ttdeci">@ dv_sect_subcode</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00063">dv.h:63</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a62f48d1d285b3bf9865bd448a84d36b9"><div class="ttname"><a href="put__bits_8h.html#a62f48d1d285b3bf9865bd448a84d36b9">put_bits_left</a></div><div class="ttdeci">static int put_bits_left(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00109">put_bits.h:109</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_a4266bf4cdcf51bf5e42c6b7aa9992df6"><div class="ttname"><a href="struct_enc_block_info.html#a4266bf4cdcf51bf5e42c6b7aa9992df6">EncBlockInfo::save</a></div><div class="ttdeci">int16_t save[64]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00162">dvenc.c:162</a></div></div>
<div class="ttc" id="ame__cmp_8c_html_acb0172ad172925a055b234b39fc5f3dd"><div class="ttname"><a href="me__cmp_8c.html#acb0172ad172925a055b234b39fc5f3dd">ff_me_cmp_init</a></div><div class="ttdeci">av_cold void ff_me_cmp_init(MECmpContext *c, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="me__cmp_8c_source.html#l01035">me_cmp.c:1035</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_ae3c590ade0b00bd194c23c21bdc5cf42a0a87613889b5253c51efa873363da619"><div class="ttname"><a href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42a0a87613889b5253c51efa873363da619">dv_sect_audio</a></div><div class="ttdeci">@ dv_sect_audio</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00065">dv.h:65</a></div></div>
<div class="ttc" id="alibavformat_2dv_8h_html"><div class="ttname"><a href="libavformat_2dv_8h.html">dv.h</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a56f1fbd9dee902c4f2190d47e730f5c2"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a56f1fbd9dee902c4f2190d47e730f5c2">dvvideo_encode_class</a></div><div class="ttdeci">static const AVClass dvvideo_encode_class</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l01208">dvenc.c:1208</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga502225f65e2092fbc45945247892cb0f"><div class="ttname"><a href="group__lavc__core.html#ga502225f65e2092fbc45945247892cb0f">AV_CODEC_FLAG_INTERLACED_DCT</a></div><div class="ttdeci">#define AV_CODEC_FLAG_INTERLACED_DCT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00321">avcodec.h:321</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_ace83d9846ec16d847efb3ae5a38b7c9a"><div class="ttname"><a href="libavutil_2internal_8h.html#ace83d9846ec16d847efb3ae5a38b7c9a">LOCAL_ALIGNED_8</a></div><div class="ttdeci">#define LOCAL_ALIGNED_8(t, v,...)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00125">internal.h:125</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8c_html_aee161fe3f2fa7b1b1db3664258269db4"><div class="ttname"><a href="libavcodec_2dv_8c.html#aee161fe3f2fa7b1b1db3664258269db4">ff_dv_init_dynamic_tables</a></div><div class="ttdeci">int ff_dv_init_dynamic_tables(DVVideoContext *ctx, const AVDVProfile *d)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8c_source.html#l00175">dv.c:175</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_af4b161f909030ddd66b686c3ace2a225"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#af4b161f909030ddd66b686c3ace2a225">dv_weight_bits</a></div><div class="ttdeci">static const int dv_weight_bits</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00227">dvenc.c:227</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="afdctdsp_8c_html_aba553d5c07fce211c12e4a09bc3227a7"><div class="ttname"><a href="fdctdsp_8c.html#aba553d5c07fce211c12e4a09bc3227a7">ff_fdctdsp_init</a></div><div class="ttdeci">av_cold void ff_fdctdsp_init(FDCTDSPContext *c, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="fdctdsp_8c_source.html#l00026">fdctdsp.c:26</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a454b2b9389aaf46313ad8df13c17d015"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a454b2b9389aaf46313ad8df13c17d015">dv100_starting_qno</a></div><div class="ttdeci">static const int dv100_starting_qno</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00306">dvenc.c:306</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_a6037ddfc87109df5b4b74e9ff4462fa3"><div class="ttname"><a href="struct_enc_block_info.html#a6037ddfc87109df5b4b74e9ff4462fa3">EncBlockInfo::mb</a></div><div class="ttdeci">int16_t mb[64]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00154">dvenc.c:154</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_ae59bb66df9495df417c2632403e23aa7"><div class="ttname"><a href="libavutil_2internal_8h.html#ae59bb66df9495df417c2632403e23aa7">emms_c</a></div><div class="ttdeci">#define emms_c()</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00055">internal.h:55</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_a14a53866a006f62f309e9e4180aa36cc"><div class="ttname"><a href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cc">dv_pack_type</a></div><div class="ttdeci">dv_pack_type</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00069">dv.h:69</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_a3222562996c36eaef7a851df7e88632d"><div class="ttname"><a href="struct_enc_block_info.html#a3222562996c36eaef7a851df7e88632d">EncBlockInfo::bit_size</a></div><div class="ttdeci">int bit_size[4]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00149">dvenc.c:149</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a91dbc328fb5c5fb509ae0cccd9568bab"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a91dbc328fb5c5fb509ae0cccd9568bab">dv100_min_bias</a></div><div class="ttdeci">static const int dv100_min_bias</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00304">dvenc.c:304</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga935dbbf6bde8dfe5fa7ddb1da582eb07"><div class="ttname"><a href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a></div><div class="ttdeci">static double av_q2d(AVRational a)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00104">rational.h:104</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_aa1219ee396a270ba57fd4f2306b64c6e"><div class="ttname"><a href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00162">libkvazaar.c:300</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a7ab56f53802c4ecb4f13f9b95cbb3dad"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a7ab56f53802c4ecb4f13f9b95cbb3dad">dv_revise_cnos</a></div><div class="ttdeci">static void dv_revise_cnos(uint8_t *dif, EncBlockInfo *blk, const AVDVProfile *profile)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00820">dvenc.c:820</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV420P</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, (1 Cr &amp; Cb sample per 2x2 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00066">pixfmt.h:66</a></div></div>
<div class="ttc" id="asha_8c_html_abd06ff24e9f6f5f0a9c32a1cba4b0f9c"><div class="ttname"><a href="sha_8c.html#abd06ff24e9f6f5f0a9c32a1cba4b0f9c">blk</a></div><div class="ttdeci">#define blk(i)</div><div class="ttdef"><b>Definition:</b> <a href="sha_8c_source.html#l00185">sha.c:185</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ae17000dbf1febb2b1347bb529e0b92db"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ae17000dbf1febb2b1347bb529e0b92db">dv_guess_qnos_hd</a></div><div class="ttdeci">static void dv_guess_qnos_hd(EncBlockInfo *blks, int *qnos)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00604">dvenc.c:604</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a3493d6e064beb36b6546c904a3260fa8"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a3493d6e064beb36b6546c904a3260fa8">EncBlockInfo</a></div><div class="ttdeci">struct EncBlockInfo EncBlockInfo</div></div>
<div class="ttc" id="astruct_a_v_class_html_aa8883e113a3f2965abd008f7667db7eb"><div class="ttname"><a href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">AVClass::class_name</a></div><div class="ttdeci">const char * class_name</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00072">log.h:72</a></div></div>
<div class="ttc" id="alibavcodec_2jacosubdec_8c_html_ac3a73711fd7f8a50db1c4b62e41cf852"><div class="ttname"><a href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a></div><div class="ttdeci">const char * arg</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2jacosubdec_8c_source.html#l00066">jacosubdec.c:66</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a4eab895ee223352602b91acc35c62f52"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a4eab895ee223352602b91acc35c62f52">dv_init_enc_block</a></div><div class="ttdeci">static av_always_inline int dv_init_enc_block(EncBlockInfo *bi, uint8_t *data, int linesize, DVVideoContext *s, int chroma)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00502">dvenc.c:502</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gae21e6310b40920cd61f54e9c320d8e6c"><div class="ttname"><a href="group__lavc__core.html#gae21e6310b40920cd61f54e9c320d8e6c">AV_CODEC_CAP_FRAME_THREADS</a></div><div class="ttdeci">#define AV_CODEC_CAP_FRAME_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00106">codec.h:106</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l01202">dvenc.c:1202</a></div></div>
<div class="ttc" id="agroup__lavu__ver_html_ga36e17e3fc9bcbe5c55820a8ac8b47e3c"><div class="ttname"><a href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a></div><div class="ttdeci">#define LIBAVUTIL_VERSION_INT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2version_8h_source.html#l00085">version.h:85</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_a14a53866a006f62f309e9e4180aa36cca3dd41724c0bc8d60dd98c0c5b8c9517d"><div class="ttname"><a href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca3dd41724c0bc8d60dd98c0c5b8c9517d">dv_video_source</a></div><div class="ttdeci">@ dv_video_source</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00077">dv.h:77</a></div></div>
<div class="ttc" id="advdata_8c_html_a98625e99c416e29546e9a49d507fff02"><div class="ttname"><a href="dvdata_8c.html#a98625e99c416e29546e9a49d507fff02">ff_dv_quant_shifts</a></div><div class="ttdeci">const uint8_t ff_dv_quant_shifts[22][4]</div><div class="ttdef"><b>Definition:</b> <a href="dvdata_8c_source.html#l00045">dvdata.c:45</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a8629c12a88c271bbfb03cd648a2adb47"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a8629c12a88c271bbfb03cd648a2adb47">DV100_QLEVEL_CNO</a></div><div class="ttdeci">#define DV100_QLEVEL_CNO(qlevel)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00257">dvenc.c:257</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a437be96a9da675f12caa228a9c81bd82"><div class="ttname"><a href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">AVPacket::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00369">packet.h:369</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="asvq3_8c_html_aa90bc2b9950a6a9a3144876047f8bee2"><div class="ttname"><a href="svq3_8c.html#aa90bc2b9950a6a9a3144876047f8bee2">run</a></div><div class="ttdeci">uint8_t run</div><div class="ttdef"><b>Definition:</b> <a href="svq3_8c_source.html#l00204">svq3.c:204</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_af257cad12c4d046a131f33cf6cce2c48"><div class="ttname"><a href="cbs__vp9_8c.html#af257cad12c4d046a131f33cf6cce2c48">fs</a></div><div class="ttdeci">#define fs(width, name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00259">cbs_vp9.c:259</a></div></div>
<div class="ttc" id="astruct_f_d_c_t_d_s_p_context_html_afe2b33f970b25d529dbf12a7786d5f1d"><div class="ttname"><a href="struct_f_d_c_t_d_s_p_context.html#afe2b33f970b25d529dbf12a7786d5f1d">FDCTDSPContext::fdct</a></div><div class="ttdeci">void(* fdct)(int16_t *block)</div><div class="ttdef"><b>Definition:</b> <a href="fdctdsp_8h_source.html#l00027">fdctdsp.h:27</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a26cad9128f412460755580f6d4579ba2"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a26cad9128f412460755580f6d4579ba2">dv_set_class_number_sd</a></div><div class="ttdeci">static av_always_inline int dv_set_class_number_sd(DVVideoContext *s, int16_t *blk, EncBlockInfo *bi, const uint8_t *zigzag_scan, const int *weight, int bias)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00361">dvenc.c:361</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga791fcd0dba1d19fe0c3677509344328e"><div class="ttname"><a href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a></div><div class="ttdeci">const char * av_default_item_name(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00235">log.c:235</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_I</div><div class="ttdoc">Intra.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00274">avutil.h:274</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_a016e68225ea973ef9cffb0b1d1dd19f2"><div class="ttname"><a href="struct_enc_block_info.html#a016e68225ea973ef9cffb0b1d1dd19f2">EncBlockInfo::prev</a></div><div class="ttdeci">int prev[5]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00150">dvenc.c:150</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_adf0247947728b9b13ff456f8c9b6fd9c"><div class="ttname"><a href="struct_enc_block_info.html#adf0247947728b9b13ff456f8c9b6fd9c">EncBlockInfo::cno</a></div><div class="ttdeci">int cno</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00152">dvenc.c:152</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a38c2be434666790f30b99c3b075c52cb"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a38c2be434666790f30b99c3b075c52cb">dv_encode_ac</a></div><div class="ttdeci">static av_always_inline PutBitContext * dv_encode_ac(EncBlockInfo *bi, PutBitContext *pb_pool, PutBitContext *pb_end)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00166">dvenc.c:166</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a60ef505f3f0dfa488ed7fb95227c13a9"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a60ef505f3f0dfa488ed7fb95227c13a9">dv100_chroma_bias</a></div><div class="ttdeci">static const int dv100_chroma_bias</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00305">dvenc.c:305</a></div></div>
<div class="ttc" id="astruct_pixblock_d_s_p_context_html_ade9a9ef4921d92aaaab1a54eda4f3ebe"><div class="ttname"><a href="struct_pixblock_d_s_p_context.html#ade9a9ef4921d92aaaab1a54eda4f3ebe">PixblockDSPContext::get_pixels</a></div><div class="ttdeci">void(* get_pixels)(int16_t *av_restrict block, const uint8_t *pixels, ptrdiff_t stride)</div><div class="ttdef"><b>Definition:</b> <a href="pixblockdsp_8h_source.html#l00029">pixblockdsp.h:29</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_ae3c590ade0b00bd194c23c21bdc5cf42a0276f8cbcc86d2b596f9f680895defec"><div class="ttname"><a href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42a0276f8cbcc86d2b596f9f680895defec">dv_sect_header</a></div><div class="ttdeci">@ dv_sect_header</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00062">dv.h:62</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ac3d96891e7bcca1c97d1ff58cbe414c6"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ac3d96891e7bcca1c97d1ff58cbe414c6">dv100_qstep_bits</a></div><div class="ttdeci">static const int dv100_qstep_bits</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00315">dvenc.c:315</a></div></div>
<div class="ttc" id="alibavcodec_2diracdec_8c_html_abba89017a0b8aef3a4defd8fe9c20a9e"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a></div><div class="ttdeci">static int weight(int i, int blen, int offset)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01560">diracdec.c:1560</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ad78a2007adbffb792ed75d8d57e441bc"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ad78a2007adbffb792ed75d8d57e441bc">dv_format_frame</a></div><div class="ttdeci">static void dv_format_frame(DVVideoContext *c, uint8_t *buf)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l01117">dvenc.c:1117</a></div></div>
<div class="ttc" id="astruct_put_bit_context_html_a4d66ad713a6bf455ddaed734bedd8b54"><div class="ttname"><a href="struct_put_bit_context.html#a4d66ad713a6bf455ddaed734bedd8b54">PutBitContext::size_in_bits</a></div><div class="ttdeci">int size_in_bits</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00055">put_bits.h:55</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_a680d4059ff493ba532c946ff5ffbc0f6"><div class="ttname"><a href="libavcodec_2dv_8h.html#a680d4059ff493ba532c946ff5ffbc0f6">DVVideoContext</a></div><div class="ttdeci">struct DVVideoContext DVVideoContext</div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a0ded9f1865d6d64461decc9a98904ac5"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a0ded9f1865d6d64461decc9a98904ac5">dvvideo_encode_init</a></div><div class="ttdeci">static av_cold int dvvideo_encode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00047">dvenc.c:47</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_f_d_c_t_d_s_p_context_html_ab4006913f1419aad92d1b8c060e32dda"><div class="ttname"><a href="struct_f_d_c_t_d_s_p_context.html#ab4006913f1419aad92d1b8c060e32dda">FDCTDSPContext::fdct248</a></div><div class="ttdeci">void(* fdct248)(int16_t *block)</div><div class="ttdef"><b>Definition:</b> <a href="fdctdsp_8h_source.html#l00028">fdctdsp.h:28</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab7bfeb9fa5840aac090e2b0bd0ef7589"><div class="ttname"><a href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">AVCodecContext::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00649">avcodec.h:649</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_a01355f930e22be9fcacf54ac14b352ad"><div class="ttname"><a href="struct_enc_block_info.html#a01355f930e22be9fcacf54ac14b352ad">EncBlockInfo::next</a></div><div class="ttdeci">uint8_t next[64]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00155">dvenc.c:155</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a10ac64a0b39a6d87b2792ba6041d9d8d"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a10ac64a0b39a6d87b2792ba6041d9d8d">dv100_quantize</a></div><div class="ttdeci">static av_always_inline int dv100_quantize(int level, int qsinv)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00553">dvenc.c:553</a></div></div>
<div class="ttc" id="advdata_8c_html_a0eafcb54c342ead1bece6426d8a92f4f"><div class="ttname"><a href="dvdata_8c.html#a0eafcb54c342ead1bece6426d8a92f4f">ff_dv_zigzag248_direct</a></div><div class="ttdeci">const uint8_t ff_dv_zigzag248_direct[64]</div><div class="ttdef"><b>Definition:</b> <a href="dvdata_8c_source.html#l00033">dvdata.c:33</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ab65da3dc41f0ce6dbb16a95645cff317"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ab65da3dc41f0ce6dbb16a95645cff317">dvvideo_encode_frame</a></div><div class="ttdeci">static int dvvideo_encode_frame(AVCodecContext *c, AVPacket *pkt, const AVFrame *frame, int *got_packet)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l01169">dvenc.c:1169</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="astruct_d_v_video_context_html"><div class="ttname"><a href="struct_d_v_video_context.html">DVVideoContext</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00041">dv.h:41</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_a14a53866a006f62f309e9e4180aa36cca04593628e910cf82b19acb684d15242b"><div class="ttname"><a href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca04593628e910cf82b19acb684d15242b">dv_header525</a></div><div class="ttdeci">@ dv_header525</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00070">dv.h:70</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_abb2ff50a4d495f8b6f85dde5c75f69f2"><div class="ttname"><a href="struct_enc_block_info.html#abb2ff50a4d495f8b6f85dde5c75f69f2">EncBlockInfo::cur_ac</a></div><div class="ttdeci">int cur_ac</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00151">dvenc.c:151</a></div></div>
<div class="ttc" id="aundefined_8txt_html_ad99f336d4c117c453fef82993434eb4d"><div class="ttname"><a href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a></div><div class="ttdeci">The reader does not expect b to be semantically here and if the code is changed by maybe adding a a division or other the signedness will almost certainly be mistaken To avoid this confusion a new type was SUINT is the C unsigned type but it holds a signed int to use the same example SUINT a</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00041">undefined.txt:41</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_a916333174b2c8b10f38430c034285968"><div class="ttname"><a href="struct_enc_block_info.html#a916333174b2c8b10f38430c034285968">EncBlockInfo::partial_bit_buffer</a></div><div class="ttdeci">uint32_t partial_bit_buffer</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00158">dvenc.c:158</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga7c4f386d1d6df0214eb35f2be1c82779"><div class="ttname"><a href="group__lavc__core.html#ga7c4f386d1d6df0214eb35f2be1c82779">AV_CODEC_CAP_SLICE_THREADS</a></div><div class="ttdeci">#define AV_CODEC_CAP_SLICE_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00110">codec.h:110</a></div></div>
<div class="ttc" id="aattributes_8h_html"><div class="ttname"><a href="attributes_8h.html">attributes.h</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a60034772c02f96f596937bf6f61bc2b9"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a60034772c02f96f596937bf6f61bc2b9">vs_total_ac_bits_hd</a></div><div class="ttdeci">static const int vs_total_ac_bits_hd</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00090">dvenc.c:90</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a5ad0bf8a0e3ff2fd9298c1d8a466a0c7"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a5ad0bf8a0e3ff2fd9298c1d8a466a0c7">vs_total_ac_bits</a></div><div class="ttdeci">static const int vs_total_ac_bits</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00091">dvenc.c:91</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a1249ff71572523f0659907d3c1db5016"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a1249ff71572523f0659907d3c1db5016">dv100_actual_quantize</a></div><div class="ttdeci">static int dv100_actual_quantize(EncBlockInfo *b, int qlevel)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00566">dvenc.c:566</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_aa703ed1ba5281cc867a888a500cc7c16"><div class="ttname"><a href="libavcodec_2dv_8h.html#aa703ed1ba5281cc867a888a500cc7c16">DV_PROFILE_IS_HD</a></div><div class="ttdeci">#define DV_PROFILE_IS_HD(p)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00084">dv.h:84</a></div></div>
<div class="ttc" id="avf__colormatrix_8c_html_a32e154471fe091d766cfadf5f7314e77"><div class="ttname"><a href="vf__colormatrix_8c.html#a32e154471fe091d766cfadf5f7314e77">mb</a></div><div class="ttdeci">#define mb</div><div class="ttdef"><b>Definition:</b> <a href="vf__colormatrix_8c_source.html#l00101">vf_colormatrix.c:101</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a3dcf4acb9f7d9c57f43802a9a1ac4ee6"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a3dcf4acb9f7d9c57f43802a9a1ac4ee6">VE</a></div><div class="ttdeci">#define VE</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l01201">dvenc.c:1201</a></div></div>
<div class="ttc" id="astruct_d_vwork__chunk_html_aa971ad8fb3d045bc381dd0b284bea11c"><div class="ttname"><a href="struct_d_vwork__chunk.html#aa971ad8fb3d045bc381dd0b284bea11c">DVwork_chunk::buf_offset</a></div><div class="ttdeci">uint16_t buf_offset</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00037">dv.h:37</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ad78a834333ad970c049eb200a4cac933"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ad78a834333ad970c049eb200a4cac933">dv_write_pack</a></div><div class="ttdeci">static int dv_write_pack(enum dv_pack_type pack_id, DVVideoContext *c, uint8_t *buf)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00997">dvenc.c:997</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_aaf9a3b75e2064dd1df1c9cb7e6b7ff82"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#aaf9a3b75e2064dd1df1c9cb7e6b7ff82">dv_options</a></div><div class="ttdeci">static const AVOption dv_options[]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l01203">dvenc.c:1203</a></div></div>
<div class="ttc" id="aavassert_8h_html_a2764bf422e4df5bf3aac652f21fe780a"><div class="ttname"><a href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a></div><div class="ttdeci">#define av_assert2(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00064">avassert.h:64</a></div></div>
<div class="ttc" id="astruct_pixblock_d_s_p_context_html"><div class="ttname"><a href="struct_pixblock_d_s_p_context.html">PixblockDSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="pixblockdsp_8h_source.html#l00028">pixblockdsp.h:28</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ab62a172132951c7c9e0f0054bfd815c7"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ab62a172132951c7c9e0f0054bfd815c7">dv100_weight_shift</a></div><div class="ttdeci">static const int dv100_weight_shift</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00322">dvenc.c:322</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a57c57e21dbbc8777ed8a0a78ba89fc7d"><div class="ttname"><a href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a></div><div class="ttdeci">static int put_bits_count(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00083">put_bits.h:83</a></div></div>
<div class="ttc" id="adv__tablegen_8h_html_ab89bc96d5df7736a1d01c10c4d761e83"><div class="ttname"><a href="dv__tablegen_8h.html#ab89bc96d5df7736a1d01c10c4d761e83">dv_vlc_map</a></div><div class="ttdeci">static struct dv_vlc_pair dv_vlc_map[DV_VLC_MAP_RUN_SIZE][DV_VLC_MAP_LEV_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="dv__tablegen_8h_source.html#l00001">dv_tablegen.h:49</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_aa2fa1aeef3f0ce954460e69faee23754"><div class="ttname"><a href="struct_enc_block_info.html#aa2fa1aeef3f0ce954460e69faee23754">EncBlockInfo::min_qlevel</a></div><div class="ttdeci">int min_qlevel</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00163">dvenc.c:163</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a200f14efd950535df84d69165f655092"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a200f14efd950535df84d69165f655092">dv_write_ssyb_id</a></div><div class="ttdeci">static int dv_write_ssyb_id(uint8_t syb_num, uint8_t fr, uint8_t *buf)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l01097">dvenc.c:1097</a></div></div>
<div class="ttc" id="aregdef_8h_html_aa3fd046b2956875cf908d73a51a96b42"><div class="ttname"><a href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a></div><div class="ttdeci">#define a2</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00048">regdef.h:48</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a1ff781bc4368127725d8bb494f615fb3"><div class="ttname"><a href="cbs__av1_8c.html#a1ff781bc4368127725d8bb494f615fb3">xf</a></div><div class="ttdeci">#define xf(width, name, var, range_min, range_max, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00663">cbs_av1.c:663</a></div></div>
<div class="ttc" id="aattributes_8h_html_a28f50f4c125959216885f01d56dbe866"><div class="ttname"><a href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a></div><div class="ttdeci">#define av_always_inline</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00049">attributes.h:49</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06">AV_CODEC_ID_DVVIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_DVVIDEO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00073">codec_id.h:73</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_a84f7589d686f1cc430765725ea192dc9"><div class="ttname"><a href="libavcodec_2dv_8h.html#a84f7589d686f1cc430765725ea192dc9">dv_work_pool_size</a></div><div class="ttdeci">static int dv_work_pool_size(const AVDVProfile *d)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00107">dv.h:107</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_a14a53866a006f62f309e9e4180aa36cca56aa30f96f1f30008fc417f4cb2713bb"><div class="ttname"><a href="libavcodec_2dv_8h.html#a14a53866a006f62f309e9e4180aa36cca56aa30f96f1f30008fc417f4cb2713bb">dv_video_control</a></div><div class="ttdeci">@ dv_video_control</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00078">dv.h:78</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="afdctdsp_8h_html"><div class="ttname"><a href="fdctdsp_8h.html">fdctdsp.h</a></div></div>
<div class="ttc" id="astruct_put_bit_context_html"><div class="ttname"><a href="struct_put_bit_context.html">PutBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00051">put_bits.h:51</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a719180e384d6ebbfc2e21bdac490f525"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a719180e384d6ebbfc2e21bdac490f525">dv100_qlevels</a></div><div class="ttdeci">static const uint8_t dv100_qlevels[DV100_NUM_QLEVELS]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00269">dvenc.c:269</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a873c7016ca78a73007d0db04b5f7e53f"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a873c7016ca78a73007d0db04b5f7e53f">DV100_NUM_QLEVELS</a></div><div class="ttdeci">#define DV100_NUM_QLEVELS</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00259">dvenc.c:259</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_ae3c590ade0b00bd194c23c21bdc5cf42"><div class="ttname"><a href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42">dv_section_type</a></div><div class="ttdeci">dv_section_type</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00061">dv.h:61</a></div></div>
<div class="ttc" id="astruct_d_vwork__chunk_html"><div class="ttname"><a href="struct_d_vwork__chunk.html">DVwork_chunk</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00036">dv.h:36</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="amathops_8h_html_a0729a02967b7934643d747721ecdccbb"><div class="ttname"><a href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a></div><div class="ttdeci">const uint8_t ff_zigzag_direct[64]</div><div class="ttdef"><b>Definition:</b> <a href="mathtables_8c_source.html#l00098">mathtables.c:98</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="astruct_m_e_cmp_context_html_a1fade4a82fa292d0a6fe60cb443bac33"><div class="ttname"><a href="struct_m_e_cmp_context.html#a1fade4a82fa292d0a6fe60cb443bac33">MECmpContext::ildct_cmp</a></div><div class="ttdeci">me_cmp_func ildct_cmp[6]</div><div class="ttdef"><b>Definition:</b> <a href="me__cmp_8h_source.html#l00075">me_cmp.h:75</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_a135536aef897df34b1e70dd4adc7d10a"><div class="ttname"><a href="libavcodec_2dv_8h.html#a135536aef897df34b1e70dd4adc7d10a">dv_calculate_mb_xy</a></div><div class="ttdeci">static void dv_calculate_mb_xy(DVVideoContext *s, DVwork_chunk *work_chunk, int m, int *mb_x, int *mb_y)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00117">dv.h:117</a></div></div>
<div class="ttc" id="aspdifenc_8c_html_addcb93d939ffa259ff1d9247bdd590fd"><div class="ttname"><a href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a></div><div class="ttdeci">unsigned int pos</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00410">spdifenc.c:410</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="astruct_enc_block_info_html_a9d8db9c50f4ee9c703aecea6628ab070"><div class="ttname"><a href="struct_enc_block_info.html#a9d8db9c50f4ee9c703aecea6628ab070">EncBlockInfo::partial_bit_count</a></div><div class="ttdeci">uint8_t partial_bit_count</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00157">dvenc.c:157</a></div></div>
<div class="ttc" id="ax86_2mathops_8h_html"><div class="ttname"><a href="x86_2mathops_8h.html">mathops.h</a></div></div>
<div class="ttc" id="ame__cmp_8h_html"><div class="ttname"><a href="me__cmp_8h.html">me_cmp.h</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_ac85d77b12d4b9f2cae60059320f21682"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#ac85d77b12d4b9f2cae60059320f21682">dv_guess_dct_mode</a></div><div class="ttdeci">static av_always_inline int dv_guess_dct_mode(DVVideoContext *s, uint8_t *data, ptrdiff_t linesize)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00212">dvenc.c:212</a></div></div>
<div class="ttc" id="advdata_8c_html_a047e9984059fb071befce801c26e9469"><div class="ttname"><a href="dvdata_8c.html#a047e9984059fb071befce801c26e9469">ff_dv_quant_offset</a></div><div class="ttdeci">const uint8_t ff_dv_quant_offset[4]</div><div class="ttdef"><b>Definition:</b> <a href="dvdata_8c_source.html#l00070">dvdata.c:70</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8h_html_ae3c590ade0b00bd194c23c21bdc5cf42a5e4179a4d29df2ed166997c2da3df7cc"><div class="ttname"><a href="libavcodec_2dv_8h.html#ae3c590ade0b00bd194c23c21bdc5cf42a5e4179a4d29df2ed166997c2da3df7cc">dv_sect_video</a></div><div class="ttdeci">@ dv_sect_video</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8h_source.html#l00066">dv.h:66</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a></div><div class="ttdeci">@ AV_OPT_TYPE_INT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00225">opt.h:225</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_aea3562d6dfe21ec697908c681194496b"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#aea3562d6dfe21ec697908c681194496b">DV100_QLEVEL_QNO</a></div><div class="ttdeci">#define DV100_QLEVEL_QNO(qlevel)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00256">dvenc.c:256</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a5837cafc419c2b5ecdb1dfa330675d13"><div class="ttname"><a href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_DISABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00084">internal.h:84</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051">AV_PIX_FMT_YUV422P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV422P</div><div class="ttdoc">planar YUV 4:2:2, 16bpp, (1 Cr &amp; Cb sample per 2x1 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00070">pixfmt.h:70</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aa136d238dbf5ea7085f6117b59e5d5eb"><div class="ttname"><a href="struct_a_v_codec_context.html#aa136d238dbf5ea7085f6117b59e5d5eb">AVCodecContext::ildct_cmp</a></div><div class="ttdeci">int ildct_cmp</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00930">avcodec.h:930</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a2d8a638e67664702491b4881548b4ed9"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a2d8a638e67664702491b4881548b4ed9">dv_write_dif_id</a></div><div class="ttdeci">static int dv_write_dif_id(enum dv_section_type t, uint8_t chan_num, uint8_t seq_num, uint8_t dif_num, uint8_t *buf)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l01081">dvenc.c:1081</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a6f7bba5ea37c63f99b266928759fe6f6"><div class="ttname"><a href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a></div><div class="ttdeci">static void flush_put_bits(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00117">put_bits.h:117</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0425c77b3d06d71e5db88b1d7e1b37f2"><div class="ttname"><a href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">AVCodecContext::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00721">avcodec.h:736</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="alibavcodec_2dv_8c_html_a478afb9214a1d4bd4a372d25a18d227b"><div class="ttname"><a href="libavcodec_2dv_8c.html#a478afb9214a1d4bd4a372d25a18d227b">ff_dvvideo_init</a></div><div class="ttdeci">av_cold int ff_dvvideo_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dv_8c_source.html#l00198">dv.c:198</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a9c40c09fa05d7001bd3171f93f233df4"><div class="ttname"><a href="libavutil_2internal_8h.html#a9c40c09fa05d7001bd3171f93f233df4">LOCAL_ALIGNED_16</a></div><div class="ttdeci">#define LOCAL_ALIGNED_16(t, v,...)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00131">internal.h:131</a></div></div>
<div class="ttc" id="astructdv__vlc__pair_html_a741c997dc174bc4627aa252c01c00642"><div class="ttname"><a href="structdv__vlc__pair.html#a741c997dc174bc4627aa252c01c00642">dv_vlc_pair::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="dv__tablegen_8h_source.html#l00042">dv_tablegen.h:42</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a69f441408075b0c5fea6e82439d74b06"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a69f441408075b0c5fea6e82439d74b06">AV_PIX_FMT_YUV411P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV411P</div><div class="ttdoc">planar YUV 4:1:1, 12bpp, (1 Cr &amp; Cb sample per 4x1 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00073">pixfmt.h:73</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a7da3d36302ae1711d6d495b77cb5ed61"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a7da3d36302ae1711d6d495b77cb5ed61">DV100_MAKE_QLEVEL</a></div><div class="ttdeci">#define DV100_MAKE_QLEVEL(qno, cno)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00255">dvenc.c:255</a></div></div>
<div class="ttc" id="adv__tablegen_8h_html_ab42d2dc0b9c919bfafea91690af32c80"><div class="ttname"><a href="dv__tablegen_8h.html#ab42d2dc0b9c919bfafea91690af32c80">DV_VLC_MAP_LEV_SIZE</a></div><div class="ttdeci">#define DV_VLC_MAP_LEV_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="dv__tablegen_8h_source.html#l00036">dv_tablegen.h:36</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a5a752c220f7c854987810c62e19e53cd"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a5a752c220f7c854987810c62e19e53cd">dv_rl2vlc_size</a></div><div class="ttdeci">static av_always_inline int dv_rl2vlc_size(int run, int l)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00141">dvenc.c:141</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a938dc6649cf22e7136c3837a0b66060b"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a938dc6649cf22e7136c3837a0b66060b">dv_weight_248</a></div><div class="ttdeci">static const int dv_weight_248[64]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00238">dvenc.c:238</a></div></div>
<div class="ttc" id="adv__profile_8c_html_a6e6b2532a302003fcd0c35694867eb32"><div class="ttname"><a href="dv__profile_8c.html#a6e6b2532a302003fcd0c35694867eb32">av_dv_codec_profile2</a></div><div class="ttdeci">const AVDVProfile * av_dv_codec_profile2(int width, int height, enum AVPixelFormat pix_fmt, AVRational frame_rate)</div><div class="ttdef"><b>Definition:</b> <a href="dv__profile_8c_source.html#l00316">dv_profile.c:316</a></div></div>
<div class="ttc" id="astruct_a_v_d_v_profile_html"><div class="ttname"><a href="struct_a_v_d_v_profile.html">AVDVProfile</a></div><div class="ttdef"><b>Definition:</b> <a href="dv__profile_8h_source.html#l00039">dv_profile.h:39</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="aencode_8c_html_a699df1216e8d9d57959f99508e9aadf6"><div class="ttname"><a href="encode_8c.html#a699df1216e8d9d57959f99508e9aadf6">ff_alloc_packet2</a></div><div class="ttdeci">int ff_alloc_packet2(AVCodecContext *avctx, AVPacket *avpkt, int64_t size, int64_t min_size)</div><div class="ttdef"><b>Definition:</b> <a href="encode_8c_source.html#l00033">encode.c:33</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="aput__bits_8h_html"><div class="ttname"><a href="put__bits_8h.html">put_bits.h</a></div></div>
<div class="ttc" id="alibavcodec_2dvenc_8c_html_a539b1de14482a5af3070976425fad2f1"><div class="ttname"><a href="libavcodec_2dvenc_8c.html#a539b1de14482a5af3070976425fad2f1">dv_set_class_number_hd</a></div><div class="ttdeci">static void dv_set_class_number_hd(DVVideoContext *s, int16_t *blk, EncBlockInfo *bi, const uint8_t *zigzag_scan, const int *weight, int bias)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dvenc_8c_source.html#l00445">dvenc.c:445</a></div></div>
<div class="ttc" id="astruct_m_e_cmp_context_html"><div class="ttname"><a href="struct_m_e_cmp_context.html">MECmpContext</a></div><div class="ttdef"><b>Definition:</b> <a href="me__cmp_8h_source.html#l00053">me_cmp.h:53</a></div></div>
<div class="ttc" id="apixblockdsp_8h_html"><div class="ttname"><a href="pixblockdsp_8h.html">pixblockdsp.h</a></div></div>
<div class="ttc" id="apixdesc_8c_html_ab92e2a8a9b58c982560c49df9f01e47e"><div class="ttname"><a href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a></div><div class="ttdeci">const char * av_get_pix_fmt_name(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02489">pixdesc.c:2489</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
