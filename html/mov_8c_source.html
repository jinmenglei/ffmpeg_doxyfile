<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavformat/mov.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_5dbf34d3eccfe93a92dd48ea427d25bd.html">libavformat</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mov.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mov_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * MOV demuxer</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2001 Fabrice Bellard</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2009 Baptiste Coudurier &lt;baptiste dot coudurier at gmail dot com&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * first version by Francois Revol &lt;revol@free.fr&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * seek function by Gael Chardon &lt;gael.dev@4now.net&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="limits_8h.html">limits.h</a>&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="attributes_8h.html">libavutil/attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="channel__layout_8h.html">libavutil/channel_layout.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">libavutil/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="intreadwrite_8h.html">libavutil/intreadwrite.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="intfloat_8h.html">libavutil/intfloat.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mathematics_8h.html">libavutil/mathematics.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="time__internal_8h.html">libavutil/time_internal.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avstring_8h.html">libavutil/avstring.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict_8h.html">libavutil/dict.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="display_8h.html">libavutil/display.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="aes_8h.html">libavutil/aes.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="aes__ctr_8h.html">libavutil/aes_ctr.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixdesc_8h.html">libavutil/pixdesc.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sha_8h.html">libavutil/sha.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="spherical_8h.html">libavutil/spherical.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2stereo3d_8h.html">libavutil/stereo3d.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timecode_8h.html">libavutil/timecode.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dovi__meta_8h.html">libavutil/dovi_meta.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ac3tab_8h.html">libavcodec/ac3tab.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="flac_8h.html">libavcodec/flac.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegaudiodecheader_8h.html">libavcodec/mpegaudiodecheader.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mlp__parse_8h.html">libavcodec/mlp_parse.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avformat_8h.html">avformat.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avio__internal_8h.html">avio_internal.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="riff_8h.html">riff.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="isom_8h.html">isom.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="get__bits_8h.html">libavcodec/get_bits.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="id3v1_8h.html">id3v1.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mov__chan_8h.html">mov_chan.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2replaygain_8h.html">replaygain.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#if CONFIG_ZLIB</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &lt;zlib.h&gt;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qtpalette_8h.html">qtpalette.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/* those functions parse an atom */</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/* links atom IDs to parse functions */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_m_o_v_parse_table_entry.html">   72</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_m_o_v_parse_table_entry.html">MOVParseTableEntry</a> {</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_m_o_v_parse_table_entry.html#a777d3e1425cb73aeae90cc363fa6080b">   73</a></span>&#160;    uint32_t <a class="code" href="struct_m_o_v_parse_table_entry.html#a777d3e1425cb73aeae90cc363fa6080b">type</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_m_o_v_parse_table_entry.html#a2358437ca5b698e283eca0442a685d46">   74</a></span>&#160;    <a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> (*<a class="code" href="struct_m_o_v_parse_table_entry.html#a2358437ca5b698e283eca0442a685d46">parse</a>)(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom);</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="mov_8c.html#a70e9e7ee26639878f2d460069d6afb89">   75</a></span>&#160;} <a class="code" href="mov_8c.html#a70e9e7ee26639878f2d460069d6afb89">MOVParseTableEntry</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a833f75276b1c37c78eb06d6f35a42c2e">mov_read_mfra</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mov_8c.html#abcf4c160935690f8b194d59dc5ded9bf">add_ctts_entry</a>(<a class="code" href="struct_m_o_v_stts.html">MOVStts</a>** ctts_data, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* ctts_count, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* allocated_size,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                              <span class="keywordtype">int</span> count, <span class="keywordtype">int</span> <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="mov_8c.html#a7d269968b33e484d177b259c879e74e6">   82</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a7d269968b33e484d177b259c879e74e6">mov_metadata_track_or_disc_number</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                             <span class="keywordtype">unsigned</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">char</span> buf[16];</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">short</span> current, total = 0;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">// unknown</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    current = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;= 6)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        total = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> (!total)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d&quot;</span>, current);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d/%d&quot;</span>, current, total);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;event_flags |= <a class="code" href="avformat_8h.html#a19485b8b52e579db560875e9a1e44e7a">AVFMT_EVENT_FLAG_METADATA_UPDATED</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, buf, 0);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="mov_8c.html#a64db6ed08b0c302f839f83c7a6aa0b5d">  102</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a64db6ed08b0c302f839f83c7a6aa0b5d">mov_metadata_int8_bypass_padding</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                            <span class="keywordtype">unsigned</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">/* bypass padding bytes */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;event_flags |= <a class="code" href="avformat_8h.html#a19485b8b52e579db560875e9a1e44e7a">AVFMT_EVENT_FLAG_METADATA_UPDATED</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="group__lavu__dict.html#gafd013a88620b2da7d497b083f6ea7d29">av_dict_set_int</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb), 0);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">  116</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                        <span class="keywordtype">unsigned</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;event_flags |= <a class="code" href="avformat_8h.html#a19485b8b52e579db560875e9a1e44e7a">AVFMT_EVENT_FLAG_METADATA_UPDATED</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="group__lavu__dict.html#gafd013a88620b2da7d497b083f6ea7d29">av_dict_set_int</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb), 0);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="mov_8c.html#a3ce9dddcb355975fd253976f5dda71f2">  125</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a3ce9dddcb355975fd253976f5dda71f2">mov_metadata_gnre</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                             <span class="keywordtype">unsigned</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordtype">short</span> genre;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">// unknown</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    genre = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (genre &lt; 1 || genre &gt; <a class="code" href="id3v1_8h.html#a83a6af88a5fd012267b7f60be6d07bb9">ID3v1_GENRE_MAX</a>)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;event_flags |= <a class="code" href="avformat_8h.html#a19485b8b52e579db560875e9a1e44e7a">AVFMT_EVENT_FLAG_METADATA_UPDATED</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="id3v1_8c.html#a70ec807402de9eaed0dad9c4603aee54">ff_id3v1_genre_str</a>[genre-1], 0);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="mov_8c.html#a5f8aaa1f33f2e7b678c960bde2c27d2c">  141</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="mov_8c.html#a5f8aaa1f33f2e7b678c960bde2c27d2c">mac_to_unicode</a>[128] = {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    0x00C4,0x00C5,0x00C7,0x00C9,0x00D1,0x00D6,0x00DC,0x00E1,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    0x00E0,0x00E2,0x00E4,0x00E3,0x00E5,0x00E7,0x00E9,0x00E8,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    0x00EA,0x00EB,0x00ED,0x00EC,0x00EE,0x00EF,0x00F1,0x00F3,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    0x00F2,0x00F4,0x00F6,0x00F5,0x00FA,0x00F9,0x00FB,0x00FC,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    0x2020,0x00B0,0x00A2,0x00A3,0x00A7,0x2022,0x00B6,0x00DF,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    0x00AE,0x00A9,0x2122,0x00B4,0x00A8,0x2260,0x00C6,0x00D8,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    0x221E,0x00B1,0x2264,0x2265,0x00A5,0x00B5,0x2202,0x2211,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    0x220F,0x03C0,0x222B,0x00AA,0x00BA,0x03A9,0x00E6,0x00F8,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    0x00BF,0x00A1,0x00AC,0x221A,0x0192,0x2248,0x2206,0x00AB,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    0x00BB,0x2026,0x00A0,0x00C0,0x00C3,0x00D5,0x0152,0x0153,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    0x2013,0x2014,0x201C,0x201D,0x2018,0x2019,0x00F7,0x25CA,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    0x00FF,0x0178,0x2044,0x20AC,0x2039,0x203A,0xFB01,0xFB02,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    0x2021,0x00B7,0x201A,0x201E,0x2030,0x00C2,0x00CA,0x00C1,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    0x00CB,0x00C8,0x00CD,0x00CE,0x00CF,0x00CC,0x00D3,0x00D4,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    0xF8FF,0x00D2,0x00DA,0x00DB,0x00D9,0x0131,0x02C6,0x02DC,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    0x00AF,0x02D8,0x02D9,0x02DA,0x00B8,0x02DD,0x02DB,0x02C7,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;};</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="mov_8c.html#ad03c2b9914f9ded24ee311a37d3678e6">  160</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ad03c2b9914f9ded24ee311a37d3678e6">mov_read_mac_string</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                               <span class="keywordtype">char</span> *dst, <span class="keywordtype">int</span> dstlen)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">char</span> *p = dst;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = dst+dstlen-1;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> t, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">if</span> (p &gt;= <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 0x80)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            *p++ = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p &lt; <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <a class="code" href="common_8h.html#ac6a994fe28410a8d14f70f0992db4f42">PUT_UTF8</a>(<a class="code" href="mov_8c.html#a5f8aaa1f33f2e7b678c960bde2c27d2c">mac_to_unicode</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-0x80], t, <span class="keywordflow">if</span> (p &lt; <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>) *p++ = t;);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    *p = 0;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> p - dst;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="mov_8c.html#a67f2dc82a05c3332e06ac89399eff342">  182</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a67f2dc82a05c3332e06ac89399eff342">mov_read_covr</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <a class="code" href="extract__extradata__bsf_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">case</span> 0xd:  <span class="keywordtype">id</span> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409">AV_CODEC_ID_MJPEG</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">case</span> 0xe:  <span class="keywordtype">id</span> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea13651c88d4a774a1012b40f6087b5fb9">AV_CODEC_ID_PNG</a>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">case</span> 0x1b: <span class="keywordtype">id</span> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceabb04ef46d4490540a3a0243aaa919fc9">AV_CODEC_ID_BMP</a>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown cover type: 0x%x.\n&quot;</span>, <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    st = <a class="code" href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (!st)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    sc = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*sc));</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (!sc)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a> = sc;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avformat_8h.html#a9d2e6f22150d98c36dcc2c6c49318019">av_get_packet</a>(pb, &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a8c689ee00c0dfe4313891f8a2ea21f4d">attached_pic</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a8c689ee00c0dfe4313891f8a2ea21f4d">attached_pic</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> &gt;= 8 &amp;&amp; <span class="keywordtype">id</span> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceabb04ef46d4490540a3a0243aaa919fc9">AV_CODEC_ID_BMP</a>) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="avr32_2intreadwrite_8h.html#ad3c990d78933aafd8096a21f01c19051">AV_RB64</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a8c689ee00c0dfe4313891f8a2ea21f4d">attached_pic</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>) == 0x89504e470d0a1a0a) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordtype">id</span> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea13651c88d4a774a1012b40f6087b5fb9">AV_CODEC_ID_PNG</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordtype">id</span> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409">AV_CODEC_ID_MJPEG</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a>              |= <a class="code" href="avformat_8h.html#ab54a3e54e88a8f7d7760e60b49944e44">AV_DISPOSITION_ATTACHED_PIC</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a8c689ee00c0dfe4313891f8a2ea21f4d">attached_pic</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a8c689ee00c0dfe4313891f8a2ea21f4d">attached_pic</a>.<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a>       |= <a class="code" href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>   = <a class="code" href="extract__extradata__bsf_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">// 3GPP TS 26.244</span></div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="mov_8c.html#a657f313c3de883cb47b5778cad7533e2">  231</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a657f313c3de883cb47b5778cad7533e2">mov_metadata_loci</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">unsigned</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>[4] = { 0 };</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordtype">char</span> buf[200], place[100];</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    uint16_t langcode = 0;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordtype">double</span> longitude, latitude, altitude;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;location&quot;</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 4 + 2 + 1 + 1 + 4 + 4 + 4) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;loci too short\n&quot;</span>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 4); <span class="comment">// version+flags</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    langcode = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="isom_8c.html#a7fcc96a0df9e92e9700ca7360c38192d">ff_mov_lang_to_iso639</a>(langcode, <a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> -= 6;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> -= <a class="code" href="avio_8h.html#abeee0414e5f2ce5b150cf9c5694a2e4f">avio_get_str</a>(pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, place, <span class="keyword">sizeof</span>(place));</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 1) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;place name too long\n&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 1); <span class="comment">// role</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> -= 1;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 12) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;               <span class="stringliteral">&quot;loci too short (%u bytes left, need at least %d)\n&quot;</span>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, 12);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    longitude = ((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb)) / (<span class="keywordtype">float</span>) (1 &lt;&lt; 16);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    latitude  = ((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb)) / (<span class="keywordtype">float</span>) (1 &lt;&lt; 16);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    altitude  = ((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb)) / (<span class="keywordtype">float</span>) (1 &lt;&lt; 16);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// Try to output in the same format as the ?xyz field</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%+08.4f%+09.4f&quot;</span>,  latitude, longitude);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (altitude)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="avstring_8c.html#a98e5858f933c6e6be64f03a76e22b272">av_strlcatf</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%+f&quot;</span>, altitude);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="avstring_8c.html#a98e5858f933c6e6be64f03a76e22b272">av_strlcatf</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;/%s&quot;</span>, place);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a> &amp;&amp; strcmp(<a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>, <span class="stringliteral">&quot;und&quot;</span>)) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordtype">char</span> key2[16];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(key2, <span class="keyword">sizeof</span>(key2), <span class="stringliteral">&quot;%s-%s&quot;</span>, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, key2, buf, 0);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;event_flags |= <a class="code" href="avformat_8h.html#a19485b8b52e579db560875e9a1e44e7a">AVFMT_EVENT_FLAG_METADATA_UPDATED</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, buf, 0);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="mov_8c.html#a4433074124d42d076bbf3bc587dbb176">  281</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a4433074124d42d076bbf3bc587dbb176">mov_metadata_hmmt</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">unsigned</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, n_hmmt;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 2)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ignore_chapters)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    n_hmmt = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n_hmmt &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordtype">int</span> moment_time = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="libavformat_2internal_8h.html#add2b61dc8834f793e0f2fe7f099f06d1">avpriv_new_chapter</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(1, 1000), moment_time, <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="mov_8c.html#ad8b386f328990078743dafa6a43c052a">  298</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ad8b386f328990078743dafa6a43c052a">mov_read_udta_string</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;{</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordtype">char</span> tmp_key[<a class="code" href="group__lavu__misc.html#gaed5482506b009b48569356a08b21e403">AV_FOURCC_MAX_STRING_SIZE</a>] = {0};</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordtype">char</span> key2[32], <a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>[4] = {0};</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    uint16_t langcode = 0;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    uint32_t data_type = 0, str_size, str_size_alloc;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> (*<a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a>)(<a class="code" href="struct_m_o_v_context.html">MOVContext</a>*, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a>*, unsigned, <span class="keyword">const</span> <span class="keywordtype">char</span>*) = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordtype">int</span> raw = 0;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">int</span> num = 0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">switch</span> (atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a>) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;@&#39;</span>,<span class="charliteral">&#39;P&#39;</span>,<span class="charliteral">&#39;R&#39;</span>,<span class="charliteral">&#39;M&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;premiere_version&quot;</span>; raw = 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;@&#39;</span>,<span class="charliteral">&#39;P&#39;</span>,<span class="charliteral">&#39;R&#39;</span>,<span class="charliteral">&#39;Q&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;quicktime_version&quot;</span>; raw = 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;X&#39;</span>,<span class="charliteral">&#39;M&#39;</span>,<span class="charliteral">&#39;P&#39;</span>,<span class="charliteral">&#39;_&#39;</span>):</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;export_xmp) { <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;xmp&quot;</span>; raw = 1; } <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;A&#39;</span>,<span class="charliteral">&#39;R&#39;</span>,<span class="charliteral">&#39;T&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;album_artist&quot;</span>;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;k&#39;</span>,<span class="charliteral">&#39;I&#39;</span>,<span class="charliteral">&#39;D&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;account_type&quot;</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;I&#39;</span>,<span class="charliteral">&#39;D&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;account_id&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;g&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;category&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;l&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;compilation&quot;</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;t&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;copyright&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;c&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;description&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;k&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;disc&quot;</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#a7d269968b33e484d177b259c879e74e6">mov_metadata_track_or_disc_number</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;g&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;d&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;episode_uid&quot;</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;F&#39;</span>,<span class="charliteral">&#39;I&#39;</span>,<span class="charliteral">&#39;R&#39;</span>,<span class="charliteral">&#39;M&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;firmware&quot;</span>; raw = 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;g&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;genre&quot;</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#a3ce9dddcb355975fd253976f5dda71f2">mov_metadata_gnre</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;d&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;hd_video&quot;</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;H&#39;</span>,<span class="charliteral">&#39;M&#39;</span>,<span class="charliteral">&#39;M&#39;</span>,<span class="charliteral">&#39;T&#39;</span>):</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a4433074124d42d076bbf3bc587dbb176">mov_metadata_hmmt</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;k&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;y&#39;</span>,<span class="charliteral">&#39;w&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;keywords&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;s&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;synopsis&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;i&#39;</span>):</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a657f313c3de883cb47b5778cad7533e2">mov_metadata_loci</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;u&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;make&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;l&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;model&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;podcast&quot;</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;g&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;p&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;gapless_playback&quot;</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;d&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;purchase_date&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;g&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;rating&quot;</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;a&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;sort_album_artist&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;l&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;sort_album&quot;</span>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;r&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;sort_artist&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;o&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;sort_composer&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;m&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;sort_name&quot;</span>;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;n&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;sort_show&quot;</span>;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;k&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;media_type&quot;</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;k&#39;</span>,<span class="charliteral">&#39;n&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;track&quot;</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#a7d269968b33e484d177b259c879e74e6">mov_metadata_track_or_disc_number</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;episode_id&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;s&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;episode_sort&quot;</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#a64db6ed08b0c302f839f83c7a6aa0b5d">mov_metadata_int8_bypass_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;n&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;network&quot;</span>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;h&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;show&quot;</span>;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;n&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;season_number&quot;</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#a64db6ed08b0c302f839f83c7a6aa0b5d">mov_metadata_int8_bypass_padding</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;A&#39;</span>,<span class="charliteral">&#39;R&#39;</span>,<span class="charliteral">&#39;T&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;artist&quot;</span>;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;P&#39;</span>,<span class="charliteral">&#39;R&#39;</span>,<span class="charliteral">&#39;D&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;producer&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;b&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;album&quot;</span>;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;t&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;artist&quot;</span>;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;p&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;chapter&quot;</span>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;t&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;comment&quot;</span>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;m&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;composer&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;y&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;copyright&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;y&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;date&quot;</span>;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;r&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;director&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;s&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;disclaimer&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;1&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;edit_date&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;c&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;encoder&quot;</span>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;t&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;original_format&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;g&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;genre&quot;</span>;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;g&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;p&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;grouping&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;host_computer&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;f&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;comment&quot;</span>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;y&#39;</span>,<span class="charliteral">&#39;r&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;lyrics&quot;</span>;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;k&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;make&quot;</span>;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;d&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;model&quot;</span>;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;m&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;title&quot;</span>;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;e&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;original_artist&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;d&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;producer&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;f&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;performers&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;q&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;playback_requirements&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;c&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;original_source&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;3&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;subtitle&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;r&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;encoder&quot;</span>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;o&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;encoder&quot;</span>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;k&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;track&quot;</span>;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;l&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;URL&quot;</span>;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;n&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;warning&quot;</span>;   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;t&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;composer&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0xa9,<span class="charliteral">&#39;x&#39;</span>,<span class="charliteral">&#39;y&#39;</span>,<span class="charliteral">&#39;z&#39;</span>): <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <span class="stringliteral">&quot;location&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;retry:</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;itunes_metadata &amp;&amp; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; 8) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordtype">int</span> data_size = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;a&#39;</span>) &amp;&amp; data_size &lt;= atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            data_type = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// type</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// unknown</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            str_size = data_size - 16;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 16;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>, <span class="charliteral">&#39;o&#39;</span>, <span class="charliteral">&#39;v&#39;</span>, <span class="charliteral">&#39;r&#39;</span>)) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a67f2dc82a05c3332e06ac89399eff342">mov_read_covr</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, data_type, str_size);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error parsing cover art.\n&quot;</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= str_size;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; 8)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                    <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_hdlr_mdta &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                uint32_t <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(&amp;atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                <span class="keywordflow">if</span> (index &lt; c-&gt;meta_keys_count &amp;&amp; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &gt; 0) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                    <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                           <span class="stringliteral">&quot;The index of &#39;data&#39; is out of range: %&quot;</span>PRId32<span class="stringliteral">&quot; &lt; 1 or &gt;= %d.\n&quot;</span>,</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                           <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys_count);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; 4 &amp;&amp; <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> &amp;&amp; !<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;itunes_metadata &amp;&amp; !raw) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        str_size = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">// string length</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span> (str_size &gt; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            raw = 1;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, -2, SEEK_CUR);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;UDTA parsing failed retrying raw\n&quot;</span>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        langcode = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <a class="code" href="isom_8c.html#a7fcc96a0df9e92e9700ca7360c38192d">ff_mov_lang_to_iso639</a>(langcode, <a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 4;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        str_size = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;export_all &amp;&amp; !<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <a class="code" href="group__lavu__misc.html#gaf3ec42914c8ef8c78a01e8c00191db2f">av_fourcc_make_string</a>(tmp_key, atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a>);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 0 || str_size &gt;= INT_MAX/2)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Allocates enough space if data_type is a int32 or float32 number, otherwise</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// worst-case requirement for output string in case of utf8 coded input</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    num = (data_type &gt;= 21 &amp;&amp; data_type &lt;= 23);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    str_size_alloc = (num ? 512 : (raw ? str_size : str_size * 2)) + 1;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(str_size_alloc);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a>)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, str_size, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">if</span> (!raw &amp;&amp; (data_type == 3 || (data_type == 0 &amp;&amp; (langcode &lt; 0x400 || langcode == 0x7fff)))) { <span class="comment">// MAC Encoded</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <a class="code" href="mov_8c.html#ad03c2b9914f9ded24ee311a37d3678e6">mov_read_mac_string</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, str_size, <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>, str_size_alloc);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (data_type == 21) { <span class="comment">// BE signed integer, variable size</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = 0;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="keywordflow">if</span> (str_size == 1)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = (int8_t)<a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str_size == 2)</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = (int16_t)<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str_size == 3)</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = ((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>)(<a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb)&lt;&lt;8))&gt;&gt;8;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str_size == 4)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = (<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>)<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>, str_size_alloc, <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>) &gt;= str_size_alloc) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                       <span class="stringliteral">&quot;Failed to store the number (%d) in string.\n&quot;</span>, <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (data_type == 22) { <span class="comment">// BE unsigned integer, variable size</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = 0;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">if</span> (str_size == 1)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str_size == 2)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str_size == 3)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str_size == 4)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>, str_size_alloc, <span class="stringliteral">&quot;%u&quot;</span>, <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>) &gt;= str_size_alloc) {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                       <span class="stringliteral">&quot;Failed to store the number (%u) in string.\n&quot;</span>, <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (data_type == 23 &amp;&amp; str_size &gt;= 4) {  <span class="comment">// BE float32</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <span class="keywordtype">float</span> <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="intfloat_8h.html#a2dc216ec0441d07d650e42d7bdb94b00">av_int2float</a>(<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb));</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>, str_size_alloc, <span class="stringliteral">&quot;%f&quot;</span>, <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>) &gt;= str_size_alloc) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                       <span class="stringliteral">&quot;Failed to store the float32 number (%f) in string.\n&quot;</span>, <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>, str_size);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>[str_size] = 0;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;event_flags |= <a class="code" href="avformat_8h.html#a19485b8b52e579db560875e9a1e44e7a">AVFMT_EVENT_FLAG_METADATA_UPDATED</a>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>, 0);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">if</span> (*<a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a> &amp;&amp; strcmp(<a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>, <span class="stringliteral">&quot;und&quot;</span>)) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(key2, <span class="keyword">sizeof</span>(key2), <span class="stringliteral">&quot;%s-%s&quot;</span>, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, key2, <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>, 0);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">if</span> (!strcmp(<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <span class="stringliteral">&quot;encoder&quot;</span>)) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="namespaceconvert__header.html#ac8d67a61fdde2fcdd4358f78109f4b7a">major</a>, <a class="code" href="namespaceconvert__header.html#afbbd9db93850ca44e2f56ebb00ce0e0c">minor</a>, micro;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <span class="keywordflow">if</span> (sscanf(<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>, <span class="stringliteral">&quot;HandBrake %d.%d.%d&quot;</span>, &amp;<a class="code" href="namespaceconvert__header.html#ac8d67a61fdde2fcdd4358f78109f4b7a">major</a>, &amp;<a class="code" href="namespaceconvert__header.html#afbbd9db93850ca44e2f56ebb00ce0e0c">minor</a>, &amp;micro) == 3) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;handbrake_version = 1000000*<a class="code" href="namespaceconvert__header.html#ac8d67a61fdde2fcdd4358f78109f4b7a">major</a> + 1000*<a class="code" href="namespaceconvert__header.html#afbbd9db93850ca44e2f56ebb00ce0e0c">minor</a> + micro;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="mov_8c.html#a48655c15480a3c7c73cdcc06e60596df">  534</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a48655c15480a3c7c73cdcc06e60596df">mov_read_chpl</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;{</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    int64_t start;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, nb_chapters, str_len, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>[256+1];</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ignore_chapters)</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> ((atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 5) &lt; 0)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>)</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// ???</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    nb_chapters = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_chapters; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 9)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        start = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        str_len = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">if</span> ((atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 9+str_len) &lt; 0)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>, str_len);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>[str_len] = 0;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="libavformat_2internal_8h.html#add2b61dc8834f793e0f2fe7f099f06d1">avpriv_new_chapter</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){1,10000000}, start, <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>, <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="mov_8c.html#a85f4640d43cd6033a3091393a6d6de2c">  572</a></span>&#160;<span class="preprocessor">#define MIN_DATA_ENTRY_BOX_SIZE 12</span></div>
<div class="line"><a name="l00573"></a><span class="lineno"><a class="line" href="mov_8c.html#a3d3029b10248aba1a111aafe425b6c2c">  573</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a3d3029b10248aba1a111aafe425b6c2c">mov_read_dref</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;{</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordtype">int</span> entries, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// version + flags</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">if</span> (!entries ||</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        entries &gt;  (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 1) / <a class="code" href="mov_8c.html#a85f4640d43cd6033a3091393a6d6de2c">MIN_DATA_ENTRY_BOX_SIZE</a> + 1 ||</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        entries &gt;= UINT_MAX / <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>))</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa1bba687784303efce7036088d091169">drefs_count</a> = 0;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(entries * <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>));</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>)</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa1bba687784303efce7036088d091169">drefs_count</a> = entries;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <a class="code" href="struct_m_o_v_dref.html">MOVDref</a> *dref = &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        uint32_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        int64_t next = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - 4;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &lt; 12)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a525679c46eed049955180d9afe42dc5e">type</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// version + flags</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">if</span> (dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a525679c46eed049955180d9afe42dc5e">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;s&#39;</span>) &amp;&amp; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 150) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="comment">/* macintosh alias record */</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            uint16_t volume_len, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            int16_t <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 10);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            volume_len = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            volume_len = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(volume_len, 27);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a173376d100e710a1931210a28ba19ffe">volume</a>, 27);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a173376d100e710a1931210a28ba19ffe">volume</a>[volume_len] = 0;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;volume %s, len %d\n&quot;</span>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a173376d100e710a1931210a28ba19ffe">volume</a>, volume_len);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 12);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, 63);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#ae538b300dc51bb4e8bf604ae92a86724">filename</a>, 63);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            dref-&gt;<a class="code" href="struct_m_o_v_dref.html#ae538b300dc51bb4e8bf604ae92a86724">filename</a>[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>] = 0;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;filename %s, len %d\n&quot;</span>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#ae538b300dc51bb4e8bf604ae92a86724">filename</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 16);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="comment">/* read next level up_from_alias/down_to_target */</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a6d78d6ec25071906a615de754dd0aafe">nlvl_from</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a3dd8ed3b95d23a3c91a7ee458628c57c">nlvl_to</a>   = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;nlvl from %d, nlvl to %d\n&quot;</span>,</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                   dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a6d78d6ec25071906a615de754dd0aafe">nlvl_from</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a3dd8ed3b95d23a3c91a7ee458628c57c">nlvl_to</a>);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 16);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = 0; <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> != -1 &amp;&amp; <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) &lt; next; ) {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#a4db704ed3d00a4be632dad1585d01d92">avio_feof</a>(pb))</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;type %d, len %d\n&quot;</span>, <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>&amp;1)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> += 1;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == 2) { <span class="comment">// absolute path</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>+1);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                    <span class="keywordflow">if</span> (!dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt; volume_len &amp;&amp; !strncmp(dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a173376d100e710a1931210a28ba19ffe">volume</a>, volume_len)) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                        <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> -= volume_len;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                        memmove(dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>+volume_len, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                        dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>] = 0;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                    <span class="comment">// trim string of any ending zeros</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                    <span class="keywordflow">for</span> (j = <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1; j &gt;= 0; j--) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                        <span class="keywordflow">if</span> (dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>[j] == 0)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                            <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>--;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; j++)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        <span class="keywordflow">if</span> (dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>[j] == <span class="charliteral">&#39;:&#39;</span> || dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>[j] == 0)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                            dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>[j] = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;path %s\n&quot;</span>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == 0) { <span class="comment">// directory name</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>+1);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    <span class="keywordflow">if</span> (!dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>] = 0;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; j++)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                        <span class="keywordflow">if</span> (dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>[j] == <span class="charliteral">&#39;:&#39;</span>)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                            dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>[j] = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;dir %s\n&quot;</span>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Unknown dref type 0x%08&quot;</span>PRIx32<span class="stringliteral">&quot; size %&quot;</span>PRIu32<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                   dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a525679c46eed049955180d9afe42dc5e">type</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            entries--;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, next, SEEK_SET);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;}</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="mov_8c.html#a6ea0db3c8da4ed6aedbc6d991806a5e7">  710</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a6ea0db3c8da4ed6aedbc6d991806a5e7">mov_read_hdlr</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;{</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    uint32_t <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    uint32_t ctype;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    int64_t title_size;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordtype">char</span> *title_str;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="comment">/* component type */</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    ctype = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb); <span class="comment">/* component subtype */</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;ctype=%s\n&quot;</span>, <a class="code" href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a>(ctype));</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;stype=%s\n&quot;</span>, <a class="code" href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a>(<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>));</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trak_index &lt; 0) {  <span class="comment">// meta not inside a trak</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;a&#39;</span>)) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_hdlr_mdta = 1;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">if</span>     (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;e&#39;</span>))</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;n&#39;</span>))</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;1&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39; &#39;</span>))</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea90ffce5aedda33269b22221916cd8487">AV_CODEC_ID_MP2</a>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;p&#39;</span>)) || (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;p&#39;</span>)))</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* component  manufacture */</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* component flags */</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* component flags mask */</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    title_size = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 24;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (title_size &gt; 0) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="keywordflow">if</span> (title_size &gt; <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(INT_MAX, SIZE_MAX-1))</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        title_str = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(title_size + 1); <span class="comment">/* Add null terminator */</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">if</span> (!title_str)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, title_str, title_size);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;title_str);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        title_str[title_size] = 0;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">if</span> (title_str[0]) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <span class="keywordtype">int</span> off = (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;isom &amp;&amp; title_str[0] == title_size - 1);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="comment">// flag added so as to not set stream handler name if already set from mdia-&gt;hdlr</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;handler_name&quot;</span>, title_str + off, <a class="code" href="group__lavu__dict.html#ga8ed4237acfc3d68484301a5d1859936c">AV_DICT_DONT_OVERWRITE</a>);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;title_str);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="mov_8c.html#af63342dda926f662dfd06a83276016ae">  776</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#af63342dda926f662dfd06a83276016ae">mov_read_esds</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;{</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="isom_8h.html#a0efbc965f03455c5f6e09cbc7c0851d8">ff_mov_read_esds</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, pb);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno"><a class="line" href="mov_8c.html#aa601d2c95ca4e2cf283f5ea54fc02eae">  781</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aa601d2c95ca4e2cf283f5ea54fc02eae">mov_read_dac3</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;{</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gadcff0a5957a99f6fdf1eec9d5a3fdfaf">AVAudioServiceType</a> *ast;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordtype">int</span> ac3info, acmod, lfeon, bsmod;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    ast = (<span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gadcff0a5957a99f6fdf1eec9d5a3fdfaf">AVAudioServiceType</a>*)<a class="code" href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a66ec22464b50c285114e79604e9e0a0b">AV_PKT_DATA_AUDIO_SERVICE_TYPE</a>,</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                                                            <span class="keyword">sizeof</span>(*ast));</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (!ast)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    ac3info = <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    bsmod = (ac3info &gt;&gt; 14) &amp; 0x7;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    acmod = (ac3info &gt;&gt; 11) &amp; 0x7;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    lfeon = (ac3info &gt;&gt; 10) &amp; 0x1;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> = ((<span class="keywordtype">int</span>[]){2,1,2,3,3,4,4,5})[acmod] + lfeon;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">channel_layout</a> = <a class="code" href="ac3tab_8c.html#a0044a9d88d576681014599a70c2ae470">avpriv_ac3_channel_layout_tab</a>[acmod];</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">if</span> (lfeon)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">channel_layout</a> |= <a class="code" href="group__channel__masks.html#gab19b66e345cf1f9d50ffc26c28862bcc">AV_CH_LOW_FREQUENCY</a>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    *ast = bsmod;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> &gt; 1 &amp;&amp; bsmod == 0x7)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        *ast = <a class="code" href="group__lavc__core.html#ggadcff0a5957a99f6fdf1eec9d5a3fdfafab4290d124e49f795ef1ba709fc60233c">AV_AUDIO_SERVICE_TYPE_KARAOKE</a>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="preprocessor">#if FF_API_LAVF_AVCTX</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    st-&gt;codec-&gt;audio_service_type = *ast;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno"><a class="line" href="mov_8c.html#a63381c2ef75e97e3f061e6a38054397d">  817</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a63381c2ef75e97e3f061e6a38054397d">mov_read_dec3</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;{</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gadcff0a5957a99f6fdf1eec9d5a3fdfaf">AVAudioServiceType</a> *ast;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordtype">int</span> eac3info, acmod, lfeon, bsmod;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    ast = (<span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gadcff0a5957a99f6fdf1eec9d5a3fdfaf">AVAudioServiceType</a>*)<a class="code" href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a66ec22464b50c285114e79604e9e0a0b">AV_PKT_DATA_AUDIO_SERVICE_TYPE</a>,</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                                                            <span class="keyword">sizeof</span>(*ast));</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (!ast)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="comment">/* No need to parse fields for additional independent substreams and its</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">     * associated dependent substreams since libavcodec&#39;s E-AC-3 decoder</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">     * does not support them yet. */</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* data_rate and num_ind_sub */</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    eac3info = <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    bsmod = (eac3info &gt;&gt; 12) &amp; 0x1f;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    acmod = (eac3info &gt;&gt;  9) &amp; 0x7;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    lfeon = (eac3info &gt;&gt;  8) &amp; 0x1;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">channel_layout</a> = <a class="code" href="ac3tab_8c.html#a0044a9d88d576681014599a70c2ae470">avpriv_ac3_channel_layout_tab</a>[acmod];</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> (lfeon)</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">channel_layout</a> |= <a class="code" href="group__channel__masks.html#gab19b66e345cf1f9d50ffc26c28862bcc">AV_CH_LOW_FREQUENCY</a>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> = <a class="code" href="group__channel__mask__c.html#gac95619abeb32e4a3daa18e3ff3419380">av_get_channel_layout_nb_channels</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">channel_layout</a>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    *ast = bsmod;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> &gt; 1 &amp;&amp; bsmod == 0x7)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        *ast = <a class="code" href="group__lavc__core.html#ggadcff0a5957a99f6fdf1eec9d5a3fdfafab4290d124e49f795ef1ba709fc60233c">AV_AUDIO_SERVICE_TYPE_KARAOKE</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="preprocessor">#if FF_API_LAVF_AVCTX</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    st-&gt;codec-&gt;audio_service_type = *ast;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;}</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno"><a class="line" href="mov_8c.html#a55f711c3470444cb84ebd5c8147f7c3e">  857</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a55f711c3470444cb84ebd5c8147f7c3e">mov_read_ddts</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;{</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="preprocessor">#define DDTS_SIZE 20</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> buf[<a class="code" href="mov_8c.html#ac39bb0ccd6835057089e6ea715839a22">DDTS_SIZE</a> + <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>];</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    uint32_t frame_duration_code = 0;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    uint32_t channel_layout_code = 0;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> gb;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, buf, <a class="code" href="mov_8c.html#ac39bb0ccd6835057089e6ea715839a22">DDTS_SIZE</a>)) &lt; 0)</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a>(&amp;gb, buf, 8 * <a class="code" href="mov_8c.html#ac39bb0ccd6835057089e6ea715839a22">DDTS_SIZE</a>);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> = <a class="code" href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a>(&amp;gb, 32);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> &lt;= 0) {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid sample rate %d\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <a class="code" href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a>(&amp;gb, 32); <span class="comment">/* max bitrate */</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a5268fcf4ae8ed27edef54f836b926d93">bit_rate</a> = <a class="code" href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a>(&amp;gb, 32);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 8);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    frame_duration_code = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 2);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(&amp;gb, 30); <span class="comment">/* various fields */</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    channel_layout_code = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;gb, 16);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a0ce9631123719789e4c7b0c23c66d534">frame_size</a> =</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            (frame_duration_code == 0) ? 512 :</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            (frame_duration_code == 1) ? 1024 :</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            (frame_duration_code == 2) ? 2048 :</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            (frame_duration_code == 3) ? 4096 : 0;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> (channel_layout_code &gt; 0xff) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unsupported DTS audio channel layout\n&quot;</span>);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">channel_layout</a> =</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            ((channel_layout_code &amp; 0x1) ? <a class="code" href="group__channel__masks.html#ga88f2868b232a89fd11ad9d6c39d502a1">AV_CH_FRONT_CENTER</a> : 0) |</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            ((channel_layout_code &amp; 0x2) ? <a class="code" href="group__channel__masks.html#gaf9c5619f74c99ea8a8606719c01fe7df">AV_CH_FRONT_LEFT</a> : 0) |</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            ((channel_layout_code &amp; 0x2) ? <a class="code" href="group__channel__masks.html#ga394b4b2c87790178bf7b683b45320f31">AV_CH_FRONT_RIGHT</a> : 0) |</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            ((channel_layout_code &amp; 0x4) ? <a class="code" href="group__channel__masks.html#ga02e55f35249dfa57a2e4edfd3acfec4f">AV_CH_SIDE_LEFT</a> : 0) |</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            ((channel_layout_code &amp; 0x4) ? <a class="code" href="group__channel__masks.html#ga947b60ab70c428ebb07c8b9c87023b39">AV_CH_SIDE_RIGHT</a> : 0) |</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            ((channel_layout_code &amp; 0x8) ? <a class="code" href="group__channel__masks.html#gab19b66e345cf1f9d50ffc26c28862bcc">AV_CH_LOW_FREQUENCY</a> : 0);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> = <a class="code" href="group__channel__mask__c.html#gac95619abeb32e4a3daa18e3ff3419380">av_get_channel_layout_nb_channels</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">channel_layout</a>);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;}</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno"><a class="line" href="mov_8c.html#aae0ac907dc841d5f8166576898d8942b">  911</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aae0ac907dc841d5f8166576898d8942b">mov_read_chan</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;{</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 16)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="comment">/* skip version and flags */</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 4);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="mov__chan_8c.html#a17d5cf097504e7cdec558440c1ff2e6b">ff_mov_read_chan</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, pb, st, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 4);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;}</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="mov_8c.html#ab97063325c367ee12ad82f33dae0ec7c">  930</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ab97063325c367ee12ad82f33dae0ec7c">mov_read_wfex</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;{</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="riff_8h.html#a5e5faefb9c3eaa1df38a6c4f89f63df3">ff_get_wav_header</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;get_wav_header failed\n&quot;</span>);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;}</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno"><a class="line" href="mov_8c.html#aa909a33066d768a645349127a8085796">  945</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aa909a33066d768a645349127a8085796">mov_read_pasp</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;{</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> den = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> ((st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> != 1 || st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>) &amp;&amp; <span class="comment">// default</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        (den != st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> || num != st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>)) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;               <span class="stringliteral">&quot;sample aspect ratio already set to %d:%d, ignoring &#39;pasp&#39; atom (%d:%d)\n&quot;</span>,</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;               st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>,</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;               num, den);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (den != 0) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>,</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                  num, den, 32767);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    }</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;}</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">/* this atom contains actual media data */</span></div>
<div class="line"><a name="l00969"></a><span class="lineno"><a class="line" href="mov_8c.html#a9fbf91d5c580f97b066354c92d02367d">  969</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a9fbf91d5c580f97b066354c92d02367d">mov_read_mdat</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;{</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> == 0) <span class="comment">/* wrong one (MP4) */</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_mdat=1;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">/* now go for moov */</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;}</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160; </div>
<div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="mov_8c.html#a35f01be958ff6c4bbc82981841cf29b3">  977</a></span>&#160;<span class="preprocessor">#define DRM_BLOB_SIZE 56</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno"><a class="line" href="mov_8c.html#a680899af4dbed041439f97c450871f4a">  979</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a680899af4dbed041439f97c450871f4a">mov_read_adrm</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;{</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> intermediate_key[20];</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> intermediate_iv[20];</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>[64];</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a>[64];</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> file_checksum[20];</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> calculated_checksum[20];</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_a_v_s_h_a.html">AVSHA</a> *sha;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *activation_bytes = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;activation_bytes;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *fixed_key = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;audible_fixed_key;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aax_mode = 1;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    sha = <a class="code" href="group__lavu__sha.html#ga58c5632adf76c34993e509b3464496c5">av_sha_alloc</a>();</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">if</span> (!sha)</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aes_decrypt);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aes_decrypt = <a class="code" href="group__lavu__aes.html#ga82fd4287891dc9fe98ecfe26e1a66bbb">av_aes_alloc</a>();</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aes_decrypt) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="comment">/* drm blob processing */</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a>, 8); <span class="comment">// go to offset 8, absolute position 0x251</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <a class="code" href="mov_8c.html#a35f01be958ff6c4bbc82981841cf29b3">DRM_BLOB_SIZE</a>);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a>, 4); <span class="comment">// go to offset 4, absolute position 0x28d</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, file_checksum, 20);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;[aax] file checksum == &quot;</span>); <span class="comment">// required by external tools</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 20; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;%02x&quot;</span>, file_checksum[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="comment">/* verify activation data */</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keywordflow">if</span> (!activation_bytes) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;[aax] activation_bytes option is missing!\n&quot;</span>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;  <span class="comment">/* allow ffprobe to continue working on .aax files */</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;activation_bytes_size != 4) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;[aax] activation_bytes value needs to be 4 bytes!\n&quot;</span>);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="comment">/* verify fixed key */</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;audible_fixed_key_size != 16) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;[aax] audible_fixed_key value needs to be 16 bytes!\n&quot;</span>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="comment">/* AAX (and AAX+) key derivation */</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="code" href="group__lavu__sha.html#gaf53a37af454b04d4974861e931593e1a">av_sha_init</a>(sha, 160);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, fixed_key, 16);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, activation_bytes, 4);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="group__lavu__sha.html#gadc0f2ed085f24f10cacfcdfcfc2e0127">av_sha_final</a>(sha, intermediate_key);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="group__lavu__sha.html#gaf53a37af454b04d4974861e931593e1a">av_sha_init</a>(sha, 160);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, fixed_key, 16);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, intermediate_key, 20);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, activation_bytes, 4);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="group__lavu__sha.html#gadc0f2ed085f24f10cacfcdfcfc2e0127">av_sha_final</a>(sha, intermediate_iv);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <a class="code" href="group__lavu__sha.html#gaf53a37af454b04d4974861e931593e1a">av_sha_init</a>(sha, 160);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, intermediate_key, 16);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, intermediate_iv, 16);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="group__lavu__sha.html#gadc0f2ed085f24f10cacfcdfcfc2e0127">av_sha_final</a>(sha, calculated_checksum);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordflow">if</span> (memcmp(calculated_checksum, file_checksum, 20)) { <span class="comment">// critical error</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;[aax] mismatch in checksums!\n&quot;</span>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <a class="code" href="group__lavu__aes.html#ga54975ad71f0eab2287e3e94d561d0aa4">av_aes_init</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aes_decrypt, intermediate_key, 128, 1);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <a class="code" href="group__lavu__aes.html#gae2572febc1bdf0b6dcb8b313da69e06f">av_aes_crypt</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aes_decrypt, <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a>, <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <a class="code" href="mov_8c.html#a35f01be958ff6c4bbc82981841cf29b3">DRM_BLOB_SIZE</a> &gt;&gt; 4, intermediate_iv, 1);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="comment">// file data (in output) is stored in big-endian mode</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">if</span> (activation_bytes[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a>[3 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) { <span class="comment">// critical error</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;[aax] error in drm blob decryption!\n&quot;</span>);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        }</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    }</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    memcpy(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;file_key, <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a> + 8, 16);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    memcpy(<a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a> + 26, 16);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <a class="code" href="group__lavu__sha.html#gaf53a37af454b04d4974861e931593e1a">av_sha_init</a>(sha, 160);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, 16);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;file_key, 16);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <a class="code" href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a>(sha, fixed_key, 16);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <a class="code" href="group__lavu__sha.html#gadc0f2ed085f24f10cacfcdfcfc2e0127">av_sha_final</a>(sha, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;file_iv);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(sha);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;}</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"><a class="line" href="mov_8c.html#a54d80b093f80a575ef1b472fee527c70"> 1078</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a54d80b093f80a575ef1b472fee527c70">mov_aaxc_crypto</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>)</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;{</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;audible_key_size != 16) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;[aaxc] audible_key value needs to be 16 bytes!\n&quot;</span>);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;audible_iv_size != 16) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;[aaxc] audible_iv value needs to be 16 bytes!\n&quot;</span>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aes_decrypt = <a class="code" href="group__lavu__aes.html#ga82fd4287891dc9fe98ecfe26e1a66bbb">av_aes_alloc</a>();</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aes_decrypt) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    memcpy(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;file_key, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;audible_key, 16);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    memcpy(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;file_iv, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;audible_iv, 16);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aax_mode = 1;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;}</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">// Audible AAX (and AAX+) bytestream decryption</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"><a class="line" href="mov_8c.html#a20e97e5cf57f2e2909ccfb8e5fec6ab4"> 1103</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a20e97e5cf57f2e2909ccfb8e5fec6ab4">aax_filter</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>)</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;{</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordtype">int</span> blocks = 0;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> iv[16];</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    memcpy(iv, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;file_iv, 16); <span class="comment">// iv is overwritten</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    blocks = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt;&gt; 4; <span class="comment">// trailing bytes are not encrypted!</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <a class="code" href="group__lavu__aes.html#ga54975ad71f0eab2287e3e94d561d0aa4">av_aes_init</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aes_decrypt, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;file_key, 128, 1);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <a class="code" href="group__lavu__aes.html#gae2572febc1bdf0b6dcb8b313da69e06f">av_aes_crypt</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;aes_decrypt, <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, blocks, iv, 1);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;}</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">/* read major brand, minor version and compatible brands and store them as metadata */</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"><a class="line" href="mov_8c.html#abbf27107e908820027b42f73c07e2a44"> 1117</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#abbf27107e908820027b42f73c07e2a44">mov_read_ftyp</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;{</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    uint32_t minor_ver;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordtype">int</span> comp_brand_size;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordtype">char</span>* comp_brands_str;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>[5] = {0};</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, 4);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> (strcmp(<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, <span class="stringliteral">&quot;qt  &quot;</span>))</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;isom = 1;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;ISO: File Type Major Brand: %.4s\n&quot;</span>,(<span class="keywordtype">char</span> *)&amp;<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <span class="stringliteral">&quot;major_brand&quot;</span>, <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, 0);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    minor_ver = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* minor version */</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <a class="code" href="group__lavu__dict.html#gafd013a88620b2da7d497b083f6ea7d29">av_dict_set_int</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <span class="stringliteral">&quot;minor_version&quot;</span>, minor_ver, 0);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    comp_brand_size = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 8;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">if</span> (comp_brand_size &lt; 0 || comp_brand_size == INT_MAX)</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    comp_brands_str = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(comp_brand_size + 1); <span class="comment">/* Add null terminator */</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">if</span> (!comp_brands_str)</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, comp_brands_str, comp_brand_size);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;comp_brands_str);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    comp_brands_str[comp_brand_size] = 0;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <span class="stringliteral">&quot;compatible_brands&quot;</span>,</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                comp_brands_str, <a class="code" href="group__lavu__dict.html#ga7a9a991cb7837b10ffd44725263de425">AV_DICT_DONT_STRDUP_VAL</a>);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="comment">// Logic for handling Audible&#39;s .aaxc files</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">if</span> (!strcmp(<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, <span class="stringliteral">&quot;aaxc&quot;</span>)) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <a class="code" href="mov_8c.html#a54d80b093f80a575ef1b472fee527c70">mov_aaxc_crypto</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;}</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">/* this atom should contain all header atoms */</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"><a class="line" href="mov_8c.html#a74e4b292e1ce55e600d9623561f2cdcd"> 1159</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a74e4b292e1ce55e600d9623561f2cdcd">mov_read_moov</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;{</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_moov) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Found duplicated MOOV Atom. Skipped it\n&quot;</span>);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom)) &lt; 0)</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">/* we parsed the &#39;moov&#39; atom, we can terminate the parsing as soon as we find the &#39;mdat&#39; */</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="comment">/* so we don&#39;t parse the whole file if over a network */</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_moov=1;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">/* now go for mdat */</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;}</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"><a class="line" href="mov_8c.html#a7c11ff3d622d1f7d00f6c5ad06d42378"> 1177</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * <a class="code" href="mov_8c.html#a7c11ff3d622d1f7d00f6c5ad06d42378">get_frag_stream_info</a>(</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <a class="code" href="struct_m_o_v_fragment_index.html">MOVFragmentIndex</a> *frag_index,</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>,</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="struct_m_o_v_fragment_index_item.html">MOVFragmentIndexItem</a> * item;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">if</span> (index &lt; 0 || index &gt;= frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>)</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    item = &amp;frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a31b398f75fb1d776b548aa149616485f">nb_stream_info</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">if</span> (item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_stream_info.html#ab594b4274b19c26f3979fe74f67e88d1">id</a> == <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            <span class="keywordflow">return</span> &amp;item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="comment">// This shouldn&#39;t happen</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"><a class="line" href="mov_8c.html#afcc997e8985e3fc21ded47fcc59be837"> 1196</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#afcc997e8985e3fc21ded47fcc59be837">set_frag_stream</a>(<a class="code" href="struct_m_o_v_fragment_index.html">MOVFragmentIndex</a> *frag_index, <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;{</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="struct_m_o_v_fragment_index_item.html">MOVFragmentIndexItem</a> * item;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160; </div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="keywordflow">if</span> (frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#a62deee8990401b7c67abf978b663e385">current</a> &lt; 0 ||</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#a62deee8990401b7c67abf978b663e385">current</a> &gt;= frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>)</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    item = &amp;frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#a62deee8990401b7c67abf978b663e385">current</a>];</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a31b398f75fb1d776b548aa149616485f">nb_stream_info</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="keywordflow">if</span> (item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_stream_info.html#ab594b4274b19c26f3979fe74f67e88d1">id</a> == <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#afc8a0a0f6b7d9d525f786ff359768d57">current</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="comment">// id not found.  This shouldn&#39;t happen.</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#afc8a0a0f6b7d9d525f786ff359768d57">current</a> = -1;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;}</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"><a class="line" href="mov_8c.html#a9ec4d441a01a5ff31c301f33c2808ba9"> 1216</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * <a class="code" href="mov_8c.html#a9ec4d441a01a5ff31c301f33c2808ba9">get_current_frag_stream_info</a>(</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <a class="code" href="struct_m_o_v_fragment_index.html">MOVFragmentIndex</a> *frag_index)</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;{</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="struct_m_o_v_fragment_index_item.html">MOVFragmentIndexItem</a> *item;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">if</span> (frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#a62deee8990401b7c67abf978b663e385">current</a> &lt; 0 ||</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#a62deee8990401b7c67abf978b663e385">current</a> &gt;= frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>)</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    item = &amp;frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#a62deee8990401b7c67abf978b663e385">current</a>];</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">if</span> (item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#afc8a0a0f6b7d9d525f786ff359768d57">current</a> &gt;= 0 &amp;&amp; item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#afc8a0a0f6b7d9d525f786ff359768d57">current</a> &lt; item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a31b398f75fb1d776b548aa149616485f">nb_stream_info</a>)</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="keywordflow">return</span> &amp;item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a>[item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#afc8a0a0f6b7d9d525f786ff359768d57">current</a>];</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// This shouldn&#39;t happen</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;}</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; </div>
<div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="mov_8c.html#a02308509c67d186a1c12fb1177742443"> 1232</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a02308509c67d186a1c12fb1177742443">search_frag_moof_offset</a>(<a class="code" href="struct_m_o_v_fragment_index.html">MOVFragmentIndex</a> *frag_index, int64_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;{</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, m;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    int64_t moof_offset;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="comment">// Optimize for appending new entries</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">if</span> (!frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a> ||</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a> - 1].<a class="code" href="struct_m_o_v_fragment_index_item.html#a43b0442b2d759f5a02a968a457c47fa0">moof_offset</a> &lt; <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">return</span> frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = -1;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> - <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> &gt; 1) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        m = (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> + <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>) &gt;&gt; 1;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        moof_offset = frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[m].<a class="code" href="struct_m_o_v_fragment_index_item.html#a43b0442b2d759f5a02a968a457c47fa0">moof_offset</a>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordflow">if</span> (moof_offset &gt;= <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = m;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="keywordflow">if</span> (moof_offset &lt;= <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = m;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;}</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160; </div>
<div class="line"><a name="l01256"></a><span class="lineno"><a class="line" href="mov_8c.html#a32809eb421faa06966b71b6316b2426d"> 1256</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mov_8c.html#a32809eb421faa06966b71b6316b2426d">get_stream_info_time</a>(<a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * frag_stream_info)</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;{</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(frag_stream_info);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">if</span> (frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ae05623aea3738f661957b3b5c40ce117">sidx_pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <span class="keywordflow">return</span> frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ae05623aea3738f661957b3b5c40ce117">sidx_pts</a>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">if</span> (frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">first_tfra_pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="keywordflow">return</span> frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">first_tfra_pts</a>;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">return</span> frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a3e57c1446839c78f0bab2951c90c886e">tfdt_dts</a>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"><a class="line" href="mov_8c.html#a4798517db4dbcca8522dbd35b62ffb42"> 1266</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mov_8c.html#a4798517db4dbcca8522dbd35b62ffb42">get_frag_time</a>(<a class="code" href="struct_m_o_v_fragment_index.html">MOVFragmentIndex</a> *frag_index,</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                             <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <span class="keywordtype">int</span> track_id)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;{</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * frag_stream_info;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    int64_t timestamp;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">if</span> (track_id &gt;= 0) {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        frag_stream_info = <a class="code" href="mov_8c.html#a7c11ff3d622d1f7d00f6c5ad06d42378">get_frag_stream_info</a>(frag_index, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, track_id);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="keywordflow">return</span> frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ae05623aea3738f661957b3b5c40ce117">sidx_pts</a>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a31b398f75fb1d776b548aa149616485f">nb_stream_info</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        frag_stream_info = &amp;frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        timestamp = <a class="code" href="mov_8c.html#a32809eb421faa06966b71b6316b2426d">get_stream_info_time</a>(frag_stream_info);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="keywordflow">if</span> (timestamp != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <span class="keywordflow">return</span> timestamp;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;}</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160; </div>
<div class="line"><a name="l01287"></a><span class="lineno"><a class="line" href="mov_8c.html#ad2645191c02d305980033c92e8f402d1"> 1287</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ad2645191c02d305980033c92e8f402d1">search_frag_timestamp</a>(<a class="code" href="struct_m_o_v_fragment_index.html">MOVFragmentIndex</a> *frag_index,</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                                 <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, int64_t timestamp)</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;{</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, m, m0;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    int64_t frag_time;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordtype">int</span> <span class="keywordtype">id</span> = -1;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span> (st) {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <span class="comment">// If the stream is referenced by any sidx, limit the search</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <span class="comment">// to fragments that referenced this stream in the sidx</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9b6948eb6a7d702935ec1ff6afaa4a0a">has_sidx</a>)</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="keywordtype">id</span> = st-&gt;<a class="code" href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">id</a>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = -1;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> - <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> &gt; 1) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        m0 = m = (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> + <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>) &gt;&gt; 1;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="keywordflow">while</span> (m &lt; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &amp;&amp;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;               (frag_time = <a class="code" href="mov_8c.html#a4798517db4dbcca8522dbd35b62ffb42">get_frag_time</a>(frag_index, m, <span class="keywordtype">id</span>)) == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            m++;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">if</span> (m &lt; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &amp;&amp; frag_time &lt;= timestamp)</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = m;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = m0;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;}</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"><a class="line" href="mov_8c.html#a027536bc27f9a6ef7c11b785a959e490"> 1321</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a027536bc27f9a6ef7c11b785a959e490">update_frag_index</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, int64_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;{</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <a class="code" href="struct_m_o_v_fragment_index_item.html">MOVFragmentIndexItem</a> * item;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * frag_stream_info;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="comment">// If moof_offset already exists in frag_index, return index to it</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mov_8c.html#a02308509c67d186a1c12fb1177742443">search_frag_moof_offset</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">if</span> (index &lt; c-&gt;frag_index.nb_items &amp;&amp;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.item[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].moof_offset == <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">// offset is not yet in frag index.</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="comment">// Insert new item at index (sorted by moof offset)</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    item = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.item,</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                           &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.allocated_size,</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                           (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.nb_items + 1) *</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                           <span class="keyword">sizeof</span>(*<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.item));</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">if</span> (!item)</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.item = item;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    frag_stream_info = <a class="code" href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams,</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                                        <span class="keyword">sizeof</span>(*item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a>));</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">if</span> (!frag_stream_info)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="comment">// Avoid building frag index if streams lack track id.</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;id &lt; 0) {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(frag_stream_info);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        frag_stream_info[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_stream_info.html#ab594b4274b19c26f3979fe74f67e88d1">id</a> = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;id;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        frag_stream_info[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_stream_info.html#ae05623aea3738f661957b3b5c40ce117">sidx_pts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        frag_stream_info[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_stream_info.html#a3e57c1446839c78f0bab2951c90c886e">tfdt_dts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        frag_stream_info[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_stream_info.html#ab9d7a747ecfa0d08fe79e12f18fbcd1c">next_trun_dts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        frag_stream_info[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">first_tfra_pts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        frag_stream_info[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_stream_info.html#acb5a68d6be94437beeaf9108dcce0331">index_entry</a> = -1;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        frag_stream_info[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">encryption_index</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordflow">if</span> (index &lt; c-&gt;frag_index.nb_items)</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        memmove(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.item + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.item + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>,</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.nb_items - <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>) * <span class="keyword">sizeof</span>(*<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.item));</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    item = &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.item[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a0f2f77f5b374615e6cf039e8d8c6b21e">headers_read</a> = 0;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#afc8a0a0f6b7d9d525f786ff359768d57">current</a> = 0;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a31b398f75fb1d776b548aa149616485f">nb_stream_info</a> = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a43b0442b2d759f5a02a968a457c47fa0">moof_offset</a> = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a> = frag_stream_info;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.nb_items++;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;}</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"><a class="line" href="mov_8c.html#a622d566aa38da4ccadd3b5a2685f44d7"> 1379</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#a622d566aa38da4ccadd3b5a2685f44d7">fix_frag_index_entries</a>(<a class="code" href="struct_m_o_v_fragment_index.html">MOVFragmentIndex</a> *frag_index, <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>,</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                                   <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> entries)</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;{</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * frag_stream_info;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; 0)</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; frag_index-&gt;<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        frag_stream_info = <a class="code" href="mov_8c.html#a7c11ff3d622d1f7d00f6c5ad06d42378">get_frag_stream_info</a>(frag_index, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <span class="keywordflow">if</span> (frag_stream_info &amp;&amp; frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#acb5a68d6be94437beeaf9108dcce0331">index_entry</a> &gt;= 0)</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#acb5a68d6be94437beeaf9108dcce0331">index_entry</a> += entries;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    }</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;}</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"><a class="line" href="mov_8c.html#ad58579b0759ca14e3a687d0761cf6c37"> 1394</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ad58579b0759ca14e3a687d0761cf6c37">mov_read_moof</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;{</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="comment">// Set by mov_read_tfhd(). mov_read_trun() will reject files missing tfhd.</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment.found_tfhd = 0;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160; </div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;has_looked_for_mfra &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;use_mfra_for &gt; 0) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;has_looked_for_mfra = 1;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a0e3c41c290b38923880b9cccb669bf78">seekable</a> &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>) {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;stream has moof boxes, will look &quot;</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                    <span class="stringliteral">&quot;for a mfra\n&quot;</span>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a833f75276b1c37c78eb06d6f35a42c2e">mov_read_mfra</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb)) &lt; 0) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;found a moof box but failed to &quot;</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                        <span class="stringliteral">&quot;read the mfra (may be a live ismv)\n&quot;</span>);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            }</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;found a moof box but stream is not &quot;</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                    <span class="stringliteral">&quot;seekable, can not look for mfra\n&quot;</span>);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    }</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment.moof_offset = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment.implicit_offset = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) - 8;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;moof offset %&quot;</span>PRIx64<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment.moof_offset);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.current = <a class="code" href="mov_8c.html#a027536bc27f9a6ef7c11b785a959e490">update_frag_index</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment.moof_offset);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;}</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"><a class="line" href="mov_8c.html#a3d7d6b028cb698b14300e0ace9336dbe"> 1420</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#a3d7d6b028cb698b14300e0ace9336dbe">mov_metadata_creation_time</a>(<a class="code" href="struct_a_v_dictionary.html">AVDictionary</a> **metadata, int64_t time, <span class="keywordtype">void</span> *logctx)</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;{</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordflow">if</span> (time) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="keywordflow">if</span> (time &gt;= 2082844800)</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            time -= 2082844800;  <span class="comment">/* seconds between 1904-01-01 and Epoch */</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keywordflow">if</span> ((int64_t)(time * 1000000ULL) / 1000000 != time) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(logctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;creation_time is not representable\n&quot;</span>);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        <a class="code" href="dict_8c.html#adb9d691f87509f9f260769b3717d53c4">avpriv_dict_set_timestamp</a>(metadata, <span class="stringliteral">&quot;creation_time&quot;</span>, time * 1000000);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;}</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"><a class="line" href="mov_8c.html#a37ca04e208e4539edc5bff46ae7ef148"> 1435</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a37ca04e208e4539edc5bff46ae7ef148">mov_read_mdhd</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;{</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>[4] = {0};</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="keywordtype">unsigned</span> lang;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    int64_t creation_time;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160; </div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Multiple mdhd?\n&quot;</span>);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    }</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160; </div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> &gt; 1) {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <span class="stringliteral">&quot;Version %d&quot;</span>, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    }</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1) {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        creation_time = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        creation_time = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* modification time */</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    }</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <a class="code" href="mov_8c.html#a3d7d6b028cb698b14300e0ace9336dbe">mov_metadata_creation_time</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, creation_time, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> &lt;= 0) {</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid mdhd time scale %d, defaulting to 1\n&quot;</span>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> = 1;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> = (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1) ? <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb) : <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* duration */</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160; </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    lang = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* language */</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="isom_8c.html#a7fcc96a0df9e92e9700ca7360c38192d">ff_mov_lang_to_iso639</a>(lang, <a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>))</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;language&quot;</span>, <a class="code" href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a>, 0);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* quality */</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;}</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"><a class="line" href="mov_8c.html#a730c0993e55a88317c829d5caad17964"> 1484</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a730c0993e55a88317c829d5caad17964">mov_read_mvhd</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;{</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    int64_t creation_time;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        creation_time = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        creation_time = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* modification time */</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <a class="code" href="mov_8c.html#a3d7d6b028cb698b14300e0ace9336dbe">mov_metadata_creation_time</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, creation_time, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc);</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;time_scale = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* time scale */</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;time_scale &lt;= 0) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid mvhd time scale %d, defaulting to 1\n&quot;</span>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;time_scale);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;time_scale = 1;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    }</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;time scale = %i\n&quot;</span>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;time_scale);</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160; </div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;duration = (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1) ? <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb) : <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* duration */</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="comment">// set the AVFormatContext duration because the duration of individual tracks</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">// may be inaccurate</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;time_scale &gt; 0 &amp;&amp; !<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_data)</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;duration = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;duration, <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;time_scale);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* preferred scale */</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* preferred volume */</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 10); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="comment">/* movie display matrix, store it in main context and use it later on */</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;movie_display_matrix[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// 16.16 fixed point</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;movie_display_matrix[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// 16.16 fixed point</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;movie_display_matrix[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][2] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">//  2.30 fixed point</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    }</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* preview time */</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* preview duration */</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* poster time */</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* selection time */</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* selection duration */</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* current time */</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* next track ID */</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160; </div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;}</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160; </div>
<div class="line"><a name="l01535"></a><span class="lineno"><a class="line" href="mov_8c.html#a67867a7c5f0d6f8cc5c2fda4f2fd0776"> 1535</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a67867a7c5f0d6f8cc5c2fda4f2fd0776">mov_read_enda</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;{</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordtype">int</span> little_endian;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160; </div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    little_endian = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb) &amp; 0xFF;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;enda %d\n&quot;</span>, little_endian);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">if</span> (little_endian == 1) {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="keywordflow">switch</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) {</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea0513a388236f95e61e73b943e725d4a8">AV_CODEC_ID_PCM_S24BE</a>:</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be">AV_CODEC_ID_PCM_S24LE</a>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead316c7d2fd05155d39d862a23fda97a1">AV_CODEC_ID_PCM_S32BE</a>:</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6384417ba463d7aeb03015797cff3349">AV_CODEC_ID_PCM_S32LE</a>;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2e3b263e55bf4774f5a3a1d7b0261df4">AV_CODEC_ID_PCM_F32BE</a>:</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea0178ff664c08bd74594545ba0c5efacb">AV_CODEC_ID_PCM_F32LE</a>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceabbe3519b849a2acd3e8366bc1173f221">AV_CODEC_ID_PCM_F64BE</a>:</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea7a06659945e1b8973c6f4712d4910ba1">AV_CODEC_ID_PCM_F64LE</a>;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    }</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;}</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160; </div>
<div class="line"><a name="l01567"></a><span class="lineno"><a class="line" href="mov_8c.html#ac97751d9df6b48e286e9d4bfd2f997db"> 1567</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ac97751d9df6b48e286e9d4bfd2f997db">mov_read_colr</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;{</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *icc_profile;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="keywordtype">char</span> color_parameter_type[5] = { 0 };</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    uint16_t <a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a>, color_trc, color_matrix;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; </div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, color_parameter_type, 4);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">if</span> (strncmp(color_parameter_type, <span class="stringliteral">&quot;nclx&quot;</span>, 4) &amp;&amp;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        strncmp(color_parameter_type, <span class="stringliteral">&quot;nclc&quot;</span>, 4) &amp;&amp;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        strncmp(color_parameter_type, <span class="stringliteral">&quot;prof&quot;</span>, 4)) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;unsupported color_parameter_type %s\n&quot;</span>,</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;               color_parameter_type);</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">if</span> (!strncmp(color_parameter_type, <span class="stringliteral">&quot;prof&quot;</span>, 4)) {</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        icc_profile = <a class="code" href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a598cf63387504cbd709ca98402aa6591">AV_PKT_DATA_ICC_PROFILE</a>, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 4);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="keywordflow">if</span> (!icc_profile)</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, icc_profile, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 4);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        color_trc = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        color_matrix = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>,</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;               <span class="stringliteral">&quot;%s: pri %d trc %d matrix %d&quot;</span>,</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;               color_parameter_type, <a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a>, color_trc, color_matrix);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <span class="keywordflow">if</span> (!strncmp(color_parameter_type, <span class="stringliteral">&quot;nclx&quot;</span>, 4)) {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb) &gt;&gt; 7;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot; full %&quot;</span>PRIu8<span class="stringliteral">&quot;&quot;</span>, <a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a>);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a>)</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">color_range</a> = <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">color_range</a> = <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a>;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        }</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="pixdesc_8c.html#a811dbb6cf48bbcd66a1243bdd6d89909">av_color_primaries_name</a>(<a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a>))</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;            <a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a> = <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942">AVCOL_PRI_UNSPECIFIED</a>;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="pixdesc_8c.html#a2ebc788f298dc96bc647ebcdeeb5d0b2">av_color_transfer_name</a>(color_trc))</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            color_trc = <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab">AVCOL_TRC_UNSPECIFIED</a>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="pixdesc_8c.html#a7a5b3f4d128f0a0112b4a91f75055339">av_color_space_name</a>(color_matrix))</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            color_matrix = <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2">AVCOL_SPC_UNSPECIFIED</a>;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160; </div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#aa884cae3fd16b30c61201a686664f96b">color_primaries</a> = <a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#ac25ed8394e1efdbbcf28932ff0020893">color_trc</a>       = color_trc;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a020398a4963e932853cefc169d90456d">color_space</a>     = color_matrix;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;}</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160; </div>
<div class="line"><a name="l01630"></a><span class="lineno"><a class="line" href="mov_8c.html#aecde9171b3879bf22d783fed7427065a"> 1630</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aecde9171b3879bf22d783fed7427065a">mov_read_fiel</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;{</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordtype">unsigned</span> mov_field_order;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keyword">enum</span> <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02c">AVFieldOrder</a> decoded_field_order = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca886b3191488ef874bf3e94b3d9cec713">AV_FIELD_UNKNOWN</a>;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1) <span class="comment">// will happen with jp2 files</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 2)</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    mov_field_order = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">if</span> ((mov_field_order &amp; 0xFF00) == 0x0100)</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        decoded_field_order = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((mov_field_order &amp; 0xFF00) == 0x0200) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordflow">switch</span> (mov_field_order &amp; 0xFF) {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <span class="keywordflow">case</span> 0x01: decoded_field_order = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23">AV_FIELD_TT</a>;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <span class="keywordflow">case</span> 0x06: decoded_field_order = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4">AV_FIELD_BB</a>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <span class="keywordflow">case</span> 0x09: decoded_field_order = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02cae1efa8b010ca5331f1f845104e7c0667">AV_FIELD_TB</a>;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        <span class="keywordflow">case</span> 0x0E: decoded_field_order = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02caba81a12143ed2cea06438739a7caaafb">AV_FIELD_BT</a>;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;                   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        }</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordflow">if</span> (decoded_field_order == <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca886b3191488ef874bf3e94b3d9cec713">AV_FIELD_UNKNOWN</a> &amp;&amp; mov_field_order) {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unknown MOV field order 0x%04x\n&quot;</span>, mov_field_order);</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    }</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a153946872548cd56132907b93f05f9aa">field_order</a> = decoded_field_order;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160; </div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;}</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"><a class="line" href="mov_8c.html#ad7ddd490c50c44a5ffb243dab34168dd"> 1664</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ad7ddd490c50c44a5ffb243dab34168dd">mov_realloc_extradata</a>(<a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;{</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    uint64_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = (uint64_t)par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> + atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> + 8 + <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; INT_MAX || (uint64_t)atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; INT_MAX)</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="group__lavu__mem__funcs.html#ga9665abf3720f9f460790c2c3b224c052">av_reallocp</a>(&amp;par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)) &lt; 0) {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> = 0;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;}</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="comment">/* Read a whole atom into the extradata return the size of the atom read, possibly truncated if != atom.size */</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"><a class="line" href="mov_8c.html#aced32f6aa66b86fc377469c31f4df267"> 1679</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mov_8c.html#aced32f6aa66b86fc377469c31f4df267">mov_read_atom_into_extradata</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom,</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                                        <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf)</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;{</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    int64_t <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <a class="code" href="intreadwrite_8h.html#a36097280ddfe8ebfc825d0f98fd00621">AV_WB32</a>(buf    , atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> + 8);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <a class="code" href="intreadwrite_8h.html#a9aad44bed0c244bb2f4d3e7296b2946a">AV_WL32</a>(buf + 4, atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a>);</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    err = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, buf + 8, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0) {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> -= atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (err &lt; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;truncated extradata\n&quot;</span>);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> -= atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - err;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = err;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    memset(buf + 8 + err, 0, <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>);</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;}</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment">/* FIXME modify QDM2/SVQ3/H.264 decoders to take full atom as extradata */</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"><a class="line" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa"> 1701</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom,</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                              <span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <a class="code" href="vaapi__decode_8c.html#a0fd12851a78b80080e277db30411728d">codec_id</a>)</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;{</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    uint64_t original_size;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1) <span class="comment">// will happen with jp2 files</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160; </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="vaapi__decode_8c.html#a0fd12851a78b80080e277db30411728d">codec_id</a>)</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <span class="keywordflow">return</span> 0; <span class="comment">/* unexpected codec_id - don&#39;t mess with extradata */</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    original_size = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a>;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    err = <a class="code" href="mov_8c.html#ad7ddd490c50c44a5ffb243dab34168dd">mov_realloc_extradata</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, atom);</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    err =  <a class="code" href="mov_8c.html#aced32f6aa66b86fc377469c31f4df267">mov_read_atom_into_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>,  st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + original_size);</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">// Note: this is the original behavior to ignore truncation.</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;}</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160; </div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="comment">/* wrapper functions for reading ALAC/AVS/MJPEG/MJPEG2000 extradata atoms only for those codecs */</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"><a class="line" href="mov_8c.html#a8279ede4f07319c1c7d77fabad3dd5bf"> 1727</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a8279ede4f07319c1c7d77fabad3dd5bf">mov_read_alac</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;{</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea81f7bb2a5a480533df028153b1f664c6">AV_CODEC_ID_ALAC</a>);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;}</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160; </div>
<div class="line"><a name="l01732"></a><span class="lineno"><a class="line" href="mov_8c.html#aaa0ba57e95962f3a432ffa739fca0624"> 1732</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aaa0ba57e95962f3a432ffa739fca0624">mov_read_avss</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;{</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea4b48cce6b5f054407a9fb07fcacc81fe">AV_CODEC_ID_AVS</a>);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;}</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160; </div>
<div class="line"><a name="l01737"></a><span class="lineno"><a class="line" href="mov_8c.html#a8e9db231f227db2306d00fe4fae7dc9c"> 1737</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a8e9db231f227db2306d00fe4fae7dc9c">mov_read_jp2h</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;{</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea4ff1478f2b0f3bc728f6cce39d44b9f0">AV_CODEC_ID_JPEG2000</a>);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;}</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160; </div>
<div class="line"><a name="l01742"></a><span class="lineno"><a class="line" href="mov_8c.html#a3da5141b8315c758892c60dde3fc3274"> 1742</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a3da5141b8315c758892c60dde3fc3274">mov_read_dpxe</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;{</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadfd3b6add5f4c1dad10b85ef2f474efd">AV_CODEC_ID_R10K</a>);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;}</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160; </div>
<div class="line"><a name="l01747"></a><span class="lineno"><a class="line" href="mov_8c.html#aa269a6f909b4da737f6a17b8c5dc0552"> 1747</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aa269a6f909b4da737f6a17b8c5dc0552">mov_read_avid</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;{</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaea40e943e4002267e20c0dda6498a2e9">AV_CODEC_ID_AVUI</a>);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead36347b6ae291fc3cc95f84aecf8035a">AV_CODEC_ID_DNXHD</a>);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;}</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"><a class="line" href="mov_8c.html#aef4f0a1ca31729f9a3b06a93f1e2eb09"> 1755</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aef4f0a1ca31729f9a3b06a93f1e2eb09">mov_read_targa_y216</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;{</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceafe04f75e6fdfceac4db3c8f7b4726778">AV_CODEC_ID_TARGA_Y216</a>);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &gt;= 1) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1]-&gt;codecpar;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;        <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> &gt;= 40) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a>(&amp;par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>[36]);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>  = <a class="code" href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a>(&amp;par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>[38]);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        }</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    }</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;}</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160; </div>
<div class="line"><a name="l01769"></a><span class="lineno"><a class="line" href="mov_8c.html#a7db82c4aa095607ea3b443285588dc6f"> 1769</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a7db82c4aa095607ea3b443285588dc6f">mov_read_ares</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;{</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &gt;= 1) {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1]-&gt;codecpar;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;A&#39;</span>, <span class="charliteral">&#39;V&#39;</span>, <span class="charliteral">&#39;i&#39;</span>, <span class="charliteral">&#39;n&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a> &amp;&amp;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;            atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; 11) {</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a>;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 10);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            <a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            <span class="comment">/* For AVID AVCI50, force width of 1440 to be able to select the correct SPS and PPS */</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a> == 0xd4d || <a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a> == 0xd4e)</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> = 1440;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;A&#39;</span>, <span class="charliteral">&#39;V&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;1&#39;</span>) ||</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                    par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;A&#39;</span>, <span class="charliteral">&#39;V&#39;</span>, <span class="charliteral">&#39;j&#39;</span>, <span class="charliteral">&#39;2&#39;</span>) ||</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                    par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;A&#39;</span>, <span class="charliteral">&#39;V&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;n&#39;</span>)) &amp;&amp;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                   atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt;= 24) {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            <span class="keywordtype">int</span> num, den;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 12);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            num = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            den = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="keywordflow">if</span> (num &lt;= 0 || den &lt;= 0)</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb)) {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                <span class="keywordflow">if</span> (den &gt;= INT_MAX / 2)</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                den *= 2;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1]-&gt;internal-&gt;display_aspect_ratio.num = num;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1]-&gt;internal-&gt;display_aspect_ratio.den = den;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            }</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    }</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160; </div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#aa269a6f909b4da737f6a17b8c5dc0552">mov_read_avid</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;}</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"><a class="line" href="mov_8c.html#a18642b86a90a58b7915691b57f44fb11"> 1810</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a18642b86a90a58b7915691b57f44fb11">mov_read_aclr</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;{</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keywordtype">int</span> length = 0;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    uint64_t original_size;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &gt;= 1) {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1]-&gt;codecpar;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>)</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> == 16) {</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            original_size = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a>;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#ad7ddd490c50c44a5ffb243dab34168dd">mov_realloc_extradata</a>(par, atom);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                length =  <a class="code" href="mov_8c.html#aced32f6aa66b86fc377469c31f4df267">mov_read_atom_into_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, par, par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + original_size);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                <span class="keywordflow">if</span> (length == atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>) {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> range_value = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>[original_size + 19];</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                    <span class="keywordflow">switch</span> (range_value) {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                        par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">color_range</a> = <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a>;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                        par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">color_range</a> = <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a>;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;ignored unknown aclr value (%d)\n&quot;</span>, range_value);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                    }</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#a8e3eb32799f4637fcdd75bb9099142ff">ff_dlog</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <span class="stringliteral">&quot;color_range: %d\n&quot;</span>, par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">color_range</a>);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                  <span class="comment">/* For some reason the whole atom was not added to the extradata */</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                  <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;aclr not decoded - incomplete atom\n&quot;</span>);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                }</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;aclr not decoded - unable to add atom to extradata\n&quot;</span>);</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            }</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;aclr not decoded - unexpected size %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    }</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160; </div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;}</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"><a class="line" href="mov_8c.html#a8b440f4488e029ce5c55bba51498ef31"> 1853</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a8b440f4488e029ce5c55bba51498ef31">mov_read_svq3</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;{</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom, <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea35e8d1b643beef5a57fffbd2b3f44050">AV_CODEC_ID_SVQ3</a>);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;}</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160; </div>
<div class="line"><a name="l01858"></a><span class="lineno"><a class="line" href="mov_8c.html#a3fe0ac17ee031337ba46f3eaaf7b8cbe"> 1858</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a3fe0ac17ee031337ba46f3eaaf7b8cbe">mov_read_wave</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;{</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160; </div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">if</span> ((uint64_t)atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; (1&lt;&lt;30))</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead2cbe7fc8799aad9f808e81723e4452f">AV_CODEC_ID_QDM2</a> ||</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf1fd3864a6fd0e82163fd85a0cadbbb0">AV_CODEC_ID_QDMC</a> ||</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceae6753ab38dc444ec81089ad18f962cbb">AV_CODEC_ID_SPEEX</a>) {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        <span class="comment">// pass all frma atom to codec, needed at least for QDMC and QDM2</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#ae829eaf74d06f3a6cb1b9ad07560fb92">ff_get_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; 8) { <span class="comment">/* to read frma, esds atoms */</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea81f7bb2a5a480533df028153b1f664c6">AV_CODEC_ID_ALAC</a> &amp;&amp; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt;= 24) {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;            uint64_t <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#a611e256e774947becb208527333eb284">ffio_ensure_seekback</a>(pb, 8);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 8;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            <span class="keywordflow">if</span> (  (<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> &amp; 0xFFFFFFFF) == <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;a&#39;</span>)</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                &amp;&amp; <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> &gt;&gt; 32 &lt;= atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                &amp;&amp; <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> &gt;&gt; 32 &gt;= 8) {</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, -8);</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> += 8;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a>) {</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="preprocessor">#define ALAC_EXTRADATA_SIZE 36</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="mov_8c.html#af838eccccc4fca0e4a7f2ce886ed0d31">ALAC_EXTRADATA_SIZE</a> + <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>)</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> = <a class="code" href="mov_8c.html#af838eccccc4fca0e4a7f2ce886ed0d31">ALAC_EXTRADATA_SIZE</a>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                <a class="code" href="intreadwrite_8h.html#a36097280ddfe8ebfc825d0f98fd00621">AV_WB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>    , <a class="code" href="mov_8c.html#af838eccccc4fca0e4a7f2ce886ed0d31">ALAC_EXTRADATA_SIZE</a>);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                <a class="code" href="intreadwrite_8h.html#a36097280ddfe8ebfc825d0f98fd00621">AV_WB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 4, <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;c&#39;</span>));</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                <a class="code" href="intreadwrite_8h.html#afd2d38dbc4338142d73bbd42c59ac186">AV_WB64</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 12, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                <a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 20, 16);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 24);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            }</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        }</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom)) &lt; 0)</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;}</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160; </div>
<div class="line"><a name="l01915"></a><span class="lineno"><a class="line" href="mov_8c.html#abaa02c4c48dde0be52b2e61d23ddd3cc"> 1915</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#abaa02c4c48dde0be52b2e61d23ddd3cc">mov_read_glbl</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;{</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160; </div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keywordflow">if</span> ((uint64_t)atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; (1&lt;&lt;30))</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt;= 10) {</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        <span class="comment">// Broken files created by legacy versions of libavformat will</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        <span class="comment">// wrap a whole fiel atom inside of a glbl atom.</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, -8, SEEK_CUR);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;l&#39;</span>) &amp;&amp; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> == atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>)</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    }</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> &gt; 1 &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>) {</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;ignoring multiple glbl\n&quot;</span>);</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    }</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#ae829eaf74d06f3a6cb1b9ad07560fb92">ff_get_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;C&#39;</span>) &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;1&#39;</span>))</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        <span class="comment">/* HEVC-based Dolby Vision derived from hvc1.</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">           Happens to match with an identifier</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment">           previously utilized for DV. Thus, if we have</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">           the hvcC extradata box available as specified,</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment">           set codec to HEVC */</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa3e19a45b81bb602a4a37a4221274a20">AV_CODEC_ID_HEVC</a>;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160; </div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;}</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"><a class="line" href="mov_8c.html#ace296eb5fd99ec8af19e5a1a56ea4404"> 1954</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ace296eb5fd99ec8af19e5a1a56ea4404">mov_read_dvc1</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;{</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> profile_level;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160; </div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt;= (1&lt;&lt;28) || atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 7)</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160; </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    profile_level = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="keywordflow">if</span> ((profile_level &amp; 0xf0) != 0xc0)</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160; </div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, 6, SEEK_CUR);</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#ae829eaf74d06f3a6cb1b9ad07560fb92">ff_get_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 7);</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160; </div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;}</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160; </div>
<div class="line"><a name="l01984"></a><span class="lineno"><a class="line" href="mov_8c.html#a61c9bcbec06d59f84294fbb3a73e1603"> 1984</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a61c9bcbec06d59f84294fbb3a73e1603">mov_read_strf</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;{</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160; </div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt;= 40)</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160; </div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <span class="keywordflow">if</span> ((uint64_t)atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; (1&lt;&lt;30))</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 40);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#ae829eaf74d06f3a6cb1b9ad07560fb92">ff_get_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 40);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;}</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"><a class="line" href="mov_8c.html#a4a242ca415ec9e93fa321b859b21fe48"> 2006</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a4a242ca415ec9e93fa321b859b21fe48">mov_read_stco</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;{</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, entries;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trak_index &lt; 0) {</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;STCO outside TRAK\n&quot;</span>);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    }</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160; </div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160; </div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordflow">if</span> (!entries)</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>)</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Duplicated STCO atom\n&quot;</span>);</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a> = 0;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a> = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(entries, <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>));</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>)</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a> = entries;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160; </div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="keywordflow">if</span>      (atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;o&#39;</span>))</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;6&#39;</span>,<span class="charliteral">&#39;4&#39;</span>))</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; </div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160; </div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted STCO atom\n&quot;</span>);</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;}</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160; </div>
<div class="line"><a name="l02057"></a><span class="lineno"><a class="line" href="mov_8c.html#add7c4085afb7068235318b45c3c301ab"> 2057</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#add7c4085afb7068235318b45c3c301ab">mov_codec_id</a>(<a class="code" href="struct_a_v_stream.html">AVStream</a> *st, uint32_t <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>)</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;{</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="libavformat_2internal_8h.html#af9e8f2bbcbb1bcf5b4cd5fcc4293375a">ff_codec_get_id</a>(<a class="code" href="isom_8c.html#a3e1264ee30ac868bfb81d2830f6a3b52">ff_codec_movaudio_tags</a>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160; </div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt;= 0 &amp;&amp;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        ((<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> &amp; 0xFFFF) == <span class="charliteral">&#39;m&#39;</span> + (<span class="charliteral">&#39;s&#39;</span> &lt;&lt; 8) ||</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;         (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> &amp; 0xFFFF) == <span class="charliteral">&#39;T&#39;</span> + (<span class="charliteral">&#39;S&#39;</span> &lt;&lt; 8)))</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <span class="keywordtype">id</span> = <a class="code" href="libavformat_2internal_8h.html#af9e8f2bbcbb1bcf5b4cd5fcc4293375a">ff_codec_get_id</a>(<a class="code" href="riff_8c.html#aeb42da0d9adf5affab3b0f64c2ead98a">ff_codec_wav_tags</a>, <a class="code" href="bfin_2bswap_8h.html#a9b3255993c3a688d63f61455099472f1">av_bswap32</a>(<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>) &amp; 0xFFFF);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160; </div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> &amp;&amp; <span class="keywordtype">id</span> &gt; 0) {</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp;</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;               <span class="comment">/* skip old ASF MPEG-4 tag */</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;               <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> &amp;&amp; <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;4&#39;</span>,<span class="charliteral">&#39;s&#39;</span>)) {</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        <span class="keywordtype">id</span> = <a class="code" href="libavformat_2internal_8h.html#af9e8f2bbcbb1bcf5b4cd5fcc4293375a">ff_codec_get_id</a>(<a class="code" href="isom_8c.html#a49f1e7625dcea066fdb0273f29980f1d">ff_codec_movvideo_tags</a>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt;= 0)</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            <span class="keywordtype">id</span> = <a class="code" href="libavformat_2internal_8h.html#af9e8f2bbcbb1bcf5b4cd5fcc4293375a">ff_codec_get_id</a>(<a class="code" href="riff_8c.html#ab352e82619d77c87a198467142d86b25">ff_codec_bmp_tags</a>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt; 0)</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a> ||</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                    (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a> &amp;&amp;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a>)) {</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            <span class="keywordtype">id</span> = <a class="code" href="libavformat_2internal_8h.html#af9e8f2bbcbb1bcf5b4cd5fcc4293375a">ff_codec_get_id</a>(<a class="code" href="isom_8c.html#adfcff83a3c1e724ca9f8d2a3d29e760c">ff_codec_movsubtitle_tags</a>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt; 0)</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>;</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                <span class="keywordtype">id</span> = <a class="code" href="libavformat_2internal_8h.html#af9e8f2bbcbb1bcf5b4cd5fcc4293375a">ff_codec_get_id</a>(<a class="code" href="isom_8c.html#ad0b12ad4b1be6b0d15ada9616944ebcf">ff_codec_movdata_tags</a>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        }</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    }</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160; </div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160; </div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="extract__extradata__bsf_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a>;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;}</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160; </div>
<div class="line"><a name="l02092"></a><span class="lineno"><a class="line" href="mov_8c.html#a0ee4ed7673e27805831071a544b0026e"> 2092</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#a0ee4ed7673e27805831071a544b0026e">mov_parse_stsd_video</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                                 <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc)</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;{</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> codec_name[32] = { 0 };</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    int64_t stsd_start;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <span class="comment">/* The first 16 bytes of the video sample description are already</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">     * read in ff_mov_read_stsd_entries() */</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    stsd_start = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) - 16;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160; </div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* revision level */</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* vendor */</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* temporal quality */</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* spatial quality */</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160; </div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>  = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* width */</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* height */</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160; </div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* horiz resolution */</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* vert resolution */</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* data size, always 0 */</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* frames per samples */</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160; </div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* codec name, pascal string */</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt; 31)</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = 31;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    <a class="code" href="mov_8c.html#ad03c2b9914f9ded24ee311a37d3678e6">mov_read_mac_string</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, codec_name, <span class="keyword">sizeof</span>(codec_name));</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 31)</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 31 - <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160; </div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <span class="keywordflow">if</span> (codec_name[0])</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;encoder&quot;</span>, codec_name, 0);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; </div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="comment">/* codec_tag YV12 triggers an UV swap in rawdec.c */</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordflow">if</span> (!strncmp(codec_name, <span class="stringliteral">&quot;Planar Y&#39;CbCr 8-bit 4:2:0&quot;</span>, 25)) {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> = <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;I&#39;</span>, <span class="charliteral">&#39;4&#39;</span>, <span class="charliteral">&#39;2&#39;</span>, <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> &amp;= ~1;</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> &amp;= ~1;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    }</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="comment">/* Flash Media Server uses tag H.263 with Sorenson Spark */</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;H&#39;</span>,<span class="charliteral">&#39;2&#39;</span>,<span class="charliteral">&#39;6&#39;</span>,<span class="charliteral">&#39;3&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        !strncmp(codec_name, <span class="stringliteral">&quot;Sorenson H263&quot;</span>, 13))</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea130d77683c690fdeeb9de1e9409d06d4">AV_CODEC_ID_FLV1</a>;</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160; </div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* depth */</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160; </div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, stsd_start, SEEK_SET);</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160; </div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="qtpalette_8c.html#aa114a556431ba0d6fd5b43c6467d88c0">ff_get_qtpalette</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>, pb, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad08ac0d782cb0dc5bfbc4e55b2a33dcb">palette</a>)) {</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> &amp;= 0x1F;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ac5f6d29e85c283cb1ecadce3bb7e1c13">has_palette</a> = 1;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    }</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;}</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"><a class="line" href="mov_8c.html#af1fc60aabb6b5db23ed3e383bef7a3e3"> 2148</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#af1fc60aabb6b5db23ed3e383bef7a3e3">mov_parse_stsd_audio</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                                 <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc)</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;{</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordtype">int</span> bits_per_sample, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    uint16_t <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *compatible_brands = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <span class="stringliteral">&quot;compatible_brands&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__dict.html#gad9cbc53cec515b72ae7caa2e194c6bc0">AV_DICT_MATCH_CASE</a>);</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160; </div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* revision level */</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* vendor */</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160; </div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>              = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* channel count */</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* sample size */</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;audio channels %d\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>);</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a81cc2a2e3a232c1e929fafa0c6847ceb">audio_cid</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* packet size = 0 */</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160; </div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> = ((<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb) &gt;&gt; 16));</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160; </div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="comment">// Read QT version 1 fields. In version 0 these do not exist.</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;version =%d, isom =%d\n&quot;</span>, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;isom);</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;isom ||</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        (compatible_brands &amp;&amp; strstr(compatible_brands-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>, <span class="stringliteral">&quot;qt  &quot;</span>)) ||</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aba95a97e902b5ee164f017c0e11b3e5c">stsd_version</a> == 0 &amp;&amp; <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> &gt; 0)) {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1) {</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* bytes per packet */</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* bytes per sample */</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 2) {</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;            <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* sizeof struct only */</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> = <a class="code" href="intfloat_8h.html#af4532dd95ee81d7dd271fd1bffade817">av_int2double</a>(<a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb));</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>    = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;            <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* always 0x7F000000 */</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160; </div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* lpcm format specific flag */</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>   = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;m&#39;</span>))</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> =</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                    <a class="code" href="isom_8h.html#ad2cf03c4e118928b2d4a53d8d44e3784">ff_mov_get_lpcm_codec_id</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a>,</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                                             <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        }</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 0 || (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1 &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a81cc2a2e3a232c1e929fafa0c6847ceb">audio_cid</a> != -2)) {</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;            <span class="comment">/* can&#39;t correctly handle variable sized packet as audio unit */</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;            <span class="keywordflow">switch</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) {</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea90ffce5aedda33269b22221916cd8487">AV_CODEC_ID_MP2</a>:</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a>:</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">need_parsing</a> = <a class="code" href="avformat_8h.html#afacbc85f23a50771e3801bda0a353d91ac21d15a27dac74ca0730b4dace71d883">AVSTREAM_PARSE_FULL</a>;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;            }</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        }</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    }</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160; </div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a577b869e34ccd996791fa20d350915e9">format</a> == 0) {</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> == 8)</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="mov_8c.html#add7c4085afb7068235318b45c3c301ab">mov_codec_id</a>(st, <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39; &#39;</span>));</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> == 16)</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="mov_8c.html#add7c4085afb7068235318b45c3c301ab">mov_codec_id</a>(st, <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;s&#39;</span>));</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    }</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordflow">switch</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea689ee50aa42c2ae666da10615ff78e10">AV_CODEC_ID_PCM_S8</a>:</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1e9ff6fe2442af342b2b42a1a0b2abc8">AV_CODEC_ID_PCM_U8</a>:</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> == 16)</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea5144fb79599a0c61ef1e66ef72b6f04c">AV_CODEC_ID_PCM_S16BE</a>;</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a>:</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea5144fb79599a0c61ef1e66ef72b6f04c">AV_CODEC_ID_PCM_S16BE</a>:</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> == 8)</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea689ee50aa42c2ae666da10615ff78e10">AV_CODEC_ID_PCM_S8</a>;</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> == 24)</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> =</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea5144fb79599a0c61ef1e66ef72b6f04c">AV_CODEC_ID_PCM_S16BE</a> ?</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea0513a388236f95e61e73b943e725d4a8">AV_CODEC_ID_PCM_S24BE</a> : <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be">AV_CODEC_ID_PCM_S24LE</a>;</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> == 32)</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;             st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> =</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea5144fb79599a0c61ef1e66ef72b6f04c">AV_CODEC_ID_PCM_S16BE</a> ?</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead316c7d2fd05155d39d862a23fda97a1">AV_CODEC_ID_PCM_S32BE</a> : <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6384417ba463d7aeb03015797cff3349">AV_CODEC_ID_PCM_S32LE</a>;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="comment">/* set values for old format before stsd version 1 appeared */</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceacc6e781037605bd089f1ebbef0c28874">AV_CODEC_ID_MACE3</a>:</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> = 6;</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>   = 2 * st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceacf3d90862beaeae4505a33d4ac26e669">AV_CODEC_ID_MACE6</a>:</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> = 6;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>   = 1 * st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa238badb45f42286d03179686f2a6768">AV_CODEC_ID_ADPCM_IMA_QT</a>:</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> = 64;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>   = 34 * st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2c43eedcf1b16ddb37fdfdbd2bd530bf">AV_CODEC_ID_GSM</a>:</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> = 160;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>   = 33;</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    }</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160; </div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    bits_per_sample = <a class="code" href="group__lavc__misc.html#ga0717e7440fdb123f708082f66cd9b41d">av_get_bits_per_sample</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>);</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordflow">if</span> (bits_per_sample) {</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">bits_per_coded_sample</a> = bits_per_sample;</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a> = (bits_per_sample &gt;&gt; 3) * st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;}</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160; </div>
<div class="line"><a name="l02257"></a><span class="lineno"><a class="line" href="mov_8c.html#accd36e1d0ab8d2112db533725f76bf62"> 2257</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#accd36e1d0ab8d2112db533725f76bf62">mov_parse_stsd_subtitle</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                                    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc,</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                                    int64_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;{</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="comment">// ttxt stsd contains display flags, justification, background</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="comment">// color, fonts, and default styles, so fake an atom to read it</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> fake_atom = { .<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> };</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <span class="comment">// mp4s contains a regular esds atom</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> != <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;mp4s&quot;</span>))</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        <a class="code" href="mov_8c.html#abaa02c4c48dde0be52b2e61d23ddd3cc">mov_read_glbl</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, fake_atom);</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>  = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aabc986e9e943c7499c28e07a43fb54b8">width</a>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2b3c706f015940d9a254f1e755528dbd">height</a>;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;}</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"><a class="line" href="mov_8c.html#a3dc4bec7078cab7d5406e78f79ebd80a"> 2271</a></span>&#160;<span class="keyword">static</span> uint32_t <a class="code" href="mov_8c.html#a3dc4bec7078cab7d5406e78f79ebd80a">yuv_to_rgba</a>(uint32_t ycbcr)</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;{</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>, <a class="code" href="vf__curves_8c.html#a1b5e77b92dea40e646b2e7e196e0b322">g</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="keywordtype">int</span> y, <a class="code" href="vf__geq_8c.html#afc61272a374024bcd86d8859783d3d52">cb</a>, <a class="code" href="vf__geq_8c.html#aafd97074ac037e81919b1712173ad1d3">cr</a>;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160; </div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    y  = (ycbcr &gt;&gt; 16) &amp; 0xFF;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <a class="code" href="vf__geq_8c.html#aafd97074ac037e81919b1712173ad1d3">cr</a> = (ycbcr &gt;&gt; 8)  &amp; 0xFF;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <a class="code" href="vf__geq_8c.html#afc61272a374024bcd86d8859783d3d52">cb</a> =  ycbcr        &amp; 0xFF;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160; </div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = av_clip_uint8((1164 * (y - 16)                     + 2018 * (<a class="code" href="vf__geq_8c.html#afc61272a374024bcd86d8859783d3d52">cb</a> - 128)) / 1000);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <a class="code" href="vf__curves_8c.html#a1b5e77b92dea40e646b2e7e196e0b322">g</a> = av_clip_uint8((1164 * (y - 16) -  813 * (<a class="code" href="vf__geq_8c.html#aafd97074ac037e81919b1712173ad1d3">cr</a> - 128) -  391 * (<a class="code" href="vf__geq_8c.html#afc61272a374024bcd86d8859783d3d52">cb</a> - 128)) / 1000);</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> = av_clip_uint8((1164 * (y - 16) + 1596 * (<a class="code" href="vf__geq_8c.html#aafd97074ac037e81919b1712173ad1d3">cr</a> - 128)                    ) / 1000);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> &lt;&lt; 16) | (<a class="code" href="vf__curves_8c.html#a1b5e77b92dea40e646b2e7e196e0b322">g</a> &lt;&lt; 8) | <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;}</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160; </div>
<div class="line"><a name="l02287"></a><span class="lineno"><a class="line" href="mov_8c.html#a7eb9e91c98e6b81c9ef5a5a07b486665"> 2287</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a7eb9e91c98e6b81c9ef5a5a07b486665">mov_rewrite_dvd_sub_extradata</a>(<a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;{</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordtype">char</span> buf[256] = {0};</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160; </div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> != 64)</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160; </div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> &gt; 0 &amp;&amp;  st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> &gt; 0)</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;size: %dx%d\n&quot;</span>,</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;                 st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <a class="code" href="group__lavu__string.html#ga193877ba459faf314c3d285b6082cf73">av_strlcat</a>(buf, <span class="stringliteral">&quot;palette: &quot;</span>, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        uint32_t yuv = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 4);</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        uint32_t rgba = <a class="code" href="mov_8c.html#a3dc4bec7078cab7d5406e78f79ebd80a">yuv_to_rgba</a>(yuv);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160; </div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        <a class="code" href="avstring_8c.html#a98e5858f933c6e6be64f03a76e22b272">av_strlcatf</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%06&quot;</span>PRIx32<span class="stringliteral">&quot;%s&quot;</span>, rgba, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> != 15 ? <span class="stringliteral">&quot;, &quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    }</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__string.html#ga193877ba459faf314c3d285b6082cf73">av_strlcat</a>(buf, <span class="stringliteral">&quot;\n&quot;</span>, <span class="keyword">sizeof</span>(buf)) &gt;= <span class="keyword">sizeof</span>(buf))</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#abd46f5a4eb066239eb76f4bac1281e1d">ff_alloc_extradata</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, strlen(buf));</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    memcpy(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>, buf, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a>);</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160; </div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;}</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160; </div>
<div class="line"><a name="l02319"></a><span class="lineno"><a class="line" href="mov_8c.html#a9df1094eabd033ee19544e42db1b943b"> 2319</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a9df1094eabd033ee19544e42db1b943b">mov_parse_stsd_data</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                                <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc,</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                                int64_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;{</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;d&#39;</span>)) {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> != <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160; </div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#ae829eaf74d06f3a6cb1b9ad07560fb92">ff_get_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, pb, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 16) {</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *tmcd_ctx = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;            <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 4);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            tmcd_ctx-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aded652ebcaf5b6e1bafe235a16310866">tmcd_flags</a> = <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 8); <span class="comment">/* timescale */</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 12); <span class="comment">/* frameDuration */</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="preprocessor">#if FF_API_LAVF_AVCTX</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;            st-&gt;codec-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a> = <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>);</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;            <span class="comment">/* adjust for per frame dur in counter mode */</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;            <span class="keywordflow">if</span> (tmcd_ctx-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aded652ebcaf5b6e1bafe235a16310866">tmcd_flags</a> &amp; 0x0008) {</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                <span class="keywordtype">int</span> timescale = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 8);</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                <span class="keywordtype">int</span> framedur = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 12);</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> *= timescale;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> *= framedur;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="preprocessor">#if FF_API_LAVF_AVCTX</span></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                st-&gt;codec-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> *= timescale;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                st-&gt;codec-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> *= framedur;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;            }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 30) {</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                uint32_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 18); <span class="comment">/* name atom length */</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                uint32_t <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 22);</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> == <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(<span class="stringliteral">&quot;name&quot;</span>) &amp;&amp; (int64_t)<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt;= (int64_t)<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + 18) {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                    uint16_t str_size = <a class="code" href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 26); <span class="comment">/* string length */</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                    <span class="keywordflow">if</span> (str_size &gt; 0 &amp;&amp; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt;= (<span class="keywordtype">int</span>)str_size + 30 &amp;&amp;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>[30] <span class="comment">/* Don&#39;t add empty string */</span>) {</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                        <span class="keywordtype">char</span> *reel_name = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(str_size + 1);</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                        <span class="keywordflow">if</span> (!reel_name)</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                        memcpy(reel_name, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 30, str_size);</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                        reel_name[str_size] = 0; <span class="comment">/* Add null terminator */</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;                        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;reel_name&quot;</span>, reel_name,</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                                    <a class="code" href="group__lavu__dict.html#ga7a9a991cb7837b10ffd44725263de425">AV_DICT_DONT_STRDUP_VAL</a>);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                    }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                }</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;            }</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        <span class="comment">/* other codec type, just skip (rtp, mp4s ...) */</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    }</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;}</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"><a class="line" href="mov_8c.html#a7f08954ff219f81d717b524389c35d4d"> 2382</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a7f08954ff219f81d717b524389c35d4d">mov_finalize_stsd_codec</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                                   <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc)</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;{</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        !st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> &gt; 1)</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <span class="comment">/* special codec parameters handling */</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">switch</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) {</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="preprocessor">#if CONFIG_DV_DEMUXER</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea91aff3d42b6b8fc68dfe079a33a64949">AV_CODEC_ID_DVAUDIO</a>:</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;dv_fctx = <a class="code" href="group__lavf__core.html#gac7a91abf2f59648d995894711f070f62">avformat_alloc_context</a>();</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;dv_fctx) {</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;dv demux context alloc error\n&quot;</span>);</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        }</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;dv_demux = <a class="code" href="libavformat_2dv_8c.html#a2996068e734179ace8b9d6b9e0cdb608">avpriv_dv_init_demux</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;dv_fctx);</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;dv_demux) {</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;dv demux context init error\n&quot;</span>);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        }</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3ec61bf105b4bf5c3a49be5289400324">dv_audio_container</a> = 1;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="comment">/* no ifdef since parameters are always those */</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac5a616b6750e42680e2ab71c7db317d1">AV_CODEC_ID_QCELP</a>:</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> = 1;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <span class="comment">// force sample rate for qcelp when not stored in mov</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;Q&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;p&#39;</span>))</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> = 8000;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        <span class="comment">// FIXME: Why is the following needed for some files?</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> = 160;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>)</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a> = 35;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea88d9e41adf1df5445e3068512177b582">AV_CODEC_ID_AMR_NB</a>:</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>    = 1;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        <span class="comment">/* force sample rate for amr, stsd in 3gp does not store sample rate */</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> = 8000;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac62343eecae501ff795fe264ce19d965">AV_CODEC_ID_AMR_WB</a>:</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>    = 1;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> = 16000;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea90ffce5aedda33269b22221916cd8487">AV_CODEC_ID_MP2</a>:</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a>:</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;        <span class="comment">/* force type after stsd for m1a hdlr */</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2c43eedcf1b16ddb37fdfdbd2bd530bf">AV_CODEC_ID_GSM</a>:</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6f63c9df5fee26f639f330cd99554467">AV_CODEC_ID_ADPCM_MS</a>:</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadad7dc9e33bcb7b38d886ad11ac788b7">AV_CODEC_ID_ADPCM_IMA_WAV</a>:</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaeb2f1e1f975d68c286c52c197727456c">AV_CODEC_ID_ILBC</a>:</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceacc6e781037605bd089f1ebbef0c28874">AV_CODEC_ID_MACE3</a>:</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceacf3d90862beaeae4505a33d4ac26e669">AV_CODEC_ID_MACE6</a>:</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead2cbe7fc8799aad9f808e81723e4452f">AV_CODEC_ID_QDM2</a>:</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>;</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea81f7bb2a5a480533df028153b1f664c6">AV_CODEC_ID_ALAC</a>:</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> == 36) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>    = <a class="code" href="intreadwrite_8h.html#a2c1d8297f364bdabb641134d89452be8">AV_RB8</a> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 21);</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 32);</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;        }</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0">AV_CODEC_ID_AC3</a>:</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea14c0f2031427f1065ae8c18095e4384f">AV_CODEC_ID_EAC3</a>:</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a>:</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea7765c5c02c05ea1a96ef1ca35dad068f">AV_CODEC_ID_VC1</a>:</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea77772369e1d305824b08b53a8d5c56b6">AV_CODEC_ID_VP8</a>:</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72">AV_CODEC_ID_VP9</a>:</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">need_parsing</a> = <a class="code" href="avformat_8h.html#afacbc85f23a50771e3801bda0a353d91ac21d15a27dac74ca0730b4dace71d883">AVSTREAM_PARSE_FULL</a>;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6dbe55d3a303780cfdb3627384e4141d">AV_CODEC_ID_AV1</a>:</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">need_parsing</a> = <a class="code" href="avformat_8h.html#afacbc85f23a50771e3801bda0a353d91a67bc09fcdeb0e05754f344fbc80856ca">AVSTREAM_PARSE_HEADERS</a>;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    }</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;}</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160; </div>
<div class="line"><a name="l02464"></a><span class="lineno"><a class="line" href="mov_8c.html#a33e4baa8e41d5b909a8de5f5fabcf002"> 2464</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a33e4baa8e41d5b909a8de5f5fabcf002">mov_skip_multiple_stsd</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb,</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                                  <span class="keywordtype">int</span> codec_tag, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>,</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                                  int64_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;{</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <span class="keywordtype">int</span> video_codec_id = <a class="code" href="libavformat_2internal_8h.html#af9e8f2bbcbb1bcf5b4cd5fcc4293375a">ff_codec_get_id</a>(<a class="code" href="isom_8c.html#a49f1e7625dcea066fdb0273f29980f1d">ff_codec_movvideo_tags</a>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160; </div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">if</span> (codec_tag &amp;&amp;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;         (codec_tag != <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> &amp;&amp;</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;          <span class="comment">// AVID 1:1 samples with differing data format and codec tag exist</span></div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;          (codec_tag != <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;AV1x&quot;</span>) || <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> != <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;AVup&quot;</span>)) &amp;&amp;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;          <span class="comment">// prores is allowed to have differing data format and codec tag</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;          codec_tag != <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;apcn&quot;</span>) &amp;&amp; codec_tag != <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;apch&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;          <span class="comment">// so is dv (sigh)</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;          codec_tag != <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;dvpp&quot;</span>) &amp;&amp; codec_tag != <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;dvcp&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;          (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;video_codec_id ? video_codec_id != <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;video_codec_id</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                                 : codec_tag != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;j&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;g&#39;</span>)))) {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        <span class="comment">/* Multiple fourcc, we skip JPEG. This is not correct, we should</span></div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="comment">         * export it as a separate AVStream but this needs a few changes</span></div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="comment">         * in the MOV demuxer, patch welcome. */</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160; </div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;multiple fourcc not supported\n&quot;</span>);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    }</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160; </div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;}</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160; </div>
<div class="line"><a name="l02492"></a><span class="lineno"><a class="line" href="mov_8c.html#a3cd62375215dd932a9e9f7cebe9100b8"> 2492</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a3cd62375215dd932a9e9f7cebe9100b8">ff_mov_read_stsd_entries</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">int</span> entries)</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;{</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <span class="keywordtype">int</span> pseudo_stream_id;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &gt;= 1);</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160; </div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    <span class="keywordflow">for</span> (pseudo_stream_id = 0;</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;         pseudo_stream_id &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;         pseudo_stream_id++) {</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        <span class="comment">//Parsing Sample description table</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;        <span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <a class="code" href="extract__extradata__bsf_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a>;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, dref_id = 1;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;        <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = { <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;stsd&quot;</span>) };</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        int64_t start_pos = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        int64_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>    = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* size */</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        uint32_t <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb); <span class="comment">/* data format */</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160; </div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt;= 16) {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;            <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;            <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;            dref_id = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &lt;= 7) {</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                   <span class="stringliteral">&quot;invalid size %&quot;</span>PRId64<span class="stringliteral">&quot; in stsd\n&quot;</span>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        }</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160; </div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a33e4baa8e41d5b909a8de5f5fabcf002">mov_skip_multiple_stsd</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>,</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                                   <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - (<a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) - start_pos))) {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a912339297bc6a4db4fa3cea3da29a351">stsd_count</a>++;</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;        }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160; </div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">pseudo_stream_id</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> ? -1 : pseudo_stream_id;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad3b99c4484e2d08dcd3fdb00ba98636c">dref_id</a>= dref_id;</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a577b869e34ccd996791fa20d350915e9">format</a> = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160; </div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        <span class="keywordtype">id</span> = <a class="code" href="mov_8c.html#add7c4085afb7068235318b45c3c301ab">mov_codec_id</a>(st, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160; </div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>,</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;               <span class="stringliteral">&quot;size=%&quot;</span>PRId64<span class="stringliteral">&quot; 4CC=%s codec_type=%d\n&quot;</span>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>,</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;               <a class="code" href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a>(<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>), st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>);</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160; </div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="extract__extradata__bsf_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a>;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>==<a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;            <a class="code" href="mov_8c.html#a0ee4ed7673e27805831071a544b0026e">mov_parse_stsd_video</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, st, sc);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>==<a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) {</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            <a class="code" href="mov_8c.html#af1fc60aabb6b5db23ed3e383bef7a3e3">mov_parse_stsd_audio</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, st, sc);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> &lt; 0) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid sample rate %d\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>);</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            }</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>==<a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>){</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            <a class="code" href="mov_8c.html#accd36e1d0ab8d2112db533725f76bf62">mov_parse_stsd_subtitle</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, st, sc,</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                                    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - (<a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) - start_pos));</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a9df1094eabd033ee19544e42db1b943b">mov_parse_stsd_data</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, st, sc,</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                                      <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - (<a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) - start_pos));</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;        }</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;        <span class="comment">/* this will read extra atoms at the end (wave, alac, damr, avcC, hvcC, SMI ...) */</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;        <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - (<a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) - start_pos);</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size &gt; 8) {</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>)) &lt; 0)</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size &gt; 0)</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size);</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160; </div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>) {</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;            <span class="keywordtype">int</span> extra_size = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a>;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160; </div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            <span class="comment">/* Move the current stream extradata to the stream context one. */</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>[pseudo_stream_id] = extra_size;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>[pseudo_stream_id] = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>      = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> = 0;</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;        }</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a912339297bc6a4db4fa3cea3da29a351">stsd_count</a>++;</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    }</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160; </div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted STSD atom\n&quot;</span>);</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    }</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160; </div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;}</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160; </div>
<div class="line"><a name="l02585"></a><span class="lineno"><a class="line" href="mov_8c.html#a0e24178810df0f112535701ca49838ae"> 2585</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a0e24178810df0f112535701ca49838ae">mov_read_stsd</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;{</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, entries;</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160; </div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160; </div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aba95a97e902b5ee164f017c0e11b3e5c">stsd_version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160; </div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="comment">/* Each entry contains a size (4 bytes) and format (4 bytes). */</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="keywordflow">if</span> (entries &lt;= 0 || entries &gt; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> / 8) {</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;invalid STSD entries %d\n&quot;</span>, entries);</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    }</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160; </div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>) {</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;               <span class="stringliteral">&quot;Duplicate stsd found in this track.\n&quot;</span>);</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    }</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160; </div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <span class="comment">/* Prepare space for hosting multiple extradata. */</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a> = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(entries, <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>));</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>)</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160; </div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a> = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(entries, <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>));</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>) {</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    }</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160; </div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a3cd62375215dd932a9e9f7cebe9100b8">ff_mov_read_stsd_entries</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, entries);</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160; </div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    <span class="comment">/* Restore back the primary extradata. */</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>);</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>[0];</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>[0]) {</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>[0] + <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>);</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;        <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>)</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;        memcpy(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>[0], sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>[0]);</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    }</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160; </div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a7f08954ff219f81d717b524389c35d4d">mov_finalize_stsd_codec</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, st, sc);</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>) {</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a912339297bc6a4db4fa3cea3da29a351">stsd_count</a>; j++)</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>[j]);</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    }</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>);</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>);</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;}</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160; </div>
<div class="line"><a name="l02650"></a><span class="lineno"><a class="line" href="mov_8c.html#a9d14132a2f993c5b5d95e065e1b53e37"> 2650</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a9d14132a2f993c5b5d95e065e1b53e37">mov_read_stsc</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;{</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, entries;</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160; </div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160; </div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160; </div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <span class="keywordflow">if</span> ((uint64_t)entries * 12 + 4 &gt; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>)</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160; </div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;track[%u].stsc.entries = %u\n&quot;</span>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1, entries);</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160; </div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="keywordflow">if</span> (!entries)</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>)</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Duplicated STSC atom\n&quot;</span>);</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>);</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> = 0;</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a> = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(entries, <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>));</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>)</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160; </div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    }</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160; </div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; UINT_MAX; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        int64_t first_min = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1;</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1 &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> &gt;= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a>) ||</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;            (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0 &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> &lt;= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>-1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a>) ||</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> &lt; first_min ||</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a> &lt; 1 ||</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a> &lt; 1) {</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;STSC entry %d is invalid (first=%d count=%d id=%d)\n&quot;</span>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a>);</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1 &gt;= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a>) {</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a> == 0 &amp;&amp; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0) {</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;                    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> --;</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                }</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a>, first_min);</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0 &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> &lt;= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>-1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a>)</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;                    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>-1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> + 1LL, INT_MAX);</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a>, 1);</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a>    = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a>, 1);</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;            }</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;            <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> &gt;= 2);</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;            <span class="comment">// We replace this entry by the next valid</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> - 1;</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a>;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a>    = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a>;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        }</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    }</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160; </div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted STSC atom\n&quot;</span>);</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    }</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160; </div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;}</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160; </div>
<div class="line"><a name="l02723"></a><span class="lineno"><a class="line" href="mov_8c.html#a6e25ef9bd119d662d58a39dcb1521e20"> 2723</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a6e25ef9bd119d662d58a39dcb1521e20">mov_stsc_index_valid</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>)</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;{</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a> - 1;</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;}</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160; </div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="comment">/* Compute the samples value for the stsc entry at the given index. */</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"><a class="line" href="mov_8c.html#ac0a3efbd7340528c889536f97d5d663e"> 2729</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> int64_t <a class="code" href="mov_8c.html#ac0a3efbd7340528c889536f97d5d663e">mov_get_stsc_samples</a>(<a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>)</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;{</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="keywordtype">int</span> chunk_count;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160; </div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a6e25ef9bd119d662d58a39dcb1521e20">mov_stsc_index_valid</a>(<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a>))</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;        chunk_count = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a>;</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;        <span class="comment">// Validation for stsc / stco  happens earlier in mov_read_stsc + mov_read_trak.</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> &lt;= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a>);</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        chunk_count = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a> - (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> - 1);</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    }</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160; </div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <span class="keywordflow">return</span> sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a> * (int64_t)chunk_count;</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;}</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160; </div>
<div class="line"><a name="l02744"></a><span class="lineno"><a class="line" href="mov_8c.html#a8a6c3812ff63039a9d300b55adc491fc"> 2744</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a8a6c3812ff63039a9d300b55adc491fc">mov_read_stps</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;{</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, entries;</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160; </div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160; </div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// version + flags</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160; </div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a>)</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Duplicated STPS atom\n&quot;</span>);</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a>);</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afe021e2a5fba99ca05a4d6e94d147746">stps_count</a> = 0;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a> = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(entries, <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a>));</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a>)</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160; </div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    }</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160; </div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afe021e2a5fba99ca05a4d6e94d147746">stps_count</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160; </div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted STPS atom\n&quot;</span>);</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    }</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160; </div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;}</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160; </div>
<div class="line"><a name="l02780"></a><span class="lineno"><a class="line" href="mov_8c.html#a3213d1fd3e9250fc9efb92d8518d5964"> 2780</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a3213d1fd3e9250fc9efb92d8518d5964">mov_read_stss</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;{</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, entries;</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160; </div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160; </div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160; </div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160; </div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;keyframe_count = %u\n&quot;</span>, entries);</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160; </div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="keywordflow">if</span> (!entries) {</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a59da9747d2773214e162f59f5afe66fb">keyframe_absent</a> = 1;</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;        <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">need_parsing</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>)</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">need_parsing</a> = <a class="code" href="avformat_8h.html#afacbc85f23a50771e3801bda0a353d91a67bc09fcdeb0e05754f344fbc80856ca">AVSTREAM_PARSE_HEADERS</a>;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    }</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a>)</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Duplicated STSS atom\n&quot;</span>);</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    <span class="keywordflow">if</span> (entries &gt;= UINT_MAX / <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>))</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a>);</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#add69e45fb552852ce6bca16dee975860">keyframe_count</a> = 0;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a> = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(entries, <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a>));</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a>)</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    }</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160; </div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#add69e45fb552852ce6bca16dee975860">keyframe_count</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160; </div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted STSS atom\n&quot;</span>);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    }</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160; </div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;}</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160; </div>
<div class="line"><a name="l02828"></a><span class="lineno"><a class="line" href="mov_8c.html#a46979717f28637a732c9f4f1c5a81a49"> 2828</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a46979717f28637a732c9f4f1c5a81a49">mov_read_stsz</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;{</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, entries, sample_size, field_size, num_bytes;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> gb;</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160; </div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160; </div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;z&#39;</span>)) {</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;        sample_size = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a>) <span class="comment">/* do not overwrite value computed in stsd */</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a> = sample_size;</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a> = sample_size;</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;        field_size = 32;</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        sample_size = 0;</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;        <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;        field_size = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    }</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160; </div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;sample_size = %u sample_count = %u\n&quot;</span>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a>, entries);</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160; </div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a> = entries;</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordflow">if</span> (sample_size)</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    <span class="keywordflow">if</span> (field_size != 4 &amp;&amp; field_size != 8 &amp;&amp; field_size != 16 &amp;&amp; field_size != 32) {</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid sample field size %u\n&quot;</span>, field_size);</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    }</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160; </div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="keywordflow">if</span> (!entries)</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">if</span> (entries &gt;= (UINT_MAX - 4) / field_size)</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>)</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Duplicated STSZ atom\n&quot;</span>);</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>);</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a> = 0;</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a> = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(entries, <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>));</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>)</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160; </div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    num_bytes = (entries*field_size+4)&gt;&gt;3;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160; </div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    buf = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(num_bytes+<a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>);</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <span class="keywordflow">if</span> (!buf) {</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>);</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    }</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160; </div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, buf, num_bytes);</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>);</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(buf);</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;STSZ atom truncated\n&quot;</span>);</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    }</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160; </div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <a class="code" href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a>(&amp;gb, buf, 8*num_bytes);</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160; </div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a>(&amp;gb, field_size);</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; 0) {</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(buf);</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid sample size %d\n&quot;</span>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;        }</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a98b487c491f258c1bd7484fb7f92dff8">data_size</a> += sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    }</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160; </div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160; </div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(buf);</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160; </div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted STSZ atom\n&quot;</span>);</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    }</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160; </div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;}</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160; </div>
<div class="line"><a name="l02921"></a><span class="lineno"><a class="line" href="mov_8c.html#a572dd8fd1cc914f0e236f4374ef66893"> 2921</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a572dd8fd1cc914f0e236f4374ef66893">mov_read_stts</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;{</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, entries, alloc_size = 0;</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    int64_t <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = 0;</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    int64_t total_sample_count = 0;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160; </div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160; </div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;track[%u].stts.entries = %u\n&quot;</span>,</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1, entries);</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160; </div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>)</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Duplicated STTS atom\n&quot;</span>);</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>);</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> = 0;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <span class="keywordflow">if</span> (entries &gt;= INT_MAX / <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>))</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160; </div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <span class="keywordtype">int</span> sample_duration;</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sample_count;</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> min_entries = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1, 1024 * 1024), entries);</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;        <a class="code" href="struct_m_o_v_stts.html">MOVStts</a> *stts_data = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>, &amp;alloc_size,</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;                                             min_entries * <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>));</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;        <span class="keywordflow">if</span> (!stts_data) {</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>);</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> = 0;</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;        }</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> = min_entries;</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a> = stts_data;</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160; </div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        sample_count    = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;        sample_duration = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160; </div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a>= sample_count;</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>= sample_duration;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160; </div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;sample_count=%d, sample_duration=%d\n&quot;</span>,</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;                sample_count, sample_duration);</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160; </div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>+=(int64_t)sample_duration*(uint64_t)sample_count;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        total_sample_count+=sample_count;</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    }</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160; </div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160; </div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;        duration &lt;= INT64_MAX - sc-&gt;duration_for_fps &amp;&amp;</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        total_sample_count &lt;= INT_MAX - sc-&gt;nb_frames_for_fps) {</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a06fbe82a936c2a6452067d96479e2f30">duration_for_fps</a>  += <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fd9cfc5ffbad16504544eb05a5ac06">nb_frames_for_fps</a> += total_sample_count;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    }</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160; </div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted STTS atom\n&quot;</span>);</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    }</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160; </div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a4382c3064df1c9eb232ac198dec067f9">nb_frames</a>= total_sample_count;</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>)</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>= <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>);</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">track_end</a> = <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;}</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160; </div>
<div class="line"><a name="l02996"></a><span class="lineno"><a class="line" href="mov_8c.html#a571f0b82f39ae736384d5f075e9979a8"> 2996</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a571f0b82f39ae736384d5f075e9979a8">mov_read_sdtp</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;{</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    int64_t <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, entries;</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160; </div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160; </div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    entries = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 4;</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160; </div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;track[%u].sdtp.entries = %&quot;</span> PRId64 <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;           <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1, entries);</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160; </div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a70e06db8083691e76b6bd57aa6baeedc">sdtp_data</a>)</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Duplicated SDTP atom\n&quot;</span>);</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a70e06db8083691e76b6bd57aa6baeedc">sdtp_data</a>);</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aaedc8a0649c0419427db24018ea1736d">sdtp_count</a> = 0;</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160; </div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a70e06db8083691e76b6bd57aa6baeedc">sdtp_data</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(entries);</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a70e06db8083691e76b6bd57aa6baeedc">sdtp_data</a>)</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160; </div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a70e06db8083691e76b6bd57aa6baeedc">sdtp_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aaedc8a0649c0419427db24018ea1736d">sdtp_count</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160; </div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;}</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160; </div>
<div class="line"><a name="l03030"></a><span class="lineno"><a class="line" href="mov_8c.html#a78b765b34c851a48e1f1ecd9b969b1fc"> 3030</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#a78b765b34c851a48e1f1ecd9b969b1fc">mov_update_dts_shift</a>(<a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, <span class="keywordtype">int</span> <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, <span class="keywordtype">void</span> *logctx)</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;{</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> &lt; 0) {</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> == INT_MIN) {</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(logctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;mov_update_dts_shift(): dts_shift set to %d\n&quot;</span>, INT_MAX);</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>++;</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;        }</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>, -<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>);</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    }</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;}</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160; </div>
<div class="line"><a name="l03041"></a><span class="lineno"><a class="line" href="mov_8c.html#ab08b68a3f1f84dd49431874dacaaa0ff"> 3041</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ab08b68a3f1f84dd49431874dacaaa0ff">mov_read_ctts</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;{</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, entries, ctts_count = 0;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160; </div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160; </div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160; </div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;track[%u].ctts.entries = %u\n&quot;</span>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1, entries);</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160; </div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;    <span class="keywordflow">if</span> (!entries)</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    <span class="keywordflow">if</span> (entries &gt;= UINT_MAX / <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>))</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>);</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a>, entries * <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>));</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>)</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160; </div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>    = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160; </div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a> &lt;= 0) {</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>,</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;                   <span class="stringliteral">&quot;ignoring CTTS entry with count=%d duration=%d\n&quot;</span>,</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;                   <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>);</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;        }</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160; </div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;        <a class="code" href="mov_8c.html#abcf4c160935690f8b194d59dc5ded9bf">add_ctts_entry</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>, &amp;ctts_count, &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a>,</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;                       <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>);</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160; </div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;count=%d, duration=%d\n&quot;</span>,</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;                <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160; </div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#a4752e34ce9cae031c792b625b0736d97">FFNABS</a>(<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>) &lt; -(1&lt;&lt;28) &amp;&amp; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+2&lt;entries) {</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;CTTS invalid\n&quot;</span>);</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>);</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> = 0;</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;        }</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160; </div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+2&lt;entries)</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;            <a class="code" href="mov_8c.html#a78b765b34c851a48e1f1ecd9b969b1fc">mov_update_dts_shift</a>(sc, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc);</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    }</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160; </div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> = ctts_count;</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160; </div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted CTTS atom\n&quot;</span>);</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    }</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160; </div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;dts shift %d\n&quot;</span>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>);</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160; </div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;}</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160; </div>
<div class="line"><a name="l03107"></a><span class="lineno"><a class="line" href="mov_8c.html#a79f6e12ccc3b7e0168eb2c520d153181"> 3107</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a79f6e12ccc3b7e0168eb2c520d153181">mov_read_sbgp</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;{</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, entries;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>;</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    uint32_t grouping_type;</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160; </div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160; </div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    grouping_type = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">if</span> (grouping_type != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>( <span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39; &#39;</span>))</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        <span class="keywordflow">return</span> 0; <span class="comment">/* only support &#39;rap &#39; grouping */</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1)</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* grouping_type_parameter */</span></div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160; </div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    <span class="keywordflow">if</span> (!entries)</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>)</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Duplicated SBGP atom\n&quot;</span>);</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>);</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2ac7db5087cfbfe8af63136084004446">rap_group_count</a> = 0;</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a> = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(entries, <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>));</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>)</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160; </div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_sbgp.html#ab9e6eb07b94b1fc697cf5e94d4237112">count</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* sample_count */</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_sbgp.html#a00c6a729d1774ae461e8bac05c64c9ed">index</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* group_description_index */</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    }</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160; </div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2ac7db5087cfbfe8af63136084004446">rap_group_count</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160; </div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted SBGP atom\n&quot;</span>);</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    }</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160; </div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;}</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160; </div>
<div class="line"><a name="l03157"></a><span class="lineno"><a class="line" href="mov_8c.html#af0c84a77bf7ff29f3e2a8e2e9dc0dcb7"> 3157</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#af0c84a77bf7ff29f3e2a8e2e9dc0dcb7">get_edit_list_entry</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov,</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;                               <span class="keyword">const</span> <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *msc,</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;                               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edit_list_index,</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;                               int64_t *edit_list_media_time,</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;                               int64_t *edit_list_duration,</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;                               int64_t global_timescale)</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;{</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    <span class="keywordflow">if</span> (edit_list_index == msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afc7153ab358ca15982533b9f06406c06">elst_count</a>) {</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    }</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    *edit_list_media_time = msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>[edit_list_index].<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a>;</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    *edit_list_duration = msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>[edit_list_index].<a class="code" href="struct_m_o_v_elst.html#a652e67753f4acce70fb26147505f883c">duration</a>;</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160; </div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    <span class="comment">/* duration is in global timescale units;convert to msc timescale */</span></div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    <span class="keywordflow">if</span> (global_timescale == 0) {</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;      <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <span class="stringliteral">&quot;Support for mvhd.timescale = 0 with editlists&quot;</span>);</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    }</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    *edit_list_duration = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(*edit_list_duration, msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>,</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;                                     global_timescale);</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;}</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160; </div>
<div class="line"><a name="l03199"></a><span class="lineno"><a class="line" href="mov_8c.html#a8d30142084cb94cbbdb52106a5af6ddb"> 3199</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a8d30142084cb94cbbdb52106a5af6ddb">find_prev_closest_index</a>(<a class="code" href="struct_a_v_stream.html">AVStream</a> *st,</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;                                   <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *e_old,</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                                   <span class="keywordtype">int</span> nb_old,</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;                                   <a class="code" href="struct_m_o_v_stts.html">MOVStts</a>* ctts_data,</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;                                   int64_t ctts_count,</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;                                   int64_t timestamp_pts,</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;                                   <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a14a6ce0781ddb10c78a10f7373f9ff3d">flag</a>,</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;                                   int64_t* <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>,</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;                                   int64_t* ctts_index,</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;                                   int64_t* ctts_sample)</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;{</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *msc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *e_keep = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;    <span class="keywordtype">int</span> nb_keep = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>;</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    int64_t <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    int64_t index_ctts_count;</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160; </div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160; </div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <span class="comment">// If dts_shift &gt; 0, then all the index timestamps will have to be offset by</span></div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    <span class="comment">// at least dts_shift amount to obtain PTS.</span></div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    <span class="comment">// Hence we decrement the searched timestamp_pts by dts_shift to find the closest index element.</span></div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    <span class="keywordflow">if</span> (msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a> &gt; 0) {</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;        timestamp_pts -= msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    }</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160; </div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a> = e_old;</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> = nb_old;</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    *<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="group__lavf__misc.html#gac4cabc0d681c34b2e2c6a87a55877f0d">av_index_search_timestamp</a>(st, timestamp_pts, <a class="code" href="cbs__av1_8c.html#a14a6ce0781ddb10c78a10f7373f9ff3d">flag</a> | <a class="code" href="avformat_8h.html#ac736f8f4afc930ca1cda0b43638cc678">AVSEEK_FLAG_BACKWARD</a>);</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160; </div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    <span class="comment">// Keep going backwards in the index entries until the timestamp is the same.</span></div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &gt;= 0) {</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = *<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0 &amp;&amp; e_old[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> == e_old[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a>;</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;             <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="cbs__av1_8c.html#a14a6ce0781ddb10c78a10f7373f9ff3d">flag</a> &amp; <a class="code" href="avformat_8h.html#a998c3af80d050fd3d4f6a209fd5a87bc">AVSEEK_FLAG_ANY</a>) ||</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;                (e_old[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1].<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="avformat_8h.html#a23159bdc0b27ccf964072e30d6cc4559">AVINDEX_KEYFRAME</a>)) {</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;                *<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;            }</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;        }</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    }</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160; </div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <span class="comment">// If we have CTTS then refine the search, by searching backwards over PTS</span></div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="comment">// computed by adding corresponding CTTS durations to index timestamps.</span></div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="keywordflow">if</span> (ctts_data &amp;&amp; *<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &gt;= 0) {</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(ctts_index);</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(ctts_sample);</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;        <span class="comment">// Find out the ctts_index for the found frame.</span></div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;        *ctts_index = 0;</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        *ctts_sample = 0;</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;        <span class="keywordflow">for</span> (index_ctts_count = 0; index_ctts_count &lt; *<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>; index_ctts_count++) {</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            <span class="keywordflow">if</span> (*ctts_index &lt; ctts_count) {</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;                (*ctts_sample)++;</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;                <span class="keywordflow">if</span> (ctts_data[*ctts_index].<a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a> == *ctts_sample) {</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;                    (*ctts_index)++;</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;                    *ctts_sample = 0;</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;                }</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;            }</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;        }</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160; </div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;        <span class="keywordflow">while</span> (*<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &gt;= 0 &amp;&amp; (*ctts_index) &gt;= 0 &amp;&amp; (*ctts_index) &lt; ctts_count) {</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;            <span class="comment">// Find a &quot;key frame&quot; with PTS &lt;= timestamp_pts (So that we can decode B-frames correctly).</span></div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;            <span class="comment">// No need to add dts_shift to the timestamp here becase timestamp_pts has already been</span></div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;            <span class="comment">// compensated by dts_shift above.</span></div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;            <span class="keywordflow">if</span> ((e_old[*<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].timestamp + ctts_data[*ctts_index].<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>) &lt;= timestamp_pts &amp;&amp;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;                (e_old[*<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="avformat_8h.html#a23159bdc0b27ccf964072e30d6cc4559">AVINDEX_KEYFRAME</a>)) {</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;            }</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160; </div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;            (*index)--;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;            <span class="keywordflow">if</span> (*ctts_sample == 0) {</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;                (*ctts_index)--;</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;                <span class="keywordflow">if</span> (*ctts_index &gt;= 0)</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;                  *ctts_sample = ctts_data[*ctts_index].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a> - 1;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;                (*ctts_sample)--;</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;            }</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;        }</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    }</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160; </div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="comment">/* restore AVStream state*/</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a> = e_keep;</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> = nb_keep;</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &gt;= 0 ? 0 : -1;</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;}</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160; </div>
<div class="line"><a name="l03295"></a><span class="lineno"><a class="line" href="mov_8c.html#ac109dad064cdfcfbbf69ab550f0b9d42"> 3295</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mov_8c.html#ac109dad064cdfcfbbf69ab550f0b9d42">add_index_entry</a>(<a class="code" href="struct_a_v_stream.html">AVStream</a> *st, int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>, int64_t timestamp,</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;                               <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="keywordtype">int</span> <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>, <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>)</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;{</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *entries, *ie;</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    int64_t <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = -1;</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> min_size_needed = (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> + 1) * <span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a>);</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160; </div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;    <span class="comment">// Double the allocation each time, to lower memory fragmentation.</span></div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;    <span class="comment">// Another difference from ff_add_index_entry function.</span></div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> requested_size =</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;        min_size_needed &gt; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a57bb9e0e79c26a780716fe4a40675af7">index_entries_allocated_size</a> ?</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;        <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(min_size_needed, 2 * st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a57bb9e0e79c26a780716fe4a40675af7">index_entries_allocated_size</a>) :</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;        min_size_needed;</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160; </div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> + 1<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> &gt;= UINT_MAX / <span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a>))</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160; </div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    entries = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>,</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;                              &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a57bb9e0e79c26a780716fe4a40675af7">index_entries_allocated_size</a>,</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;                              requested_size);</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <span class="keywordflow">if</span> (!entries)</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160; </div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>= entries;</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160; </div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>= st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>++;</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    ie= &amp;entries[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160; </div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;    ie-&gt;<a class="code" href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">pos</a> = <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    ie-&gt;<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> = timestamp;</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    ie-&gt;<a class="code" href="struct_a_v_index_entry.html#add3fa33e8b3363a96fa4c62fca1bcf42">min_distance</a>= <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>;</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    ie-&gt;<a class="code" href="struct_a_v_index_entry.html#a1b57d93b863a1b605461229a65ca8b52">size</a>= <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;    ie-&gt;<a class="code" href="struct_a_v_index_entry.html#a72366fb5dae7421e41cce6ad8dd2126b">flags</a> = <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>;</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;}</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160; </div>
<div class="line"><a name="l03335"></a><span class="lineno"><a class="line" href="mov_8c.html#ac810c540561216cd9938b9545392165d"> 3335</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#ac810c540561216cd9938b9545392165d">fix_index_entry_timestamps</a>(<a class="code" href="struct_a_v_stream.html">AVStream</a>* st, <span class="keywordtype">int</span> end_index, int64_t end_ts,</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;                                       int64_t* frame_duration_buffer,</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;                                       <span class="keywordtype">int</span> frame_duration_buffer_size) {</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(end_index &gt;= 0 &amp;&amp; end_index &lt;= st-&gt;internal-&gt;nb_index_entries);</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; frame_duration_buffer_size; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        end_ts -= frame_duration_buffer[frame_duration_buffer_size - 1 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[end_index - 1 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> = end_ts;</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    }</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;}</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160; </div>
<div class="line"><a name="l03350"></a><span class="lineno"><a class="line" href="mov_8c.html#abcf4c160935690f8b194d59dc5ded9bf"> 3350</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mov_8c.html#abcf4c160935690f8b194d59dc5ded9bf">add_ctts_entry</a>(<a class="code" href="struct_m_o_v_stts.html">MOVStts</a>** ctts_data, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* ctts_count, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* allocated_size,</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                              <span class="keywordtype">int</span> <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>)</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;{</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;    <a class="code" href="struct_m_o_v_stts.html">MOVStts</a> *ctts_buf_new;</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> min_size_needed = (*ctts_count + 1) * <span class="keyword">sizeof</span>(<a class="code" href="struct_m_o_v_stts.html">MOVStts</a>);</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> requested_size =</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;        min_size_needed &gt; *allocated_size ?</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;        <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(min_size_needed, 2 * (*allocated_size)) :</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;        min_size_needed;</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160; </div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)(*ctts_count) &gt;= UINT_MAX / <span class="keyword">sizeof</span>(<a class="code" href="struct_m_o_v_stts.html">MOVStts</a>) - 1)</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160; </div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;    ctts_buf_new = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(*ctts_data, allocated_size, requested_size);</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160; </div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <span class="keywordflow">if</span> (!ctts_buf_new)</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160; </div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    *ctts_data = ctts_buf_new;</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160; </div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    ctts_buf_new[*ctts_count].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a> = <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>;</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    ctts_buf_new[*ctts_count].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a> = <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>;</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160; </div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;    *ctts_count = (*ctts_count) + 1;</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;    <span class="keywordflow">return</span> *ctts_count;</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;}</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160; </div>
<div class="line"><a name="l03377"></a><span class="lineno"><a class="line" href="mov_8c.html#a1a5362deb573c857ad801ec212ef3583"> 3377</a></span>&#160;<span class="preprocessor">#define MAX_REORDER_DELAY 16</span></div>
<div class="line"><a name="l03378"></a><span class="lineno"><a class="line" href="mov_8c.html#adf938ff2525e24c6d26fd6c2496028c4"> 3378</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#adf938ff2525e24c6d26fd6c2496028c4">mov_estimate_video_delay</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a>* st)</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;{</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *msc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;    <span class="keywordtype">int</span> ind;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;    <span class="keywordtype">int</span> ctts_ind = 0;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;    <span class="keywordtype">int</span> ctts_sample = 0;</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    int64_t pts_buf[<a class="code" href="mov_8c.html#a1a5362deb573c857ad801ec212ef3583">MAX_REORDER_DELAY</a> + 1]; <span class="comment">// Circular buffer to sort pts.</span></div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;    <span class="keywordtype">int</span> buf_start = 0;</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;    <span class="keywordtype">int</span> j, <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>, num_swaps;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160; </div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="mov_8c.html#a1a5362deb573c857ad801ec212ef3583">MAX_REORDER_DELAY</a> + 1; j++)</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;        pts_buf[j] = INT64_MIN;</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160; </div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">video_delay</a> &lt;= 0 &amp;&amp; msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> &amp;&amp;</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>) {</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">video_delay</a> = 0;</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;        <span class="keywordflow">for</span> (ind = 0; ind &lt; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> &amp;&amp; ctts_ind &lt; msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a>; ++ind) {</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;            <span class="comment">// Point j to the last elem of the buffer and insert the current pts there.</span></div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;            j = buf_start;</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;            buf_start = (buf_start + 1);</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;            <span class="keywordflow">if</span> (buf_start == <a class="code" href="mov_8c.html#a1a5362deb573c857ad801ec212ef3583">MAX_REORDER_DELAY</a> + 1)</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;                buf_start = 0;</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160; </div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;            pts_buf[j] = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[ind].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> + msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>[ctts_ind].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>;</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160; </div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;            <span class="comment">// The timestamps that are already in the sorted buffer, and are greater than the</span></div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;            <span class="comment">// current pts, are exactly the timestamps that need to be buffered to output PTS</span></div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;            <span class="comment">// in correct sorted order.</span></div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;            <span class="comment">// Hence the video delay (which is the buffer size used to sort DTS and output PTS),</span></div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;            <span class="comment">// can be computed as the maximum no. of swaps any particular timestamp needs to</span></div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;            <span class="comment">// go through, to keep this buffer in sorted order.</span></div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;            num_swaps = 0;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;            <span class="keywordflow">while</span> (j != buf_start) {</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;                <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> = j - 1;</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> &lt; 0) <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> = <a class="code" href="mov_8c.html#a1a5362deb573c857ad801ec212ef3583">MAX_REORDER_DELAY</a>;</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;                <span class="keywordflow">if</span> (pts_buf[j] &lt; pts_buf[<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>]) {</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;                    <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(int64_t, pts_buf[j], pts_buf[<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>]);</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;                    ++num_swaps;</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;                }</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;                j = <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>;</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;            }</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">video_delay</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">video_delay</a>, num_swaps);</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160; </div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;            ctts_sample++;</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;            <span class="keywordflow">if</span> (ctts_sample == msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>[ctts_ind].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a>) {</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;                ctts_ind++;</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;                ctts_sample = 0;</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;            }</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;        }</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Setting codecpar-&gt;delay to %d for stream st: %d\n&quot;</span>,</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;               st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">video_delay</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    }</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;}</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160; </div>
<div class="line"><a name="l03434"></a><span class="lineno"><a class="line" href="mov_8c.html#aec2f9a17ba9aeaa41590651eae11f373"> 3434</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#aec2f9a17ba9aeaa41590651eae11f373">mov_current_sample_inc</a>(<a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc)</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;{</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a>++;</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a>++;</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a> &amp;&amp;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a> &gt;= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>-&gt;<a class="code" href="struct_m_o_v_index_range.html#afbabb9cd7a3d8b5ee9afacc43613df9e">end</a> &amp;&amp;</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>-&gt;<a class="code" href="struct_m_o_v_index_range.html#afbabb9cd7a3d8b5ee9afacc43613df9e">end</a>) {</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>++;</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>-&gt;<a class="code" href="struct_m_o_v_index_range.html#ad81ac1a7c7227e1261c1551634a2fa30">start</a>;</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    }</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;}</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160; </div>
<div class="line"><a name="l03446"></a><span class="lineno"><a class="line" href="mov_8c.html#a2246698fcce3d3279833f046ae216b29"> 3446</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#a2246698fcce3d3279833f046ae216b29">mov_current_sample_dec</a>(<a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc)</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;{</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a>--;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a>--;</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a> &amp;&amp;</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>-&gt;<a class="code" href="struct_m_o_v_index_range.html#ad81ac1a7c7227e1261c1551634a2fa30">start</a> &amp;&amp;</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a> &gt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a>) {</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>--;</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>-&gt;<a class="code" href="struct_m_o_v_index_range.html#afbabb9cd7a3d8b5ee9afacc43613df9e">end</a> - 1;</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    }</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;}</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160; </div>
<div class="line"><a name="l03458"></a><span class="lineno"><a class="line" href="mov_8c.html#a522f7d3c4c4c2b9362c6ee9f68bb605a"> 3458</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#a522f7d3c4c4c2b9362c6ee9f68bb605a">mov_current_sample_set</a>(<a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, <span class="keywordtype">int</span> current_sample)</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;{</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;    int64_t range_size;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160; </div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> = current_sample;</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a> = current_sample;</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a>) {</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    }</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160; </div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    <span class="keywordflow">for</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a>;</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>-&gt;<a class="code" href="struct_m_o_v_index_range.html#afbabb9cd7a3d8b5ee9afacc43613df9e">end</a>;</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>++) {</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;        range_size = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>-&gt;<a class="code" href="struct_m_o_v_index_range.html#afbabb9cd7a3d8b5ee9afacc43613df9e">end</a> - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>-&gt;<a class="code" href="struct_m_o_v_index_range.html#ad81ac1a7c7227e1261c1551634a2fa30">start</a>;</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;        <span class="keywordflow">if</span> (range_size &gt; current_sample) {</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a>-&gt;<a class="code" href="struct_m_o_v_index_range.html#ad81ac1a7c7227e1261c1551634a2fa30">start</a> + current_sample;</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;        }</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;        current_sample -= range_size;</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    }</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;}</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160; </div>
<div class="line"><a name="l03486"></a><span class="lineno"><a class="line" href="mov_8c.html#ac2e3fd03be387517f3d7611941c2111c"> 3486</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#ac2e3fd03be387517f3d7611941c2111c">mov_fix_index</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;{</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *msc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;    <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *e_old = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>;</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <span class="keywordtype">int</span> nb_old = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *e_old_end = e_old + nb_old;</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *current = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    <a class="code" href="struct_m_o_v_stts.html">MOVStts</a> *ctts_data_old = msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>;</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    int64_t ctts_index_old = 0;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;    int64_t ctts_sample_old = 0;</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;    int64_t ctts_count_old = msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a>;</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    int64_t edit_list_media_time = 0;</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    int64_t edit_list_duration = 0;</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;    int64_t frame_duration = 0;</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    int64_t edit_list_dts_counter = 0;</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    int64_t edit_list_dts_entry_end = 0;</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    int64_t edit_list_start_ctts_sample = 0;</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    int64_t curr_cts;</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    int64_t curr_ctts = 0;</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    int64_t empty_edits_sum_duration = 0;</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;    int64_t edit_list_index = 0;</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    int64_t <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>;</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    int64_t start_dts = 0;</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    int64_t edit_list_start_encountered = 0;</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;    int64_t search_timestamp = 0;</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;    int64_t* frame_duration_buffer = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;    <span class="keywordtype">int</span> num_discarded_begin = 0;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;    <span class="keywordtype">int</span> first_non_zero_audio_edit = -1;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    <span class="keywordtype">int</span> packet_skip_samples = 0;</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;    <a class="code" href="struct_m_o_v_index_range.html">MOVIndexRange</a> *current_index_range;</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;    <span class="keywordtype">int</span> found_keyframe_after_edit = 0;</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;    <span class="keywordtype">int</span> found_non_empty_edit = 0;</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160; </div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;    <span class="keywordflow">if</span> (!msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a> || msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afc7153ab358ca15982533b9f06406c06">elst_count</a> &lt;= 0 || nb_old &lt;= 0) {</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    }</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160; </div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    <span class="comment">// allocate the index ranges array</span></div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>((msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afc7153ab358ca15982533b9f06406c06">elst_count</a> + 1) * <span class="keyword">sizeof</span>(msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a>[0]));</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    <span class="keywordflow">if</span> (!msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a>) {</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot allocate index ranges buffer\n&quot;</span>);</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;    }</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">current_index_range</a> = msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a>;</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;    current_index_range = msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a> - 1;</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160; </div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <span class="comment">// Clean AVStream from traces of old index</span></div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a57bb9e0e79c26a780716fe4a40675af7">index_entries_allocated_size</a> = 0;</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> = 0;</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160; </div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    <span class="comment">// Clean ctts fields of MOVStreamContext</span></div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> = 0;</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#acc82b2ff39c2c55e05f81373b5be246d">ctts_index</a> = 0;</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a84f9bc5718e8fe14bcc499d093d937ba">ctts_sample</a> = 0;</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a> = 0;</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160; </div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;    <span class="comment">// Reinitialize min_corrected_pts so that it can be computed again.</span></div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a> = -1;</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160; </div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;    <span class="comment">// If the dts_shift is positive (in case of negative ctts values in mov),</span></div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;    <span class="comment">// then negate the DTS by dts_shift</span></div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    <span class="keywordflow">if</span> (msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a> &gt; 0) {</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;        edit_list_dts_entry_end -= msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>;</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Shifting DTS by %d because of negative CTTS.\n&quot;</span>, msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>);</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    }</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160; </div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;    start_dts = edit_list_dts_entry_end;</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160; </div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="mov_8c.html#af0c84a77bf7ff29f3e2a8e2e9dc0dcb7">get_edit_list_entry</a>(mov, msc, edit_list_index, &amp;edit_list_media_time,</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;                               &amp;edit_list_duration, mov-&gt;<a class="code" href="struct_m_o_v_context.html#abee942223c7b0bbaf505f1732b66cc4b">time_scale</a>)) {</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Processing st: %d, edit list %&quot;</span>PRId64<span class="stringliteral">&quot; - media time: %&quot;</span>PRId64<span class="stringliteral">&quot;, duration: %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;               st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, edit_list_index, edit_list_media_time, edit_list_duration);</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;        edit_list_index++;</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;        edit_list_dts_counter = edit_list_dts_entry_end;</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;        edit_list_dts_entry_end += edit_list_duration;</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;        num_discarded_begin = 0;</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;        <span class="keywordflow">if</span> (!found_non_empty_edit &amp;&amp; edit_list_media_time == -1) {</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;            empty_edits_sum_duration += edit_list_duration;</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;        }</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;        found_non_empty_edit = 1;</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160; </div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;        <span class="comment">// If we encounter a non-negative edit list reset the skip_samples/start_pad fields and set them</span></div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        <span class="comment">// according to the edit list below.</span></div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) {</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;            <span class="keywordflow">if</span> (first_non_zero_audio_edit &lt; 0) {</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;                first_non_zero_audio_edit = 1;</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;                first_non_zero_audio_edit = 0;</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;            }</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160; </div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;            <span class="keywordflow">if</span> (first_non_zero_audio_edit &gt; 0)</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a16ff7a608ffe137c6ca6f0e01ef38a90">skip_samples</a> = msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fa83b9c26952c52344d7ee9ff2da2d">start_pad</a> = 0;</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;        }</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160; </div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        <span class="comment">// While reordering frame index according to edit list we must handle properly</span></div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;        <span class="comment">// the scenario when edit list entry starts from none key frame.</span></div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;        <span class="comment">// We find closest previous key frame and preserve it and consequent frames in index.</span></div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;        <span class="comment">// All frames which are outside edit list entry time boundaries will be dropped after decoding.</span></div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        search_timestamp = edit_list_media_time;</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) {</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;            <span class="comment">// Audio decoders like AAC need need a decoder delay samples previous to the current sample,</span></div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;            <span class="comment">// to correctly decode this frame. Hence for audio we seek to a frame 1 sec. before the</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;            <span class="comment">// edit_list_media_time to cover the decoder delay.</span></div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;            search_timestamp = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(search_timestamp - msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>, e_old[0].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a>);</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;        }</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160; </div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a8d30142084cb94cbbdb52106a5af6ddb">find_prev_closest_index</a>(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, 0,</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;                                    &amp;<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, &amp;ctts_index_old, &amp;ctts_sample_old) &lt; 0) {</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;                   <span class="stringliteral">&quot;st: %d edit list: %&quot;</span>PRId64<span class="stringliteral">&quot; Missing key frame while searching for timestamp: %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;                   st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, edit_list_index, search_timestamp);</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a8d30142084cb94cbbdb52106a5af6ddb">find_prev_closest_index</a>(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, <a class="code" href="avformat_8h.html#a998c3af80d050fd3d4f6a209fd5a87bc">AVSEEK_FLAG_ANY</a>,</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;                                        &amp;<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, &amp;ctts_index_old, &amp;ctts_sample_old) &lt; 0) {</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                       <span class="stringliteral">&quot;st: %d edit list %&quot;</span>PRId64<span class="stringliteral">&quot; Cannot find an index entry before timestamp: %&quot;</span>PRId64<span class="stringliteral">&quot;.\n&quot;</span>,</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;                       st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, edit_list_index, search_timestamp);</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;                <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0;</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;                ctts_index_old = 0;</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;                ctts_sample_old = 0;</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;            }</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;        }</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;        current = e_old + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;        edit_list_start_ctts_sample = ctts_sample_old;</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160; </div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        <span class="comment">// Iterate over index and arrange it according to edit list</span></div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;        edit_list_start_encountered = 0;</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        found_keyframe_after_edit = 0;</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;        <span class="keywordflow">for</span> (; current &lt; e_old_end; current++, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;            <span class="comment">// check  if frame outside edit list mark it for discard</span></div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;            frame_duration = (current + 1 &lt;  e_old_end) ?</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;                             ((current + 1)-&gt;timestamp - current-&gt;<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a>) : edit_list_duration;</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160; </div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;            <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> = current-&gt;<a class="code" href="struct_a_v_index_entry.html#a72366fb5dae7421e41cce6ad8dd2126b">flags</a>;</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160; </div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;            <span class="comment">// frames (pts) before or after edit list</span></div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;            curr_cts = current-&gt;<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> + msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>;</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;            curr_ctts = 0;</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160; </div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;            <span class="keywordflow">if</span> (ctts_data_old &amp;&amp; ctts_index_old &lt; ctts_count_old) {</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;                curr_ctts = ctts_data_old[ctts_index_old].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>;</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;stts: %&quot;</span>PRId64<span class="stringliteral">&quot; ctts: %&quot;</span>PRId64<span class="stringliteral">&quot;, ctts_index: %&quot;</span>PRId64<span class="stringliteral">&quot;, ctts_count: %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;                       curr_cts, curr_ctts, ctts_index_old, ctts_count_old);</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;                curr_cts += curr_ctts;</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;                ctts_sample_old++;</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;                <span class="keywordflow">if</span> (ctts_sample_old == ctts_data_old[ctts_index_old].<a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>) {</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#abcf4c160935690f8b194d59dc5ded9bf">add_ctts_entry</a>(&amp;msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>, &amp;msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a>,</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;                                       &amp;msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a>,</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;                                       ctts_data_old[ctts_index_old].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a> - edit_list_start_ctts_sample,</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;                                       ctts_data_old[ctts_index_old].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>) == -1) {</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot add CTTS entry %&quot;</span>PRId64<span class="stringliteral">&quot; - {%&quot;</span>PRId64<span class="stringliteral">&quot;, %d}\n&quot;</span>,</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;                               ctts_index_old,</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;                               ctts_data_old[ctts_index_old].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a> - edit_list_start_ctts_sample,</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;                               ctts_data_old[ctts_index_old].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>);</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;                    }</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;                    ctts_index_old++;</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;                    ctts_sample_old = 0;</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;                    edit_list_start_ctts_sample = 0;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;                }</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;            }</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160; </div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;            <span class="keywordflow">if</span> (curr_cts &lt; edit_list_media_time || curr_cts &gt;= (edit_list_duration + edit_list_media_time)) {</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;                <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea0fac27af40d22e02bf926ecd4f7bc03a">AV_CODEC_ID_VORBIS</a> &amp;&amp;</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;                    curr_cts &lt; edit_list_media_time &amp;&amp; curr_cts + frame_duration &gt; edit_list_media_time &amp;&amp;</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;                    first_non_zero_audio_edit &gt; 0) {</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;                    packet_skip_samples = edit_list_media_time - curr_cts;</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;                    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a16ff7a608ffe137c6ca6f0e01ef38a90">skip_samples</a> += packet_skip_samples;</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160; </div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;                    <span class="comment">// Shift the index entry timestamp by packet_skip_samples to be correct.</span></div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;                    edit_list_dts_counter -= packet_skip_samples;</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;                    <span class="keywordflow">if</span> (edit_list_start_encountered == 0)  {</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;                        edit_list_start_encountered = 1;</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;                        <span class="comment">// Make timestamps strictly monotonically increasing for audio, by rewriting timestamps for</span></div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;                        <span class="comment">// discarded packets.</span></div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;                        <span class="keywordflow">if</span> (frame_duration_buffer) {</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;                            <a class="code" href="mov_8c.html#ac810c540561216cd9938b9545392165d">fix_index_entry_timestamps</a>(st, st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>, edit_list_dts_counter,</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;                                                       frame_duration_buffer, num_discarded_begin);</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;                            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;frame_duration_buffer);</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;                        }</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;                    }</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160; </div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;skip %d audio samples from curr_cts: %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, packet_skip_samples, curr_cts);</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;                    <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> |= <a class="code" href="avformat_8h.html#ac4fe20a35d4a1b9014e5f4062fb67b52">AVINDEX_DISCARD_FRAME</a>;</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;drop a frame at curr_cts: %&quot;</span>PRId64<span class="stringliteral">&quot; @ %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, curr_cts, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160; </div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;                    <span class="keywordflow">if</span> (edit_list_start_encountered == 0) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;                        num_discarded_begin++;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;                        frame_duration_buffer = <a class="code" href="group__lavu__mem__funcs.html#ga74bb2298daa9cd0b5f1d0b2c1c3e26bb">av_realloc</a>(frame_duration_buffer,</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;                                                           num_discarded_begin * <span class="keyword">sizeof</span>(int64_t));</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;                        <span class="keywordflow">if</span> (!frame_duration_buffer) {</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;                            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot reallocate frame duration buffer\n&quot;</span>);</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;                        }</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;                        frame_duration_buffer[num_discarded_begin - 1] = frame_duration;</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160; </div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;                        <span class="comment">// Increment skip_samples for the first non-zero audio edit list</span></div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;                        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp;</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;                            first_non_zero_audio_edit &gt; 0 &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea0fac27af40d22e02bf926ecd4f7bc03a">AV_CODEC_ID_VORBIS</a>) {</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;                            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a16ff7a608ffe137c6ca6f0e01ef38a90">skip_samples</a> += frame_duration;</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;                        }</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;                    }</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;                }</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;                <span class="keywordflow">if</span> (msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a> &lt; 0) {</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;                    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a> = edit_list_dts_counter + curr_ctts + msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>;</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;                    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a>, edit_list_dts_counter + curr_ctts + msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>);</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;                }</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;                <span class="keywordflow">if</span> (edit_list_start_encountered == 0) {</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;                    edit_list_start_encountered = 1;</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;                    <span class="comment">// Make timestamps strictly monotonically increasing by rewriting timestamps for</span></div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;                    <span class="comment">// discarded packets.</span></div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;                    <span class="keywordflow">if</span> (frame_duration_buffer) {</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;                        <a class="code" href="mov_8c.html#ac810c540561216cd9938b9545392165d">fix_index_entry_timestamps</a>(st, st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>, edit_list_dts_counter,</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;                                                   frame_duration_buffer, num_discarded_begin);</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;frame_duration_buffer);</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;                    }</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;                }</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;            }</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160; </div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#ac109dad064cdfcfbbf69ab550f0b9d42">add_index_entry</a>(st, current-&gt;<a class="code" href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">pos</a>, edit_list_dts_counter, current-&gt;<a class="code" href="struct_a_v_index_entry.html#a1b57d93b863a1b605461229a65ca8b52">size</a>,</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;                                current-&gt;<a class="code" href="struct_a_v_index_entry.html#add3fa33e8b3363a96fa4c62fca1bcf42">min_distance</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>) == -1) {</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot add index entry\n&quot;</span>);</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;            }</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160; </div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;            <span class="comment">// Update the index ranges array</span></div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;            <span class="keywordflow">if</span> (current_index_range &lt; msc-&gt;index_ranges || <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> != current_index_range-&gt;<a class="code" href="struct_m_o_v_index_range.html#afbabb9cd7a3d8b5ee9afacc43613df9e">end</a>) {</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;                current_index_range++;</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;                current_index_range-&gt;<a class="code" href="struct_m_o_v_index_range.html#ad81ac1a7c7227e1261c1551634a2fa30">start</a> = <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;            }</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;            current_index_range-&gt;<a class="code" href="struct_m_o_v_index_range.html#afbabb9cd7a3d8b5ee9afacc43613df9e">end</a> = <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1;</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160; </div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;            <span class="comment">// Only start incrementing DTS in frame_duration amounts, when we encounter a frame in edit list.</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;            <span class="keywordflow">if</span> (edit_list_start_encountered &gt; 0) {</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;                edit_list_dts_counter = edit_list_dts_counter + frame_duration;</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;            }</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160; </div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;            <span class="comment">// Break when found first key frame after edit entry completion</span></div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;            <span class="keywordflow">if</span> ((curr_cts + frame_duration &gt;= (edit_list_duration + edit_list_media_time)) &amp;&amp;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;                ((<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="avformat_8h.html#a23159bdc0b27ccf964072e30d6cc4559">AVINDEX_KEYFRAME</a>) || ((st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>)))) {</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;                <span class="keywordflow">if</span> (ctts_data_old) {</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;                    <span class="comment">// If we have CTTS and this is the first keyframe after edit elist,</span></div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;                    <span class="comment">// wait for one more, because there might be trailing B-frames after this I-frame</span></div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;                    <span class="comment">// that do belong to the edit.</span></div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;                    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp; found_keyframe_after_edit == 0) {</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;                        found_keyframe_after_edit = 1;</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;                    }</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;                    <span class="keywordflow">if</span> (ctts_sample_old != 0) {</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#abcf4c160935690f8b194d59dc5ded9bf">add_ctts_entry</a>(&amp;msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>, &amp;msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a>,</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;                                           &amp;msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a>,</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;                                           ctts_sample_old - edit_list_start_ctts_sample,</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;                                           ctts_data_old[ctts_index_old].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>) == -1) {</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;                            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot add CTTS entry %&quot;</span>PRId64<span class="stringliteral">&quot; - {%&quot;</span>PRId64<span class="stringliteral">&quot;, %d}\n&quot;</span>,</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;                                   ctts_index_old, ctts_sample_old - edit_list_start_ctts_sample,</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;                                   ctts_data_old[ctts_index_old].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>);</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;                        }</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;                    }</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;                }</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;            }</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;        }</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    }</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;    <span class="comment">// If there are empty edits, then msc-&gt;min_corrected_pts might be positive</span></div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    <span class="comment">// intentionally. So we subtract the sum duration of emtpy edits here.</span></div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a> -= empty_edits_sum_duration;</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160; </div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    <span class="comment">// If the minimum pts turns out to be greater than zero after fixing the index, then we subtract the</span></div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;    <span class="comment">// dts by that amount to make the first pts zero.</span></div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;        <span class="keywordflow">if</span> (msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a> &gt; 0) {</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Offset DTS by %&quot;</span>PRId64<span class="stringliteral">&quot; to make first pts zero.\n&quot;</span>, msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a>);</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>; ++<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> -= msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a>;</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;            }</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;        }</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;    }</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;    <span class="comment">// Start time should be equal to zero or the duration of any empty edits.</span></div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a7c67ae70632c91df8b0f721658ec5377">start_time</a> = empty_edits_sum_duration;</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160; </div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    <span class="comment">// Update av stream length, if it ends up shorter than the track&#39;s media duration</span></div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>, edit_list_dts_entry_end - start_dts);</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fa83b9c26952c52344d7ee9ff2da2d">start_pad</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a16ff7a608ffe137c6ca6f0e01ef38a90">skip_samples</a>;</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160; </div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;    <span class="comment">// Free the old index and the old CTTS structures</span></div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(e_old);</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(ctts_data_old);</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;frame_duration_buffer);</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160; </div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    <span class="comment">// Null terminate the index ranges array</span></div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    current_index_range++;</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    current_index_range-&gt;<a class="code" href="struct_m_o_v_index_range.html#ad81ac1a7c7227e1261c1551634a2fa30">start</a> = 0;</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    current_index_range-&gt;<a class="code" href="struct_m_o_v_index_range.html#afbabb9cd7a3d8b5ee9afacc43613df9e">end</a> = 0;</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a> = msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a>[0].<a class="code" href="struct_m_o_v_index_range.html#ad81ac1a7c7227e1261c1551634a2fa30">start</a>;</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;}</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160; </div>
<div class="line"><a name="l03790"></a><span class="lineno"><a class="line" href="mov_8c.html#aafd36e9cf5280751176cadf6c84bd779"> 3790</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#aafd36e9cf5280751176cadf6c84bd779">mov_build_index</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;{</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    int64_t current_offset;</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    int64_t current_dts = 0;</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stts_index = 0;</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stsc_index = 0;</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stss_index = 0;</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stps_index = 0;</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;    uint64_t stream_size = 0;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;    <a class="code" href="struct_m_o_v_stts.html">MOVStts</a> *ctts_data_old = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>;</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ctts_count_old = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a>;</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160; </div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afc7153ab358ca15982533b9f06406c06">elst_count</a>) {</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, edit_start_index = 0, multiple_edits = 0;</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;        int64_t empty_duration = 0; <span class="comment">// empty duration of the first edit list entry</span></div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;        int64_t <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a> = 0; <span class="comment">// start time of the media</span></div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160; </div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afc7153ab358ca15982533b9f06406c06">elst_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;            <span class="keyword">const</span> <a class="code" href="struct_m_o_v_elst.html">MOVElst</a> *e = &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0 &amp;&amp; e-&gt;<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a> == -1) {</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;                <span class="comment">/* if empty, the first entry is the start time of the stream</span></div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;<span class="comment">                 * relative to the presentation itself */</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;                empty_duration = e-&gt;<a class="code" href="struct_m_o_v_elst.html#a652e67753f4acce70fb26147505f883c">duration</a>;</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;                edit_start_index = 1;</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == edit_start_index &amp;&amp; e-&gt;<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a> &gt;= 0) {</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;                <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a> = e-&gt;<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a>;</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;                multiple_edits = 1;</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;            }</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;        }</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160; </div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;        <span class="keywordflow">if</span> (multiple_edits &amp;&amp; !mov-&gt;<a class="code" href="struct_m_o_v_context.html#ace17926a964354dd894ae4fcb216800e">advanced_editlist</a>)</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;multiple edit list entries, &quot;</span></div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;                   <span class="stringliteral">&quot;Use -advanced_editlist to correctly decode otherwise &quot;</span></div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;                   <span class="stringliteral">&quot;a/v desync might occur\n&quot;</span>);</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160; </div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;        <span class="comment">/* adjust first dts according to edit list */</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;        <span class="keywordflow">if</span> ((empty_duration || <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>) &amp;&amp; mov-&gt;<a class="code" href="struct_m_o_v_context.html#abee942223c7b0bbaf505f1732b66cc4b">time_scale</a> &gt; 0) {</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;            <span class="keywordflow">if</span> (empty_duration)</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;                empty_duration = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(empty_duration, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>, mov-&gt;<a class="code" href="struct_m_o_v_context.html#abee942223c7b0bbaf505f1732b66cc4b">time_scale</a>);</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a> = <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a> - empty_duration;</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a> = <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>;</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;            <span class="keywordflow">if</span> (!mov-&gt;<a class="code" href="struct_m_o_v_context.html#ace17926a964354dd894ae4fcb216800e">advanced_editlist</a>)</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;                current_dts = -sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>;</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;        }</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160; </div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;        <span class="keywordflow">if</span> (!multiple_edits &amp;&amp; !mov-&gt;<a class="code" href="struct_m_o_v_context.html#ace17926a964354dd894ae4fcb216800e">advanced_editlist</a> &amp;&amp;</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaadba4b5a087e2b6bf2acdd1b5aebb988">AV_CODEC_ID_AAC</a> &amp;&amp; <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a> &gt; 0)</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fa83b9c26952c52344d7ee9ff2da2d">start_pad</a> = <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>;</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    }</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160; </div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;    <span class="comment">/* only use old uncompressed audio chunk demuxing when stts specifies it */</span></div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    <span class="keywordflow">if</span> (!(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp;</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;          sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> == 1 &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[0].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a> == 1)) {</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> current_sample = 0;</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stts_sample = 0;</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sample_size;</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> = 0;</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rap_group_index = 0;</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rap_group_sample = 0;</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;        int64_t last_dts = 0;</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;        int64_t dts_correction = 0;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;        <span class="keywordtype">int</span> rap_group_present = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2ac7db5087cfbfe8af63136084004446">rap_group_count</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>;</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        <span class="keywordtype">int</span> key_off = (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#add69e45fb552852ce6bca16dee975860">keyframe_count</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a>[0] &gt; 0) || (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afe021e2a5fba99ca05a4d6e94d147746">stps_count</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a>[0] &gt; 0);</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160; </div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;        current_dts -= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>;</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;        last_dts     = current_dts;</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160; </div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a> || st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>)</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a> &gt;= UINT_MAX / <span class="keyword">sizeof</span>(*st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>) - st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>)</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#gad8fde0c159ac905909339e082a049cde">av_reallocp_array</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>,</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;                              st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> + sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a>,</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;                              <span class="keyword">sizeof</span>(*st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>)) &lt; 0) {</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> = 0;</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;        }</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a57bb9e0e79c26a780716fe4a40675af7">index_entries_allocated_size</a> = (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> + sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a>) * <span class="keyword">sizeof</span>(*st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>);</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160; </div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;        <span class="keywordflow">if</span> (ctts_data_old) {</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;            <span class="comment">// Expand ctts entries such that we have a 1-1 mapping with samples</span></div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a> &gt;= UINT_MAX / <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>))</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> = 0;</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a> = 0;</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a>,</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;                                    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a> * <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>));</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;            <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>) {</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(ctts_data_old);</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;            }</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160; </div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;            memset((<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>), 0, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a>);</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160; </div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ctts_count_old &amp;&amp;</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;                        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; ctts_data_old[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a> &amp;&amp;</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;                            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a>; j++)</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;                    <a class="code" href="mov_8c.html#abcf4c160935690f8b194d59dc5ded9bf">add_ctts_entry</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>, &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a>,</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;                                   &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a>, 1,</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;                                   ctts_data_old[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>);</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(ctts_data_old);</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;        }</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160; </div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;            int64_t next_offset = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1 &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a> ? sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1] : INT64_MAX;</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;            current_offset = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="mov_8c.html#a6e25ef9bd119d662d58a39dcb1521e20">mov_stsc_index_valid</a>(stsc_index, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a>) &amp;&amp;</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;                <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[stsc_index + 1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a>)</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;                stsc_index++;</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160; </div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;            <span class="keywordflow">if</span> (next_offset &gt; current_offset &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a>&gt;0 &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a> &amp;&amp;</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[stsc_index].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a> * (int64_t)sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a> &gt; next_offset - current_offset) {</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;STSZ sample size %d invalid (too large), ignoring\n&quot;</span>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a>);</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a>;</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;            }</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a>&gt;0 &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a>) {</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;STSZ sample size %d invalid (too small), ignoring\n&quot;</span>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a>);</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a>;</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;            }</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160; </div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[stsc_index].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a>; j++) {</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;                <span class="keywordtype">int</span> keyframe = 0;</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;                <span class="keywordflow">if</span> (current_sample &gt;= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a>) {</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;wrong sample count\n&quot;</span>);</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;                }</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160; </div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;                <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a59da9747d2773214e162f59f5afe66fb">keyframe_absent</a> &amp;&amp; (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#add69e45fb552852ce6bca16dee975860">keyframe_count</a> || current_sample+key_off == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a>[stss_index])) {</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;                    keyframe = 1;</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;                    <span class="keywordflow">if</span> (stss_index + 1 &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#add69e45fb552852ce6bca16dee975860">keyframe_count</a>)</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;                        stss_index++;</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afe021e2a5fba99ca05a4d6e94d147746">stps_count</a> &amp;&amp; current_sample+key_off == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a>[stps_index]) {</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;                    keyframe = 1;</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;                    <span class="keywordflow">if</span> (stps_index + 1 &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afe021e2a5fba99ca05a4d6e94d147746">stps_count</a>)</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;                        stps_index++;</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;                }</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;                <span class="keywordflow">if</span> (rap_group_present &amp;&amp; rap_group_index &lt; sc-&gt;rap_group_count) {</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;                    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>[rap_group_index].<a class="code" href="struct_m_o_v_sbgp.html#a00c6a729d1774ae461e8bac05c64c9ed">index</a> &gt; 0)</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;                        keyframe = 1;</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;                    <span class="keywordflow">if</span> (++rap_group_sample == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>[rap_group_index].<a class="code" href="struct_m_o_v_sbgp.html#ab9e6eb07b94b1fc697cf5e94d4237112">count</a>) {</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;                        rap_group_sample = 0;</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;                        rap_group_index++;</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;                    }</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;                }</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a59da9747d2773214e162f59f5afe66fb">keyframe_absent</a></div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;                    &amp;&amp; !sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afe021e2a5fba99ca05a4d6e94d147746">stps_count</a></div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;                    &amp;&amp; !rap_group_present</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;                    &amp;&amp; (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> || (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>==0 &amp;&amp; j==0)))</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;                     keyframe = 1;</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;                <span class="keywordflow">if</span> (keyframe)</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;                    <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> = 0;</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;                sample_size = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a> &gt; 0 ? sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">stsz_sample_size</a> : sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>[current_sample];</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">pseudo_stream_id</a> == -1 ||</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;                   sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[stsc_index].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a> - 1 == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">pseudo_stream_id</a>) {</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;                    <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *e;</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;                    <span class="keywordflow">if</span> (sample_size &gt; 0x3FFFFFFF) {</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Sample size %u is too large\n&quot;</span>, sample_size);</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;                    }</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;                    e = &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>++];</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;                    e-&gt;<a class="code" href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">pos</a> = current_offset;</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;                    e-&gt;<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> = current_dts;</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;                    e-&gt;<a class="code" href="struct_a_v_index_entry.html#a1b57d93b863a1b605461229a65ca8b52">size</a> = sample_size;</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;                    e-&gt;<a class="code" href="struct_a_v_index_entry.html#add3fa33e8b3363a96fa4c62fca1bcf42">min_distance</a> = <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>;</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;                    e-&gt;<a class="code" href="struct_a_v_index_entry.html#a72366fb5dae7421e41cce6ad8dd2126b">flags</a> = keyframe ? <a class="code" href="avformat_8h.html#a23159bdc0b27ccf964072e30d6cc4559">AVINDEX_KEYFRAME</a> : 0;</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;AVIndex stream %d, sample %u, offset %&quot;</span>PRIx64<span class="stringliteral">&quot;, dts %&quot;</span>PRId64<span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                            <span class="stringliteral">&quot;size %u, distance %u, keyframe %d\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, current_sample,</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;                            current_offset, current_dts, sample_size, <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>, keyframe);</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;                    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> &lt; 100)</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;                        <a class="code" href="libavformat_2internal_8h.html#a885c541fc4110c87c0153e169504290f">ff_rfps_add_frame</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, st, current_dts);</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;                }</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160; </div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;                current_offset += sample_size;</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;                stream_size += sample_size;</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160; </div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;                <span class="comment">/* A negative sample duration is invalid based on the spec,</span></div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;<span class="comment">                 * but some samples need it to correct the DTS. */</span></div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[stts_index].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a> &lt; 0) {</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;                           <span class="stringliteral">&quot;Invalid SampleDelta %d in STTS, at %d st:%d\n&quot;</span>,</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;                           sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[stts_index].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>, stts_index,</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;                           st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;                    dts_correction += sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[stts_index].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a> - 1;</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;                    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[stts_index].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a> = 1;</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;                }</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;                current_dts += sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[stts_index].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>;</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;                <span class="keywordflow">if</span> (!dts_correction || current_dts + dts_correction &gt; last_dts) {</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;                    current_dts += dts_correction;</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;                    dts_correction = 0;</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;                    <span class="comment">/* Avoid creating non-monotonous DTS */</span></div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;                    dts_correction += current_dts - last_dts - 1;</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;                    current_dts = last_dts + 1;</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;                }</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;                last_dts = current_dts;</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;                <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>++;</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;                stts_sample++;</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;                current_sample++;</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;                <span class="keywordflow">if</span> (stts_index + 1 &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> &amp;&amp; stts_sample == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[stts_index].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a>) {</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;                    stts_sample = 0;</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;                    stts_index++;</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;                }</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;            }</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;        }</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> &gt; 0)</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a5268fcf4ae8ed27edef54f836b926d93">bit_rate</a> = stream_size*8*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>/st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>;</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;        <span class="keywordtype">unsigned</span> chunk_samples, total = 0;</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160; </div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a>)</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160; </div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;        <span class="comment">// compute total chunk count</span></div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;            <span class="keywordtype">unsigned</span> <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>, chunk_count;</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160; </div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;            chunk_samples = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a>;</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> != sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> - 1 &amp;&amp;</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> &amp;&amp; chunk_samples % sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a>) {</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error unaligned chunk\n&quot;</span>);</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;            }</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160; </div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> &gt;= 160) { <span class="comment">// gsm</span></div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;                <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a> = chunk_samples / sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a>;</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> &gt; 1) {</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;                <span class="keywordtype">unsigned</span> <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> = (1024/sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a>)*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a>;</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;                <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a> = (chunk_samples+<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>-1) / <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>;</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;                <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a> = (chunk_samples+1023) / 1024;</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;            }</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160; </div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a6e25ef9bd119d662d58a39dcb1521e20">mov_stsc_index_valid</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a>))</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;                chunk_count = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a>;</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;                chunk_count = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a> - (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> - 1);</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;            total += chunk_count * <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>;</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;        }</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160; </div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;chunk count %u\n&quot;</span>, total);</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;        <span class="keywordflow">if</span> (total &gt;= UINT_MAX / <span class="keyword">sizeof</span>(*st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>) - st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>)</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#gad8fde0c159ac905909339e082a049cde">av_reallocp_array</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>,</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;                              st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> + total,</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;                              <span class="keyword">sizeof</span>(*st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>)) &lt; 0) {</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> = 0;</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;        }</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a57bb9e0e79c26a780716fe4a40675af7">index_entries_allocated_size</a> = (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> + total) * <span class="keyword">sizeof</span>(*st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>);</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160; </div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;        <span class="comment">// populate index</span></div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;            current_offset = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a6e25ef9bd119d662d58a39dcb1521e20">mov_stsc_index_valid</a>(stsc_index, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a>) &amp;&amp;</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;                <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[stsc_index + 1].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a>)</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;                stsc_index++;</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;            chunk_samples = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[stsc_index].<a class="code" href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">count</a>;</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160; </div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;            <span class="keywordflow">while</span> (chunk_samples &gt; 0) {</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;                <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *e;</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;                <span class="keywordtype">unsigned</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>;</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160; </div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> &gt; 1 &amp;&amp; !sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>) {</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>,</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;                           <span class="stringliteral">&quot;Zero bytes per frame, but %d samples per frame&quot;</span>,</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;                           sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a>);</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;                }</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160; </div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> &gt;= 160) { <span class="comment">// gsm</span></div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;                    <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a>;</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;                    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>;</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;                    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a> &gt; 1) {</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;                        <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>((1024 / sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a>)*</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;                                        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a>, chunk_samples);</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;                        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = (<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> / sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">samples_per_frame</a>) * sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">bytes_per_frame</a>;</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;                        <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(1024, chunk_samples);</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;                        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> * sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a>;</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;                    }</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;                }</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160; </div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;                <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> &gt;= total) {</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;wrong chunk count %u\n&quot;</span>, total);</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;                }</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 0x3FFFFFFF) {</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Sample size %u is too large\n&quot;</span>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;                }</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;                e = &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>++];</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;                e-&gt;<a class="code" href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">pos</a> = current_offset;</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;                e-&gt;<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> = current_dts;</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;                e-&gt;<a class="code" href="struct_a_v_index_entry.html#a1b57d93b863a1b605461229a65ca8b52">size</a> = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;                e-&gt;<a class="code" href="struct_a_v_index_entry.html#add3fa33e8b3363a96fa4c62fca1bcf42">min_distance</a> = 0;</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;                e-&gt;<a class="code" href="struct_a_v_index_entry.html#a72366fb5dae7421e41cce6ad8dd2126b">flags</a> = <a class="code" href="avformat_8h.html#a23159bdc0b27ccf964072e30d6cc4559">AVINDEX_KEYFRAME</a>;</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;AVIndex stream %d, chunk %u, offset %&quot;</span>PRIx64<span class="stringliteral">&quot;, dts %&quot;</span>PRId64<span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;                       <span class="stringliteral">&quot;size %u, duration %u\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, current_offset, current_dts,</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;                       <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>);</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160; </div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;                current_offset += <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;                current_dts += <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>;</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;                chunk_samples -= <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>;</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;            }</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;        }</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;    }</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160; </div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;    <span class="keywordflow">if</span> (!mov-&gt;<a class="code" href="struct_m_o_v_context.html#a158ab3de3ad3c6fc547503f6953b6409">ignore_editlist</a> &amp;&amp; mov-&gt;<a class="code" href="struct_m_o_v_context.html#ace17926a964354dd894ae4fcb216800e">advanced_editlist</a>) {</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;        <span class="comment">// Fix index according to edit lists.</span></div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;        <a class="code" href="mov_8c.html#ac2e3fd03be387517f3d7611941c2111c">mov_fix_index</a>(mov, st);</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;    }</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160; </div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;    <span class="comment">// Update start time of the stream.</span></div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a7c67ae70632c91df8b0f721658ec5377">start_time</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> &gt; 0) {</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a7c67ae70632c91df8b0f721658ec5377">start_time</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[0].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> + sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>;</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>) {</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a7c67ae70632c91df8b0f721658ec5377">start_time</a> += sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>[0].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>;</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;        }</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;    }</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160; </div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;    <a class="code" href="mov_8c.html#adf938ff2525e24c6d26fd6c2496028c4">mov_estimate_video_delay</a>(mov, st);</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;}</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160; </div>
<div class="line"><a name="l04118"></a><span class="lineno"><a class="line" href="mov_8c.html#a4eb827ad68645598ee4c1e4bdf3b95c6"> 4118</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a4eb827ad68645598ee4c1e4bdf3b95c6">test_same_origin</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>) {</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;    <span class="keywordtype">char</span> src_proto[64];</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;    <span class="keywordtype">char</span> ref_proto[64];</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;    <span class="keywordtype">char</span> src_auth[256];</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;    <span class="keywordtype">char</span> ref_auth[256];</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;    <span class="keywordtype">char</span> src_host[256];</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;    <span class="keywordtype">char</span> ref_host[256];</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;    <span class="keywordtype">int</span> src_port=-1;</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;    <span class="keywordtype">int</span> ref_port=-1;</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160; </div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;    <a class="code" href="group__lavf__misc.html#ga63a0579d6c2aa72470ac742bbbc1205d">av_url_split</a>(src_proto, <span class="keyword">sizeof</span>(src_proto), src_auth, <span class="keyword">sizeof</span>(src_auth), src_host, <span class="keyword">sizeof</span>(src_host), &amp;src_port, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>);</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;    <a class="code" href="group__lavf__misc.html#ga63a0579d6c2aa72470ac742bbbc1205d">av_url_split</a>(ref_proto, <span class="keyword">sizeof</span>(ref_proto), ref_auth, <span class="keyword">sizeof</span>(ref_auth), ref_host, <span class="keyword">sizeof</span>(ref_host), &amp;ref_port, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>);</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160; </div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;    <span class="keywordflow">if</span> (strlen(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>) == 0) {</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strlen(src_auth) + 1 &gt;= <span class="keyword">sizeof</span>(src_auth) ||</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;        strlen(ref_auth) + 1 &gt;= <span class="keyword">sizeof</span>(ref_auth) ||</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;        strlen(src_host) + 1 &gt;= <span class="keyword">sizeof</span>(src_host) ||</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;        strlen(ref_host) + 1 &gt;= <span class="keyword">sizeof</span>(ref_host)) {</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(src_proto, ref_proto) ||</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;               strcmp(src_auth, ref_auth) ||</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;               strcmp(src_host, ref_host) ||</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;               src_port != ref_port) {</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;}</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160; </div>
<div class="line"><a name="l04147"></a><span class="lineno"><a class="line" href="mov_8c.html#aa938246ca3c31ebe1d9d54acb481164c"> 4147</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aa938246ca3c31ebe1d9d54acb481164c">mov_open_dref</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> **pb, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <a class="code" href="struct_m_o_v_dref.html">MOVDref</a> *<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>)</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;{</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;    <span class="comment">/* try relative path, we do not try the absolute because it can leak information about our</span></div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;<span class="comment">       system to an attacker */</span></div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;nlvl_to &gt; 0 &amp;&amp; <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;nlvl_from &gt; 0) {</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;        <span class="keywordtype">char</span> filename[1025];</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *src_path;</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, l;</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160; </div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;        <span class="comment">/* find a source dir */</span></div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;        src_path = strrchr(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;        <span class="keywordflow">if</span> (src_path)</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;            src_path++;</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;            src_path = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>;</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160; </div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;        <span class="comment">/* find a next level down to target */</span></div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, l = strlen(<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;path) - 1; l &gt;= 0; l--)</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;path[l] == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;nlvl_to - 1)</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;                    <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++;</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;            }</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160; </div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;        <span class="comment">/* compose filename if next level down to target was found */</span></div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;nlvl_to - 1 &amp;&amp; src_path - <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>  &lt; <span class="keyword">sizeof</span>(filename)) {</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;            memcpy(filename, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, src_path - <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>);</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;            filename[src_path - <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>] = 0;</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160; </div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;nlvl_from; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;                <a class="code" href="group__lavu__string.html#ga193877ba459faf314c3d285b6082cf73">av_strlcat</a>(filename, <span class="stringliteral">&quot;../&quot;</span>, <span class="keyword">sizeof</span>(filename));</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160; </div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;            <a class="code" href="group__lavu__string.html#ga193877ba459faf314c3d285b6082cf73">av_strlcat</a>(filename, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;path + l + 1, <span class="keyword">sizeof</span>(filename));</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;use_absolute_path) {</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;                <span class="keywordtype">int</span> same_origin = <a class="code" href="mov_8c.html#a4eb827ad68645598ee4c1e4bdf3b95c6">test_same_origin</a>(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, filename);</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160; </div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;                <span class="keywordflow">if</span> (!same_origin) {</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;                        <span class="stringliteral">&quot;Reference with mismatching origin, %s not tried for security reasons, &quot;</span></div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;                        <span class="stringliteral">&quot;set demuxer option use_absolute_path to allow it anyway\n&quot;</span>,</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;                        <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;path);</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOENT);</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;                }</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160; </div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;                <span class="keywordflow">if</span> (strstr(<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;path + l + 1, <span class="stringliteral">&quot;..&quot;</span>) ||</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;                    strstr(<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;path + l + 1, <span class="stringliteral">&quot;:&quot;</span>) ||</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;                    (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;nlvl_from &gt; 1 &amp;&amp; same_origin &lt; 0) ||</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;                    (filename[0] == <span class="charliteral">&#39;/&#39;</span> &amp;&amp; src_path == <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>))</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOENT);</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;            }</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160; </div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;            <span class="keywordflow">if</span> (strlen(filename) + 1 == <span class="keyword">sizeof</span>(filename))</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOENT);</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;io_open(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, pb, filename, <a class="code" href="avio_8h.html#a21e61cb486bd1588eb7f775998cf8c77">AVIO_FLAG_READ</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;        }</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;use_absolute_path) {</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Using absolute path on user request, &quot;</span></div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;               <span class="stringliteral">&quot;this is a possible security issue\n&quot;</span>);</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;io_open(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, pb, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;path, <a class="code" href="avio_8h.html#a21e61cb486bd1588eb7f775998cf8c77">AVIO_FLAG_READ</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;               <span class="stringliteral">&quot;Absolute path %s not tried for security reasons, &quot;</span></div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;               <span class="stringliteral">&quot;set demuxer option use_absolute_path to allow absolute paths\n&quot;</span>,</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;               <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;path);</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;    }</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160; </div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOENT);</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;}</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160; </div>
<div class="line"><a name="l04219"></a><span class="lineno"><a class="line" href="mov_8c.html#aa4decda8a7ee9f7473e32f44c4de32f5"> 4219</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#aa4decda8a7ee9f7473e32f44c4de32f5">fix_timescale</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc)</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;{</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> &lt;= 0) {</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;stream %d, timescale not set\n&quot;</span>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad90b4e1c29e927f8a600e9b38812b980">ffindex</a>);</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;time_scale;</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> &lt;= 0)</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> = 1;</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;    }</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;}</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160; </div>
<div class="line"><a name="l04229"></a><span class="lineno"><a class="line" href="mov_8c.html#ac82aba954beec243b26f26711e43de25"> 4229</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ac82aba954beec243b26f26711e43de25">mov_read_trak</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;{</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160; </div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;    st = <a class="code" href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;    <span class="keywordflow">if</span> (!st) <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">id</a> = -1;</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;    sc = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a>));</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;    <span class="keywordflow">if</span> (!sc) <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160; </div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a> = sc;</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a>;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad90b4e1c29e927f8a600e9b38812b980">ffindex</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>;</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trak_index = st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>;</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160; </div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom)) &lt; 0)</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160; </div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trak_index = -1;</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160; </div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;    <span class="comment">// Here stsc refers to a chunk not described in stco. This is technically invalid,</span></div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;    <span class="comment">// but we can overlook it (clearing stsc) whenever stts_count == 0 (indicating no samples).</span></div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a> &amp;&amp; !sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a>) {</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> = 0;</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>);</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    }</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160; </div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;    <span class="comment">/* sanity checks */</span></div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;    <span class="keywordflow">if</span> ((sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a> &amp;&amp; (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> || !sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> ||</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;                            (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">sample_size</a> &amp;&amp; !sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a>))) ||</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;        (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">sample_count</a>)) {</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;stream %d, missing mandatory atoms, broken header\n&quot;</span>,</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;               st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;    }</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[ sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a> - 1 ].<a class="code" href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">first</a> &gt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a>) {</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;stream %d, contradictionary STSC and STCO\n&quot;</span>,</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;               st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;    }</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160; </div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;    <a class="code" href="mov_8c.html#aa4decda8a7ee9f7473e32f44c4de32f5">fix_timescale</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, sc);</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160; </div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;    <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, 1, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>);</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160; </div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;    <a class="code" href="mov_8c.html#aafd36e9cf5280751176cadf6c84bd779">mov_build_index</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, st);</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160; </div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad3b99c4484e2d08dcd3fdb00ba98636c">dref_id</a>-1 &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa1bba687784303efce7036088d091169">drefs_count</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad3b99c4484e2d08dcd3fdb00ba98636c">dref_id</a>-1].<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>) {</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;        <a class="code" href="struct_m_o_v_dref.html">MOVDref</a> *dref = &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad3b99c4484e2d08dcd3fdb00ba98636c">dref_id</a> - 1];</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;enable_drefs) {</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#aa938246ca3c31ebe1d9d54acb481164c">mov_open_dref</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;url, dref) &lt; 0)</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;                       <span class="stringliteral">&quot;stream %d, error opening alias: path=&#39;%s&#39;, dir=&#39;%s&#39;, &quot;</span></div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;                       <span class="stringliteral">&quot;filename=&#39;%s&#39;, volume=&#39;%s&#39;, nlvl_from=%d, nlvl_to=%d\n&quot;</span>,</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;                       st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#ae538b300dc51bb4e8bf604ae92a86724">filename</a>,</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;                       dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a173376d100e710a1931210a28ba19ffe">volume</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a6d78d6ec25071906a615de754dd0aafe">nlvl_from</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a3dd8ed3b95d23a3c91a7ee458628c57c">nlvl_to</a>);</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;                   <span class="stringliteral">&quot;Skipped opening external track: &quot;</span></div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;                   <span class="stringliteral">&quot;stream %d, alias: path=&#39;%s&#39;, dir=&#39;%s&#39;, &quot;</span></div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;                   <span class="stringliteral">&quot;filename=&#39;%s&#39;, volume=&#39;%s&#39;, nlvl_from=%d, nlvl_to=%d.&quot;</span></div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;                   <span class="stringliteral">&quot;Set enable_drefs to allow this.\n&quot;</span>,</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;                   st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#ae538b300dc51bb4e8bf604ae92a86724">filename</a>,</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;                   dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a173376d100e710a1931210a28ba19ffe">volume</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a6d78d6ec25071906a615de754dd0aafe">nlvl_from</a>, dref-&gt;<a class="code" href="struct_m_o_v_dref.html#a3dd8ed3b95d23a3c91a7ee458628c57c">nlvl_to</a>);</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;        }</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a> = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;pb;</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a997c4ba9f960ba82fb9d711938f3dbb2">pb_is_copied</a> = 1;</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;    }</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160; </div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;        <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> &amp;&amp;</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2b3c706f015940d9a254f1e755528dbd">height</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aabc986e9e943c7499c28e07a43fb54b8">width</a> &amp;&amp;</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;            (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> != sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aabc986e9e943c7499c28e07a43fb54b8">width</a> || st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> != sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2b3c706f015940d9a254f1e755528dbd">height</a>)) {</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a> = <a class="code" href="group__lavu__math__rational.html#ga7dfd5ba1eb1edf5845ac32b338de9e76">av_d2q</a>(((<span class="keywordtype">double</span>)st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> * sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aabc986e9e943c7499c28e07a43fb54b8">width</a>) /</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;                                             ((<span class="keywordtype">double</span>)st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> * sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2b3c706f015940d9a254f1e755528dbd">height</a>), INT_MAX);</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;        }</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160; </div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;<span class="preprocessor">#if FF_API_R_FRAME_RATE</span></div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> == 1 || (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> == 2 &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[1].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a> == 1))</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;            <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">r_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">r_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>,</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;                      sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>[0].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>, INT_MAX);</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;    }</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160; </div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;    <span class="comment">// done for ai5q, ai52, ai55, ai1q, ai12 and ai15.</span></div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;    <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a> &amp;&amp;</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;        <a class="code" href="isom_8h.html#a583b8fc4d218bb9d00bfb5099283d047">TAG_IS_AVCI</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a>)) {</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#a9f7dcde5c9b537264e9020d70e6add14">ff_generate_avci_extradata</a>(st);</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;    }</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160; </div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;    <span class="keywordflow">switch</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) {</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;<span class="preprocessor">#if CONFIG_H261_DECODER</span></div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea11cf9a49627f70f6ab33d3bf93752ae4">AV_CODEC_ID_H261</a>:</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;<span class="preprocessor">#if CONFIG_H263_DECODER</span></div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac3d126631b15729d01d427b642c3bc9e">AV_CODEC_ID_H263</a>:</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;<span class="preprocessor">#if CONFIG_MPEG4_DECODER</span></div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a>:</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> = 0; <span class="comment">/* let decoder init width/height */</span></div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>= 0;</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;    }</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160; </div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;    <span class="comment">// If the duration of the mp3 packets is not constant, then they could need a parser</span></div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a></div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;        &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a> &gt; 3</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;        &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">stts_count</a>*10 &gt; st-&gt;<a class="code" href="struct_a_v_stream.html#a4382c3064df1c9eb232ac198dec067f9">nb_frames</a></div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;        &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> == st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>) {</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">need_parsing</a> = <a class="code" href="avformat_8h.html#afacbc85f23a50771e3801bda0a353d91ac21d15a27dac74ca0730b4dace71d883">AVSTREAM_PARSE_FULL</a>;</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;    }</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;    <span class="comment">/* Do not need those anymore. */</span></div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>);</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>);</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a>);</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>);</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a>);</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>);</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>);</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160; </div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;}</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160; </div>
<div class="line"><a name="l04358"></a><span class="lineno"><a class="line" href="mov_8c.html#a00446e5d1d3787d6f0eacbdddbc0f597"> 4358</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a00446e5d1d3787d6f0eacbdddbc0f597">mov_read_ilst</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;{</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;itunes_metadata = 1;</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom);</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;itunes_metadata = 0;</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;}</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160; </div>
<div class="line"><a name="l04367"></a><span class="lineno"><a class="line" href="mov_8c.html#ab74179790be576c468907f8ec562da0f"> 4367</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ab74179790be576c468907f8ec562da0f">mov_read_keys</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;{</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;    uint32_t <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>;</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;    uint32_t <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160; </div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 8)</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160; </div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 4);</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;    <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a> &gt; UINT_MAX / <span class="keyword">sizeof</span>(*<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys) - 1) {</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;               <span class="stringliteral">&quot;The &#39;keys&#39; atom with the invalid key count: %&quot;</span>PRIu32<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>);</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;    }</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160; </div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys_count = <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a> + 1;</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys_count * <span class="keyword">sizeof</span>(*<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys));</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys)</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160; </div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= <a class="code" href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">count</a>; ++<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;        uint32_t key_size = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;        uint32_t <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;        <span class="keywordflow">if</span> (key_size &lt; 8) {</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;                   <span class="stringliteral">&quot;The key# %&quot;</span>PRIu32<span class="stringliteral">&quot; in meta has invalid size:&quot;</span></div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;                   <span class="stringliteral">&quot;%&quot;</span>PRIu32<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, key_size);</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;        }</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;        key_size -= 8;</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;a&#39;</span>)) {</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, key_size);</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;        }</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(key_size + 1);</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;        <a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], key_size);</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;    }</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160; </div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;}</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160; </div>
<div class="line"><a name="l04410"></a><span class="lineno"><a class="line" href="mov_8c.html#aa5dd48127e84fe1b508c1b0d634a0804"> 4410</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aa5dd48127e84fe1b508c1b0d634a0804">mov_read_custom</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;{</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;    int64_t <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) + atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>;</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *mean = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160; </div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160; </div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **p;</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;        uint32_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>;</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160; </div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> - <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) &lt;= 12)</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160; </div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;        <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 4); <span class="comment">// flags</span></div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160; </div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;        <span class="keywordflow">if</span> (len &lt; 12 || len - 12 &gt; <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> - <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb))</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> -= 12;</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160; </div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;n&#39;</span>))</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;            p = &amp;mean;</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;n&#39;</span>, <span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;m&#39;</span>, <span class="charliteral">&#39;e&#39;</span>))</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;            p = &amp;<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>;</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;t&#39;</span>, <span class="charliteral">&#39;a&#39;</span>) &amp;&amp; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt; 4) {</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 4);</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> -= 4;</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;            p = &amp;<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160; </div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;        <span class="keywordflow">if</span> (*p)</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160; </div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;        *p = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + 1);</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;        <span class="keywordflow">if</span> (!*p) {</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;        }</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, *p, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(p);</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;        }</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;        (*p)[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>] = 0;</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;    }</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160; </div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;    <span class="keywordflow">if</span> (mean &amp;&amp; <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> &amp;&amp; <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>) {</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;        <span class="keywordflow">if</span> (strcmp(<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <span class="stringliteral">&quot;iTunSMPB&quot;</span>) == 0) {</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;            <span class="keywordtype">int</span> priming, remainder, <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>;</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;            <span class="keywordflow">if</span>(sscanf(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>, <span class="stringliteral">&quot;%*X %X %X %X&quot;</span>, &amp;priming, &amp;remainder, &amp;<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>) == 3){</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;                <span class="keywordflow">if</span>(priming&gt;0 &amp;&amp; priming&lt;16384)</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;                    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fa83b9c26952c52344d7ee9ff2da2d">start_pad</a> = priming;</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;            }</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;        }</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;        <span class="keywordflow">if</span> (strcmp(<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <span class="stringliteral">&quot;cdec&quot;</span>) != 0) {</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>,</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;                        <a class="code" href="group__lavu__dict.html#gacb0ce4f20c15bf174f93590ace0fc8fd">AV_DICT_DONT_STRDUP_KEY</a> | <a class="code" href="group__lavu__dict.html#ga7a9a991cb7837b10ffd44725263de425">AV_DICT_DONT_STRDUP_VAL</a>);</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;            <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;        }</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>,</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;               <span class="stringliteral">&quot;Unhandled or malformed custom metadata of size %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;    }</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160; </div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>, SEEK_SET);</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>);</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>);</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mean);</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;}</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160; </div>
<div class="line"><a name="l04491"></a><span class="lineno"><a class="line" href="mov_8c.html#a5d51e97997852ba277ee4c4673053770"> 4491</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a5d51e97997852ba277ee4c4673053770">mov_read_meta</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;{</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;    <span class="keywordflow">while</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; 8) {</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;        uint32_t <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>;</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#a4db704ed3d00a4be632dad1585d01d92">avio_feof</a>(pb))</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;        <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;        atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 4;</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;r&#39;</span>)) {</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;            <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, -8, SEEK_CUR);</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;            atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> += 8;</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom);</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;        }</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;    }</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;}</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160; </div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;<span class="comment">// return 1 when matrix is identity, 0 otherwise</span></div>
<div class="line"><a name="l04509"></a><span class="lineno"><a class="line" href="mov_8c.html#abc66292f4cd00e4b276cc2ad42fa2fd7"> 4509</a></span>&#160;<span class="preprocessor">#define IS_MATRIX_IDENT(matrix)            \</span></div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;<span class="preprocessor">    ( (matrix)[0][0] == (1 &lt;&lt; 16) &amp;&amp;       \</span></div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;<span class="preprocessor">      (matrix)[1][1] == (1 &lt;&lt; 16) &amp;&amp;       \</span></div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;<span class="preprocessor">      (matrix)[2][2] == (1 &lt;&lt; 30) &amp;&amp;       \</span></div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;<span class="preprocessor">     !(matrix)[0][1] &amp;&amp; !(matrix)[0][2] &amp;&amp; \</span></div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;<span class="preprocessor">     !(matrix)[1][0] &amp;&amp; !(matrix)[1][2] &amp;&amp; \</span></div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;<span class="preprocessor">     !(matrix)[2][0] &amp;&amp; !(matrix)[2][1])</span></div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160; </div>
<div class="line"><a name="l04517"></a><span class="lineno"><a class="line" href="mov_8c.html#a7f1b46ccb039c76b268d63604e3d9865"> 4517</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a7f1b46ccb039c76b268d63604e3d9865">mov_read_tkhd</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;{</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, e;</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>;</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>;</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;    <span class="keywordtype">int</span> display_matrix[3][3];</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;    <span class="keywordtype">int</span> res_display_matrix[3][3] = { { 0 } };</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>;</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>;</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160; </div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160; </div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;    <span class="comment">// Each stream (trak) should have exactly 1 tkhd. This catches bad files and</span></div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;    <span class="comment">// avoids corrupting AVStreams mapped to an earlier tkhd.</span></div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">id</a> != -1)</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160; </div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;    <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> = <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb);</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a> |= (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#a24dc26a590e0c56694c84fc0618c7e9f">MOV_TKHD_FLAG_ENABLED</a>) ? <a class="code" href="avformat_8h.html#af09f200b4cd9bf0baa05671436eef2fb">AV_DISPOSITION_DEFAULT</a> : 0;</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160; </div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1) {</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;        <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;        <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;        <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* creation time */</span></div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;        <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* modification time */</span></div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    }</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">id</a> = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* track id (NOT 0 !)*/</span></div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160; </div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;    <span class="comment">/* highlevel (considering edits) duration in movie timebase */</span></div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;    (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1) ? <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb) : <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160; </div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* layer */</span></div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* alternate group */</span></div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* volume */</span></div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160; </div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;    <span class="comment">//read in the display matrix (outlined in ISO 14496-12, Section 6.2.2)</span></div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;    <span class="comment">// they&#39;re kept in fixed point format through all calculations</span></div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;    <span class="comment">// save u,v,z to store the whole matrix in the AV_PKT_DATA_DISPLAYMATRIX</span></div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;    <span class="comment">// side data, but the scale factor is not needed to calculate aspect ratio</span></div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;        display_matrix[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);   <span class="comment">// 16.16 fixed point</span></div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;        display_matrix[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);   <span class="comment">// 16.16 fixed point</span></div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;        display_matrix[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][2] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);   <span class="comment">//  2.30 fixed point</span></div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;    }</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160; </div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;    <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);       <span class="comment">// 16.16 fixed point track width</span></div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;    <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);      <span class="comment">// 16.16 fixed point track height</span></div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aabc986e9e943c7499c28e07a43fb54b8">width</a> = <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> &gt;&gt; 16;</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2b3c706f015940d9a254f1e755528dbd">height</a> = <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> &gt;&gt; 16;</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160; </div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;    <span class="comment">// apply the moov display matrix (after the tkhd one)</span></div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> sh[3] = { 16, 16, 30 };</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++) {</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;            <span class="keywordflow">for</span> (e = 0; e &lt; 3; e++) {</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;                res_display_matrix[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j] +=</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;                    ((int64_t) display_matrix[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][e] *</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;                     <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;movie_display_matrix[e][j]) &gt;&gt; sh[e];</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;            }</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;        }</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;    }</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160; </div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;    <span class="comment">// save the matrix when it is not the default identity</span></div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mov_8c.html#abc66292f4cd00e4b276cc2ad42fa2fd7">IS_MATRIX_IDENT</a>(res_display_matrix)) {</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="vf__v360_8c.html#a17c41ffe363b0e954806d2335070e961">rotate</a>;</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160; </div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>);</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) * 9);</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>)</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160; </div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * 3 + j] = res_display_matrix[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j];</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160; </div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;#<span class="keywordflow">if</span> <a class="code" href="libavformat_2version_8h.html#acebf84a914d27aadb126602faa6cccd8">FF_API_OLD_ROTATE_API</a></div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;        <a class="code" href="vf__v360_8c.html#a17c41ffe363b0e954806d2335070e961">rotate</a> = <a class="code" href="group__lavu__video__display.html#gaac2ea94d3f66496c758349450b5b0217">av_display_rotation_get</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>);</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libm_8h.html#a2e1baae9134e580910322362dc23290e">isnan</a>(<a class="code" href="vf__v360_8c.html#a17c41ffe363b0e954806d2335070e961">rotate</a>)) {</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;            <span class="keywordtype">char</span> rotate_buf[64];</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;            <a class="code" href="vf__v360_8c.html#a17c41ffe363b0e954806d2335070e961">rotate</a> = -<a class="code" href="vf__v360_8c.html#a17c41ffe363b0e954806d2335070e961">rotate</a>;</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vf__v360_8c.html#a17c41ffe363b0e954806d2335070e961">rotate</a> &lt; 0) <span class="comment">// for backward compatibility</span></div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;                <a class="code" href="vf__v360_8c.html#a17c41ffe363b0e954806d2335070e961">rotate</a> += 360;</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;            <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(rotate_buf, <span class="keyword">sizeof</span>(rotate_buf), <span class="stringliteral">&quot;%g&quot;</span>, <a class="code" href="vf__v360_8c.html#a17c41ffe363b0e954806d2335070e961">rotate</a>);</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;rotate&quot;</span>, rotate_buf, 0);</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;        }</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;    }</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160; </div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;    <span class="comment">// transform the display width/height according to the matrix</span></div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;    <span class="comment">// to keep the same scale, use [width height 1&lt;&lt;16]</span></div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> &amp;&amp; <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>) {</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;        <span class="keywordtype">double</span> disp_transform[2];</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160; </div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;            disp_transform[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="libm_8h.html#a364edfcde984bdfbc031ae0b2ddd6e38">hypot</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>[0 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;                                      sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>[3 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160; </div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;        <span class="keywordflow">if</span> (disp_transform[0] &gt; 0       &amp;&amp; disp_transform[1] &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;            disp_transform[0] &lt; (1&lt;&lt;24) &amp;&amp; disp_transform[1] &lt; (1&lt;&lt;24) &amp;&amp;</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;            <a class="code" href="cuda__runtime_8h.html#a7a87cd25426a228ce8ecbef48ab00de8">fabs</a>((disp_transform[0] / disp_transform[1]) - 1.0) &gt; 0.01)</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a> = <a class="code" href="group__lavu__math__rational.html#ga7dfd5ba1eb1edf5845ac32b338de9e76">av_d2q</a>(</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;                disp_transform[0] / disp_transform[1],</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;                INT_MAX);</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;    }</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;}</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160; </div>
<div class="line"><a name="l04635"></a><span class="lineno"><a class="line" href="mov_8c.html#ae2e0964ab2700cb2c2ca61859f4bdf79"> 4635</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ae2e0964ab2700cb2c2ca61859f4bdf79">mov_read_tfhd</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;{</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;    <a class="code" href="struct_m_o_v_fragment.html">MOVFragment</a> *frag = &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment;</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;    <a class="code" href="struct_m_o_v_track_ext.html">MOVTrackExt</a> *trex = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>, track_id, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;    <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * frag_stream_info;</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160; </div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;    <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> = <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb);</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160; </div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;    track_id = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;    <span class="keywordflow">if</span> (!track_id)</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_data[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].track_id == track_id) {</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;            trex = &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_data[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;        }</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;    <span class="keywordflow">if</span> (!trex) {</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;could not find corresponding trex (id %u)\n&quot;</span>, track_id);</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;    }</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment.found_tfhd = 1;</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;    frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a2349be11f5e42574a16880d4440c4b04">track_id</a> = track_id;</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;    <a class="code" href="mov_8c.html#afcc997e8985e3fc21ded47fcc59be837">set_frag_stream</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index, track_id);</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160; </div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;    frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#ab9e2d7cad6f7c54544fd7b08f8d438c3">base_data_offset</a> = <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#acae7810f03a8ab3c736de9ceef45c4bb">MOV_TFHD_BASE_DATA_OFFSET</a> ?</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;                             <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb) : <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#a37fbd0c474fd0d974ab0ee3622b10bb1">MOV_TFHD_DEFAULT_BASE_IS_MOOF</a> ?</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;                             frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#abc63a60ccc08b222161f3a50de8d3262">moof_offset</a> : frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#ac521372d022b4286353489e9305237d2">implicit_offset</a>;</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;    frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a5609184767f08211be326d4cae2cce4c">stsd_id</a>  = <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#a8a87b9f662becd73dc929ef1917c5225">MOV_TFHD_STSD_ID</a> ? <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb) : trex-&gt;<a class="code" href="struct_m_o_v_track_ext.html#ae3675a4cf0df891a91a3c86ead458a64">stsd_id</a>;</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160; </div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;    frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a3f66119c2b9062b8f01357fe5634ee51">duration</a> = <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#af9ea46fb6cdfe3df38038452d8b06284">MOV_TFHD_DEFAULT_DURATION</a> ?</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;                     <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb) : trex-&gt;<a class="code" href="struct_m_o_v_track_ext.html#a723cd125178a15661e754777cf498cb6">duration</a>;</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;    frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a4fb2a0e4f5609e5af711880ac4ace2db">size</a>     = <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#a5342e91a7ac17277d9c8f71fcb9f7ce8">MOV_TFHD_DEFAULT_SIZE</a> ?</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;                     <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb) : trex-&gt;<a class="code" href="struct_m_o_v_track_ext.html#a86496b53a65b1f198d09d5991b13e401">size</a>;</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;    frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a264bae78123f1d1c445a5c9b1067993a">flags</a>    = <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#ab592da0893ff59ab382a3a4e38e51c6c">MOV_TFHD_DEFAULT_FLAGS</a> ?</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;                     <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb) : trex-&gt;<a class="code" href="struct_m_o_v_track_ext.html#a156d71f68d8134603cd7153a8f8adda9">flags</a>;</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;frag flags 0x%x\n&quot;</span>, frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a264bae78123f1d1c445a5c9b1067993a">flags</a>);</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160; </div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;    frag_stream_info = <a class="code" href="mov_8c.html#a9ec4d441a01a5ff31c301f33c2808ba9">get_current_frag_stream_info</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index);</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;    <span class="keywordflow">if</span> (frag_stream_info)</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;        frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ab9d7a747ecfa0d08fe79e12f18fbcd1c">next_trun_dts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160; </div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;}</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160; </div>
<div class="line"><a name="l04681"></a><span class="lineno"><a class="line" href="mov_8c.html#ad280c9895b016bdee2b3e2d4f4f07d92"> 4681</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ad280c9895b016bdee2b3e2d4f4f07d92">mov_read_chap</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;{</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, num;</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;    <span class="keywordtype">void</span> *new_tracks;</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160; </div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;    num = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> / 4;</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;    <span class="keywordflow">if</span> (!(new_tracks = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(num, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>))))</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160; </div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;chapter_tracks);</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;chapter_tracks = new_tracks;</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;nb_chapter_tracks = num;</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160; </div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;chapter_tracks[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160; </div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;}</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160; </div>
<div class="line"><a name="l04700"></a><span class="lineno"><a class="line" href="mov_8c.html#a942a4639dc6ccc8e3362d3f46d3e83b7"> 4700</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a942a4639dc6ccc8e3362d3f46d3e83b7">mov_read_trex</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;{</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;    <a class="code" href="struct_m_o_v_track_ext.html">MOVTrackExt</a> *trex;</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160; </div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;    <span class="keywordflow">if</span> ((uint64_t)<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_count+1 &gt;= UINT_MAX / <span class="keyword">sizeof</span>(*<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_data))</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="group__lavu__mem__funcs.html#gad8fde0c159ac905909339e082a049cde">av_reallocp_array</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_data, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_count + 1,</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;                                 <span class="keyword">sizeof</span>(*<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_data))) &lt; 0) {</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_count = 0;</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;    }</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160; </div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;duration = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>; <span class="comment">// the duration from mvhd is not representing the whole file when fragments are used.</span></div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160; </div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;    trex = &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_data[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;trex_count++];</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;    trex-&gt;<a class="code" href="struct_m_o_v_track_ext.html#a90487aca7845afa878d2d7d6bb2ba4bf">track_id</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;    trex-&gt;<a class="code" href="struct_m_o_v_track_ext.html#ae3675a4cf0df891a91a3c86ead458a64">stsd_id</a>  = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;    trex-&gt;<a class="code" href="struct_m_o_v_track_ext.html#a723cd125178a15661e754777cf498cb6">duration</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;    trex-&gt;<a class="code" href="struct_m_o_v_track_ext.html#a86496b53a65b1f198d09d5991b13e401">size</a>     = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;    trex-&gt;<a class="code" href="struct_m_o_v_track_ext.html#a156d71f68d8134603cd7153a8f8adda9">flags</a>    = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;}</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160; </div>
<div class="line"><a name="l04726"></a><span class="lineno"><a class="line" href="mov_8c.html#a74298e7157b952783dfa02ebaec0d8ee"> 4726</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a74298e7157b952783dfa02ebaec0d8ee">mov_read_tfdt</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;{</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;    <a class="code" href="struct_m_o_v_fragment.html">MOVFragment</a> *frag = &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment;</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;    <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * frag_stream_info;</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;    int64_t base_media_decode_time;</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160; </div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;id == frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a2349be11f5e42574a16880d4440c4b04">track_id</a>) {</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;            st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;        }</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;    }</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;    <span class="keywordflow">if</span> (!st) {</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;could not find corresponding track id %u\n&quot;</span>, frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a2349be11f5e42574a16880d4440c4b04">track_id</a>);</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;    }</div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">pseudo_stream_id</a> + 1 != frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a5609184767f08211be326d4cae2cce4c">stsd_id</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">pseudo_stream_id</a> != -1)</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>) {</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;        base_media_decode_time = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;        base_media_decode_time = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;    }</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160; </div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;    frag_stream_info = <a class="code" href="mov_8c.html#a9ec4d441a01a5ff31c301f33c2808ba9">get_current_frag_stream_info</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index);</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;    <span class="keywordflow">if</span> (frag_stream_info)</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;        frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a3e57c1446839c78f0bab2951c90c886e">tfdt_dts</a> = base_media_decode_time;</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">track_end</a> = base_media_decode_time;</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160; </div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;}</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160; </div>
<div class="line"><a name="l04764"></a><span class="lineno"><a class="line" href="mov_8c.html#a76ae95d19017f3aaf08e7170e0bac2ed"> 4764</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a76ae95d19017f3aaf08e7170e0bac2ed">mov_read_trun</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;{</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;    <a class="code" href="struct_m_o_v_fragment.html">MOVFragment</a> *frag = &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment;</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;    <a class="code" href="struct_m_o_v_stts.html">MOVStts</a> *ctts_data;</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;    uint64_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;    int64_t dts, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;    <span class="keywordtype">int</span> data_offset = 0;</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;    <span class="keywordtype">unsigned</span> entries, first_sample_flags = frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a264bae78123f1d1c445a5c9b1067993a">flags</a>;</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>, <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;    int64_t prev_dts = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;    <span class="keywordtype">int</span> next_frag_index = -1, index_entry_pos;</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;    <span class="keywordtype">size_t</span> requested_size;</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;    <span class="keywordtype">size_t</span> old_ctts_allocated_size;</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;    <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *new_entries;</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;    <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * frag_stream_info;</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160; </div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;    <span class="keywordflow">if</span> (!frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a46607ddcf9c93af3c95270d37491422f">found_tfhd</a>) {</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;trun track id unknown, no tfhd was found\n&quot;</span>);</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;    }</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160; </div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;id == frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a2349be11f5e42574a16880d4440c4b04">track_id</a>) {</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;            st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;        }</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;    }</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;    <span class="keywordflow">if</span> (!st) {</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;could not find corresponding track id %u\n&quot;</span>, frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a2349be11f5e42574a16880d4440c4b04">track_id</a>);</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;    }</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">pseudo_stream_id</a>+1 != frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a5609184767f08211be326d4cae2cce4c">stsd_id</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">pseudo_stream_id</a> != -1)</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160; </div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;    <span class="comment">// Find the next frag_index index that has a valid index_entry for</span></div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;    <span class="comment">// the current track_id.</span></div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;    <span class="comment">// A valid index_entry means the trun for the fragment was read</span></div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;    <span class="comment">// and it&#39;s samples are in index_entries at the given position.</span></div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;    <span class="comment">// New index entries will be inserted before the index_entry found.</span></div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;    index_entry_pos = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>;</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.current + 1; i &lt; c-&gt;frag_index.nb_items; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;        frag_stream_info = <a class="code" href="mov_8c.html#a7c11ff3d622d1f7d00f6c5ad06d42378">get_frag_stream_info</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a2349be11f5e42574a16880d4440c4b04">track_id</a>);</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;        <span class="keywordflow">if</span> (frag_stream_info &amp;&amp; frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#acb5a68d6be94437beeaf9108dcce0331">index_entry</a> &gt;= 0) {</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;            next_frag_index = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;            index_entry_pos = frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#acb5a68d6be94437beeaf9108dcce0331">index_entry</a>;</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;        }</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;    }</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(index_entry_pos &lt;= st-&gt;internal-&gt;nb_index_entries);</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160; </div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;    <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> = <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb);</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;    entries = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;flags 0x%x entries %u\n&quot;</span>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>, entries);</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160; </div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;    <span class="keywordflow">if</span> ((uint64_t)entries+sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> &gt;= UINT_MAX/<span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>))</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#abfbee420834e4362fd8d78733a328fd3">MOV_TRUN_DATA_OFFSET</a>)        data_offset        = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#a672963344ffb7df7728e3d92d1aa9331">MOV_TRUN_FIRST_SAMPLE_FLAGS</a>) first_sample_flags = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160; </div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;    frag_stream_info = <a class="code" href="mov_8c.html#a9ec4d441a01a5ff31c301f33c2808ba9">get_current_frag_stream_info</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index);</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;    <span class="keywordflow">if</span> (frag_stream_info) {</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;        <span class="keywordflow">if</span> (frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ab9d7a747ecfa0d08fe79e12f18fbcd1c">next_trun_dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;            dts = frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ab9d7a747ecfa0d08fe79e12f18fbcd1c">next_trun_dts</a> - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>;</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">first_tfra_pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;use_mfra_for == <a class="code" href="isom_8h.html#a1131615c6cef3f78bb03bbdc9847e8ae">FF_MOV_FLAG_MFRA_PTS</a>) {</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;            <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">first_tfra_pts</a>;</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;found mfra time %&quot;</span>PRId64</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;                    <span class="stringliteral">&quot;, using it for pts\n&quot;</span>, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>);</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">first_tfra_pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;use_mfra_for == <a class="code" href="isom_8h.html#a39eee8b7a932ff038719d3cf928858c4">FF_MOV_FLAG_MFRA_DTS</a>) {</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;            dts = frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">first_tfra_pts</a>;</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;found mfra time %&quot;</span>PRId64</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;                    <span class="stringliteral">&quot;, using it for dts\n&quot;</span>, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>);</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ae05623aea3738f661957b3b5c40ce117">sidx_pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;            <span class="comment">// FIXME: sidx earliest_presentation_time is *PTS*, s.b.</span></div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;            <span class="comment">// pts = frag_stream_info-&gt;sidx_pts;</span></div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;            dts = frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ae05623aea3738f661957b3b5c40ce117">sidx_pts</a> - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>;</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;found sidx time %&quot;</span>PRId64</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;                    <span class="stringliteral">&quot;, using it for pts\n&quot;</span>, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>);</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a3e57c1446839c78f0bab2951c90c886e">tfdt_dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;            dts = frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a3e57c1446839c78f0bab2951c90c886e">tfdt_dts</a> - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>;</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;found tfdt time %&quot;</span>PRId64</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;                    <span class="stringliteral">&quot;, using it for dts\n&quot;</span>, dts);</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;            dts = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">track_end</a> - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>;</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;found track end time %&quot;</span>PRId64</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;                    <span class="stringliteral">&quot;, using it for dts\n&quot;</span>, dts);</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;        }</div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;        dts = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">track_end</a> - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>;</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;found track end time %&quot;</span>PRId64</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;                <span class="stringliteral">&quot;, using it for dts\n&quot;</span>, dts);</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;    }</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>   = frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#ab9e2d7cad6f7c54544fd7b08f8d438c3">base_data_offset</a> + data_offset;</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;    <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> = 0;</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;first sample flags 0x%x\n&quot;</span>, first_sample_flags);</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160; </div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;    <span class="comment">// realloc space for new index entries</span></div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;    <span class="keywordflow">if</span>((uint64_t)st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> + entries &gt;= UINT_MAX / <span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a>)) {</div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;        entries = UINT_MAX / <span class="keyword">sizeof</span>(<a class="code" href="avformat_8h.html#a26c94891b37de95d520e67c2d3dbe0aa">AVIndexEntry</a>) - st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>;</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to add index entry\n&quot;</span>);</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;    }</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;    <span class="keywordflow">if</span> (entries == 0)</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160; </div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;    requested_size = (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> + entries) * <span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a>);</div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;    new_entries = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>,</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;                                  &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a57bb9e0e79c26a780716fe4a40675af7">index_entries_allocated_size</a>,</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;                                  requested_size);</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;    <span class="keywordflow">if</span> (!new_entries)</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>= new_entries;</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160; </div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;    requested_size = (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> + entries) * <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>);</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;    old_ctts_allocated_size = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a>;</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;    ctts_data = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>, &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a>,</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;                                requested_size);</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;    <span class="keywordflow">if</span> (!ctts_data)</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> = ctts_data;</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160; </div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;    <span class="comment">// In case there were samples without ctts entries, ensure they get</span></div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;    <span class="comment">// zero valued entries. This ensures clips which mix boxes with and</span></div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;    <span class="comment">// without ctts entries don&#39;t pickup uninitialized data.</span></div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;    memset((<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>) + old_ctts_allocated_size, 0,</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;           sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">ctts_allocated_size</a> - old_ctts_allocated_size);</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160; </div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;    <span class="keywordflow">if</span> (index_entry_pos &lt; st-&gt;internal-&gt;nb_index_entries) {</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;        <span class="comment">// Make hole in index_entries and ctts_data for new samples</span></div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;        memmove(st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a> + index_entry_pos + entries,</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a> + index_entry_pos,</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;                <span class="keyword">sizeof</span>(*st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>) *</div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;                (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> - index_entry_pos));</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;        memmove(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> + index_entry_pos + entries,</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> + index_entry_pos,</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;                <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>) * (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> - index_entry_pos));</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;        <span class="keywordflow">if</span> (index_entry_pos &lt; sc-&gt;current_sample) {</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> += entries;</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;        }</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;    }</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160; </div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> += entries;</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>;</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160; </div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;    <span class="comment">// Record the index_entry position in frag_index of this fragment</span></div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;    <span class="keywordflow">if</span> (frag_stream_info)</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;        frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#acb5a68d6be94437beeaf9108dcce0331">index_entry</a> = index_entry_pos;</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160; </div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;    <span class="keywordflow">if</span> (index_entry_pos &gt; 0)</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;        prev_dts = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[index_entry_pos-1].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a>;</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160; </div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;        <span class="keywordtype">unsigned</span> sample_size = frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a4fb2a0e4f5609e5af711880ac4ace2db">size</a>;</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;        <span class="keywordtype">int</span> sample_flags = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ? frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a264bae78123f1d1c445a5c9b1067993a">flags</a> : first_sample_flags;</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;        <span class="keywordtype">unsigned</span> sample_duration = frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a3f66119c2b9062b8f01357fe5634ee51">duration</a>;</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;        <span class="keywordtype">unsigned</span> ctts_duration = 0;</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;        <span class="keywordtype">int</span> keyframe = 0;</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;        <span class="keywordtype">int</span> index_entry_flags = 0;</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160; </div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#a01406d23831b4fb80160e18048f279e9">MOV_TRUN_SAMPLE_DURATION</a>) sample_duration = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#af01978fe748c2b00c93865d3be7e1f9c">MOV_TRUN_SAMPLE_SIZE</a>)     sample_size     = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#aa510f07cb3f7e38a15b041094c83c59e">MOV_TRUN_SAMPLE_FLAGS</a>)    sample_flags    = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#a1864de3c6462110501821f61464efa1a">MOV_TRUN_SAMPLE_CTS</a>)      ctts_duration   = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160; </div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;        <a class="code" href="mov_8c.html#a78b765b34c851a48e1f1ecd9b969b1fc">mov_update_dts_shift</a>(sc, ctts_duration, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc);</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;            dts = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>;</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#a1864de3c6462110501821f61464efa1a">MOV_TRUN_SAMPLE_CTS</a>) {</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;                dts -= ctts_duration;</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;                dts -= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>;</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;            }</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;                   <span class="stringliteral">&quot;pts %&quot;</span>PRId64<span class="stringliteral">&quot; calculated dts %&quot;</span>PRId64</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;                   <span class="stringliteral">&quot; sc-&gt;dts_shift %d ctts.duration %d&quot;</span></div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;                   <span class="stringliteral">&quot; sc-&gt;time_offset %&quot;</span>PRId64</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;                   <span class="stringliteral">&quot; flags &amp; MOV_TRUN_SAMPLE_CTS %d\n&quot;</span>,</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;                   <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, dts,</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;                   sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>, ctts_duration,</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;                   sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; <a class="code" href="isom_8h.html#a1864de3c6462110501821f61464efa1a">MOV_TRUN_SAMPLE_CTS</a>);</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;            <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;        }</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160; </div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>)</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;            keyframe = 1;</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;            keyframe =</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;                !(sample_flags &amp; (<a class="code" href="isom_8h.html#a7eeab2ab9fe996844b247c3a94465e1e">MOV_FRAG_SAMPLE_FLAG_IS_NON_SYNC</a> |</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;                                  <a class="code" href="isom_8h.html#a3e6e523d1b441ef4140224db61f1a74f">MOV_FRAG_SAMPLE_FLAG_DEPENDS_YES</a>));</div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;        <span class="keywordflow">if</span> (keyframe) {</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;            <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> = 0;</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;            index_entry_flags |= <a class="code" href="avformat_8h.html#a23159bdc0b27ccf964072e30d6cc4559">AVINDEX_KEYFRAME</a>;</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;        }</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;        <span class="comment">// Fragments can overlap in time.  Discard overlapping frames after</span></div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;        <span class="comment">// decoding.</span></div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;        <span class="keywordflow">if</span> (prev_dts &gt;= dts)</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;            index_entry_flags |= <a class="code" href="avformat_8h.html#ac4fe20a35d4a1b9014e5f4062fb67b52">AVINDEX_DISCARD_FRAME</a>;</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160; </div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[index_entry_pos].<a class="code" href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">pos</a> = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[index_entry_pos].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> = dts;</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[index_entry_pos].<a class="code" href="struct_a_v_index_entry.html#a1b57d93b863a1b605461229a65ca8b52">size</a>= sample_size;</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[index_entry_pos].<a class="code" href="struct_a_v_index_entry.html#add3fa33e8b3363a96fa4c62fca1bcf42">min_distance</a>= <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>;</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[index_entry_pos].<a class="code" href="struct_a_v_index_entry.html#a72366fb5dae7421e41cce6ad8dd2126b">flags</a> = index_entry_flags;</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160; </div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>[index_entry_pos].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a> = 1;</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>[index_entry_pos].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a> = ctts_duration;</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;        index_entry_pos++;</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160; </div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;AVIndex stream %d, sample %d, offset %&quot;</span>PRIx64<span class="stringliteral">&quot;, dts %&quot;</span>PRId64<span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;                <span class="stringliteral">&quot;size %u, distance %d, keyframe %d\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>,</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;                index_entry_pos, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, dts, sample_size, <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>, keyframe);</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;        <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>++;</div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;        dts += sample_duration;</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += sample_size;</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a98b487c491f258c1bd7484fb7f92dff8">data_size</a> += sample_size;</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160; </div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;        <span class="keywordflow">if</span> (sample_duration &lt;= INT64_MAX - sc-&gt;duration_for_fps &amp;&amp;</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;            1 &lt;= INT_MAX - sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fd9cfc5ffbad16504544eb05a5ac06">nb_frames_for_fps</a></div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;        ) {</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a06fbe82a936c2a6452067d96479e2f30">duration_for_fps</a> += sample_duration;</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fd9cfc5ffbad16504544eb05a5ac06">nb_frames_for_fps</a> ++;</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;        }</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;    }</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;    <span class="keywordflow">if</span> (frag_stream_info)</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;        frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ab9d7a747ecfa0d08fe79e12f18fbcd1c">next_trun_dts</a> = dts + sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>;</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entries) {</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;        <span class="comment">// EOF found before reading all entries.  Fix the hole this would</span></div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;        <span class="comment">// leave in index_entries and ctts_data</span></div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;        <span class="keywordtype">int</span> gap = entries - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;        memmove(st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a> + index_entry_pos,</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a> + index_entry_pos + gap,</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;                <span class="keyword">sizeof</span>(*st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>) *</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;                (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> - (index_entry_pos + gap)));</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;        memmove(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> + index_entry_pos,</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> + index_entry_pos + gap,</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;                <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>) *</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;                (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> - (index_entry_pos + gap)));</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160; </div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> -= gap;</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> -= gap;</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;        <span class="keywordflow">if</span> (index_entry_pos &lt; sc-&gt;current_sample) {</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> -= gap;</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;        }</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;        entries = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;    }</div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160; </div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;    <span class="comment">// The end of this new fragment may overlap in time with the start</span></div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;    <span class="comment">// of the next fragment in index_entries. Mark the samples in the next</span></div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;    <span class="comment">// fragment that overlap with AVINDEX_DISCARD_FRAME</span></div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    prev_dts = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;    <span class="keywordflow">if</span> (index_entry_pos &gt; 0)</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;        prev_dts = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[index_entry_pos-1].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a>;</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = index_entry_pos; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;        <span class="keywordflow">if</span> (prev_dts &lt; st-&gt;internal-&gt;index_entries[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].timestamp)</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_a_v_index_entry.html#a72366fb5dae7421e41cce6ad8dd2126b">flags</a> |= <a class="code" href="avformat_8h.html#ac4fe20a35d4a1b9014e5f4062fb67b52">AVINDEX_DISCARD_FRAME</a>;</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;    }</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160; </div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;    <span class="comment">// If a hole was created to insert the new index_entries into,</span></div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;    <span class="comment">// the index_entry recorded for all subsequent moof must</span></div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;    <span class="comment">// be incremented by the number of entries inserted.</span></div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;    <a class="code" href="mov_8c.html#a622d566aa38da4ccadd3b5a2685f44d7">fix_frag_index_entries</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index, next_frag_index,</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;                           frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#a2349be11f5e42574a16880d4440c4b04">track_id</a>, entries);</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160; </div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;reached eof, corrupted TRUN atom\n&quot;</span>);</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;    }</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160; </div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;    frag-&gt;<a class="code" href="struct_m_o_v_fragment.html#ac521372d022b4286353489e9305237d2">implicit_offset</a> = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160; </div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">track_end</a> = dts + sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">time_offset</a>;</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">track_end</a>)</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">track_end</a>;</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160; </div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;}</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160; </div>
<div class="line"><a name="l05047"></a><span class="lineno"><a class="line" href="mov_8c.html#a61c25c57b474fff42c1a27c2d4e85ea9"> 5047</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a61c25c57b474fff42c1a27c2d4e85ea9">mov_read_sidx</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;{</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;    int64_t stream_size = <a class="code" href="avio_8h.html#a375f057e315dd2273579555128a070fb">avio_size</a>(pb);</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;    int64_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) + atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, timestamp;</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>, is_complete;</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, track_id, item_count;</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *ref_st = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, *ref_sc = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> timescale;</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160; </div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> &gt; 1) {</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <span class="stringliteral">&quot;sidx version %u&quot;</span>, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>);</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;    }</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160; </div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">// flags</span></div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160; </div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;    track_id = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// Reference ID</span></div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;id == track_id) {</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;            st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;        }</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;    }</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;    <span class="keywordflow">if</span> (!st) {</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;could not find corresponding track id %d\n&quot;</span>, track_id);</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;    }</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160; </div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160; </div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;    timescale = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(1, <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb));</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160; </div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;    <span class="keywordflow">if</span> (timescale.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &lt;= 0) {</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid sidx timescale 1/%d\n&quot;</span>, timescale.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;    }</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160; </div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 0) {</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;        <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;        <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;    }</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160; </div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;    <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb); <span class="comment">// reserved</span></div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160; </div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;    item_count = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160; </div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; item_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;        <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * frag_stream_info;</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;        uint32_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;        uint32_t <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &amp; 0x80000000) {</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <span class="stringliteral">&quot;sidx reference_type 1&quot;</span>);</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;        }</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;        <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">// sap_flags</span></div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;        timestamp = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, timescale, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160; </div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;        <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mov_8c.html#a027536bc27f9a6ef7c11b785a959e490">update_frag_index</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>);</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;        frag_stream_info = <a class="code" href="mov_8c.html#a7c11ff3d622d1f7d00f6c5ad06d42378">get_frag_stream_info</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, track_id);</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;        <span class="keywordflow">if</span> (frag_stream_info)</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;            frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ae05623aea3738f661957b3b5c40ce117">sidx_pts</a> = timestamp;</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160; </div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;        <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> += <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>;</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;    }</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160; </div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">track_end</a> = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160; </div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9b6948eb6a7d702935ec1ff6afaa4a0a">has_sidx</a> = 1;</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160; </div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;    <span class="comment">// See if the remaining bytes are just an mfra which we can ignore.</span></div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;    is_complete = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> == stream_size;</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;    <span class="keywordflow">if</span> (!is_complete &amp;&amp; (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a0e3c41c290b38923880b9cccb669bf78">seekable</a> &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>)) {</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;        int64_t <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;        int64_t original_pos = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;have_read_mfra_size) {</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, stream_size - 4, SEEK_SET)) &lt; 0)</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mfra_size = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;have_read_mfra_size = 1;</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, original_pos, SEEK_SET)) &lt; 0)</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;        }</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mfra_size == stream_size)</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;            is_complete = 1;</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;    }</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160; </div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;    <span class="keywordflow">if</span> (is_complete) {</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;        <span class="comment">// Find first entry in fragment index that came from an sidx.</span></div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;        <span class="comment">// This will pretty much always be the first entry.</span></div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.nb_items; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;            <a class="code" href="struct_m_o_v_fragment_index_item.html">MOVFragmentIndexItem</a> * item = &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.item[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;            <span class="keywordflow">for</span> (j = 0; ref_st == <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; j &lt; item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a31b398f75fb1d776b548aa149616485f">nb_stream_info</a>; j++) {</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;                <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * si;</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;                si = &amp;item-&gt;<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a>[j];</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;                <span class="keywordflow">if</span> (si-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ae05623aea3738f661957b3b5c40ce117">sidx_pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;                    ref_st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[j];</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;                    ref_sc = ref_st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;                }</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;            }</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;        }</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;        <span class="keywordflow">if</span> (ref_st) <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;            st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;            sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;            <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9b6948eb6a7d702935ec1ff6afaa4a0a">has_sidx</a>) {</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">track_end</a> = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(ref_st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>, ref_sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>);</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;            }</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;        }</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160; </div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.complete = 1;</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;    }</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160; </div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;}</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160; </div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;<span class="comment">/* this atom should be null (from specs), but some buggy files put the &#39;moov&#39; atom inside it... */</span></div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;<span class="comment">/* like the files created with Adobe Premiere 5.0, for samples see */</span></div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;<span class="comment">/* http://graphics.tudelft.nl/~wouter/publications/soundtests/ */</span></div>
<div class="line"><a name="l05173"></a><span class="lineno"><a class="line" href="mov_8c.html#af40b9788507cb3f001989b8c6741d108"> 5173</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#af40b9788507cb3f001989b8c6741d108">mov_read_wide</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;{</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160; </div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 8)</div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;        <span class="keywordflow">return</span> 0; <span class="comment">/* continue */</span></div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb) != 0) { <span class="comment">/* 0 sized mdat atom... use the &#39;wide&#39; atom size */</span></div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 4);</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;    }</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;    atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;    atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 8;</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;t&#39;</span>)) {</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;    }</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;    err = <a class="code" href="mov_8c.html#a9fbf91d5c580f97b066354c92d02367d">mov_read_mdat</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, atom);</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;}</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160; </div>
<div class="line"><a name="l05193"></a><span class="lineno"><a class="line" href="mov_8c.html#afb652365ce584a9a759fb077bfc55566"> 5193</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#afb652365ce584a9a759fb077bfc55566">mov_read_cmov</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;{</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;<span class="preprocessor">#if CONFIG_ZLIB</span></div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>;</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *cmov_data;</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *moov_data; <span class="comment">/* uncompressed data */</span></div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;    <span class="keywordtype">long</span> cmov_len, moov_len;</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = -1;</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160; </div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* dcom atom */</span></div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb) != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;m&#39;</span>))</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb) != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;z&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;b&#39;</span>)) {</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;unknown compression for cmov atom !\n&quot;</span>);</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;    }</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* cmvd atom */</span></div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb) != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;d&#39;</span>))</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;    moov_len = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* uncompressed size */</span></div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;    cmov_len = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 6 * 4;</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160; </div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;    cmov_data = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(cmov_len);</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;    <span class="keywordflow">if</span> (!cmov_data)</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;    moov_data = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(moov_len);</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;    <span class="keywordflow">if</span> (!moov_data) {</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(cmov_data);</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;    }</div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, cmov_data, cmov_len);</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;        <span class="keywordflow">goto</span> free_and_return;</div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160; </div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;    <span class="keywordflow">if</span> (uncompress (moov_data, (uLongf *) &amp;moov_len, (<span class="keyword">const</span> Bytef *)cmov_data, cmov_len) != Z_OK)</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;        <span class="keywordflow">goto</span> free_and_return;</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio__internal_8h.html#ad5a5bf73572e5fdb109e0bcd1aa99c7e">ffio_init_context</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, moov_data, moov_len, 0, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) != 0)</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;        <span class="keywordflow">goto</span> free_and_return;</div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>.seekable = <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>;</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;    atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> = <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;    atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> = moov_len;</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, atom);</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;free_and_return:</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(moov_data);</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(cmov_data);</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;this file requires zlib support compiled in\n&quot;</span>);</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOSYS);</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;}</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160; </div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;<span class="comment">/* edit list atom */</span></div>
<div class="line"><a name="l05247"></a><span class="lineno"><a class="line" href="mov_8c.html#a4bb4b077324472328268c8677dac1a67"> 5247</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a4bb4b077324472328268c8677dac1a67">mov_read_elst</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;{</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, edit_count, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>;</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;    int64_t elst_entry_size;</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160; </div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1 || <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ignore_editlist)</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;    sc = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1]-&gt;priv_data;</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160; </div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;    edit_count = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* entries */</span></div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;    atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 8;</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160; </div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;    elst_entry_size = <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1 ? 20 : 12;</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> != edit_count * elst_entry_size) {</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;strict_std_compliance &gt;= <a class="code" href="avcodec_8h.html#a5c1eb24858b3a73d6bbe9585d30e971a">FF_COMPLIANCE_STRICT</a>) {</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid edit list entry_count: %d for elst atom of size: %&quot;</span>PRId64<span class="stringliteral">&quot; bytes.\n&quot;</span>,</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;                   edit_count, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> + 8);</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;            edit_count = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> / elst_entry_size;</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;            <span class="keywordflow">if</span> (edit_count * elst_entry_size != atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>) {</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;ELST atom of %&quot;</span>PRId64<span class="stringliteral">&quot; bytes, bigger than %d entries.\n&quot;</span>, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>, edit_count);</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;            }</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;        }</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;    }</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160; </div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;    <span class="keywordflow">if</span> (!edit_count)</div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>)</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Duplicated ELST atom\n&quot;</span>);</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>);</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afc7153ab358ca15982533b9f06406c06">elst_count</a> = 0;</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a> = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(edit_count, <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>));</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>)</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160; </div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;track[%u].edit_count = %i\n&quot;</span>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1, edit_count);</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; edit_count &amp;&amp; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; 0 &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;        <a class="code" href="struct_m_o_v_elst.html">MOVElst</a> *e = &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160; </div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1) {</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;            e-&gt;<a class="code" href="struct_m_o_v_elst.html#a652e67753f4acce70fb26147505f883c">duration</a> = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;            e-&gt;<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a>     = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;            atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 16;</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;            e-&gt;<a class="code" href="struct_m_o_v_elst.html#a652e67753f4acce70fb26147505f883c">duration</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* segment duration */</span></div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;            e-&gt;<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a>     = (<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>)<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* media time */</span></div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;            atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 8;</div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;        }</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;        e-&gt;<a class="code" href="struct_m_o_v_elst.html#a4ca876e034e22629ecff817f6348e293">rate</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb) / 65536.0;</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;        atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> -= 4;</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;duration=%&quot;</span>PRId64<span class="stringliteral">&quot; time=%&quot;</span>PRId64<span class="stringliteral">&quot; rate=%f\n&quot;</span>,</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;               e-&gt;<a class="code" href="struct_m_o_v_elst.html#a652e67753f4acce70fb26147505f883c">duration</a>, e-&gt;<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a>, e-&gt;<a class="code" href="struct_m_o_v_elst.html#a4ca876e034e22629ecff817f6348e293">rate</a>);</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160; </div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;        <span class="keywordflow">if</span> (e-&gt;<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a> &lt; 0 &amp;&amp; e-&gt;<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a> != -1 &amp;&amp;</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;strict_std_compliance &gt;= <a class="code" href="avcodec_8h.html#a5c1eb24858b3a73d6bbe9585d30e971a">FF_COMPLIANCE_STRICT</a>) {</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Track %d, edit %d: Invalid edit list media time=%&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;                   <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, e-&gt;<a class="code" href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">time</a>);</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;        }</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;    }</div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afc7153ab358ca15982533b9f06406c06">elst_count</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160; </div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;}</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160; </div>
<div class="line"><a name="l05316"></a><span class="lineno"><a class="line" href="mov_8c.html#a383d3d6a965294260b5950905b9e06bf"> 5316</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a383d3d6a965294260b5950905b9e06bf">mov_read_tmcd</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;{</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160; </div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;    sc = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1]-&gt;priv_data;</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a79d9b90ec899fa52b6f3d61d75327530">timecode_track</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;}</div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160; </div>
<div class="line"><a name="l05327"></a><span class="lineno"><a class="line" href="mov_8c.html#a50a6ea0d7c4ed7bcd7b90c82ddaed454"> 5327</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a50a6ea0d7c4ed7bcd7b90c82ddaed454">mov_read_av1c</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;{</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160; </div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160; </div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 4) {</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Empty AV1 Codec Configuration Box\n&quot;</span>);</div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;    }</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160; </div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;    <span class="comment">/* For now, propagate only the OBUs, if any. Once libavcodec is</span></div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;<span class="comment">       updated to handle isobmff style extradata this can be removed. */</span></div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 4);</div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160; </div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> == 4)</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160; </div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#ae829eaf74d06f3a6cb1b9ad07560fb92">ff_get_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 4);</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160; </div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;}</div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160; </div>
<div class="line"><a name="l05355"></a><span class="lineno"><a class="line" href="mov_8c.html#ac0edbd1bcfe926ed782b99d9d2d3b090"> 5355</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ac0edbd1bcfe926ed782b99d9d2d3b090">mov_read_vpcc</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;{</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>, <a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a>, <a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a>, color_trc, color_space;</div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160; </div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160; </div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 5) {</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Empty VP Codec Configuration box\n&quot;</span>);</div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;    }</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160; </div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> != 1) {</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unsupported VP Codec Configuration box version %d\n&quot;</span>, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>);</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;    }</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 3); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160; </div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 2); <span class="comment">/* profile + level */</span></div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;    <a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a>     = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* bitDepth, chromaSubsampling, videoFullRangeFlag */</span></div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;    <a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;    color_trc       = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;    color_space     = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb)) <span class="comment">/* codecIntializationDataSize */</span></div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160; </div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="pixdesc_8c.html#a811dbb6cf48bbcd66a1243bdd6d89909">av_color_primaries_name</a>(<a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a>))</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;        <a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a> = <a class="code" href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942">AVCOL_PRI_UNSPECIFIED</a>;</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="pixdesc_8c.html#a2ebc788f298dc96bc647ebcdeeb5d0b2">av_color_transfer_name</a>(color_trc))</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;        color_trc = <a class="code" href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab">AVCOL_TRC_UNSPECIFIED</a>;</div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="pixdesc_8c.html#a7a5b3f4d128f0a0112b4a91f75055339">av_color_space_name</a>(color_space))</div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;        color_space = <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2">AVCOL_SPC_UNSPECIFIED</a>;</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160; </div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">color_range</a>     = (<a class="code" href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a> &amp; 1) ? <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a> : <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a>;</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#aa884cae3fd16b30c61201a686664f96b">color_primaries</a> = <a class="code" href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a>;</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#ac25ed8394e1efdbbcf28932ff0020893">color_trc</a>       = color_trc;</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a020398a4963e932853cefc169d90456d">color_space</a>     = color_space;</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160; </div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;}</div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160; </div>
<div class="line"><a name="l05399"></a><span class="lineno"><a class="line" href="mov_8c.html#a5f2446e2c52a90e8e18be878dbf4a2d7"> 5399</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a5f2446e2c52a90e8e18be878dbf4a2d7">mov_read_smdm</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;{</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>;</div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160; </div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160; </div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;    sc = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1]-&gt;priv_data;</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160; </div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 5) {</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Empty Mastering Display Metadata box\n&quot;</span>);</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;    }</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160; </div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>) {</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unsupported Mastering Display Metadata box version %d\n&quot;</span>, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>);</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;    }</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 3); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160; </div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a> = <a class="code" href="mastering__display__metadata_8c.html#af178e07682c61609bb3bc505947cd064">av_mastering_display_metadata_alloc</a>();</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>)</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160; </div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb), 1 &lt;&lt; 16);</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb), 1 &lt;&lt; 16);</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;    }</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a968384052f48e91fc57b3c61b9f68224">white_point</a>[0] = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb), 1 &lt;&lt; 16);</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a968384052f48e91fc57b3c61b9f68224">white_point</a>[1] = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb), 1 &lt;&lt; 16);</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160; </div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a45890b654337321044a5b13c5e5961c5">max_luminance</a> = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb), 1 &lt;&lt; 8);</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a4ad2e7f456d7763060c25e92be573341">min_luminance</a> = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb), 1 &lt;&lt; 14);</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160; </div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a0e30962e66d883ddba77fac5af55d3af">has_primaries</a> = 1;</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#addf45817ef0970905e650aff3907ce4d">has_luminance</a> = 1;</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160; </div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;}</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160; </div>
<div class="line"><a name="l05441"></a><span class="lineno"><a class="line" href="mov_8c.html#a86cda9cc843d872a5c3dd69723e27424"> 5441</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a86cda9cc843d872a5c3dd69723e27424">mov_read_mdcv</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;{</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> mapping[3] = {1, 2, 0};</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> chroma_den = 50000;</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> luma_den = 10000;</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160; </div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160; </div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;    sc = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1]-&gt;priv_data;</div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160; </div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 24) {</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid Mastering Display Color Volume box\n&quot;</span>);</div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;    }</div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160; </div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a> = <a class="code" href="mastering__display__metadata_8c.html#af178e07682c61609bb3bc505947cd064">av_mastering_display_metadata_alloc</a>();</div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>)</div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160; </div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> j = mapping[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[j][0] = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb), chroma_den);</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[j][1] = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb), chroma_den);</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;    }</div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a968384052f48e91fc57b3c61b9f68224">white_point</a>[0] = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb), chroma_den);</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a968384052f48e91fc57b3c61b9f68224">white_point</a>[1] = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb), chroma_den);</div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160; </div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a45890b654337321044a5b13c5e5961c5">max_luminance</a> = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb), luma_den);</div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a4ad2e7f456d7763060c25e92be573341">min_luminance</a> = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb), luma_den);</div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160; </div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#addf45817ef0970905e650aff3907ce4d">has_luminance</a> = 1;</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a0e30962e66d883ddba77fac5af55d3af">has_primaries</a> = 1;</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160; </div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;}</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160; </div>
<div class="line"><a name="l05480"></a><span class="lineno"><a class="line" href="mov_8c.html#ad97adeca7697a7f003f0ecb7631b2bf2"> 5480</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ad97adeca7697a7f003f0ecb7631b2bf2">mov_read_coll</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;{</div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>;</div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160; </div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160; </div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;    sc = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1]-&gt;priv_data;</div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160; </div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 5) {</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Empty Content Light Level box\n&quot;</span>);</div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;    }</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160; </div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>) {</div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unsupported Content Light Level box version %d\n&quot;</span>, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>);</div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;    }</div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 3); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160; </div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a> = <a class="code" href="mastering__display__metadata_8c.html#a6f334d2c018cc6855ea92b5b65052dc5">av_content_light_metadata_alloc</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3c24bd2093cae8d59e6caad974a1f07e">coll_size</a>);</div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a>)</div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160; </div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a>-&gt;<a class="code" href="struct_a_v_content_light_metadata.html#a9d2d7743a599c9b2f2a07a9504625b92">MaxCLL</a>  = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a>-&gt;<a class="code" href="struct_a_v_content_light_metadata.html#a4e9bfc44c6b87bbf096141fae12e1692">MaxFALL</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160; </div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;}</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160; </div>
<div class="line"><a name="l05512"></a><span class="lineno"><a class="line" href="mov_8c.html#a75c54019f51c1bc7200cac3044a3c7f3"> 5512</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a75c54019f51c1bc7200cac3044a3c7f3">mov_read_clli</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;{</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160; </div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160; </div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;    sc = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1]-&gt;priv_data;</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160; </div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 4) {</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Empty Content Light Level Info box\n&quot;</span>);</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;    }</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160; </div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a> = <a class="code" href="mastering__display__metadata_8c.html#a6f334d2c018cc6855ea92b5b65052dc5">av_content_light_metadata_alloc</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3c24bd2093cae8d59e6caad974a1f07e">coll_size</a>);</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a>)</div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160; </div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a>-&gt;<a class="code" href="struct_a_v_content_light_metadata.html#a9d2d7743a599c9b2f2a07a9504625b92">MaxCLL</a>  = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a>-&gt;<a class="code" href="struct_a_v_content_light_metadata.html#a4e9bfc44c6b87bbf096141fae12e1692">MaxFALL</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160; </div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;}</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160; </div>
<div class="line"><a name="l05536"></a><span class="lineno"><a class="line" href="mov_8c.html#a4a34817ad2bea122a5ac70eab1751bb6"> 5536</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a4a34817ad2bea122a5ac70eab1751bb6">mov_read_st3d</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;{</div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;    <span class="keyword">enum</span> <a class="code" href="group__lavu__video__stereo3d.html#ga12fe9672eeaeb8980960faa96d2fcee6">AVStereo3DType</a> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>;</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>;</div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160; </div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160; </div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160; </div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 5) {</div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Empty stereoscopic video box\n&quot;</span>);</div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;    }</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 4); <span class="comment">/* version + flags */</span></div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160; </div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;    <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>) {</div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;        <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="group__lavu__video__stereo3d.html#gga12fe9672eeaeb8980960faa96d2fcee6a276701c16077443c9526dd28da8001a7">AV_STEREO3D_2D</a>;</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;        <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="group__lavu__video__stereo3d.html#gga12fe9672eeaeb8980960faa96d2fcee6a4cf21029b6e5aa28bf53fbd9740443c9">AV_STEREO3D_TOPBOTTOM</a>;</div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;        <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="group__lavu__video__stereo3d.html#gga12fe9672eeaeb8980960faa96d2fcee6aaa1ee993fc27f99269c536c51b0b5f3c">AV_STEREO3D_SIDEBYSIDE</a>;</div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown st3d mode value %d\n&quot;</span>, <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>);</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;    }</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160; </div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a> = <a class="code" href="group__lavu__video__stereo3d.html#ga4c647cd938e0919c6b8cd31244343561">av_stereo3d_alloc</a>();</div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a>)</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160; </div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a>-&gt;<a class="code" href="struct_a_v_stereo3_d.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>;</div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;}</div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160; </div>
<div class="line"><a name="l05579"></a><span class="lineno"><a class="line" href="mov_8c.html#a5535f592604456c8c890a3ff0306dec3"> 5579</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a5535f592604456c8c890a3ff0306dec3">mov_read_sv3d</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;{</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>, <a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a>;</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> yaw, pitch, roll;</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;    uint32_t l = 0, t = 0, <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> = 0, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = 0;</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;    uint32_t <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>, padding = 0;</div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;    <span class="keyword">enum</span> <a class="code" href="group__lavu__video__spherical.html#ga689eeb8cf9b453f3619f3cf626e03a08">AVSphericalProjection</a> projection;</div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160; </div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160; </div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160; </div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 8) {</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Empty spherical video box\n&quot;</span>);</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;    }</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160; </div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;    <span class="keywordflow">if</span> (size &lt;= 12 || size &gt; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>)</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160; </div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;    <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>)) {</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Missing spherical video header\n&quot;</span>);</div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;    }</div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> != 0) {</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown spherical version %d\n&quot;</span>,</div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;               <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>);</div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;    }</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 3); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - 12); <span class="comment">/* metadata_source */</span></div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160; </div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>)</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160; </div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;    <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;j&#39;</span>)) {</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Missing projection box\n&quot;</span>);</div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;    }</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160; </div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>)</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160; </div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;    <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>)) {</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Missing projection header box\n&quot;</span>);</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;    }</div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> != 0) {</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown spherical version %d\n&quot;</span>,</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;               <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>);</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;    }</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 3); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160; </div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;    <span class="comment">/* 16.16 fixed point */</span></div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;    yaw   = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;    pitch = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;    roll  = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160; </div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>)</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160; </div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;    <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> != 0) {</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown spherical version %d\n&quot;</span>,</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;               <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>);</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;    }</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 3); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>) {</div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;p&#39;</span>):</div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;        <a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a>) {</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;                   <span class="stringliteral">&quot;Unsupported cubemap layout %d\n&quot;</span>, <a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a>);</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;        }</div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;        projection = <a class="code" href="group__lavu__video__spherical.html#gga689eeb8cf9b453f3619f3cf626e03a08aa0a8bc866354ecb619493db502c4d103">AV_SPHERICAL_CUBEMAP</a>;</div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;        padding = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;q&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;i&#39;</span>):</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;        t = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;        l = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;        <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160; </div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &gt;= UINT_MAX - t || <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> &gt;= UINT_MAX - l) {</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;                   <span class="stringliteral">&quot;Invalid bounding rectangle coordinates &quot;</span></div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;                   <span class="stringliteral">&quot;%&quot;</span>PRIu32<span class="stringliteral">&quot;,%&quot;</span>PRIu32<span class="stringliteral">&quot;,%&quot;</span>PRIu32<span class="stringliteral">&quot;,%&quot;</span>PRIu32<span class="stringliteral">&quot;\n&quot;</span>, l, t, <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>);</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;        }</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160; </div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;        <span class="keywordflow">if</span> (l || t || <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> || <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>)</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;            projection = <a class="code" href="group__lavu__video__spherical.html#gga689eeb8cf9b453f3619f3cf626e03a08a768257247d4090b959ee1678f67bc9d3">AV_SPHERICAL_EQUIRECTANGULAR_TILE</a>;</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;            projection = <a class="code" href="group__lavu__video__spherical.html#gga689eeb8cf9b453f3619f3cf626e03a08a55efbae149ee7a6e327a66be7061d146">AV_SPHERICAL_EQUIRECTANGULAR</a>;</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unknown projection type: %s\n&quot;</span>, <a class="code" href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a>(<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>));</div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;    }</div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160; </div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a> = <a class="code" href="group__lavu__video__spherical.html#gab366393b8836ac987df51546183386ea">av_spherical_alloc</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0aaeee6202e3497308c78302ca436c15">spherical_size</a>);</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>)</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160; </div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#a5576008bdc224db049b1795b3c95fe16">projection</a> = projection;</div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160; </div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#ad7d7c61a2550cc4284076cc846873702">yaw</a>   = yaw;</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#a84dfa298ac2ddf98665781507182a979">pitch</a> = pitch;</div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#aaad422230e2b0f0ebfb981275e22ffb0">roll</a>  = roll;</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160; </div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#adeea248f32ff9ec9cd8de310f3d00108">padding</a> = padding;</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160; </div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#a5168f1a737916aae56f0cf41d71937f7">bound_left</a>   = l;</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#a5f82d37755e0d54559c254b7bdefffbe">bound_top</a>    = t;</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#a6cbcda5b8d0118e50e4a1b574919af50">bound_right</a>  = <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>;</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#a670ae033266fb97133204baa6609955f">bound_bottom</a> = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160; </div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;}</div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160; </div>
<div class="line"><a name="l05716"></a><span class="lineno"><a class="line" href="mov_8c.html#aeb76c57f581cab38919fa8efe0d73efd"> 5716</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aeb76c57f581cab38919fa8efe0d73efd">mov_parse_uuid_spherical</a>(<a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">size_t</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;{</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + 1);</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160; </div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>)</div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;    <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160; </div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160; </div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;    <span class="comment">/* Check for mandatory keys and values, try to support XML as best-effort */</span></div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a> &amp;&amp;</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;        <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;&lt;GSpherical:StitchingSoftware&gt;&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;        (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;&lt;GSpherical:Spherical&gt;&quot;</span>)) &amp;&amp;</div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;        <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>, <span class="stringliteral">&quot;true&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;        (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;&lt;GSpherical:Stitched&gt;&quot;</span>)) &amp;&amp;</div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;        <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>, <span class="stringliteral">&quot;true&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;        (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;&lt;GSpherical:ProjectionType&gt;&quot;</span>)) &amp;&amp;</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;        <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>, <span class="stringliteral">&quot;equirectangular&quot;</span>)) {</div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a> = <a class="code" href="group__lavu__video__spherical.html#gab366393b8836ac987df51546183386ea">av_spherical_alloc</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0aaeee6202e3497308c78302ca436c15">spherical_size</a>);</div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>)</div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160; </div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#a5576008bdc224db049b1795b3c95fe16">projection</a> = <a class="code" href="group__lavu__video__spherical.html#gga689eeb8cf9b453f3619f3cf626e03a08a55efbae149ee7a6e327a66be7061d146">AV_SPHERICAL_EQUIRECTANGULAR</a>;</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160; </div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;&lt;GSpherical:StereoMode&gt;&quot;</span>) &amp;&amp; !sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a>) {</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;            <span class="keyword">enum</span> <a class="code" href="group__lavu__video__stereo3d.html#ga12fe9672eeaeb8980960faa96d2fcee6">AVStereo3DType</a> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>;</div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160; </div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;left-right&quot;</span>))</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;                <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="group__lavu__video__stereo3d.html#gga12fe9672eeaeb8980960faa96d2fcee6aaa1ee993fc27f99269c536c51b0b5f3c">AV_STEREO3D_SIDEBYSIDE</a>;</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;top-bottom&quot;</span>))</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;                <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="group__lavu__video__stereo3d.html#gga12fe9672eeaeb8980960faa96d2fcee6a4cf21029b6e5aa28bf53fbd9740443c9">AV_STEREO3D_TOPBOTTOM</a>;</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;                <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="group__lavu__video__stereo3d.html#gga12fe9672eeaeb8980960faa96d2fcee6a276701c16077443c9526dd28da8001a7">AV_STEREO3D_2D</a>;</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160; </div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a> = <a class="code" href="group__lavu__video__stereo3d.html#ga4c647cd938e0919c6b8cd31244343561">av_stereo3d_alloc</a>();</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;            <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a>)</div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160; </div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a>-&gt;<a class="code" href="struct_a_v_stereo3_d.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>;</div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;        }</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160; </div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;        <span class="comment">/* orientation */</span></div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;        <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;&lt;GSpherical:InitialViewHeadingDegrees&gt;&quot;</span>);</div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>)</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#ad7d7c61a2550cc4284076cc846873702">yaw</a> = strtol(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10) * (1 &lt;&lt; 16);</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;        <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;&lt;GSpherical:InitialViewPitchDegrees&gt;&quot;</span>);</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>)</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#a84dfa298ac2ddf98665781507182a979">pitch</a> = strtol(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10) * (1 &lt;&lt; 16);</div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;        <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <span class="stringliteral">&quot;&lt;GSpherical:InitialViewRollDegrees&gt;&quot;</span>);</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>)</div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>-&gt;<a class="code" href="struct_a_v_spherical_mapping.html#aaad422230e2b0f0ebfb981275e22ffb0">roll</a> = strtol(<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10) * (1 &lt;&lt; 16);</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;    }</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160; </div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>:</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;}</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160; </div>
<div class="line"><a name="l05779"></a><span class="lineno"><a class="line" href="mov_8c.html#aaaaf80017834f535461d82a6afe6ff0a"> 5779</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aaaaf80017834f535461d82a6afe6ff0a">mov_read_uuid</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;{</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;    int64_t <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> uuid[16];</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> uuid_isml_manifest[] = {</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;        0xa5, 0xd4, 0x0b, 0x30, 0xe8, 0x14, 0x11, 0xdd,</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;        0xba, 0x2f, 0x08, 0x00, 0x20, 0x0c, 0x9a, 0x66</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;    };</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> uuid_xmp[] = {</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;        0xbe, 0x7a, 0xcf, 0xcb, 0x97, 0xa9, 0x42, 0xe8,</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;        0x9c, 0x71, 0x99, 0x94, 0x91, 0xe3, 0xaf, 0xac</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;    };</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> uuid_spherical[] = {</div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;        0xff, 0xcc, 0x82, 0x63, 0xf8, 0x55, 0x4a, 0x93,</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;        0x88, 0x14, 0x58, 0x7a, 0x02, 0x52, 0x1f, 0xdd,</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;    };</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160; </div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; <span class="keyword">sizeof</span>(uuid) || atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt;= <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(INT_MAX, SIZE_MAX))</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160; </div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160; </div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, uuid, <span class="keyword">sizeof</span>(uuid));</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;    <span class="keywordflow">if</span> (!memcmp(uuid, uuid_isml_manifest, <span class="keyword">sizeof</span>(uuid))) {</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, *ptr;</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;        <span class="keywordtype">char</span> *endptr;</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - <span class="keyword">sizeof</span>(uuid);</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160; </div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 4) {</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;        }</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 4); <span class="comment">// zeroes</span></div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> -= 4;</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160; </div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;        <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + 1);</div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>) {</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;        }</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;        }</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160; </div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;        ptr = <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>;</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;        <span class="keywordflow">while</span> ((ptr = <a class="code" href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a>(ptr, <span class="stringliteral">&quot;systemBitrate=\&quot;&quot;</span>))) {</div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;            ptr += <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;systemBitrate=\&quot;&quot;</span>) - 1;</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates_count++;</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates = <a class="code" href="tableprint__vlc_8h.html#a91ede117e78922c63c5fbd0c5793449f">av_realloc_f</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates_count, <span class="keyword">sizeof</span>(*<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates));</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates) {</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates_count = 0;</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;            }</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;            errno = 0;</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = strtol(ptr, &amp;endptr, 10);</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 || errno || *endptr != <span class="charliteral">&#39;&quot;&#39;</span>) {</div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates_count - 1] = 0;</div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;bitrates_count - 1] = <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;            }</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;        }</div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160; </div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!memcmp(uuid, uuid_xmp, <span class="keyword">sizeof</span>(uuid))) {</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>;</div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - <span class="keyword">sizeof</span>(uuid);</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;export_xmp) {</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;            <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + 1);</div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>) {</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;            }</div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;            }</div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;            <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;metadata, <span class="stringliteral">&quot;xmp&quot;</span>,</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;                        <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, <a class="code" href="group__lavu__dict.html#ga7a9a991cb7837b10ffd44725263de425">AV_DICT_DONT_STRDUP_VAL</a>);</div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;            <span class="comment">// skip all uuid atom, which makes it fast for long uuid-xmp file</span></div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;        }</div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!memcmp(uuid, uuid_spherical, <span class="keyword">sizeof</span>(uuid))) {</div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - <span class="keyword">sizeof</span>(uuid);</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#aeb76c57f581cab38919fa8efe0d73efd">mov_parse_uuid_spherical</a>(sc, pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>)</div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid spherical metadata found\n&quot;</span>);</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;    }</div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160; </div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;}</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160; </div>
<div class="line"><a name="l05884"></a><span class="lineno"><a class="line" href="mov_8c.html#a95662210f9d8dbed043b69411210d5a2"> 5884</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a95662210f9d8dbed043b69411210d5a2">mov_read_free</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;{</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> content[16];</div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160; </div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 8)</div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160; </div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, content, <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<span class="keyword">sizeof</span>(content), atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>));</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160; </div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;    <span class="keywordflow">if</span> (   !<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_moov</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;        &amp;&amp; !<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_mdat</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;        &amp;&amp; !memcmp(content, <span class="stringliteral">&quot;Anevia\x1A\x1A&quot;</span>, 8)</div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;        &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;use_mfra_for == <a class="code" href="isom_8h.html#af422027b00f117bba986137e8c293afd">FF_MOV_FLAG_MFRA_AUTO</a>) {</div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;use_mfra_for = <a class="code" href="isom_8h.html#a1131615c6cef3f78bb03bbdc9847e8ae">FF_MOV_FLAG_MFRA_PTS</a>;</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;    }</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160; </div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;}</div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160; </div>
<div class="line"><a name="l05906"></a><span class="lineno"><a class="line" href="mov_8c.html#ad9ac030127c344e72a633bb661f0878e"> 5906</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ad9ac030127c344e72a633bb661f0878e">mov_read_frma</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;{</div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;    uint32_t <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;    <span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <a class="code" href="extract__extradata__bsf_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a>;</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160; </div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160; </div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;    <span class="keywordflow">switch</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a577b869e34ccd996791fa20d350915e9">format</a>)</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;    {</div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;v&#39;</span>):        <span class="comment">// encrypted video</span></div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;a&#39;</span>):        <span class="comment">// encrypted audio</span></div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;        <span class="keywordtype">id</span> = <a class="code" href="mov_8c.html#add7c4085afb7068235318b45c3c301ab">mov_codec_id</a>(st, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>);</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a> &amp;&amp;</div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;                   <span class="stringliteral">&quot;ignoring &#39;frma&#39; atom of &#39;%.4s&#39;, stream has codec id %d\n&quot;</span>,</div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;                   (<span class="keywordtype">char</span>*)&amp;<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>);</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;        }</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160; </div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="extract__extradata__bsf_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a>;</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a577b869e34ccd996791fa20d350915e9">format</a> = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>;</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160; </div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a> != sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a577b869e34ccd996791fa20d350915e9">format</a>) {</div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;                   <span class="stringliteral">&quot;ignoring &#39;frma&#39; atom of &#39;%.4s&#39;, stream format is &#39;%.4s&#39;\n&quot;</span>,</div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;                   (<span class="keywordtype">char</span>*)&amp;<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>, (<span class="keywordtype">char</span>*)&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a577b869e34ccd996791fa20d350915e9">format</a>);</div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;        }</div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;    }</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160; </div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;}</div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160; </div>
<div class="line"><a name="l05953"></a><span class="lineno"><a class="line" href="mov_8c.html#aa61005a782dd05fcd2710cc7f7f29360"> 5953</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aa61005a782dd05fcd2710cc7f7f29360">get_current_encryption_info</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_m_o_v_encryption_index.html">MOVEncryptionIndex</a> **encryption_index, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> **sc)</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;{</div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;    <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> *frag_stream_info;</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160; </div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;    frag_stream_info = <a class="code" href="mov_8c.html#a9ec4d441a01a5ff31c301f33c2808ba9">get_current_frag_stream_info</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index);</div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;    <span class="keywordflow">if</span> (frag_stream_info) {</div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;id == frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ab594b4274b19c26f3979fe74f67e88d1">id</a>) {</div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;              st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;            }</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;        }</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams)</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;        *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160; </div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;        <span class="keywordflow">if</span> (!frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">encryption_index</a>) {</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;            <span class="comment">// If this stream isn&#39;t encrypted, don&#39;t create the index.</span></div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;            <span class="keywordflow">if</span> (!(*sc)-&gt;cenc.default_encrypted_sample)</div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;            frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">encryption_index</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">encryption_index</a>));</div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;            <span class="keywordflow">if</span> (!frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">encryption_index</a>)</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;        }</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;        *encryption_index = frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">encryption_index</a>;</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;        <span class="comment">// No current track fragment, using stream level encryption info.</span></div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160; </div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;        st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams - 1];</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;        *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160; </div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;        <span class="keywordflow">if</span> (!(*sc)-&gt;cenc.encryption_index) {</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;            <span class="comment">// If this stream isn&#39;t encrypted, don&#39;t create the index.</span></div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;            <span class="keywordflow">if</span> (!(*sc)-&gt;cenc.default_encrypted_sample)</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;            (*sc)-&gt;cenc.encryption_index = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">encryption_index</a>));</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;            <span class="keywordflow">if</span> (!(*sc)-&gt;cenc.encryption_index)</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;        }</div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160; </div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;        *encryption_index = (*sc)-&gt;cenc.encryption_index;</div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;    }</div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;}</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160; </div>
<div class="line"><a name="l06003"></a><span class="lineno"><a class="line" href="mov_8c.html#a58cde4b3b88326ced7e6f239abe7066f"> 6003</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a58cde4b3b88326ced7e6f239abe7066f">mov_read_sample_encryption_info</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, <a class="code" href="struct_a_v_encryption_info.html">AVEncryptionInfo</a> **<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>, <span class="keywordtype">int</span> use_subsamples)</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;{</div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> subsample_count;</div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;    <a class="code" href="struct_a_v_subsample_encryption_info.html">AVSubsampleEncryptionInfo</a> *subsamples;</div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160; </div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>) {</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Missing schm or tenc\n&quot;</span>);</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;    }</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160; </div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;    *<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="encryption__info_8c.html#ab5df7d12f40e3fe2300dfc7ade895814">av_encryption_info_clone</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>);</div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;    <span class="keywordflow">if</span> (!*<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>)</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160; </div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a39c3d1527580e913c0bf0138fc59a933">per_sample_iv_size</a> != 0) {</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, (*sample)-&gt;iv, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a39c3d1527580e913c0bf0138fc59a933">per_sample_iv_size</a>)) &lt; 0) {</div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;failed to read the initialization vector\n&quot;</span>);</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;            <a class="code" href="encryption__info_8c.html#ae49dc2ef6b84e80914f401bba34d4410">av_encryption_info_free</a>(*<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>);</div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;            *<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;        }</div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;    }</div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160; </div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;    <span class="keywordflow">if</span> (use_subsamples) {</div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;        subsample_count = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>((*sample)-&gt;subsamples);</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;        (*sample)-&gt;subsamples = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(subsample_count, <span class="keyword">sizeof</span>(*subsamples));</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;        <span class="keywordflow">if</span> (!(*sample)-&gt;subsamples) {</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;            <a class="code" href="encryption__info_8c.html#ae49dc2ef6b84e80914f401bba34d4410">av_encryption_info_free</a>(*<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>);</div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;            *<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;        }</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160; </div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; subsample_count &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;            (*sample)-&gt;subsamples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].bytes_of_clear_data = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;            (*sample)-&gt;subsamples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].bytes_of_protected_data = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;        }</div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160; </div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;        <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;hit EOF while reading sub-sample encryption info\n&quot;</span>);</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;            <a class="code" href="encryption__info_8c.html#ae49dc2ef6b84e80914f401bba34d4410">av_encryption_info_free</a>(*<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>);</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;            *<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;        }</div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;        (*sample)-&gt;subsample_count = subsample_count;</div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;    }</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160; </div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;}</div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160; </div>
<div class="line"><a name="l06054"></a><span class="lineno"><a class="line" href="mov_8c.html#ac6ce0e77bb82e93a45d7a20cf392fe51"> 6054</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ac6ce0e77bb82e93a45d7a20cf392fe51">mov_read_senc</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;{</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;    <a class="code" href="struct_a_v_encryption_info.html">AVEncryptionInfo</a> **encrypted_samples;</div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;    <a class="code" href="struct_m_o_v_encryption_index.html">MOVEncryptionIndex</a> *encryption_index;</div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;    <span class="keywordtype">int</span> use_subsamples, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sample_count, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, alloc_size = 0;</div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160; </div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#aa61005a782dd05fcd2710cc7f7f29360">get_current_encryption_info</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, &amp;encryption_index, &amp;sc);</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != 1)</div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160; </div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">nb_encrypted_samples</a>) {</div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;        <span class="comment">// This can happen if we have both saio/saiz and senc atoms.</span></div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Ignoring duplicate encryption info in senc\n&quot;</span>);</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;    }</div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160; </div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;    use_subsamples = <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb) &amp; 0x02; <span class="comment">/* flags */</span></div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160; </div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;    sample_count = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;    <span class="keywordflow">if</span> (sample_count &gt;= INT_MAX / <span class="keyword">sizeof</span>(*encrypted_samples))</div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160; </div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sample_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> min_samples = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1, 1024 * 1024), sample_count);</div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;        encrypted_samples = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a>, &amp;alloc_size,</div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;                                            min_samples * <span class="keyword">sizeof</span>(*encrypted_samples));</div>
<div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;        <span class="keywordflow">if</span> (encrypted_samples) {</div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;            encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a> = encrypted_samples;</div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160; </div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a58cde4b3b88326ced7e6f239abe7066f">mov_read_sample_encryption_info</a>(</div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, sc, &amp;encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], use_subsamples);</div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;        }</div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;        <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Hit EOF while reading senc\n&quot;</span>);</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;        }</div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160; </div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;            <span class="keywordflow">for</span> (; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--)</div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;                <a class="code" href="encryption__info_8c.html#ae49dc2ef6b84e80914f401bba34d4410">av_encryption_info_free</a>(encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1]);</div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a>);</div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;        }</div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;    }</div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;    encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">nb_encrypted_samples</a> = sample_count;</div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160; </div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;}</div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160; </div>
<div class="line"><a name="l06108"></a><span class="lineno"><a class="line" href="mov_8c.html#abeb959e820f3f240d97107402eb4148c"> 6108</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#abeb959e820f3f240d97107402eb4148c">mov_parse_auxiliary_info</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_encryption_index.html">MOVEncryptionIndex</a> *encryption_index)</div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;{</div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;    <a class="code" href="struct_a_v_encryption_info.html">AVEncryptionInfo</a> **<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>, **encrypted_samples;</div>
<div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;    int64_t prev_pos;</div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;    <span class="keywordtype">size_t</span> sample_count, sample_info_size, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> alloc_size = 0;</div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160; </div>
<div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">nb_encrypted_samples</a>)</div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;    sample_count = encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a318d7154aed792ec567355b69aab4042">auxiliary_info_sample_count</a>;</div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a2debee88a1ff060412fcb59989563d95">auxiliary_offsets_count</a> != 1) {</div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Multiple auxiliary info chunks are not supported\n&quot;</span>);</div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;    }</div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;    <span class="keywordflow">if</span> (sample_count &gt;= INT_MAX / <span class="keyword">sizeof</span>(*encrypted_samples))</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160; </div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;    prev_pos = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;    <span class="keywordflow">if</span> (!(pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a0e3c41c290b38923880b9cccb669bf78">seekable</a> &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>) ||</div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;        <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">auxiliary_offsets</a>[0], SEEK_SET) != encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">auxiliary_offsets</a>[0]) {</div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Failed to seek for auxiliary info, will only parse senc atoms for encryption info\n&quot;</span>);</div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;    }</div>
<div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160; </div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sample_count &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> min_samples = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1, 1024 * 1024), sample_count);</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;        encrypted_samples = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a>, &amp;alloc_size,</div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;                                            min_samples * <span class="keyword">sizeof</span>(*encrypted_samples));</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;        <span class="keywordflow">if</span> (!encrypted_samples) {</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;        }</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;        encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a> = encrypted_samples;</div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160; </div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;        <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = &amp;encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;        sample_info_size = encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a3d29ac1969070e80b441eda811bc3e01">auxiliary_info_default_size</a></div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;                               ? encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a3d29ac1969070e80b441eda811bc3e01">auxiliary_info_default_size</a></div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;                               : encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a5305a7dd20e2cdbfe125fe032105c013">auxiliary_info_sizes</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160; </div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a58cde4b3b88326ced7e6f239abe7066f">mov_read_sample_encryption_info</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, sc, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>, sample_info_size &gt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a39c3d1527580e913c0bf0138fc59a933">per_sample_iv_size</a>);</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;    }</div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Hit EOF while reading auxiliary info\n&quot;</span>);</div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;        encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">nb_encrypted_samples</a> = sample_count;</div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;    }</div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160; </div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;<a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>:</div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, prev_pos, SEEK_SET);</div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;        <span class="keywordflow">for</span> (; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;            <a class="code" href="encryption__info_8c.html#ae49dc2ef6b84e80914f401bba34d4410">av_encryption_info_free</a>(encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1]);</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;        }</div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a>);</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;    }</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;}</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160; </div>
<div class="line"><a name="l06175"></a><span class="lineno"><a class="line" href="mov_8c.html#a32af6da2973578d47bdd51c6a53afde0"> 6175</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a32af6da2973578d47bdd51c6a53afde0">mov_try_read_block</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">size_t</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>)</div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;{</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> block_size = 1024 * 1024;</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> alloc_size = 0, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = 0;</div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>) {</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_size =</div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;            alloc_size &gt;= INT_MAX - block_size ? INT_MAX : alloc_size + block_size;</div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *new_buffer = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, &amp;alloc_size, new_size);</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> to_read = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, alloc_size) - <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;        <span class="keywordflow">if</span> (!new_buffer) {</div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;        }</div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;        <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = new_buffer;</div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160; </div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, to_read) != to_read) {</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;        }</div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += to_read;</div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;    }</div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160; </div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;    *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> = <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>;</div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;}</div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160; </div>
<div class="line"><a name="l06202"></a><span class="lineno"><a class="line" href="mov_8c.html#a94e6e7eff22c7876691ef37b898f9fab"> 6202</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a94e6e7eff22c7876691ef37b898f9fab">mov_read_saiz</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;{</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;    <a class="code" href="struct_m_o_v_encryption_index.html">MOVEncryptionIndex</a> *encryption_index;</div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sample_count, aux_info_type, aux_info_param;</div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160; </div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#aa61005a782dd05fcd2710cc7f7f29360">get_current_encryption_info</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, &amp;encryption_index, &amp;sc);</div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != 1)</div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160; </div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">nb_encrypted_samples</a>) {</div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;        <span class="comment">// This can happen if we have both saio/saiz and senc atoms.</span></div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Ignoring duplicate encryption info in saiz\n&quot;</span>);</div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;    }</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160; </div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a318d7154aed792ec567355b69aab4042">auxiliary_info_sample_count</a>) {</div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Duplicate saiz atom\n&quot;</span>);</div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;    }</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160; </div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb) &amp; 0x01) {  <span class="comment">/* flags */</span></div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;        aux_info_type = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;        aux_info_param = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>) {</div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;            <span class="keywordflow">if</span> (aux_info_type != sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>-&gt;<a class="code" href="struct_a_v_encryption_info.html#ae0525acdfc0976caa7824da69e69108c">scheme</a>) {</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Ignoring saiz box with non-zero aux_info_type\n&quot;</span>);</div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;            }</div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;            <span class="keywordflow">if</span> (aux_info_param != 0) {</div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Ignoring saiz box with non-zero aux_info_type_parameter\n&quot;</span>);</div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;            }</div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;            <span class="comment">// Didn&#39;t see &#39;schm&#39; or &#39;tenc&#39;, so this isn&#39;t encrypted.</span></div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;            <span class="keywordflow">if</span> ((aux_info_type == <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;c&#39;</span>) ||</div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;                 aux_info_type == <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;s&#39;</span>) ||</div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;                 aux_info_type == <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;1&#39;</span>) ||</div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;                 aux_info_type == <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;s&#39;</span>)) &amp;&amp;</div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;                aux_info_param == 0) {</div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Saw encrypted saiz without schm/tenc\n&quot;</span>);</div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;            }</div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;        }</div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>) {</div>
<div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;        <span class="comment">// Didn&#39;t see &#39;schm&#39; or &#39;tenc&#39;, so this isn&#39;t encrypted.</span></div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;    }</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160; </div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;    encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a3d29ac1969070e80b441eda811bc3e01">auxiliary_info_default_size</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;    sample_count = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;    encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a318d7154aed792ec567355b69aab4042">auxiliary_info_sample_count</a> = sample_count;</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160; </div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a3d29ac1969070e80b441eda811bc3e01">auxiliary_info_default_size</a> == 0) {</div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a32af6da2973578d47bdd51c6a53afde0">mov_try_read_block</a>(pb, sample_count, &amp;encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a5305a7dd20e2cdbfe125fe032105c013">auxiliary_info_sizes</a>);</div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to read the auxiliary info\n&quot;</span>);</div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;        }</div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;    }</div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160; </div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a2debee88a1ff060412fcb59989563d95">auxiliary_offsets_count</a>) {</div>
<div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#abeb959e820f3f240d97107402eb4148c">mov_parse_auxiliary_info</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, sc, pb, encryption_index);</div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;    }</div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160; </div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;}</div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160; </div>
<div class="line"><a name="l06274"></a><span class="lineno"><a class="line" href="mov_8c.html#a33da53331ea807df80570f5d4cdbf362"> 6274</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a33da53331ea807df80570f5d4cdbf362">mov_read_saio</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;{</div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;    uint64_t *auxiliary_offsets;</div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;    <a class="code" href="struct_m_o_v_encryption_index.html">MOVEncryptionIndex</a> *encryption_index;</div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>, entry_count, aux_info_type, aux_info_param;</div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> alloc_size = 0;</div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160; </div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#aa61005a782dd05fcd2710cc7f7f29360">get_current_encryption_info</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, &amp;encryption_index, &amp;sc);</div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != 1)</div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160; </div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">nb_encrypted_samples</a>) {</div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;        <span class="comment">// This can happen if we have both saio/saiz and senc atoms.</span></div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Ignoring duplicate encryption info in saio\n&quot;</span>);</div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;    }</div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160; </div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a2debee88a1ff060412fcb59989563d95">auxiliary_offsets_count</a>) {</div>
<div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Duplicate saio atom\n&quot;</span>);</div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;    }</div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160; </div>
<div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb) &amp; 0x01) {  <span class="comment">/* flags */</span></div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;        aux_info_type = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;        aux_info_param = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>) {</div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;            <span class="keywordflow">if</span> (aux_info_type != sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>-&gt;<a class="code" href="struct_a_v_encryption_info.html#ae0525acdfc0976caa7824da69e69108c">scheme</a>) {</div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Ignoring saio box with non-zero aux_info_type\n&quot;</span>);</div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;            }</div>
<div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;            <span class="keywordflow">if</span> (aux_info_param != 0) {</div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Ignoring saio box with non-zero aux_info_type_parameter\n&quot;</span>);</div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;            }</div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;            <span class="comment">// Didn&#39;t see &#39;schm&#39; or &#39;tenc&#39;, so this isn&#39;t encrypted.</span></div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;            <span class="keywordflow">if</span> ((aux_info_type == <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;c&#39;</span>) ||</div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;                 aux_info_type == <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;s&#39;</span>) ||</div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;                 aux_info_type == <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;1&#39;</span>) ||</div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;                 aux_info_type == <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;s&#39;</span>)) &amp;&amp;</div>
<div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;                aux_info_param == 0) {</div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Saw encrypted saio without schm/tenc\n&quot;</span>);</div>
<div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;            }</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;        }</div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>) {</div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;        <span class="comment">// Didn&#39;t see &#39;schm&#39; or &#39;tenc&#39;, so this isn&#39;t encrypted.</span></div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;    }</div>
<div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160; </div>
<div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;    entry_count = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;    <span class="keywordflow">if</span> (entry_count &gt;= INT_MAX / <span class="keyword">sizeof</span>(*auxiliary_offsets))</div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160; </div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; entry_count &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> min_offsets = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1, 1024), entry_count);</div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;        auxiliary_offsets = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(</div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;            encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">auxiliary_offsets</a>, &amp;alloc_size,</div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;            min_offsets * <span class="keyword">sizeof</span>(*auxiliary_offsets));</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;        <span class="keywordflow">if</span> (!auxiliary_offsets) {</div>
<div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">auxiliary_offsets</a>);</div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;        }</div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;        encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">auxiliary_offsets</a> = auxiliary_offsets;</div>
<div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160; </div>
<div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 0) {</div>
<div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;            encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">auxiliary_offsets</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;            encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">auxiliary_offsets</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb);</div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;        }</div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.current &gt;= 0) {</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;            encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">auxiliary_offsets</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fragment.base_data_offset;</div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;        }</div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;    }</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160; </div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Hit EOF while reading saio\n&quot;</span>);</div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">auxiliary_offsets</a>);</div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;    }</div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160; </div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;    encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a2debee88a1ff060412fcb59989563d95">auxiliary_offsets_count</a> = entry_count;</div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160; </div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;    <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a318d7154aed792ec567355b69aab4042">auxiliary_info_sample_count</a>) {</div>
<div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#abeb959e820f3f240d97107402eb4148c">mov_parse_auxiliary_info</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, sc, pb, encryption_index);</div>
<div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;    }</div>
<div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160; </div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;}</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160; </div>
<div class="line"><a name="l06369"></a><span class="lineno"><a class="line" href="mov_8c.html#a7ecf0e0c260de7da22fea66ba1289548"> 6369</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a7ecf0e0c260de7da22fea66ba1289548">mov_read_pssh</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;{</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;    <a class="code" href="struct_a_v_encryption_init_info.html">AVEncryptionInitInfo</a> *<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>, *old_init_info;</div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **key_ids;</div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *side_data, *extra_data, *old_side_data;</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;    <span class="keywordtype">size_t</span> side_data_size;</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0, old_side_data_size;</div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>, kid_count, extra_data_size, alloc_size = 0;</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160; </div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160; </div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb);  <span class="comment">/* flags */</span></div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160; </div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;    <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a> = <a class="code" href="encryption__info_8c.html#aa0978e1e71c8f175a9d9a6cbad63c3d0">av_encryption_init_info_alloc</a>(<span class="comment">/* system_id_size */</span> 16, <span class="comment">/* num_key_ids */</span> 0,</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;                                         <span class="comment">/* key_id_size */</span> 16, <span class="comment">/* data_size */</span> 0);</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>)</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160; </div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;system_id, 16)) &lt; 0) {</div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to read the system id\n&quot;</span>);</div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;    }</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160; </div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> &gt; 0) {</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;        kid_count = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;        <span class="keywordflow">if</span> (kid_count &gt;= INT_MAX / <span class="keyword">sizeof</span>(*key_ids)) {</div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;        }</div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160; </div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; kid_count &amp;&amp; !pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> min_kid_count = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1, 1024), kid_count);</div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;            key_ids = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;key_ids, &amp;alloc_size,</div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;                                      min_kid_count * <span class="keyword">sizeof</span>(*key_ids));</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;            <span class="keywordflow">if</span> (!key_ids) {</div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;            }</div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;            <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;key_ids = key_ids;</div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160; </div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;            <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;key_ids[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(16);</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;key_ids[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;            }</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;            <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;num_key_ids = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1;</div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160; </div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a>(pb, <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;key_ids[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 16)) &lt; 0) {</div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to read the key id\n&quot;</span>);</div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;            }</div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;        }</div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160; </div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;        <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">eof_reached</a>) {</div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Hit EOF while reading pssh\n&quot;</span>);</div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;        }</div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;    }</div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160; </div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;    extra_data_size = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a32af6da2973578d47bdd51c6a53afde0">mov_try_read_block</a>(pb, extra_data_size, &amp;extra_data);</div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160; </div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;data);  <span class="comment">// malloc(0) may still allocate something.</span></div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;    <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;data = extra_data;</div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;    <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>-&gt;data_size = extra_data_size;</div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160; </div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;    <span class="comment">// If there is existing initialization data, append to the list.</span></div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;    old_side_data = <a class="code" href="group__lavf__core.html#ga2c3404067d7e9bc7b8443e3f58cf8e65">av_stream_get_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97ac7d26d70faa3c263162d60668b5c82b2">AV_PKT_DATA_ENCRYPTION_INIT_INFO</a>, &amp;old_side_data_size);</div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;    <span class="keywordflow">if</span> (old_side_data) {</div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;        old_init_info = <a class="code" href="encryption__info_8c.html#ae0fd76bcba84d38470a8e6af0691b279">av_encryption_init_info_get_side_data</a>(old_side_data, old_side_data_size);</div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;        <span class="keywordflow">if</span> (old_init_info) {</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;            <span class="comment">// Append to the end of the list.</span></div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="struct_a_v_encryption_init_info.html">AVEncryptionInitInfo</a> *cur = old_init_info;; cur = cur-&gt;<a class="code" href="struct_a_v_encryption_init_info.html#a25a89671f39c5b8d3813df00f0576753">next</a>) {</div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;                <span class="keywordflow">if</span> (!cur-&gt;next) {</div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;                    cur-&gt;next = <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>;</div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;                }</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;            }</div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;            <a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a> = old_init_info;</div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;            <span class="comment">// Assume existing side-data will be valid, so the only error we could get is OOM.</span></div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;        }</div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;    }</div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160; </div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;    side_data = <a class="code" href="encryption__info_8c.html#a86d0d586d0a323495207b8fba0f7ea3a">av_encryption_init_info_add_side_data</a>(<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>, &amp;side_data_size);</div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;    <span class="keywordflow">if</span> (!side_data) {</div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;    }</div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__core.html#ga5c8d715704c153cb645982444063cc2b">av_stream_add_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97ac7d26d70faa3c263162d60668b5c82b2">AV_PKT_DATA_ENCRYPTION_INIT_INFO</a>,</div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;                                  side_data, side_data_size);</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(side_data);</div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160; </div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;<a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>:</div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;    <a class="code" href="encryption__info_8c.html#ad5b99e780657d38504da850e7d621921">av_encryption_init_info_free</a>(<a class="code" href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a>);</div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;}</div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160; </div>
<div class="line"><a name="l06477"></a><span class="lineno"><a class="line" href="mov_8c.html#a6502c5f11135b38e4e7dfb0e43b55efc"> 6477</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a6502c5f11135b38e4e7dfb0e43b55efc">mov_read_schm</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;{</div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160; </div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160; </div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">pseudo_stream_id</a> != 0) {</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;schm boxes are only supported in first sample descriptor\n&quot;</span>);</div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;    }</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160; </div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 8)</div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160; </div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;    <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb); <span class="comment">/* version and flags */</span></div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160; </div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>) {</div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a> = <a class="code" href="encryption__info_8c.html#a9c5f5536f094350753a2d5d71d1a5333">av_encryption_info_alloc</a>(0, 16, 16);</div>
<div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>) {</div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;        }</div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;    }</div>
<div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160; </div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>-&gt;<a class="code" href="struct_a_v_encryption_info.html#ae0525acdfc0976caa7824da69e69108c">scheme</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;}</div>
<div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160; </div>
<div class="line"><a name="l06508"></a><span class="lineno"><a class="line" href="mov_8c.html#aaa2bfd255f451a272711209847187200"> 6508</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aaa2bfd255f451a272711209847187200">mov_read_tenc</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;{</div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>, pattern, is_protected, iv_size;</div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160; </div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160; </div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">pseudo_stream_id</a> != 0) {</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;tenc atom are only supported in first sample descriptor\n&quot;</span>);</div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;    }</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160; </div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>) {</div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a> = <a class="code" href="encryption__info_8c.html#a9c5f5536f094350753a2d5d71d1a5333">av_encryption_info_alloc</a>(0, 16, 16);</div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>) {</div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;        }</div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;    }</div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160; </div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 20)</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160; </div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* version */</span></div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* flags */</span></div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160; </div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;    <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb); <span class="comment">/* reserved */</span></div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;    pattern = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160; </div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> &gt; 0) {</div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>-&gt;<a class="code" href="struct_a_v_encryption_info.html#a419cb6a7096045c0d17eb57ad5de5c5a">crypt_byte_block</a> = pattern &gt;&gt; 4;</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>-&gt;<a class="code" href="struct_a_v_encryption_info.html#a07101d72147615f4e794630b5003fdb3">skip_byte_block</a> = pattern &amp; 0xf;</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;    }</div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160; </div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;    is_protected = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;    <span class="keywordflow">if</span> (is_protected &amp;&amp; !sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a23b5a34c9b286dac2d2b5291e05386b9">encryption_index</a>) {</div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;        <span class="comment">// The whole stream should be by-default encrypted.</span></div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a23b5a34c9b286dac2d2b5291e05386b9">encryption_index</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_m_o_v_encryption_index.html">MOVEncryptionIndex</a>));</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a23b5a34c9b286dac2d2b5291e05386b9">encryption_index</a>)</div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;    }</div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a39c3d1527580e913c0bf0138fc59a933">per_sample_iv_size</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a39c3d1527580e913c0bf0138fc59a933">per_sample_iv_size</a> != 0 &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a39c3d1527580e913c0bf0138fc59a933">per_sample_iv_size</a> != 8 &amp;&amp;</div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a39c3d1527580e913c0bf0138fc59a933">per_sample_iv_size</a> != 16) {</div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;invalid per-sample IV size value\n&quot;</span>);</div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;    }</div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>-&gt;<a class="code" href="struct_a_v_encryption_info.html#a63649ca3be8a587136decc7837d8f0b0">key_id</a>, 16) != 16) {</div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;failed to read the default key ID\n&quot;</span>);</div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;    }</div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160; </div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;    <span class="keywordflow">if</span> (is_protected &amp;&amp; !sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a39c3d1527580e913c0bf0138fc59a933">per_sample_iv_size</a>) {</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;        iv_size = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;        <span class="keywordflow">if</span> (iv_size != 8 &amp;&amp; iv_size != 16) {</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;invalid default_constant_IV_size in tenc atom\n&quot;</span>);</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;        }</div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160; </div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>-&gt;<a class="code" href="struct_a_v_encryption_info.html#a36258773710a13cbe7e652853dd65709">iv</a>, iv_size) != iv_size) {</div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;failed to read the default IV\n&quot;</span>);</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;        }</div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;    }</div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160; </div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;}</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160; </div>
<div class="line"><a name="l06579"></a><span class="lineno"><a class="line" href="mov_8c.html#a4a06d9895f2722344858926e870619a3"> 6579</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a4a06d9895f2722344858926e870619a3">mov_read_dfla</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;{</div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;    <span class="keywordtype">int</span> last, <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> buf[4];</div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160; </div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160; </div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;    <span class="keywordflow">if</span> ((uint64_t)atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; (1&lt;&lt;30) || atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 42)</div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160; </div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;    <span class="comment">/* Check FlacSpecificBox version. */</span></div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb) != 0)</div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160; </div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(pb); <span class="comment">/* Flags */</span></div>
<div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160; </div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;    <a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;    <a class="code" href="flac_8h.html#a9b06d8e64818f5f814b67b14e49f96b0">flac_parse_block_header</a>(buf, &amp;last, &amp;<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, &amp;<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160; </div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> != <a class="code" href="flac_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ae4748beef8c4a9c9131fad8bf4a8a3db">FLAC_METADATA_TYPE_STREAMINFO</a> || <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> != <a class="code" href="flac_8h.html#afcd4bc86e7272d58b09cdb898b1b4f56">FLAC_STREAMINFO_SIZE</a>) {</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;STREAMINFO must be first FLACMetadataBlock\n&quot;</span>);</div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;    }</div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160; </div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#ae829eaf74d06f3a6cb1b9ad07560fb92">ff_get_extradata</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, pb, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160; </div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;    <span class="keywordflow">if</span> (!last)</div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;non-STREAMINFO FLACMetadataBlock(s) ignored\n&quot;</span>);</div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160; </div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;}</div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160; </div>
<div class="line"><a name="l06616"></a><span class="lineno"><a class="line" href="mov_8c.html#ac5b8f1cbe761fe80bfcd4c62102ef508"> 6616</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#ac5b8f1cbe761fe80bfcd4c62102ef508">cenc_decrypt</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, <a class="code" href="struct_a_v_encryption_info.html">AVEncryptionInfo</a> *<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;{</div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160; </div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;scheme != <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;c&#39;</span>) || <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;crypt_byte_block != 0 || <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;skip_byte_block != 0) {</div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Only the &#39;cenc&#39; encryption scheme is supported\n&quot;</span>);</div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;    }</div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160; </div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a88a4a9554afdec7861089439f2357b78">aes_ctr</a>) {</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;        <span class="comment">/* initialize the cipher */</span></div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a88a4a9554afdec7861089439f2357b78">aes_ctr</a> = <a class="code" href="aes__ctr_8c.html#a5cdcc3952fe816b7a3333930955bd32b">av_aes_ctr_alloc</a>();</div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a88a4a9554afdec7861089439f2357b78">aes_ctr</a>) {</div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;        }</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160; </div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="aes__ctr_8c.html#a37ef9fcf05bf94767b2bf18edca7ffda">av_aes_ctr_init</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a88a4a9554afdec7861089439f2357b78">aes_ctr</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;decryption_key);</div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;        }</div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;    }</div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160; </div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;    <a class="code" href="aes__ctr_8c.html#a5048a65b4d63738e454bd02751fe56e9">av_aes_ctr_set_full_iv</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a88a4a9554afdec7861089439f2357b78">aes_ctr</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;iv);</div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160; </div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;subsample_count) {</div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;        <span class="comment">/* decrypt the whole packet */</span></div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;        <a class="code" href="aes__ctr_8c.html#a87d7e8878d90781a10c20ebbb851b4dd">av_aes_ctr_crypt</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a88a4a9554afdec7861089439f2357b78">aes_ctr</a>, <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;    }</div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160; </div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;subsample_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;subsamples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].bytes_of_clear_data + <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;subsamples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].bytes_of_protected_data &gt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>) {</div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;subsample size exceeds the packet size left\n&quot;</span>);</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;        }</div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160; </div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;        <span class="comment">/* skip the clear bytes */</span></div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;        <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a> += <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;subsamples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].bytes_of_clear_data;</div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> -= <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;subsamples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].bytes_of_clear_data;</div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160; </div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;        <span class="comment">/* decrypt the encrypted bytes */</span></div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;        <a class="code" href="aes__ctr_8c.html#a87d7e8878d90781a10c20ebbb851b4dd">av_aes_ctr_crypt</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a88a4a9554afdec7861089439f2357b78">aes_ctr</a>, <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;subsamples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].bytes_of_protected_data);</div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;        <a class="code" href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a> += <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;subsamples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].bytes_of_protected_data;</div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> -= <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;subsamples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].bytes_of_protected_data;</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;    }</div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160; </div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 0) {</div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;leftover packet bytes after subsample processing\n&quot;</span>);</div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;    }</div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160; </div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;}</div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160; </div>
<div class="line"><a name="l06670"></a><span class="lineno"><a class="line" href="mov_8c.html#a580a964ac49d40a759d85c461b0265da"> 6670</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a580a964ac49d40a759d85c461b0265da">cenc_filter</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov, <a class="code" href="struct_a_v_stream.html">AVStream</a>* st, <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> current_index)</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;{</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;    <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> *frag_stream_info;</div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;    <a class="code" href="struct_m_o_v_encryption_index.html">MOVEncryptionIndex</a> *encryption_index;</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;    <a class="code" href="struct_a_v_encryption_info.html">AVEncryptionInfo</a> *encrypted_sample;</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;    <span class="keywordtype">int</span> encrypted_index, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160; </div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;    frag_stream_info = <a class="code" href="mov_8c.html#a7c11ff3d622d1f7d00f6c5ad06d42378">get_frag_stream_info</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>, mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#a62deee8990401b7c67abf978b663e385">current</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">id</a>);</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;    encrypted_index = current_index;</div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;    encryption_index = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;    <span class="keywordflow">if</span> (frag_stream_info) {</div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;        <span class="comment">// Note this only supports encryption info in the first sample descriptor.</span></div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;        <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#ab2ccd9853235efc20f6a280b2d38c8eb">fragment</a>.<a class="code" href="struct_m_o_v_fragment.html#a5609184767f08211be326d4cae2cce4c">stsd_id</a> == 1) {</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;            <span class="keywordflow">if</span> (frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">encryption_index</a>) {</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;                encrypted_index = current_index - frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#acb5a68d6be94437beeaf9108dcce0331">index_entry</a>;</div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;                encryption_index = frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">encryption_index</a>;</div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;                encryption_index = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a23b5a34c9b286dac2d2b5291e05386b9">encryption_index</a>;</div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;            }</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;        }</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;        encryption_index = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a23b5a34c9b286dac2d2b5291e05386b9">encryption_index</a>;</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;    }</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160; </div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;    <span class="keywordflow">if</span> (encryption_index) {</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;        <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a318d7154aed792ec567355b69aab4042">auxiliary_info_sample_count</a> &amp;&amp;</div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;            !encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">nb_encrypted_samples</a>) {</div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;saiz atom found without saio\n&quot;</span>);</div>
<div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;        }</div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;        <span class="keywordflow">if</span> (encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a2debee88a1ff060412fcb59989563d95">auxiliary_offsets_count</a> &amp;&amp;</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;            !encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">nb_encrypted_samples</a>) {</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;saio atom found without saiz\n&quot;</span>);</div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;        }</div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160; </div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;        <span class="keywordflow">if</span> (!encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">nb_encrypted_samples</a>) {</div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;            <span class="comment">// Full-sample encryption with default settings.</span></div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;            encrypted_sample = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>;</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (encrypted_index &gt;= 0 &amp;&amp; encrypted_index &lt; encryption_index-&gt;nb_encrypted_samples) {</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;            <span class="comment">// Per-sample setting override.</span></div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;            encrypted_sample = encryption_index-&gt;<a class="code" href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">encrypted_samples</a>[encrypted_index];</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Incorrect number of samples in encryption info\n&quot;</span>);</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;        }</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160; </div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;        <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a86f83cf2554fb362f80499a401be8d7a">decryption_key</a>) {</div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#ac5b8f1cbe761fe80bfcd4c62102ef508">cenc_decrypt</a>(mov, sc, encrypted_sample, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;            <span class="keywordtype">size_t</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *side_data = <a class="code" href="encryption__info_8c.html#a843d262a8649a9fe9db7f496ca1d4465">av_encryption_info_add_side_data</a>(encrypted_sample, &amp;<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;            <span class="keywordflow">if</span> (!side_data)</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__packet.html#ga8ac567e12e7637fa5cba87c1b9841f49">av_packet_add_side_data</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aa00782edfcea54be6c2083b6d2d839ac">AV_PKT_DATA_ENCRYPTION_INFO</a>, side_data, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(side_data);</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;        }</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;    }</div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160; </div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;}</div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160; </div>
<div class="line"><a name="l06734"></a><span class="lineno"><a class="line" href="mov_8c.html#a0f7a87012ac97039366eefa506d2e6a7"> 6734</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a0f7a87012ac97039366eefa506d2e6a7">mov_read_dops</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;{</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="oggparseopus_8c.html#acc60a4d203b1a795fa2f32cf7240b3c1">OPUS_SEEK_PREROLL_MS</a> = 80;</div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;    uint16_t pre_skip;</div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160; </div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160; </div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;    <span class="keywordflow">if</span> ((uint64_t)atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; (1&lt;&lt;30) || atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 11)</div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160; </div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;    <span class="comment">/* Check OpusSpecificBox version. */</span></div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb) != 0) {</div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;unsupported OpusSpecificBox version\n&quot;</span>);</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;    }</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160; </div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;    <span class="comment">/* OpusSpecificBox size plus magic for Ogg OpusHead header. */</span></div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> + 8;</div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160; </div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#abd46f5a4eb066239eb76f4bac1281e1d">ff_alloc_extradata</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)) &lt; 0)</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160; </div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;    <a class="code" href="intreadwrite_8h.html#a9aad44bed0c244bb2f4d3e7296b2946a">AV_WL32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>, <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;O&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;s&#39;</span>));</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;    <a class="code" href="intreadwrite_8h.html#a9aad44bed0c244bb2f4d3e7296b2946a">AV_WL32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 4, <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;H&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;d&#39;</span>));</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;    <a class="code" href="intreadwrite_8h.html#a9ac2c1eb4e110798d965d0aead639ff9">AV_WB8</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 8, 1); <span class="comment">/* OpusHead version */</span></div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;    <a class="code" href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 9, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - 9);</div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160; </div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;    <span class="comment">/* OpusSpecificBox is stored in big-endian, but OpusHead is</span></div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;<span class="comment">       little-endian; aside from the preceeding magic and version they&#39;re</span></div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;<span class="comment">       otherwise currently identical.  Data after output gain at offset 16</span></div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;<span class="comment">       doesn&#39;t need to be bytewapped. */</span></div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;    pre_skip = <a class="code" href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 10);</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;    <a class="code" href="intreadwrite_8h.html#a472b33c46f8c8d08f484be15431a1598">AV_WL16</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 10, pre_skip);</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;    <a class="code" href="intreadwrite_8h.html#a9aad44bed0c244bb2f4d3e7296b2946a">AV_WL32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 12, <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 12));</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;    <a class="code" href="intreadwrite_8h.html#a472b33c46f8c8d08f484be15431a1598">AV_WL16</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 16, <a class="code" href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a> + 16));</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160; </div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#ad2363a9a16b5674b5232c288a3e031cf">initial_padding</a> = pre_skip;</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a539f03590bb3e8c69d2111ede5e4ac94">seek_preroll</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="oggparseopus_8c.html#acc60a4d203b1a795fa2f32cf7240b3c1">OPUS_SEEK_PREROLL_MS</a>,</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;                                              (<a class="code" href="struct_a_v_rational.html">AVRational</a>){1, 1000},</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;                                              (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){1, 48000});</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160; </div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;}</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160; </div>
<div class="line"><a name="l06783"></a><span class="lineno"><a class="line" href="mov_8c.html#a63ebdc9d9252fbe651f38dd76573121d"> 6783</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a63ebdc9d9252fbe651f38dd76573121d">mov_read_dmlp</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;{</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;    <span class="keywordtype">unsigned</span> format_info;</div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;    <span class="keywordtype">int</span> channel_assignment, channel_assignment1, channel_assignment2;</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;    <span class="keywordtype">int</span> ratebits;</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160; </div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160; </div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 10)</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160; </div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;    format_info = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160; </div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;    ratebits            = (format_info &gt;&gt; 28) &amp; 0xF;</div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;    channel_assignment1 = (format_info &gt;&gt; 15) &amp; 0x1F;</div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;    channel_assignment2 = format_info &amp; 0x1FFF;</div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;    <span class="keywordflow">if</span> (channel_assignment2)</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;        channel_assignment = channel_assignment2;</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;        channel_assignment = channel_assignment1;</div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160; </div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a0ce9631123719789e4c7b0c23c66d534">frame_size</a> = 40 &lt;&lt; (ratebits &amp; 0x7);</div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> = <a class="code" href="mlp__parse_8h.html#a9ebdc2270d875704df2b757fd5ca623e">mlp_samplerate</a>(ratebits);</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> = <a class="code" href="mlp__parse_8h.html#a2dab7b101492bff1541fdd22df0b0498">truehd_channels</a>(channel_assignment);</div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">channel_layout</a> = <a class="code" href="mlp__parse_8h.html#af4e1695e7a71e07567f0b935fe370dc0">truehd_layout</a>(channel_assignment);</div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160; </div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;}</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160; </div>
<div class="line"><a name="l06815"></a><span class="lineno"><a class="line" href="mov_8c.html#a6ed7e16aa7e593d87daa2d13183f0a69"> 6815</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a6ed7e16aa7e593d87daa2d13183f0a69">mov_read_dvcc_dvvc</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;{</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;    uint32_t buf;</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;    <a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html">AVDOVIDecoderConfigurationRecord</a> *dovi;</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;    <span class="keywordtype">size_t</span> dovi_size;</div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160; </div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams &lt; 1)</div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;    st = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;streams[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;nb_streams-1];</div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160; </div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;    <span class="keywordflow">if</span> ((uint64_t)atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt; (1&lt;&lt;30) || atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 4)</div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160; </div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;    dovi = <a class="code" href="dovi__meta_8c.html#ac09def4bb9ada4ae22d7a4b478aaeaa8">av_dovi_alloc</a>(&amp;dovi_size);</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;    <span class="keywordflow">if</span> (!dovi)</div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160; </div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;    dovi-&gt;<a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html#a3182af2d5d6ca0c10ad6cb0e5aa5c71f">dv_version_major</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;    dovi-&gt;<a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html#ae1009dfc633097df6b5c7074b684b9b5">dv_version_minor</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160; </div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;    buf = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(pb);</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;    dovi-&gt;<a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html#a8d7472a76d55b201759e0883e425b036">dv_profile</a>        = (buf &gt;&gt; 9) &amp; 0x7f;    <span class="comment">// 7 bits</span></div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;    dovi-&gt;<a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html#afaa0a5ee8c693f26132e86c85d38c029">dv_level</a>          = (buf &gt;&gt; 3) &amp; 0x3f;    <span class="comment">// 6 bits</span></div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;    dovi-&gt;<a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html#a7cba91fd0ce51a45be253de043e976d4">rpu_present_flag</a>  = (buf &gt;&gt; 2) &amp; 0x01;    <span class="comment">// 1 bit</span></div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;    dovi-&gt;<a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html#ae30e3c4307f76277af0d35eacc869af8">el_present_flag</a>   = (buf &gt;&gt; 1) &amp; 0x01;    <span class="comment">// 1 bit</span></div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;    dovi-&gt;<a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html#af212117847425270d1da7ff88e28efb0">bl_present_flag</a>   =  buf       &amp; 0x01;    <span class="comment">// 1 bit</span></div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt;= 24) {  <span class="comment">// 4 + 4 + 4 * 4</span></div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;        buf = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;        dovi-&gt;<a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html#af0c03dc377375d8a61e74a44de462a73">dv_bl_signal_compatibility_id</a> = (buf &gt;&gt; 4) &amp; 0x0f; <span class="comment">// 4 bits</span></div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;        <span class="comment">// 0 stands for None</span></div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;        <span class="comment">// Dolby Vision V1.2.93 profiles and levels</span></div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;        dovi-&gt;<a class="code" href="struct_a_v_d_o_v_i_decoder_configuration_record.html#af0c03dc377375d8a61e74a44de462a73">dv_bl_signal_compatibility_id</a> = 0;</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;    }</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160; </div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__core.html#ga5c8d715704c153cb645982444063cc2b">av_stream_add_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97afa35946d9ab6a87d8be192435e6fc317">AV_PKT_DATA_DOVI_CONF</a>,</div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;                                  (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)dovi, dovi_size);</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(dovi);</div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;    }</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160; </div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;DOVI in dvcC/dvvC box, version: %d.%d, profile: %d, level: %d, &quot;</span></div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;           <span class="stringliteral">&quot;rpu flag: %d, el flag: %d, bl flag: %d, compatibility id: %d\n&quot;</span>,</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;           dovi-&gt;dv_version_major, dovi-&gt;dv_version_minor,</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;           dovi-&gt;dv_profile, dovi-&gt;dv_level,</div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;           dovi-&gt;rpu_present_flag,</div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;           dovi-&gt;el_present_flag,</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;           dovi-&gt;bl_present_flag,</div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;           dovi-&gt;dv_bl_signal_compatibility_id</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;        );</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160; </div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;}</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160; </div>
<div class="line"><a name="l06872"></a><span class="lineno"><a class="line" href="mov_8c.html#a8e6f02c6842d290bb03c9bfdae0c8f4c"> 6872</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_m_o_v_parse_table_entry.html">MOVParseTableEntry</a> <a class="code" href="mov_8c.html#a8e6f02c6842d290bb03c9bfdae0c8f4c">mov_default_parse_table</a>[] = {</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;A&#39;</span>,<span class="charliteral">&#39;C&#39;</span>,<span class="charliteral">&#39;L&#39;</span>,<span class="charliteral">&#39;R&#39;</span>), <a class="code" href="mov_8c.html#a18642b86a90a58b7915691b57f44fb11">mov_read_aclr</a> },</div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;A&#39;</span>,<span class="charliteral">&#39;P&#39;</span>,<span class="charliteral">&#39;R&#39;</span>,<span class="charliteral">&#39;G&#39;</span>), <a class="code" href="mov_8c.html#aa269a6f909b4da737f6a17b8c5dc0552">mov_read_avid</a> },</div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;A&#39;</span>,<span class="charliteral">&#39;A&#39;</span>,<span class="charliteral">&#39;L&#39;</span>,<span class="charliteral">&#39;P&#39;</span>), <a class="code" href="mov_8c.html#aa269a6f909b4da737f6a17b8c5dc0552">mov_read_avid</a> },</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;A&#39;</span>,<span class="charliteral">&#39;R&#39;</span>,<span class="charliteral">&#39;E&#39;</span>,<span class="charliteral">&#39;S&#39;</span>), <a class="code" href="mov_8c.html#a7db82c4aa095607ea3b443285588dc6f">mov_read_ares</a> },</div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;s&#39;</span>), <a class="code" href="mov_8c.html#aaa0ba57e95962f3a432ffa739fca0624">mov_read_avss</a> },</div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;1&#39;</span>,<span class="charliteral">&#39;C&#39;</span>), <a class="code" href="mov_8c.html#a50a6ea0d7c4ed7bcd7b90c82ddaed454">mov_read_av1c</a> },</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;l&#39;</span>), <a class="code" href="mov_8c.html#a48655c15480a3c7c73cdcc06e60596df">mov_read_chpl</a> },</div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;6&#39;</span>,<span class="charliteral">&#39;4&#39;</span>), <a class="code" href="mov_8c.html#a4a242ca415ec9e93fa321b859b21fe48">mov_read_stco</a> },</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;r&#39;</span>), <a class="code" href="mov_8c.html#ac97751d9df6b48e286e9d4bfd2f997db">mov_read_colr</a> },</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;s&#39;</span>), <a class="code" href="mov_8c.html#ab08b68a3f1f84dd49431874dacaaa0ff">mov_read_ctts</a> }, <span class="comment">/* composition time to sample */</span></div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;f&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;D&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;x&#39;</span>,<span class="charliteral">&#39;E&#39;</span>), <a class="code" href="mov_8c.html#a3da5141b8315c758892c60dde3fc3274">mov_read_dpxe</a> },</div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;f&#39;</span>), <a class="code" href="mov_8c.html#a3d3029b10248aba1a111aafe425b6c2c">mov_read_dref</a> },</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;s&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>), <a class="code" href="mov_8c.html#a4bb4b077324472328268c8677dac1a67">mov_read_elst</a> },</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;a&#39;</span>), <a class="code" href="mov_8c.html#a67867a7c5f0d6f8cc5c2fda4f2fd0776">mov_read_enda</a> },</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;l&#39;</span>), <a class="code" href="mov_8c.html#aecde9171b3879bf22d783fed7427065a">mov_read_fiel</a> },</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;m&#39;</span>), <a class="code" href="mov_8c.html#a680899af4dbed041439f97c450871f4a">mov_read_adrm</a> },</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;y&#39;</span>,<span class="charliteral">&#39;p&#39;</span>), <a class="code" href="mov_8c.html#abbf27107e908820027b42f73c07e2a44">mov_read_ftyp</a> },</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;g&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;l&#39;</span>), <a class="code" href="mov_8c.html#abaa02c4c48dde0be52b2e61d23ddd3cc">mov_read_glbl</a> },</div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;r&#39;</span>), <a class="code" href="mov_8c.html#a6ea0db3c8da4ed6aedbc6d991806a5e7">mov_read_hdlr</a> },</div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>), <a class="code" href="mov_8c.html#a00446e5d1d3787d6f0eacbdddbc0f597">mov_read_ilst</a> },</div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;j&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;2&#39;</span>,<span class="charliteral">&#39;h&#39;</span>), <a class="code" href="mov_8c.html#a8e9db231f227db2306d00fe4fae7dc9c">mov_read_jp2h</a> },</div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;t&#39;</span>), <a class="code" href="mov_8c.html#a9fbf91d5c580f97b066354c92d02367d">mov_read_mdat</a> },</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>), <a class="code" href="mov_8c.html#a37ca04e208e4539edc5bff46ae7ef148">mov_read_mdhd</a> },</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;a&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;a&#39;</span>), <a class="code" href="mov_8c.html#a5d51e97997852ba277ee4c4673053770">mov_read_meta</a> },</div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;f&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;f&#39;</span>), <a class="code" href="mov_8c.html#ad58579b0759ca14e3a687d0761cf6c37">mov_read_moof</a> },</div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;v&#39;</span>), <a class="code" href="mov_8c.html#a74e4b292e1ce55e600d9623561f2cdcd">mov_read_moov</a> },</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;x&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>), <a class="code" href="mov_8c.html#a730c0993e55a88317c829d5caad17964">mov_read_mvhd</a> },</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;S&#39;</span>,<span class="charliteral">&#39;M&#39;</span>,<span class="charliteral">&#39;I&#39;</span>,<span class="charliteral">&#39; &#39;</span>), <a class="code" href="mov_8c.html#a8b440f4488e029ce5c55bba51498ef31">mov_read_svq3</a> },</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;c&#39;</span>), <a class="code" href="mov_8c.html#a8279ede4f07319c1c7d77fabad3dd5bf">mov_read_alac</a> }, <span class="comment">/* alac specific atom */</span></div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;C&#39;</span>), <a class="code" href="mov_8c.html#abaa02c4c48dde0be52b2e61d23ddd3cc">mov_read_glbl</a> },</div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;p&#39;</span>), <a class="code" href="mov_8c.html#aa909a33066d768a645349127a8085796">mov_read_pasp</a> },</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;x&#39;</span>), <a class="code" href="mov_8c.html#a61c25c57b474fff42c1a27c2d4e85ea9">mov_read_sidx</a> },</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;l&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;o&#39;</span>), <a class="code" href="mov_8c.html#a4a242ca415ec9e93fa321b859b21fe48">mov_read_stco</a> },</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;s&#39;</span>), <a class="code" href="mov_8c.html#a8a6c3812ff63039a9d300b55adc491fc">mov_read_stps</a> },</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;f&#39;</span>), <a class="code" href="mov_8c.html#a61c9bcbec06d59f84294fbb3a73e1603">mov_read_strf</a> },</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;c&#39;</span>), <a class="code" href="mov_8c.html#a9d14132a2f993c5b5d95e065e1b53e37">mov_read_stsc</a> },</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;d&#39;</span>), <a class="code" href="mov_8c.html#a0e24178810df0f112535701ca49838ae">mov_read_stsd</a> }, <span class="comment">/* sample description */</span></div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;s&#39;</span>), <a class="code" href="mov_8c.html#a3213d1fd3e9250fc9efb92d8518d5964">mov_read_stss</a> }, <span class="comment">/* sync sample */</span></div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;z&#39;</span>), <a class="code" href="mov_8c.html#a46979717f28637a732c9f4f1c5a81a49">mov_read_stsz</a> }, <span class="comment">/* sample size */</span></div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;s&#39;</span>), <a class="code" href="mov_8c.html#a572dd8fd1cc914f0e236f4374ef66893">mov_read_stts</a> },</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;z&#39;</span>,<span class="charliteral">&#39;2&#39;</span>), <a class="code" href="mov_8c.html#a46979717f28637a732c9f4f1c5a81a49">mov_read_stsz</a> }, <span class="comment">/* compact sample size */</span></div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;p&#39;</span>), <a class="code" href="mov_8c.html#a571f0b82f39ae736384d5f075e9979a8">mov_read_sdtp</a> }, <span class="comment">/* independent and disposable samples */</span></div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;k&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>), <a class="code" href="mov_8c.html#a7f1b46ccb039c76b268d63604e3d9865">mov_read_tkhd</a> }, <span class="comment">/* track header */</span></div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>), <a class="code" href="mov_8c.html#a74298e7157b952783dfa02ebaec0d8ee">mov_read_tfdt</a> },</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>), <a class="code" href="mov_8c.html#ae2e0964ab2700cb2c2ca61859f4bdf79">mov_read_tfhd</a> }, <span class="comment">/* track fragment header */</span></div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;k&#39;</span>), <a class="code" href="mov_8c.html#ac82aba954beec243b26f26711e43de25">mov_read_trak</a> },</div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;f&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;f&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;d&#39;</span>), <a class="code" href="mov_8c.html#a383d3d6a965294260b5950905b9e06bf">mov_read_tmcd</a> },</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;p&#39;</span>), <a class="code" href="mov_8c.html#ad280c9895b016bdee2b3e2d4f4f07d92">mov_read_chap</a> },</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;x&#39;</span>), <a class="code" href="mov_8c.html#a942a4639dc6ccc8e3362d3f46d3e83b7">mov_read_trex</a> },</div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;n&#39;</span>), <a class="code" href="mov_8c.html#a76ae95d19017f3aaf08e7170e0bac2ed">mov_read_trun</a> },</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;a&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;e&#39;</span>), <a class="code" href="mov_8c.html#a3fe0ac17ee031337ba46f3eaaf7b8cbe">mov_read_wave</a> },</div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;s&#39;</span>), <a class="code" href="mov_8c.html#af63342dda926f662dfd06a83276016ae">mov_read_esds</a> },</div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;3&#39;</span>), <a class="code" href="mov_8c.html#aa601d2c95ca4e2cf283f5ea54fc02eae">mov_read_dac3</a> }, <span class="comment">/* AC-3 info */</span></div>
<div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;3&#39;</span>), <a class="code" href="mov_8c.html#a63381c2ef75e97e3f061e6a38054397d">mov_read_dec3</a> }, <span class="comment">/* EAC-3 info */</span></div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;s&#39;</span>), <a class="code" href="mov_8c.html#a55f711c3470444cb84ebd5c8147f7c3e">mov_read_ddts</a> }, <span class="comment">/* DTS audio descriptor */</span></div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;e&#39;</span>), <a class="code" href="mov_8c.html#af40b9788507cb3f001989b8c6741d108">mov_read_wide</a> }, <span class="comment">/* place holder */</span></div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;x&#39;</span>), <a class="code" href="mov_8c.html#ab97063325c367ee12ad82f33dae0ec7c">mov_read_wfex</a> },</div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;v&#39;</span>), <a class="code" href="mov_8c.html#afb652365ce584a9a759fb077bfc55566">mov_read_cmov</a> },</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;n&#39;</span>), <a class="code" href="mov_8c.html#aae0ac907dc841d5f8166576898d8942b">mov_read_chan</a> }, <span class="comment">/* channel layout */</span></div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;1&#39;</span>), <a class="code" href="mov_8c.html#ace296eb5fd99ec8af19e5a1a56ea4404">mov_read_dvc1</a> },</div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;g&#39;</span>,<span class="charliteral">&#39;p&#39;</span>), <a class="code" href="mov_8c.html#a79f6e12ccc3b7e0168eb2c520d153181">mov_read_sbgp</a> },</div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;C&#39;</span>), <a class="code" href="mov_8c.html#abaa02c4c48dde0be52b2e61d23ddd3cc">mov_read_glbl</a> },</div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;d&#39;</span>), <a class="code" href="mov_8c.html#aaaaf80017834f535461d82a6afe6ff0a">mov_read_uuid</a> },</div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;C&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;n&#39;</span>, 0x8e), <a class="code" href="mov_8c.html#aef4f0a1ca31729f9a3b06a93f1e2eb09">mov_read_targa_y216</a> },</div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;e&#39;</span>), <a class="code" href="mov_8c.html#a95662210f9d8dbed043b69411210d5a2">mov_read_free</a> },</div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;-&#39;</span>,<span class="charliteral">&#39;-&#39;</span>,<span class="charliteral">&#39;-&#39;</span>,<span class="charliteral">&#39;-&#39;</span>), <a class="code" href="mov_8c.html#aa5dd48127e84fe1b508c1b0d634a0804">mov_read_custom</a> },</div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;f&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;a&#39;</span>), <a class="code" href="mov_8c.html#ad9ac030127c344e72a633bb661f0878e">mov_read_frma</a> },</div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;c&#39;</span>), <a class="code" href="mov_8c.html#ac6ce0e77bb82e93a45d7a20cf392fe51">mov_read_senc</a> },</div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;z&#39;</span>), <a class="code" href="mov_8c.html#a94e6e7eff22c7876691ef37b898f9fab">mov_read_saiz</a> },</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;o&#39;</span>), <a class="code" href="mov_8c.html#a33da53331ea807df80570f5d4cdbf362">mov_read_saio</a> },</div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;h&#39;</span>), <a class="code" href="mov_8c.html#a7ecf0e0c260de7da22fea66ba1289548">mov_read_pssh</a> },</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;m&#39;</span>), <a class="code" href="mov_8c.html#a6502c5f11135b38e4e7dfb0e43b55efc">mov_read_schm</a> },</div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;i&#39;</span>), <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a> },</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;c&#39;</span>), <a class="code" href="mov_8c.html#aaa2bfd255f451a272711209847187200">mov_read_tenc</a> },</div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;L&#39;</span>,<span class="charliteral">&#39;a&#39;</span>), <a class="code" href="mov_8c.html#a4a06d9895f2722344858926e870619a3">mov_read_dfla</a> },</div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;3&#39;</span>,<span class="charliteral">&#39;d&#39;</span>), <a class="code" href="mov_8c.html#a4a34817ad2bea122a5ac70eab1751bb6">mov_read_st3d</a> }, <span class="comment">/* stereoscopic 3D video box */</span></div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;3&#39;</span>,<span class="charliteral">&#39;d&#39;</span>), <a class="code" href="mov_8c.html#a5535f592604456c8c890a3ff0306dec3">mov_read_sv3d</a> }, <span class="comment">/* spherical video box */</span></div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;O&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;s&#39;</span>), <a class="code" href="mov_8c.html#a0f7a87012ac97039366eefa506d2e6a7">mov_read_dops</a> },</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;p&#39;</span>), <a class="code" href="mov_8c.html#a63ebdc9d9252fbe651f38dd76573121d">mov_read_dmlp</a> },</div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;S&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;D&#39;</span>,<span class="charliteral">&#39;m&#39;</span>), <a class="code" href="mov_8c.html#a5f2446e2c52a90e8e18be878dbf4a2d7">mov_read_smdm</a> },</div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;C&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;L&#39;</span>,<span class="charliteral">&#39;L&#39;</span>), <a class="code" href="mov_8c.html#ad97adeca7697a7f003f0ecb7631b2bf2">mov_read_coll</a> },</div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;C&#39;</span>), <a class="code" href="mov_8c.html#ac0edbd1bcfe926ed782b99d9d2d3b090">mov_read_vpcc</a> },</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;v&#39;</span>), <a class="code" href="mov_8c.html#a86cda9cc843d872a5c3dd69723e27424">mov_read_mdcv</a> },</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;i&#39;</span>), <a class="code" href="mov_8c.html#a75c54019f51c1bc7200cac3044a3c7f3">mov_read_clli</a> },</div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;C&#39;</span>), <a class="code" href="mov_8c.html#a6ed7e16aa7e593d87daa2d13183f0a69">mov_read_dvcc_dvvc</a> },</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;{ <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;C&#39;</span>), <a class="code" href="mov_8c.html#a6ed7e16aa7e593d87daa2d13183f0a69">mov_read_dvcc_dvvc</a> },</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;{ 0, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;};</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160; </div>
<div class="line"><a name="l06972"></a><span class="lineno"><a class="line" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100"> 6972</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom)</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;{</div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;    int64_t total_size = 0;</div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;    <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>;</div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160; </div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;atom_depth &gt; 10) {</div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Atoms too deeply nested\n&quot;</span>);</div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;    }</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;atom_depth ++;</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160; </div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;    <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 0)</div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;        atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> = INT64_MAX;</div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;    <span class="keywordflow">while</span> (total_size &lt;= atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - 8 &amp;&amp; !<a class="code" href="avio_8h.html#a4db704ed3d00a4be632dad1585d01d92">avio_feof</a>(pb)) {</div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;        <a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> (*<a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a>)(<a class="code" href="struct_m_o_v_context.html">MOVContext</a>*, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a>*, <a class="code" href="isom_8h.html#a2dfd82d870cd4c8637d51c6828db91e1">MOVAtom</a>) = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;        <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>;</div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;        <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type=0;</div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;        <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &gt;= 8) {</div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;            <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(pb);</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;            <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;            <span class="keywordflow">if</span> (((<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;e&#39;</span>) &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;moov_retry) ||</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;                  <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;v&#39;</span>)) &amp;&amp;</div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;                <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size &gt;= 8 &amp;&amp;</div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;strict_std_compliance &lt; <a class="code" href="avcodec_8h.html#a5c1eb24858b3a73d6bbe9585d30e971a">FF_COMPLIANCE_STRICT</a>) {</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;                uint32_t <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>;</div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;                <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 4);</div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;                <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a>(pb);</div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;                <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, -8, SEEK_CUR);</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;v&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>) ||</div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;                    <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;v&#39;</span>)) {</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Detected moov in a free or hoov atom.\n&quot;</span>);</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;                    <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type = <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;                }</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;            }</div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;            <span class="keywordflow">if</span> (atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;t&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;                atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> != <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;v&#39;</span>)) {</div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;k&#39;</span>) ||</div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;                    <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;t&#39;</span>)) {</div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Broken file, trak/mdat not at top-level\n&quot;</span>);</div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;                    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, -8);</div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;                    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;atom_depth --;</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;                }</div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;            }</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;            total_size += 8;</div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size == 1 &amp;&amp; total_size + 8 &lt;= atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>) { <span class="comment">/* 64 bit extended size */</span></div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;                <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(pb) - 8;</div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;                total_size += 8;</div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;            }</div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;        }</div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;type:&#39;%s&#39; parent:&#39;%s&#39; sz: %&quot;</span>PRId64<span class="stringliteral">&quot; %&quot;</span>PRId64<span class="stringliteral">&quot; %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;               <a class="code" href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a>(<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type), <a class="code" href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a>(atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a>), <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size, total_size, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a>);</div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size == 0) {</div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;            <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size = atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - total_size + 8;</div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;        }</div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;        <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size -= 8;</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size &lt; 0)</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;        <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - total_size);</div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160; </div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="mov_8c.html#a8e6f02c6842d290bb03c9bfdae0c8f4c">mov_default_parse_table</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_parse_table_entry.html#a777d3e1425cb73aeae90cc363fa6080b">type</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a8e6f02c6842d290bb03c9bfdae0c8f4c">mov_default_parse_table</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type) {</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;                <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#a8e6f02c6842d290bb03c9bfdae0c8f4c">mov_default_parse_table</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_parse_table_entry.html#a2358437ca5b698e283eca0442a685d46">parse</a>;</div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;            }</div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160; </div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;        <span class="comment">// container is user data</span></div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> &amp;&amp; (atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;a&#39;</span>) ||</div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;                       atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;t&#39;</span>)))</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;            <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#ad8b386f328990078743dafa6a43c052a">mov_read_udta_string</a>;</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160; </div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;        <span class="comment">// Supports parsing the QuickTime Metadata Keys.</span></div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;        <span class="comment">// https://developer.apple.com/library/mac/documentation/QuickTime/QTFF/Metadata/Metadata.html</span></div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_hdlr_mdta &amp;&amp;</div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;            atom.<a class="code" href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">type</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;a&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;            <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;k&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;y&#39;</span>,<span class="charliteral">&#39;s&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;meta_keys_count == 0) {</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;            <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a> = <a class="code" href="mov_8c.html#ab74179790be576c468907f8ec562da0f">mov_read_keys</a>;</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;        }</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160; </div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a>) { <span class="comment">/* skip leaf atoms data */</span></div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;            <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size);</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;            int64_t start_pos = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;            int64_t <a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a>;</div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;            <span class="keywordtype">int</span> err = <a class="code" href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, pb, <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>);</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;            <span class="keywordflow">if</span> (err &lt; 0) {</div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;atom_depth --;</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;            }</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_moov &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;found_mdat &amp;&amp;</div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;                ((!(pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a0e3c41c290b38923880b9cccb669bf78">seekable</a> &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>) || <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;flags &amp; <a class="code" href="avformat_8h.html#a2d5c3fab0686ccb9f517dec49048d421">AVFMT_FLAG_IGNIDX</a> || <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.complete) ||</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;                 start_pos + <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size == <a class="code" href="avio_8h.html#a375f057e315dd2273579555128a070fb">avio_size</a>(pb))) {</div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;                <span class="keywordflow">if</span> (!(pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a0e3c41c290b38923880b9cccb669bf78">seekable</a> &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>) || <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc-&gt;flags &amp; <a class="code" href="avformat_8h.html#a2d5c3fab0686ccb9f517dec49048d421">AVFMT_FLAG_IGNIDX</a> || <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.complete)</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;                    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;next_root_atom = start_pos + <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size;</div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;atom_depth --;</div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;            }</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;            <a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a> = <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size - <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) + start_pos;</div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a> &gt; 0) <span class="comment">/* skip garbage at atom end */</span></div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;                <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, <a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a>);</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a> &lt; 0) {</div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;                       <span class="stringliteral">&quot;overread end of atom &#39;%s&#39; by %&quot;</span>PRId64<span class="stringliteral">&quot; bytes\n&quot;</span>,</div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;                       <a class="code" href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a>(<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.type), -<a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a>);</div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;                <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, <a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a>, SEEK_CUR);</div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;            }</div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;        }</div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160; </div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;        total_size += <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>.size;</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;    }</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160; </div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;    <span class="keywordflow">if</span> (total_size &lt; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &amp;&amp; atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> &lt; 0x7ffff)</div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;        <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> - total_size);</div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160; </div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;atom_depth --;</div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;}</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160; </div>
<div class="line"><a name="l07092"></a><span class="lineno"><a class="line" href="mov_8c.html#aeae6f57f9f52a20bb3e556152b89f24a"> 7092</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aeae6f57f9f52a20bb3e556152b89f24a">mov_probe</a>(<span class="keyword">const</span> <a class="code" href="struct_a_v_probe_data.html">AVProbeData</a> *p)</div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;{</div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;    int64_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;    uint32_t <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>;</div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;    <span class="keywordtype">int</span> score = 0;</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;    <span class="keywordtype">int</span> moov_offset = -1;</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160; </div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;    <span class="comment">/* check file header */</span></div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = 0;</div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;        <span class="comment">/* ignore invalid offset */</span></div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 8) &gt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)p-&gt;<a class="code" href="struct_a_v_probe_data.html#a30309e4de25c1a411c635eab767e1e53">buf_size</a>)</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;        <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> = <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a> + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 4);</div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;        <span class="keywordflow">switch</span>(<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>) {</div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;        <span class="comment">/* check for obvious tags */</span></div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;v&#39;</span>):</div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;            moov_offset = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 4;</div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;t&#39;</span>):</div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;o&#39;</span>,<span class="charliteral">&#39;t&#39;</span>): <span class="comment">/* detect movs with preview pics like ew.mov and april.mov */</span></div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;a&#39;</span>): <span class="comment">/* Packet Video PVAuthor adds this and a lot of more junk */</span></div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;y&#39;</span>,<span class="charliteral">&#39;p&#39;</span>):</div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a>+<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>) &lt; 8 &amp;&amp;</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;                (<a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a>+<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>) != 1 ||</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;                 <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 12 &gt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)p-&gt;<a class="code" href="struct_a_v_probe_data.html#a30309e4de25c1a411c635eab767e1e53">buf_size</a> ||</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;                 <a class="code" href="avr32_2intreadwrite_8h.html#ad3c990d78933aafd8096a21f01c19051">AV_RB64</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a>+<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 8) == 0)) {</div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;                score = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(score, <a class="code" href="avformat_8h.html#a8fef570c1a6f9c445acaf97fa2da3b7e">AVPROBE_SCORE_EXTENSION</a>);</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a> == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;y&#39;</span>,<span class="charliteral">&#39;p&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;                       (   <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a> + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 8) == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;j&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;2&#39;</span>,<span class="charliteral">&#39; &#39;</span>)</div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;                        || <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a> + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 8) == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;j&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;x&#39;</span>,<span class="charliteral">&#39; &#39;</span>)</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;                    )) {</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;                score = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(score, 5);</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;                score = <a class="code" href="avformat_8h.html#a24925a4d1138c3f17a7a27dd45c08920">AVPROBE_SCORE_MAX</a>;</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;            }</div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(4, <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a>+<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)) + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;        <span class="comment">/* those are more common words, so rate then a bit less */</span></div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;w&#39;</span>): <span class="comment">/* xdcam files have reverted first tags */</span></div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;w&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;e&#39;</span>):</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;e&#39;</span>):</div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;j&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;n&#39;</span>,<span class="charliteral">&#39;k&#39;</span>):</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;t&#39;</span>):</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;            score  = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(score, <a class="code" href="avformat_8h.html#a24925a4d1138c3f17a7a27dd45c08920">AVPROBE_SCORE_MAX</a> - 5);</div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(4, <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a>+<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)) + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(0x82,0x82,0x7f,0x7d):</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;s&#39;</span>,<span class="charliteral">&#39;k&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;p&#39;</span>):</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;u&#39;</span>,<span class="charliteral">&#39;i&#39;</span>,<span class="charliteral">&#39;d&#39;</span>):</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;f&#39;</span>,<span class="charliteral">&#39;l&#39;</span>):</div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;            <span class="comment">/* if we only find those cause probedata is too small at least rate them */</span></div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;            score  = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(score, <a class="code" href="avformat_8h.html#a8fef570c1a6f9c445acaf97fa2da3b7e">AVPROBE_SCORE_EXTENSION</a>);</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(4, <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a>+<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)) + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(4, <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a>+<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>)) + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;        }</div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;    }</div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;    <span class="keywordflow">if</span> (score &gt; <a class="code" href="avformat_8h.html#a24925a4d1138c3f17a7a27dd45c08920">AVPROBE_SCORE_MAX</a> - 50 &amp;&amp; moov_offset != -1) {</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;        <span class="comment">/* moov atom in the header - we should make sure that this is not a</span></div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;<span class="comment">         * MOV-packed MPEG-PS */</span></div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = moov_offset;</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160; </div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> &lt; (p-&gt;<a class="code" href="struct_a_v_probe_data.html#a30309e4de25c1a411c635eab767e1e53">buf_size</a> - 16)) { <span class="comment">/* Sufficient space */</span></div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;               <span class="comment">/* We found an actual hdlr atom */</span></div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a> + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>     ) == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;r&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;                <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a> + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> +  8) == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;r&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;                <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(p-&gt;<a class="code" href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">buf</a> + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 12) == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;M&#39;</span>,<span class="charliteral">&#39;P&#39;</span>,<span class="charliteral">&#39;E&#39;</span>,<span class="charliteral">&#39;G&#39;</span>)) {</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Found media data tag MPEG indicating this is a MOV-packed MPEG-PS.\n&quot;</span>);</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;                <span class="comment">/* We found a media handler reference atom describing an</span></div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;<span class="comment">                 * MPEG-PS-in-MOV, return a</span></div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;<span class="comment">                 * low score to force expanding the probe window until</span></div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;<span class="comment">                 * mpegps_probe finds what it needs */</span></div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;                <span class="keywordflow">return</span> 5;</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;                <span class="comment">/* Keep looking */</span></div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;                <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += 2;</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;            }</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;        }</div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;    }</div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160; </div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;    <span class="keywordflow">return</span> score;</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;}</div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160; </div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;<span class="comment">// must be done after parsing all trak because there&#39;s no order requirement</span></div>
<div class="line"><a name="l07177"></a><span class="lineno"><a class="line" href="mov_8c.html#afa35e848bf7867432834eb832c093880"> 7177</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#afa35e848bf7867432834eb832c093880">mov_read_chapters</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;{</div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;    <a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;    int64_t cur_pos;</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;    <span class="keywordtype">int</span> chapter_track;</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160; </div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; mov-&gt;<a class="code" href="struct_m_o_v_context.html#a742ba3afbed80b740be134910b0e1579">nb_chapter_tracks</a>; j++) {</div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;        chapter_track = mov-&gt;<a class="code" href="struct_m_o_v_context.html#a417ce5f6b2647fb2aa1fff283a7e6255">chapter_tracks</a>[j];</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;        st = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;id == chapter_track) {</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;                st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;            }</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;        <span class="keywordflow">if</span> (!st) {</div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Referenced QT chapter track not found\n&quot;</span>);</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;        }</div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160; </div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;        sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;        cur_pos = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>);</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160; </div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a> |= <a class="code" href="avformat_8h.html#ab54a3e54e88a8f7d7760e60b49944e44">AV_DISPOSITION_ATTACHED_PIC</a> | <a class="code" href="avformat_8h.html#af7e859adfb2f1819dd733bc19b600585">AV_DISPOSITION_TIMED_THUMBNAILS</a>;</div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>) {</div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;                <span class="comment">// Retrieve the first frame, if possible</span></div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;                <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[0];</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos, SEEK_SET) != <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos) {</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to retrieve first frame\n&quot;</span>);</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;                }</div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160; </div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="avformat_8h.html#a9d2e6f22150d98c36dcc2c6c49318019">av_get_packet</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a8c689ee00c0dfe4313891f8a2ea21f4d">attached_pic</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;size) &lt; 0)</div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160; </div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a8c689ee00c0dfe4313891f8a2ea21f4d">attached_pic</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>;</div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a8c689ee00c0dfe4313891f8a2ea21f4d">attached_pic</a>.<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a>       |= <a class="code" href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a>;</div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;            }</div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a>;</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa5cef5ab33a218c7ceccb713171a8632">AV_CODEC_ID_BIN_DATA</a>;</div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a492fcecc45dbbd8da51edd0124e9dd30">discard</a> = <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a>;</div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;                <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;                int64_t <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1 &lt; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a> ? st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> : st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>;</div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *title;</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;                uint16_t ch;</div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, title_len;</div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160; </div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;                <span class="keywordflow">if</span> (end &lt; sample-&gt;timestamp) {</div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;ignoring stream duration which is shorter than chapters\n&quot;</span>);</div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;                    <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;                }</div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160; </div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos, SEEK_SET) != <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos) {</div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Chapter %d not found in file\n&quot;</span>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;                }</div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160; </div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;                <span class="comment">// the first two bytes are the length of the title</span></div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>);</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt; <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;size-2)</div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;                title_len = 2*<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + 1;</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;                <span class="keywordflow">if</span> (!(title = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(title_len)))</div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160; </div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;                <span class="comment">// The samples could theoretically be in any encoding if there&#39;s an encd</span></div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;                <span class="comment">// atom following, but in practice are only utf-8 or utf-16, distinguished</span></div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;                <span class="comment">// instead by the presence of a BOM</span></div>
<div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>) {</div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;                    title[0] = 0;</div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;                    ch = <a class="code" href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>);</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;                    <span class="keywordflow">if</span> (ch == 0xfeff)</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;                        <a class="code" href="avio_8h.html#a02be750099c47406eb68b50d75a01bdd">avio_get_str16be</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, title, title_len);</div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch == 0xfffe)</div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;                        <a class="code" href="avio_8h.html#a39507bbc53328eae98ac7d683078fcf1">avio_get_str16le</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, title, title_len);</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;                    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;                        <a class="code" href="intreadwrite_8h.html#ae4d1eaaee02fc6c4672f59dcf7255286">AV_WB16</a>(title, ch);</div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> == 1 || <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> == 2)</div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;                            title[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>] = 0;</div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;                            <a class="code" href="avio_8h.html#abeee0414e5f2ce5b150cf9c5694a2e4f">avio_get_str</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, INT_MAX, title + 2, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1);</div>
<div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;                    }</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;                }</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160; </div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;                <a class="code" href="libavformat_2internal_8h.html#add2b61dc8834f793e0f2fe7f099f06d1">avpriv_new_chapter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;timestamp, <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>, title);</div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;title);</div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;            }</div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;        }</div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;<a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>:</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;        <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, cur_pos, SEEK_SET);</div>
<div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;    }</div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;}</div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160; </div>
<div class="line"><a name="l07276"></a><span class="lineno"><a class="line" href="mov_8c.html#a8c0b071822baf110ead3dd55b068c9cf"> 7276</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a8c0b071822baf110ead3dd55b068c9cf">parse_timecode_in_framenum_format</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st,</div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;                                             uint32_t <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>, <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>)</div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;{</div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;    <a class="code" href="struct_a_v_timecode.html">AVTimecode</a> <a class="code" href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a>;</div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;    <span class="keywordtype">char</span> buf[<a class="code" href="timecode_8h.html#a60186b13997e64a4aca71ff641634f9d">AV_TIMECODE_STR_SIZE</a>];</div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> rate = st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>;</div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="timecode_8c.html#ad279cd982964a2f8cc7adfa01533b412">av_timecode_init</a>(&amp;<a class="code" href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a>, rate, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;    <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;timecode&quot;</span>,</div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;                <a class="code" href="timecode_8c.html#a8cadcdf7e38091651068f70adb94f867">av_timecode_make_string</a>(&amp;<a class="code" href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a>, buf, <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>), 0);</div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;}</div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160; </div>
<div class="line"><a name="l07290"></a><span class="lineno"><a class="line" href="mov_8c.html#a62c8e55b4fb9ec58309866627e9fcfb7"> 7290</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a62c8e55b4fb9ec58309866627e9fcfb7">mov_read_rtmd_track</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;{</div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;    <span class="keywordtype">char</span> buf[<a class="code" href="timecode_8h.html#a60186b13997e64a4aca71ff641634f9d">AV_TIMECODE_STR_SIZE</a>];</div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;    int64_t cur_pos = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>);</div>
<div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;    <span class="keywordtype">int</span> hh, mm, <a class="code" href="cbs__vp9_8c.html#a15664fbc767d9389307a202a8663568d">ss</a>, ff, drop;</div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160; </div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;    <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>)</div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160; </div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>-&gt;<a class="code" href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">pos</a>, SEEK_SET);</div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 13);</div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;    hh = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;    mm = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a15664fbc767d9389307a202a8663568d">ss</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;    drop = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;    ff = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;    <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(buf, <a class="code" href="timecode_8h.html#a60186b13997e64a4aca71ff641634f9d">AV_TIMECODE_STR_SIZE</a>, <span class="stringliteral">&quot;%02d:%02d:%02d%c%02d&quot;</span>,</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;             hh, mm, <a class="code" href="cbs__vp9_8c.html#a15664fbc767d9389307a202a8663568d">ss</a>, drop ? <span class="charliteral">&#39;;&#39;</span> : <span class="charliteral">&#39;:&#39;</span>, ff);</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;    <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;timecode&quot;</span>, buf, 0);</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160; </div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, cur_pos, SEEK_SET);</div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;}</div>
<div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160; </div>
<div class="line"><a name="l07315"></a><span class="lineno"><a class="line" href="mov_8c.html#a86d61c4fee83b570039e08f61a5856c9"> 7315</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a86d61c4fee83b570039e08f61a5856c9">mov_read_timecode_track</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;{</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> = 0;</div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;    int64_t cur_pos = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>);</div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;    uint32_t <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>;</div>
<div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160; </div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;    <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>)</div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160; </div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>-&gt;<a class="code" href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">pos</a>, SEEK_SET);</div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;    <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160; </div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aded652ebcaf5b6e1bafe235a16310866">tmcd_flags</a> &amp; 0x0001) <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> |= <a class="code" href="timecode_8h.html#ad0e6464512b7849a2d14593708079219a4cacf5e87e2f19987c5e931be20a5c33">AV_TIMECODE_FLAG_DROPFRAME</a>;</div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aded652ebcaf5b6e1bafe235a16310866">tmcd_flags</a> &amp; 0x0002) <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> |= <a class="code" href="timecode_8h.html#ad0e6464512b7849a2d14593708079219abf78793ae8e9e28a4f85bb1a76992f1b">AV_TIMECODE_FLAG_24HOURSMAX</a>;</div>
<div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aded652ebcaf5b6e1bafe235a16310866">tmcd_flags</a> &amp; 0x0004) <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> |= <a class="code" href="timecode_8h.html#ad0e6464512b7849a2d14593708079219a373f53f5f7544e479b6c6b36b254fc8d">AV_TIMECODE_FLAG_ALLOWNEGATIVE</a>;</div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160; </div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;    <span class="comment">/* Assume Counter flag is set to 1 in tmcd track (even though it is likely</span></div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;<span class="comment">     * not the case) and thus assume &quot;frame number format&quot; instead of QT one.</span></div>
<div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;<span class="comment">     * No sample with tmcd track can be found with a QT timecode at the moment,</span></div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;<span class="comment">     * despite what the tmcd track &quot;suggests&quot; (Counter flag set to 0 means QT</span></div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;<span class="comment">     * format). */</span></div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;    <a class="code" href="mov_8c.html#a8c0b071822baf110ead3dd55b068c9cf">parse_timecode_in_framenum_format</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160; </div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, cur_pos, SEEK_SET);</div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;}</div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160; </div>
<div class="line"><a name="l07343"></a><span class="lineno"><a class="line" href="mov_8c.html#ad0088e69eafd30418f949b4af3203261"> 7343</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#ad0088e69eafd30418f949b4af3203261">mov_free_encryption_index</a>(<a class="code" href="struct_m_o_v_encryption_index.html">MOVEncryptionIndex</a> **<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>) {</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> || !*<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (*index)-&gt;nb_encrypted_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;        <a class="code" href="encryption__info_8c.html#ae49dc2ef6b84e80914f401bba34d4410">av_encryption_info_free</a>((*index)-&gt;encrypted_samples[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;    }</div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;(*index)-&gt;encrypted_samples);</div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;(*index)-&gt;auxiliary_info_sizes);</div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;(*index)-&gt;auxiliary_offsets);</div>
<div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;}</div>
<div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160; </div>
<div class="line"><a name="l07355"></a><span class="lineno"><a class="line" href="mov_8c.html#aa6ec4cc07baa4307df08502c0f850652"> 7355</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#aa6ec4cc07baa4307df08502c0f850652">mov_read_close</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;{</div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;    <a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160; </div>
<div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;        <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160; </div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;        <span class="keywordflow">if</span> (!sc)</div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160; </div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>);</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa1bba687784303efce7036088d091169">drefs_count</a>; j++) {</div>
<div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>[j].<a class="code" href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">path</a>);</div>
<div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>[j].<a class="code" href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">dir</a>);</div>
<div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;        }</div>
<div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">drefs</a>);</div>
<div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160; </div>
<div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa1bba687784303efce7036088d091169">drefs_count</a> = 0;</div>
<div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160; </div>
<div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a997c4ba9f960ba82fb9d711938f3dbb2">pb_is_copied</a>)</div>
<div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;            <a class="code" href="libavformat_2internal_8h.html#adb8463bd54e90ac181f7edc0944252de">ff_format_io_close</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>);</div>
<div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160; </div>
<div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">chunk_offsets</a>);</div>
<div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>);</div>
<div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">sample_sizes</a>);</div>
<div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">keyframes</a>);</div>
<div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">stts_data</a>);</div>
<div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a70e06db8083691e76b6bd57aa6baeedc">sdtp_data</a>);</div>
<div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">stps_data</a>);</div>
<div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">elst_data</a>);</div>
<div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">rap_group</a>);</div>
<div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>);</div>
<div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">index_ranges</a>);</div>
<div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160; </div>
<div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>)</div>
<div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a912339297bc6a4db4fa3cea3da29a351">stsd_count</a>; j++)</div>
<div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>[j]);</div>
<div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>);</div>
<div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>);</div>
<div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160; </div>
<div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;        <a class="code" href="mov_8c.html#ad0088e69eafd30418f949b4af3203261">mov_free_encryption_index</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a23b5a34c9b286dac2d2b5291e05386b9">encryption_index</a>);</div>
<div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;        <a class="code" href="encryption__info_8c.html#ae49dc2ef6b84e80914f401bba34d4410">av_encryption_info_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">default_encrypted_sample</a>);</div>
<div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;        <a class="code" href="aes__ctr_8c.html#a651580f87845fc3ba201abeecb5442e6">av_aes_ctr_free</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">cenc</a>.<a class="code" href="struct_m_o_v_stream_context.html#a88a4a9554afdec7861089439f2357b78">aes_ctr</a>);</div>
<div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160; </div>
<div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a>);</div>
<div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>);</div>
<div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>);</div>
<div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a>);</div>
<div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;    }</div>
<div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160; </div>
<div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a64075c67c537c82e7623f41badbd7788">dv_demux</a>);</div>
<div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;    <a class="code" href="group__lavf__core.html#gac2990b13b68e831a408fce8e1d0d6445">avformat_free_context</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#ab675b1856287a4888607b882d3ab6ffb">dv_fctx</a>);</div>
<div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;    mov-&gt;<a class="code" href="struct_m_o_v_context.html#ab675b1856287a4888607b882d3ab6ffb">dv_fctx</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160; </div>
<div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;    <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e0bb8492cd8d04d57b64dc3102a579d">meta_keys</a>) {</div>
<div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2c0b73fe93234cb553d95ac5b5a635fd">meta_keys_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e0bb8492cd8d04d57b64dc3102a579d">meta_keys</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;        }</div>
<div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e0bb8492cd8d04d57b64dc3102a579d">meta_keys</a>);</div>
<div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;    }</div>
<div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160; </div>
<div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a9b9844e5b797d56df8279505b9bd52da">trex_data</a>);</div>
<div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a12b208712b36e949a532931ed9fa4e09">bitrates</a>);</div>
<div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160; </div>
<div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;        <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> *frag = mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a>;</div>
<div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a31b398f75fb1d776b548aa149616485f">nb_stream_info</a>; j++) {</div>
<div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;            <a class="code" href="mov_8c.html#ad0088e69eafd30418f949b4af3203261">mov_free_encryption_index</a>(&amp;frag[j].encryption_index);</div>
<div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;        }</div>
<div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">stream_info</a>);</div>
<div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;    }</div>
<div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>);</div>
<div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160; </div>
<div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#aaec557c3f8e5019280e98bf0aa70c48a">aes_decrypt</a>);</div>
<div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a417ce5f6b2647fb2aa1fff283a7e6255">chapter_tracks</a>);</div>
<div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160; </div>
<div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;}</div>
<div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160; </div>
<div class="line"><a name="l07437"></a><span class="lineno"><a class="line" href="mov_8c.html#af93efcaabff2d280bf0cd22fcfbd0822"> 7437</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#af93efcaabff2d280bf0cd22fcfbd0822">tmcd_is_referenced</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> tmcd_id)</div>
<div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;{</div>
<div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160; </div>
<div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;        <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160; </div>
<div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> &amp;&amp;</div>
<div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a79d9b90ec899fa52b6f3d61d75327530">timecode_track</a> == tmcd_id)</div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;    }</div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;}</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160; </div>
<div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;<span class="comment">/* look for a tmcd track not referenced by any video track, and export it globally */</span></div>
<div class="line"><a name="l07453"></a><span class="lineno"><a class="line" href="mov_8c.html#addac265d1db363043ab9b96a2e29c697"> 7453</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mov_8c.html#addac265d1db363043ab9b96a2e29c697">export_orphan_timecode</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;{</div>
<div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160; </div>
<div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160; </div>
<div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a>  == <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;m&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;d&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;            !<a class="code" href="mov_8c.html#af93efcaabff2d280bf0cd22fcfbd0822">tmcd_is_referenced</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1)) {</div>
<div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;            <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *tcr = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;timecode&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;            <span class="keywordflow">if</span> (tcr) {</div>
<div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;                <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, <span class="stringliteral">&quot;timecode&quot;</span>, tcr-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>, 0);</div>
<div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;            }</div>
<div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;        }</div>
<div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;    }</div>
<div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;}</div>
<div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160; </div>
<div class="line"><a name="l07471"></a><span class="lineno"><a class="line" href="mov_8c.html#a65a24e307c77a8ca33e9524619a389d4"> 7471</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a65a24e307c77a8ca33e9524619a389d4">read_tfra</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>)</div>
<div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;{</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>, fieldlength, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;    uint32_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;    <span class="keywordtype">unsigned</span> track_id, item_count;</div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160; </div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>) != <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;t&#39;</span>, <span class="charliteral">&#39;f&#39;</span>, <span class="charliteral">&#39;r&#39;</span>, <span class="charliteral">&#39;a&#39;</span>)) {</div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;    }</div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;found tfra\n&quot;</span>);</div>
<div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160; </div>
<div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;    <a class="code" href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;    track_id = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;    fieldlength = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;    item_count = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; item_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;        int64_t time, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;        <a class="code" href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a> * frag_stream_info;</div>
<div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160; </div>
<div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#a4db704ed3d00a4be632dad1585d01d92">avio_feof</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>)) {</div>
<div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;        }</div>
<div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160; </div>
<div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> == 1) {</div>
<div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;            time   = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;            time   = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;        }</div>
<div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160; </div>
<div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;        <span class="comment">// The first sample of each stream in a fragment is always a random</span></div>
<div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;        <span class="comment">// access sample.  So it&#39;s entry in the tfra can be used as the</span></div>
<div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;        <span class="comment">// initial PTS of the fragment.</span></div>
<div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;        <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mov_8c.html#a027536bc27f9a6ef7c11b785a959e490">update_frag_index</a>(mov, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>);</div>
<div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;        frag_stream_info = <a class="code" href="mov_8c.html#a7c11ff3d622d1f7d00f6c5ad06d42378">get_frag_stream_info</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, track_id);</div>
<div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;        <span class="keywordflow">if</span> (frag_stream_info &amp;&amp;</div>
<div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;            frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">first_tfra_pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;            frag_stream_info-&gt;<a class="code" href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">first_tfra_pts</a> = time;</div>
<div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160; </div>
<div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; ((fieldlength &gt;&gt; 4) &amp; 3) + 1; j++)</div>
<div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;            <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; ((fieldlength &gt;&gt; 2) &amp; 3) + 1; j++)</div>
<div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;            <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; ((fieldlength &gt;&gt; 0) &amp; 3) + 1; j++)</div>
<div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;            <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;    }</div>
<div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160; </div>
<div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, SEEK_SET);</div>
<div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;}</div>
<div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160; </div>
<div class="line"><a name="l07526"></a><span class="lineno"><a class="line" href="mov_8c.html#a833f75276b1c37c78eb06d6f35a42c2e"> 7526</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a833f75276b1c37c78eb06d6f35a42c2e">mov_read_mfra</a>(<a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>)</div>
<div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;{</div>
<div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;    int64_t stream_size = <a class="code" href="avio_8h.html#a375f057e315dd2273579555128a070fb">avio_size</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;    int64_t original_pos = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;    int64_t seek_ret;</div>
<div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = -1;</div>
<div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;    <span class="keywordflow">if</span> ((seek_ret = <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, stream_size - 4, SEEK_SET)) &lt; 0) {</div>
<div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = seek_ret;</div>
<div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;    }</div>
<div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mfra_size = <a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;have_read_mfra_size = 1;</div>
<div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mfra_size || <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mfra_size &gt; stream_size) {</div>
<div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;doesn&#39;t look like mfra (unreasonable size)\n&quot;</span>);</div>
<div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;    }</div>
<div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;    <span class="keywordflow">if</span> ((seek_ret = <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, -((int64_t) <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mfra_size), SEEK_CUR)) &lt; 0) {</div>
<div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = seek_ret;</div>
<div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;    }</div>
<div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>) != <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mfra_size) {</div>
<div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;doesn&#39;t look like mfra (size mismatch)\n&quot;</span>);</div>
<div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;    }</div>
<div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>) != <a class="code" href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a>(<span class="charliteral">&#39;m&#39;</span>, <span class="charliteral">&#39;f&#39;</span>, <span class="charliteral">&#39;r&#39;</span>, <span class="charliteral">&#39;a&#39;</span>)) {</div>
<div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;doesn&#39;t look like mfra (tag mismatch)\n&quot;</span>);</div>
<div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;    }</div>
<div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;stream has mfra\n&quot;</span>);</div>
<div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a65a24e307c77a8ca33e9524619a389d4">read_tfra</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;    } <span class="keywordflow">while</span> (!<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;frag_index.complete = 1;</div>
<div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;    seek_ret = <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, original_pos, SEEK_SET);</div>
<div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;    <span class="keywordflow">if</span> (seek_ret &lt; 0) {</div>
<div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;fc, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;               <span class="stringliteral">&quot;failed to seek back after looking for mfra\n&quot;</span>);</div>
<div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = seek_ret;</div>
<div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;    }</div>
<div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;}</div>
<div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160; </div>
<div class="line"><a name="l07572"></a><span class="lineno"><a class="line" href="mov_8c.html#a4896c6e7b4b2e70c75e09e61fe39e02a"> 7572</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a4896c6e7b4b2e70c75e09e61fe39e02a">mov_read_header</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;{</div>
<div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;    <a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;    <span class="keywordtype">int</span> j, err;</div>
<div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;    <a class="code" href="struct_m_o_v_atom.html">MOVAtom</a> atom = { <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;root&quot;</span>) };</div>
<div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160; </div>
<div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;    <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#ab18e4f9a31a5496ad9f4de1d16b6f0ac">decryption_key_len</a> != 0 &amp;&amp; mov-&gt;<a class="code" href="struct_m_o_v_context.html#ab18e4f9a31a5496ad9f4de1d16b6f0ac">decryption_key_len</a> != <a class="code" href="aes__ctr_8h.html#a97028740606e579d336c51f7523ce2bf">AES_CTR_KEY_SIZE</a>) {</div>
<div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid decryption key len %d expected %d\n&quot;</span>,</div>
<div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;            mov-&gt;<a class="code" href="struct_m_o_v_context.html#ab18e4f9a31a5496ad9f4de1d16b6f0ac">decryption_key_len</a>, <a class="code" href="aes__ctr_8h.html#a97028740606e579d336c51f7523ce2bf">AES_CTR_KEY_SIZE</a>);</div>
<div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;    }</div>
<div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160; </div>
<div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;    mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;    mov-&gt;<a class="code" href="struct_m_o_v_context.html#af284efeceb46d0cff3cd362600f75c1b">trak_index</a> = -1;</div>
<div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;    <span class="comment">/* .mov and .mp4 aren&#39;t streamable anyway (only progressive download if moov is before mdat) */</span></div>
<div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a0e3c41c290b38923880b9cccb669bf78">seekable</a> &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>)</div>
<div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;        atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> = <a class="code" href="avio_8h.html#a375f057e315dd2273579555128a070fb">avio_size</a>(pb);</div>
<div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;        atom.<a class="code" href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">size</a> = INT64_MAX;</div>
<div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160; </div>
<div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;    <span class="comment">/* check MOV header */</span></div>
<div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160;        <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#aba37f1cabbfbe288215a12e755ca145e">moov_retry</a>)</div>
<div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;            <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, 0, SEEK_SET);</div>
<div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(mov, pb, atom)) &lt; 0) {</div>
<div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error reading header\n&quot;</span>);</div>
<div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;        }</div>
<div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;    } <span class="keywordflow">while</span> ((pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a0e3c41c290b38923880b9cccb669bf78">seekable</a> &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>) &amp;&amp; !mov-&gt;<a class="code" href="struct_m_o_v_context.html#ac3841b58990baf68200adb60cb48864f">found_moov</a> &amp;&amp; !mov-&gt;<a class="code" href="struct_m_o_v_context.html#aba37f1cabbfbe288215a12e755ca145e">moov_retry</a>++);</div>
<div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;    <span class="keywordflow">if</span> (!mov-&gt;<a class="code" href="struct_m_o_v_context.html#ac3841b58990baf68200adb60cb48864f">found_moov</a>) {</div>
<div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;moov atom not found\n&quot;</span>);</div>
<div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;        err = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;    }</div>
<div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;on_parse_exit_offset=%&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb));</div>
<div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160; </div>
<div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;    <span class="keywordflow">if</span> (pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a0e3c41c290b38923880b9cccb669bf78">seekable</a> &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>) {</div>
<div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;        <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a742ba3afbed80b740be134910b0e1579">nb_chapter_tracks</a> &gt; 0 &amp;&amp; !mov-&gt;<a class="code" href="struct_m_o_v_context.html#a61dd7b3fe8491c11bde8f2362b59e699">ignore_chapters</a>)</div>
<div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;            <a class="code" href="mov_8c.html#afa35e848bf7867432834eb832c093880">mov_read_chapters</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;codecpar-&gt;codec_tag == <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;tmcd&quot;</span>)) {</div>
<div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;                <a class="code" href="mov_8c.html#a86d61c4fee83b570039e08f61a5856c9">mov_read_timecode_track</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;codecpar-&gt;codec_tag == <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;rtmd&quot;</span>)) {</div>
<div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;                <a class="code" href="mov_8c.html#a62c8e55b4fb9ec58309866627e9fcfb7">mov_read_rtmd_track</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;            }</div>
<div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;    }</div>
<div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160; </div>
<div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;    <span class="comment">/* copy timecode metadata from tmcd tracks to the related video streams */</span></div>
<div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;        <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a79d9b90ec899fa52b6f3d61d75327530">timecode_track</a> &gt; 0) {</div>
<div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;            <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *tcr;</div>
<div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;            <span class="keywordtype">int</span> tmcd_st_id = -1;</div>
<div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160; </div>
<div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; j++)</div>
<div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[j]-&gt;id == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a79d9b90ec899fa52b6f3d61d75327530">timecode_track</a>)</div>
<div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;                    tmcd_st_id = j;</div>
<div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160; </div>
<div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;            <span class="keywordflow">if</span> (tmcd_st_id &lt; 0 || tmcd_st_id == <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160;            tcr = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[tmcd_st_id]-&gt;metadata, <span class="stringliteral">&quot;timecode&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;            <span class="keywordflow">if</span> (tcr)</div>
<div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;                <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;timecode&quot;</span>, tcr-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>, 0);</div>
<div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160;        }</div>
<div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;    }</div>
<div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;    <a class="code" href="mov_8c.html#addac265d1db363043ab9b96a2e29c697">export_orphan_timecode</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160; </div>
<div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;        <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;        <a class="code" href="mov_8c.html#aa4decda8a7ee9f7473e32f44c4de32f5">fix_timescale</a>(mov, sc);</div>
<div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp;</div>
<div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>   == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaadba4b5a087e2b6bf2acdd1b5aebb988">AV_CODEC_ID_AAC</a>) {</div>
<div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a16ff7a608ffe137c6ca6f0e01ef38a90">skip_samples</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fa83b9c26952c52344d7ee9ff2da2d">start_pad</a>;</div>
<div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;        }</div>
<div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fd9cfc5ffbad16504544eb05a5ac06">nb_frames_for_fps</a> &gt; 0 &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a06fbe82a936c2a6452067d96479e2f30">duration_for_fps</a> &gt; 0)</div>
<div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;            <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>,</div>
<div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;                      sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>*(int64_t)sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fd9cfc5ffbad16504544eb05a5ac06">nb_frames_for_fps</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a06fbe82a936c2a6452067d96479e2f30">duration_for_fps</a>, INT_MAX);</div>
<div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>) {</div>
<div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> &lt;= 0 || st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> &lt;= 0) {</div>
<div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>  = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aabc986e9e943c7499c28e07a43fb54b8">width</a>;</div>
<div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2b3c706f015940d9a254f1e755528dbd">height</a>;</div>
<div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;            }</div>
<div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2d41739284f633efadccd4b43e906937">AV_CODEC_ID_DVD_SUBTITLE</a>) {</div>
<div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;                <span class="keywordflow">if</span> ((err = <a class="code" href="mov_8c.html#a7eb9e91c98e6b81c9ef5a5a07b486665">mov_rewrite_dvd_sub_extradata</a>(st)) &lt; 0)</div>
<div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;            }</div>
<div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;        }</div>
<div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;        <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a0659d458e171e419d9c049bc36e6d22d">handbrake_version</a> &amp;&amp;</div>
<div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;            mov-&gt;<a class="code" href="struct_m_o_v_context.html#a0659d458e171e419d9c049bc36e6d22d">handbrake_version</a> &lt;= 1000000*0 + 1000*10 + 2 &amp;&amp;  <span class="comment">// 0.10.2</span></div>
<div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a>) {</div>
<div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Forcing full parsing for mp3 stream\n&quot;</span>);</div>
<div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">need_parsing</a> = <a class="code" href="avformat_8h.html#afacbc85f23a50771e3801bda0a353d91ac21d15a27dac74ca0730b4dace71d883">AVSTREAM_PARSE_FULL</a>;</div>
<div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;        }</div>
<div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;    }</div>
<div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160; </div>
<div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;    <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a9b9844e5b797d56df8279505b9bd52da">trex_data</a>) {</div>
<div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;            <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;            <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> &gt; 0) {</div>
<div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a98b487c491f258c1bd7484fb7f92dff8">data_size</a> &gt; INT64_MAX / sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> / 8) {</div>
<div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Overflow during bit rate calculation %&quot;</span>PRId64<span class="stringliteral">&quot; * 8 * %d\n&quot;</span>,</div>
<div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;                           sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a98b487c491f258c1bd7484fb7f92dff8">data_size</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>);</div>
<div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160;                    err = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;                }</div>
<div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a5268fcf4ae8ed27edef54f836b926d93">bit_rate</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a98b487c491f258c1bd7484fb7f92dff8">data_size</a> * 8 * sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> / st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>;</div>
<div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;            }</div>
<div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;        }</div>
<div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;    }</div>
<div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160; </div>
<div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;    <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#afe9ffab632659867a7b7aea3aa02a435">use_mfra_for</a> &gt; 0) {</div>
<div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;            <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;            <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a06fbe82a936c2a6452067d96479e2f30">duration_for_fps</a> &gt; 0) {</div>
<div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a98b487c491f258c1bd7484fb7f92dff8">data_size</a> &gt; INT64_MAX / sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> / 8) {</div>
<div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Overflow during bit rate calculation %&quot;</span>PRId64<span class="stringliteral">&quot; * 8 * %d\n&quot;</span>,</div>
<div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;                           sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a98b487c491f258c1bd7484fb7f92dff8">data_size</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>);</div>
<div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;                    err = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160;                }</div>
<div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a5268fcf4ae8ed27edef54f836b926d93">bit_rate</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a98b487c491f258c1bd7484fb7f92dff8">data_size</a> * 8 * sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a> /</div>
<div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;                    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a06fbe82a936c2a6452067d96479e2f30">duration_for_fps</a>;</div>
<div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160;            }</div>
<div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;        }</div>
<div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;    }</div>
<div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160; </div>
<div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mov-&gt;<a class="code" href="struct_m_o_v_context.html#a3b1902305bce41f4b2b0575868d5de7e">bitrates_count</a> &amp;&amp; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;        <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a12b208712b36e949a532931ed9fa4e09">bitrates</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;codecpar-&gt;bit_rate = mov-&gt;<a class="code" href="struct_m_o_v_context.html#a12b208712b36e949a532931ed9fa4e09">bitrates</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;        }</div>
<div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;    }</div>
<div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160; </div>
<div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;    <a class="code" href="libavformat_2internal_8h.html#a3d013588a419f1b93756a70c3a01011b">ff_rfps_calculate</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160; </div>
<div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;        <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160; </div>
<div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;        <span class="keywordflow">switch</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>) {</div>
<div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;            err = <a class="code" href="replaygain_8c.html#a0f4296037d7277af4fccdf448598033c">ff_replaygain_export</a>(st, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata);</div>
<div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;            <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>) {</div>
<div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;                err = <a class="code" href="group__lavf__core.html#ga5c8d715704c153cb645982444063cc2b">av_stream_add_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1">AV_PKT_DATA_DISPLAYMATRIX</a>, (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a>,</div>
<div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;                                              <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) * 9);</div>
<div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;                <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160; </div>
<div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">display_matrix</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;            }</div>
<div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a>) {</div>
<div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;                err = <a class="code" href="group__lavf__core.html#ga5c8d715704c153cb645982444063cc2b">av_stream_add_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97ad87020fae601b684bfb27ee64a457303">AV_PKT_DATA_STEREO3D</a>,</div>
<div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160;                                              (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a>,</div>
<div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;                                              <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a>));</div>
<div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;                <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160; </div>
<div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">stereo3d</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;            }</div>
<div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>) {</div>
<div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;                err = <a class="code" href="group__lavf__core.html#ga5c8d715704c153cb645982444063cc2b">av_stream_add_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a73b56e906c97a1c095e8e615d072637b">AV_PKT_DATA_SPHERICAL</a>,</div>
<div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;                                              (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a>,</div>
<div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;                                              sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a0aaeee6202e3497308c78302ca436c15">spherical_size</a>);</div>
<div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;                <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160; </div>
<div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">spherical</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;            }</div>
<div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>) {</div>
<div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;                err = <a class="code" href="group__lavf__core.html#ga5c8d715704c153cb645982444063cc2b">av_stream_add_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a5fe6406e07337dcb0125bd03fba7ea2c">AV_PKT_DATA_MASTERING_DISPLAY_METADATA</a>,</div>
<div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160;                                              (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>,</div>
<div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;                                              <span class="keyword">sizeof</span>(*sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a>));</div>
<div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;                <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160; </div>
<div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">mastering</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;            }</div>
<div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a>) {</div>
<div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;                err = <a class="code" href="group__lavf__core.html#ga5c8d715704c153cb645982444063cc2b">av_stream_add_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aea49ec141cf7f4b1c56da65d9c2df239">AV_PKT_DATA_CONTENT_LIGHT_LEVEL</a>,</div>
<div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;                                              (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a>,</div>
<div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;                                              sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3c24bd2093cae8d59e6caad974a1f07e">coll_size</a>);</div>
<div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;                <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160; </div>
<div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">coll</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;            }</div>
<div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160;        }</div>
<div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;    }</div>
<div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;    <a class="code" href="libavformat_2internal_8h.html#a9c9bcb658dd00983235fb06232c17f15">ff_configure_buffers_for_index</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>);</div>
<div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160; </div>
<div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;        <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a43b0442b2d759f5a02a968a457c47fa0">moof_offset</a> &lt;= mov-&gt;<a class="code" href="struct_m_o_v_context.html#ab2ccd9853235efc20f6a280b2d38c8eb">fragment</a>.<a class="code" href="struct_m_o_v_fragment.html#abc63a60ccc08b222161f3a50de8d3262">moof_offset</a>)</div>
<div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;            mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a0f2f77f5b374615e6cf039e8d8c6b21e">headers_read</a> = 1;</div>
<div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160; </div>
<div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;    <a class="code" href="mov_8c.html#aa6ec4cc07baa4307df08502c0f850652">mov_read_close</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;}</div>
<div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160; </div>
<div class="line"><a name="l07782"></a><span class="lineno"><a class="line" href="mov_8c.html#aa073cee6495996c4768d526d443bae46"> 7782</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *<a class="code" href="mov_8c.html#aa073cee6495996c4768d526d443bae46">mov_find_next_sample</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> **st)</div>
<div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;{</div>
<div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;    <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;    int64_t best_dts = INT64_MAX;</div>
<div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *avst = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;        <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *msc = avst-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160;        <span class="keywordflow">if</span> (msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a> &amp;&amp; msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> &lt; avst-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>) {</div>
<div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;            <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *current_sample = &amp;avst-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a>];</div>
<div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;            int64_t dts = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(current_sample-&gt;<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a>, <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>, msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">time_scale</a>);</div>
<div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;stream %d, sample %d, dts %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a>, dts);</div>
<div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> || (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;seekable &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>) &amp;&amp; current_sample-&gt;<a class="code" href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">pos</a> &lt; <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos) ||</div>
<div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;                ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;seekable &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>) &amp;&amp;</div>
<div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;                 ((msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a> != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb &amp;&amp; dts &lt; best_dts) || (msc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a> == <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb &amp;&amp; dts != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;                 ((<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(best_dts - dts) &lt;= <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> &amp;&amp; current_sample-&gt;<a class="code" href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">pos</a> &lt; <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos) ||</div>
<div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;                  (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(best_dts - dts) &gt; <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> &amp;&amp; dts &lt; best_dts)))))) {</div>
<div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;                <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = current_sample;</div>
<div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;                best_dts = dts;</div>
<div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;                *st = avst;</div>
<div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;            }</div>
<div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;        }</div>
<div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;    }</div>
<div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;}</div>
<div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160; </div>
<div class="line"><a name="l07808"></a><span class="lineno"><a class="line" href="mov_8c.html#a725b9919409e785a58ba189461fc5f9d"> 7808</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a725b9919409e785a58ba189461fc5f9d">should_retry</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">int</span> error_code) {</div>
<div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;    <span class="keywordflow">if</span> (error_code == <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a> || <a class="code" href="avio_8h.html#a4db704ed3d00a4be632dad1585d01d92">avio_feof</a>(pb))</div>
<div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160; </div>
<div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;}</div>
<div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160; </div>
<div class="line"><a name="l07815"></a><span class="lineno"><a class="line" href="mov_8c.html#a136f47c61498b259c59777b77f34443d"> 7815</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a136f47c61498b259c59777b77f34443d">mov_switch_root</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int64_t target, <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>)</div>
<div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;{</div>
<div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;    <a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160; </div>
<div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &gt;= 0 &amp;&amp; index &lt; mov-&gt;frag_index.nb_items)</div>
<div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;        target = mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a43b0442b2d759f5a02a968a457c47fa0">moof_offset</a>;</div>
<div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, target, SEEK_SET) != target) {</div>
<div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;root atom offset 0x%&quot;</span>PRIx64<span class="stringliteral">&quot;: partial file\n&quot;</span>, target);</div>
<div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;    }</div>
<div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160; </div>
<div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;    mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a> = 0;</div>
<div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;    <span class="keywordflow">if</span> (index &lt; 0 || index &gt;= mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>)</div>
<div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;        <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mov_8c.html#a02308509c67d186a1c12fb1177742443">search_frag_moof_offset</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>, target);</div>
<div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;    <span class="keywordflow">if</span> (index &lt; mov-&gt;frag_index.nb_items &amp;&amp;</div>
<div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;        mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a43b0442b2d759f5a02a968a457c47fa0">moof_offset</a> == target) {</div>
<div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1 &lt; mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>)</div>
<div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;            mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a> = mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1].<a class="code" href="struct_m_o_v_fragment_index_item.html#a43b0442b2d759f5a02a968a457c47fa0">moof_offset</a>;</div>
<div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;        <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a0f2f77f5b374615e6cf039e8d8c6b21e">headers_read</a>)</div>
<div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;        mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a0f2f77f5b374615e6cf039e8d8c6b21e">headers_read</a> = 1;</div>
<div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;    }</div>
<div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160; </div>
<div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;    mov-&gt;<a class="code" href="struct_m_o_v_context.html#a37bf1aecc4029f3336bbb2d824c26b10">found_mdat</a> = 0;</div>
<div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160; </div>
<div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a>(mov, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, (<a class="code" href="struct_m_o_v_atom.html">MOVAtom</a>){ AV_RL32(<span class="stringliteral">&quot;root&quot;</span>), INT64_MAX });</div>
<div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#a4db704ed3d00a4be632dad1585d01d92">avio_feof</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb))</div>
<div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;read fragments, offset 0x%&quot;</span>PRIx64<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb));</div>
<div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160; </div>
<div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;}</div>
<div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160; </div>
<div class="line"><a name="l07851"></a><span class="lineno"><a class="line" href="mov_8c.html#af62abf017e393458646f14b62c6b1d78"> 7851</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#af62abf017e393458646f14b62c6b1d78">mov_change_extradata</a>(<a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;{</div>
<div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *side, *extradata;</div>
<div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;    <span class="keywordtype">int</span> extradata_size;</div>
<div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160; </div>
<div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;    <span class="comment">/* Save the current index. */</span></div>
<div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;    sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a8b06cbfbb58e0428cbda684f62d93a33">last_stsd_index</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abc7de8e47919c37c9806ae785480e654">stsc_index</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a> - 1;</div>
<div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160; </div>
<div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;    <span class="comment">/* Notify the decoder that extradata changed. */</span></div>
<div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;    extradata_size = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">extradata_size</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a8b06cbfbb58e0428cbda684f62d93a33">last_stsd_index</a>];</div>
<div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;    extradata = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">extradata</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a8b06cbfbb58e0428cbda684f62d93a33">last_stsd_index</a>];</div>
<div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;    <span class="keywordflow">if</span> (extradata_size &gt; 0 &amp;&amp; extradata) {</div>
<div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;        side = <a class="code" href="group__lavc__packet.html#gac59f9714ac34774b43b3797c80b06c68">av_packet_new_side_data</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>,</div>
<div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;                                       <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97ad353d4a7841087354593a97bef92841a">AV_PKT_DATA_NEW_EXTRADATA</a>,</div>
<div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;                                       extradata_size);</div>
<div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;        <span class="keywordflow">if</span> (!side)</div>
<div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;        memcpy(side, extradata, extradata_size);</div>
<div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;    }</div>
<div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160; </div>
<div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;}</div>
<div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160; </div>
<div class="line"><a name="l07874"></a><span class="lineno"><a class="line" href="mov_8c.html#abbe2f0687a1e881ccf4dc4abd3aa5623"> 7874</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#abbe2f0687a1e881ccf4dc4abd3aa5623">get_eia608_packet</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;{</div>
<div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;    <span class="keywordtype">int</span> new_size, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160; </div>
<div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &lt;= 8)</div>
<div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;    new_size = ((<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - 8) / 2) * 3;</div>
<div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__packet.html#gadfa708660b85a56749c753124de2da7d">av_new_packet</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, new_size);</div>
<div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160; </div>
<div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;    <a class="code" href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a>(pb, 8);</div>
<div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; new_size; j += 3) {</div>
<div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[j] = 0xFC;</div>
<div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[j+1] = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[j+2] = <a class="code" href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a>(pb);</div>
<div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;    }</div>
<div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160; </div>
<div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;}</div>
<div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160; </div>
<div class="line"><a name="l07895"></a><span class="lineno"><a class="line" href="mov_8c.html#a2c69a70057bfb0efb93d5d5bcfad0316"> 7895</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a2c69a70057bfb0efb93d5d5bcfad0316">mov_read_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;{</div>
<div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;    <a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;    <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;    int64_t current_index;</div>
<div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;    mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160; retry:</div>
<div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;    <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="mov_8c.html#aa073cee6495996c4768d526d443bae46">mov_find_next_sample</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;st);</div>
<div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> || (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a> &amp;&amp; <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos &gt; mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a>)) {</div>
<div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;        <span class="keywordflow">if</span> (!mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a>)</div>
<div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a136f47c61498b259c59777b77f34443d">mov_switch_root</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a>, -1)) &lt; 0)</div>
<div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;        <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;    }</div>
<div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;    sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;    <span class="comment">/* must be done just before reading, to avoid infinite loop on sample */</span></div>
<div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;    current_index = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">current_index</a>;</div>
<div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;    <a class="code" href="mov_8c.html#aec2f9a17ba9aeaa41590651eae11f373">mov_current_sample_inc</a>(sc);</div>
<div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160; </div>
<div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;    <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a>) {</div>
<div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;        <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos, mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a>);</div>
<div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;        <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;size = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;size, (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a> - <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos));</div>
<div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;    }</div>
<div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160; </div>
<div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a492fcecc45dbbd8da51edd0124e9dd30">discard</a> != <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a>) {</div>
<div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;        int64_t ret64 = <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos, SEEK_SET);</div>
<div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;        <span class="keywordflow">if</span> (ret64 != <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos) {</div>
<div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;stream %d, offset 0x%&quot;</span>PRIx64<span class="stringliteral">&quot;: partial file\n&quot;</span>,</div>
<div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;                   sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad90b4e1c29e927f8a600e9b38812b980">ffindex</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos);</div>
<div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a725b9919409e785a58ba189461fc5f9d">should_retry</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, ret64)) {</div>
<div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;                <a class="code" href="mov_8c.html#a2246698fcce3d3279833f046ae216b29">mov_current_sample_dec</a>(sc);</div>
<div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;            }</div>
<div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;        }</div>
<div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160; </div>
<div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a492fcecc45dbbd8da51edd0124e9dd30">discard</a> == <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a> &amp;&amp; !(<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#a23159bdc0b27ccf964072e30d6cc4559">AVINDEX_KEYFRAME</a>)) {</div>
<div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Nonkey frame from stream %d discarded due to AVDISCARD_NONKEY\n&quot;</span>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad90b4e1c29e927f8a600e9b38812b980">ffindex</a>);</div>
<div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;            <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;        }</div>
<div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160; </div>
<div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea844a7eeed17163929fb56ee00eddd1d2">AV_CODEC_ID_EIA_608</a> &amp;&amp; <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;size &gt; 8)</div>
<div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#abbe2f0687a1e881ccf4dc4abd3aa5623">get_eia608_packet</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;size);</div>
<div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avformat_8h.html#a9d2e6f22150d98c36dcc2c6c49318019">av_get_packet</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;size);</div>
<div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a725b9919409e785a58ba189461fc5f9d">should_retry</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">pb</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)) {</div>
<div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;                <a class="code" href="mov_8c.html#a2246698fcce3d3279833f046ae216b29">mov_current_sample_dec</a>(sc);</div>
<div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;            }</div>
<div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;        }</div>
<div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;<span class="preprocessor">#if CONFIG_DV_DEMUXER</span></div>
<div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;        <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a64075c67c537c82e7623f41badbd7788">dv_demux</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a3ec61bf105b4bf5c3a49be5289400324">dv_audio_container</a>) {</div>
<div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;            <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *buf = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a>;</div>
<div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2dv_8c.html#a04765e40701a2d0973bf670eaa9a5f1d">avpriv_dv_produce_packet</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a64075c67c537c82e7623f41badbd7788">dv_demux</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#ab5793d8195cf4789dfb3913b7a693903">pos</a>);</div>
<div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a> = buf;</div>
<div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;            <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2dv_8c.html#a677df650038c9a52d1a405b6b4af302c">avpriv_dv_get_packet</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a64075c67c537c82e7623f41badbd7788">dv_demux</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;        }</div>
<div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ac5f6d29e85c283cb1ecadce3bb7e1c13">has_palette</a>) {</div>
<div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *pal;</div>
<div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160; </div>
<div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;            pal = <a class="code" href="group__lavc__packet.html#gac59f9714ac34774b43b3797c80b06c68">av_packet_new_side_data</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a9b3c18a18a684fcbb1a2cc25cc6869dd">AV_PKT_DATA_PALETTE</a>, <a class="code" href="pixfmt_8h.html#ac28ef17f95d98b118f5ae57d75061278">AVPALETTE_SIZE</a>);</div>
<div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;            <span class="keywordflow">if</span> (!pal) {</div>
<div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">fc</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot append palette to packet\n&quot;</span>);</div>
<div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;                memcpy(pal, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad08ac0d782cb0dc5bfbc4e55b2a33dcb">palette</a>, <a class="code" href="pixfmt_8h.html#ac28ef17f95d98b118f5ae57d75061278">AVPALETTE_SIZE</a>);</div>
<div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ac5f6d29e85c283cb1ecadce3bb7e1c13">has_palette</a> = 0;</div>
<div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;            }</div>
<div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;        }</div>
<div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a> &amp;&amp; !st-&gt;<a class="code" href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">need_parsing</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> &gt; 4) {</div>
<div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mpegaudiodecheader_8h.html#a663ed1681b8427c5f1f93f0d02abbd80">ff_mpa_check_header</a>(<a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>)) &lt; 0)</div>
<div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">need_parsing</a> = <a class="code" href="avformat_8h.html#afacbc85f23a50771e3801bda0a353d91ac21d15a27dac74ca0730b4dace71d883">AVSTREAM_PARSE_FULL</a>;</div>
<div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;        }</div>
<div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;    }</div>
<div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160; </div>
<div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad90b4e1c29e927f8a600e9b38812b980">ffindex</a>;</div>
<div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;timestamp;</div>
<div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#ac4fe20a35d4a1b9014e5f4062fb67b52">AVINDEX_DISCARD_FRAME</a>) {</div>
<div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> |= <a class="code" href="group__lavc__packet.html#ga3d36105d7143b319acef3c86d2beb382">AV_PKT_FLAG_DISCARD</a>;</div>
<div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;    }</div>
<div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#acc82b2ff39c2c55e05f81373b5be246d">ctts_index</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a>) {</div>
<div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> + sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a> + sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#acc82b2ff39c2c55e05f81373b5be246d">ctts_index</a>].<a class="code" href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">duration</a>;</div>
<div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;        <span class="comment">/* update ctts context */</span></div>
<div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a84f9bc5718e8fe14bcc499d093d937ba">ctts_sample</a>++;</div>
<div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#acc82b2ff39c2c55e05f81373b5be246d">ctts_index</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a> &amp;&amp;</div>
<div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#acc82b2ff39c2c55e05f81373b5be246d">ctts_index</a>].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a> == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a84f9bc5718e8fe14bcc499d093d937ba">ctts_sample</a>) {</div>
<div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#acc82b2ff39c2c55e05f81373b5be246d">ctts_index</a>++;</div>
<div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a84f9bc5718e8fe14bcc499d093d937ba">ctts_sample</a> = 0;</div>
<div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;        }</div>
<div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;        int64_t next_dts = (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> &lt; st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">nb_index_entries</a>) ?</div>
<div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a>].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a> : st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>;</div>
<div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160; </div>
<div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (next_dts &gt;= <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>)</div>
<div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> = next_dts - <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;    }</div>
<div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a492fcecc45dbbd8da51edd0124e9dd30">discard</a> == <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a>)</div>
<div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;        <span class="keywordflow">goto</span> retry;</div>
<div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a70e06db8083691e76b6bd57aa6baeedc">sdtp_data</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> &lt;= sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#aaedc8a0649c0419427db24018ea1736d">sdtp_count</a>) {</div>
<div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> sample_flags = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a70e06db8083691e76b6bd57aa6baeedc">sdtp_data</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> - 1];</div>
<div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> sample_is_depended_on = (sample_flags &gt;&gt; 2) &amp; 0x3;</div>
<div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> |= sample_is_depended_on == <a class="code" href="isom_8h.html#af1756d38e6b4ce8bc25625739faf6b49">MOV_SAMPLE_DEPENDENCY_NO</a> ? <a class="code" href="group__lavc__packet.html#ga879a3af0408d39f0ef98010f07952601">AV_PKT_FLAG_DISPOSABLE</a> : 0;</div>
<div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;    }</div>
<div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> |= <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#a23159bdc0b27ccf964072e30d6cc4559">AVINDEX_KEYFRAME</a> ? <a class="code" href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a> : 0;</div>
<div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#ab5793d8195cf4789dfb3913b7a693903">pos</a> = <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>-&gt;pos;</div>
<div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160; </div>
<div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;    <span class="comment">/* Multiple stsd handling. */</span></div>
<div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>) {</div>
<div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160;        <span class="comment">/* Keep track of the stsc index for the given sample, then check</span></div>
<div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;<span class="comment">        * if the stsd index is different from the last used one. */</span></div>
<div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;        sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2d8f29a864609db268219691a9a44885">stsc_sample</a>++;</div>
<div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mov_8c.html#a6e25ef9bd119d662d58a39dcb1521e20">mov_stsc_index_valid</a>(sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abc7de8e47919c37c9806ae785480e654">stsc_index</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a>) &amp;&amp;</div>
<div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;            <a class="code" href="mov_8c.html#ac0a3efbd7340528c889536f97d5d663e">mov_get_stsc_samples</a>(sc, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abc7de8e47919c37c9806ae785480e654">stsc_index</a>) == sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2d8f29a864609db268219691a9a44885">stsc_sample</a>) {</div>
<div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abc7de8e47919c37c9806ae785480e654">stsc_index</a>++;</div>
<div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;            sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2d8f29a864609db268219691a9a44885">stsc_sample</a> = 0;</div>
<div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;        <span class="comment">/* Do not check indexes after a switch. */</span></div>
<div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abc7de8e47919c37c9806ae785480e654">stsc_index</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;                   sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abc7de8e47919c37c9806ae785480e654">stsc_index</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a> - 1 &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a912339297bc6a4db4fa3cea3da29a351">stsd_count</a> &amp;&amp;</div>
<div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;                   sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">stsc_data</a>[sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abc7de8e47919c37c9806ae785480e654">stsc_index</a>].<a class="code" href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">id</a> - 1 != sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a8b06cbfbb58e0428cbda684f62d93a33">last_stsd_index</a>) {</div>
<div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#af62abf017e393458646f14b62c6b1d78">mov_change_extradata</a>(sc, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;        }</div>
<div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;    }</div>
<div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160; </div>
<div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;    <span class="keywordflow">if</span> (mov-&gt;<a class="code" href="struct_m_o_v_context.html#a2f91b26ecc353d5d75da4d8af37c1b3e">aax_mode</a>)</div>
<div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;        <a class="code" href="mov_8c.html#a20e97e5cf57f2e2909ccfb8e5fec6ab4">aax_filter</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>, mov);</div>
<div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160; </div>
<div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a580a964ac49d40a759d85c461b0265da">cenc_filter</a>(mov, st, sc, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, current_index);</div>
<div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;    }</div>
<div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160; </div>
<div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;}</div>
<div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160; </div>
<div class="line"><a name="l08041"></a><span class="lineno"><a class="line" href="mov_8c.html#a65cb20db2d770d4e897f5c0d78621450"> 8041</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a65cb20db2d770d4e897f5c0d78621450">mov_seek_fragment</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, int64_t timestamp)</div>
<div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;{</div>
<div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;    <a class="code" href="struct_m_o_v_context.html">MOVContext</a> *mov = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160; </div>
<div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;    <span class="keywordflow">if</span> (!mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#ab098ac25a51b01eca901b8a88fdd16df">complete</a>)</div>
<div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160; </div>
<div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;    <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="mov_8c.html#ad2645191c02d305980033c92e8f402d1">search_frag_timestamp</a>(&amp;mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>, st, timestamp);</div>
<div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; 0)</div>
<div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;        <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0;</div>
<div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;    <span class="keywordflow">if</span> (!mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].<a class="code" href="struct_m_o_v_fragment_index_item.html#a0f2f77f5b374615e6cf039e8d8c6b21e">headers_read</a>)</div>
<div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mov_8c.html#a136f47c61498b259c59777b77f34443d">mov_switch_root</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, -1, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1 &lt; mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">nb_items</a>)</div>
<div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;        mov-&gt;<a class="code" href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">next_root_atom</a> = mov-&gt;<a class="code" href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">frag_index</a>.<a class="code" href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">item</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1].<a class="code" href="struct_m_o_v_fragment_index_item.html#a43b0442b2d759f5a02a968a457c47fa0">moof_offset</a>;</div>
<div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160; </div>
<div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;}</div>
<div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160; </div>
<div class="line"><a name="l08060"></a><span class="lineno"><a class="line" href="mov_8c.html#a26e16731064783ad26f3bc40120a5d5d"> 8060</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a26e16731064783ad26f3bc40120a5d5d">mov_seek_stream</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, int64_t timestamp, <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>)</div>
<div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;{</div>
<div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;    <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>, time_sample, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160; </div>
<div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;    <span class="comment">// Here we consider timestamp to be PTS, hence try to offset it so that we</span></div>
<div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;    <span class="comment">// can search over the DTS timeline.</span></div>
<div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;    timestamp -= (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">min_corrected_pts</a> + sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">dts_shift</a>);</div>
<div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160; </div>
<div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mov_8c.html#a65cb20db2d770d4e897f5c0d78621450">mov_seek_fragment</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, timestamp);</div>
<div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160; </div>
<div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;    <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="group__lavf__misc.html#gac4cabc0d681c34b2e2c6a87a55877f0d">av_index_search_timestamp</a>(st, timestamp, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;stream %d, timestamp %&quot;</span>PRId64<span class="stringliteral">&quot;, sample %d\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, timestamp, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>);</div>
<div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;    <span class="keywordflow">if</span> (sample &lt; 0 &amp;&amp; st-&gt;internal-&gt;nb_index_entries &amp;&amp; timestamp &lt; st-&gt;internal-&gt;index_entries[0].timestamp)</div>
<div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;        <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = 0;</div>
<div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> &lt; 0) <span class="comment">/* not sure what to do */</span></div>
<div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;    <a class="code" href="mov_8c.html#a522f7d3c4c4c2b9362c6ee9f68bb605a">mov_current_sample_set</a>(sc, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>);</div>
<div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;stream %d, found sample %d\n&quot;</span>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a>);</div>
<div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;    <span class="comment">/* adjust ctts index */</span></div>
<div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>) {</div>
<div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;        time_sample = 0;</div>
<div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">ctts_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160;            <span class="keywordtype">int</span> next = time_sample + sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">ctts_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">count</a>;</div>
<div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160;            <span class="keywordflow">if</span> (next &gt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a>) {</div>
<div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#acc82b2ff39c2c55e05f81373b5be246d">ctts_index</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a84f9bc5718e8fe14bcc499d093d937ba">ctts_sample</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> - time_sample;</div>
<div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;            }</div>
<div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;            time_sample = next;</div>
<div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;        }</div>
<div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;    }</div>
<div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160; </div>
<div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;    <span class="comment">/* adjust stsd index */</span></div>
<div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">chunk_count</a>) {</div>
<div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;        time_sample = 0;</div>
<div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">stsc_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;            int64_t next = time_sample + <a class="code" href="mov_8c.html#ac0a3efbd7340528c889536f97d5d663e">mov_get_stsc_samples</a>(sc, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;            <span class="keywordflow">if</span> (next &gt; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a>) {</div>
<div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#abc7de8e47919c37c9806ae785480e654">stsc_index</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;                sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a2d8f29a864609db268219691a9a44885">stsc_sample</a> = sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> - time_sample;</div>
<div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;            }</div>
<div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;            <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(next == (<span class="keywordtype">int</span>)next);</div>
<div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;            time_sample = next;</div>
<div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;        }</div>
<div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160;    }</div>
<div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160; </div>
<div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;}</div>
<div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160; </div>
<div class="line"><a name="l08114"></a><span class="lineno"><a class="line" href="mov_8c.html#a0a8c3d0705e7e544c46f780b33d78cd6"> 8114</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mov_8c.html#a0a8c3d0705e7e544c46f780b33d78cd6">mov_read_seek</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> stream_index, int64_t sample_time, <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>)</div>
<div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;{</div>
<div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;    <a class="code" href="struct_m_o_v_context.html">MOVContext</a> *<a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160; </div>
<div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;    <span class="keywordflow">if</span> (stream_index &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams)</div>
<div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160; </div>
<div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;    st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[stream_index];</div>
<div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;    <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="mov_8c.html#a26e16731064783ad26f3bc40120a5d5d">mov_seek_stream</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, sample_time, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> &lt; 0)</div>
<div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160; </div>
<div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a>-&gt;seek_individually) {</div>
<div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;        <span class="comment">/* adjust seek timestamp to found sample timestamp */</span></div>
<div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;        int64_t seek_timestamp = st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">index_entries</a>[<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>].<a class="code" href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">timestamp</a>;</div>
<div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160; </div>
<div class="line"><a name="l08133"></a><span class="lineno"> 8133</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;            int64_t timestamp;</div>
<div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;            <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;priv_data;</div>
<div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;            st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">internal</a>-&gt;<a class="code" href="struct_a_v_stream_internal.html#a16ff7a608ffe137c6ca6f0e01ef38a90">skip_samples</a> = (sample_time &lt;= 0) ? sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a56fa83b9c26952c52344d7ee9ff2da2d">start_pad</a> : 0;</div>
<div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160; </div>
<div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;            <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (stream_index == <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160; </div>
<div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;            timestamp = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(seek_timestamp, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[stream_index]-&gt;time_base, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;            <a class="code" href="mov_8c.html#a26e16731064783ad26f3bc40120a5d5d">mov_seek_stream</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, timestamp, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;        }</div>
<div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;            <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;            st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;            sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;            <a class="code" href="mov_8c.html#a522f7d3c4c4c2b9362c6ee9f68bb605a">mov_current_sample_set</a>(sc, 0);</div>
<div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;        }</div>
<div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;        <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;            <a class="code" href="struct_m_o_v_stream_context.html">MOVStreamContext</a> *sc;</div>
<div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;            <a class="code" href="struct_a_v_index_entry.html">AVIndexEntry</a> *entry = <a class="code" href="mov_8c.html#aa073cee6495996c4768d526d443bae46">mov_find_next_sample</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;st);</div>
<div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;            <span class="keywordflow">if</span> (!entry)</div>
<div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;            sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#ad90b4e1c29e927f8a600e9b38812b980">ffindex</a> == stream_index &amp;&amp; sc-&gt;<a class="code" href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">current_sample</a> == <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>)</div>
<div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;            <a class="code" href="mov_8c.html#aec2f9a17ba9aeaa41590651eae11f373">mov_current_sample_inc</a>(sc);</div>
<div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;        }</div>
<div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;    }</div>
<div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;}</div>
<div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160; </div>
<div class="line"><a name="l08166"></a><span class="lineno"><a class="line" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261"> 8166</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(MOVContext, x)</span></div>
<div class="line"><a name="l08167"></a><span class="lineno"><a class="line" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d"> 8167</a></span>&#160;<span class="preprocessor">#define FLAGS AV_OPT_FLAG_VIDEO_PARAM | AV_OPT_FLAG_DECODING_PARAM</span></div>
<div class="line"><a name="l08168"></a><span class="lineno"><a class="line" href="mov_8c.html#afe18ec2f66d459a846bf7a202d728eca"> 8168</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="mov_8c.html#afe18ec2f66d459a846bf7a202d728eca">mov_options</a>[] = {</div>
<div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;    {<span class="stringliteral">&quot;use_absolute_path&quot;</span>,</div>
<div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;        <span class="stringliteral">&quot;allow using absolute path when opening alias, this is a possible security issue&quot;</span>,</div>
<div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;        <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(use_absolute_path), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, {.i64 = 0},</div>
<div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;        0, 1, <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>},</div>
<div class="line"><a name="l08173"></a><span class="lineno"> 8173</span>&#160;    {<span class="stringliteral">&quot;seek_streams_individually&quot;</span>,</div>
<div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;        <span class="stringliteral">&quot;Seek each stream individually to the closest point&quot;</span>,</div>
<div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160;        <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(seek_individually), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, { .i64 = 1 },</div>
<div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;        0, 1, <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>},</div>
<div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;    {<span class="stringliteral">&quot;ignore_editlist&quot;</span>, <span class="stringliteral">&quot;Ignore the edit list atom.&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(ignore_editlist), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, {.i64 = 0},</div>
<div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;        0, 1, <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>},</div>
<div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;    {<span class="stringliteral">&quot;advanced_editlist&quot;</span>,</div>
<div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;        <span class="stringliteral">&quot;Modify the AVIndex according to the editlists. Use this option to decode in the order specified by the edits.&quot;</span>,</div>
<div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;        <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(advanced_editlist), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, {.i64 = 1},</div>
<div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;        0, 1, <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>},</div>
<div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160;    {<span class="stringliteral">&quot;ignore_chapters&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(ignore_chapters), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, {.i64 = 0},</div>
<div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;        0, 1, <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>},</div>
<div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;    {<span class="stringliteral">&quot;use_mfra_for&quot;</span>,</div>
<div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;        <span class="stringliteral">&quot;use mfra for fragment timestamps&quot;</span>,</div>
<div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;        <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(use_mfra_for), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, {.i64 = <a class="code" href="isom_8h.html#af422027b00f117bba986137e8c293afd">FF_MOV_FLAG_MFRA_AUTO</a>},</div>
<div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;        -1, <a class="code" href="isom_8h.html#a1131615c6cef3f78bb03bbdc9847e8ae">FF_MOV_FLAG_MFRA_PTS</a>, <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>,</div>
<div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;        <span class="stringliteral">&quot;use_mfra_for&quot;</span>},</div>
<div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;    {<span class="stringliteral">&quot;auto&quot;</span>, <span class="stringliteral">&quot;auto&quot;</span>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, {.i64 = <a class="code" href="isom_8h.html#af422027b00f117bba986137e8c293afd">FF_MOV_FLAG_MFRA_AUTO</a>}, 0, 0,</div>
<div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;        <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;use_mfra_for&quot;</span> },</div>
<div class="line"><a name="l08192"></a><span class="lineno"> 8192</span>&#160;    {<span class="stringliteral">&quot;dts&quot;</span>, <span class="stringliteral">&quot;dts&quot;</span>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, {.i64 = <a class="code" href="isom_8h.html#a39eee8b7a932ff038719d3cf928858c4">FF_MOV_FLAG_MFRA_DTS</a>}, 0, 0,</div>
<div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;        <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;use_mfra_for&quot;</span> },</div>
<div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;    {<span class="stringliteral">&quot;pts&quot;</span>, <span class="stringliteral">&quot;pts&quot;</span>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, {.i64 = <a class="code" href="isom_8h.html#a1131615c6cef3f78bb03bbdc9847e8ae">FF_MOV_FLAG_MFRA_PTS</a>}, 0, 0,</div>
<div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;        <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a>, <span class="stringliteral">&quot;use_mfra_for&quot;</span> },</div>
<div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;    { <span class="stringliteral">&quot;export_all&quot;</span>, <span class="stringliteral">&quot;Export unrecognized metadata entries&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(export_all),</div>
<div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;        <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, { .i64 = 0 }, 0, 1, .flags = <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;    { <span class="stringliteral">&quot;export_xmp&quot;</span>, <span class="stringliteral">&quot;Export full XMP metadata&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(export_xmp),</div>
<div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;        <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, { .i64 = 0 }, 0, 1, .flags = <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;    { <span class="stringliteral">&quot;activation_bytes&quot;</span>, <span class="stringliteral">&quot;Secret bytes for Audible AAX files&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(activation_bytes),</div>
<div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;        <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a2689966edbe494482dfdfaa4efdf95d3">AV_OPT_TYPE_BINARY</a>, .flags = <a class="code" href="opt_8h.html#aad820197915e73441f76f5e0c384d78a">AV_OPT_FLAG_DECODING_PARAM</a> },</div>
<div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;    { <span class="stringliteral">&quot;audible_key&quot;</span>, <span class="stringliteral">&quot;AES-128 Key for Audible AAXC files&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(audible_key),</div>
<div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;        <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a2689966edbe494482dfdfaa4efdf95d3">AV_OPT_TYPE_BINARY</a>, .flags = <a class="code" href="opt_8h.html#aad820197915e73441f76f5e0c384d78a">AV_OPT_FLAG_DECODING_PARAM</a> },</div>
<div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;    { <span class="stringliteral">&quot;audible_iv&quot;</span>, <span class="stringliteral">&quot;AES-128 IV for Audible AAXC files&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(audible_iv),</div>
<div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;        <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a2689966edbe494482dfdfaa4efdf95d3">AV_OPT_TYPE_BINARY</a>, .flags = <a class="code" href="opt_8h.html#aad820197915e73441f76f5e0c384d78a">AV_OPT_FLAG_DECODING_PARAM</a> },</div>
<div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;    { <span class="stringliteral">&quot;audible_fixed_key&quot;</span>, <span class="comment">// extracted from libAAX_SDK.so and AAXSDKWin.dll files!</span></div>
<div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;        <span class="stringliteral">&quot;Fixed key used for handling Audible AAX files&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(audible_fixed_key),</div>
<div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;        <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a2689966edbe494482dfdfaa4efdf95d3">AV_OPT_TYPE_BINARY</a>, {.str=<span class="stringliteral">&quot;77214d4b196a87cd520045fd20a51d67&quot;</span>},</div>
<div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160;        .flags = <a class="code" href="opt_8h.html#aad820197915e73441f76f5e0c384d78a">AV_OPT_FLAG_DECODING_PARAM</a> },</div>
<div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;    { <span class="stringliteral">&quot;decryption_key&quot;</span>, <span class="stringliteral">&quot;The media decryption key (hex)&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(decryption_key), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a2689966edbe494482dfdfaa4efdf95d3">AV_OPT_TYPE_BINARY</a>, .flags = <a class="code" href="opt_8h.html#aad820197915e73441f76f5e0c384d78a">AV_OPT_FLAG_DECODING_PARAM</a> },</div>
<div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;    { <span class="stringliteral">&quot;enable_drefs&quot;</span>, <span class="stringliteral">&quot;Enable external track support.&quot;</span>, <a class="code" href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(enable_drefs), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>,</div>
<div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;        {.i64 = 0}, 0, 1, <a class="code" href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160; </div>
<div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;};</div>
<div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160; </div>
<div class="line"><a name="l08217"></a><span class="lineno"><a class="line" href="mov_8c.html#a5871790a7a5132bae72427ec03bd37ac"> 8217</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <a class="code" href="mov_8c.html#a5871790a7a5132bae72427ec03bd37ac">mov_class</a> = {</div>
<div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;    .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a> = <span class="stringliteral">&quot;mov,mp4,m4a,3gp,3g2,mj2&quot;</span>,</div>
<div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;    .item_name  = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;    .option     = <a class="code" href="mov_8c.html#afe18ec2f66d459a846bf7a202d728eca">mov_options</a>,</div>
<div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160;    .version    = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;};</div>
<div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160; </div>
<div class="line"><a name="l08224"></a><span class="lineno"><a class="line" href="mov_8c.html#a31dd0edb055c69d828c83b97365bfd70"> 8224</a></span>&#160;<a class="code" href="struct_a_v_input_format.html">AVInputFormat</a> <a class="code" href="mov_8c.html#a31dd0edb055c69d828c83b97365bfd70">ff_mov_demuxer</a> = {</div>
<div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;    .<a class="code" href="struct_a_v_input_format.html#a850db3eb225e22b64f3304d72134ca0c">name</a>           = <span class="stringliteral">&quot;mov,mp4,m4a,3gp,3g2,mj2&quot;</span>,</div>
<div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;QuickTime / MOV&quot;</span>),</div>
<div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;    .priv_class     = &amp;<a class="code" href="mov_8c.html#a5871790a7a5132bae72427ec03bd37ac">mov_class</a>,</div>
<div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="isom_8h.html#a94336d21bc69d101fe94c04cd8499960">MOVContext</a>),</div>
<div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;    .extensions     = <span class="stringliteral">&quot;mov,mp4,m4a,3gp,3g2,mj2,psp,m4b,ism,ismv,isma,f4v&quot;</span>,</div>
<div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;    .<a class="code" href="libavformat_2jvdec_8c.html#a4517a6dcebdb863ba6840921970a41ac">read_probe</a>     = <a class="code" href="mov_8c.html#aeae6f57f9f52a20bb3e556152b89f24a">mov_probe</a>,</div>
<div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;    .<a class="code" href="ffv1dec_8c.html#a0b9c6775a65106fc8bf33cd388ec715c">read_header</a>    = <a class="code" href="mov_8c.html#a4896c6e7b4b2e70c75e09e61fe39e02a">mov_read_header</a>,</div>
<div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;    .<a class="code" href="avio__reading_8c.html#a3a86bff38e7cb9093d0a32316b73b29c">read_packet</a>    = <a class="code" href="mov_8c.html#a2c69a70057bfb0efb93d5d5bcfad0316">mov_read_packet</a>,</div>
<div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;    .<a class="code" href="libcdio_8c.html#a3469cc7152b70da4356d17e698a55850">read_close</a>     = <a class="code" href="mov_8c.html#aa6ec4cc07baa4307df08502c0f850652">mov_read_close</a>,</div>
<div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;    .<a class="code" href="libcdio_8c.html#aaf64d43f28f7aaf168968366472d52d7">read_seek</a>      = <a class="code" href="mov_8c.html#a0a8c3d0705e7e544c46f780b33d78cd6">mov_read_seek</a>,</div>
<div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;    .<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>          = <a class="code" href="avformat_8h.html#a6286e2977286a22b622cb51cf4106541">AVFMT_NO_BYTE_SEEK</a> | <a class="code" href="avformat_8h.html#ab87b74d5eff79c28e7756f893d57c4d7">AVFMT_SEEK_TO_PTS</a>,</div>
<div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S16LE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00308">codec_id.h:308</a></div></div>
<div class="ttc" id="amov_8c_html_abcf4c160935690f8b194d59dc5ded9bf"><div class="ttname"><a href="mov_8c.html#abcf4c160935690f8b194d59dc5ded9bf">add_ctts_entry</a></div><div class="ttdeci">static int64_t add_ctts_entry(MOVStts **ctts_data, unsigned int *ctts_count, unsigned int *allocated_size, int count, int duration)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03350">mov.c:3350</a></div></div>
<div class="ttc" id="amov_8c_html_a48655c15480a3c7c73cdcc06e60596df"><div class="ttname"><a href="mov_8c.html#a48655c15480a3c7c73cdcc06e60596df">mov_read_chpl</a></div><div class="ttdeci">static int mov_read_chpl(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00534">mov.c:534</a></div></div>
<div class="ttc" id="amov_8c_html_ad9ac030127c344e72a633bb661f0878e"><div class="ttname"><a href="mov_8c.html#ad9ac030127c344e72a633bb661f0878e">mov_read_frma</a></div><div class="ttdeci">static int mov_read_frma(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05906">mov.c:5906</a></div></div>
<div class="ttc" id="amov_8c_html_a5d51e97997852ba277ee4c4673053770"><div class="ttname"><a href="mov_8c.html#a5d51e97997852ba277ee4c4673053770">mov_read_meta</a></div><div class="ttdeci">static int mov_read_meta(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04491">mov.c:4491</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea844a7eeed17163929fb56ee00eddd1d2"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea844a7eeed17163929fb56ee00eddd1d2">AV_CODEC_ID_EIA_608</a></div><div class="ttdeci">@ AV_CODEC_ID_EIA_608</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00528">codec_id.h:528</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceacf3d90862beaeae4505a33d4ac26e669"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceacf3d90862beaeae4505a33d4ac26e669">AV_CODEC_ID_MACE6</a></div><div class="ttdeci">@ AV_CODEC_ID_MACE6</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00428">codec_id.h:428</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a50da751e64fe3e638addf66abf6fcb7c"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a50da751e64fe3e638addf66abf6fcb7c">MOVStreamContext::display_matrix</a></div><div class="ttdeci">int32_t * display_matrix</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00227">isom.h:227</a></div></div>
<div class="ttc" id="astruct_a_v_input_format_html"><div class="ttname"><a href="struct_a_v_input_format.html">AVInputFormat</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00638">avformat.h:638</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_aa6ef004d10669ab4ee062367a014ea33"><div class="ttname"><a href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_ENABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00085">internal.h:85</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html_a3f66119c2b9062b8f01357fe5634ee51"><div class="ttname"><a href="struct_m_o_v_fragment.html#a3f66119c2b9062b8f01357fe5634ee51">MOVFragment::duration</a></div><div class="ttdeci">unsigned duration</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00096">isom.h:96</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_ac5f6d29e85c283cb1ecadce3bb7e1c13"><div class="ttname"><a href="struct_m_o_v_stream_context.html#ac5f6d29e85c283cb1ecadce3bb7e1c13">MOVStreamContext::has_palette</a></div><div class="ttdeci">int has_palette</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00209">isom.h:209</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a></div><div class="ttdeci">@ AVMEDIA_TYPE_SUBTITLE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00204">avutil.h:204</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a47c3a35ba8dece0168d84181f224b55d"><div class="ttname"><a href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a></div><div class="ttdeci">static void skip_bits_long(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00291">get_bits.h:291</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_ae4d1eaaee02fc6c4672f59dcf7255286"><div class="ttname"><a href="intreadwrite_8h.html#ae4d1eaaee02fc6c4672f59dcf7255286">AV_WB16</a></div><div class="ttdeci">#define AV_WB16(p, val)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00245">intreadwrite.h:245</a></div></div>
<div class="ttc" id="aisom_8h_html_ab592da0893ff59ab382a3a4e38e51c6c"><div class="ttname"><a href="isom_8h.html#ab592da0893ff59ab382a3a4e38e51c6c">MOV_TFHD_DEFAULT_FLAGS</a></div><div class="ttdeci">#define MOV_TFHD_DEFAULT_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00318">isom.h:318</a></div></div>
<div class="ttc" id="acommon_8h_html_ac6a994fe28410a8d14f70f0992db4f42"><div class="ttname"><a href="common_8h.html#ac6a994fe28410a8d14f70f0992db4f42">PUT_UTF8</a></div><div class="ttdeci">#define PUT_UTF8(val, tmp, PUT_BYTE)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00479">common.h:479</a></div></div>
<div class="ttc" id="atimecode_8h_html_a60186b13997e64a4aca71ff641634f9d"><div class="ttname"><a href="timecode_8h.html#a60186b13997e64a4aca71ff641634f9d">AV_TIMECODE_STR_SIZE</a></div><div class="ttdeci">#define AV_TIMECODE_STR_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00033">timecode.h:33</a></div></div>
<div class="ttc" id="agroup__lavu__aes_html_ga54975ad71f0eab2287e3e94d561d0aa4"><div class="ttname"><a href="group__lavu__aes.html#ga54975ad71f0eab2287e3e94d561d0aa4">av_aes_init</a></div><div class="ttdeci">int av_aes_init(AVAES *a, const uint8_t *key, int key_bits, int decrypt)</div><div class="ttdef"><b>Definition:</b> <a href="aes_8c_source.html#l00195">aes.c:195</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea2e3b263e55bf4774f5a3a1d7b0261df4"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2e3b263e55bf4774f5a3a1d7b0261df4">AV_CODEC_ID_PCM_F32BE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_F32BE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00328">codec_id.h:328</a></div></div>
<div class="ttc" id="agroup__lavu__video__spherical_html_ga689eeb8cf9b453f3619f3cf626e03a08"><div class="ttname"><a href="group__lavu__video__spherical.html#ga689eeb8cf9b453f3619f3cf626e03a08">AVSphericalProjection</a></div><div class="ttdeci">AVSphericalProjection</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00051">spherical.h:51</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea6f63c9df5fee26f639f330cd99554467"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6f63c9df5fee26f639f330cd99554467">AV_CODEC_ID_ADPCM_MS</a></div><div class="ttdeci">@ AV_CODEC_ID_ADPCM_MS</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00353">codec_id.h:353</a></div></div>
<div class="ttc" id="amov_8c_html_a0f7a87012ac97039366eefa506d2e6a7"><div class="ttname"><a href="mov_8c.html#a0f7a87012ac97039366eefa506d2e6a7">mov_read_dops</a></div><div class="ttdeci">static int mov_read_dops(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06734">mov.c:6734</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaa238badb45f42286d03179686f2a6768"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa238badb45f42286d03179686f2a6768">AV_CODEC_ID_ADPCM_IMA_QT</a></div><div class="ttdeci">@ AV_CODEC_ID_ADPCM_IMA_QT</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00347">codec_id.h:347</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_a885c541fc4110c87c0153e169504290f"><div class="ttname"><a href="libavformat_2internal_8h.html#a885c541fc4110c87c0153e169504290f">ff_rfps_add_frame</a></div><div class="ttdeci">int ff_rfps_add_frame(AVFormatContext *ic, AVStream *st, int64_t dts)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l03294">utils.c:3294</a></div></div>
<div class="ttc" id="aavformat_8h_html_a6286e2977286a22b622cb51cf4106541"><div class="ttname"><a href="avformat_8h.html#a6286e2977286a22b622cb51cf4106541">AVFMT_NO_BYTE_SEEK</a></div><div class="ttdeci">#define AVFMT_NO_BYTE_SEEK</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00470">avformat.h:470</a></div></div>
<div class="ttc" id="astruct_a_v_spherical_mapping_html_a5576008bdc224db049b1795b3c95fe16"><div class="ttname"><a href="struct_a_v_spherical_mapping.html#a5576008bdc224db049b1795b3c95fe16">AVSphericalMapping::projection</a></div><div class="ttdeci">enum AVSphericalProjection projection</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00226">spherical.h:86</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0">AV_CODEC_ID_AC3</a></div><div class="ttdeci">@ AV_CODEC_ID_AC3</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00421">codec_id.h:421</a></div></div>
<div class="ttc" id="aisom_8h_html_aa510f07cb3f7e38a15b041094c83c59e"><div class="ttname"><a href="isom_8h.html#aa510f07cb3f7e38a15b041094c83c59e">MOV_TRUN_SAMPLE_FLAGS</a></div><div class="ttdeci">#define MOV_TRUN_SAMPLE_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00326">isom.h:326</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a41da85e926f699ab2c6018bcc20e7062"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a41da85e926f699ab2c6018bcc20e7062">MOVStreamContext::chunk_offsets</a></div><div class="ttdeci">int64_t * chunk_offsets</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00164">isom.h:164</a></div></div>
<div class="ttc" id="avf__curves_8c_html_a33ac7b8ce37a3a60855883424fcf8b62"><div class="ttname"><a href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a></div><div class="ttdeci">const char * r</div><div class="ttdef"><b>Definition:</b> <a href="vf__curves_8c_source.html#l00114">vf_curves.c:114</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_gadcb0fd3e507d9b58fe78f61f8ad39827"><div class="ttname"><a href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a></div><div class="ttdeci">AVStream * avformat_new_stream(AVFormatContext *s, const AVCodec *c)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04453">utils.c:4453</a></div></div>
<div class="ttc" id="astruct_m_o_v_dref_html_a6d78d6ec25071906a615de754dd0aafe"><div class="ttname"><a href="struct_m_o_v_dref.html#a6d78d6ec25071906a615de754dd0aafe">MOVDref::nlvl_from</a></div><div class="ttdeci">int16_t nlvl_from</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00079">isom.h:79</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_html"><div class="ttname"><a href="struct_a_v_dictionary.html">AVDictionary</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00030">dict.c:30</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a4e3b1b6e6091cd1f9459511f5941f23c"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a4e3b1b6e6091cd1f9459511f5941f23c">MOVStreamContext::stereo3d</a></div><div class="ttdeci">AVStereo3D * stereo3d</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00228">isom.h:228</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a169d8611767a02e5713fb22706090c24"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a169d8611767a02e5713fb22706090c24">MOVStreamContext::extradata</a></div><div class="ttdeci">uint8_t ** extradata</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00221">isom.h:221</a></div></div>
<div class="ttc" id="aisom_8h_html_a24dc26a590e0c56694c84fc0618c7e9f"><div class="ttname"><a href="isom_8h.html#a24dc26a590e0c56694c84fc0618c7e9f">MOV_TKHD_FLAG_ENABLED</a></div><div class="ttdeci">#define MOV_TKHD_FLAG_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00339">isom.h:339</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_html"><div class="ttname"><a href="struct_m_o_v_fragment_index.html">MOVFragmentIndex</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00145">isom.h:145</a></div></div>
<div class="ttc" id="amov_8c_html_a5871790a7a5132bae72427ec03bd37ac"><div class="ttname"><a href="mov_8c.html#a5871790a7a5132bae72427ec03bd37ac">mov_class</a></div><div class="ttdeci">static const AVClass mov_class</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l08217">mov.c:8217</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_ae829eaf74d06f3a6cb1b9ad07560fb92"><div class="ttname"><a href="libavformat_2internal_8h.html#ae829eaf74d06f3a6cb1b9ad07560fb92">ff_get_extradata</a></div><div class="ttdeci">int ff_get_extradata(AVFormatContext *s, AVCodecParameters *par, AVIOContext *pb, int size)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l03278">utils.c:3278</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a688a6585cfb3254d3806a68da8515c88"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a688a6585cfb3254d3806a68da8515c88">MOVStreamContext::current_index</a></div><div class="ttdeci">int64_t current_index</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00193">isom.h:193</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="astruct_a_v_content_light_metadata_html_a9d2d7743a599c9b2f2a07a9504625b92"><div class="ttname"><a href="struct_a_v_content_light_metadata.html#a9d2d7743a599c9b2f2a07a9504625b92">AVContentLightMetadata::MaxCLL</a></div><div class="ttdeci">unsigned MaxCLL</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00102">mastering_display_metadata.h:102</a></div></div>
<div class="ttc" id="amov_8c_html_aef4f0a1ca31729f9a3b06a93f1e2eb09"><div class="ttname"><a href="mov_8c.html#aef4f0a1ca31729f9a3b06a93f1e2eb09">mov_read_targa_y216</a></div><div class="ttdeci">static int mov_read_targa_y216(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01755">mov.c:1755</a></div></div>
<div class="ttc" id="acommon_8h_html_a09a0bb7d8fcfac416de7a5fe7fd8b0f1"><div class="ttname"><a href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a></div><div class="ttdeci">#define FFSWAP(type, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00099">common.h:99</a></div></div>
<div class="ttc" id="amov_8c_html_ad58579b0759ca14e3a687d0761cf6c37"><div class="ttname"><a href="mov_8c.html#ad58579b0759ca14e3a687d0761cf6c37">mov_read_moof</a></div><div class="ttdeci">static int mov_read_moof(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01394">mov.c:1394</a></div></div>
<div class="ttc" id="avf__geq_8c_html_afc61272a374024bcd86d8859783d3d52"><div class="ttname"><a href="vf__geq_8c.html#afc61272a374024bcd86d8859783d3d52">cb</a></div><div class="ttdeci">static double cb(void *priv, double x, double y)</div><div class="ttdef"><b>Definition:</b> <a href="vf__geq_8c_source.html#l00215">vf_geq.c:215</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_adf65f223a410f72c95ca4af64a8fb1c9"><div class="ttname"><a href="struct_m_o_v_stream_context.html#adf65f223a410f72c95ca4af64a8fb1c9">MOVStreamContext::stps_data</a></div><div class="ttdeci">unsigned * stps_data</div><div class="ttdoc">partial sync sample for mpeg-2 open gop</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00177">isom.h:177</a></div></div>
<div class="ttc" id="aavformat_8h_html_a2d5c3fab0686ccb9f517dec49048d421"><div class="ttname"><a href="avformat_8h.html#a2d5c3fab0686ccb9f517dec49048d421">AVFMT_FLAG_IGNIDX</a></div><div class="ttdeci">#define AVFMT_FLAG_IGNIDX</div><div class="ttdoc">Ignore index.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01356">avformat.h:1356</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a2e882ada0df945d38af824a080443d62"><div class="ttname"><a href="struct_m_o_v_context.html#a2e882ada0df945d38af824a080443d62">MOVContext::fc</a></div><div class="ttdeci">AVFormatContext * fc</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00248">isom.h:248</a></div></div>
<div class="ttc" id="agroup__lavu__string_html_ga47e14424edfb96d3f6bf0fca96a76fe5"><div class="ttname"><a href="group__lavu__string.html#ga47e14424edfb96d3f6bf0fca96a76fe5">av_stristr</a></div><div class="ttdeci">char * av_stristr(const char *s1, const char *s2)</div><div class="ttdef"><b>Definition:</b> <a href="avstring_8c_source.html#l00056">avstring.c:56</a></div></div>
<div class="ttc" id="areplaygain_8c_html_a0f4296037d7277af4fccdf448598033c"><div class="ttname"><a href="replaygain_8c.html#a0f4296037d7277af4fccdf448598033c">ff_replaygain_export</a></div><div class="ttdeci">int ff_replaygain_export(AVStream *st, AVDictionary *metadata)</div><div class="ttdef"><b>Definition:</b> <a href="replaygain_8c_source.html#l00091">replaygain.c:91</a></div></div>
<div class="ttc" id="amov_8c_html_af93efcaabff2d280bf0cd22fcfbd0822"><div class="ttname"><a href="mov_8c.html#af93efcaabff2d280bf0cd22fcfbd0822">tmcd_is_referenced</a></div><div class="ttdeci">static int tmcd_is_referenced(AVFormatContext *s, int tmcd_id)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07437">mov.c:7437</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gab4faa0afdf35076914824200331defff"><div class="ttname"><a href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a></div><div class="ttdeci">#define AVERROR_EOF</div><div class="ttdoc">End of file.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00055">error.h:55</a></div></div>
<div class="ttc" id="astruct_a_v_s_h_a_html_af70d1ef9b4845aab2ce76fe21544209e"><div class="ttname"><a href="struct_a_v_s_h_a.html#af70d1ef9b4845aab2ce76fe21544209e">AVSHA::count</a></div><div class="ttdeci">uint64_t count</div><div class="ttdoc">number of bytes in buffer</div><div class="ttdef"><b>Definition:</b> <a href="sha_8c_source.html#l00036">sha.c:36</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_ac3841b58990baf68200adb60cb48864f"><div class="ttname"><a href="struct_m_o_v_context.html#ac3841b58990baf68200adb60cb48864f">MOVContext::found_moov</a></div><div class="ttdeci">int found_moov</div><div class="ttdoc">'moov' atom has been found</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00251">isom.h:251</a></div></div>
<div class="ttc" id="acommon_8h_html_a19c68e2b5efcbab914d79db1e4fee734"><div class="ttname"><a href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a></div><div class="ttdeci">#define MKTAG(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00405">common.h:405</a></div></div>
<div class="ttc" id="amem_8c_html_a254f3455439c15a2c8a75b8f0235fdbd"><div class="ttname"><a href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a></div><div class="ttdeci">void * av_malloc_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00182">mem.c:182</a></div></div>
<div class="ttc" id="aavformat_8h_html_ab54a3e54e88a8f7d7760e60b49944e44"><div class="ttname"><a href="avformat_8h.html#ab54a3e54e88a8f7d7760e60b49944e44">AV_DISPOSITION_ATTACHED_PIC</a></div><div class="ttdeci">#define AV_DISPOSITION_ATTACHED_PIC</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00837">avformat.h:837</a></div></div>
<div class="ttc" id="amov_8c_html_afe18ec2f66d459a846bf7a202d728eca"><div class="ttname"><a href="mov_8c.html#afe18ec2f66d459a846bf7a202d728eca">mov_options</a></div><div class="ttdeci">static const AVOption mov_options[]</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l08168">mov.c:8168</a></div></div>
<div class="ttc" id="amov_8c_html_add7c4085afb7068235318b45c3c301ab"><div class="ttname"><a href="mov_8c.html#add7c4085afb7068235318b45c3c301ab">mov_codec_id</a></div><div class="ttdeci">static int mov_codec_id(AVStream *st, uint32_t format)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02057">mov.c:2057</a></div></div>
<div class="ttc" id="aintfloat_8h_html_af4532dd95ee81d7dd271fd1bffade817"><div class="ttname"><a href="intfloat_8h.html#af4532dd95ee81d7dd271fd1bffade817">av_int2double</a></div><div class="ttdeci">static av_always_inline double av_int2double(uint64_t i)</div><div class="ttdef"><b>Definition:</b> <a href="intfloat_8h_source.html#l00060">intfloat.h:60</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga3d36105d7143b319acef3c86d2beb382"><div class="ttname"><a href="group__lavc__packet.html#ga3d36105d7143b319acef3c86d2beb382">AV_PKT_FLAG_DISCARD</a></div><div class="ttdeci">#define AV_PKT_FLAG_DISCARD</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00408">packet.h:408</a></div></div>
<div class="ttc" id="astruct_a_v_d_o_v_i_decoder_configuration_record_html_a8d7472a76d55b201759e0883e425b036"><div class="ttname"><a href="struct_a_v_d_o_v_i_decoder_configuration_record.html#a8d7472a76d55b201759e0883e425b036">AVDOVIDecoderConfigurationRecord::dv_profile</a></div><div class="ttdeci">uint8_t dv_profile</div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8h_source.html#l00054">dovi_meta.h:54</a></div></div>
<div class="ttc" id="astruct_m_o_v_stsc_html_aaf18da385e695facb0b371a1bf9afb14"><div class="ttname"><a href="struct_m_o_v_stsc.html#aaf18da385e695facb0b371a1bf9afb14">MOVStsc::count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00063">isom.h:63</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a20dc15e40874f46af0d2b4ad34aed9a7"><div class="ttname"><a href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a></div><div class="ttdeci">static unsigned int get_bits_long(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00546">get_bits.h:546</a></div></div>
<div class="ttc" id="aaes__ctr_8c_html_a37ef9fcf05bf94767b2bf18edca7ffda"><div class="ttname"><a href="aes__ctr_8c.html#a37ef9fcf05bf94767b2bf18edca7ffda">av_aes_ctr_init</a></div><div class="ttdeci">int av_aes_ctr_init(struct AVAESCTR *a, const uint8_t *key)</div><div class="ttdef"><b>Definition:</b> <a href="aes__ctr_8c_source.html#l00069">aes_ctr.c:69</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_aa4e1c6357e04ee6960702c705448a76a"><div class="ttname"><a href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a></div><div class="ttdeci">filter_frame For filters that do not use the this method is called when a frame is pushed to the filter s input It can be called at any time except in a reentrant way If the input frame is enough to produce output</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00225">filter_design.txt:225</a></div></div>
<div class="ttc" id="amov_8c_html_a8279ede4f07319c1c7d77fabad3dd5bf"><div class="ttname"><a href="mov_8c.html#a8279ede4f07319c1c7d77fabad3dd5bf">mov_read_alac</a></div><div class="ttdeci">static int mov_read_alac(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01727">mov.c:1727</a></div></div>
<div class="ttc" id="amov_8c_html_a4eb827ad68645598ee4c1e4bdf3b95c6"><div class="ttname"><a href="mov_8c.html#a4eb827ad68645598ee4c1e4bdf3b95c6">test_same_origin</a></div><div class="ttdeci">static int test_same_origin(const char *src, const char *ref)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04118">mov.c:4118</a></div></div>
<div class="ttc" id="astruct_a_v_i_o_context_html"><div class="ttname"><a href="struct_a_v_i_o_context.html">AVIOContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00161">avio.h:161</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_aded652ebcaf5b6e1bafe235a16310866"><div class="ttname"><a href="struct_m_o_v_stream_context.html#aded652ebcaf5b6e1bafe235a16310866">MOVStreamContext::tmcd_flags</a></div><div class="ttdeci">uint32_t tmcd_flags</div><div class="ttdoc">tmcd track flags</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00211">isom.h:211</a></div></div>
<div class="ttc" id="amov_8c_html_abc66292f4cd00e4b276cc2ad42fa2fd7"><div class="ttname"><a href="mov_8c.html#abc66292f4cd00e4b276cc2ad42fa2fd7">IS_MATRIX_IDENT</a></div><div class="ttdeci">#define IS_MATRIX_IDENT(matrix)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04509">mov.c:4509</a></div></div>
<div class="ttc" id="aavformat_8h_html_af09f200b4cd9bf0baa05671436eef2fb"><div class="ttname"><a href="avformat_8h.html#af09f200b4cd9bf0baa05671436eef2fb">AV_DISPOSITION_DEFAULT</a></div><div class="ttdeci">#define AV_DISPOSITION_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00814">avformat.h:814</a></div></div>
<div class="ttc" id="amov_8c_html_a78b765b34c851a48e1f1ecd9b969b1fc"><div class="ttname"><a href="mov_8c.html#a78b765b34c851a48e1f1ecd9b969b1fc">mov_update_dts_shift</a></div><div class="ttdeci">static void mov_update_dts_shift(MOVStreamContext *sc, int duration, void *logctx)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03030">mov.c:3030</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG4</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00061">codec_id.h:61</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00092">avrndec.c:92</a></div></div>
<div class="ttc" id="aavio_8h_html_a02be750099c47406eb68b50d75a01bdd"><div class="ttname"><a href="avio_8h.html#a02be750099c47406eb68b50d75a01bdd">avio_get_str16be</a></div><div class="ttdeci">int avio_get_str16be(AVIOContext *pb, int maxlen, char *buf, int buflen)</div></div>
<div class="ttc" id="aencryption__info_8c_html_ad5b99e780657d38504da850e7d621921"><div class="ttname"><a href="encryption__info_8c.html#ad5b99e780657d38504da850e7d621921">av_encryption_init_info_free</a></div><div class="ttdeci">void av_encryption_init_info_free(AVEncryptionInitInfo *info)</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8c_source.html#l00214">encryption_info.c:214</a></div></div>
<div class="ttc" id="amov_8c_html_aaa0ba57e95962f3a432ffa739fca0624"><div class="ttname"><a href="mov_8c.html#aaa0ba57e95962f3a432ffa739fca0624">mov_read_avss</a></div><div class="ttdeci">static int mov_read_avss(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01732">mov.c:1732</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97aa00782edfcea54be6c2083b6d2d839ac"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aa00782edfcea54be6c2083b6d2d839ac">AV_PKT_DATA_ENCRYPTION_INFO</a></div><div class="ttdeci">@ AV_PKT_DATA_ENCRYPTION_INFO</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00255">packet.h:255</a></div></div>
<div class="ttc" id="amem_8c_html_aadc230ece36ef112710b262a6601a16b"><div class="ttname"><a href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a></div><div class="ttdeci">void * av_realloc_array(void *ptr, size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00198">mem.c:198</a></div></div>
<div class="ttc" id="amov_8c_html_aa5dd48127e84fe1b508c1b0d634a0804"><div class="ttname"><a href="mov_8c.html#aa5dd48127e84fe1b508c1b0d634a0804">mov_read_custom</a></div><div class="ttdeci">static int mov_read_custom(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04410">mov.c:4410</a></div></div>
<div class="ttc" id="apixdesc_8h_html"><div class="ttname"><a href="pixdesc_8h.html">pixdesc.h</a></div></div>
<div class="ttc" id="aid3v1_8h_html_a83a6af88a5fd012267b7f60be6d07bb9"><div class="ttname"><a href="id3v1_8h.html#a83a6af88a5fd012267b7f60be6d07bb9">ID3v1_GENRE_MAX</a></div><div class="ttdeci">#define ID3v1_GENRE_MAX</div><div class="ttdef"><b>Definition:</b> <a href="id3v1_8h_source.html#l00029">id3v1.h:29</a></div></div>
<div class="ttc" id="amov_8c_html_a6770bf9929a5061c97854ebfae3e6ffa"><div class="ttname"><a href="mov_8c.html#a6770bf9929a5061c97854ebfae3e6ffa">mov_read_extradata</a></div><div class="ttdeci">static int mov_read_extradata(MOVContext *c, AVIOContext *pb, MOVAtom atom, enum AVCodecID codec_id)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01701">mov.c:1701</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a417ce5f6b2647fb2aa1fff283a7e6255"><div class="ttname"><a href="struct_m_o_v_context.html#a417ce5f6b2647fb2aa1fff283a7e6255">MOVContext::chapter_tracks</a></div><div class="ttdeci">int * chapter_tracks</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00265">isom.h:265</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a></div><div class="ttdeci">@ AVCOL_RANGE_JPEG</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00586">pixfmt.h:586</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a51639f88aef9f4f283f538a0c033fbb8"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">AVCodecParameters::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00126">codec_par.h:126</a></div></div>
<div class="ttc" id="ampegaudiodecheader_8h_html"><div class="ttname"><a href="mpegaudiodecheader_8h.html">mpegaudiodecheader.h</a></div></div>
<div class="ttc" id="agroup__lavu__sha_html_gaf53a37af454b04d4974861e931593e1a"><div class="ttname"><a href="group__lavu__sha.html#gaf53a37af454b04d4974861e931593e1a">av_sha_init</a></div><div class="ttdeci">av_cold int av_sha_init(AVSHA *ctx, int bits)</div><div class="ttdef"><b>Definition:</b> <a href="sha_8c_source.html#l00273">sha.c:273</a></div></div>
<div class="ttc" id="amov_8c_html_a730c0993e55a88317c829d5caad17964"><div class="ttname"><a href="mov_8c.html#a730c0993e55a88317c829d5caad17964">mov_read_mvhd</a></div><div class="ttdeci">static int mov_read_mvhd(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01484">mov.c:1484</a></div></div>
<div class="ttc" id="astruct_a_v_d_o_v_i_decoder_configuration_record_html_a7cba91fd0ce51a45be253de043e976d4"><div class="ttname"><a href="struct_a_v_d_o_v_i_decoder_configuration_record.html#a7cba91fd0ce51a45be253de043e976d4">AVDOVIDecoderConfigurationRecord::rpu_present_flag</a></div><div class="ttdeci">uint8_t rpu_present_flag</div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8h_source.html#l00056">dovi_meta.h:56</a></div></div>
<div class="ttc" id="astruct_m_o_v_track_ext_html_ae3675a4cf0df891a91a3c86ead458a64"><div class="ttname"><a href="struct_m_o_v_track_ext.html#ae3675a4cf0df891a91a3c86ead458a64">MOVTrackExt::stsd_id</a></div><div class="ttdeci">unsigned stsd_id</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00103">isom.h:103</a></div></div>
<div class="ttc" id="amov_8c_html_a3d7d6b028cb698b14300e0ace9336dbe"><div class="ttname"><a href="mov_8c.html#a3d7d6b028cb698b14300e0ace9336dbe">mov_metadata_creation_time</a></div><div class="ttdeci">static void mov_metadata_creation_time(AVDictionary **metadata, int64_t time, void *logctx)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01420">mov.c:1420</a></div></div>
<div class="ttc" id="amov_8c_html_aa269a6f909b4da737f6a17b8c5dc0552"><div class="ttname"><a href="mov_8c.html#aa269a6f909b4da737f6a17b8c5dc0552">mov_read_avid</a></div><div class="ttdeci">static int mov_read_avid(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01747">mov.c:1747</a></div></div>
<div class="ttc" id="astruct_a_v_encryption_info_html_a63649ca3be8a587136decc7837d8f0b0"><div class="ttname"><a href="struct_a_v_encryption_info.html#a63649ca3be8a587136decc7837d8f0b0">AVEncryptionInfo::key_id</a></div><div class="ttdeci">uint8_t * key_id</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8h_source.html#l00063">encryption_info.h:63</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a492fcecc45dbbd8da51edd0124e9dd30"><div class="ttname"><a href="struct_a_v_stream.html#a492fcecc45dbbd8da51edd0124e9dd30">AVStream::discard</a></div><div class="ttdeci">enum AVDiscard discard</div><div class="ttdoc">Selects which packets can be discarded at will and do not need to be demuxed.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00922">avformat.h:924</a></div></div>
<div class="ttc" id="avp3__parser_8c_html_a1f8bd4d306d2e82dbba167375f40d778"><div class="ttname"><a href="vp3__parser_8c.html#a1f8bd4d306d2e82dbba167375f40d778">parse</a></div><div class="ttdeci">static int parse(AVCodecParserContext *s, AVCodecContext *avctx, const uint8_t **poutbuf, int *poutbuf_size, const uint8_t *buf, int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="vp3__parser_8c_source.html#l00023">vp3_parser.c:23</a></div></div>
<div class="ttc" id="amov_8c_html_a8a6c3812ff63039a9d300b55adc491fc"><div class="ttname"><a href="mov_8c.html#a8a6c3812ff63039a9d300b55adc491fc">mov_read_stps</a></div><div class="ttdeci">static int mov_read_stps(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02744">mov.c:2744</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a8b06cbfbb58e0428cbda684f62d93a33"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a8b06cbfbb58e0428cbda684f62d93a33">MOVStreamContext::last_stsd_index</a></div><div class="ttdeci">int last_stsd_index</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00223">isom.h:223</a></div></div>
<div class="ttc" id="ainput_8c_html_ad6cdb6a14abe3eab42eaaadc93409aec"><div class="ttname"><a href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a></div><div class="ttdeci">#define b</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00041">input.c:41</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab"><div class="ttname"><a href="pixfmt_8h.html#ad4791ea14975f098b649db7fcd731ce6af707e1f8131d3413ac4fb5b626b075ab">AVCOL_TRC_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_TRC_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00486">pixfmt.h:486</a></div></div>
<div class="ttc" id="amlp__parse_8h_html_a2dab7b101492bff1541fdd22df0b0498"><div class="ttname"><a href="mlp__parse_8h.html#a2dab7b101492bff1541fdd22df0b0498">truehd_channels</a></div><div class="ttdeci">static int truehd_channels(int chanmap)</div><div class="ttdef"><b>Definition:</b> <a href="mlp__parse_8h_source.html#l00088">mlp_parse.h:88</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a9b3c18a18a684fcbb1a2cc25cc6869dd"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a9b3c18a18a684fcbb1a2cc25cc6869dd">AV_PKT_DATA_PALETTE</a></div><div class="ttdeci">@ AV_PKT_DATA_PALETTE</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00046">packet.h:46</a></div></div>
<div class="ttc" id="amov_8c_html_a7f1b46ccb039c76b268d63604e3d9865"><div class="ttname"><a href="mov_8c.html#a7f1b46ccb039c76b268d63604e3d9865">mov_read_tkhd</a></div><div class="ttdeci">static int mov_read_tkhd(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04517">mov.c:4517</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_addb67650176c09a40bebc7a402923688"><div class="ttname"><a href="struct_m_o_v_stream_context.html#addb67650176c09a40bebc7a402923688">MOVStreamContext::bytes_per_frame</a></div><div class="ttdeci">unsigned int bytes_per_frame</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00196">isom.h:196</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_afd2d38dbc4338142d73bbd42c59ac186"><div class="ttname"><a href="intreadwrite_8h.html#afd2d38dbc4338142d73bbd42c59ac186">AV_WB64</a></div><div class="ttdeci">#define AV_WB64(p, val)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00311">intreadwrite.h:311</a></div></div>
<div class="ttc" id="aspherical_8h_html"><div class="ttname"><a href="spherical_8h.html">spherical.h</a></div></div>
<div class="ttc" id="amov_8c_html_ac97751d9df6b48e286e9d4bfd2f997db"><div class="ttname"><a href="mov_8c.html#ac97751d9df6b48e286e9d4bfd2f997db">mov_read_colr</a></div><div class="ttdeci">static int mov_read_colr(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01567">mov.c:1567</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_a6a4c12ef75a81c72f96410e9d1d8c8e9"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a></div><div class="ttdeci">#define AV_RB16</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00053">intreadwrite.h:53</a></div></div>
<div class="ttc" id="amov_8c_html_a61c9bcbec06d59f84294fbb3a73e1603"><div class="ttname"><a href="mov_8c.html#a61c9bcbec06d59f84294fbb3a73e1603">mov_read_strf</a></div><div class="ttdeci">static int mov_read_strf(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01984">mov.c:1984</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea81f7bb2a5a480533df028153b1f664c6"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea81f7bb2a5a480533df028153b1f664c6">AV_CODEC_ID_ALAC</a></div><div class="ttdeci">@ AV_CODEC_ID_ALAC</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00434">codec_id.h:434</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a3c24bd2093cae8d59e6caad974a1f07e"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a3c24bd2093cae8d59e6caad974a1f07e">MOVStreamContext::coll_size</a></div><div class="ttdeci">size_t coll_size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00233">isom.h:233</a></div></div>
<div class="ttc" id="amov_8c_html_a3dc4bec7078cab7d5406e78f79ebd80a"><div class="ttname"><a href="mov_8c.html#a3dc4bec7078cab7d5406e78f79ebd80a">yuv_to_rgba</a></div><div class="ttdeci">static uint32_t yuv_to_rgba(uint32_t ycbcr)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02271">mov.c:2271</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97ac7d26d70faa3c263162d60668b5c82b2"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97ac7d26d70faa3c263162d60668b5c82b2">AV_PKT_DATA_ENCRYPTION_INIT_INFO</a></div><div class="ttdeci">@ AV_PKT_DATA_ENCRYPTION_INIT_INFO</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00249">packet.h:249</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea88d9e41adf1df5445e3068512177b582"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea88d9e41adf1df5445e3068512177b582">AV_CODEC_ID_AMR_NB</a></div><div class="ttdeci">@ AV_CODEC_ID_AMR_NB</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00400">codec_id.h:400</a></div></div>
<div class="ttc" id="amov_8c_html_abeb959e820f3f240d97107402eb4148c"><div class="ttname"><a href="mov_8c.html#abeb959e820f3f240d97107402eb4148c">mov_parse_auxiliary_info</a></div><div class="ttdeci">static int mov_parse_auxiliary_info(MOVContext *c, MOVStreamContext *sc, AVIOContext *pb, MOVEncryptionIndex *encryption_index)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06108">mov.c:6108</a></div></div>
<div class="ttc" id="amov_8c_html_a26e16731064783ad26f3bc40120a5d5d"><div class="ttname"><a href="mov_8c.html#a26e16731064783ad26f3bc40120a5d5d">mov_seek_stream</a></div><div class="ttdeci">static int mov_seek_stream(AVFormatContext *s, AVStream *st, int64_t timestamp, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l08060">mov.c:8060</a></div></div>
<div class="ttc" id="amov_8c_html_a33da53331ea807df80570f5d4cdbf362"><div class="ttname"><a href="mov_8c.html#a33da53331ea807df80570f5d4cdbf362">mov_read_saio</a></div><div class="ttdeci">static int mov_read_saio(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06274">mov.c:6274</a></div></div>
<div class="ttc" id="amov_8c_html_ac0a3efbd7340528c889536f97d5d663e"><div class="ttname"><a href="mov_8c.html#ac0a3efbd7340528c889536f97d5d663e">mov_get_stsc_samples</a></div><div class="ttdeci">static int64_t mov_get_stsc_samples(MOVStreamContext *sc, unsigned int index)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02729">mov.c:2729</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_acc82b2ff39c2c55e05f81373b5be246d"><div class="ttname"><a href="struct_m_o_v_stream_context.html#acc82b2ff39c2c55e05f81373b5be246d">MOVStreamContext::ctts_index</a></div><div class="ttdeci">int ctts_index</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00180">isom.h:180</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga9b58b28e2d429b930b69db19877f76a8"><div class="ttname"><a href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a></div><div class="ttdeci">#define AV_LOG_VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00210">log.h:210</a></div></div>
<div class="ttc" id="ariff_8c_html_aeb42da0d9adf5affab3b0f64c2ead98a"><div class="ttname"><a href="riff_8c.html#aeb42da0d9adf5affab3b0f64c2ead98a">ff_codec_wav_tags</a></div><div class="ttdeci">const AVCodecTag ff_codec_wav_tags[]</div><div class="ttdef"><b>Definition:</b> <a href="riff_8c_source.html#l00507">riff.c:507</a></div></div>
<div class="ttc" id="amov_8c_html_af0c84a77bf7ff29f3e2a8e2e9dc0dcb7"><div class="ttname"><a href="mov_8c.html#af0c84a77bf7ff29f3e2a8e2e9dc0dcb7">get_edit_list_entry</a></div><div class="ttdeci">static int get_edit_list_entry(MOVContext *mov, const MOVStreamContext *msc, unsigned int edit_list_index, int64_t *edit_list_media_time, int64_t *edit_list_duration, int64_t global_timescale)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03157">mov.c:3157</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a779cda45753f25008fa7545fa4abd455"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a779cda45753f25008fa7545fa4abd455">MOVStreamContext::default_encrypted_sample</a></div><div class="ttdeci">AVEncryptionInfo * default_encrypted_sample</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00241">isom.h:241</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a99d9f8a6a173a9f1fc665c1ef4b2abf4"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a99d9f8a6a173a9f1fc665c1ef4b2abf4">MOVStreamContext::keyframes</a></div><div class="ttdeci">int * keyframes</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00188">isom.h:188</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html"><div class="ttname"><a href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00081">dict.h:81</a></div></div>
<div class="ttc" id="aavformat_8h_html_ac4fe20a35d4a1b9014e5f4062fb67b52"><div class="ttname"><a href="avformat_8h.html#ac4fe20a35d4a1b9014e5f4062fb67b52">AVINDEX_DISCARD_FRAME</a></div><div class="ttdeci">#define AVINDEX_DISCARD_FRAME</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00808">avformat.h:808</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_aea05abdb8e45405048d7923a68c23ef5"><div class="ttname"><a href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">AVStream::disposition</a></div><div class="ttdeci">int disposition</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00922">avformat.h:922</a></div></div>
<div class="ttc" id="astruct_m_o_v_sbgp_html_ab9e6eb07b94b1fc697cf5e94d4237112"><div class="ttname"><a href="struct_m_o_v_sbgp.html#ab9e6eb07b94b1fc697cf5e94d4237112">MOVSbgp::count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00110">isom.h:110</a></div></div>
<div class="ttc" id="agroup__lavu__video__spherical_html_gga689eeb8cf9b453f3619f3cf626e03a08a768257247d4090b959ee1678f67bc9d3"><div class="ttname"><a href="group__lavu__video__spherical.html#gga689eeb8cf9b453f3619f3cf626e03a08a768257247d4090b959ee1678f67bc9d3">AV_SPHERICAL_EQUIRECTANGULAR_TILE</a></div><div class="ttdeci">@ AV_SPHERICAL_EQUIRECTANGULAR_TILE</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00072">spherical.h:72</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a393ef0711710850737c59825351cc993"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a393ef0711710850737c59825351cc993">MOVStreamContext::ctts_allocated_size</a></div><div class="ttdeci">unsigned int ctts_allocated_size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00170">isom.h:170</a></div></div>
<div class="ttc" id="amov_8c_html_a522f7d3c4c4c2b9362c6ee9f68bb605a"><div class="ttname"><a href="mov_8c.html#a522f7d3c4c4c2b9362c6ee9f68bb605a">mov_current_sample_set</a></div><div class="ttdeci">static void mov_current_sample_set(MOVStreamContext *sc, int current_sample)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03458">mov.c:3458</a></div></div>
<div class="ttc" id="amathematics_8h_html"><div class="ttname"><a href="mathematics_8h.html">mathematics.h</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga879a3af0408d39f0ef98010f07952601"><div class="ttname"><a href="group__lavc__packet.html#ga879a3af0408d39f0ef98010f07952601">AV_PKT_FLAG_DISPOSABLE</a></div><div class="ttdeci">#define AV_PKT_FLAG_DISPOSABLE</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00420">packet.h:420</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a2c1d8297f364bdabb641134d89452be8"><div class="ttname"><a href="intreadwrite_8h.html#a2c1d8297f364bdabb641134d89452be8">AV_RB8</a></div><div class="ttdeci">#define AV_RB8(x)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00395">intreadwrite.h:395</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_ad2363a9a16b5674b5232c288a3e031cf"><div class="ttname"><a href="struct_a_v_codec_parameters.html#ad2363a9a16b5674b5232c288a3e031cf">AVCodecParameters::initial_padding</a></div><div class="ttdeci">int initial_padding</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00189">codec_par.h:189</a></div></div>
<div class="ttc" id="astruct_a_v_d_o_v_i_decoder_configuration_record_html_ae30e3c4307f76277af0d35eacc869af8"><div class="ttname"><a href="struct_a_v_d_o_v_i_decoder_configuration_record.html#ae30e3c4307f76277af0d35eacc869af8">AVDOVIDecoderConfigurationRecord::el_present_flag</a></div><div class="ttdeci">uint8_t el_present_flag</div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8h_source.html#l00057">dovi_meta.h:57</a></div></div>
<div class="ttc" id="amov_8c_html_a74e4b292e1ce55e600d9623561f2cdcd"><div class="ttname"><a href="mov_8c.html#a74e4b292e1ce55e600d9623561f2cdcd">mov_read_moov</a></div><div class="ttdeci">static int mov_read_moov(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01159">mov.c:1159</a></div></div>
<div class="ttc" id="acommon_8h_html_a4752e34ce9cae031c792b625b0736d97"><div class="ttname"><a href="common_8h.html#a4752e34ce9cae031c792b625b0736d97">FFNABS</a></div><div class="ttdeci">#define FFNABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00081">common.h:81</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a81cc2a2e3a232c1e929fafa0c6847ceb"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a81cc2a2e3a232c1e929fafa0c6847ceb">MOVStreamContext::audio_cid</a></div><div class="ttdeci">int16_t audio_cid</div><div class="ttdoc">stsd audio compression id</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00200">isom.h:200</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a73b56e906c97a1c095e8e615d072637b"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a73b56e906c97a1c095e8e615d072637b">AV_PKT_DATA_SPHERICAL</a></div><div class="ttdeci">@ AV_PKT_DATA_SPHERICAL</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00228">packet.h:228</a></div></div>
<div class="ttc" id="amov_8c_html_af63342dda926f662dfd06a83276016ae"><div class="ttname"><a href="mov_8c.html#af63342dda926f662dfd06a83276016ae">mov_read_esds</a></div><div class="ttdeci">static int mov_read_esds(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00776">mov.c:776</a></div></div>
<div class="ttc" id="astruct_a_v_subsample_encryption_info_html"><div class="ttname"><a href="struct_a_v_subsample_encryption_info.html">AVSubsampleEncryptionInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8h_source.html#l00025">encryption_info.h:25</a></div></div>
<div class="ttc" id="aisom_8h_html_a2dfd82d870cd4c8637d51c6828db91e1"><div class="ttname"><a href="isom_8h.html#a2dfd82d870cd4c8637d51c6828db91e1">MOVAtom</a></div><div class="ttdeci">struct MOVAtom MOVAtom</div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_add69e45fb552852ce6bca16dee975860"><div class="ttname"><a href="struct_m_o_v_stream_context.html#add69e45fb552852ce6bca16dee975860">MOVStreamContext::keyframe_count</a></div><div class="ttdeci">unsigned int keyframe_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00187">isom.h:187</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_abd64114ea8e16c392a1b5713f57e2b64"><div class="ttname"><a href="struct_m_o_v_stream_context.html#abd64114ea8e16c392a1b5713f57e2b64">MOVStreamContext::min_corrected_pts</a></div><div class="ttdeci">int64_t min_corrected_pts</div><div class="ttdoc">minimum Composition time shown by the edits excluding empty edits.</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00191">isom.h:191</a></div></div>
<div class="ttc" id="agroup__lavu__video__spherical_html_gga689eeb8cf9b453f3619f3cf626e03a08a55efbae149ee7a6e327a66be7061d146"><div class="ttname"><a href="group__lavu__video__spherical.html#gga689eeb8cf9b453f3619f3cf626e03a08a55efbae149ee7a6e327a66be7061d146">AV_SPHERICAL_EQUIRECTANGULAR</a></div><div class="ttdeci">@ AV_SPHERICAL_EQUIRECTANGULAR</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00056">spherical.h:56</a></div></div>
<div class="ttc" id="aintfloat_8h_html"><div class="ttname"><a href="intfloat_8h.html">intfloat.h</a></div></div>
<div class="ttc" id="alibavutil_2replaygain_8h_html"><div class="ttname"><a href="libavutil_2replaygain_8h.html">replaygain.h</a></div></div>
<div class="ttc" id="aid3v1_8h_html"><div class="ttname"><a href="id3v1_8h.html">id3v1.h</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a06fbe82a936c2a6452067d96479e2f30"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a06fbe82a936c2a6452067d96479e2f30">MOVStreamContext::duration_for_fps</a></div><div class="ttdeci">int64_t duration_for_fps</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00218">isom.h:218</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceadfd3b6add5f4c1dad10b85ef2f474efd"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadfd3b6add5f4c1dad10b85ef2f474efd">AV_CODEC_ID_R10K</a></div><div class="ttdeci">@ AV_CODEC_ID_R10K</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00194">codec_id.h:194</a></div></div>
<div class="ttc" id="aencryption__info_8c_html_ae0fd76bcba84d38470a8e6af0691b279"><div class="ttname"><a href="encryption__info_8c.html#ae0fd76bcba84d38470a8e6af0691b279">av_encryption_init_info_get_side_data</a></div><div class="ttdeci">AVEncryptionInitInfo * av_encryption_init_info_get_side_data(const uint8_t *side_data, size_t side_data_size)</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8c_source.html#l00229">encryption_info.c:229</a></div></div>
<div class="ttc" id="astruct_m_o_v_track_ext_html_a90487aca7845afa878d2d7d6bb2ba4bf"><div class="ttname"><a href="struct_m_o_v_track_ext.html#a90487aca7845afa878d2d7d6bb2ba4bf">MOVTrackExt::track_id</a></div><div class="ttdeci">unsigned track_id</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00102">isom.h:102</a></div></div>
<div class="ttc" id="aavio_8h_html_a375f057e315dd2273579555128a070fb"><div class="ttname"><a href="avio_8h.html#a375f057e315dd2273579555128a070fb">avio_size</a></div><div class="ttdeci">int64_t avio_size(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00346">aviobuf.c:346</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a472b33c46f8c8d08f484be15431a1598"><div class="ttname"><a href="intreadwrite_8h.html#a472b33c46f8c8d08f484be15431a1598">AV_WL16</a></div><div class="ttdeci">#define AV_WL16(p, val)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00258">intreadwrite.h:258</a></div></div>
<div class="ttc" id="aavstring_8c_html_a98e5858f933c6e6be64f03a76e22b272"><div class="ttname"><a href="avstring_8c.html#a98e5858f933c6e6be64f03a76e22b272">av_strlcatf</a></div><div class="ttdeci">size_t av_strlcatf(char *dst, size_t size, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="avstring_8c_source.html#l00101">avstring.c:101</a></div></div>
<div class="ttc" id="amov_8c_html_a4a242ca415ec9e93fa321b859b21fe48"><div class="ttname"><a href="mov_8c.html#a4a242ca415ec9e93fa321b859b21fe48">mov_read_stco</a></div><div class="ttdeci">static int mov_read_stco(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02006">mov.c:2006</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a0aaeee6202e3497308c78302ca436c15"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a0aaeee6202e3497308c78302ca436c15">MOVStreamContext::spherical_size</a></div><div class="ttdeci">size_t spherical_size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00230">isom.h:230</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga75603d7c2b8adf5829f4fd2fb860168f"><div class="ttname"><a href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a></div><div class="ttdeci">#define AV_PKT_FLAG_KEY</div><div class="ttdoc">The packet contains a keyframe.</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00401">packet.h:401</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_item_html"><div class="ttname"><a href="struct_m_o_v_fragment_index_item.html">MOVFragmentIndexItem</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00137">isom.h:137</a></div></div>
<div class="ttc" id="aget__bits_8h_html_af65c008755f74e99d139eae8b46534b5"><div class="ttname"><a href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a></div><div class="ttdeci">static int init_get_bits(GetBitContext *s, const uint8_t *buffer, int bit_size)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00659">get_bits.h:659</a></div></div>
<div class="ttc" id="amov_8c_html_a580a964ac49d40a759d85c461b0265da"><div class="ttname"><a href="mov_8c.html#a580a964ac49d40a759d85c461b0265da">cenc_filter</a></div><div class="ttdeci">static int cenc_filter(MOVContext *mov, AVStream *st, MOVStreamContext *sc, AVPacket *pkt, int current_index)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06670">mov.c:6670</a></div></div>
<div class="ttc" id="amov_8c_html_a571f0b82f39ae736384d5f075e9979a8"><div class="ttname"><a href="mov_8c.html#a571f0b82f39ae736384d5f075e9979a8">mov_read_sdtp</a></div><div class="ttdeci">static int mov_read_sdtp(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02996">mov.c:2996</a></div></div>
<div class="ttc" id="amov_8c_html_a8e9db231f227db2306d00fe4fae7dc9c"><div class="ttname"><a href="mov_8c.html#a8e9db231f227db2306d00fe4fae7dc9c">mov_read_jp2h</a></div><div class="ttdeci">static int mov_read_jp2h(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01737">mov.c:1737</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a912339297bc6a4db4fa3cea3da29a351"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a912339297bc6a4db4fa3cea3da29a351">MOVStreamContext::stsd_count</a></div><div class="ttdeci">int stsd_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00224">isom.h:224</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9befe0b86412646017afb0051d144d13"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">AVCodecParameters::extradata</a></div><div class="ttdeci">uint8_t * extradata</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00074">codec_par.h:74</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceac62343eecae501ff795fe264ce19d965"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac62343eecae501ff795fe264ce19d965">AV_CODEC_ID_AMR_WB</a></div><div class="ttdeci">@ AV_CODEC_ID_AMR_WB</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00401">codec_id.h:401</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="amov_8c_html_ae2e0964ab2700cb2c2ca61859f4bdf79"><div class="ttname"><a href="mov_8c.html#ae2e0964ab2700cb2c2ca61859f4bdf79">mov_read_tfhd</a></div><div class="ttdeci">static int mov_read_tfhd(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04635">mov.c:4635</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaa5cef5ab33a218c7ceccb713171a8632"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa5cef5ab33a218c7ceccb713171a8632">AV_CODEC_ID_BIN_DATA</a></div><div class="ttdeci">@ AV_CODEC_ID_BIN_DATA</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00558">codec_id.h:558</a></div></div>
<div class="ttc" id="astruct_a_v_index_entry_html_add3fa33e8b3363a96fa4c62fca1bcf42"><div class="ttname"><a href="struct_a_v_index_entry.html#add3fa33e8b3363a96fa4c62fca1bcf42">AVIndexEntry::min_distance</a></div><div class="ttdeci">int min_distance</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00811">avformat.h:811</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="aoggparseopus_8c_html_acc60a4d203b1a795fa2f32cf7240b3c1"><div class="ttname"><a href="oggparseopus_8c.html#acc60a4d203b1a795fa2f32cf7240b3c1">OPUS_SEEK_PREROLL_MS</a></div><div class="ttdeci">#define OPUS_SEEK_PREROLL_MS</div><div class="ttdef"><b>Definition:</b> <a href="oggparseopus_8c_source.html#l00035">oggparseopus.c:35</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea11cf9a49627f70f6ab33d3bf93752ae4"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea11cf9a49627f70f6ab33d3bf93752ae4">AV_CODEC_ID_H261</a></div><div class="ttdeci">@ AV_CODEC_ID_H261</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00052">codec_id.h:52</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a3b1902305bce41f4b2b0575868d5de7e"><div class="ttname"><a href="struct_m_o_v_context.html#a3b1902305bce41f4b2b0575868d5de7e">MOVContext::bitrates_count</a></div><div class="ttdeci">int bitrates_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00276">isom.h:276</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a12b208712b36e949a532931ed9fa4e09"><div class="ttname"><a href="struct_m_o_v_context.html#a12b208712b36e949a532931ed9fa4e09">MOVContext::bitrates</a></div><div class="ttdeci">int * bitrates</div><div class="ttdoc">bitrates read before streams creation</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00275">isom.h:275</a></div></div>
<div class="ttc" id="amov_8c_html_af40b9788507cb3f001989b8c6741d108"><div class="ttname"><a href="mov_8c.html#af40b9788507cb3f001989b8c6741d108">mov_read_wide</a></div><div class="ttdeci">static int mov_read_wide(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05173">mov.c:5173</a></div></div>
<div class="ttc" id="aavformat_8h_html_a23159bdc0b27ccf964072e30d6cc4559"><div class="ttname"><a href="avformat_8h.html#a23159bdc0b27ccf964072e30d6cc4559">AVINDEX_KEYFRAME</a></div><div class="ttdeci">#define AVINDEX_KEYFRAME</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00807">avformat.h:807</a></div></div>
<div class="ttc" id="aflac_8h_html_adf764cbdea00d65edcd07bb9953ad2b7ae4748beef8c4a9c9131fad8bf4a8a3db"><div class="ttname"><a href="flac_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ae4748beef8c4a9c9131fad8bf4a8a3db">FLAC_METADATA_TYPE_STREAMINFO</a></div><div class="ttdeci">@ FLAC_METADATA_TYPE_STREAMINFO</div><div class="ttdef"><b>Definition:</b> <a href="flac_8h_source.html#l00048">flac.h:48</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a2ac7db5087cfbfe8af63136084004446"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a2ac7db5087cfbfe8af63136084004446">MOVStreamContext::rap_group_count</a></div><div class="ttdeci">unsigned int rap_group_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00214">isom.h:214</a></div></div>
<div class="ttc" id="aisom_8c_html_a7fcc96a0df9e92e9700ca7360c38192d"><div class="ttname"><a href="isom_8c.html#a7fcc96a0df9e92e9700ca7360c38192d">ff_mov_lang_to_iso639</a></div><div class="ttdeci">int ff_mov_lang_to_iso639(unsigned code, char to[4])</div><div class="ttdef"><b>Definition:</b> <a href="isom_8c_source.html#l00569">isom.c:569</a></div></div>
<div class="ttc" id="astruct_m_o_v_track_ext_html_a86496b53a65b1f198d09d5991b13e401"><div class="ttname"><a href="struct_m_o_v_track_ext.html#a86496b53a65b1f198d09d5991b13e401">MOVTrackExt::size</a></div><div class="ttdeci">unsigned size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00105">isom.h:105</a></div></div>
<div class="ttc" id="amov_8c_html_a31dd0edb055c69d828c83b97365bfd70"><div class="ttname"><a href="mov_8c.html#a31dd0edb055c69d828c83b97365bfd70">ff_mov_demuxer</a></div><div class="ttdeci">AVInputFormat ff_mov_demuxer</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l08224">mov.c:8224</a></div></div>
<div class="ttc" id="astruct_a_v_probe_data_html"><div class="ttname"><a href="struct_a_v_probe_data.html">AVProbeData</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00441">avformat.h:441</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a610df6b7704558756ee5c30247495731"><div class="ttname"><a href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a></div><div class="ttdeci">static void skip_bits(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00467">get_bits.h:467</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a997c4ba9f960ba82fb9d711938f3dbb2"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a997c4ba9f960ba82fb9d711938f3dbb2">MOVStreamContext::pb_is_copied</a></div><div class="ttdeci">int pb_is_copied</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00160">isom.h:160</a></div></div>
<div class="ttc" id="aavformat_8h_html_a24925a4d1138c3f17a7a27dd45c08920"><div class="ttname"><a href="avformat_8h.html#a24925a4d1138c3f17a7a27dd45c08920">AVPROBE_SCORE_MAX</a></div><div class="ttdeci">#define AVPROBE_SCORE_MAX</div><div class="ttdoc">maximum score</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00453">avformat.h:453</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_abee942223c7b0bbaf505f1732b66cc4b"><div class="ttname"><a href="struct_m_o_v_context.html#abee942223c7b0bbaf505f1732b66cc4b">MOVContext::time_scale</a></div><div class="ttdeci">int time_scale</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00249">isom.h:249</a></div></div>
<div class="ttc" id="agroup__lavu__video__stereo3d_html_gga12fe9672eeaeb8980960faa96d2fcee6aaa1ee993fc27f99269c536c51b0b5f3c"><div class="ttname"><a href="group__lavu__video__stereo3d.html#gga12fe9672eeaeb8980960faa96d2fcee6aaa1ee993fc27f99269c536c51b0b5f3c">AV_STEREO3D_SIDEBYSIDE</a></div><div class="ttdeci">@ AV_STEREO3D_SIDEBYSIDE</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00067">stereo3d.h:67</a></div></div>
<div class="ttc" id="aget__bits_8h_html_abd82eee339b2471e5d9b4bfecfdc6b5f"><div class="ttname"><a href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a></div><div class="ttdeci">static unsigned int get_bits(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00379">get_bits.h:379</a></div></div>
<div class="ttc" id="amov_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="mov_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l08166">mov.c:8166</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_stream_info_html_ab594b4274b19c26f3979fe74f67e88d1"><div class="ttname"><a href="struct_m_o_v_fragment_stream_info.html#ab594b4274b19c26f3979fe74f67e88d1">MOVFragmentStreamInfo::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00128">isom.h:128</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html_abc63a60ccc08b222161f3a50de8d3262"><div class="ttname"><a href="struct_m_o_v_fragment.html#abc63a60ccc08b222161f3a50de8d3262">MOVFragment::moof_offset</a></div><div class="ttdeci">uint64_t moof_offset</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00093">isom.h:93</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a84f9bc5718e8fe14bcc499d093d937ba"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a84f9bc5718e8fe14bcc499d093d937ba">MOVStreamContext::ctts_sample</a></div><div class="ttdeci">int ctts_sample</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00181">isom.h:181</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_aa1bba687784303efce7036088d091169"><div class="ttname"><a href="struct_m_o_v_stream_context.html#aa1bba687784303efce7036088d091169">MOVStreamContext::drefs_count</a></div><div class="ttdeci">unsigned drefs_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00201">isom.h:201</a></div></div>
<div class="ttc" id="alibavformat_2dv_8c_html_a04765e40701a2d0973bf670eaa9a5f1d"><div class="ttname"><a href="libavformat_2dv_8c.html#a04765e40701a2d0973bf670eaa9a5f1d">avpriv_dv_produce_packet</a></div><div class="ttdeci">int avpriv_dv_produce_packet(DVDemuxContext *c, AVPacket *pkt, uint8_t *buf, int buf_size, int64_t pos)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2dv_8c_source.html#l00372">dv.c:372</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_ae61cc93c96975262af4bca9f0f769cad"><div class="ttname"><a href="struct_m_o_v_stream_context.html#ae61cc93c96975262af4bca9f0f769cad">MOVStreamContext::index_ranges</a></div><div class="ttdeci">MOVIndexRange * index_ranges</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00194">isom.h:194</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23">AV_FIELD_TT</a></div><div class="ttdeci">@ AV_FIELD_TT</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00039">codec_par.h:39</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_afdc5a213df0ed853e1e8bbfd5f2d102f"><div class="ttname"><a href="struct_m_o_v_stream_context.html#afdc5a213df0ed853e1e8bbfd5f2d102f">MOVStreamContext::ctts_count</a></div><div class="ttdeci">unsigned int ctts_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00169">isom.h:169</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_ac36dbec917251f24fb626e4e09e1b056"><div class="ttname"><a href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a></div><div class="ttdeci">static void finish(void)</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00345">movenc.c:345</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a12826d21779289356722971d362c583c"><div class="ttname"><a href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">AVStream::codecpar</a></div><div class="ttdeci">AVCodecParameters * codecpar</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01034">avformat.h:1034</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_afaed2f07de9ca84b8476892a067c43f9"><div class="ttname"><a href="struct_m_o_v_stream_context.html#afaed2f07de9ca84b8476892a067c43f9">MOVStreamContext::cenc</a></div><div class="ttdeci">struct MOVStreamContext::@0 cenc</div></div>
<div class="ttc" id="amov_8c_html_a20e97e5cf57f2e2909ccfb8e5fec6ab4"><div class="ttname"><a href="mov_8c.html#a20e97e5cf57f2e2909ccfb8e5fec6ab4">aax_filter</a></div><div class="ttdeci">static int aax_filter(uint8_t *input, int size, MOVContext *c)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01103">mov.c:1103</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a2689966edbe494482dfdfaa4efdf95d3"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a2689966edbe494482dfdfaa4efdf95d3">AV_OPT_TYPE_BINARY</a></div><div class="ttdeci">@ AV_OPT_TYPE_BINARY</div><div class="ttdoc">offset must point to a pointer immediately followed by an int for the length</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00231">opt.h:231</a></div></div>
<div class="ttc" id="apixdesc_8c_html_a7a5b3f4d128f0a0112b4a91f75055339"><div class="ttname"><a href="pixdesc_8c.html#a7a5b3f4d128f0a0112b4a91f75055339">av_color_space_name</a></div><div class="ttdeci">const char * av_color_space_name(enum AVColorSpace space)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02966">pixdesc.c:2966</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga8ac567e12e7637fa5cba87c1b9841f49"><div class="ttname"><a href="group__lavc__packet.html#ga8ac567e12e7637fa5cba87c1b9841f49">av_packet_add_side_data</a></div><div class="ttdeci">FF_ENABLE_DEPRECATION_WARNINGS int av_packet_add_side_data(AVPacket *pkt, enum AVPacketSideDataType type, uint8_t *data, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00298">avpacket.c:298</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceae6753ab38dc444ec81089ad18f962cbb"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceae6753ab38dc444ec81089ad18f962cbb">AV_CODEC_ID_SPEEX</a></div><div class="ttdeci">@ AV_CODEC_ID_SPEEX</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00453">codec_id.h:453</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a577b869e34ccd996791fa20d350915e9"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a577b869e34ccd996791fa20d350915e9">MOVStreamContext::format</a></div><div class="ttdeci">uint32_t format</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00235">isom.h:235</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gaed5482506b009b48569356a08b21e403"><div class="ttname"><a href="group__lavu__misc.html#gaed5482506b009b48569356a08b21e403">AV_FOURCC_MAX_STRING_SIZE</a></div><div class="ttdeci">#define AV_FOURCC_MAX_STRING_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00346">avutil.h:346</a></div></div>
<div class="ttc" id="aavformat_8h_html_ab87b74d5eff79c28e7756f893d57c4d7"><div class="ttname"><a href="avformat_8h.html#ab87b74d5eff79c28e7756f893d57c4d7">AVFMT_SEEK_TO_PTS</a></div><div class="ttdeci">#define AVFMT_SEEK_TO_PTS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00484">avformat.h:484</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea5144fb79599a0c61ef1e66ef72b6f04c"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea5144fb79599a0c61ef1e66ef72b6f04c">AV_CODEC_ID_PCM_S16BE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S16BE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00309">codec_id.h:309</a></div></div>
<div class="ttc" id="amov_8c_html_a37ca04e208e4539edc5bff46ae7ef148"><div class="ttname"><a href="mov_8c.html#a37ca04e208e4539edc5bff46ae7ef148">mov_read_mdhd</a></div><div class="ttdeci">static int mov_read_mdhd(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01435">mov.c:1435</a></div></div>
<div class="ttc" id="aarm_2vp56__arith_8h_html_a2e9a0e2ee6ec47b10497aa3fa424707a"><div class="ttname"><a href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a></div><div class="ttdeci">#define U(x)</div><div class="ttdef"><b>Definition:</b> <a href="arm_2vp56__arith_8h_source.html#l00037">vp56_arith.h:37</a></div></div>
<div class="ttc" id="amov_8c_html_ab08b68a3f1f84dd49431874dacaaa0ff"><div class="ttname"><a href="mov_8c.html#ab08b68a3f1f84dd49431874dacaaa0ff">mov_read_ctts</a></div><div class="ttdeci">static int mov_read_ctts(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03041">mov.c:3041</a></div></div>
<div class="ttc" id="aisom_8h_html_a7eeab2ab9fe996844b247c3a94465e1e"><div class="ttname"><a href="isom_8h.html#a7eeab2ab9fe996844b247c3a94465e1e">MOV_FRAG_SAMPLE_FLAG_IS_NON_SYNC</a></div><div class="ttdeci">#define MOV_FRAG_SAMPLE_FLAG_IS_NON_SYNC</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00330">isom.h:330</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="amov_8c_html_a18642b86a90a58b7915691b57f44fb11"><div class="ttname"><a href="mov_8c.html#a18642b86a90a58b7915691b57f44fb11">mov_read_aclr</a></div><div class="ttdeci">static int mov_read_aclr(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01810">mov.c:1810</a></div></div>
<div class="ttc" id="aavformat_8h_html_a998c3af80d050fd3d4f6a209fd5a87bc"><div class="ttname"><a href="avformat_8h.html#a998c3af80d050fd3d4f6a209fd5a87bc">AVSEEK_FLAG_ANY</a></div><div class="ttdeci">#define AVSEEK_FLAG_ANY</div><div class="ttdoc">seek to any frame, even non-keyframes</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l02393">avformat.h:2393</a></div></div>
<div class="ttc" id="aintfloat_8h_html_a2dc216ec0441d07d650e42d7bdb94b00"><div class="ttname"><a href="intfloat_8h.html#a2dc216ec0441d07d650e42d7bdb94b00">av_int2float</a></div><div class="ttdeci">static av_always_inline float av_int2float(uint32_t i)</div><div class="ttdef"><b>Definition:</b> <a href="intfloat_8h_source.html#l00040">intfloat.h:40</a></div></div>
<div class="ttc" id="agroup__lavu__video__stereo3d_html_gga12fe9672eeaeb8980960faa96d2fcee6a276701c16077443c9526dd28da8001a7"><div class="ttname"><a href="group__lavu__video__stereo3d.html#gga12fe9672eeaeb8980960faa96d2fcee6a276701c16077443c9526dd28da8001a7">AV_STEREO3D_2D</a></div><div class="ttdeci">@ AV_STEREO3D_2D</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00055">stereo3d.h:55</a></div></div>
<div class="ttc" id="alibcdio_8c_html_aaf64d43f28f7aaf168968366472d52d7"><div class="ttname"><a href="libcdio_8c.html#aaf64d43f28f7aaf168968366472d52d7">read_seek</a></div><div class="ttdeci">static int read_seek(AVFormatContext *ctx, int stream_index, int64_t timestamp, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="libcdio_8c_source.html#l00153">libcdio.c:153</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_stream_info_html_ae05623aea3738f661957b3b5c40ce117"><div class="ttname"><a href="struct_m_o_v_fragment_stream_info.html#ae05623aea3738f661957b3b5c40ce117">MOVFragmentStreamInfo::sidx_pts</a></div><div class="ttdeci">int64_t sidx_pts</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00129">isom.h:129</a></div></div>
<div class="ttc" id="atimecode_8h_html"><div class="ttname"><a href="timecode_8h.html">timecode.h</a></div></div>
<div class="ttc" id="amov_8c_html_a9ec4d441a01a5ff31c301f33c2808ba9"><div class="ttname"><a href="mov_8c.html#a9ec4d441a01a5ff31c301f33c2808ba9">get_current_frag_stream_info</a></div><div class="ttdeci">static MOVFragmentStreamInfo * get_current_frag_stream_info(MOVFragmentIndex *frag_index)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01216">mov.c:1216</a></div></div>
<div class="ttc" id="astruct_a_v_d_o_v_i_decoder_configuration_record_html_a3182af2d5d6ca0c10ad6cb0e5aa5c71f"><div class="ttname"><a href="struct_a_v_d_o_v_i_decoder_configuration_record.html#a3182af2d5d6ca0c10ad6cb0e5aa5c71f">AVDOVIDecoderConfigurationRecord::dv_version_major</a></div><div class="ttdeci">uint8_t dv_version_major</div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8h_source.html#l00052">dovi_meta.h:52</a></div></div>
<div class="ttc" id="atimecode_8c_html_a8cadcdf7e38091651068f70adb94f867"><div class="ttname"><a href="timecode_8c.html#a8cadcdf7e38091651068f70adb94f867">av_timecode_make_string</a></div><div class="ttdeci">char * av_timecode_make_string(const AVTimecode *tc, char *buf, int framenum)</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8c_source.html#l00105">timecode.c:105</a></div></div>
<div class="ttc" id="aaes__ctr_8c_html_a5cdcc3952fe816b7a3333930955bd32b"><div class="ttname"><a href="aes__ctr_8c.html#a5cdcc3952fe816b7a3333930955bd32b">av_aes_ctr_alloc</a></div><div class="ttdeci">struct AVAESCTR * av_aes_ctr_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="aes__ctr_8c_source.html#l00036">aes_ctr.c:36</a></div></div>
<div class="ttc" id="alibcdio_8c_html_a3469cc7152b70da4356d17e698a55850"><div class="ttname"><a href="libcdio_8c.html#a3469cc7152b70da4356d17e698a55850">read_close</a></div><div class="ttdeci">static av_cold int read_close(AVFormatContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="libcdio_8c_source.html#l00145">libcdio.c:145</a></div></div>
<div class="ttc" id="amov_8c_html_a67867a7c5f0d6f8cc5c2fda4f2fd0776"><div class="ttname"><a href="mov_8c.html#a67867a7c5f0d6f8cc5c2fda4f2fd0776">mov_read_enda</a></div><div class="ttdeci">static int mov_read_enda(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01535">mov.c:1535</a></div></div>
<div class="ttc" id="amov_8c_html_ad280c9895b016bdee2b3e2d4f4f07d92"><div class="ttname"><a href="mov_8c.html#ad280c9895b016bdee2b3e2d4f4f07d92">mov_read_chap</a></div><div class="ttdeci">static int mov_read_chap(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04681">mov.c:4681</a></div></div>
<div class="ttc" id="aavio_8h_html_a63157a668f29b8f5a89f00bc24838b8e"><div class="ttname"><a href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a></div><div class="ttdeci">static av_always_inline int64_t avio_tell(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00557">avio.h:557</a></div></div>
<div class="ttc" id="astruct_m_o_v_atom_html"><div class="ttname"><a href="struct_m_o_v_atom.html">MOVAtom</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00082">isom.h:82</a></div></div>
<div class="ttc" id="aisom_8h_html_a01406d23831b4fb80160e18048f279e9"><div class="ttname"><a href="isom_8h.html#a01406d23831b4fb80160e18048f279e9">MOV_TRUN_SAMPLE_DURATION</a></div><div class="ttdeci">#define MOV_TRUN_SAMPLE_DURATION</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00324">isom.h:324</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a5268fcf4ae8ed27edef54f836b926d93"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a5268fcf4ae8ed27edef54f836b926d93">AVCodecParameters::bit_rate</a></div><div class="ttdeci">int64_t bit_rate</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00089">codec_par.h:89</a></div></div>
<div class="ttc" id="astruct_m_o_v_encryption_index_html_a1855cb3a13a9d17426b85e432c73b47c"><div class="ttname"><a href="struct_m_o_v_encryption_index.html#a1855cb3a13a9d17426b85e432c73b47c">MOVEncryptionIndex::auxiliary_offsets</a></div><div class="ttdeci">uint64_t * auxiliary_offsets</div><div class="ttdoc">Absolute seek position.</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00123">isom.h:123</a></div></div>
<div class="ttc" id="aaeval_8c_html_a16aca557f352132b55bbc3c4769daa8b"><div class="ttname"><a href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a></div><div class="ttdeci">static double val(void *priv, double ch)</div><div class="ttdef"><b>Definition:</b> <a href="aeval_8c_source.html#l00076">aeval.c:76</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_stream_info_html_ab9d7a747ecfa0d08fe79e12f18fbcd1c"><div class="ttname"><a href="struct_m_o_v_fragment_stream_info.html#ab9d7a747ecfa0d08fe79e12f18fbcd1c">MOVFragmentStreamInfo::next_trun_dts</a></div><div class="ttdeci">int64_t next_trun_dts</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00132">isom.h:132</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a860450fba1f740387dc082792ad89517"><div class="ttname"><a href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf type</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_stream_info_html_a3e57c1446839c78f0bab2951c90c886e"><div class="ttname"><a href="struct_m_o_v_fragment_stream_info.html#a3e57c1446839c78f0bab2951c90c886e">MOVFragmentStreamInfo::tfdt_dts</a></div><div class="ttdeci">int64_t tfdt_dts</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00131">isom.h:131</a></div></div>
<div class="ttc" id="aavformat_8h_html_af7e859adfb2f1819dd733bc19b600585"><div class="ttname"><a href="avformat_8h.html#af7e859adfb2f1819dd733bc19b600585">AV_DISPOSITION_TIMED_THUMBNAILS</a></div><div class="ttdeci">#define AV_DISPOSITION_TIMED_THUMBNAILS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00842">avformat.h:842</a></div></div>
<div class="ttc" id="atranscode__aac_8c_html_a4fbb704fb96c36a78a36eee010306ce7"><div class="ttname"><a href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a></div><div class="ttdeci">static int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="transcode__aac_8c_source.html#l00647">transcode_aac.c:647</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1">AV_PKT_DATA_DISPLAYMATRIX</a></div><div class="ttdeci">@ AV_PKT_DATA_DISPLAYMATRIX</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00108">packet.h:108</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a></div><div class="ttdeci">@ AV_CODEC_ID_MP3</div><div class="ttdoc">preferred ID for decoding MPEG audio layer 1, 2 or 3</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00419">codec_id.h:419</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a15664fbc767d9389307a202a8663568d"><div class="ttname"><a href="cbs__vp9_8c.html#a15664fbc767d9389307a202a8663568d">ss</a></div><div class="ttdeci">#define ss(width, name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00261">cbs_vp9.c:261</a></div></div>
<div class="ttc" id="astruct_a_v_spherical_mapping_html_a6cbcda5b8d0118e50e4a1b574919af50"><div class="ttname"><a href="struct_a_v_spherical_mapping.html#a6cbcda5b8d0118e50e4a1b574919af50">AVSphericalMapping::bound_right</a></div><div class="ttdeci">uint32_t bound_right</div><div class="ttdoc">Distance from the right edge.</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00169">spherical.h:169</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02cae1efa8b010ca5331f1f845104e7c0667"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02cae1efa8b010ca5331f1f845104e7c0667">AV_FIELD_TB</a></div><div class="ttdeci">@ AV_FIELD_TB</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00041">codec_par.h:41</a></div></div>
<div class="ttc" id="astruct_m_o_v_encryption_index_html_a5305a7dd20e2cdbfe125fe032105c013"><div class="ttname"><a href="struct_m_o_v_encryption_index.html#a5305a7dd20e2cdbfe125fe032105c013">MOVEncryptionIndex::auxiliary_info_sizes</a></div><div class="ttdeci">uint8_t * auxiliary_info_sizes</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00120">isom.h:120</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_aa3c2155bb764dcbe4d4cd9a86c41e626"><div class="ttname"><a href="struct_m_o_v_stream_context.html#aa3c2155bb764dcbe4d4cd9a86c41e626">MOVStreamContext::current_index_range</a></div><div class="ttdeci">MOVIndexRange * current_index_range</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00195">isom.h:195</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_ae495a86ddec02af7d5a2805beba9ac9f"><div class="ttname"><a href="struct_a_v_stream.html#ae495a86ddec02af7d5a2805beba9ac9f">AVStream::internal</a></div><div class="ttdeci">AVStreamInternal * internal</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01108">avformat.h:1108</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga4fd9c0b8e663cf3d55e89fbc6ce71602"><div class="ttname"><a href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a></div><div class="ttdeci">int av_reduce(int *dst_num, int *dst_den, int64_t num, int64_t den, int64_t max)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00035">rational.c:35</a></div></div>
<div class="ttc" id="amov_8c_html_a027536bc27f9a6ef7c11b785a959e490"><div class="ttname"><a href="mov_8c.html#a027536bc27f9a6ef7c11b785a959e490">update_frag_index</a></div><div class="ttdeci">static int update_frag_index(MOVContext *c, int64_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01321">mov.c:1321</a></div></div>
<div class="ttc" id="astruct_m_o_v_track_ext_html_a723cd125178a15661e754777cf498cb6"><div class="ttname"><a href="struct_m_o_v_track_ext.html#a723cd125178a15661e754777cf498cb6">MOVTrackExt::duration</a></div><div class="ttdeci">unsigned duration</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00104">isom.h:104</a></div></div>
<div class="ttc" id="amov_8c_html_a94e6e7eff22c7876691ef37b898f9fab"><div class="ttname"><a href="mov_8c.html#a94e6e7eff22c7876691ef37b898f9fab">mov_read_saiz</a></div><div class="ttdeci">static int mov_read_saiz(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06202">mov.c:6202</a></div></div>
<div class="ttc" id="adovi__meta_8c_html_ac09def4bb9ada4ae22d7a4b478aaeaa8"><div class="ttname"><a href="dovi__meta_8c.html#ac09def4bb9ada4ae22d7a4b478aaeaa8">av_dovi_alloc</a></div><div class="ttdeci">AVDOVIDecoderConfigurationRecord * av_dovi_alloc(size_t *size)</div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8c_source.html#l00024">dovi_meta.c:24</a></div></div>
<div class="ttc" id="aisom_8h_html_a3e6e523d1b441ef4140224db61f1a74f"><div class="ttname"><a href="isom_8h.html#a3e6e523d1b441ef4140224db61f1a74f">MOV_FRAG_SAMPLE_FLAG_DEPENDS_YES</a></div><div class="ttdeci">#define MOV_FRAG_SAMPLE_FLAG_DEPENDS_YES</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00337">isom.h:337</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a79d9b90ec899fa52b6f3d61d75327530"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a79d9b90ec899fa52b6f3d61d75327530">MOVStreamContext::timecode_track</a></div><div class="ttdeci">int timecode_track</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00204">isom.h:204</a></div></div>
<div class="ttc" id="aisom_8h_html_abfbee420834e4362fd8d78733a328fd3"><div class="ttname"><a href="isom_8h.html#abfbee420834e4362fd8d78733a328fd3">MOV_TRUN_DATA_OFFSET</a></div><div class="ttdeci">#define MOV_TRUN_DATA_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00322">isom.h:322</a></div></div>
<div class="ttc" id="aencryption__info_8c_html_ab5df7d12f40e3fe2300dfc7ade895814"><div class="ttname"><a href="encryption__info_8c.html#ab5df7d12f40e3fe2300dfc7ade895814">av_encryption_info_clone</a></div><div class="ttdeci">AVEncryptionInfo * av_encryption_info_clone(const AVEncryptionInfo *info)</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8c_source.html#l00063">encryption_info.c:63</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga7a9a991cb7837b10ffd44725263de425"><div class="ttname"><a href="group__lavu__dict.html#ga7a9a991cb7837b10ffd44725263de425">AV_DICT_DONT_STRDUP_VAL</a></div><div class="ttdeci">#define AV_DICT_DONT_STRDUP_VAL</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00075">dict.h:74</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a23b5a34c9b286dac2d2b5291e05386b9"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a23b5a34c9b286dac2d2b5291e05386b9">MOVStreamContext::encryption_index</a></div><div class="ttdeci">MOVEncryptionIndex * encryption_index</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00242">isom.h:242</a></div></div>
<div class="ttc" id="avf__v360_8c_html_a17c41ffe363b0e954806d2335070e961"><div class="ttname"><a href="vf__v360_8c.html#a17c41ffe363b0e954806d2335070e961">rotate</a></div><div class="ttdeci">static void rotate(const float rot_quaternion[2][4], float *vec)</div><div class="ttdef"><b>Definition:</b> <a href="vf__v360_8c_source.html#l03920">vf_v360.c:3920</a></div></div>
<div class="ttc" id="astruct_m_o_v_atom_html_af351990ecbec5e1b234103fac0da0b9c"><div class="ttname"><a href="struct_m_o_v_atom.html#af351990ecbec5e1b234103fac0da0b9c">MOVAtom::size</a></div><div class="ttdeci">int64_t size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00084">isom.h:84</a></div></div>
<div class="ttc" id="abfin_2bswap_8h_html_a9b3255993c3a688d63f61455099472f1"><div class="ttname"><a href="bfin_2bswap_8h.html#a9b3255993c3a688d63f61455099472f1">av_bswap32</a></div><div class="ttdeci">#define av_bswap32</div><div class="ttdef"><b>Definition:</b> <a href="bfin_2bswap_8h_source.html#l00033">bswap.h:33</a></div></div>
<div class="ttc" id="astruct_a_v_content_light_metadata_html_a4e9bfc44c6b87bbf096141fae12e1692"><div class="ttname"><a href="struct_a_v_content_light_metadata.html#a4e9bfc44c6b87bbf096141fae12e1692">AVContentLightMetadata::MaxFALL</a></div><div class="ttdeci">unsigned MaxFALL</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00107">mastering_display_metadata.h:107</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_html_ae6c73b17705abd3935c7a2a9e64fe42e"><div class="ttname"><a href="struct_m_o_v_fragment_index.html#ae6c73b17705abd3935c7a2a9e64fe42e">MOVFragmentIndex::nb_items</a></div><div class="ttdeci">int nb_items</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00149">isom.h:149</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a57bb9e0e79c26a780716fe4a40675af7"><div class="ttname"><a href="struct_a_v_stream_internal.html#a57bb9e0e79c26a780716fe4a40675af7">AVStreamInternal::index_entries_allocated_size</a></div><div class="ttdeci">unsigned int index_entries_allocated_size</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00231">internal.h:231</a></div></div>
<div class="ttc" id="amov_8c_html_a7db82c4aa095607ea3b443285588dc6f"><div class="ttname"><a href="mov_8c.html#a7db82c4aa095607ea3b443285588dc6f">mov_read_ares</a></div><div class="ttdeci">static int mov_read_ares(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01769">mov.c:1769</a></div></div>
<div class="ttc" id="amov_8c_html_a680899af4dbed041439f97c450871f4a"><div class="ttname"><a href="mov_8c.html#a680899af4dbed041439f97c450871f4a">mov_read_adrm</a></div><div class="ttdeci">static int mov_read_adrm(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00979">mov.c:979</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_afe021e2a5fba99ca05a4d6e94d147746"><div class="ttname"><a href="struct_m_o_v_stream_context.html#afe021e2a5fba99ca05a4d6e94d147746">MOVStreamContext::stps_count</a></div><div class="ttdeci">unsigned int stps_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00176">isom.h:176</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a0d1cb9b5a32b00fb6edc81ea3aae2a49"><div class="ttname"><a href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">AVPacket::stream_index</a></div><div class="ttdeci">int stream_index</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00365">packet.h:365</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga74bb2298daa9cd0b5f1d0b2c1c3e26bb"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga74bb2298daa9cd0b5f1d0b2c1c3e26bb">av_realloc</a></div><div class="ttdeci">void * av_realloc(void *ptr, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00134">mem.c:134</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea689ee50aa42c2ae666da10615ff78e10"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea689ee50aa42c2ae666da10615ff78e10">AV_CODEC_ID_PCM_S8</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S8</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00312">codec_id.h:312</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_aaedc8a0649c0419427db24018ea1736d"><div class="ttname"><a href="struct_m_o_v_stream_context.html#aaedc8a0649c0419427db24018ea1736d">MOVStreamContext::sdtp_count</a></div><div class="ttdeci">unsigned int sdtp_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00167">isom.h:167</a></div></div>
<div class="ttc" id="aavio_8h_html_af089361fd70426624d19d436a10f87ad"><div class="ttname"><a href="avio_8h.html#af089361fd70426624d19d436a10f87ad">avio_rb32</a></div><div class="ttdeci">unsigned int avio_rb32(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00785">aviobuf.c:785</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga030300ea4843c53b2fe178a434964b39"><div class="ttname"><a href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a></div><div class="ttdeci">#define AV_LOG_TRACE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00220">log.h:220</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceacc6e781037605bd089f1ebbef0c28874"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceacc6e781037605bd089f1ebbef0c28874">AV_CODEC_ID_MACE3</a></div><div class="ttdeci">@ AV_CODEC_ID_MACE3</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00427">codec_id.h:427</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a36097280ddfe8ebfc825d0f98fd00621"><div class="ttname"><a href="intreadwrite_8h.html#a36097280ddfe8ebfc825d0f98fd00621">AV_WB32</a></div><div class="ttdeci">#define AV_WB32(p, val)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00273">intreadwrite.h:273</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_item_html_a31b398f75fb1d776b548aa149616485f"><div class="ttname"><a href="struct_m_o_v_fragment_index_item.html#a31b398f75fb1d776b548aa149616485f">MOVFragmentIndexItem::nb_stream_info</a></div><div class="ttdeci">int nb_stream_info</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00141">isom.h:141</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a092fb1128d938ba59a9b1bd3579baf2a"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a092fb1128d938ba59a9b1bd3579baf2a">MOVStreamContext::pb</a></div><div class="ttdeci">AVIOContext * pb</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00159">isom.h:159</a></div></div>
<div class="ttc" id="astruct_a_v_encryption_init_info_html"><div class="ttname"><a href="struct_a_v_encryption_init_info.html">AVEncryptionInitInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8h_source.html#l00088">encryption_info.h:88</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a9db755451f14e2bf590d4b85d82b32e6"><div class="ttname"><a href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">AVStream::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00898">avformat.h:898</a></div></div>
<div class="ttc" id="aavformat_8h_html_a26c94891b37de95d520e67c2d3dbe0aa"><div class="ttname"><a href="avformat_8h.html#a26c94891b37de95d520e67c2d3dbe0aa">AVIndexEntry</a></div><div class="ttdeci">struct AVIndexEntry AVIndexEntry</div></div>
<div class="ttc" id="astruct_a_v_encryption_info_html_a36258773710a13cbe7e652853dd65709"><div class="ttname"><a href="struct_a_v_encryption_info.html#a36258773710a13cbe7e652853dd65709">AVEncryptionInfo::iv</a></div><div class="ttdeci">uint8_t * iv</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8h_source.html#l00071">encryption_info.h:71</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_acd70b72d0c0514643a5c11b2c7c8202c"><div class="ttname"><a href="struct_a_v_stream.html#acd70b72d0c0514643a5c11b2c7c8202c">AVStream::need_parsing</a></div><div class="ttdeci">enum AVStreamParseType need_parsing</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01074">avformat.h:1077</a></div></div>
<div class="ttc" id="amov_8c_html_ad0088e69eafd30418f949b4af3203261"><div class="ttname"><a href="mov_8c.html#ad0088e69eafd30418f949b4af3203261">mov_free_encryption_index</a></div><div class="ttdeci">static void mov_free_encryption_index(MOVEncryptionIndex **index)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07343">mov.c:7343</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_gab19b66e345cf1f9d50ffc26c28862bcc"><div class="ttname"><a href="group__channel__masks.html#gab19b66e345cf1f9d50ffc26c28862bcc">AV_CH_LOW_FREQUENCY</a></div><div class="ttdeci">#define AV_CH_LOW_FREQUENCY</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00052">channel_layout.h:52</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1f342e4e3615abc9314684ce6b4819c0"><div class="ttname"><a href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00063">movenc.c:63</a></div></div>
<div class="ttc" id="astruct_m_o_v_stsc_html_a7a3623575734979a56246222e98c4aa3"><div class="ttname"><a href="struct_m_o_v_stsc.html#a7a3623575734979a56246222e98c4aa3">MOVStsc::first</a></div><div class="ttdeci">int first</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00062">isom.h:62</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a66ec22464b50c285114e79604e9e0a0b"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a66ec22464b50c285114e79604e9e0a0b">AV_PKT_DATA_AUDIO_SERVICE_TYPE</a></div><div class="ttdeci">@ AV_PKT_DATA_AUDIO_SERVICE_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00120">packet.h:120</a></div></div>
<div class="ttc" id="atimecode_8c_html_ad279cd982964a2f8cc7adfa01533b412"><div class="ttname"><a href="timecode_8c.html#ad279cd982964a2f8cc7adfa01533b412">av_timecode_init</a></div><div class="ttdeci">int av_timecode_init(AVTimecode *tc, AVRational rate, int flags, int frame_start, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8c_source.html#l00222">timecode.c:222</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_gae324697cedd36e7b47a1e142dc24b805"><div class="ttname"><a href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a></div><div class="ttdeci">uint8_t * av_stream_new_side_data(AVStream *stream, enum AVPacketSideDataType type, int size)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05484">utils.c:5484</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a060002ff641fb6c358517df941e9c4c5"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">AVCodecParameters::extradata_size</a></div><div class="ttdeci">int extradata_size</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00078">codec_par.h:78</a></div></div>
<div class="ttc" id="aavio_8h_html_a39507bbc53328eae98ac7d683078fcf1"><div class="ttname"><a href="avio_8h.html#a39507bbc53328eae98ac7d683078fcf1">avio_get_str16le</a></div><div class="ttdeci">int avio_get_str16le(AVIOContext *pb, int maxlen, char *buf, int buflen)</div></div>
<div class="ttc" id="amov_8c_html_a7d269968b33e484d177b259c879e74e6"><div class="ttname"><a href="mov_8c.html#a7d269968b33e484d177b259c879e74e6">mov_metadata_track_or_disc_number</a></div><div class="ttdeci">static int mov_metadata_track_or_disc_number(MOVContext *c, AVIOContext *pb, unsigned len, const char *key)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00082">mov.c:82</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_gae67f143237b2cb2936c9b147aa6dfde3"><div class="ttname"><a href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a></div><div class="ttdeci">AVDictionaryEntry * av_dict_get(const AVDictionary *m, const char *key, const AVDictionaryEntry *prev, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00040">dict.c:40</a></div></div>
<div class="ttc" id="astruct_m_o_v_elst_html_a8c470d8f38204a6ae98d2f2efb08d2f3"><div class="ttname"><a href="struct_m_o_v_elst.html#a8c470d8f38204a6ae98d2f2efb08d2f3">MOVElst::time</a></div><div class="ttdeci">int64_t time</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00069">isom.h:69</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_ad3c990d78933aafd8096a21f01c19051"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#ad3c990d78933aafd8096a21f01c19051">AV_RB64</a></div><div class="ttdeci">#define AV_RB64</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00164">intreadwrite.h:164</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga869fd8884d8d29a7a4910d879926d94a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a></div><div class="ttdeci">void * av_fast_realloc(void *ptr, unsigned int *size, size_t min_size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00478">mem.c:478</a></div></div>
<div class="ttc" id="aisom_8h_html_a1131615c6cef3f78bb03bbdc9847e8ae"><div class="ttname"><a href="isom_8h.html#a1131615c6cef3f78bb03bbdc9847e8ae">FF_MOV_FLAG_MFRA_PTS</a></div><div class="ttdeci">#define FF_MOV_FLAG_MFRA_PTS</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00373">isom.h:373</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a667b04d7fb6ef46db4da4af554c5b6f7"><div class="ttname"><a href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a></div><div class="ttdeci">#define width</div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a4d418b807283607a231d2d8cdf559f00"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">AVCodecParameters::channels</a></div><div class="ttdeci">int channels</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00166">codec_par.h:166</a></div></div>
<div class="ttc" id="aisom_8h_html_a0efbc965f03455c5f6e09cbc7c0851d8"><div class="ttname"><a href="isom_8h.html#a0efbc965f03455c5f6e09cbc7c0851d8">ff_mov_read_esds</a></div><div class="ttdeci">int ff_mov_read_esds(AVFormatContext *fc, AVIOContext *pb)</div><div class="ttdef"><b>Definition:</b> <a href="mov__esds_8c_source.html#l00023">mov_esds.c:23</a></div></div>
<div class="ttc" id="alibavutil_2stereo3d_8h_html"><div class="ttname"><a href="libavutil_2stereo3d_8h.html">stereo3d.h</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html"><div class="ttname"><a href="intreadwrite_8h.html">intreadwrite.h</a></div></div>
<div class="ttc" id="amov_8c_html_ad97adeca7697a7f003f0ecb7631b2bf2"><div class="ttname"><a href="mov_8c.html#ad97adeca7697a7f003f0ecb7631b2bf2">mov_read_coll</a></div><div class="ttdeci">static int mov_read_coll(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05480">mov.c:5480</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="amov_8c_html_ac82aba954beec243b26f26711e43de25"><div class="ttname"><a href="mov_8c.html#ac82aba954beec243b26f26711e43de25">mov_read_trak</a></div><div class="ttdeci">static int mov_read_trak(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04229">mov.c:4229</a></div></div>
<div class="ttc" id="aisom_8h_html_a37fbd0c474fd0d974ab0ee3622b10bb1"><div class="ttname"><a href="isom_8h.html#a37fbd0c474fd0d974ab0ee3622b10bb1">MOV_TFHD_DEFAULT_BASE_IS_MOOF</a></div><div class="ttdeci">#define MOV_TFHD_DEFAULT_BASE_IS_MOOF</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00320">isom.h:320</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gadfa708660b85a56749c753124de2da7d"><div class="ttname"><a href="group__lavc__packet.html#gadfa708660b85a56749c753124de2da7d">av_new_packet</a></div><div class="ttdeci">int av_new_packet(AVPacket *pkt, int size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00088">avpacket.c:88</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97ad87020fae601b684bfb27ee64a457303"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97ad87020fae601b684bfb27ee64a457303">AV_PKT_DATA_STEREO3D</a></div><div class="ttdeci">@ AV_PKT_DATA_STEREO3D</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00114">packet.h:114</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a2f91b26ecc353d5d75da4d8af37c1b3e"><div class="ttname"><a href="struct_m_o_v_context.html#a2f91b26ecc353d5d75da4d8af37c1b3e">MOVContext::aax_mode</a></div><div class="ttdeci">unsigned int aax_mode</div><div class="ttdoc">'aax' file has been detected</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00282">isom.h:282</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceabb04ef46d4490540a3a0243aaa919fc9"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceabb04ef46d4490540a3a0243aaa919fc9">AV_CODEC_ID_BMP</a></div><div class="ttdeci">@ AV_CODEC_ID_BMP</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00127">codec_id.h:127</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a9b9844e5b797d56df8279505b9bd52da"><div class="ttname"><a href="struct_m_o_v_context.html#a9b9844e5b797d56df8279505b9bd52da">MOVContext::trex_data</a></div><div class="ttdeci">MOVTrackExt * trex_data</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00261">isom.h:261</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html_aa38678f2cad36f120d42e56449c5edb4"><div class="ttname"><a href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">AVDictionaryEntry::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00083">dict.h:83</a></div></div>
<div class="ttc" id="aisom_8h_html_af9ea46fb6cdfe3df38038452d8b06284"><div class="ttname"><a href="isom_8h.html#af9ea46fb6cdfe3df38038452d8b06284">MOV_TFHD_DEFAULT_DURATION</a></div><div class="ttdeci">#define MOV_TFHD_DEFAULT_DURATION</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00316">isom.h:316</a></div></div>
<div class="ttc" id="amov_8c_html_af838eccccc4fca0e4a7f2ce886ed0d31"><div class="ttname"><a href="mov_8c.html#af838eccccc4fca0e4a7f2ce886ed0d31">ALAC_EXTRADATA_SIZE</a></div><div class="ttdeci">#define ALAC_EXTRADATA_SIZE</div></div>
<div class="ttc" id="amov_8c_html_a35f01be958ff6c4bbc82981841cf29b3"><div class="ttname"><a href="mov_8c.html#a35f01be958ff6c4bbc82981841cf29b3">DRM_BLOB_SIZE</a></div><div class="ttdeci">#define DRM_BLOB_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00977">mov.c:977</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a5fe6406e07337dcb0125bd03fba7ea2c"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a5fe6406e07337dcb0125bd03fba7ea2c">AV_PKT_DATA_MASTERING_DISPLAY_METADATA</a></div><div class="ttdeci">@ AV_PKT_DATA_MASTERING_DISPLAY_METADATA</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00222">packet.h:222</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a7d537039ea0e18164d9edb0b5ca984dd"><div class="ttname"><a href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample format(the sample packing is implied by the sample format) and sample rate. The lists are not just lists</div></div>
<div class="ttc" id="avf__curves_8c_html_a1b5e77b92dea40e646b2e7e196e0b322"><div class="ttname"><a href="vf__curves_8c.html#a1b5e77b92dea40e646b2e7e196e0b322">g</a></div><div class="ttdeci">const char * g</div><div class="ttdef"><b>Definition:</b> <a href="vf__curves_8c_source.html#l00115">vf_curves.c:115</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a158ab3de3ad3c6fc547503f6953b6409"><div class="ttname"><a href="struct_m_o_v_context.html#a158ab3de3ad3c6fc547503f6953b6409">MOVContext::ignore_editlist</a></div><div class="ttdeci">int ignore_editlist</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00268">isom.h:268</a></div></div>
<div class="ttc" id="aisom_8h_html_a94336d21bc69d101fe94c04cd8499960"><div class="ttname"><a href="isom_8h.html#a94336d21bc69d101fe94c04cd8499960">MOVContext</a></div><div class="ttdeci">struct MOVContext MOVContext</div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_af1497dfd75bf2d7472206501de87fb49"><div class="ttname"><a href="struct_m_o_v_stream_context.html#af1497dfd75bf2d7472206501de87fb49">MOVStreamContext::stsc_count</a></div><div class="ttdeci">unsigned int stsc_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00172">isom.h:172</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a477fc772e1ee120e70c5ac906331ca7c"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a477fc772e1ee120e70c5ac906331ca7c">MOVStreamContext::stsc_data</a></div><div class="ttdeci">MOVStsc * stsc_data</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00173">isom.h:173</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72">AV_CODEC_ID_VP9</a></div><div class="ttdeci">@ AV_CODEC_ID_VP9</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00217">codec_id.h:217</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9f76f2475ef24ff4c9771dd53072d040"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">AVCodecParameters::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:60</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea90ffce5aedda33269b22221916cd8487"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea90ffce5aedda33269b22221916cd8487">AV_CODEC_ID_MP2</a></div><div class="ttdeci">@ AV_CODEC_ID_MP2</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00418">codec_id.h:418</a></div></div>
<div class="ttc" id="astruct_m_o_v_index_range_html_afbabb9cd7a3d8b5ee9afacc43613df9e"><div class="ttname"><a href="struct_m_o_v_index_range.html#afbabb9cd7a3d8b5ee9afacc43613df9e">MOVIndexRange::end</a></div><div class="ttdeci">int64_t end</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00155">isom.h:155</a></div></div>
<div class="ttc" id="aisom_8h_html_a672963344ffb7df7728e3d92d1aa9331"><div class="ttname"><a href="isom_8h.html#a672963344ffb7df7728e3d92d1aa9331">MOV_TRUN_FIRST_SAMPLE_FLAGS</a></div><div class="ttdeci">#define MOV_TRUN_FIRST_SAMPLE_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00323">isom.h:323</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_af4b2a1fb591ea660d39410d0731d5827"><div class="ttname"><a href="struct_m_o_v_stream_context.html#af4b2a1fb591ea660d39410d0731d5827">MOVStreamContext::stsz_sample_size</a></div><div class="ttdeci">unsigned int stsz_sample_size</div><div class="ttdoc">always contains sample size from stsz atom</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00183">isom.h:183</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a59da9747d2773214e162f59f5afe66fb"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a59da9747d2773214e162f59f5afe66fb">MOVStreamContext::keyframe_absent</a></div><div class="ttdeci">int keyframe_absent</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00186">isom.h:186</a></div></div>
<div class="ttc" id="amips_8txt_html_a1fbad9337ceb50622aa5cb6b2ff47c09"><div class="ttname"><a href="mips_8txt.html#a1fbad9337ceb50622aa5cb6b2ff47c09">info</a></div><div class="ttdeci">MIPS optimizations info</div><div class="ttdef"><b>Definition:</b> <a href="mips_8txt_source.html#l00001">mips.txt:2</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a98b487c491f258c1bd7484fb7f92dff8"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a98b487c491f258c1bd7484fb7f92dff8">MOVStreamContext::data_size</a></div><div class="ttdeci">int64_t data_size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00210">isom.h:210</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html"><div class="ttname"><a href="struct_m_o_v_stream_context.html">MOVStreamContext</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00158">isom.h:158</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_stream_info_html_ad768ddefee07f66bdbe4439c281e51a7"><div class="ttname"><a href="struct_m_o_v_fragment_stream_info.html#ad768ddefee07f66bdbe4439c281e51a7">MOVFragmentStreamInfo::first_tfra_pts</a></div><div class="ttdeci">int64_t first_tfra_pts</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00130">isom.h:130</a></div></div>
<div class="ttc" id="amastering__display__metadata_8c_html_af178e07682c61609bb3bc505947cd064"><div class="ttname"><a href="mastering__display__metadata_8c.html#af178e07682c61609bb3bc505947cd064">av_mastering_display_metadata_alloc</a></div><div class="ttdeci">AVMasteringDisplayMetadata * av_mastering_display_metadata_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8c_source.html#l00027">mastering_display_metadata.c:27</a></div></div>
<div class="ttc" id="amov_8c_html_adf938ff2525e24c6d26fd6c2496028c4"><div class="ttname"><a href="mov_8c.html#adf938ff2525e24c6d26fd6c2496028c4">mov_estimate_video_delay</a></div><div class="ttdeci">static void mov_estimate_video_delay(MOVContext *c, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03378">mov.c:3378</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html_ab9e2d7cad6f7c54544fd7b08f8d438c3"><div class="ttname"><a href="struct_m_o_v_fragment.html#ab9e2d7cad6f7c54544fd7b08f8d438c3">MOVFragment::base_data_offset</a></div><div class="ttdeci">uint64_t base_data_offset</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00092">isom.h:92</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="astruct_m_o_v_dref_html_ae538b300dc51bb4e8bf604ae92a86724"><div class="ttname"><a href="struct_m_o_v_dref.html#ae538b300dc51bb4e8bf604ae92a86724">MOVDref::filename</a></div><div class="ttdeci">char filename[64]</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00078">isom.h:78</a></div></div>
<div class="ttc" id="aaes__ctr_8c_html_a87d7e8878d90781a10c20ebbb851b4dd"><div class="ttname"><a href="aes__ctr_8c.html#a87d7e8878d90781a10c20ebbb851b4dd">av_aes_ctr_crypt</a></div><div class="ttdeci">void av_aes_ctr_crypt(struct AVAESCTR *a, uint8_t *dst, const uint8_t *src, int count)</div><div class="ttdef"><b>Definition:</b> <a href="aes__ctr_8c_source.html#l00111">aes_ctr.c:111</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a598cf63387504cbd709ca98402aa6591"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a598cf63387504cbd709ca98402aa6591">AV_PKT_DATA_ICC_PROFILE</a></div><div class="ttdeci">@ AV_PKT_DATA_ICC_PROFILE</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00274">packet.h:274</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca886b3191488ef874bf3e94b3d9cec713"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca886b3191488ef874bf3e94b3d9cec713">AV_FIELD_UNKNOWN</a></div><div class="ttdeci">@ AV_FIELD_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00037">codec_par.h:37</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="astruct_m_o_v_track_ext_html_a156d71f68d8134603cd7153a8f8adda9"><div class="ttname"><a href="struct_m_o_v_track_ext.html#a156d71f68d8134603cd7153a8f8adda9">MOVTrackExt::flags</a></div><div class="ttdeci">unsigned flags</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00106">isom.h:106</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="astruct_a_v_d_o_v_i_decoder_configuration_record_html"><div class="ttname"><a href="struct_a_v_d_o_v_i_decoder_configuration_record.html">AVDOVIDecoderConfigurationRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8h_source.html#l00051">dovi_meta.h:51</a></div></div>
<div class="ttc" id="aget__bits_8h_html"><div class="ttname"><a href="get__bits_8h.html">get_bits.h</a></div></div>
<div class="ttc" id="alimits_8h_html"><div class="ttname"><a href="limits_8h.html">limits.h</a></div></div>
<div class="ttc" id="astruct_a_v_index_entry_html"><div class="ttname"><a href="struct_a_v_index_entry.html">AVIndexEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00799">avformat.h:799</a></div></div>
<div class="ttc" id="amov_8c_html_a61c25c57b474fff42c1a27c2d4e85ea9"><div class="ttname"><a href="mov_8c.html#a61c25c57b474fff42c1a27c2d4e85ea9">mov_read_sidx</a></div><div class="ttdeci">static int mov_read_sidx(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05047">mov.c:5047</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gaf02994a8bbeaa91d4757df179cbe567f"><div class="ttname"><a href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a></div><div class="ttdeci">int64_t av_rescale_q(int64_t a, AVRational bq, AVRational cq)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00142">mathematics.c:142</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gadcff0a5957a99f6fdf1eec9d5a3fdfaf"><div class="ttname"><a href="group__lavc__core.html#gadcff0a5957a99f6fdf1eec9d5a3fdfaf">AVAudioServiceType</a></div><div class="ttdeci">AVAudioServiceType</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00239">avcodec.h:239</a></div></div>
<div class="ttc" id="astruct_a_v_d_o_v_i_decoder_configuration_record_html_ae1009dfc633097df6b5c7074b684b9b5"><div class="ttname"><a href="struct_a_v_d_o_v_i_decoder_configuration_record.html#ae1009dfc633097df6b5c7074b684b9b5">AVDOVIDecoderConfigurationRecord::dv_version_minor</a></div><div class="ttdeci">uint8_t dv_version_minor</div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8h_source.html#l00053">dovi_meta.h:53</a></div></div>
<div class="ttc" id="amov_8c_html_aa073cee6495996c4768d526d443bae46"><div class="ttname"><a href="mov_8c.html#aa073cee6495996c4768d526d443bae46">mov_find_next_sample</a></div><div class="ttdeci">static AVIndexEntry * mov_find_next_sample(AVFormatContext *s, AVStream **st)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07782">mov.c:7782</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_ad3b99c4484e2d08dcd3fdb00ba98636c"><div class="ttname"><a href="struct_m_o_v_stream_context.html#ad3b99c4484e2d08dcd3fdb00ba98636c">MOVStreamContext::dref_id</a></div><div class="ttdeci">int dref_id</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00203">isom.h:203</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceafe04f75e6fdfceac4db3c8f7b4726778"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceafe04f75e6fdfceac4db3c8f7b4726778">AV_CODEC_ID_TARGA_Y216</a></div><div class="ttdeci">@ AV_CODEC_ID_TARGA_Y216</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00252">codec_id.h:252</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a86f83cf2554fb362f80499a401be8d7a"><div class="ttname"><a href="struct_m_o_v_context.html#a86f83cf2554fb362f80499a401be8d7a">MOVContext::decryption_key</a></div><div class="ttdeci">uint8_t * decryption_key</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00294">isom.h:294</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a0659d458e171e419d9c049bc36e6d22d"><div class="ttname"><a href="struct_m_o_v_context.html#a0659d458e171e419d9c049bc36e6d22d">MOVContext::handbrake_version</a></div><div class="ttdeci">int handbrake_version</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00264">isom.h:264</a></div></div>
<div class="ttc" id="astruct_m_o_v_elst_html_a652e67753f4acce70fb26147505f883c"><div class="ttname"><a href="struct_m_o_v_elst.html#a652e67753f4acce70fb26147505f883c">MOVElst::duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00068">isom.h:68</a></div></div>
<div class="ttc" id="astruct_m_o_v_dref_html_a40de519bc91d30b63dfa1f041db995b2"><div class="ttname"><a href="struct_m_o_v_dref.html#a40de519bc91d30b63dfa1f041db995b2">MOVDref::path</a></div><div class="ttdeci">char * path</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00075">isom.h:75</a></div></div>
<div class="ttc" id="amov_8c_html_a6ed7e16aa7e593d87daa2d13183f0a69"><div class="ttname"><a href="mov_8c.html#a6ed7e16aa7e593d87daa2d13183f0a69">mov_read_dvcc_dvvc</a></div><div class="ttdeci">static int mov_read_dvcc_dvvc(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06815">mov.c:6815</a></div></div>
<div class="ttc" id="amov_8c_html_a32af6da2973578d47bdd51c6a53afde0"><div class="ttname"><a href="mov_8c.html#a32af6da2973578d47bdd51c6a53afde0">mov_try_read_block</a></div><div class="ttdeci">static int mov_try_read_block(AVIOContext *pb, size_t size, uint8_t **data)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06175">mov.c:6175</a></div></div>
<div class="ttc" id="avaapi__decode_8c_html_a0fd12851a78b80080e277db30411728d"><div class="ttname"><a href="vaapi__decode_8c.html#a0fd12851a78b80080e277db30411728d">codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__decode_8c_source.html#l00239">vaapi_decode.c:369</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea35e8d1b643beef5a57fffbd2b3f44050"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea35e8d1b643beef5a57fffbd2b3f44050">AV_CODEC_ID_SVQ3</a></div><div class="ttdeci">@ AV_CODEC_ID_SVQ3</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00072">codec_id.h:72</a></div></div>
<div class="ttc" id="ahwcontext__opencl_8c_html_acd3d88da3c0e0313c3645ff34f62f542"><div class="ttname"><a href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a></div><div class="ttdeci">const char * key</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__opencl_8c_source.html#l00168">hwcontext_opencl.c:168</a></div></div>
<div class="ttc" id="amov_8c_html_ad2645191c02d305980033c92e8f402d1"><div class="ttname"><a href="mov_8c.html#ad2645191c02d305980033c92e8f402d1">search_frag_timestamp</a></div><div class="ttdeci">static int search_frag_timestamp(MOVFragmentIndex *frag_index, AVStream *st, int64_t timestamp)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01287">mov.c:1287</a></div></div>
<div class="ttc" id="avf__selectivecolor_8c_html_a9e4497f08cd92bd3d2f92b7d69486f43"><div class="ttname"><a href="vf__selectivecolor_8c.html#a9e4497f08cd92bd3d2f92b7d69486f43">color_range</a></div><div class="ttdeci">color_range</div><div class="ttdef"><b>Definition:</b> <a href="vf__selectivecolor_8c_source.html#l00044">vf_selectivecolor.c:44</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a></div><div class="ttdeci">@ AVMEDIA_TYPE_DATA</div><div class="ttdoc">Opaque data information usually continuous.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00203">avutil.h:203</a></div></div>
<div class="ttc" id="amov_8c_html_ad8b386f328990078743dafa6a43c052a"><div class="ttname"><a href="mov_8c.html#ad8b386f328990078743dafa6a43c052a">mov_read_udta_string</a></div><div class="ttdeci">static int mov_read_udta_string(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00298">mov.c:298</a></div></div>
<div class="ttc" id="amov_8c_html_a3213d1fd3e9250fc9efb92d8518d5964"><div class="ttname"><a href="mov_8c.html#a3213d1fd3e9250fc9efb92d8518d5964">mov_read_stss</a></div><div class="ttdeci">static int mov_read_stss(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02780">mov.c:2780</a></div></div>
<div class="ttc" id="amov_8c_html_a55f711c3470444cb84ebd5c8147f7c3e"><div class="ttname"><a href="mov_8c.html#a55f711c3470444cb84ebd5c8147f7c3e">mov_read_ddts</a></div><div class="ttdeci">static int mov_read_ddts(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00857">mov.c:857</a></div></div>
<div class="ttc" id="amov_8c_html_aaaaf80017834f535461d82a6afe6ff0a"><div class="ttname"><a href="mov_8c.html#aaaaf80017834f535461d82a6afe6ff0a">mov_read_uuid</a></div><div class="ttdeci">static int mov_read_uuid(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05779">mov.c:5779</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942"><div class="ttname"><a href="pixfmt_8h.html#ad384ee5a840bafd73daef08e6d9cafe7a868aff08a725fc038a7f37b5e9d01942">AVCOL_PRI_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_PRI_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00461">pixfmt.h:461</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a968384052f48e91fc57b3c61b9f68224"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a968384052f48e91fc57b3c61b9f68224">AVMasteringDisplayMetadata::white_point</a></div><div class="ttdeci">AVRational white_point[2]</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00047">mastering_display_metadata.h:47</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02caba81a12143ed2cea06438739a7caaafb"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02caba81a12143ed2cea06438739a7caaafb">AV_FIELD_BT</a></div><div class="ttdeci">@ AV_FIELD_BT</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00042">codec_par.h:42</a></div></div>
<div class="ttc" id="astruct_a_v_encryption_info_html_a07101d72147615f4e794630b5003fdb3"><div class="ttname"><a href="struct_a_v_encryption_info.html#a07101d72147615f4e794630b5003fdb3">AVEncryptionInfo::skip_byte_block</a></div><div class="ttdeci">uint32_t skip_byte_block</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8h_source.html#l00057">encryption_info.h:57</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a></div><div class="ttdeci">@ AV_CODEC_ID_H264</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00076">codec_id.h:76</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gac59f9714ac34774b43b3797c80b06c68"><div class="ttname"><a href="group__lavc__packet.html#gac59f9714ac34774b43b3797c80b06c68">av_packet_new_side_data</a></div><div class="ttdeci">uint8_t * av_packet_new_side_data(AVPacket *pkt, enum AVPacketSideDataType type, int size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00332">avpacket.c:332</a></div></div>
<div class="ttc" id="amastering__display__metadata_8c_html_a6f334d2c018cc6855ea92b5b65052dc5"><div class="ttname"><a href="mastering__display__metadata_8c.html#a6f334d2c018cc6855ea92b5b65052dc5">av_content_light_metadata_alloc</a></div><div class="ttdeci">AVContentLightMetadata * av_content_light_metadata_alloc(size_t *size)</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8c_source.html#l00045">mastering_display_metadata.c:45</a></div></div>
<div class="ttc" id="astruct_a_v_class_html_aa8883e113a3f2965abd008f7667db7eb"><div class="ttname"><a href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">AVClass::class_name</a></div><div class="ttdeci">const char * class_name</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00072">log.h:72</a></div></div>
<div class="ttc" id="agroup__lavu__sha_html_gadc0f2ed085f24f10cacfcdfcfc2e0127"><div class="ttname"><a href="group__lavu__sha.html#gadc0f2ed085f24f10cacfcdfcfc2e0127">av_sha_final</a></div><div class="ttdeci">void av_sha_final(AVSHA *ctx, uint8_t *digest)</div><div class="ttdef"><b>Definition:</b> <a href="sha_8c_source.html#l00345">sha.c:345</a></div></div>
<div class="ttc" id="amov_8c_html_a1a5362deb573c857ad801ec212ef3583"><div class="ttname"><a href="mov_8c.html#a1a5362deb573c857ad801ec212ef3583">MAX_REORDER_DELAY</a></div><div class="ttdeci">#define MAX_REORDER_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03377">mov.c:3377</a></div></div>
<div class="ttc" id="astruct_a_v_spherical_mapping_html_adeea248f32ff9ec9cd8de310f3d00108"><div class="ttname"><a href="struct_a_v_spherical_mapping.html#adeea248f32ff9ec9cd8de310f3d00108">AVSphericalMapping::padding</a></div><div class="ttdeci">uint32_t padding</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00182">spherical.h:182</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_afd12020da5a235dfcf0c3c748fb5baed"><div class="ttname"><a href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a></div><div class="ttdeci">int32_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="amov_8c_html_aa6ec4cc07baa4307df08502c0f850652"><div class="ttname"><a href="mov_8c.html#aa6ec4cc07baa4307df08502c0f850652">mov_read_close</a></div><div class="ttdeci">static int mov_read_close(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07355">mov.c:7355</a></div></div>
<div class="ttc" id="astruct_m_o_v_dref_html_a173376d100e710a1931210a28ba19ffe"><div class="ttname"><a href="struct_m_o_v_dref.html#a173376d100e710a1931210a28ba19ffe">MOVDref::volume</a></div><div class="ttdeci">char volume[28]</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00077">isom.h:77</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="aisom_8h_html_ad2cf03c4e118928b2d4a53d8d44e3784"><div class="ttname"><a href="isom_8h.html#ad2cf03c4e118928b2d4a53d8d44e3784">ff_mov_get_lpcm_codec_id</a></div><div class="ttdeci">static enum AVCodecID ff_mov_get_lpcm_codec_id(int bps, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00369">isom.h:379</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea13651c88d4a774a1012b40f6087b5fb9"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea13651c88d4a774a1012b40f6087b5fb9">AV_CODEC_ID_PNG</a></div><div class="ttdeci">@ AV_CODEC_ID_PNG</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00110">codec_id.h:110</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaea40e943e4002267e20c0dda6498a2e9"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaea40e943e4002267e20c0dda6498a2e9">AV_CODEC_ID_AVUI</a></div><div class="ttdeci">@ AV_CODEC_ID_AVUI</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00250">codec_id.h:250</a></div></div>
<div class="ttc" id="atime__internal_8h_html"><div class="ttname"><a href="time__internal_8h.html">time_internal.h</a></div></div>
<div class="ttc" id="astruct_m_o_v_atom_html_a9f46ef43266038c6039960c972d80d0c"><div class="ttname"><a href="struct_m_o_v_atom.html#a9f46ef43266038c6039960c972d80d0c">MOVAtom::type</a></div><div class="ttdeci">uint32_t type</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00083">isom.h:83</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_afa6744d9b8766db47a5ff7bddf0f2404"><div class="ttname"><a href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">AVCodecParameters::color_range</a></div><div class="ttdeci">enum AVColorRange color_range</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:146</a></div></div>
<div class="ttc" id="amov_8c_html_afb652365ce584a9a759fb077bfc55566"><div class="ttname"><a href="mov_8c.html#afb652365ce584a9a759fb077bfc55566">mov_read_cmov</a></div><div class="ttdeci">static int mov_read_cmov(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05193">mov.c:5193</a></div></div>
<div class="ttc" id="amov_8c_html_a58cde4b3b88326ced7e6f239abe7066f"><div class="ttname"><a href="mov_8c.html#a58cde4b3b88326ced7e6f239abe7066f">mov_read_sample_encryption_info</a></div><div class="ttdeci">static int mov_read_sample_encryption_info(MOVContext *c, AVIOContext *pb, MOVStreamContext *sc, AVEncryptionInfo **sample, int use_subsamples)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06003">mov.c:6003</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html_a5609184767f08211be326d4cae2cce4c"><div class="ttname"><a href="struct_m_o_v_fragment.html#a5609184767f08211be326d4cae2cce4c">MOVFragment::stsd_id</a></div><div class="ttdeci">unsigned stsd_id</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00095">isom.h:95</a></div></div>
<div class="ttc" id="astruct_m_o_v_index_range_html"><div class="ttname"><a href="struct_m_o_v_index_range.html">MOVIndexRange</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00153">isom.h:153</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga6eff035c271caa5a533987a1e00ad43e"><div class="ttname"><a href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a></div><div class="ttdeci">struct AVRational AVRational</div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a></div><div class="ttdeci">@ AVDISCARD_ALL</div><div class="ttdoc">discard all</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00236">avcodec.h:236</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a91ede117e78922c63c5fbd0c5793449f"><div class="ttname"><a href="tableprint__vlc_8h.html#a91ede117e78922c63c5fbd0c5793449f">av_realloc_f</a></div><div class="ttdeci">#define av_realloc_f(p, o, n)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00033">tableprint_vlc.h:33</a></div></div>
<div class="ttc" id="amov_8c_html_a572dd8fd1cc914f0e236f4374ef66893"><div class="ttname"><a href="mov_8c.html#a572dd8fd1cc914f0e236f4374ef66893">mov_read_stts</a></div><div class="ttdeci">static int mov_read_stts(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02921">mov.c:2921</a></div></div>
<div class="ttc" id="amov_8c_html_ac39bb0ccd6835057089e6ea715839a22"><div class="ttname"><a href="mov_8c.html#ac39bb0ccd6835057089e6ea715839a22">DDTS_SIZE</a></div><div class="ttdeci">#define DDTS_SIZE</div></div>
<div class="ttc" id="amov_8c_html_afcc997e8985e3fc21ded47fcc59be837"><div class="ttname"><a href="mov_8c.html#afcc997e8985e3fc21ded47fcc59be837">set_frag_stream</a></div><div class="ttdeci">static void set_frag_stream(MOVFragmentIndex *frag_index, int id)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01196">mov.c:1196</a></div></div>
<div class="ttc" id="amov_8c_html_a95662210f9d8dbed043b69411210d5a2"><div class="ttname"><a href="mov_8c.html#a95662210f9d8dbed043b69411210d5a2">mov_read_free</a></div><div class="ttdeci">static int mov_read_free(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05884">mov.c:5884</a></div></div>
<div class="ttc" id="amov_8c_html_ad7ddd490c50c44a5ffb243dab34168dd"><div class="ttname"><a href="mov_8c.html#ad7ddd490c50c44a5ffb243dab34168dd">mov_realloc_extradata</a></div><div class="ttdeci">static int mov_realloc_extradata(AVCodecParameters *par, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01664">mov.c:1664</a></div></div>
<div class="ttc" id="agroup__lavu__ver_html_ga36e17e3fc9bcbe5c55820a8ac8b47e3c"><div class="ttname"><a href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a></div><div class="ttdeci">#define LIBAVUTIL_VERSION_INT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2version_8h_source.html#l00085">version.h:85</a></div></div>
<div class="ttc" id="aavformat_8h_html_ac736f8f4afc930ca1cda0b43638cc678"><div class="ttname"><a href="avformat_8h.html#ac736f8f4afc930ca1cda0b43638cc678">AVSEEK_FLAG_BACKWARD</a></div><div class="ttdeci">#define AVSEEK_FLAG_BACKWARD</div><div class="ttdoc">seek backward</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l02391">avformat.h:2391</a></div></div>
<div class="ttc" id="affv1dec_8c_html_a0b9c6775a65106fc8bf33cd388ec715c"><div class="ttname"><a href="ffv1dec_8c.html#a0b9c6775a65106fc8bf33cd388ec715c">read_header</a></div><div class="ttdeci">static int read_header(FFV1Context *f)</div><div class="ttdef"><b>Definition:</b> <a href="ffv1dec_8c_source.html#l00527">ffv1dec.c:527</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html_ac521372d022b4286353489e9305237d2"><div class="ttname"><a href="struct_m_o_v_fragment.html#ac521372d022b4286353489e9305237d2">MOVFragment::implicit_offset</a></div><div class="ttdeci">uint64_t implicit_offset</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00094">isom.h:94</a></div></div>
<div class="ttc" id="aaes_8h_html"><div class="ttname"><a href="aes_8h.html">aes.h</a></div></div>
<div class="ttc" id="alibavformat_2dv_8c_html_a677df650038c9a52d1a405b6b4af302c"><div class="ttname"><a href="libavformat_2dv_8c.html#a677df650038c9a52d1a405b6b4af302c">avpriv_dv_get_packet</a></div><div class="ttdeci">int avpriv_dv_get_packet(DVDemuxContext *c, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2dv_8c_source.html#l00355">dv.c:355</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf51c0fafb1c1b683c7f943c2a349904"><div class="ttname"><a href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a></div><div class="ttdeci">and forward the result(frame or status change) to the corresponding input. If nothing is possible</div></div>
<div class="ttc" id="astruct_a_v_packet_html_a437be96a9da675f12caa228a9c81bd82"><div class="ttname"><a href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">AVPacket::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00369">packet.h:369</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_a7a87cd25426a228ce8ecbef48ab00de8"><div class="ttname"><a href="cuda__runtime_8h.html#a7a87cd25426a228ce8ecbef48ab00de8">fabs</a></div><div class="ttdeci">static __device__ float fabs(float a)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00182">cuda_runtime.h:182</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="asha_8h_html"><div class="ttname"><a href="sha_8h.html">sha.h</a></div></div>
<div class="ttc" id="amlp__parse_8h_html_af4e1695e7a71e07567f0b935fe370dc0"><div class="ttname"><a href="mlp__parse_8h.html#af4e1695e7a71e07567f0b935fe370dc0">truehd_layout</a></div><div class="ttdeci">static uint64_t truehd_layout(int chanmap)</div><div class="ttdef"><b>Definition:</b> <a href="mlp__parse_8h_source.html#l00098">mlp_parse.h:98</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a53fe984bcf331276d8bdfd8ae4349be3"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a53fe984bcf331276d8bdfd8ae4349be3">MOVStreamContext::current_sample</a></div><div class="ttdeci">int current_sample</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00192">isom.h:192</a></div></div>
<div class="ttc" id="alibavformat_2jvdec_8c_html_a4517a6dcebdb863ba6840921970a41ac"><div class="ttname"><a href="libavformat_2jvdec_8c.html#a4517a6dcebdb863ba6840921970a41ac">read_probe</a></div><div class="ttdeci">static int read_probe(const AVProbeData *pd)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2jvdec_8c_source.html#l00055">jvdec.c:55</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea6dbe55d3a303780cfdb3627384e4141d"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6dbe55d3a303780cfdb3627384e4141d">AV_CODEC_ID_AV1</a></div><div class="ttdeci">@ AV_CODEC_ID_AV1</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00276">codec_id.h:276</a></div></div>
<div class="ttc" id="aisom_8h_html"><div class="ttname"><a href="isom_8h.html">isom.h</a></div></div>
<div class="ttc" id="astruct_a_v_d_o_v_i_decoder_configuration_record_html_af0c03dc377375d8a61e74a44de462a73"><div class="ttname"><a href="struct_a_v_d_o_v_i_decoder_configuration_record.html#af0c03dc377375d8a61e74a44de462a73">AVDOVIDecoderConfigurationRecord::dv_bl_signal_compatibility_id</a></div><div class="ttdeci">uint8_t dv_bl_signal_compatibility_id</div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8h_source.html#l00059">dovi_meta.h:59</a></div></div>
<div class="ttc" id="amov_8c_html_abbf27107e908820027b42f73c07e2a44"><div class="ttname"><a href="mov_8c.html#abbf27107e908820027b42f73c07e2a44">mov_read_ftyp</a></div><div class="ttdeci">static int mov_read_ftyp(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01117">mov.c:1117</a></div></div>
<div class="ttc" id="aflac_8h_html_a9b06d8e64818f5f814b67b14e49f96b0"><div class="ttname"><a href="flac_8h.html#a9b06d8e64818f5f814b67b14e49f96b0">flac_parse_block_header</a></div><div class="ttdeci">static av_always_inline void flac_parse_block_header(const uint8_t *block_header, int *last, int *type, int *size)</div><div class="ttdef"><b>Definition:</b> <a href="flac_8h_source.html#l00145">flac.h:145</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_html_ab098ac25a51b01eca901b8a88fdd16df"><div class="ttname"><a href="struct_m_o_v_fragment_index.html#ab098ac25a51b01eca901b8a88fdd16df">MOVFragmentIndex::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00147">isom.h:147</a></div></div>
<div class="ttc" id="alibm_8h_html_a2e1baae9134e580910322362dc23290e"><div class="ttname"><a href="libm_8h.html#a2e1baae9134e580910322362dc23290e">isnan</a></div><div class="ttdeci">#define isnan(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00340">libm.h:340</a></div></div>
<div class="ttc" id="amov_8c_html_aeae6f57f9f52a20bb3e556152b89f24a"><div class="ttname"><a href="mov_8c.html#aeae6f57f9f52a20bb3e556152b89f24a">mov_probe</a></div><div class="ttdeci">static int mov_probe(const AVProbeData *p)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07092">mov.c:7092</a></div></div>
<div class="ttc" id="astruct_get_bit_context_html"><div class="ttname"><a href="struct_get_bit_context.html">GetBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00061">get_bits.h:61</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_ga5c8d715704c153cb645982444063cc2b"><div class="ttname"><a href="group__lavf__core.html#ga5c8d715704c153cb645982444063cc2b">av_stream_add_side_data</a></div><div class="ttdeci">int av_stream_add_side_data(AVStream *st, enum AVPacketSideDataType type, uint8_t *data, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05448">utils.c:5448</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ac28ef17f95d98b118f5ae57d75061278"><div class="ttname"><a href="pixfmt_8h.html#ac28ef17f95d98b118f5ae57d75061278">AVPALETTE_SIZE</a></div><div class="ttdeci">#define AVPALETTE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00032">pixfmt.h:32</a></div></div>
<div class="ttc" id="astruct_m_o_v_dref_html_a525679c46eed049955180d9afe42dc5e"><div class="ttname"><a href="struct_m_o_v_dref.html#a525679c46eed049955180d9afe42dc5e">MOVDref::type</a></div><div class="ttdeci">uint32_t type</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00074">isom.h:74</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a3f19c60ac6da237cd10e4d97150c118e"><div class="ttname"><a href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">AVStream::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00931">avformat.h:931</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea2d41739284f633efadccd4b43e906937"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2d41739284f633efadccd4b43e906937">AV_CODEC_ID_DVD_SUBTITLE</a></div><div class="ttdeci">@ AV_CODEC_ID_DVD_SUBTITLE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00517">codec_id.h:517</a></div></div>
<div class="ttc" id="amov_8c_html_a5f2446e2c52a90e8e18be878dbf4a2d7"><div class="ttname"><a href="mov_8c.html#a5f2446e2c52a90e8e18be878dbf4a2d7">mov_read_smdm</a></div><div class="ttdeci">static int mov_read_smdm(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05399">mov.c:5399</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga791fcd0dba1d19fe0c3677509344328e"><div class="ttname"><a href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a></div><div class="ttdeci">const char * av_default_item_name(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00235">log.c:235</a></div></div>
<div class="ttc" id="aavio_8h_html_a14d7da25344458b5f3aad11edb0f4918"><div class="ttname"><a href="avio_8h.html#a14d7da25344458b5f3aad11edb0f4918">avio_rb64</a></div><div class="ttdeci">uint64_t avio_rb64(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00906">aviobuf.c:906</a></div></div>
<div class="ttc" id="agroup__lavu__aes_html_gae2572febc1bdf0b6dcb8b313da69e06f"><div class="ttname"><a href="group__lavu__aes.html#gae2572febc1bdf0b6dcb8b313da69e06f">av_aes_crypt</a></div><div class="ttdeci">void av_aes_crypt(AVAES *a, uint8_t *dst, const uint8_t *src, int count, uint8_t *iv, int decrypt)</div><div class="ttdef"><b>Definition:</b> <a href="aes_8c_source.html#l00163">aes.c:163</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="amov_8c_html_aa938246ca3c31ebe1d9d54acb481164c"><div class="ttname"><a href="mov_8c.html#aa938246ca3c31ebe1d9d54acb481164c">mov_open_dref</a></div><div class="ttdeci">static int mov_open_dref(MOVContext *c, AVIOContext **pb, const char *src, MOVDref *ref)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04147">mov.c:4147</a></div></div>
<div class="ttc" id="agroup__lavu__aes_html_ga82fd4287891dc9fe98ecfe26e1a66bbb"><div class="ttname"><a href="group__lavu__aes.html#ga82fd4287891dc9fe98ecfe26e1a66bbb">av_aes_alloc</a></div><div class="ttdeci">struct AVAES * av_aes_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="aes_8c_source.html#l00031">aes.c:31</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a61dd7b3fe8491c11bde8f2362b59e699"><div class="ttname"><a href="struct_m_o_v_context.html#a61dd7b3fe8491c11bde8f2362b59e699">MOVContext::ignore_chapters</a></div><div class="ttdeci">int ignore_chapters</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00270">isom.h:270</a></div></div>
<div class="ttc" id="aisom_8h_html_a583b8fc4d218bb9d00bfb5099283d047"><div class="ttname"><a href="isom_8h.html#a583b8fc4d218bb9d00bfb5099283d047">TAG_IS_AVCI</a></div><div class="ttdeci">#define TAG_IS_AVCI(tag)</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00349">isom.h:349</a></div></div>
<div class="ttc" id="astruct_m_o_v_encryption_index_html_a2debee88a1ff060412fcb59989563d95"><div class="ttname"><a href="struct_m_o_v_encryption_index.html#a2debee88a1ff060412fcb59989563d95">MOVEncryptionIndex::auxiliary_offsets_count</a></div><div class="ttdeci">size_t auxiliary_offsets_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00124">isom.h:124</a></div></div>
<div class="ttc" id="amov_8c_html_a6502c5f11135b38e4e7dfb0e43b55efc"><div class="ttname"><a href="mov_8c.html#a6502c5f11135b38e4e7dfb0e43b55efc">mov_read_schm</a></div><div class="ttdeci">static int mov_read_schm(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06477">mov.c:6477</a></div></div>
<div class="ttc" id="aflac_8h_html_afcd4bc86e7272d58b09cdb898b1b4f56"><div class="ttname"><a href="flac_8h.html#afcd4bc86e7272d58b09cdb898b1b4f56">FLAC_STREAMINFO_SIZE</a></div><div class="ttdeci">#define FLAC_STREAMINFO_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="flac_8h_source.html#l00034">flac.h:34</a></div></div>
<div class="ttc" id="apixdesc_8c_html_a811dbb6cf48bbcd66a1243bdd6d89909"><div class="ttname"><a href="pixdesc_8c.html#a811dbb6cf48bbcd66a1243bdd6d89909">av_color_primaries_name</a></div><div class="ttdeci">const char * av_color_primaries_name(enum AVColorPrimaries primaries)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02918">pixdesc.c:2918</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_item_html_a3275ecdb4bf8607138b543b9ebab4004"><div class="ttname"><a href="struct_m_o_v_fragment_index_item.html#a3275ecdb4bf8607138b543b9ebab4004">MOVFragmentIndexItem::stream_info</a></div><div class="ttdeci">MOVFragmentStreamInfo * stream_info</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00142">isom.h:142</a></div></div>
<div class="ttc" id="aisom_8h_html_a39eee8b7a932ff038719d3cf928858c4"><div class="ttname"><a href="isom_8h.html#a39eee8b7a932ff038719d3cf928858c4">FF_MOV_FLAG_MFRA_DTS</a></div><div class="ttdeci">#define FF_MOV_FLAG_MFRA_DTS</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00372">isom.h:372</a></div></div>
<div class="ttc" id="aisom_8h_html_af1756d38e6b4ce8bc25625739faf6b49"><div class="ttname"><a href="isom_8h.html#af1756d38e6b4ce8bc25625739faf6b49">MOV_SAMPLE_DEPENDENCY_NO</a></div><div class="ttdeci">#define MOV_SAMPLE_DEPENDENCY_NO</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00346">isom.h:346</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a8853cdaa5f2799e28244a13a10d6e7f6"><div class="ttname"><a href="struct_m_o_v_context.html#a8853cdaa5f2799e28244a13a10d6e7f6">MOVContext::frag_index</a></div><div class="ttdeci">MOVFragmentIndex frag_index</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00280">isom.h:280</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga8ed4237acfc3d68484301a5d1859936c"><div class="ttname"><a href="group__lavu__dict.html#ga8ed4237acfc3d68484301a5d1859936c">AV_DICT_DONT_OVERWRITE</a></div><div class="ttdeci">#define AV_DICT_DONT_OVERWRITE</div><div class="ttdoc">Don't overwrite existing entries.</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00076">dict.h:76</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_item_html_afc8a0a0f6b7d9d525f786ff359768d57"><div class="ttname"><a href="struct_m_o_v_fragment_index_item.html#afc8a0a0f6b7d9d525f786ff359768d57">MOVFragmentIndexItem::current</a></div><div class="ttdeci">int current</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00140">isom.h:140</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_html_aa4a29245ffbd087bd3430bf78a6d3b9c"><div class="ttname"><a href="struct_m_o_v_fragment_index.html#aa4a29245ffbd087bd3430bf78a6d3b9c">MOVFragmentIndex::item</a></div><div class="ttdeci">MOVFragmentIndexItem * item</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00150">isom.h:150</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a3ec61bf105b4bf5c3a49be5289400324"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a3ec61bf105b4bf5c3a49be5289400324">MOVStreamContext::dv_audio_container</a></div><div class="ttdeci">int dv_audio_container</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00198">isom.h:198</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead2cbe7fc8799aad9f808e81723e4452f"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead2cbe7fc8799aad9f808e81723e4452f">AV_CODEC_ID_QDM2</a></div><div class="ttdeci">@ AV_CODEC_ID_QDM2</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00437">codec_id.h:437</a></div></div>
<div class="ttc" id="amov_8c_html_a00446e5d1d3787d6f0eacbdddbc0f597"><div class="ttname"><a href="mov_8c.html#a00446e5d1d3787d6f0eacbdddbc0f597">mov_read_ilst</a></div><div class="ttdeci">static int mov_read_ilst(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04358">mov.c:4358</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga88f2868b232a89fd11ad9d6c39d502a1"><div class="ttname"><a href="group__channel__masks.html#ga88f2868b232a89fd11ad9d6c39d502a1">AV_CH_FRONT_CENTER</a></div><div class="ttdeci">#define AV_CH_FRONT_CENTER</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00051">channel_layout.h:51</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a9216b784ef701aaecf27e247b3154ff3"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a9216b784ef701aaecf27e247b3154ff3">MOVStreamContext::chunk_count</a></div><div class="ttdeci">unsigned int chunk_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00163">isom.h:163</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_ad9fd1e3fa7fdd02edb72a0e3486a6442"><div class="ttname"><a href="struct_m_o_v_stream_context.html#ad9fd1e3fa7fdd02edb72a0e3486a6442">MOVStreamContext::sample_sizes</a></div><div class="ttdeci">int * sample_sizes</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00185">isom.h:185</a></div></div>
<div class="ttc" id="amov_8c_html_aecde9171b3879bf22d783fed7427065a"><div class="ttname"><a href="mov_8c.html#aecde9171b3879bf22d783fed7427065a">mov_read_fiel</a></div><div class="ttdeci">static int mov_read_fiel(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01630">mov.c:1630</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_a236265133da1ecd6375e5e7c405020a0"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a></div><div class="ttdeci">#define AV_RB32</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00130">intreadwrite.h:130</a></div></div>
<div class="ttc" id="anamespaceconvert__header_html_ac8d67a61fdde2fcdd4358f78109f4b7a"><div class="ttname"><a href="namespaceconvert__header.html#ac8d67a61fdde2fcdd4358f78109f4b7a">convert_header.major</a></div><div class="ttdeci">int major</div><div class="ttdef"><b>Definition:</b> <a href="convert__header_8py_source.html#l00023">convert_header.py:23</a></div></div>
<div class="ttc" id="aencryption__info_8c_html_a843d262a8649a9fe9db7f496ca1d4465"><div class="ttname"><a href="encryption__info_8c.html#a843d262a8649a9fe9db7f496ca1d4465">av_encryption_info_add_side_data</a></div><div class="ttdeci">uint8_t * av_encryption_info_add_side_data(const AVEncryptionInfo *info, size_t *size)</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8c_source.html#l00125">encryption_info.c:125</a></div></div>
<div class="ttc" id="aisom_8h_html_acae7810f03a8ab3c736de9ceef45c4bb"><div class="ttname"><a href="isom_8h.html#acae7810f03a8ab3c736de9ceef45c4bb">MOV_TFHD_BASE_DATA_OFFSET</a></div><div class="ttdeci">#define MOV_TFHD_BASE_DATA_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00314">isom.h:314</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_aa884cae3fd16b30c61201a686664f96b"><div class="ttname"><a href="struct_a_v_codec_parameters.html#aa884cae3fd16b30c61201a686664f96b">AVCodecParameters::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:147</a></div></div>
<div class="ttc" id="aisom_8c_html_ad0b12ad4b1be6b0d15ada9616944ebcf"><div class="ttname"><a href="isom_8c.html#ad0b12ad4b1be6b0d15ada9616944ebcf">ff_codec_movdata_tags</a></div><div class="ttdeci">const AVCodecTag ff_codec_movdata_tags[]</div><div class="ttdef"><b>Definition:</b> <a href="isom_8c_source.html#l00391">isom.c:391</a></div></div>
<div class="ttc" id="amov_8c_html_ab97063325c367ee12ad82f33dae0ec7c"><div class="ttname"><a href="mov_8c.html#ab97063325c367ee12ad82f33dae0ec7c">mov_read_wfex</a></div><div class="ttdeci">static int mov_read_wfex(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00930">mov.c:930</a></div></div>
<div class="ttc" id="agroup__lavu__sha_html_ga6f6ba69b07c33fdd30dada95e86fe0cb"><div class="ttname"><a href="group__lavu__sha.html#ga6f6ba69b07c33fdd30dada95e86fe0cb">av_sha_update</a></div><div class="ttdeci">void av_sha_update(struct AVSHA *ctx, const uint8_t *data, unsigned int len)</div><div class="ttdef"><b>Definition:</b> <a href="sha_8c_source.html#l00315">sha.c:315</a></div></div>
<div class="ttc" id="agxfenc_8c_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="gxfenc_8c_source.html#l00089">gxfenc.c:89</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_aba95a97e902b5ee164f017c0e11b3e5c"><div class="ttname"><a href="struct_m_o_v_stream_context.html#aba95a97e902b5ee164f017c0e11b3e5c">MOVStreamContext::stsd_version</a></div><div class="ttdeci">int stsd_version</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00225">isom.h:225</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a4382c3064df1c9eb232ac198dec067f9"><div class="ttname"><a href="struct_a_v_stream.html#a4382c3064df1c9eb232ac198dec067f9">AVStream::nb_frames</a></div><div class="ttdeci">int64_t nb_frames</div><div class="ttdoc">number of frames in this stream if known or 0</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00920">avformat.h:920</a></div></div>
<div class="ttc" id="astruct_a_v_timecode_html"><div class="ttname"><a href="struct_a_v_timecode.html">AVTimecode</a></div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00041">timecode.h:41</a></div></div>
<div class="ttc" id="aavformat_8h_html_a8fef570c1a6f9c445acaf97fa2da3b7e"><div class="ttname"><a href="avformat_8h.html#a8fef570c1a6f9c445acaf97fa2da3b7e">AVPROBE_SCORE_EXTENSION</a></div><div class="ttdeci">#define AVPROBE_SCORE_EXTENSION</div><div class="ttdoc">score for file extension</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00451">avformat.h:451</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gac95619abeb32e4a3daa18e3ff3419380"><div class="ttname"><a href="group__channel__mask__c.html#gac95619abeb32e4a3daa18e3ff3419380">av_get_channel_layout_nb_channels</a></div><div class="ttdeci">int av_get_channel_layout_nb_channels(uint64_t channel_layout)</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8c_source.html#l00226">channel_layout.c:226</a></div></div>
<div class="ttc" id="amov_8c_html_accd36e1d0ab8d2112db533725f76bf62"><div class="ttname"><a href="mov_8c.html#accd36e1d0ab8d2112db533725f76bf62">mov_parse_stsd_subtitle</a></div><div class="ttdeci">static void mov_parse_stsd_subtitle(MOVContext *c, AVIOContext *pb, AVStream *st, MOVStreamContext *sc, int64_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02257">mov.c:2257</a></div></div>
<div class="ttc" id="astruct_a_v_encryption_info_html_a419cb6a7096045c0d17eb57ad5de5c5a"><div class="ttname"><a href="struct_a_v_encryption_info.html#a419cb6a7096045c0d17eb57ad5de5c5a">AVEncryptionInfo::crypt_byte_block</a></div><div class="ttdeci">uint32_t crypt_byte_block</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8h_source.html#l00051">encryption_info.h:51</a></div></div>
<div class="ttc" id="amov_8c_html_a33e4baa8e41d5b909a8de5f5fabcf002"><div class="ttname"><a href="mov_8c.html#a33e4baa8e41d5b909a8de5f5fabcf002">mov_skip_multiple_stsd</a></div><div class="ttdeci">static int mov_skip_multiple_stsd(MOVContext *c, AVIOContext *pb, int codec_tag, int format, int64_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02464">mov.c:2464</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG1VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00050">codec_id.h:50</a></div></div>
<div class="ttc" id="astruct_a_v_spherical_mapping_html_a670ae033266fb97133204baa6609955f"><div class="ttname"><a href="struct_a_v_spherical_mapping.html#a670ae033266fb97133204baa6609955f">AVSphericalMapping::bound_bottom</a></div><div class="ttdeci">uint32_t bound_bottom</div><div class="ttdoc">Distance from the bottom edge.</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00170">spherical.h:170</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a8aeefb8cf55cb147f930424c488f9693"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">AVCodecParameters::video_delay</a></div><div class="ttdeci">int video_delay</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00155">codec_par.h:155</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea2c43eedcf1b16ddb37fdfdbd2bd530bf"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2c43eedcf1b16ddb37fdfdbd2bd530bf">AV_CODEC_ID_GSM</a></div><div class="ttdeci">@ AV_CODEC_ID_GSM</div><div class="ttdoc">as in Berlin toast format</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00436">codec_id.h:436</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a946e1e9b89eeeae4cab8a833b482c1ad"><div class="ttname"><a href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">AVStream::avg_frame_rate</a></div><div class="ttdeci">AVRational avg_frame_rate</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00942">avformat.h:942</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaadca229ad2c20e060a14fec08a5cc7ce"><div class="ttname"><a href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a></div><div class="ttdeci">AVCodecID</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00046">codec_id.h:46</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9b6f7d220d100ba73defab295623356b"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">AVCodecParameters::codec_tag</a></div><div class="ttdeci">uint32_t codec_tag</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00064">codec_par.h:64</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea14c0f2031427f1065ae8c18095e4384f"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea14c0f2031427f1065ae8c18095e4384f">AV_CODEC_ID_EAC3</a></div><div class="ttdeci">@ AV_CODEC_ID_EAC3</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00458">codec_id.h:458</a></div></div>
<div class="ttc" id="amov_8c_html_a725b9919409e785a58ba189461fc5f9d"><div class="ttname"><a href="mov_8c.html#a725b9919409e785a58ba189461fc5f9d">should_retry</a></div><div class="ttdeci">static int should_retry(AVIOContext *pb, int error_code)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07808">mov.c:7808</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_ace17926a964354dd894ae4fcb216800e"><div class="ttname"><a href="struct_m_o_v_context.html#ace17926a964354dd894ae4fcb216800e">MOVContext::advanced_editlist</a></div><div class="ttdeci">int advanced_editlist</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00269">isom.h:269</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggadcff0a5957a99f6fdf1eec9d5a3fdfafab4290d124e49f795ef1ba709fc60233c"><div class="ttname"><a href="group__lavc__core.html#ggadcff0a5957a99f6fdf1eec9d5a3fdfafab4290d124e49f795ef1ba709fc60233c">AV_AUDIO_SERVICE_TYPE_KARAOKE</a></div><div class="ttdeci">@ AV_AUDIO_SERVICE_TYPE_KARAOKE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00248">avcodec.h:248</a></div></div>
<div class="ttc" id="amov_8c_html_aa909a33066d768a645349127a8085796"><div class="ttname"><a href="mov_8c.html#aa909a33066d768a645349127a8085796">mov_read_pasp</a></div><div class="ttdeci">static int mov_read_pasp(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00945">mov.c:945</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaadba4b5a087e2b6bf2acdd1b5aebb988"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaadba4b5a087e2b6bf2acdd1b5aebb988">AV_CODEC_ID_AAC</a></div><div class="ttdeci">@ AV_CODEC_ID_AAC</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00420">codec_id.h:420</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a6076d5b33e79fcc3883375a216e53447"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a6076d5b33e79fcc3883375a216e53447">MOVStreamContext::elst_data</a></div><div class="ttdeci">MOVElst * elst_data</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00178">isom.h:178</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a8e3eb32799f4637fcdd75bb9099142ff"><div class="ttname"><a href="tableprint__vlc_8h.html#a8e3eb32799f4637fcdd75bb9099142ff">ff_dlog</a></div><div class="ttdeci">#define ff_dlog(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00029">tableprint_vlc.h:29</a></div></div>
<div class="ttc" id="aaes__ctr_8c_html_a651580f87845fc3ba201abeecb5442e6"><div class="ttname"><a href="aes__ctr_8c.html#a651580f87845fc3ba201abeecb5442e6">av_aes_ctr_free</a></div><div class="ttdeci">void av_aes_ctr_free(struct AVAESCTR *a)</div><div class="ttdef"><b>Definition:</b> <a href="aes__ctr_8c_source.html#l00084">aes_ctr.c:84</a></div></div>
<div class="ttc" id="amov_8c_html_a4bb4b077324472328268c8677dac1a67"><div class="ttname"><a href="mov_8c.html#a4bb4b077324472328268c8677dac1a67">mov_read_elst</a></div><div class="ttdeci">static int mov_read_elst(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05247">mov.c:5247</a></div></div>
<div class="ttc" id="amxfenc_8c_html_acbf71674592877e63ec914508376ba64"><div class="ttname"><a href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a></div><div class="ttdeci">int cid</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01998">mxfenc.c:1998</a></div></div>
<div class="ttc" id="amov_8c_html_a4896c6e7b4b2e70c75e09e61fe39e02a"><div class="ttname"><a href="mov_8c.html#a4896c6e7b4b2e70c75e09e61fe39e02a">mov_read_header</a></div><div class="ttdeci">static int mov_read_header(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07572">mov.c:7572</a></div></div>
<div class="ttc" id="aisom_8c_html_a49f1e7625dcea066fdb0273f29980f1d"><div class="ttname"><a href="isom_8c.html#a49f1e7625dcea066fdb0273f29980f1d">ff_codec_movvideo_tags</a></div><div class="ttdeci">const AVCodecTag ff_codec_movvideo_tags[]</div><div class="ttdef"><b>Definition:</b> <a href="isom_8c_source.html#l00075">isom.c:75</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceac5a616b6750e42680e2ab71c7db317d1"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac5a616b6750e42680e2ab71c7db317d1">AV_CODEC_ID_QCELP</a></div><div class="ttdeci">@ AV_CODEC_ID_QCELP</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00442">codec_id.h:442</a></div></div>
<div class="ttc" id="agroup__lavc__misc_html_ga0717e7440fdb123f708082f66cd9b41d"><div class="ttname"><a href="group__lavc__misc.html#ga0717e7440fdb123f708082f66cd9b41d">av_get_bits_per_sample</a></div><div class="ttdeci">int av_get_bits_per_sample(enum AVCodecID codec_id)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01578">utils.c:1578</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a0105e54c69c1a9d7e1c3b6572d77a28d"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a0105e54c69c1a9d7e1c3b6572d77a28d">MOVStreamContext::time_offset</a></div><div class="ttdeci">int64_t time_offset</div><div class="ttdoc">time offset of the edit list entries</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00190">isom.h:190</a></div></div>
<div class="ttc" id="aavio_8h_html_abc91c5452c4d7b5da84021be3a9a3d70"><div class="ttname"><a href="avio_8h.html#abc91c5452c4d7b5da84021be3a9a3d70">avio_rl32</a></div><div class="ttdeci">unsigned int avio_rl32(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00754">aviobuf.c:754</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a></div><div class="ttdeci">@ AVDISCARD_NONKEY</div><div class="ttdoc">discard all frames except keyframes</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00235">avcodec.h:235</a></div></div>
<div class="ttc" id="astruct_m_o_v_elst_html"><div class="ttname"><a href="struct_m_o_v_elst.html">MOVElst</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00067">isom.h:67</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a3feb37c98771e612bd82962786cc479f"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a3feb37c98771e612bd82962786cc479f">MOVStreamContext::coll</a></div><div class="ttdeci">AVContentLightMetadata * coll</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00232">isom.h:232</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a1ec57ee84f19cf65d00eaa4d2a2253ce"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">AVCodecParameters::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00127">codec_par.h:127</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a8c689ee00c0dfe4313891f8a2ea21f4d"><div class="ttname"><a href="struct_a_v_stream.html#a8c689ee00c0dfe4313891f8a2ea21f4d">AVStream::attached_pic</a></div><div class="ttdeci">AVPacket attached_pic</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00951">avformat.h:951</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a315c00e2ed986d94791a0b3d9341af85"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a315c00e2ed986d94791a0b3d9341af85">MOVStreamContext::drefs</a></div><div class="ttdeci">MOVDref * drefs</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00202">isom.h:202</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be">AV_CODEC_ID_PCM_S24LE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S24LE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00320">codec_id.h:320</a></div></div>
<div class="ttc" id="amov_8c_html_a3fe0ac17ee031337ba46f3eaaf7b8cbe"><div class="ttname"><a href="mov_8c.html#a3fe0ac17ee031337ba46f3eaaf7b8cbe">mov_read_wave</a></div><div class="ttdeci">static int mov_read_wave(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01858">mov.c:1858</a></div></div>
<div class="ttc" id="aavio__internal_8h_html_ad5a5bf73572e5fdb109e0bcd1aa99c7e"><div class="ttname"><a href="avio__internal_8h.html#ad5a5bf73572e5fdb109e0bcd1aa99c7e">ffio_init_context</a></div><div class="ttdeci">int ffio_init_context(AVIOContext *s, unsigned char *buffer, int buffer_size, int write_flag, void *opaque, int(*read_packet)(void *opaque, uint8_t *buf, int buf_size), int(*write_packet)(void *opaque, uint8_t *buf, int buf_size), int64_t(*seek)(void *opaque, int64_t offset, int whence))</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00088">aviobuf.c:88</a></div></div>
<div class="ttc" id="agroup__lavu__video__spherical_html_gga689eeb8cf9b453f3619f3cf626e03a08aa0a8bc866354ecb619493db502c4d103"><div class="ttname"><a href="group__lavu__video__spherical.html#gga689eeb8cf9b453f3619f3cf626e03a08aa0a8bc866354ecb619493db502c4d103">AV_SPHERICAL_CUBEMAP</a></div><div class="ttdeci">@ AV_SPHERICAL_CUBEMAP</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00065">spherical.h:65</a></div></div>
<div class="ttc" id="aavio_8h_html_ae5f28c2379d309467db446d2fa03269b"><div class="ttname"><a href="avio_8h.html#ae5f28c2379d309467db446d2fa03269b">avio_rb24</a></div><div class="ttdeci">unsigned int avio_rb24(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00778">aviobuf.c:778</a></div></div>
<div class="ttc" id="ampegaudiodecheader_8h_html_a663ed1681b8427c5f1f93f0d02abbd80"><div class="ttname"><a href="mpegaudiodecheader_8h.html#a663ed1681b8427c5f1f93f0d02abbd80">ff_mpa_check_header</a></div><div class="ttdeci">static int ff_mpa_check_header(uint32_t header)</div><div class="ttdef"><b>Definition:</b> <a href="mpegaudiodecheader_8h_source.html#l00061">mpegaudiodecheader.h:61</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_afc7153ab358ca15982533b9f06406c06"><div class="ttname"><a href="struct_m_o_v_stream_context.html#afc7153ab358ca15982533b9f06406c06">MOVStreamContext::elst_count</a></div><div class="ttdeci">unsigned int elst_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00179">isom.h:179</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="aextract__extradata__bsf_8c_html_a92ba2b3ed65ae251e69195d3ebe639b6"><div class="ttname"><a href="extract__extradata__bsf_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a></div><div class="ttdeci">enum AVCodecID id</div><div class="ttdef"><b>Definition:</b> <a href="extract__extradata__bsf_8c_source.html#l00049">extract_extradata_bsf.c:325</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_af9e8f2bbcbb1bcf5b4cd5fcc4293375a"><div class="ttname"><a href="libavformat_2internal_8h.html#af9e8f2bbcbb1bcf5b4cd5fcc4293375a">ff_codec_get_id</a></div><div class="ttdeci">enum AVCodecID ff_codec_get_id(const AVCodecTag *tags, unsigned int tag)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l03087">utils.c:3097</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_gac7a91abf2f59648d995894711f070f62"><div class="ttname"><a href="group__lavf__core.html#gac7a91abf2f59648d995894711f070f62">avformat_alloc_context</a></div><div class="ttdeci">AVFormatContext * avformat_alloc_context(void)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2options_8c_source.html#l00211">options.c:211</a></div></div>
<div class="ttc" id="amov_8c_html_aa61005a782dd05fcd2710cc7f7f29360"><div class="ttname"><a href="mov_8c.html#aa61005a782dd05fcd2710cc7f7f29360">get_current_encryption_info</a></div><div class="ttdeci">static int get_current_encryption_info(MOVContext *c, MOVEncryptionIndex **encryption_index, MOVStreamContext **sc)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05953">mov.c:5953</a></div></div>
<div class="ttc" id="aqtpalette_8h_html"><div class="ttname"><a href="qtpalette_8h.html">qtpalette.h</a></div></div>
<div class="ttc" id="amov_8c_html_a3d3029b10248aba1a111aafe425b6c2c"><div class="ttname"><a href="mov_8c.html#a3d3029b10248aba1a111aafe425b6c2c">mov_read_dref</a></div><div class="ttdeci">static int mov_read_dref(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00573">mov.c:573</a></div></div>
<div class="ttc" id="amov_8c_html_a2246698fcce3d3279833f046ae216b29"><div class="ttname"><a href="mov_8c.html#a2246698fcce3d3279833f046ae216b29">mov_current_sample_dec</a></div><div class="ttdeci">static void mov_current_sample_dec(MOVStreamContext *sc)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03446">mov.c:3446</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_ga2c3404067d7e9bc7b8443e3f58cf8e65"><div class="ttname"><a href="group__lavf__core.html#ga2c3404067d7e9bc7b8443e3f58cf8e65">av_stream_get_side_data</a></div><div class="ttdeci">uint8_t * av_stream_get_side_data(const AVStream *stream, enum AVPacketSideDataType type, int *size)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05431">utils.c:5431</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_ab710eedb37b25a5f4696b172f3e97af9"><div class="ttname"><a href="struct_m_o_v_stream_context.html#ab710eedb37b25a5f4696b172f3e97af9">MOVStreamContext::sample_count</a></div><div class="ttdeci">unsigned int sample_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00184">isom.h:184</a></div></div>
<div class="ttc" id="astruct_m_o_v_track_ext_html"><div class="ttname"><a href="struct_m_o_v_track_ext.html">MOVTrackExt</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00101">isom.h:101</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a550331d03f5d3a83323520eb74db778c"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a550331d03f5d3a83323520eb74db778c">MOVStreamContext::samples_per_frame</a></div><div class="ttdeci">unsigned int samples_per_frame</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00197">isom.h:197</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a6d2f1c63632979df40671983b4d29588"><div class="ttname"><a href="struct_a_v_stream_internal.html#a6d2f1c63632979df40671983b4d29588">AVStreamInternal::index_entries</a></div><div class="ttdeci">AVIndexEntry * index_entries</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00228">internal.h:228</a></div></div>
<div class="ttc" id="astruct_m_o_v_stts_html_acbff61773ae85da247b43d82ae69b1f5"><div class="ttname"><a href="struct_m_o_v_stts.html#acbff61773ae85da247b43d82ae69b1f5">MOVStts::duration</a></div><div class="ttdeci">int duration</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00058">isom.h:58</a></div></div>
<div class="ttc" id="aisom_8h_html_af422027b00f117bba986137e8c293afd"><div class="ttname"><a href="isom_8h.html#af422027b00f117bba986137e8c293afd">FF_MOV_FLAG_MFRA_AUTO</a></div><div class="ttdeci">#define FF_MOV_FLAG_MFRA_AUTO</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00371">isom.h:371</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a5c1eb24858b3a73d6bbe9585d30e971a"><div class="ttname"><a href="avcodec_8h.html#a5c1eb24858b3a73d6bbe9585d30e971a">FF_COMPLIANCE_STRICT</a></div><div class="ttdeci">#define FF_COMPLIANCE_STRICT</div><div class="ttdoc">Strictly conform to all the things in the spec no matter what consequences.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01591">avcodec.h:1591</a></div></div>
<div class="ttc" id="affplay_8c_html_aff091f79e1f4daabe108ee1262892f9f"><div class="ttname"><a href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a></div><div class="ttdeci">static int64_t start_time</div><div class="ttdef"><b>Definition:</b> <a href="ffplay_8c_source.html#l00332">ffplay.c:332</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_af284efeceb46d0cff3cd362600f75c1b"><div class="ttname"><a href="struct_m_o_v_context.html#af284efeceb46d0cff3cd362600f75c1b">MOVContext::trak_index</a></div><div class="ttdeci">int trak_index</div><div class="ttdoc">Index of the current 'trak'.</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00254">isom.h:254</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_ab2ccd9853235efc20f6a280b2d38c8eb"><div class="ttname"><a href="struct_m_o_v_context.html#ab2ccd9853235efc20f6a280b2d38c8eb">MOVContext::fragment</a></div><div class="ttdeci">MOVFragment fragment</div><div class="ttdoc">current fragment in moof atom</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00260">isom.h:260</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_aab5542950d6beb910dc9237aac99989e"><div class="ttname"><a href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a></div><div class="ttdeci">void avpriv_set_pts_info(AVStream *s, int pts_wrap_bits, unsigned int pts_num, unsigned int pts_den)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04871">utils.c:4871</a></div></div>
<div class="ttc" id="astruct_m_o_v_stts_html_a3754fc5e1e64d425ca84c36e040ba266"><div class="ttname"><a href="struct_m_o_v_stts.html#a3754fc5e1e64d425ca84c36e040ba266">MOVStts::count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00057">isom.h:57</a></div></div>
<div class="ttc" id="amov_8c_html_a76ae95d19017f3aaf08e7170e0bac2ed"><div class="ttname"><a href="mov_8c.html#a76ae95d19017f3aaf08e7170e0bac2ed">mov_read_trun</a></div><div class="ttdeci">static int mov_read_trun(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04764">mov.c:4764</a></div></div>
<div class="ttc" id="aavio_8h_html_abeee0414e5f2ce5b150cf9c5694a2e4f"><div class="ttname"><a href="avio_8h.html#abeee0414e5f2ce5b150cf9c5694a2e4f">avio_get_str</a></div><div class="ttdeci">int avio_get_str(AVIOContext *pb, int maxlen, char *buf, int buflen)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00864">aviobuf.c:864</a></div></div>
<div class="ttc" id="aflacdsp__template_8c_html_a924f03b9b06f2793262e576df93492db"><div class="ttname"><a href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a></div><div class="ttdeci">#define sample</div><div class="ttdef"><b>Definition:</b> <a href="flacdsp__template_8c_source.html#l00044">flacdsp_template.c:44</a></div></div>
<div class="ttc" id="alibm_8h_html_a364edfcde984bdfbc031ae0b2ddd6e38"><div class="ttname"><a href="libm_8h.html#a364edfcde984bdfbc031ae0b2ddd6e38">hypot</a></div><div class="ttdeci">static av_const double hypot(double x, double y)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00366">libm.h:366</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceac3d126631b15729d01d427b642c3bc9e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac3d126631b15729d01d427b642c3bc9e">AV_CODEC_ID_H263</a></div><div class="ttdeci">@ AV_CODEC_ID_H263</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00053">codec_id.h:53</a></div></div>
<div class="ttc" id="aisom_8h_html_a8a87b9f662becd73dc929ef1917c5225"><div class="ttname"><a href="isom_8h.html#a8a87b9f662becd73dc929ef1917c5225">MOV_TFHD_STSD_ID</a></div><div class="ttdeci">#define MOV_TFHD_STSD_ID</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00315">isom.h:315</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_aa544ee634ce800553a6b2946b64a7ac5"><div class="ttname"><a href="struct_m_o_v_stream_context.html#aa544ee634ce800553a6b2946b64a7ac5">MOVStreamContext::mastering</a></div><div class="ttdeci">AVMasteringDisplayMetadata * mastering</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00231">isom.h:231</a></div></div>
<div class="ttc" id="amov_8c_html_aae0ac907dc841d5f8166576898d8942b"><div class="ttname"><a href="mov_8c.html#aae0ac907dc841d5f8166576898d8942b">mov_read_chan</a></div><div class="ttdeci">static int mov_read_chan(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00911">mov.c:911</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga7778b1d209ceb3e4bf34e40150d3b882"><div class="ttname"><a href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a></div><div class="ttdeci">static AVRational av_make_q(int num, int den)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00071">rational.h:71</a></div></div>
<div class="ttc" id="amov_8c_html_a9d14132a2f993c5b5d95e065e1b53e37"><div class="ttname"><a href="mov_8c.html#a9d14132a2f993c5b5d95e065e1b53e37">mov_read_stsc</a></div><div class="ttdeci">static int mov_read_stsc(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02650">mov.c:2650</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga9665abf3720f9f460790c2c3b224c052"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga9665abf3720f9f460790c2c3b224c052">av_reallocp</a></div><div class="ttdeci">int av_reallocp(void *ptr, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00161">mem.c:161</a></div></div>
<div class="ttc" id="aqtpalette_8c_html_aa114a556431ba0d6fd5b43c6467d88c0"><div class="ttname"><a href="qtpalette_8c.html#aa114a556431ba0d6fd5b43c6467d88c0">ff_get_qtpalette</a></div><div class="ttdeci">int ff_get_qtpalette(int codec_id, AVIOContext *pb, uint32_t *palette)</div><div class="ttdef"><b>Definition:</b> <a href="qtpalette_8c_source.html#l00031">qtpalette.c:31</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_ga2eaefe702f95f619ea6f2d08afa01be1"><div class="ttname"><a href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a></div><div class="ttdeci">#define AV_NOPTS_VALUE</div><div class="ttdoc">Undefined timestamp value.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00248">avutil.h:248</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf1fd3864a6fd0e82163fd85a0cadbbb0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf1fd3864a6fd0e82163fd85a0cadbbb0">AV_CODEC_ID_QDMC</a></div><div class="ttdeci">@ AV_CODEC_ID_QDMC</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00468">codec_id.h:468</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gaf3ec42914c8ef8c78a01e8c00191db2f"><div class="ttname"><a href="group__lavu__misc.html#gaf3ec42914c8ef8c78a01e8c00191db2f">av_fourcc_make_string</a></div><div class="ttdeci">char * av_fourcc_make_string(char *buf, uint32_t fourcc)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2utils_8c_source.html#l00121">utils.c:121</a></div></div>
<div class="ttc" id="astruct_m_o_v_dref_html"><div class="ttname"><a href="struct_m_o_v_dref.html">MOVDref</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00073">isom.h:73</a></div></div>
<div class="ttc" id="aaes__ctr_8h_html_a97028740606e579d336c51f7523ce2bf"><div class="ttname"><a href="aes__ctr_8h.html#a97028740606e579d336c51f7523ce2bf">AES_CTR_KEY_SIZE</a></div><div class="ttdeci">#define AES_CTR_KEY_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="aes__ctr_8h_source.html#l00030">aes_ctr.h:30</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a6873ed62f196c24e8bf282609231786f"><div class="ttname"><a href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">AVStream::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00876">avformat.h:876</a></div></div>
<div class="ttc" id="acommon_8h_html_a1e233db224cd0a3079fd4572d1a3d717"><div class="ttname"><a href="common_8h.html#a1e233db224cd0a3079fd4572d1a3d717">MKBETAG</a></div><div class="ttdeci">#define MKBETAG(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00406">common.h:406</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a64075c67c537c82e7623f41badbd7788"><div class="ttname"><a href="struct_m_o_v_context.html#a64075c67c537c82e7623f41badbd7788">MOVContext::dv_demux</a></div><div class="ttdeci">DVDemuxContext * dv_demux</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00257">isom.h:257</a></div></div>
<div class="ttc" id="aaes__ctr_8h_html"><div class="ttname"><a href="aes__ctr_8h.html">aes_ctr.h</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a85dbbd306b44b02390cd91c45e6a0f76"><div class="ttname"><a href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">AVPacket::dts</a></div><div class="ttdeci">int64_t dts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00362">packet.h:362</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a020398a4963e932853cefc169d90456d"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a020398a4963e932853cefc169d90456d">AVCodecParameters::color_space</a></div><div class="ttdeci">enum AVColorSpace color_space</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:149</a></div></div>
<div class="ttc" id="astruct_m_o_v_sbgp_html_a00c6a729d1774ae461e8bac05c64c9ed"><div class="ttname"><a href="struct_m_o_v_sbgp.html#a00c6a729d1774ae461e8bac05c64c9ed">MOVSbgp::index</a></div><div class="ttdeci">unsigned int index</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00111">isom.h:111</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_html_a62deee8990401b7c67abf978b663e385"><div class="ttname"><a href="struct_m_o_v_fragment_index.html#a62deee8990401b7c67abf978b663e385">MOVFragmentIndex::current</a></div><div class="ttdeci">int current</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00148">isom.h:148</a></div></div>
<div class="ttc" id="amov_8c_html_ac109dad064cdfcfbbf69ab550f0b9d42"><div class="ttname"><a href="mov_8c.html#ac109dad064cdfcfbbf69ab550f0b9d42">add_index_entry</a></div><div class="ttdeci">static int64_t add_index_entry(AVStream *st, int64_t pos, int64_t timestamp, int size, int distance, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03295">mov.c:3295</a></div></div>
<div class="ttc" id="amov_8c_html_aec2f9a17ba9aeaa41590651eae11f373"><div class="ttname"><a href="mov_8c.html#aec2f9a17ba9aeaa41590651eae11f373">mov_current_sample_inc</a></div><div class="ttdeci">static void mov_current_sample_inc(MOVStreamContext *sc)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03434">mov.c:3434</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html"><div class="ttname"><a href="struct_a_v_buffer_ref.html">AVBufferRef</a></div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00081">buffer.h:81</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="astruct_a_v_index_entry_html_a72366fb5dae7421e41cce6ad8dd2126b"><div class="ttname"><a href="struct_a_v_index_entry.html#a72366fb5dae7421e41cce6ad8dd2126b">AVIndexEntry::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00809">avformat.h:809</a></div></div>
<div class="ttc" id="amov_8c_html_a4798517db4dbcca8522dbd35b62ffb42"><div class="ttname"><a href="mov_8c.html#a4798517db4dbcca8522dbd35b62ffb42">get_frag_time</a></div><div class="ttdeci">static int64_t get_frag_time(MOVFragmentIndex *frag_index, int index, int track_id)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01266">mov.c:1266</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a4ad2e7f456d7763060c25e92be573341"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a4ad2e7f456d7763060c25e92be573341">AVMasteringDisplayMetadata::min_luminance</a></div><div class="ttdeci">AVRational min_luminance</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00052">mastering_display_metadata.h:52</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a4e04af7a5a4d8298649850df798dd0bc"><div class="ttname"><a href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">AVStream::duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00918">avformat.h:918</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a88a4a9554afdec7861089439f2357b78"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a88a4a9554afdec7861089439f2357b78">MOVStreamContext::aes_ctr</a></div><div class="ttdeci">struct AVAESCTR * aes_ctr</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00239">isom.h:239</a></div></div>
<div class="ttc" id="amov_8c_html_aa4decda8a7ee9f7473e32f44c4de32f5"><div class="ttname"><a href="mov_8c.html#aa4decda8a7ee9f7473e32f44c4de32f5">fix_timescale</a></div><div class="ttdeci">static void fix_timescale(MOVContext *c, MOVStreamContext *sc)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04219">mov.c:4219</a></div></div>
<div class="ttc" id="aavio_8h_html_af0d12eeb9d701134d971b91b4083bb43"><div class="ttname"><a href="avio_8h.html#af0d12eeb9d701134d971b91b4083bb43">avio_r8</a></div><div class="ttdeci">int avio_r8(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00628">aviobuf.c:628</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="aundefined_8txt_html_ad99f336d4c117c453fef82993434eb4d"><div class="ttname"><a href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a></div><div class="ttdeci">The reader does not expect b to be semantically here and if the code is changed by maybe adding a a division or other the signedness will almost certainly be mistaken To avoid this confusion a new type was SUINT is the C unsigned type but it holds a signed int to use the same example SUINT a</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00041">undefined.txt:41</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gad8fde0c159ac905909339e082a049cde"><div class="ttname"><a href="group__lavu__mem__funcs.html#gad8fde0c159ac905909339e082a049cde">av_reallocp_array</a></div><div class="ttdeci">int av_reallocp_array(void *ptr, size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00206">mem.c:206</a></div></div>
<div class="ttc" id="amov_8c_html_a30f61c19e3ac724728d14ffcb8665100"><div class="ttname"><a href="mov_8c.html#a30f61c19e3ac724728d14ffcb8665100">mov_read_default</a></div><div class="ttdeci">static int mov_read_default(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06972">mov.c:6972</a></div></div>
<div class="ttc" id="atimecode_8h_html_ad0e6464512b7849a2d14593708079219abf78793ae8e9e28a4f85bb1a76992f1b"><div class="ttname"><a href="timecode_8h.html#ad0e6464512b7849a2d14593708079219abf78793ae8e9e28a4f85bb1a76992f1b">AV_TIMECODE_FLAG_24HOURSMAX</a></div><div class="ttdeci">@ AV_TIMECODE_FLAG_24HOURSMAX</div><div class="ttdoc">timecode wraps after 24 hours</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00037">timecode.h:37</a></div></div>
<div class="ttc" id="aavio__internal_8h_html_a611e256e774947becb208527333eb284"><div class="ttname"><a href="avio__internal_8h.html#a611e256e774947becb208527333eb284">ffio_ensure_seekback</a></div><div class="ttdeci">int ffio_ensure_seekback(AVIOContext *s, int64_t buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l01002">aviobuf.c:1002</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html_a46607ddcf9c93af3c95270d37491422f"><div class="ttname"><a href="struct_m_o_v_fragment.html#a46607ddcf9c93af3c95270d37491422f">MOVFragment::found_tfhd</a></div><div class="ttdeci">int found_tfhd</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00090">isom.h:90</a></div></div>
<div class="ttc" id="amov_8c_html_a2c69a70057bfb0efb93d5d5bcfad0316"><div class="ttname"><a href="mov_8c.html#a2c69a70057bfb0efb93d5d5bcfad0316">mov_read_packet</a></div><div class="ttdeci">static int mov_read_packet(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07895">mov.c:7895</a></div></div>
<div class="ttc" id="amem_8c_html_aedc3761897b7e9ea8ae1222b3d013c94"><div class="ttname"><a href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a></div><div class="ttdeci">void * av_mallocz_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00190">mem.c:190</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a0ce9631123719789e4c7b0c23c66d534"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a0ce9631123719789e4c7b0c23c66d534">AVCodecParameters::frame_size</a></div><div class="ttdeci">int frame_size</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00181">codec_par.h:181</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_ac25ed8394e1efdbbcf28932ff0020893"><div class="ttname"><a href="struct_a_v_codec_parameters.html#ac25ed8394e1efdbbcf28932ff0020893">AVCodecParameters::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:148</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="astruct_m_o_v_index_range_html_ad81ac1a7c7227e1261c1551634a2fa30"><div class="ttname"><a href="struct_m_o_v_index_range.html#ad81ac1a7c7227e1261c1551634a2fa30">MOVIndexRange::start</a></div><div class="ttdeci">int64_t start</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00154">isom.h:154</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_aba37f1cabbfbe288215a12e755ca145e"><div class="ttname"><a href="struct_m_o_v_context.html#aba37f1cabbfbe288215a12e755ca145e">MOVContext::moov_retry</a></div><div class="ttdeci">int moov_retry</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00277">isom.h:277</a></div></div>
<div class="ttc" id="aattributes_8h_html"><div class="ttname"><a href="attributes_8h.html">attributes.h</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97aea49ec141cf7f4b1c56da65d9c2df239"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aea49ec141cf7f4b1c56da65d9c2df239">AV_PKT_DATA_CONTENT_LIGHT_LEVEL</a></div><div class="ttdeci">@ AV_PKT_DATA_CONTENT_LIGHT_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00235">packet.h:235</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a633e0a725537b96ec81834da7e843219"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">AVMasteringDisplayMetadata::display_primaries</a></div><div class="ttdeci">AVRational display_primaries[3][2]</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00042">mastering_display_metadata.h:42</a></div></div>
<div class="ttc" id="aencryption__info_8c_html_ae49dc2ef6b84e80914f401bba34d4410"><div class="ttname"><a href="encryption__info_8c.html#ae49dc2ef6b84e80914f401bba34d4410">av_encryption_info_free</a></div><div class="ttdeci">void av_encryption_info_free(AVEncryptionInfo *info)</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8c_source.html#l00080">encryption_info.c:80</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_a4c7a521b8f1a0769c09bfa4a1fca7dab"><div class="ttname"><a href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a></div><div class="ttdeci">version</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00317">libkvazaar.c:317</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a877535c3b6ffdf230bce90c82c597d17"><div class="ttname"><a href="filter__design_8txt.html#a877535c3b6ffdf230bce90c82c597d17">input</a></div><div class="ttdeci">and forward the test the status of outputs and forward it to the corresponding return FFERROR_NOT_READY If the filters stores internally one or a few frame for some input</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00172">filter_design.txt:172</a></div></div>
<div class="ttc" id="amov_8c_html_a75c54019f51c1bc7200cac3044a3c7f3"><div class="ttname"><a href="mov_8c.html#a75c54019f51c1bc7200cac3044a3c7f3">mov_read_clli</a></div><div class="ttdeci">static int mov_read_clli(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05512">mov.c:5512</a></div></div>
<div class="ttc" id="astruct_a_v_spherical_mapping_html_a5168f1a737916aae56f0cf41d71937f7"><div class="ttname"><a href="struct_a_v_spherical_mapping.html#a5168f1a737916aae56f0cf41d71937f7">AVSphericalMapping::bound_left</a></div><div class="ttdeci">uint32_t bound_left</div><div class="ttdoc">Distance from the left edge.</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00167">spherical.h:167</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a3a2bda802b70e82eb9a70f9ca5e07467"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a3a2bda802b70e82eb9a70f9ca5e07467">MOVStreamContext::extradata_size</a></div><div class="ttdeci">int * extradata_size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00222">isom.h:222</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a56fa83b9c26952c52344d7ee9ff2da2d"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a56fa83b9c26952c52344d7ee9ff2da2d">MOVStreamContext::start_pad</a></div><div class="ttdeci">int start_pad</div><div class="ttdoc">amount of samples to skip due to enc-dec delay</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00213">isom.h:213</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html"><div class="ttname"><a href="struct_m_o_v_fragment.html">MOVFragment</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00089">isom.h:89</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a89fb71cff627eb08caa6d1b23ce66fa6"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a89fb71cff627eb08caa6d1b23ce66fa6">MOVStreamContext::stts_data</a></div><div class="ttdeci">MOVStts * stts_data</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00166">isom.h:166</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_ad08ac0d782cb0dc5bfbc4e55b2a33dcb"><div class="ttname"><a href="struct_m_o_v_stream_context.html#ad08ac0d782cb0dc5bfbc4e55b2a33dcb">MOVStreamContext::palette</a></div><div class="ttdeci">uint32_t palette[256]</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00208">isom.h:208</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a3866500f51fabfa90faeae894c6e955c"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a3866500f51fabfa90faeae894c6e955c">AVCodecParameters::bits_per_coded_sample</a></div><div class="ttdeci">int bits_per_coded_sample</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00102">codec_par.h:102</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a786f81429bb25853af449fe5737bf2c7"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">AVCodecParameters::block_align</a></div><div class="ttdeci">int block_align</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00177">codec_par.h:177</a></div></div>
<div class="ttc" id="aencryption__info_8c_html_aa0978e1e71c8f175a9d9a6cbad63c3d0"><div class="ttname"><a href="encryption__info_8c.html#aa0978e1e71c8f175a9d9a6cbad63c3d0">av_encryption_init_info_alloc</a></div><div class="ttdeci">AVEncryptionInitInfo * av_encryption_init_info_alloc(uint32_t system_id_size, uint32_t num_key_ids, uint32_t key_id_size, uint32_t data_size)</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8c_source.html#l00176">encryption_info.c:176</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_ab5793d8195cf4789dfb3913b7a693903"><div class="ttname"><a href="struct_a_v_packet.html#ab5793d8195cf4789dfb3913b7a693903">AVPacket::pos</a></div><div class="ttdeci">int64_t pos</div><div class="ttdoc">byte position in stream, -1 if unknown</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00383">packet.h:383</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a2e0bb8492cd8d04d57b64dc3102a579d"><div class="ttname"><a href="struct_m_o_v_context.html#a2e0bb8492cd8d04d57b64dc3102a579d">MOVContext::meta_keys</a></div><div class="ttdeci">char ** meta_keys</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00255">isom.h:255</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a2b3c706f015940d9a254f1e755528dbd"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a2b3c706f015940d9a254f1e755528dbd">MOVStreamContext::height</a></div><div class="ttdeci">int height</div><div class="ttdoc">tkhd height</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00206">isom.h:206</a></div></div>
<div class="ttc" id="amov_8c_html_a4a06d9895f2722344858926e870619a3"><div class="ttname"><a href="mov_8c.html#a4a06d9895f2722344858926e870619a3">mov_read_dfla</a></div><div class="ttdeci">static int mov_read_dfla(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06579">mov.c:6579</a></div></div>
<div class="ttc" id="astruct_a_v_probe_data_html_a30309e4de25c1a411c635eab767e1e53"><div class="ttname"><a href="struct_a_v_probe_data.html#a30309e4de25c1a411c635eab767e1e53">AVProbeData::buf_size</a></div><div class="ttdeci">int buf_size</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00444">avformat.h:444</a></div></div>
<div class="ttc" id="amov_8c_html_a8e6f02c6842d290bb03c9bfdae0c8f4c"><div class="ttname"><a href="mov_8c.html#a8e6f02c6842d290bb03c9bfdae0c8f4c">mov_default_parse_table</a></div><div class="ttdeci">static const MOVParseTableEntry mov_default_parse_table[]</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06872">mov.c:6872</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a669858250c93520fd944ba5d6eb1884d"><div class="ttname"><a href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel layout</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00018">filter_design.txt:18</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_ad90b4e1c29e927f8a600e9b38812b980"><div class="ttname"><a href="struct_m_o_v_stream_context.html#ad90b4e1c29e927f8a600e9b38812b980">MOVStreamContext::ffindex</a></div><div class="ttdeci">int ffindex</div><div class="ttdoc">AVStream index.</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00161">isom.h:161</a></div></div>
<div class="ttc" id="astruct_a_v_s_h_a_html"><div class="ttname"><a href="struct_a_v_s_h_a.html">AVSHA</a></div><div class="ttdef"><b>Definition:</b> <a href="sha_8c_source.html#l00034">sha.c:34</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a14a6ce0781ddb10c78a10f7373f9ff3d"><div class="ttname"><a href="cbs__av1_8c.html#a14a6ce0781ddb10c78a10f7373f9ff3d">flag</a></div><div class="ttdeci">#define flag(name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00552">cbs_av1.c:552</a></div></div>
<div class="ttc" id="amov_8c_html_a8c0b071822baf110ead3dd55b068c9cf"><div class="ttname"><a href="mov_8c.html#a8c0b071822baf110ead3dd55b068c9cf">parse_timecode_in_framenum_format</a></div><div class="ttdeci">static int parse_timecode_in_framenum_format(AVFormatContext *s, AVStream *st, uint32_t value, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07276">mov.c:7276</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4">AV_FIELD_BB</a></div><div class="ttdeci">@ AV_FIELD_BB</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00040">codec_par.h:40</a></div></div>
<div class="ttc" id="anamespaceconvert__header_html_afbbd9db93850ca44e2f56ebb00ce0e0c"><div class="ttname"><a href="namespaceconvert__header.html#afbbd9db93850ca44e2f56ebb00ce0e0c">convert_header.minor</a></div><div class="ttdeci">int minor</div><div class="ttdef"><b>Definition:</b> <a href="convert__header_8py_source.html#l00026">convert_header.py:26</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a2c0b73fe93234cb553d95ac5b5a635fd"><div class="ttname"><a href="struct_m_o_v_context.html#a2c0b73fe93234cb553d95ac5b5a635fd">MOVContext::meta_keys_count</a></div><div class="ttdeci">unsigned meta_keys_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00256">isom.h:256</a></div></div>
<div class="ttc" id="amov_8c_html_a4433074124d42d076bbf3bc587dbb176"><div class="ttname"><a href="mov_8c.html#a4433074124d42d076bbf3bc587dbb176">mov_metadata_hmmt</a></div><div class="ttdeci">static int mov_metadata_hmmt(MOVContext *c, AVIOContext *pb, unsigned len)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00281">mov.c:281</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409">AV_CODEC_ID_MJPEG</a></div><div class="ttdeci">@ AV_CODEC_ID_MJPEG</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00056">codec_id.h:56</a></div></div>
<div class="ttc" id="agroup__lavu__sha_html_ga58c5632adf76c34993e509b3464496c5"><div class="ttname"><a href="group__lavu__sha.html#ga58c5632adf76c34993e509b3464496c5">av_sha_alloc</a></div><div class="ttdeci">struct AVSHA * av_sha_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="sha_8c_source.html#l00045">sha.c:45</a></div></div>
<div class="ttc" id="amov_8c_html_aaa2bfd255f451a272711209847187200"><div class="ttname"><a href="mov_8c.html#aaa2bfd255f451a272711209847187200">mov_read_tenc</a></div><div class="ttdeci">static int mov_read_tenc(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06508">mov.c:6508</a></div></div>
<div class="ttc" id="amov_8c_html_a6e25ef9bd119d662d58a39dcb1521e20"><div class="ttname"><a href="mov_8c.html#a6e25ef9bd119d662d58a39dcb1521e20">mov_stsc_index_valid</a></div><div class="ttdeci">static int mov_stsc_index_valid(unsigned int index, unsigned int count)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02723">mov.c:2723</a></div></div>
<div class="ttc" id="amov_8c_html_a0a8c3d0705e7e544c46f780b33d78cd6"><div class="ttname"><a href="mov_8c.html#a0a8c3d0705e7e544c46f780b33d78cd6">mov_read_seek</a></div><div class="ttdeci">static int mov_read_seek(AVFormatContext *s, int stream_index, int64_t sample_time, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l08114">mov.c:8114</a></div></div>
<div class="ttc" id="amlp__parse_8h_html"><div class="ttname"><a href="mlp__parse_8h.html">mlp_parse.h</a></div></div>
<div class="ttc" id="amov_8c_html_a5f8aaa1f33f2e7b678c960bde2c27d2c"><div class="ttname"><a href="mov_8c.html#a5f8aaa1f33f2e7b678c960bde2c27d2c">mac_to_unicode</a></div><div class="ttdeci">static const uint32_t mac_to_unicode[128]</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00141">mov.c:141</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a36fbdf2e085ac65c887a16dc4d1a93c9"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a36fbdf2e085ac65c887a16dc4d1a93c9">MOVStreamContext::ctts_data</a></div><div class="ttdeci">MOVStts * ctts_data</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00171">isom.h:171</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a></div><div class="ttdeci">@ AV_CODEC_ID_NONE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00047">codec_id.h:47</a></div></div>
<div class="ttc" id="aavio__internal_8h_html"><div class="ttname"><a href="avio__internal_8h.html">avio_internal.h</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a9aad44bed0c244bb2f4d3e7296b2946a"><div class="ttname"><a href="intreadwrite_8h.html#a9aad44bed0c244bb2f4d3e7296b2946a">AV_WL32</a></div><div class="ttdeci">#define AV_WL32(p, val)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00290">intreadwrite.h:290</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_item_html_a0f2f77f5b374615e6cf039e8d8c6b21e"><div class="ttname"><a href="struct_m_o_v_fragment_index_item.html#a0f2f77f5b374615e6cf039e8d8c6b21e">MOVFragmentIndexItem::headers_read</a></div><div class="ttdeci">int headers_read</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00139">isom.h:139</a></div></div>
<div class="ttc" id="amov_8c_html_a942a4639dc6ccc8e3362d3f46d3e83b7"><div class="ttname"><a href="mov_8c.html#a942a4639dc6ccc8e3362d3f46d3e83b7">mov_read_trex</a></div><div class="ttdeci">static int mov_read_trex(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04700">mov.c:4700</a></div></div>
<div class="ttc" id="amov_8c_html_a6ccad09b4a2a06ae178418fdccf5940d"><div class="ttname"><a href="mov_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a></div><div class="ttdeci">#define FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l08167">mov.c:8167</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a2d8f29a864609db268219691a9a44885"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a2d8f29a864609db268219691a9a44885">MOVStreamContext::stsc_sample</a></div><div class="ttdeci">int stsc_sample</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00175">isom.h:175</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_stream_info_html_acb5a68d6be94437beeaf9108dcce0331"><div class="ttname"><a href="struct_m_o_v_fragment_stream_info.html#acb5a68d6be94437beeaf9108dcce0331">MOVFragmentStreamInfo::index_entry</a></div><div class="ttdeci">int index_entry</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00133">isom.h:133</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea4b48cce6b5f054407a9fb07fcacc81fe"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea4b48cce6b5f054407a9fb07fcacc81fe">AV_CODEC_ID_AVS</a></div><div class="ttdeci">@ AV_CODEC_ID_AVS</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00131">codec_id.h:131</a></div></div>
<div class="ttc" id="amov_8c_html_ac2e3fd03be387517f3d7611941c2111c"><div class="ttname"><a href="mov_8c.html#ac2e3fd03be387517f3d7611941c2111c">mov_fix_index</a></div><div class="ttdeci">static void mov_fix_index(MOVContext *mov, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03486">mov.c:3486</a></div></div>
<div class="ttc" id="astruct_a_v_index_entry_html_affef8bf4cd2f53a47ebc2d298d0d57c1"><div class="ttname"><a href="struct_a_v_index_entry.html#affef8bf4cd2f53a47ebc2d298d0d57c1">AVIndexEntry::timestamp</a></div><div class="ttdeci">int64_t timestamp</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00801">avformat.h:801</a></div></div>
<div class="ttc" id="amov_8c_html_a7ecf0e0c260de7da22fea66ba1289548"><div class="ttname"><a href="mov_8c.html#a7ecf0e0c260de7da22fea66ba1289548">mov_read_pssh</a></div><div class="ttdeci">static int mov_read_pssh(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06369">mov.c:6369</a></div></div>
<div class="ttc" id="amov_8c_html_a0e24178810df0f112535701ca49838ae"><div class="ttname"><a href="mov_8c.html#a0e24178810df0f112535701ca49838ae">mov_read_stsd</a></div><div class="ttdeci">static int mov_read_stsd(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02585">mov.c:2585</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a37bf1aecc4029f3336bbb2d824c26b10"><div class="ttname"><a href="struct_m_o_v_context.html#a37bf1aecc4029f3336bbb2d824c26b10">MOVContext::found_mdat</a></div><div class="ttdeci">int found_mdat</div><div class="ttdoc">'mdat' atom has been found</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00252">isom.h:252</a></div></div>
<div class="ttc" id="amov_8c_html_a7eb9e91c98e6b81c9ef5a5a07b486665"><div class="ttname"><a href="mov_8c.html#a7eb9e91c98e6b81c9ef5a5a07b486665">mov_rewrite_dvd_sub_extradata</a></div><div class="ttdeci">static int mov_rewrite_dvd_sub_extradata(AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02287">mov.c:2287</a></div></div>
<div class="ttc" id="astruct_m_o_v_encryption_index_html_a318d7154aed792ec567355b69aab4042"><div class="ttname"><a href="struct_m_o_v_encryption_index.html#a318d7154aed792ec567355b69aab4042">MOVEncryptionIndex::auxiliary_info_sample_count</a></div><div class="ttdeci">size_t auxiliary_info_sample_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00121">isom.h:121</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_gaa11ed202b70e1f52bac809811a910e2a"><div class="ttname"><a href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a></div><div class="ttdeci">#define AV_TIME_BASE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00254">avutil.h:254</a></div></div>
<div class="ttc" id="astruct_m_o_v_elst_html_a4ca876e034e22629ecff817f6348e293"><div class="ttname"><a href="struct_m_o_v_elst.html#a4ca876e034e22629ecff817f6348e293">MOVElst::rate</a></div><div class="ttdeci">float rate</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00070">isom.h:70</a></div></div>
<div class="ttc" id="adisplay_8h_html"><div class="ttname"><a href="display_8h.html">display.h</a></div></div>
<div class="ttc" id="amov_8c_html_a3cd62375215dd932a9e9f7cebe9100b8"><div class="ttname"><a href="mov_8c.html#a3cd62375215dd932a9e9f7cebe9100b8">ff_mov_read_stsd_entries</a></div><div class="ttdeci">int ff_mov_read_stsd_entries(MOVContext *c, AVIOContext *pb, int entries)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02492">mov.c:2492</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_add2b61dc8834f793e0f2fe7f099f06d1"><div class="ttname"><a href="libavformat_2internal_8h.html#add2b61dc8834f793e0f2fe7f099f06d1">avpriv_new_chapter</a></div><div class="ttdeci">AVChapter * avpriv_new_chapter(AVFormatContext *s, int id, AVRational time_base, int64_t start, int64_t end, const char *title)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04580">utils.c:4580</a></div></div>
<div class="ttc" id="aac3tab_8c_html_a0044a9d88d576681014599a70c2ae470"><div class="ttname"><a href="ac3tab_8c.html#a0044a9d88d576681014599a70c2ae470">avpriv_ac3_channel_layout_tab</a></div><div class="ttdeci">const uint16_t avpriv_ac3_channel_layout_tab[8]</div><div class="ttdef"><b>Definition:</b> <a href="ac3tab_8c_source.html#l00089">ac3tab.c:89</a></div></div>
<div class="ttc" id="agroup__lavu__video__stereo3d_html_gga12fe9672eeaeb8980960faa96d2fcee6a4cf21029b6e5aa28bf53fbd9740443c9"><div class="ttname"><a href="group__lavu__video__stereo3d.html#gga12fe9672eeaeb8980960faa96d2fcee6a4cf21029b6e5aa28bf53fbd9740443c9">AV_STEREO3D_TOPBOTTOM</a></div><div class="ttdeci">@ AV_STEREO3D_TOPBOTTOM</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00079">stereo3d.h:79</a></div></div>
<div class="ttc" id="aid3v1_8c_html_a70ec807402de9eaed0dad9c4603aee54"><div class="ttname"><a href="id3v1_8c.html#a70ec807402de9eaed0dad9c4603aee54">ff_id3v1_genre_str</a></div><div class="ttdeci">const char *const ff_id3v1_genre_str[ID3v1_GENRE_MAX+1]</div><div class="ttdef"><b>Definition:</b> <a href="id3v1_8c_source.html#l00027">id3v1.c:27</a></div></div>
<div class="ttc" id="astruct_m_o_v_dref_html_a2fc6ff7e70438d64516f337010b70230"><div class="ttname"><a href="struct_m_o_v_dref.html#a2fc6ff7e70438d64516f337010b70230">MOVDref::dir</a></div><div class="ttdeci">char * dir</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00076">isom.h:76</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a6ca823054632821e085377f7d371a2d1"><div class="ttname"><a href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">AVStream::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00870">avformat.h:870</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a8695d9f7069f617f00a51a6d869a7f8e"><div class="ttname"><a href="struct_a_v_stream_internal.html#a8695d9f7069f617f00a51a6d869a7f8e">AVStreamInternal::nb_index_entries</a></div><div class="ttdeci">int nb_index_entries</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00230">internal.h:230</a></div></div>
<div class="ttc" id="amov_8c_html_ac0edbd1bcfe926ed782b99d9d2d3b090"><div class="ttname"><a href="mov_8c.html#ac0edbd1bcfe926ed782b99d9d2d3b090">mov_read_vpcc</a></div><div class="ttdeci">static int mov_read_vpcc(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05355">mov.c:5355</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceabbe3519b849a2acd3e8366bc1173f221"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceabbe3519b849a2acd3e8366bc1173f221">AV_CODEC_ID_PCM_F64BE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_F64BE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00330">codec_id.h:330</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaa3e19a45b81bb602a4a37a4221274a20"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa3e19a45b81bb602a4a37a4221274a20">AV_CODEC_ID_HEVC</a></div><div class="ttdeci">@ AV_CODEC_ID_HEVC</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00223">codec_id.h:223</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a09f9d0cee65cb17a34e6e6d313c44b76"><div class="ttname"><a href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf default value</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="astruct_a_v_encryption_info_html"><div class="ttname"><a href="struct_a_v_encryption_info.html">AVEncryptionInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8h_source.html#l00043">encryption_info.h:43</a></div></div>
<div class="ttc" id="aopt_8h_html_aad820197915e73441f76f5e0c384d78a"><div class="ttname"><a href="opt_8h.html#aad820197915e73441f76f5e0c384d78a">AV_OPT_FLAG_DECODING_PARAM</a></div><div class="ttdeci">#define AV_OPT_FLAG_DECODING_PARAM</div><div class="ttdoc">a generic parameter which can be set by the user for demuxing or decoding</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00279">opt.h:279</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_ga63a0579d6c2aa72470ac742bbbc1205d"><div class="ttname"><a href="group__lavf__misc.html#ga63a0579d6c2aa72470ac742bbbc1205d">av_url_split</a></div><div class="ttdeci">void av_url_split(char *proto, int proto_size, char *authorization, int authorization_size, char *hostname, int hostname_size, int *port_ptr, char *path, int path_size, const char *url)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04725">utils.c:4725</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga7dfd5ba1eb1edf5845ac32b338de9e76"><div class="ttname"><a href="group__lavu__math__rational.html#ga7dfd5ba1eb1edf5845ac32b338de9e76">av_d2q</a></div><div class="ttdeci">AVRational av_d2q(double d, int max)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00106">rational.c:106</a></div></div>
<div class="ttc" id="amov_8c_html_a622d566aa38da4ccadd3b5a2685f44d7"><div class="ttname"><a href="mov_8c.html#a622d566aa38da4ccadd3b5a2685f44d7">fix_frag_index_entries</a></div><div class="ttdeci">static void fix_frag_index_entries(MOVFragmentIndex *frag_index, int index, int id, int entries)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01379">mov.c:1379</a></div></div>
<div class="ttc" id="amov_8c_html_a7f08954ff219f81d717b524389c35d4d"><div class="ttname"><a href="mov_8c.html#a7f08954ff219f81d717b524389c35d4d">mov_finalize_stsd_codec</a></div><div class="ttdeci">static int mov_finalize_stsd_codec(MOVContext *c, AVIOContext *pb, AVStream *st, MOVStreamContext *sc)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02382">mov.c:2382</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_gaf9c5619f74c99ea8a8606719c01fe7df"><div class="ttname"><a href="group__channel__masks.html#gaf9c5619f74c99ea8a8606719c01fe7df">AV_CH_FRONT_LEFT</a></div><div class="ttdeci">#define AV_CH_FRONT_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00049">channel_layout.h:49</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead316c7d2fd05155d39d862a23fda97a1"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead316c7d2fd05155d39d862a23fda97a1">AV_CODEC_ID_PCM_S32BE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S32BE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00317">codec_id.h:317</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="astruct_a_v_i_o_context_html_a0e3c41c290b38923880b9cccb669bf78"><div class="ttname"><a href="struct_a_v_i_o_context.html#a0e3c41c290b38923880b9cccb669bf78">AVIOContext::seekable</a></div><div class="ttdeci">int seekable</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00260">avio.h:260</a></div></div>
<div class="ttc" id="astruct_a_v_spherical_mapping_html_a5f82d37755e0d54559c254b7bdefffbe"><div class="ttname"><a href="struct_a_v_spherical_mapping.html#a5f82d37755e0d54559c254b7bdefffbe">AVSphericalMapping::bound_top</a></div><div class="ttdeci">uint32_t bound_top</div><div class="ttdoc">Distance from the top edge.</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00168">spherical.h:168</a></div></div>
<div class="ttc" id="amov_8c_html_a86cda9cc843d872a5c3dd69723e27424"><div class="ttname"><a href="mov_8c.html#a86cda9cc843d872a5c3dd69723e27424">mov_read_mdcv</a></div><div class="ttdeci">static int mov_read_mdcv(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05441">mov.c:5441</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a0e30962e66d883ddba77fac5af55d3af"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a0e30962e66d883ddba77fac5af55d3af">AVMasteringDisplayMetadata::has_primaries</a></div><div class="ttdeci">int has_primaries</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00062">mastering_display_metadata.h:62</a></div></div>
<div class="ttc" id="atimecode_8h_html_ad0e6464512b7849a2d14593708079219a373f53f5f7544e479b6c6b36b254fc8d"><div class="ttname"><a href="timecode_8h.html#ad0e6464512b7849a2d14593708079219a373f53f5f7544e479b6c6b36b254fc8d">AV_TIMECODE_FLAG_ALLOWNEGATIVE</a></div><div class="ttdeci">@ AV_TIMECODE_FLAG_ALLOWNEGATIVE</div><div class="ttdoc">negative time values are allowed</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00038">timecode.h:38</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_gab646f0a7cc30af543ba4a91b37f9de6e"><div class="ttname"><a href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a></div><div class="ttdeci">static av_always_inline AVRational av_inv_q(AVRational q)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00159">rational.h:159</a></div></div>
<div class="ttc" id="amov_8c_html_a9fbf91d5c580f97b066354c92d02367d"><div class="ttname"><a href="mov_8c.html#a9fbf91d5c580f97b066354c92d02367d">mov_read_mdat</a></div><div class="ttdeci">static int mov_read_mdat(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00969">mov.c:969</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea7765c5c02c05ea1a96ef1ca35dad068f"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea7765c5c02c05ea1a96ef1ca35dad068f">AV_CODEC_ID_VC1</a></div><div class="ttdeci">@ AV_CODEC_ID_VC1</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00119">codec_id.h:119</a></div></div>
<div class="ttc" id="amov_8c_html_ab74179790be576c468907f8ec562da0f"><div class="ttname"><a href="mov_8c.html#ab74179790be576c468907f8ec562da0f">mov_read_keys</a></div><div class="ttdeci">static int mov_read_keys(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04367">mov.c:4367</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a762b8363a7b4f16e53683dd2fb4c0cc0"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a762b8363a7b4f16e53683dd2fb4c0cc0">MOVStreamContext::sample_size</a></div><div class="ttdeci">unsigned int sample_size</div><div class="ttdoc">may contain value calculated from stsd or value from stsz atom</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00182">isom.h:182</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga947b60ab70c428ebb07c8b9c87023b39"><div class="ttname"><a href="group__channel__masks.html#ga947b60ab70c428ebb07c8b9c87023b39">AV_CH_SIDE_RIGHT</a></div><div class="ttdeci">#define AV_CH_SIDE_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00059">channel_layout.h:59</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_abfc9b0aa975206f7e77a125e6b78536e"><div class="ttname"><a href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">AVCodecParameters::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00170">codec_par.h:170</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea4ff1478f2b0f3bc728f6cce39d44b9f0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea4ff1478f2b0f3bc728f6cce39d44b9f0">AV_CODEC_ID_JPEG2000</a></div><div class="ttdeci">@ AV_CODEC_ID_JPEG2000</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00137">codec_id.h:137</a></div></div>
<div class="ttc" id="aisom_8h_html_a5342e91a7ac17277d9c8f71fcb9f7ce8"><div class="ttname"><a href="isom_8h.html#a5342e91a7ac17277d9c8f71fcb9f7ce8">MOV_TFHD_DEFAULT_SIZE</a></div><div class="ttdeci">#define MOV_TFHD_DEFAULT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00317">isom.h:317</a></div></div>
<div class="ttc" id="astruct_a_v_index_entry_html_ac0dd805ffd04bb52b1a358331dd10b98"><div class="ttname"><a href="struct_a_v_index_entry.html#ac0dd805ffd04bb52b1a358331dd10b98">AVIndexEntry::pos</a></div><div class="ttdeci">int64_t pos</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00800">avformat.h:800</a></div></div>
<div class="ttc" id="ariff_8h_html_a5e5faefb9c3eaa1df38a6c4f89f63df3"><div class="ttname"><a href="riff_8h.html#a5e5faefb9c3eaa1df38a6c4f89f63df3">ff_get_wav_header</a></div><div class="ttdeci">int ff_get_wav_header(AVFormatContext *s, AVIOContext *pb, AVCodecParameters *par, int size, int big_endian)</div><div class="ttdef"><b>Definition:</b> <a href="riffdec_8c_source.html#l00091">riffdec.c:91</a></div></div>
<div class="ttc" id="apixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a8111716eff3b3fd95a197993d30b8ec2">AVCOL_SPC_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_SPC_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00515">pixfmt.h:515</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga3daf97178dd1b08b5e916be381cd33e4"><div class="ttname"><a href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a></div><div class="ttdeci">int64_t av_rescale(int64_t a, int64_t b, int64_t c)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00129">mathematics.c:129</a></div></div>
<div class="ttc" id="amov_8c_html_aafd36e9cf5280751176cadf6c84bd779"><div class="ttname"><a href="mov_8c.html#aafd36e9cf5280751176cadf6c84bd779">mov_build_index</a></div><div class="ttdeci">static void mov_build_index(MOVContext *mov, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03790">mov.c:3790</a></div></div>
<div class="ttc" id="amov_8c_html_a8b440f4488e029ce5c55bba51498ef31"><div class="ttname"><a href="mov_8c.html#a8b440f4488e029ce5c55bba51498ef31">mov_read_svq3</a></div><div class="ttdeci">static int mov_read_svq3(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01853">mov.c:1853</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html"><div class="ttname"><a href="struct_a_v_codec_parameters.html">AVCodecParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00052">codec_par.h:52</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a></div><div class="ttdeci">@ AVCOL_RANGE_MPEG</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00569">pixfmt.h:569</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_addf45817ef0970905e650aff3907ce4d"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#addf45817ef0970905e650aff3907ce4d">AVMasteringDisplayMetadata::has_luminance</a></div><div class="ttdeci">int has_luminance</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00067">mastering_display_metadata.h:67</a></div></div>
<div class="ttc" id="aavformat_8h_html_a9d2e6f22150d98c36dcc2c6c49318019"><div class="ttname"><a href="avformat_8h.html#a9d2e6f22150d98c36dcc2c6c49318019">av_get_packet</a></div><div class="ttdeci">int av_get_packet(AVIOContext *s, AVPacket *pkt, int size)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l00305">utils.c:305</a></div></div>
<div class="ttc" id="amov_8c_html_a32809eb421faa06966b71b6316b2426d"><div class="ttname"><a href="mov_8c.html#a32809eb421faa06966b71b6316b2426d">get_stream_info_time</a></div><div class="ttdeci">static int64_t get_stream_info_time(MOVFragmentStreamInfo *frag_stream_info)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01256">mov.c:1256</a></div></div>
<div class="ttc" id="amov_8c_html_ac810c540561216cd9938b9545392165d"><div class="ttname"><a href="mov_8c.html#ac810c540561216cd9938b9545392165d">fix_index_entry_timestamps</a></div><div class="ttdeci">static void fix_index_entry_timestamps(AVStream *st, int end_index, int64_t end_ts, int64_t *frame_duration_buffer, int frame_duration_buffer_size)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03335">mov.c:3335</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_aaec557c3f8e5019280e98bf0aa70c48a"><div class="ttname"><a href="struct_m_o_v_context.html#aaec557c3f8e5019280e98bf0aa70c48a">MOVContext::aes_decrypt</a></div><div class="ttdeci">struct AVAES * aes_decrypt</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00293">isom.h:293</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a9ac2c1eb4e110798d965d0aead639ff9"><div class="ttname"><a href="intreadwrite_8h.html#a9ac2c1eb4e110798d965d0aead639ff9">AV_WB8</a></div><div class="ttdeci">#define AV_WB8(p, d)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00396">intreadwrite.h:396</a></div></div>
<div class="ttc" id="atimecode_8h_html_ad0e6464512b7849a2d14593708079219a4cacf5e87e2f19987c5e931be20a5c33"><div class="ttname"><a href="timecode_8h.html#ad0e6464512b7849a2d14593708079219a4cacf5e87e2f19987c5e931be20a5c33">AV_TIMECODE_FLAG_DROPFRAME</a></div><div class="ttdeci">@ AV_TIMECODE_FLAG_DROPFRAME</div><div class="ttdoc">timecode is drop frame</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00036">timecode.h:36</a></div></div>
<div class="ttc" id="aundefined_8txt_html_ac87ad0a94ca976addad13da3f587858f"><div class="ttname"><a href="undefined_8txt.html#ac87ad0a94ca976addad13da3f587858f">language</a></div><div class="ttdeci">Undefined Behavior In the C language</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00003">undefined.txt:3</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_a3d013588a419f1b93756a70c3a01011b"><div class="ttname"><a href="libavformat_2internal_8h.html#a3d013588a419f1b93756a70c3a01011b">ff_rfps_calculate</a></div><div class="ttdeci">void ff_rfps_calculate(AVFormatContext *ic)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l03354">utils.c:3354</a></div></div>
<div class="ttc" id="amov_8c_html_a383d3d6a965294260b5950905b9e06bf"><div class="ttname"><a href="mov_8c.html#a383d3d6a965294260b5950905b9e06bf">mov_read_tmcd</a></div><div class="ttdeci">static int mov_read_tmcd(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05316">mov.c:5316</a></div></div>
<div class="ttc" id="amov__chan_8h_html"><div class="ttname"><a href="mov__chan_8h.html">mov_chan.h</a></div></div>
<div class="ttc" id="amovenc_8c_html_a1c50fcd1195659821729f52af8f3bb7d"><div class="ttname"><a href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a></div><div class="ttdeci">uint32_t tag</div><div class="ttdef"><b>Definition:</b> <a href="movenc_8c_source.html#l01597">movenc.c:1597</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a50d250a128a3da9ce3d135e84213fb82"><div class="ttname"><a href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">AVStream::metadata</a></div><div class="ttdeci">AVDictionary * metadata</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00933">avformat.h:933</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="aavio__reading_8c_html_a3a86bff38e7cb9093d0a32316b73b29c"><div class="ttname"><a href="avio__reading_8c.html#a3a86bff38e7cb9093d0a32316b73b29c">read_packet</a></div><div class="ttdeci">static int read_packet(void *opaque, uint8_t *buf, int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="avio__reading_8c_source.html#l00042">avio_reading.c:42</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga96970a2980bf6ad28cd403e7dc52d6c5"><div class="ttname"><a href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a></div><div class="ttdeci">#define AV_LOG_FATAL</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00188">log.h:188</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97afa35946d9ab6a87d8be192435e6fc317"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97afa35946d9ab6a87d8be192435e6fc317">AV_PKT_DATA_DOVI_CONF</a></div><div class="ttdeci">@ AV_PKT_DATA_DOVI_CONF</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00283">packet.h:283</a></div></div>
<div class="ttc" id="astruct_m_o_v_parse_table_entry_html"><div class="ttname"><a href="struct_m_o_v_parse_table_entry.html">MOVParseTableEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00072">mov.c:72</a></div></div>
<div class="ttc" id="agroup__lavu__video__stereo3d_html_ga4c647cd938e0919c6b8cd31244343561"><div class="ttname"><a href="group__lavu__video__stereo3d.html#ga4c647cd938e0919c6b8cd31244343561">av_stereo3d_alloc</a></div><div class="ttdeci">AVStereo3D * av_stereo3d_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="stereo3d_8c_source.html#l00028">stereo3d.c:28</a></div></div>
<div class="ttc" id="amov_8c_html_ac6ce0e77bb82e93a45d7a20cf392fe51"><div class="ttname"><a href="mov_8c.html#ac6ce0e77bb82e93a45d7a20cf392fe51">mov_read_senc</a></div><div class="ttdeci">static int mov_read_senc(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06054">mov.c:6054</a></div></div>
<div class="ttc" id="aavio_8h_html_a03e23bf0144030961c34e803c71f614f"><div class="ttname"><a href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a></div><div class="ttdeci">int64_t avio_seek(AVIOContext *s, int64_t offset, int whence)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00253">aviobuf.c:253</a></div></div>
<div class="ttc" id="agroup__lavu__string_html_ga193877ba459faf314c3d285b6082cf73"><div class="ttname"><a href="group__lavu__string.html#ga193877ba459faf314c3d285b6082cf73">av_strlcat</a></div><div class="ttdeci">size_t av_strlcat(char *dst, const char *src, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="avstring_8c_source.html#l00093">avstring.c:93</a></div></div>
<div class="ttc" id="astruct_a_v_stream_internal_html_a16ff7a608ffe137c6ca6f0e01ef38a90"><div class="ttname"><a href="struct_a_v_stream_internal.html#a16ff7a608ffe137c6ca6f0e01ef38a90">AVStreamInternal::skip_samples</a></div><div class="ttdeci">int skip_samples</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2internal_8h_source.html#l00252">internal.h:252</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a56fd9cfc5ffbad16504544eb05a5ac06"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a56fd9cfc5ffbad16504544eb05a5ac06">MOVStreamContext::nb_frames_for_fps</a></div><div class="ttdeci">int nb_frames_for_fps</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00217">isom.h:217</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="aavio_8h_html_a383f5f7f7df5b6cc9b7949713a43cb37"><div class="ttname"><a href="avio_8h.html#a383f5f7f7df5b6cc9b7949713a43cb37">avio_rb16</a></div><div class="ttdeci">unsigned int avio_rb16(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00770">aviobuf.c:770</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="astruct_a_v_stereo3_d_html_a052514d0376a94e58e3eb9db3db2a7ce"><div class="ttname"><a href="struct_a_v_stereo3_d.html#a052514d0376a94e58e3eb9db3db2a7ce">AVStereo3D::type</a></div><div class="ttdeci">enum AVStereo3DType type</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00226">stereo3d.h:180</a></div></div>
<div class="ttc" id="aavformat_8h_html_afacbc85f23a50771e3801bda0a353d91a67bc09fcdeb0e05754f344fbc80856ca"><div class="ttname"><a href="avformat_8h.html#afacbc85f23a50771e3801bda0a353d91a67bc09fcdeb0e05754f344fbc80856ca">AVSTREAM_PARSE_HEADERS</a></div><div class="ttdeci">@ AVSTREAM_PARSE_HEADERS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00791">avformat.h:791</a></div></div>
<div class="ttc" id="aspdifenc_8c_html_addcb93d939ffa259ff1d9247bdd590fd"><div class="ttname"><a href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a></div><div class="ttdeci">unsigned int pos</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00410">spdifenc.c:410</a></div></div>
<div class="ttc" id="aavformat_8h_html"><div class="ttname"><a href="avformat_8h.html">avformat.h</a></div></div>
<div class="ttc" id="adovi__meta_8h_html"><div class="ttname"><a href="dovi__meta_8h.html">dovi_meta.h</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a7c67ae70632c91df8b0f721658ec5377"><div class="ttname"><a href="struct_a_v_stream.html#a7c67ae70632c91df8b0f721658ec5377">AVStream::start_time</a></div><div class="ttdeci">int64_t start_time</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00908">avformat.h:908</a></div></div>
<div class="ttc" id="adict_8h_html"><div class="ttname"><a href="dict_8h.html">dict.h</a></div></div>
<div class="ttc" id="astruct_a_v_spherical_mapping_html_aaad422230e2b0f0ebfb981275e22ffb0"><div class="ttname"><a href="struct_a_v_spherical_mapping.html#aaad422230e2b0f0ebfb981275e22ffb0">AVSphericalMapping::roll</a></div><div class="ttdeci">int32_t roll</div><div class="ttdoc">Rotation around the forward vector [-180, 180].</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00128">spherical.h:128</a></div></div>
<div class="ttc" id="amov_8c_html_a63ebdc9d9252fbe651f38dd76573121d"><div class="ttname"><a href="mov_8c.html#a63ebdc9d9252fbe651f38dd76573121d">mov_read_dmlp</a></div><div class="ttdeci">static int mov_read_dmlp(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06783">mov.c:6783</a></div></div>
<div class="ttc" id="aaes__ctr_8c_html_a5048a65b4d63738e454bd02751fe56e9"><div class="ttname"><a href="aes__ctr_8c.html#a5048a65b4d63738e454bd02751fe56e9">av_aes_ctr_set_full_iv</a></div><div class="ttdeci">void av_aes_ctr_set_full_iv(struct AVAESCTR *a, const uint8_t *iv)</div><div class="ttdef"><b>Definition:</b> <a href="aes__ctr_8c_source.html#l00048">aes_ctr.c:48</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html_a2349be11f5e42574a16880d4440c4b04"><div class="ttname"><a href="struct_m_o_v_fragment.html#a2349be11f5e42574a16880d4440c4b04">MOVFragment::track_id</a></div><div class="ttdeci">unsigned track_id</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00091">isom.h:91</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga8f5b632a03ce83ac8e025894b1fc307a"><div class="ttname"><a href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a></div><div class="ttdeci">#define AV_INPUT_BUFFER_PADDING_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00215">avcodec.h:215</a></div></div>
<div class="ttc" id="astruct_m_o_v_stsc_html_ad628654a1fb779465ed6e62a2ec42668"><div class="ttname"><a href="struct_m_o_v_stsc.html#ad628654a1fb779465ed6e62a2ec42668">MOVStsc::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00064">isom.h:64</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html"><div class="ttname"><a href="struct_m_o_v_context.html">MOVContext</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00246">isom.h:246</a></div></div>
<div class="ttc" id="amov_8c_html_a74298e7157b952783dfa02ebaec0d8ee"><div class="ttname"><a href="mov_8c.html#a74298e7157b952783dfa02ebaec0d8ee">mov_read_tfdt</a></div><div class="ttdeci">static int mov_read_tfdt(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l04726">mov.c:4726</a></div></div>
<div class="ttc" id="asnow_8txt_html_a7c18a837a38b8c96472a1d0abe1711d1"><div class="ttname"><a href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a></div><div class="ttdeci">Tag MUST be and&lt; 10hcoeff half pel interpolation filter coefficients, hcoeff[0] are the 2 middle coefficients[1] are the next outer ones and so on, resulting in a filter like:...eff[2], hcoeff[1], hcoeff[0], hcoeff[0], hcoeff[1], hcoeff[2] ... the sign of the coefficients is not explicitly stored but alternates after each coeff and coeff[0] is positive, so ...,+,-,+,-,+,+,-,+,-,+,... hcoeff[0] is not explicitly stored but found by subtracting the sum of all stored coefficients with signs from 32 hcoeff[0]=32 - hcoeff[1] - hcoeff[2] - ... a good choice for hcoeff and htaps is htaps=6 hcoeff={40,-10, 2} an alternative which requires more computations at both encoder and decoder side and may or may not be better is htaps=8 hcoeff={42,-14, 6,-2}ref_frames minimum of the number of available reference frames and max_ref_frames for example the first frame after a key frame always has ref_frames=1spatial_decomposition_type wavelet type 0 is a 9/7 symmetric compact integer wavelet 1 is a 5/3 symmetric compact integer wavelet others are reserved stored as delta from last, last is reset to 0 if always_reset||keyframeqlog quality(logarithmic quantizer scale) stored as delta from last, last is reset to 0 if always_reset||keyframemv_scale stored as delta from last, last is reset to 0 if always_reset||keyframe FIXME check that everything works fine if this changes between framesqbias dequantization bias stored as delta from last, last is reset to 0 if always_reset||keyframeblock_max_depth maximum depth of the block tree stored as delta from last, last is reset to 0 if always_reset||keyframequant_table quantization tableHighlevel bitstream structure:==============================--------------------------------------------|Header|--------------------------------------------|------------------------------------|||Block0||||split?||||yes no||||......... intra?||||:Block01 :yes no||||:Block02 :....... ..........||||:Block03 ::y DC ::ref index:||||:Block04 ::cb DC ::motion x :||||......... :cr DC ::motion y :||||....... ..........|||------------------------------------||------------------------------------|||Block1|||...|--------------------------------------------|------------ ------------ ------------|||Y subbands||Cb subbands||Cr subbands||||--- ---||--- ---||--- ---|||||LL0||HL0||||LL0||HL0||||LL0||HL0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||LH0||HH0||||LH0||HH0||||LH0||HH0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HL1||LH1||||HL1||LH1||||HL1||LH1|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HH1||HL2||||HH1||HL2||||HH1||HL2|||||...||...||...|||------------ ------------ ------------|--------------------------------------------Decoding process:=================------------|||Subbands|------------||||------------|Intra DC||||LL0 subband prediction ------------|\ Dequantization ------------------- \||Reference frames|\ IDWT|------- -------|Motion \|||Frame 0||Frame 1||Compensation . OBMC v -------|------- -------|--------------. \------&gt; Frame n output Frame Frame&lt;----------------------------------/|...|------------------- Range Coder:============Binary Range Coder:------------------- The implemented range coder is an adapted version based upon &quot;Range encoding: an algorithm for removing redundancy from a digitised message.&quot; by G. N. N. Martin. The symbols encoded by the Snow range coder are bits(0|1). The associated probabilities are not fix but change depending on the symbol mix seen so far. bit seen|new state ---------+----------------------------------------------- 0|256 - state_transition_table[256 - old_state];1|state_transition_table[old_state];state_transition_table={ 0, 0, 0, 0, 0, 0, 0, 0, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 190, 191, 192, 194, 194, 195, 196, 197, 198, 199, 200, 201, 202, 202, 204, 205, 206, 207, 208, 209, 209, 210, 211, 212, 213, 215, 215, 216, 217, 218, 219, 220, 220, 222, 223, 224, 225, 226, 227, 227, 229, 229, 230, 231, 232, 234, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 248, 0, 0, 0, 0, 0, 0, 0};FIXME Range Coding of integers:------------------------- FIXME Neighboring Blocks:===================left and top are set to the respective blocks unless they are outside of the image in which case they are set to the Null block top-left is set to the top left block unless it is outside of the image in which case it is set to the left block if this block has no larger parent block or it is at the left side of its parent block and the top right block is not outside of the image then the top right block is used for top-right else the top-left block is used Null block y, cb, cr are 128 level, ref, mx and my are 0 Motion Vector Prediction:=========================1. the motion vectors of all the neighboring blocks are scaled to compensate for the difference of reference frames scaled_mv=(mv *(256 *(current_reference+1)/(mv.reference+1))+128)&gt; the median of the scaled left</div><div class="ttdef"><b>Definition:</b> <a href="snow_8txt_source.html#l00386">snow.txt:386</a></div></div>
<div class="ttc" id="amov_8c_html_a02308509c67d186a1c12fb1177742443"><div class="ttname"><a href="mov_8c.html#a02308509c67d186a1c12fb1177742443">search_frag_moof_offset</a></div><div class="ttdeci">static int search_frag_moof_offset(MOVFragmentIndex *frag_index, int64_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01232">mov.c:1232</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_gad9cbc53cec515b72ae7caa2e194c6bc0"><div class="ttname"><a href="group__lavu__dict.html#gad9cbc53cec515b72ae7caa2e194c6bc0">AV_DICT_MATCH_CASE</a></div><div class="ttdeci">#define AV_DICT_MATCH_CASE</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00069">dict.h:69</a></div></div>
<div class="ttc" id="amov_8c_html_a136f47c61498b259c59777b77f34443d"><div class="ttname"><a href="mov_8c.html#a136f47c61498b259c59777b77f34443d">mov_switch_root</a></div><div class="ttdeci">static int mov_switch_root(AVFormatContext *s, int64_t target, int index)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07815">mov.c:7815</a></div></div>
<div class="ttc" id="amov_8c_html_a85f4640d43cd6033a3091393a6d6de2c"><div class="ttname"><a href="mov_8c.html#a85f4640d43cd6033a3091393a6d6de2c">MIN_DATA_ENTRY_BOX_SIZE</a></div><div class="ttdeci">#define MIN_DATA_ENTRY_BOX_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00572">mov.c:572</a></div></div>
<div class="ttc" id="astruct_a_v_input_format_html_a850db3eb225e22b64f3304d72134ca0c"><div class="ttname"><a href="struct_a_v_input_format.html#a850db3eb225e22b64f3304d72134ca0c">AVInputFormat::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00643">avformat.h:643</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_abae97b42a84566f619d37478b6ce9788"><div class="ttname"><a href="struct_m_o_v_stream_context.html#abae97b42a84566f619d37478b6ce9788">MOVStreamContext::time_scale</a></div><div class="ttdeci">int time_scale</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00189">isom.h:189</a></div></div>
<div class="ttc" id="alibavformat_2dv_8c_html_a2996068e734179ace8b9d6b9e0cdb608"><div class="ttname"><a href="libavformat_2dv_8c.html#a2996068e734179ace8b9d6b9e0cdb608">avpriv_dv_init_demux</a></div><div class="ttdeci">DVDemuxContext * avpriv_dv_init_demux(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2dv_8c_source.html#l00339">dv.c:339</a></div></div>
<div class="ttc" id="amov_8c_html_a65cb20db2d770d4e897f5c0d78621450"><div class="ttname"><a href="mov_8c.html#a65cb20db2d770d4e897f5c0d78621450">mov_seek_fragment</a></div><div class="ttdeci">static int mov_seek_fragment(AVFormatContext *s, AVStream *st, int64_t timestamp)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l08041">mov.c:8041</a></div></div>
<div class="ttc" id="amov_8c_html_a0ee4ed7673e27805831071a544b0026e"><div class="ttname"><a href="mov_8c.html#a0ee4ed7673e27805831071a544b0026e">mov_parse_stsd_video</a></div><div class="ttdeci">static void mov_parse_stsd_video(MOVContext *c, AVIOContext *pb, AVStream *st, MOVStreamContext *sc)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02092">mov.c:2092</a></div></div>
<div class="ttc" id="ariff_8c_html_ab352e82619d77c87a198467142d86b25"><div class="ttname"><a href="riff_8c.html#ab352e82619d77c87a198467142d86b25">ff_codec_bmp_tags</a></div><div class="ttdeci">const AVCodecTag ff_codec_bmp_tags[]</div><div class="ttdef"><b>Definition:</b> <a href="riff_8c_source.html#l00032">riff.c:32</a></div></div>
<div class="ttc" id="amov_8c_html_a63381c2ef75e97e3f061e6a38054397d"><div class="ttname"><a href="mov_8c.html#a63381c2ef75e97e3f061e6a38054397d">mov_read_dec3</a></div><div class="ttdeci">static int mov_read_dec3(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00817">mov.c:817</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_abc7de8e47919c37c9806ae785480e654"><div class="ttname"><a href="struct_m_o_v_stream_context.html#abc7de8e47919c37c9806ae785480e654">MOVStreamContext::stsc_index</a></div><div class="ttdeci">unsigned int stsc_index</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00174">isom.h:174</a></div></div>
<div class="ttc" id="amlp__parse_8h_html_a9ebdc2270d875704df2b757fd5ca623e"><div class="ttname"><a href="mlp__parse_8h.html#a9ebdc2270d875704df2b757fd5ca623e">mlp_samplerate</a></div><div class="ttdeci">static int mlp_samplerate(int in)</div><div class="ttdef"><b>Definition:</b> <a href="mlp__parse_8h_source.html#l00080">mlp_parse.h:80</a></div></div>
<div class="ttc" id="achannel__layout_8h_html"><div class="ttname"><a href="channel__layout_8h.html">channel_layout.h</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a183ab8c12787809a984fc7798f195010"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a183ab8c12787809a984fc7798f195010">MOVStreamContext::rap_group</a></div><div class="ttdeci">MOVSbgp * rap_group</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00215">isom.h:215</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_ace46e41b9bd6cac88fb7109ffd657f9a"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a></div><div class="ttdeci">#define AV_RL32</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00146">intreadwrite.h:146</a></div></div>
<div class="ttc" id="amov_8c_html_a79f6e12ccc3b7e0168eb2c520d153181"><div class="ttname"><a href="mov_8c.html#a79f6e12ccc3b7e0168eb2c520d153181">mov_read_sbgp</a></div><div class="ttdeci">static int mov_read_sbgp(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03107">mov.c:3107</a></div></div>
<div class="ttc" id="aavio_8h_html_a03ea0dfa113a05f4843bbfff69e0cd0a"><div class="ttname"><a href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a></div><div class="ttdeci">#define AVIO_SEEKABLE_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00040">avio.h:40</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ab5bf43ceeffd5c440d539ae2ed025827"><div class="ttname"><a href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a></div><div class="ttdeci">the frame and frame reference mechanism is intended to as much as expensive copies of that data while still allowing the filters to produce correct results The data is stored in buffers represented by AVFrame structures Several references can point to the same frame buffer</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00049">filter_design.txt:49</a></div></div>
<div class="ttc" id="amov_8c_html_abaa02c4c48dde0be52b2e61d23ddd3cc"><div class="ttname"><a href="mov_8c.html#abaa02c4c48dde0be52b2e61d23ddd3cc">mov_read_glbl</a></div><div class="ttdeci">static int mov_read_glbl(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01915">mov.c:1915</a></div></div>
<div class="ttc" id="amov_8c_html_af62abf017e393458646f14b62c6b1d78"><div class="ttname"><a href="mov_8c.html#af62abf017e393458646f14b62c6b1d78">mov_change_extradata</a></div><div class="ttdeci">static int mov_change_extradata(MOVStreamContext *sc, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07851">mov.c:7851</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97ad353d4a7841087354593a97bef92841a"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97ad353d4a7841087354593a97bef92841a">AV_PKT_DATA_NEW_EXTRADATA</a></div><div class="ttdeci">@ AV_PKT_DATA_NEW_EXTRADATA</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00055">packet.h:55</a></div></div>
<div class="ttc" id="aebur128_8h_html_a1a6b6fb557d8d37d59700faf4e4c9167"><div class="ttname"><a href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> <a href="ebur128_8h_source.html#l00083">ebur128.h:83</a></div></div>
<div class="ttc" id="amov_8c_html_aeb76c57f581cab38919fa8efe0d73efd"><div class="ttname"><a href="mov_8c.html#aeb76c57f581cab38919fa8efe0d73efd">mov_parse_uuid_spherical</a></div><div class="ttdeci">static int mov_parse_uuid_spherical(MOVStreamContext *sc, AVIOContext *pb, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05716">mov.c:5716</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a></div><div class="ttdeci">@ AV_OPT_TYPE_INT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00225">opt.h:225</a></div></div>
<div class="ttc" id="astruct_a_v_spherical_mapping_html_ad7d7c61a2550cc4284076cc846873702"><div class="ttname"><a href="struct_a_v_spherical_mapping.html#ad7d7c61a2550cc4284076cc846873702">AVSphericalMapping::yaw</a></div><div class="ttdeci">int32_t yaw</div><div class="ttdoc">Rotation around the up vector [-180, 180].</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00126">spherical.h:126</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="astruct_m_o_v_encryption_index_html_a1eed1381758276773331e5c2504bb30a"><div class="ttname"><a href="struct_m_o_v_encryption_index.html#a1eed1381758276773331e5c2504bb30a">MOVEncryptionIndex::nb_encrypted_samples</a></div><div class="ttdeci">unsigned int nb_encrypted_samples</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00117">isom.h:117</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea91aff3d42b6b8fc68dfe079a33a64949"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea91aff3d42b6b8fc68dfe079a33a64949">AV_CODEC_ID_DVAUDIO</a></div><div class="ttdeci">@ AV_CODEC_ID_DVAUDIO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00424">codec_id.h:424</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_ab9311bc0d4c3066e2aa820eeb14137bb"><div class="ttname"><a href="struct_m_o_v_stream_context.html#ab9311bc0d4c3066e2aa820eeb14137bb">MOVStreamContext::dts_shift</a></div><div class="ttdeci">int dts_shift</div><div class="ttdoc">dts shift when ctts is negative</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00207">isom.h:207</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html"><div class="ttname"><a href="struct_a_v_format_context.html">AVFormatContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01223">avformat.h:1223</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_gac2990b13b68e831a408fce8e1d0d6445"><div class="ttname"><a href="group__lavf__core.html#gac2990b13b68e831a408fce8e1d0d6445">avformat_free_context</a></div><div class="ttdeci">void avformat_free_context(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04382">utils.c:4382</a></div></div>
<div class="ttc" id="amov_8c_html_a5535f592604456c8c890a3ff0306dec3"><div class="ttname"><a href="mov_8c.html#a5535f592604456c8c890a3ff0306dec3">mov_read_sv3d</a></div><div class="ttdeci">static int mov_read_sv3d(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05579">mov.c:5579</a></div></div>
<div class="ttc" id="aavio_8h_html_abb4e58439be0bff0dc2e2974ee5fb6a3"><div class="ttname"><a href="avio_8h.html#abb4e58439be0bff0dc2e2974ee5fb6a3">avio_read</a></div><div class="ttdeci">int avio_read(AVIOContext *s, unsigned char *buf, int size)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00637">aviobuf.c:637</a></div></div>
<div class="ttc" id="amov_8c_html_a54d80b093f80a575ef1b472fee527c70"><div class="ttname"><a href="mov_8c.html#a54d80b093f80a575ef1b472fee527c70">mov_aaxc_crypto</a></div><div class="ttdeci">static int mov_aaxc_crypto(MOVContext *c)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01078">mov.c:1078</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a539f03590bb3e8c69d2111ede5e4ac94"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a539f03590bb3e8c69d2111ede5e4ac94">AVCodecParameters::seek_preroll</a></div><div class="ttdeci">int seek_preroll</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00200">codec_par.h:200</a></div></div>
<div class="ttc" id="astruct_m_o_v_encryption_index_html"><div class="ttname"><a href="struct_m_o_v_encryption_index.html">MOVEncryptionIndex</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00114">isom.h:114</a></div></div>
<div class="ttc" id="amov_8c_html_a50a6ea0d7c4ed7bcd7b90c82ddaed454"><div class="ttname"><a href="mov_8c.html#a50a6ea0d7c4ed7bcd7b90c82ddaed454">mov_read_av1c</a></div><div class="ttdeci">static int mov_read_av1c(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05327">mov.c:5327</a></div></div>
<div class="ttc" id="atests_2jpeg2000dwt_8c_html_a5cabdd8be5af41f675fed06498e094b7"><div class="ttname"><a href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a></div><div class="ttdeci">static int ref[MAX_W *MAX_W]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2jpeg2000dwt_8c_source.html#l00107">jpeg2000dwt.c:107</a></div></div>
<div class="ttc" id="astruct_m_o_v_parse_table_entry_html_a777d3e1425cb73aeae90cc363fa6080b"><div class="ttname"><a href="struct_m_o_v_parse_table_entry.html#a777d3e1425cb73aeae90cc363fa6080b">MOVParseTableEntry::type</a></div><div class="ttdeci">uint32_t type</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00073">mov.c:73</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a9b6948eb6a7d702935ec1ff6afaa4a0a"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a9b6948eb6a7d702935ec1ff6afaa4a0a">MOVStreamContext::has_sidx</a></div><div class="ttdeci">int has_sidx</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00237">isom.h:237</a></div></div>
<div class="ttc" id="amov_8c_html_a64db6ed08b0c302f839f83c7a6aa0b5d"><div class="ttname"><a href="mov_8c.html#a64db6ed08b0c302f839f83c7a6aa0b5d">mov_metadata_int8_bypass_padding</a></div><div class="ttdeci">static int mov_metadata_int8_bypass_padding(MOVContext *c, AVIOContext *pb, unsigned len, const char *key)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00102">mov.c:102</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ac53f7e33bdbd6ea3ec96ee0f1292ee84"><div class="ttname"><a href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio samples</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00008">filter_design.txt:8</a></div></div>
<div class="ttc" id="amov_8c_html_a67f2dc82a05c3332e06ac89399eff342"><div class="ttname"><a href="mov_8c.html#a67f2dc82a05c3332e06ac89399eff342">mov_read_covr</a></div><div class="ttdeci">static int mov_read_covr(MOVContext *c, AVIOContext *pb, int type, int len)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00182">mov.c:182</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html_a4fb2a0e4f5609e5af711880ac4ace2db"><div class="ttname"><a href="struct_m_o_v_fragment.html#a4fb2a0e4f5609e5af711880ac4ace2db">MOVFragment::size</a></div><div class="ttdeci">unsigned size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00097">isom.h:97</a></div></div>
<div class="ttc" id="aisom_8c_html_adfcff83a3c1e724ca9f8d2a3d29e760c"><div class="ttname"><a href="isom_8c.html#adfcff83a3c1e724ca9f8d2a3d29e760c">ff_codec_movsubtitle_tags</a></div><div class="ttdeci">const AVCodecTag ff_codec_movsubtitle_tags[]</div><div class="ttdef"><b>Definition:</b> <a href="isom_8c_source.html#l00384">isom.c:384</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_stream_info_html_a2ca9d74863a23d6b79c9bd4106078248"><div class="ttname"><a href="struct_m_o_v_fragment_stream_info.html#a2ca9d74863a23d6b79c9bd4106078248">MOVFragmentStreamInfo::encryption_index</a></div><div class="ttdeci">MOVEncryptionIndex * encryption_index</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00134">isom.h:134</a></div></div>
<div class="ttc" id="astruct_a_v_encryption_init_info_html_a25a89671f39c5b8d3813df00f0576753"><div class="ttname"><a href="struct_a_v_encryption_init_info.html#a25a89671f39c5b8d3813df00f0576753">AVEncryptionInitInfo::next</a></div><div class="ttdeci">struct AVEncryptionInitInfo * next</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8h_source.html#l00122">encryption_info.h:122</a></div></div>
<div class="ttc" id="aavio_8h_html_aa22e02f986ea8a8dc018f9615af27eea"><div class="ttname"><a href="avio_8h.html#aa22e02f986ea8a8dc018f9615af27eea">avio_skip</a></div><div class="ttdeci">int64_t avio_skip(AVIOContext *s, int64_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00341">aviobuf.c:341</a></div></div>
<div class="ttc" id="amov_8c_html_addac265d1db363043ab9b96a2e29c697"><div class="ttname"><a href="mov_8c.html#addac265d1db363043ab9b96a2e29c697">export_orphan_timecode</a></div><div class="ttdeci">static void export_orphan_timecode(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07453">mov.c:7453</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a3bf81872813551fe9343dd0e09993e38"><div class="ttname"><a href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">AVPacket::buf</a></div><div class="ttdeci">AVBufferRef * buf</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00346">packet.h:346</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga394b4b2c87790178bf7b683b45320f31"><div class="ttname"><a href="group__channel__masks.html#ga394b4b2c87790178bf7b683b45320f31">AV_CH_FRONT_RIGHT</a></div><div class="ttdeci">#define AV_CH_FRONT_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00050">channel_layout.h:50</a></div></div>
<div class="ttc" id="amov_8c_html_a3ce9dddcb355975fd253976f5dda71f2"><div class="ttname"><a href="mov_8c.html#a3ce9dddcb355975fd253976f5dda71f2">mov_metadata_gnre</a></div><div class="ttdeci">static int mov_metadata_gnre(MOVContext *c, AVIOContext *pb, unsigned len, const char *key)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00125">mov.c:125</a></div></div>
<div class="ttc" id="astruct_m_o_v_encryption_index_html_aac680584f3fa6f17189cfb2c9ba6c3da"><div class="ttname"><a href="struct_m_o_v_encryption_index.html#aac680584f3fa6f17189cfb2c9ba6c3da">MOVEncryptionIndex::encrypted_samples</a></div><div class="ttdeci">AVEncryptionInfo ** encrypted_samples</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00118">isom.h:118</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a70e06db8083691e76b6bd57aa6baeedc"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a70e06db8083691e76b6bd57aa6baeedc">MOVStreamContext::sdtp_data</a></div><div class="ttdeci">uint8_t * sdtp_data</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00168">isom.h:168</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a5837cafc419c2b5ecdb1dfa330675d13"><div class="ttname"><a href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_DISABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00084">internal.h:84</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_gafd013a88620b2da7d497b083f6ea7d29"><div class="ttname"><a href="group__lavu__dict.html#gafd013a88620b2da7d497b083f6ea7d29">av_dict_set_int</a></div><div class="ttdeci">int av_dict_set_int(AVDictionary **pm, const char *key, int64_t value, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00147">dict.c:147</a></div></div>
<div class="ttc" id="amov_8c_html_a3da5141b8315c758892c60dde3fc3274"><div class="ttname"><a href="mov_8c.html#a3da5141b8315c758892c60dde3fc3274">mov_read_dpxe</a></div><div class="ttdeci">static int mov_read_dpxe(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01742">mov.c:1742</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_adb8463bd54e90ac181f7edc0944252de"><div class="ttname"><a href="libavformat_2internal_8h.html#adb8463bd54e90ac181f7edc0944252de">ff_format_io_close</a></div><div class="ttdeci">void ff_format_io_close(AVFormatContext *s, AVIOContext **pb)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05618">utils.c:5618</a></div></div>
<div class="ttc" id="aavio_8h_html_a21e61cb486bd1588eb7f775998cf8c77"><div class="ttname"><a href="avio_8h.html#a21e61cb486bd1588eb7f775998cf8c77">AVIO_FLAG_READ</a></div><div class="ttdeci">#define AVIO_FLAG_READ</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00674">avio.h:674</a></div></div>
<div class="ttc" id="aregdef_8h_html_a71234e05f922466327ffed37b019c7fb"><div class="ttname"><a href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a></div><div class="ttdeci">#define tc</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00069">regdef.h:69</a></div></div>
<div class="ttc" id="agroup__lavu__video__spherical_html_gab366393b8836ac987df51546183386ea"><div class="ttname"><a href="group__lavu__video__spherical.html#gab366393b8836ac987df51546183386ea">av_spherical_alloc</a></div><div class="ttdeci">AVSphericalMapping * av_spherical_alloc(size_t *size)</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8c_source.html#l00024">spherical.c:24</a></div></div>
<div class="ttc" id="amov_8c_html_a62c8e55b4fb9ec58309866627e9fcfb7"><div class="ttname"><a href="mov_8c.html#a62c8e55b4fb9ec58309866627e9fcfb7">mov_read_rtmd_track</a></div><div class="ttdeci">static int mov_read_rtmd_track(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07290">mov.c:7290</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a257a3a2ef7098d7ca8200d56aa25edc8"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a257a3a2ef7098d7ca8200d56aa25edc8">MOVStreamContext::track_end</a></div><div class="ttdeci">int64_t track_end</div><div class="ttdoc">used for dts generation in fragmented movie files</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00212">isom.h:212</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea6384417ba463d7aeb03015797cff3349"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6384417ba463d7aeb03015797cff3349">AV_CODEC_ID_PCM_S32LE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S32LE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00316">codec_id.h:316</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="amov_8c_html_af1fc60aabb6b5db23ed3e383bef7a3e3"><div class="ttname"><a href="mov_8c.html#af1fc60aabb6b5db23ed3e383bef7a3e3">mov_parse_stsd_audio</a></div><div class="ttdeci">static void mov_parse_stsd_audio(MOVContext *c, AVIOContext *pb, AVStream *st, MOVStreamContext *sc)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02148">mov.c:2148</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea1e9ff6fe2442af342b2b42a1a0b2abc8"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1e9ff6fe2442af342b2b42a1a0b2abc8">AV_CODEC_ID_PCM_U8</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_U8</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00313">codec_id.h:313</a></div></div>
<div class="ttc" id="amov_8c_html_a86d61c4fee83b570039e08f61a5856c9"><div class="ttname"><a href="mov_8c.html#a86d61c4fee83b570039e08f61a5856c9">mov_read_timecode_track</a></div><div class="ttdeci">static int mov_read_timecode_track(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07315">mov.c:7315</a></div></div>
<div class="ttc" id="astruct_a_v_i_o_context_html_aa9214f54c01f07076e0a0718b2e9c27b"><div class="ttname"><a href="struct_a_v_i_o_context.html#aa9214f54c01f07076e0a0718b2e9c27b">AVIOContext::eof_reached</a></div><div class="ttdeci">int eof_reached</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00239">avio.h:239</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a61b61b0d009be377ebcfdc30ea053d27"><div class="ttname"><a href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">AVStream::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00884">avformat.h:884</a></div></div>
<div class="ttc" id="amov_8c_html_ad03c2b9914f9ded24ee311a37d3678e6"><div class="ttname"><a href="mov_8c.html#ad03c2b9914f9ded24ee311a37d3678e6">mov_read_mac_string</a></div><div class="ttdeci">static int mov_read_mac_string(MOVContext *c, AVIOContext *pb, int len, char *dst, int dstlen)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00160">mov.c:160</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a></div><div class="ttdeci">@ AV_FIELD_PROGRESSIVE</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00038">codec_par.h:38</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html"><div class="ttname"><a href="struct_a_v_stream.html">AVStream</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00869">avformat.h:869</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adb009f1d85ac852f5a0f6da3dd88ba56"><div class="ttname"><a href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a></div><div class="ttdeci">#define avpriv_request_sample(...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00039">tableprint_vlc.h:39</a></div></div>
<div class="ttc" id="astruct_a_v_index_entry_html_a1b57d93b863a1b605461229a65ca8b52"><div class="ttname"><a href="struct_a_v_index_entry.html#a1b57d93b863a1b605461229a65ca8b52">AVIndexEntry::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00810">avformat.h:810</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a2848b3598cdcbf37a9d6bbd4b485d4a3"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a2848b3598cdcbf37a9d6bbd4b485d4a3">MOVStreamContext::pseudo_stream_id</a></div><div class="ttdeci">int pseudo_stream_id</div><div class="ttdoc">-1 means demux all ids</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00199">isom.h:199</a></div></div>
<div class="ttc" id="amov_8c_html_a70e9e7ee26639878f2d460069d6afb89"><div class="ttname"><a href="mov_8c.html#a70e9e7ee26639878f2d460069d6afb89">MOVParseTableEntry</a></div><div class="ttdeci">struct MOVParseTableEntry MOVParseTableEntry</div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_a9f7dcde5c9b537264e9020d70e6add14"><div class="ttname"><a href="libavformat_2internal_8h.html#a9f7dcde5c9b537264e9020d70e6add14">ff_generate_avci_extradata</a></div><div class="ttdeci">int ff_generate_avci_extradata(AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05296">utils.c:5296</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea7a06659945e1b8973c6f4712d4910ba1"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea7a06659945e1b8973c6f4712d4910ba1">AV_CODEC_ID_PCM_F64LE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_F64LE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00331">codec_id.h:331</a></div></div>
<div class="ttc" id="astruct_a_v_d_o_v_i_decoder_configuration_record_html_af212117847425270d1da7ff88e28efb0"><div class="ttname"><a href="struct_a_v_d_o_v_i_decoder_configuration_record.html#af212117847425270d1da7ff88e28efb0">AVDOVIDecoderConfigurationRecord::bl_present_flag</a></div><div class="ttdeci">uint8_t bl_present_flag</div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8h_source.html#l00058">dovi_meta.h:58</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a58369c3a8a986935b572df5aa6361ce2"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">AVCodecParameters::codec_type</a></div><div class="ttdeci">enum AVMediaType codec_type</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:56</a></div></div>
<div class="ttc" id="amov_8c_html_a65a24e307c77a8ca33e9524619a389d4"><div class="ttname"><a href="mov_8c.html#a65a24e307c77a8ca33e9524619a389d4">read_tfra</a></div><div class="ttdeci">static int read_tfra(MOVContext *mov, AVIOContext *f)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07471">mov.c:7471</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a18e0af4b263443a6c4d2d5304dbd537e"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">AVCodecParameters::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00162">codec_par.h:162</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a079eab092887563f2bef9106c6120089"><div class="ttname"><a href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a></div><div class="ttdeci">#define av_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00034">tableprint_vlc.h:34</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a153946872548cd56132907b93f05f9aa"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a153946872548cd56132907b93f05f9aa">AVCodecParameters::field_order</a></div><div class="ttdeci">enum AVFieldOrder field_order</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:141</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02c"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02c">AVFieldOrder</a></div><div class="ttdeci">AVFieldOrder</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00036">codec_par.h:36</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a></div><div class="ttdeci">@ AV_OPT_TYPE_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00242">opt.h:242</a></div></div>
<div class="ttc" id="avf__geq_8c_html_aafd97074ac037e81919b1712173ad1d3"><div class="ttname"><a href="vf__geq_8c.html#aafd97074ac037e81919b1712173ad1d3">cr</a></div><div class="ttdeci">static double cr(void *priv, double x, double y)</div><div class="ttdef"><b>Definition:</b> <a href="vf__geq_8c_source.html#l00216">vf_geq.c:216</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceadad7dc9e33bcb7b38d886ad11ac788b7"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadad7dc9e33bcb7b38d886ad11ac788b7">AV_CODEC_ID_ADPCM_IMA_WAV</a></div><div class="ttdeci">@ AV_CODEC_ID_ADPCM_IMA_WAV</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00348">codec_id.h:348</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga8d9c2de72b310cef8e6a28c9cd3acbbe"><div class="ttname"><a href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a></div><div class="ttdeci">int av_dict_set(AVDictionary **pm, const char *key, const char *value, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00070">dict.c:70</a></div></div>
<div class="ttc" id="ariff_8h_html"><div class="ttname"><a href="riff_8h.html">riff.h</a></div></div>
<div class="ttc" id="aencryption__info_8c_html_a9c5f5536f094350753a2d5d71d1a5333"><div class="ttname"><a href="encryption__info_8c.html#a9c5f5536f094350753a2d5d71d1a5333">av_encryption_info_alloc</a></div><div class="ttdeci">AVEncryptionInfo * av_encryption_info_alloc(uint32_t subsample_count, uint32_t key_id_size, uint32_t iv_size)</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8c_source.html#l00039">encryption_info.c:39</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a622e758be29fd500aed0ffdc069550f7"><div class="ttname"><a href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">AVPacket::duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00381">packet.h:381</a></div></div>
<div class="ttc" id="amov_8c_html_a657f313c3de883cb47b5778cad7533e2"><div class="ttname"><a href="mov_8c.html#a657f313c3de883cb47b5778cad7533e2">mov_metadata_loci</a></div><div class="ttdeci">static int mov_metadata_loci(MOVContext *c, AVIOContext *pb, unsigned len)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00231">mov.c:231</a></div></div>
<div class="ttc" id="astruct_a_v_probe_data_html_a814cca49dda3f578ebb32d4b2f74368a"><div class="ttname"><a href="struct_a_v_probe_data.html#a814cca49dda3f578ebb32d4b2f74368a">AVProbeData::buf</a></div><div class="ttdeci">unsigned char * buf</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00443">avformat.h:443</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaeb2f1e1f975d68c286c52c197727456c"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaeb2f1e1f975d68c286c52c197727456c">AV_CODEC_ID_ILBC</a></div><div class="ttdeci">@ AV_CODEC_ID_ILBC</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00477">codec_id.h:477</a></div></div>
<div class="ttc" id="aisom_8h_html_af01978fe748c2b00c93865d3be7e1f9c"><div class="ttname"><a href="isom_8h.html#af01978fe748c2b00c93865d3be7e1f9c">MOV_TRUN_SAMPLE_SIZE</a></div><div class="ttdeci">#define MOV_TRUN_SAMPLE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00325">isom.h:325</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_stream_info_html"><div class="ttname"><a href="struct_m_o_v_fragment_stream_info.html">MOVFragmentStreamInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00127">isom.h:127</a></div></div>
<div class="ttc" id="anamespaceconvert__header_html_ae1e061c0db8a47f53e1f3de5e371872e"><div class="ttname"><a href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">convert_header.str</a></div><div class="ttdeci">string str</div><div class="ttdef"><b>Definition:</b> <a href="convert__header_8py_source.html#l00020">convert_header.py:20</a></div></div>
<div class="ttc" id="anellymoserenc_8c_html_a0a5299ac77dc4fb1f9b2682d957945d2"><div class="ttname"><a href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a></div><div class="ttdeci">static float distance(float x, float y, int band)</div><div class="ttdef"><b>Definition:</b> <a href="nellymoserenc_8c_source.html#l00234">nellymoserenc.c:234</a></div></div>
<div class="ttc" id="aavformat_8h_html_afacbc85f23a50771e3801bda0a353d91ac21d15a27dac74ca0730b4dace71d883"><div class="ttname"><a href="avformat_8h.html#afacbc85f23a50771e3801bda0a353d91ac21d15a27dac74ca0730b4dace71d883">AVSTREAM_PARSE_FULL</a></div><div class="ttdeci">@ AVSTREAM_PARSE_FULL</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00790">avformat.h:790</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_ab18e4f9a31a5496ad9f4de1d16b6f0ac"><div class="ttname"><a href="struct_m_o_v_context.html#ab18e4f9a31a5496ad9f4de1d16b6f0ac">MOVContext::decryption_key_len</a></div><div class="ttdeci">int decryption_key_len</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00295">isom.h:295</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea77772369e1d305824b08b53a8d5c56b6"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea77772369e1d305824b08b53a8d5c56b6">AV_CODEC_ID_VP8</a></div><div class="ttdeci">@ AV_CODEC_ID_VP8</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00189">codec_id.h:189</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_adbeb972859d4e1fba897a265e7afb730"><div class="ttname"><a href="struct_m_o_v_stream_context.html#adbeb972859d4e1fba897a265e7afb730">MOVStreamContext::spherical</a></div><div class="ttdeci">AVSphericalMapping * spherical</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00229">isom.h:229</a></div></div>
<div class="ttc" id="agroup__lavu__video__stereo3d_html_ga12fe9672eeaeb8980960faa96d2fcee6"><div class="ttname"><a href="group__lavu__video__stereo3d.html#ga12fe9672eeaeb8980960faa96d2fcee6">AVStereo3DType</a></div><div class="ttdeci">AVStereo3DType</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00051">stereo3d.h:51</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea0178ff664c08bd74594545ba0c5efacb"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea0178ff664c08bd74594545ba0c5efacb">AV_CODEC_ID_PCM_F32LE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_F32LE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00329">codec_id.h:329</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_ab675b1856287a4888607b882d3ab6ffb"><div class="ttname"><a href="struct_m_o_v_context.html#ab675b1856287a4888607b882d3ab6ffb">MOVContext::dv_fctx</a></div><div class="ttdeci">AVFormatContext * dv_fctx</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00258">isom.h:258</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_index_item_html_a43b0442b2d759f5a02a968a457c47fa0"><div class="ttname"><a href="struct_m_o_v_fragment_index_item.html#a43b0442b2d759f5a02a968a457c47fa0">MOVFragmentIndexItem::moof_offset</a></div><div class="ttdeci">int64_t moof_offset</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00138">isom.h:138</a></div></div>
<div class="ttc" id="astruct_m_o_v_parse_table_entry_html_a2358437ca5b698e283eca0442a685d46"><div class="ttname"><a href="struct_m_o_v_parse_table_entry.html#a2358437ca5b698e283eca0442a685d46">MOVParseTableEntry::parse</a></div><div class="ttdeci">int(* parse)(MOVContext *ctx, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00074">mov.c:74</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="astruct_m_o_v_fragment_html_a264bae78123f1d1c445a5c9b1067993a"><div class="ttname"><a href="struct_m_o_v_fragment.html#a264bae78123f1d1c445a5c9b1067993a">MOVFragment::flags</a></div><div class="ttdeci">unsigned flags</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00098">isom.h:98</a></div></div>
<div class="ttc" id="amov_8c_html_a8d30142084cb94cbbdb52106a5af6ddb"><div class="ttname"><a href="mov_8c.html#a8d30142084cb94cbbdb52106a5af6ddb">find_prev_closest_index</a></div><div class="ttdeci">static int find_prev_closest_index(AVStream *st, AVIndexEntry *e_old, int nb_old, MOVStts *ctts_data, int64_t ctts_count, int64_t timestamp_pts, int flag, int64_t *index, int64_t *ctts_index, int64_t *ctts_sample)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l03199">mov.c:3199</a></div></div>
<div class="ttc" id="aisom_8c_html_a3e1264ee30ac868bfb81d2830f6a3b52"><div class="ttname"><a href="isom_8c.html#a3e1264ee30ac868bfb81d2830f6a3b52">ff_codec_movaudio_tags</a></div><div class="ttdeci">const AVCodecTag ff_codec_movaudio_tags[]</div><div class="ttdef"><b>Definition:</b> <a href="isom_8c_source.html#l00324">isom.c:324</a></div></div>
<div class="ttc" id="amov_8c_html_ac5b8f1cbe761fe80bfcd4c62102ef508"><div class="ttname"><a href="mov_8c.html#ac5b8f1cbe761fe80bfcd4c62102ef508">cenc_decrypt</a></div><div class="ttdeci">static int cenc_decrypt(MOVContext *c, MOVStreamContext *sc, AVEncryptionInfo *sample, uint8_t *input, int size)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l06616">mov.c:6616</a></div></div>
<div class="ttc" id="aavio__internal_8h_html_aba1175018f7494ffd3585ba463b8c4a4"><div class="ttname"><a href="avio__internal_8h.html#aba1175018f7494ffd3585ba463b8c4a4">ffio_read_size</a></div><div class="ttdeci">int ffio_read_size(AVIOContext *s, unsigned char *buf, int size)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00686">aviobuf.c:686</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a45890b654337321044a5b13c5e5961c5"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a45890b654337321044a5b13c5e5961c5">AVMasteringDisplayMetadata::max_luminance</a></div><div class="ttdeci">AVRational max_luminance</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00057">mastering_display_metadata.h:57</a></div></div>
<div class="ttc" id="astruct_a_v_spherical_mapping_html_a84dfa298ac2ddf98665781507182a979"><div class="ttname"><a href="struct_a_v_spherical_mapping.html#a84dfa298ac2ddf98665781507182a979">AVSphericalMapping::pitch</a></div><div class="ttdeci">int32_t pitch</div><div class="ttdoc">Rotation around the right vector [-90, 90].</div><div class="ttdef"><b>Definition:</b> <a href="spherical_8h_source.html#l00127">spherical.h:127</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea0fac27af40d22e02bf926ecd4f7bc03a"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea0fac27af40d22e02bf926ecd4f7bc03a">AV_CODEC_ID_VORBIS</a></div><div class="ttdeci">@ AV_CODEC_ID_VORBIS</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00423">codec_id.h:423</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_afe9ffab632659867a7b7aea3aa02a435"><div class="ttname"><a href="struct_m_o_v_context.html#afe9ffab632659867a7b7aea3aa02a435">MOVContext::use_mfra_for</a></div><div class="ttdeci">int use_mfra_for</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00278">isom.h:278</a></div></div>
<div class="ttc" id="aac3tab_8h_html"><div class="ttname"><a href="ac3tab_8h.html">ac3tab.h</a></div></div>
<div class="ttc" id="aavstring_8h_html"><div class="ttname"><a href="avstring_8h.html">avstring.h</a></div></div>
<div class="ttc" id="astruct_m_o_v_stts_html"><div class="ttname"><a href="struct_m_o_v_stts.html">MOVStts</a></div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00056">isom.h:56</a></div></div>
<div class="ttc" id="astruct_m_o_v_encryption_index_html_a3d29ac1969070e80b441eda811bc3e01"><div class="ttname"><a href="struct_m_o_v_encryption_index.html#a3d29ac1969070e80b441eda811bc3e01">MOVEncryptionIndex::auxiliary_info_default_size</a></div><div class="ttdeci">uint8_t auxiliary_info_default_size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00122">isom.h:122</a></div></div>
<div class="ttc" id="amov_8c_html_a833f75276b1c37c78eb06d6f35a42c2e"><div class="ttname"><a href="mov_8c.html#a833f75276b1c37c78eb06d6f35a42c2e">mov_read_mfra</a></div><div class="ttdeci">static int mov_read_mfra(MOVContext *c, AVIOContext *f)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07526">mov.c:7526</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea130d77683c690fdeeb9de1e9409d06d4"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea130d77683c690fdeeb9de1e9409d06d4">AV_CODEC_ID_FLV1</a></div><div class="ttdeci">@ AV_CODEC_ID_FLV1</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00070">codec_id.h:70</a></div></div>
<div class="ttc" id="amov_8c_html_aa092808edf6c610060f6a46c26de3dd6"><div class="ttname"><a href="mov_8c.html#aa092808edf6c610060f6a46c26de3dd6">mov_metadata_int8_no_padding</a></div><div class="ttdeci">static int mov_metadata_int8_no_padding(MOVContext *c, AVIOContext *pb, unsigned len, const char *key)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00116">mov.c:116</a></div></div>
<div class="ttc" id="aflac_8h_html"><div class="ttname"><a href="flac_8h.html">flac.h</a></div></div>
<div class="ttc" id="amov_8c_html_a7c11ff3d622d1f7d00f6c5ad06d42378"><div class="ttname"><a href="mov_8c.html#a7c11ff3d622d1f7d00f6c5ad06d42378">get_frag_stream_info</a></div><div class="ttdeci">static MOVFragmentStreamInfo * get_frag_stream_info(MOVFragmentIndex *frag_index, int index, int id)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01177">mov.c:1177</a></div></div>
<div class="ttc" id="astruct_a_v_d_o_v_i_decoder_configuration_record_html_afaa0a5ee8c693f26132e86c85d38c029"><div class="ttname"><a href="struct_a_v_d_o_v_i_decoder_configuration_record.html#afaa0a5ee8c693f26132e86c85d38c029">AVDOVIDecoderConfigurationRecord::dv_level</a></div><div class="ttdeci">uint8_t dv_level</div><div class="ttdef"><b>Definition:</b> <a href="dovi__meta_8h_source.html#l00055">dovi_meta.h:55</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a39c3d1527580e913c0bf0138fc59a933"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a39c3d1527580e913c0bf0138fc59a933">MOVStreamContext::per_sample_iv_size</a></div><div class="ttdeci">unsigned int per_sample_iv_size</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00240">isom.h:240</a></div></div>
<div class="ttc" id="aisom_8h_html_a1864de3c6462110501821f61464efa1a"><div class="ttname"><a href="isom_8h.html#a1864de3c6462110501821f61464efa1a">MOV_TRUN_SAMPLE_CTS</a></div><div class="ttdeci">#define MOV_TRUN_SAMPLE_CTS</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00327">isom.h:327</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a></div><div class="ttdeci">@ AV_OPT_TYPE_CONST</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00234">opt.h:234</a></div></div>
<div class="ttc" id="asnprintf_8h_html_aa367b75c5aed883fef5befbdf04835a4"><div class="ttname"><a href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a></div><div class="ttdeci">#define snprintf</div><div class="ttdef"><b>Definition:</b> <a href="snprintf_8h_source.html#l00034">snprintf.h:34</a></div></div>
<div class="ttc" id="astruct_m_o_v_dref_html_a3dd8ed3b95d23a3c91a7ee458628c57c"><div class="ttname"><a href="struct_m_o_v_dref.html#a3dd8ed3b95d23a3c91a7ee458628c57c">MOVDref::nlvl_to</a></div><div class="ttdeci">int16_t nlvl_to</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00079">isom.h:79</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_aabc986e9e943c7499c28e07a43fb54b8"><div class="ttname"><a href="struct_m_o_v_stream_context.html#aabc986e9e943c7499c28e07a43fb54b8">MOVStreamContext::width</a></div><div class="ttdeci">int width</div><div class="ttdoc">tkhd width</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00205">isom.h:205</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea0513a388236f95e61e73b943e725d4a8"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea0513a388236f95e61e73b943e725d4a8">AV_CODEC_ID_PCM_S24BE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S24BE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00321">codec_id.h:321</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a5c03aebcd6c736987bdc4a2cd019eb83"><div class="ttname"><a href="struct_m_o_v_context.html#a5c03aebcd6c736987bdc4a2cd019eb83">MOVContext::next_root_atom</a></div><div class="ttdeci">int64_t next_root_atom</div><div class="ttdoc">offset of the next root atom</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00272">isom.h:272</a></div></div>
<div class="ttc" id="alibavfilter_2vf__colorspace_8c_html_a9316211d6779b014b10602ee98089cdd"><div class="ttname"><a href="libavfilter_2vf__colorspace_8c.html#a9316211d6779b014b10602ee98089cdd">color_primaries</a></div><div class="ttdeci">static const struct ColorPrimaries color_primaries[AVCOL_PRI_NB]</div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2vf__colorspace_8c_source.html#l00190">vf_colorspace.c:210</a></div></div>
<div class="ttc" id="amov_8c_html_abbe2f0687a1e881ccf4dc4abd3aa5623"><div class="ttname"><a href="mov_8c.html#abbe2f0687a1e881ccf4dc4abd3aa5623">get_eia608_packet</a></div><div class="ttdeci">static int get_eia608_packet(AVIOContext *pb, AVPacket *pkt, int size)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07874">mov.c:7874</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="amov_8c_html_a4a34817ad2bea122a5ac70eab1751bb6"><div class="ttname"><a href="mov_8c.html#a4a34817ad2bea122a5ac70eab1751bb6">mov_read_st3d</a></div><div class="ttdeci">static int mov_read_st3d(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l05536">mov.c:5536</a></div></div>
<div class="ttc" id="amov_8c_html_ace296eb5fd99ec8af19e5a1a56ea4404"><div class="ttname"><a href="mov_8c.html#ace296eb5fd99ec8af19e5a1a56ea4404">mov_read_dvc1</a></div><div class="ttdeci">static int mov_read_dvc1(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01954">mov.c:1954</a></div></div>
<div class="ttc" id="apixdesc_8c_html_a2ebc788f298dc96bc647ebcdeeb5d0b2"><div class="ttname"><a href="pixdesc_8c.html#a2ebc788f298dc96bc647ebcdeeb5d0b2">av_color_transfer_name</a></div><div class="ttdeci">const char * av_color_transfer_name(enum AVColorTransferCharacteristic transfer)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02942">pixdesc.c:2942</a></div></div>
<div class="ttc" id="adict_8c_html_adb9d691f87509f9f260769b3717d53c4"><div class="ttname"><a href="dict_8c.html#adb9d691f87509f9f260769b3717d53c4">avpriv_dict_set_timestamp</a></div><div class="ttdeci">int avpriv_dict_set_timestamp(AVDictionary **dict, const char *key, int64_t timestamp)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00258">dict.c:258</a></div></div>
<div class="ttc" id="alibavformat_2version_8h_html_acebf84a914d27aadb126602faa6cccd8"><div class="ttname"><a href="libavformat_2version_8h.html#acebf84a914d27aadb126602faa6cccd8">FF_API_OLD_ROTATE_API</a></div><div class="ttdeci">#define FF_API_OLD_ROTATE_API</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2version_8h_source.html#l00080">version.h:80</a></div></div>
<div class="ttc" id="amov_8c_html_aced32f6aa66b86fc377469c31f4df267"><div class="ttname"><a href="mov_8c.html#aced32f6aa66b86fc377469c31f4df267">mov_read_atom_into_extradata</a></div><div class="ttdeci">static int64_t mov_read_atom_into_extradata(MOVContext *c, AVIOContext *pb, MOVAtom atom, AVCodecParameters *par, uint8_t *buf)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l01679">mov.c:1679</a></div></div>
<div class="ttc" id="astruct_m_o_v_context_html_a742ba3afbed80b740be134910b0e1579"><div class="ttname"><a href="struct_m_o_v_context.html#a742ba3afbed80b740be134910b0e1579">MOVContext::nb_chapter_tracks</a></div><div class="ttdeci">unsigned int nb_chapter_tracks</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00266">isom.h:266</a></div></div>
<div class="ttc" id="amov_8c_html_afa35e848bf7867432834eb832c093880"><div class="ttname"><a href="mov_8c.html#afa35e848bf7867432834eb832c093880">mov_read_chapters</a></div><div class="ttdeci">static void mov_read_chapters(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l07177">mov.c:7177</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead36347b6ae291fc3cc95f84aecf8035a"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead36347b6ae291fc3cc95f84aecf8035a">AV_CODEC_ID_DNXHD</a></div><div class="ttdeci">@ AV_CODEC_ID_DNXHD</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00148">codec_id.h:148</a></div></div>
<div class="ttc" id="aavformat_8h_html_a19485b8b52e579db560875e9a1e44e7a"><div class="ttname"><a href="avformat_8h.html#a19485b8b52e579db560875e9a1e44e7a">AVFMT_EVENT_FLAG_METADATA_UPDATED</a></div><div class="ttdeci">#define AVFMT_EVENT_FLAG_METADATA_UPDATED</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01551">avformat.h:1551</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_gacb0ce4f20c15bf174f93590ace0fc8fd"><div class="ttname"><a href="group__lavu__dict.html#gacb0ce4f20c15bf174f93590ace0fc8fd">AV_DICT_DONT_STRDUP_KEY</a></div><div class="ttdeci">#define AV_DICT_DONT_STRDUP_KEY</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00073">dict.h:72</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_a9c9bcb658dd00983235fb06232c17f15"><div class="ttname"><a href="libavformat_2internal_8h.html#a9c9bcb658dd00983235fb06232c17f15">ff_configure_buffers_for_index</a></div><div class="ttdeci">void ff_configure_buffers_for_index(AVFormatContext *s, int64_t time_tolerance)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l02036">utils.c:2036</a></div></div>
<div class="ttc" id="amov_8c_html_a6ea0db3c8da4ed6aedbc6d991806a5e7"><div class="ttname"><a href="mov_8c.html#a6ea0db3c8da4ed6aedbc6d991806a5e7">mov_read_hdlr</a></div><div class="ttdeci">static int mov_read_hdlr(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00710">mov.c:710</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_ad63fb11cc1415e278e09ddc676e8a1ad"><div class="ttname"><a href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">AVStream::r_frame_rate</a></div><div class="ttdeci">AVRational r_frame_rate</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01011">avformat.h:1011</a></div></div>
<div class="ttc" id="amov_8c_html_a9df1094eabd033ee19544e42db1b943b"><div class="ttname"><a href="mov_8c.html#a9df1094eabd033ee19544e42db1b943b">mov_parse_stsd_data</a></div><div class="ttdeci">static int mov_parse_stsd_data(MOVContext *c, AVIOContext *pb, AVStream *st, MOVStreamContext *sc, int64_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02319">mov.c:2319</a></div></div>
<div class="ttc" id="agroup__channel__masks_html_ga02e55f35249dfa57a2e4edfd3acfec4f"><div class="ttname"><a href="group__channel__masks.html#ga02e55f35249dfa57a2e4edfd3acfec4f">AV_CH_SIDE_LEFT</a></div><div class="ttdeci">#define AV_CH_SIDE_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00058">channel_layout.h:58</a></div></div>
<div class="ttc" id="agroup__lavu__video__display_html_gaac2ea94d3f66496c758349450b5b0217"><div class="ttname"><a href="group__lavu__video__display.html#gaac2ea94d3f66496c758349450b5b0217">av_display_rotation_get</a></div><div class="ttdeci">double av_display_rotation_get(const int32_t matrix[9])</div><div class="ttdef"><b>Definition:</b> <a href="display_8c_source.html#l00034">display.c:34</a></div></div>
<div class="ttc" id="aencryption__info_8c_html_a86d0d586d0a323495207b8fba0f7ea3a"><div class="ttname"><a href="encryption__info_8c.html#a86d0d586d0a323495207b8fba0f7ea3a">av_encryption_init_info_add_side_data</a></div><div class="ttdeci">uint8_t * av_encryption_init_info_add_side_data(const AVEncryptionInitInfo *info, size_t *side_data_size)</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8c_source.html#l00290">encryption_info.c:290</a></div></div>
<div class="ttc" id="astruct_m_o_v_stream_context_html_a6d6e10dc5055fae683796fc92b409eb9"><div class="ttname"><a href="struct_m_o_v_stream_context.html#a6d6e10dc5055fae683796fc92b409eb9">MOVStreamContext::stts_count</a></div><div class="ttdeci">unsigned int stts_count</div><div class="ttdef"><b>Definition:</b> <a href="isom_8h_source.html#l00165">isom.h:165</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gae07d7cbf511060210152a89ad0d137ad"><div class="ttname"><a href="group__lavu__misc.html#gae07d7cbf511060210152a89ad0d137ad">av_fourcc2str</a></div><div class="ttdeci">#define av_fourcc2str(fourcc)</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00348">avutil.h:348</a></div></div>
<div class="ttc" id="amov__chan_8c_html_a17d5cf097504e7cdec558440c1ff2e6b"><div class="ttname"><a href="mov__chan_8c.html#a17d5cf097504e7cdec558440c1ff2e6b">ff_mov_read_chan</a></div><div class="ttdeci">int ff_mov_read_chan(AVFormatContext *s, AVIOContext *pb, AVStream *st, int64_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mov__chan_8c_source.html#l00547">mov_chan.c:547</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_gac4cabc0d681c34b2e2c6a87a55877f0d"><div class="ttname"><a href="group__lavf__misc.html#gac4cabc0d681c34b2e2c6a87a55877f0d">av_index_search_timestamp</a></div><div class="ttdeci">int av_index_search_timestamp(AVStream *st, int64_t timestamp, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l02101">utils.c:2101</a></div></div>
<div class="ttc" id="astruct_a_v_encryption_info_html_ae0525acdfc0976caa7824da69e69108c"><div class="ttname"><a href="struct_a_v_encryption_info.html#ae0525acdfc0976caa7824da69e69108c">AVEncryptionInfo::scheme</a></div><div class="ttdeci">uint32_t scheme</div><div class="ttdef"><b>Definition:</b> <a href="encryption__info_8h_source.html#l00045">encryption_info.h:45</a></div></div>
<div class="ttc" id="amov_8c_html_aa601d2c95ca4e2cf283f5ea54fc02eae"><div class="ttname"><a href="mov_8c.html#aa601d2c95ca4e2cf283f5ea54fc02eae">mov_read_dac3</a></div><div class="ttdeci">static int mov_read_dac3(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l00781">mov.c:781</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_abd46f5a4eb066239eb76f4bac1281e1d"><div class="ttname"><a href="libavformat_2internal_8h.html#abd46f5a4eb066239eb76f4bac1281e1d">ff_alloc_extradata</a></div><div class="ttdeci">int ff_alloc_extradata(AVCodecParameters *par, int size)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l03260">utils.c:3260</a></div></div>
<div class="ttc" id="aavio_8h_html_a4db704ed3d00a4be632dad1585d01d92"><div class="ttname"><a href="avio_8h.html#a4db704ed3d00a4be632dad1585d01d92">avio_feof</a></div><div class="ttdeci">int avio_feof(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00368">aviobuf.c:368</a></div></div>
<div class="ttc" id="avf__colormatrix_8c_html_a1d186814fab3cde25d43ffbfe151487f"><div class="ttname"><a href="vf__colormatrix_8c.html#a1d186814fab3cde25d43ffbfe151487f">mc</a></div><div class="ttdeci">#define mc</div><div class="ttdef"><b>Definition:</b> <a href="vf__colormatrix_8c_source.html#l00102">vf_colormatrix.c:102</a></div></div>
<div class="ttc" id="amov_8c_html_a46979717f28637a732c9f4f1c5a81a49"><div class="ttname"><a href="mov_8c.html#a46979717f28637a732c9f4f1c5a81a49">mov_read_stsz</a></div><div class="ttdeci">static int mov_read_stsz(MOVContext *c, AVIOContext *pb, MOVAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="mov_8c_source.html#l02828">mov.c:2828</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
