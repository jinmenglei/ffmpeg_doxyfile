<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavdevice/decklink_enc.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_48592b5c3a3534c0c7026c4e6bbb7be4.html">libavdevice</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">decklink_enc.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="decklink__enc_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Blackmagic DeckLink output</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2013-2014 Ramiro Polla</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using</span> std::atomic;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/* Include internal.h first to avoid conflict between winsock.h (used by</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * DeckLink headers) and winsock2.h (used by libavformat) in MSVC++ builds */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavformat_2internal_8h.html">libavformat/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;}</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;DeckLinkAPI.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avformat_8h.html">libavformat/avformat.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avdevice_8h.html">avdevice.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="decklink__common_8h.html">decklink_common.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="decklink__enc_8h.html">decklink_enc.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#if CONFIG_LIBKLVANC</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;libklvanc/vanc.h&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;libklvanc/vanc-lines.h&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;libklvanc/pixels.h&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/* DeckLink callback class declaration */</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classdecklink__frame.html">   48</a></span>&#160;<span class="keyword">class </span><a class="code" href="classdecklink__frame.html">decklink_frame</a> : <span class="keyword">public</span> IDeckLinkVideoFrame</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#aa5daef95772fe78fd59d7d02f304a9ce">   51</a></span>&#160;    <a class="code" href="classdecklink__frame.html#aa5daef95772fe78fd59d7d02f304a9ce">decklink_frame</a>(<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *avframe, <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <a class="code" href="vaapi__decode_8c.html#a0fd12851a78b80080e277db30411728d">codec_id</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>) :</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="classdecklink__frame.html#a77b147c2df7c3d920d116ba098de1774">_ctx</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>), <a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>(avframe), <a class="code" href="classdecklink__frame.html#ac05eefe6ad990307d44ad170d8d32256">_avpacket</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), <a class="code" href="classdecklink__frame.html#aecb0846b1f6798e43e71b66fdbd6f963">_codec_id</a>(<a class="code" href="vaapi__decode_8c.html#a0fd12851a78b80080e277db30411728d">codec_id</a>), <a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), <a class="code" href="classdecklink__frame.html#a401fecf1eeb2402e5462bc36521c4523">_height</a>(<a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>), <a class="code" href="classdecklink__frame.html#a66ff78095d58d383e0e2c16f66099e81">_width</a>(<a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>),  <a class="code" href="classdecklink__frame.html#a2be20ba7bc1d6d4fc0ef63b2cf820ea3">_refs</a>(1) { }</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a20b8924e08148d26267e658b1d921837">   53</a></span>&#160;    <a class="code" href="classdecklink__frame.html#a20b8924e08148d26267e658b1d921837">decklink_frame</a>(<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpacket, <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <a class="code" href="vaapi__decode_8c.html#a0fd12851a78b80080e277db30411728d">codec_id</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>) :</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="classdecklink__frame.html#a77b147c2df7c3d920d116ba098de1774">_ctx</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>), <a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), <a class="code" href="classdecklink__frame.html#ac05eefe6ad990307d44ad170d8d32256">_avpacket</a>(avpacket), <a class="code" href="classdecklink__frame.html#aecb0846b1f6798e43e71b66fdbd6f963">_codec_id</a>(<a class="code" href="vaapi__decode_8c.html#a0fd12851a78b80080e277db30411728d">codec_id</a>), <a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), <a class="code" href="classdecklink__frame.html#a401fecf1eeb2402e5462bc36521c4523">_height</a>(<a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>), <a class="code" href="classdecklink__frame.html#a66ff78095d58d383e0e2c16f66099e81">_width</a>(<a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>), <a class="code" href="classdecklink__frame.html#a2be20ba7bc1d6d4fc0ef63b2cf820ea3">_refs</a>(1) { }</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a9e2c1ee3441b4691cb3e0f3ba1012e89">   55</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">long</span>           STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#a9e2c1ee3441b4691cb3e0f3ba1012e89">GetWidth</a>      (<span class="keywordtype">void</span>)          { <span class="keywordflow">return</span> <a class="code" href="classdecklink__frame.html#a66ff78095d58d383e0e2c16f66099e81">_width</a>; }</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#ac2d29f7801eb44ea35e8cb4a33df98e1">   56</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">long</span>           STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#ac2d29f7801eb44ea35e8cb4a33df98e1">GetHeight</a>     (<span class="keywordtype">void</span>)          { <span class="keywordflow">return</span> <a class="code" href="classdecklink__frame.html#a401fecf1eeb2402e5462bc36521c4523">_height</a>; }</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#adc71518c2883d48d7b43144d4ce917af">   57</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">long</span>           STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#adc71518c2883d48d7b43144d4ce917af">GetRowBytes</a>   (<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classdecklink__frame.html#aecb0846b1f6798e43e71b66fdbd6f963">_codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3eb24d18d2fb3bf64e695e77562bd49c">AV_CODEC_ID_WRAPPED_AVFRAME</a>)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] &lt; 0 ? -<a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] : <a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0];</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;          <span class="keywordflow">return</span> ((<a class="code" href="classdecklink__frame.html#a9e2c1ee3441b4691cb3e0f3ba1012e89">GetWidth</a>() + 47) / 48) * 128;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a3930a42267466272b15af3e4980d96df">   64</a></span>&#160;    <span class="keyword">virtual</span> BMDPixelFormat STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#a3930a42267466272b15af3e4980d96df">GetPixelFormat</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classdecklink__frame.html#aecb0846b1f6798e43e71b66fdbd6f963">_codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3eb24d18d2fb3bf64e695e77562bd49c">AV_CODEC_ID_WRAPPED_AVFRAME</a>)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="keywordflow">return</span> bmdFormat8BitYUV;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordflow">return</span> bmdFormat10BitYUV;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#aaa581bdcb74939f4556be7cbdd2e9c5f">   71</a></span>&#160;    <span class="keyword">virtual</span> BMDFrameFlags  STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#aaa581bdcb74939f4556be7cbdd2e9c5f">GetFlags</a>      (<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;       <span class="keywordflow">if</span> (<a class="code" href="classdecklink__frame.html#aecb0846b1f6798e43e71b66fdbd6f963">_codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3eb24d18d2fb3bf64e695e77562bd49c">AV_CODEC_ID_WRAPPED_AVFRAME</a>)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;           <span class="keywordflow">return</span> <a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] &lt; 0 ? bmdFrameFlagFlipVertical : bmdFrameFlagDefault;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;       <span class="keywordflow">else</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;           <span class="keywordflow">return</span> bmdFrameFlagDefault;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#aea569178c83712c07b7780f94cc70a8d">   79</a></span>&#160;    <span class="keyword">virtual</span> HRESULT        STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#aea569178c83712c07b7780f94cc70a8d">GetBytes</a>      (<span class="keywordtype">void</span> **<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classdecklink__frame.html#aecb0846b1f6798e43e71b66fdbd6f963">_codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3eb24d18d2fb3bf64e695e77562bd49c">AV_CODEC_ID_WRAPPED_AVFRAME</a>) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] &lt; 0)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = (<span class="keywordtype">void</span> *)(<a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0] + <a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] * (<a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a> - 1));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = (<span class="keywordtype">void</span> *)(<a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0]);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> = (<span class="keywordtype">void</span> *)(<a class="code" href="classdecklink__frame.html#ac05eefe6ad990307d44ad170d8d32256">_avpacket</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a040e0c8e021a87b49cd6f3718e012c3c">   92</a></span>&#160;    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#a040e0c8e021a87b49cd6f3718e012c3c">GetTimecode</a>     (BMDTimecodeFormat <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>, IDeckLinkTimecode **timecode) { <span class="keywordflow">return</span> S_FALSE; }</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#aeb18b8ef49f79e84c385ad3533ae507e">   93</a></span>&#160;    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#aeb18b8ef49f79e84c385ad3533ae507e">GetAncillaryData</a>(IDeckLinkVideoFrameAncillary **ancillary)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        *ancillary = <a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>-&gt;AddRef();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">return</span> S_FALSE;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#acb7f261c4fdecd824e187ffd831e1ad7">  103</a></span>&#160;    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#acb7f261c4fdecd824e187ffd831e1ad7">SetAncillaryData</a>(IDeckLinkVideoFrameAncillary *ancillary)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>-&gt;Release();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a> = ancillary;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>-&gt;AddRef();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#ad23379ec6a9bd7cc7867148cf2dd618b">  111</a></span>&#160;    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#ad23379ec6a9bd7cc7867148cf2dd618b">QueryInterface</a>(REFIID iid, LPVOID *ppv) { <span class="keywordflow">return</span> E_NOINTERFACE; }</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a4b8bbbe12148683b09820e9d6d9c8957">  112</a></span>&#160;    <span class="keyword">virtual</span> ULONG   STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#a4b8bbbe12148683b09820e9d6d9c8957">AddRef</a>(<span class="keywordtype">void</span>)                            { <span class="keywordflow">return</span> ++<a class="code" href="classdecklink__frame.html#a2be20ba7bc1d6d4fc0ef63b2cf820ea3">_refs</a>; }</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a72d81f6d99588851f1fd3eb09158082c">  113</a></span>&#160;    <span class="keyword">virtual</span> ULONG   STDMETHODCALLTYPE <a class="code" href="classdecklink__frame.html#a72d81f6d99588851f1fd3eb09158082c">Release</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = --<a class="code" href="classdecklink__frame.html#a2be20ba7bc1d6d4fc0ef63b2cf820ea3">_refs</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <a class="code" href="group__lavc__packet.html#ga1066464e7cdd1f215df6940db94e5d8e">av_packet_free</a>(&amp;<a class="code" href="classdecklink__frame.html#ac05eefe6ad990307d44ad170d8d32256">_avpacket</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>-&gt;Release();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keyword">delete</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a77b147c2df7c3d920d116ba098de1774">  126</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="classdecklink__frame.html#a77b147c2df7c3d920d116ba098de1774">_ctx</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">  127</a></span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">_avframe</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#ac05eefe6ad990307d44ad170d8d32256">  128</a></span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="classdecklink__frame.html#ac05eefe6ad990307d44ad170d8d32256">_avpacket</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#aecb0846b1f6798e43e71b66fdbd6f963">  129</a></span>&#160;    <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <a class="code" href="classdecklink__frame.html#aecb0846b1f6798e43e71b66fdbd6f963">_codec_id</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">  130</a></span>&#160;    IDeckLinkVideoFrameAncillary *<a class="code" href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">_ancillary</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a401fecf1eeb2402e5462bc36521c4523">  131</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classdecklink__frame.html#a401fecf1eeb2402e5462bc36521c4523">_height</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a66ff78095d58d383e0e2c16f66099e81">  132</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classdecklink__frame.html#a66ff78095d58d383e0e2c16f66099e81">_width</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="classdecklink__frame.html#a2be20ba7bc1d6d4fc0ef63b2cf820ea3">  135</a></span>&#160;    std::atomic&lt;int&gt;  <a class="code" href="classdecklink__frame.html#a2be20ba7bc1d6d4fc0ef63b2cf820ea3">_refs</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;};</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="classdecklink__output__callback.html">  138</a></span>&#160;<span class="keyword">class </span><a class="code" href="classdecklink__output__callback.html">decklink_output_callback</a> : <span class="keyword">public</span> IDeckLinkVideoOutputCallback</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classdecklink__output__callback.html#a42be57fc740f55c8defd6c48ffbbbf02">  141</a></span>&#160;    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__output__callback.html#a42be57fc740f55c8defd6c48ffbbbf02">ScheduledFrameCompleted</a>(IDeckLinkVideoFrame *_frame, BMDOutputFrameCompletionResult <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="classdecklink__frame.html">decklink_frame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="classdecklink__frame.html">decklink_frame</a> *<span class="keyword">&gt;</span>(_frame);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keyword">struct </span><a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;_ctx;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;_avframe)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;_avframe);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;_avpacket)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;_avpacket);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;mutex);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_buffer_available_spots++;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="os2threads_8h.html#a1643932de8429a4e1af0f23f6efc8e58">pthread_cond_broadcast</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cond);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;mutex);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classdecklink__output__callback.html#a2357ecb54256057986e3021bb2a88dd3">  158</a></span>&#160;    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__output__callback.html#a2357ecb54256057986e3021bb2a88dd3">ScheduledPlaybackHasStopped</a>(<span class="keywordtype">void</span>)       { <span class="keywordflow">return</span> S_OK; }</div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="classdecklink__output__callback.html#a229cc2bfe1e115cdaae7fcd416a5e9f7">  159</a></span>&#160;    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__output__callback.html#a229cc2bfe1e115cdaae7fcd416a5e9f7">QueryInterface</a>(REFIID iid, LPVOID *ppv) { <span class="keywordflow">return</span> E_NOINTERFACE; }</div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="classdecklink__output__callback.html#ad1690810929783a08f0a29d1348fcde0">  160</a></span>&#160;    <span class="keyword">virtual</span> ULONG   STDMETHODCALLTYPE <a class="code" href="classdecklink__output__callback.html#ad1690810929783a08f0a29d1348fcde0">AddRef</a>(<span class="keywordtype">void</span>)                            { <span class="keywordflow">return</span> 1; }</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classdecklink__output__callback.html#a75c46cb7fb82d77ae4cb64ef643857ed">  161</a></span>&#160;    <span class="keyword">virtual</span> ULONG   STDMETHODCALLTYPE <a class="code" href="classdecklink__output__callback.html#a75c46cb7fb82d77ae4cb64ef643857ed">Release</a>(<span class="keywordtype">void</span>)                           { <span class="keywordflow">return</span> 1; }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;};</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="decklink__enc_8cpp.html#ad0ac468c79924a135b711e2ea82b6224">  164</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__enc_8cpp.html#ad0ac468c79924a135b711e2ea82b6224">decklink_setup_video</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;video) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Only one video stream is supported!\n&quot;</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3eb24d18d2fb3bf64e695e77562bd49c">AV_CODEC_ID_WRAPPED_AVFRAME</a>) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;format != <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a4b8a29937744c722f35fccafb91ebdf0">AV_PIX_FMT_UYVY422</a>) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported pixel format!&quot;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                   <span class="stringliteral">&quot; Only AV_PIX_FMT_UYVY422 is supported.\n&quot;</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;raw_format = bmdFormat8BitYUV;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;codec_id != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea11b45c130aea73e9ab73c4cdfb176803">AV_CODEC_ID_V210</a>) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported codec type!&quot;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;               <span class="stringliteral">&quot; Only V210 and wrapped frame with AV_PIX_FMT_UYVY422 are supported.\n&quot;</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;raw_format = bmdFormat10BitYUV;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="decklink__common_8cpp.html#a24c20dd9fb216dd99f59d63f740288aa">ff_decklink_set_configs</a>(avctx, <a class="code" href="decklink__common_8h.html#afddf64290d2130f798d72e7ce33376caa110d8bc2cf7464da0e5b438dc51ee183">DIRECTION_OUT</a>) &lt; 0) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not set output configuration\n&quot;</span>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="decklink__common_8cpp.html#a988744a389cfc570ca0cb757408dd8e4">ff_decklink_set_format</a>(avctx, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;width, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;height,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                            st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;field_order)) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported video size, framerate or field order!&quot;</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;               <span class="stringliteral">&quot; Check available formats with -list_formats 1.\n&quot;</span>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;supports_vanc &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;EnableVideoOutput(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_mode, bmdVideoOutputVANC) != S_OK) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Could not enable video output with VANC! Trying without...\n&quot;</span>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;supports_vanc = 0;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;supports_vanc &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;EnableVideoOutput(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_mode, bmdVideoOutputFlagDefault) != S_OK) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not enable video output!\n&quot;</span>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">/* Set callback. */</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;output_callback = <span class="keyword">new</span> <a class="code" href="classdecklink__output__callback.html">decklink_output_callback</a>();</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;SetScheduledFrameCompletionCallback(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;output_callback);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_preroll = st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;preroll;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &gt; 1000)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_preroll /= 1000;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">/* Buffer twice as many frames as the preroll. */</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_preroll * 2;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_buffer = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_buffer, 60);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;mutex, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="os2threads_8h.html#a90293d12cef762b6df0139309d13fdbf">pthread_cond_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cond, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_buffer_available_spots = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_buffer;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;output: %s, preroll: %d, frames buffer size: %d\n&quot;</span>,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;           avctx-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_preroll, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_buffer);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">/* The device expects the framerate to be fixed. */</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;video = 1;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="decklink__enc_8cpp.html#ab501d9c860f44d169a375f7d01105b7d">  235</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__enc_8cpp.html#ab501d9c860f44d169a375f7d01105b7d">decklink_setup_audio</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Only one audio stream is supported!\n&quot;</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sample_rate != 48000) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported sample rate!&quot;</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;               <span class="stringliteral">&quot; Only 48kHz is supported.\n&quot;</span>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;channels != 2 &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;channels != 8 &amp;&amp; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;channels != 16) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported number of channels!&quot;</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;               <span class="stringliteral">&quot; Only 2, 8 or 16 channels are supported.\n&quot;</span>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;EnableAudioOutput(bmdAudioSampleRate48kHz,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                                    bmdAudioSampleType16bitInteger,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;channels,</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                                    bmdAudioOutputStreamTimestamped) != S_OK) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not enable audio output!\n&quot;</span>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;BeginAudioPreroll() != S_OK) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not begin audio preroll!\n&quot;</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">/* The device expects the sample rate to be fixed. */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, 1, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;sample_rate);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channels = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;channels;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio = 1;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="decklink__enc_8h.html#a7fe5999317534984680cd8626c7c2f2c">  276</a></span>&#160;<a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="decklink__enc_8cpp.html#ae0ac7c720099b0e9bd20c39a7c39839c">ff_decklink_write_trailer</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;playback_started) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        BMDTimeValue actual;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;StopScheduledPlayback(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;last_pts * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_num,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                        &amp;actual, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_den);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;DisableVideoOutput();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;DisableAudioOutput();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="decklink__common_8cpp.html#ad010d461c97b7adace61c263b9f25ce1">ff_decklink_cleanup</a>(avctx);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;output_callback)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keyword">delete</span> <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;output_callback;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;mutex);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="os2threads_8h.html#a4c57837c88ef09274545ae2ebd18160a">pthread_cond_destroy</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cond);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="preprocessor">#if CONFIG_LIBKLVANC</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    klvanc_context_destroy(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;vanc_ctx);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">#if CONFIG_LIBKLVANC</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> construct_cc(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                         <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keyword">struct</span> klvanc_line_set_s *vanc_lines)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keyword">struct </span>klvanc_packet_eia_708b_s *cdp;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    uint16_t *cdp_words;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    uint16_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> cc_count;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> = <a class="code" href="group__lavc__packet.html#ga77a800026abd6dc2f4ac1e0ad7e3e999">av_packet_get_side_data</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a7376747651b9113c8dd5afecc94742d2">AV_PKT_DATA_A53_CC</a>, &amp;<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    cc_count = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> / 3;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = klvanc_create_eia708_cdp(&amp;cdp);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = klvanc_set_framerate_EIA_708B(cdp, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_num, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_den);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid framerate specified: %lld/%lld\n&quot;</span>,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_num, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_den);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        klvanc_destroy_eia708_cdp(cdp);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span> (cc_count &gt; KLVANC_MAX_CC_COUNT) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Illegal cc_count received: %d\n&quot;</span>, cc_count);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        cc_count = KLVANC_MAX_CC_COUNT;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">/* CC data */</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    cdp-&gt;header.ccdata_present = 1;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    cdp-&gt;header.caption_service_active = 1;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    cdp-&gt;ccdata.cc_count = cc_count;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; cc_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> [3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; 0x04)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            cdp-&gt;ccdata.cc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].cc_valid = 1;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        cdp-&gt;ccdata.cc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].cc_type = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; 0x03;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        cdp-&gt;ccdata.cc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].cc_data[0] = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1];</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        cdp-&gt;ccdata.cc[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].cc_data[1] = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+2];</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    klvanc_finalize_EIA_708B(cdp, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cdp_sequence_num++);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = klvanc_convert_EIA_708B_to_words(cdp, &amp;cdp_words, &amp;<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    klvanc_destroy_eia708_cdp(cdp);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != 0) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed converting 708 packet to words\n&quot;</span>);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = klvanc_line_insert(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;vanc_ctx, vanc_lines, cdp_words, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, 11, 0);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    free(cdp_words);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != 0) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;VANC line insertion failed\n&quot;</span>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> decklink_construct_vanc(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                                   <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="classdecklink__frame.html">decklink_frame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keyword">struct </span>klvanc_line_set_s vanc_lines = { 0 };</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;supports_vanc)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    construct_cc(avctx, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, &amp;vanc_lines);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    IDeckLinkVideoFrameAncillary *vanc;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;CreateAncillaryData(bmdFormat10BitYUV, &amp;vanc);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> != S_OK) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create vanc\n&quot;</span>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">/* Now that we&#39;ve got all the VANC lines in a nice orderly manner, generate the</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">       final VANC sections for the Decklink output */</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; vanc_lines.num_lines; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keyword">struct </span>klvanc_line_s *<a class="code" href="structline.html">line</a> = vanc_lines.lines[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordtype">int</span> real_line;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordtype">void</span> *buf;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="structline.html">line</a>)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="comment">/* FIXME: include hack for certain Decklink cards which mis-represent</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">           line numbers for pSF frames */</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        real_line = <a class="code" href="structline.html">line</a>-&gt;line_number;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = vanc-&gt;GetBufferForVerticalBlankingLine(real_line, &amp;buf);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> != S_OK) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get VANC line %d: %d&quot;</span>, real_line, <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="comment">/* Generate the full line taking into account all VANC packets on that line */</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = klvanc_generate_vanc_line_v210(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;vanc_ctx, <a class="code" href="structline.html">line</a>, (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *) buf,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_width);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to generate VANC line\n&quot;</span>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;SetAncillaryData(vanc);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    vanc-&gt;Release();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> != S_OK) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to set vanc: %d&quot;</span>, <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;done:</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; vanc_lines.num_lines; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        klvanc_line_free(vanc_lines.lines[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="decklink__enc_8cpp.html#a78a0cbe3c0f38b08b5120e9c0b624c17">  431</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__enc_8cpp.html#a78a0cbe3c0f38b08b5120e9c0b624c17">decklink_write_video_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;{</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#acfefb6b6cf21e87a0dcbd1a547ba2348">streams</a>[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *avframe = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tmp = (<a class="code" href="struct_a_v_frame.html">AVFrame</a> *)<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpacket = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="classdecklink__frame.html">decklink_frame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="decklink__common_8h.html#af2e9cc7b9388b4e314b1d5672871e0b5">buffercount_type</a> buffered;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    HRESULT hr;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3eb24d18d2fb3bf64e695e77562bd49c">AV_CODEC_ID_WRAPPED_AVFRAME</a>) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">if</span> (tmp-&gt;format != <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a4b8a29937744c722f35fccafb91ebdf0">AV_PIX_FMT_UYVY422</a> ||</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            tmp-&gt;width  != <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_width ||</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            tmp-&gt;height != <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_height) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Got a frame with invalid pixel format or dimension.\n&quot;</span>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        avframe = <a class="code" href="group__lavu__frame.html#ga46d6d32f6482a3e9c19203db5877105b">av_frame_clone</a>(tmp);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span> (!avframe) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not clone video frame.\n&quot;</span>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = <span class="keyword">new</span> <a class="code" href="classdecklink__frame.html">decklink_frame</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, avframe, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>, avframe-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a>, avframe-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        avpacket = <a class="code" href="group__lavc__packet.html#gacbe3e51cf411a7003d706127dc48cbb1">av_packet_clone</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span> (!avpacket) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not clone video frame.\n&quot;</span>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = <span class="keyword">new</span> <a class="code" href="classdecklink__frame.html">decklink_frame</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, avpacket, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_height, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_width);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor">#if CONFIG_LIBKLVANC</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">if</span> (decklink_construct_vanc(avctx, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>))</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to construct VANC\n&quot;</span>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create new frame.\n&quot;</span>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;avframe);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="group__lavc__packet.html#ga1066464e7cdd1f215df6940db94e5d8e">av_packet_free</a>(&amp;avpacket);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">/* Always keep at most one second of frames buffered. */</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;mutex);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_buffer_available_spots == 0) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cond, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;mutex);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_buffer_available_spots--;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;mutex);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">/* Schedule frame for playback. */</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    hr = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;ScheduleVideoFrame((<span class="keyword">class</span> IDeckLinkVideoFrame *) <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>,</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                      <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_num,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                      <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_num, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_den);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">/* Pass ownership to DeckLink, or release on failure */</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;Release();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (hr != S_OK) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not schedule video frame.&quot;</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <span class="stringliteral">&quot; error %08x.\n&quot;</span>, (uint32_t) hr);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;GetBufferedVideoFrameCount(&amp;buffered);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Buffered video frames: %d.\n&quot;</span>, (<span class="keywordtype">int</span>) buffered);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> &gt; 2 &amp;&amp; buffered &lt;= 2)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;There are not enough buffered video frames.&quot;</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;               <span class="stringliteral">&quot; Video may misbehave!\n&quot;</span>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">/* Preroll video frames. */</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;playback_started &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> &gt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frames_preroll) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Ending audio preroll.\n&quot;</span>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;EndAudioPreroll() != S_OK) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not end audio preroll!\n&quot;</span>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Starting scheduled playback.\n&quot;</span>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;StartScheduledPlayback(0, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_den, 1.0) != S_OK) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not start scheduled playback!\n&quot;</span>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;playback_started = 1;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="decklink__enc_8cpp.html#a972a26fc0c436008abf0fc4e8818742e">  523</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__enc_8cpp.html#a972a26fc0c436008abf0fc4e8818742e">decklink_write_audio_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordtype">int</span> sample_count = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> / (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channels &lt;&lt; 1);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="decklink__common_8h.html#af2e9cc7b9388b4e314b1d5672871e0b5">buffercount_type</a> buffered;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;GetBufferedAudioSampleFrameCount(&amp;buffered);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> &gt; 1 &amp;&amp; !buffered)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;There&#39;s no buffered audio.&quot;</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;               <span class="stringliteral">&quot; Audio will misbehave!\n&quot;</span>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo-&gt;ScheduleAudioSamples(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, sample_count, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>,</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                       bmdAudioSampleRate48kHz, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) != S_OK) {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not schedule audio samples.\n&quot;</span>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="decklink__enc_8h.html#a0127c6cba9260bd1e96ea41e0b89aa69">  546</a></span>&#160;<a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="decklink__enc_8cpp.html#ad03d0cdba453b06d1bb335ec05e85d0d">ff_decklink_write_header</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;{</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *) <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a>));</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;list_devices = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a0c0f4ce79fd3722715902dc734e582f1">list_devices</a>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;list_formats = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a7257e4e76715a945eaf8545d4679620e">list_formats</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;preroll      = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a15a154b17994113a76c0cd3fcc15f4de">preroll</a>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;duplex_mode  = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a05e112e6f8da37a216c0271c96e6529e">duplex_mode</a>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="preprocessor">#if CONFIG_LIBKLVANC</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span> (klvanc_context_create(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;vanc_ctx) &lt; 0) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot create VANC library context\n&quot;</span>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;supports_vanc = 1;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">/* List available devices and exit. */</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;list_devices) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;The -list_devices option is deprecated and will be removed. Please use ffmpeg -sinks decklink instead.\n&quot;</span>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="decklink__common_8cpp.html#a5384e63f242fea7f5f872dc4ad941b72">ff_decklink_list_devices_legacy</a>(avctx, 0, 1);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga334ea23fd9e492cd0e718330f2353b6b">AVERROR_EXIT</a>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decklink__common_8cpp.html#a463be976ea4e274b9dedc08c1994d4d6">ff_decklink_init_device</a>(avctx, avctx-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">/* Get output device. */</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dl-&gt;QueryInterface(IID_IDeckLinkOutput, (<span class="keywordtype">void</span> **) &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dlo) != S_OK) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not open output device from &#39;%s&#39;\n&quot;</span>,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;               avctx-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">/* List supported formats. */</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;list_formats) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <a class="code" href="decklink__common_8cpp.html#a261141ce6758333d007eff1f3b96f561">ff_decklink_list_formats</a>(avctx);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga334ea23fd9e492cd0e718330f2353b6b">AVERROR_EXIT</a>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">/* Setup streams. */</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; avctx-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a>; n++) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#acfefb6b6cf21e87a0dcbd1a547ba2348">streams</a>[n];</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">if</span>        (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;codec_type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="decklink__enc_8cpp.html#ab501d9c860f44d169a375f7d01105b7d">decklink_setup_audio</a>(avctx, st))</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;codec_type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="decklink__enc_8cpp.html#ad0ac468c79924a135b711e2ea82b6224">decklink_setup_video</a>(avctx, st))</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported stream type.\n&quot;</span>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="decklink__common_8cpp.html#ad010d461c97b7adace61c263b9f25ce1">ff_decklink_cleanup</a>(avctx);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;}</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="decklink__enc_8h.html#afb22c9479998c144544f86886d636879">  619</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="decklink__enc_8cpp.html#afb22c9479998c144544f86886d636879">ff_decklink_write_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;{</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = avctx-&gt;<a class="code" href="struct_a_v_format_context.html#acfefb6b6cf21e87a0dcbd1a547ba2348">streams</a>[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;last_pts = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;last_pts, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">if</span>      (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="decklink__enc_8cpp.html#a78a0cbe3c0f38b08b5120e9c0b624c17">decklink_write_video_packet</a>(avctx, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="decklink__enc_8cpp.html#a972a26fc0c436008abf0fc4e8818742e">decklink_write_audio_packet</a>(avctx, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="decklink__enc_8h.html#ad12aa582f21aab6199616c7785abacc2">  635</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="decklink__enc_8cpp.html#ad12aa582f21aab6199616c7785abacc2">ff_decklink_list_output_devices</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <span class="keyword">struct</span> <a class="code" href="struct_a_v_device_info_list.html">AVDeviceInfoList</a> *device_list)</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;{</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="decklink__common_8cpp.html#ab15a26f91f4ecec4f6aeda0b98165dcd">ff_decklink_list_devices</a>(avctx, device_list, 0, 1);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;}</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;} <span class="comment">/* extern &quot;C&quot; */</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="atarget__bsf__fuzzer_8c_html_aa3d85a3469f60990fdff296efb86a9c2"><div class="ttname"><a href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a></div><div class="ttdeci">static void error(const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="target__bsf__fuzzer_8c_source.html#l00030">target_bsf_fuzzer.c:30</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a3930a42267466272b15af3e4980d96df"><div class="ttname"><a href="classdecklink__frame.html#a3930a42267466272b15af3e4980d96df">decklink_frame::GetPixelFormat</a></div><div class="ttdeci">virtual BMDPixelFormat STDMETHODCALLTYPE GetPixelFormat(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00064">decklink_enc.cpp:64</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_ac05eefe6ad990307d44ad170d8d32256"><div class="ttname"><a href="classdecklink__frame.html#ac05eefe6ad990307d44ad170d8d32256">decklink_frame::_avpacket</a></div><div class="ttdeci">AVPacket * _avpacket</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00128">decklink_enc.cpp:128</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aos2threads_8h_html_a4f8250fbf301e0e62dad0aad3ba030a9"><div class="ttname"><a href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a></div><div class="ttdeci">static av_always_inline int pthread_mutex_init(pthread_mutex_t *mutex, const pthread_mutexattr_t *attr)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00104">os2threads.h:104</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="astruct_a_v_device_info_list_html"><div class="ttname"><a href="struct_a_v_device_info_list.html">AVDeviceInfoList</a></div><div class="ttdef"><b>Definition:</b> <a href="avdevice_8h_source.html#l00460">avdevice.h:460</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a72d81f6d99588851f1fd3eb09158082c"><div class="ttname"><a href="classdecklink__frame.html#a72d81f6d99588851f1fd3eb09158082c">decklink_frame::Release</a></div><div class="ttdeci">virtual ULONG STDMETHODCALLTYPE Release(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00113">decklink_enc.cpp:113</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_ac2d29f7801eb44ea35e8cb4a33df98e1"><div class="ttname"><a href="classdecklink__frame.html#ac2d29f7801eb44ea35e8cb4a33df98e1">decklink_frame::GetHeight</a></div><div class="ttdeci">virtual long STDMETHODCALLTYPE GetHeight(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00056">decklink_enc.cpp:56</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga1066464e7cdd1f215df6940db94e5d8e"><div class="ttname"><a href="group__lavc__packet.html#ga1066464e7cdd1f215df6940db94e5d8e">av_packet_free</a></div><div class="ttdeci">void av_packet_free(AVPacket **pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00064">avpacket.c:64</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a94eb42e94961e070dc838cbc5aceff79"><div class="ttname"><a href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">decklink_cctx::ctx</a></div><div class="ttdeci">void * ctx</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00040">decklink_common_c.h:40</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a463be976ea4e274b9dedc08c1994d4d6"><div class="ttname"><a href="decklink__common_8cpp.html#a463be976ea4e274b9dedc08c1994d4d6">ff_decklink_init_device</a></div><div class="ttdeci">int ff_decklink_init_device(AVFormatContext *avctx, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00497">decklink_common.cpp:497</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a5384e63f242fea7f5f872dc4ad941b72"><div class="ttname"><a href="decklink__common_8cpp.html#a5384e63f242fea7f5f872dc4ad941b72">ff_decklink_list_devices_legacy</a></div><div class="ttdeci">void ff_decklink_list_devices_legacy(AVFormatContext *avctx, int show_inputs, int show_outputs)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00408">decklink_common.cpp:408</a></div></div>
<div class="ttc" id="aclassdecklink__output__callback_html_ad1690810929783a08f0a29d1348fcde0"><div class="ttname"><a href="classdecklink__output__callback.html#ad1690810929783a08f0a29d1348fcde0">decklink_output_callback::AddRef</a></div><div class="ttdeci">virtual ULONG STDMETHODCALLTYPE AddRef(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00160">decklink_enc.cpp:160</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a12826d21779289356722971d362c583c"><div class="ttname"><a href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">AVStream::codecpar</a></div><div class="ttdeci">AVCodecParameters * codecpar</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01034">avformat.h:1034</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a707a73f6eaa4f82482b9d795c99a0808"><div class="ttname"><a href="classdecklink__frame.html#a707a73f6eaa4f82482b9d795c99a0808">decklink_frame::_ancillary</a></div><div class="ttdeci">IDeckLinkVideoFrameAncillary * _ancillary</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00130">decklink_enc.cpp:130</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_ac4c0777e54085af2f3f1b27130e2b21b"><div class="ttname"><a href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">AVFormatContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01251">avformat.h:1251</a></div></div>
<div class="ttc" id="adecklink__enc_8cpp_html_a972a26fc0c436008abf0fc4e8818742e"><div class="ttname"><a href="decklink__enc_8cpp.html#a972a26fc0c436008abf0fc4e8818742e">decklink_write_audio_packet</a></div><div class="ttdeci">static int decklink_write_audio_packet(AVFormatContext *avctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00523">decklink_enc.cpp:523</a></div></div>
<div class="ttc" id="adecklink__enc_8cpp_html_afb22c9479998c144544f86886d636879"><div class="ttname"><a href="decklink__enc_8cpp.html#afb22c9479998c144544f86886d636879">ff_decklink_write_packet</a></div><div class="ttdeci">int ff_decklink_write_packet(AVFormatContext *avctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00619">decklink_enc.cpp:619</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a2be20ba7bc1d6d4fc0ef63b2cf820ea3"><div class="ttname"><a href="classdecklink__frame.html#a2be20ba7bc1d6d4fc0ef63b2cf820ea3">decklink_frame::_refs</a></div><div class="ttdeci">std::atomic&lt; int &gt; _refs</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00135">decklink_enc.cpp:135</a></div></div>
<div class="ttc" id="adecklink__enc_8cpp_html_ad03d0cdba453b06d1bb335ec05e85d0d"><div class="ttname"><a href="decklink__enc_8cpp.html#ad03d0cdba453b06d1bb335ec05e85d0d">ff_decklink_write_header</a></div><div class="ttdeci">av_cold int ff_decklink_write_header(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00546">decklink_enc.cpp:546</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a2c277b7ebfceda2b898e5f7ad888f8b5"><div class="ttname"><a href="classdecklink__frame.html#a2c277b7ebfceda2b898e5f7ad888f8b5">decklink_frame::_avframe</a></div><div class="ttdeci">AVFrame * _avframe</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00127">decklink_enc.cpp:127</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html"><div class="ttname"><a href="structdecklink__cctx.html">decklink_cctx</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00037">decklink_common_c.h:37</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a0d1cb9b5a32b00fb6edc81ea3aae2a49"><div class="ttname"><a href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">AVPacket::stream_index</a></div><div class="ttdeci">int stream_index</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00365">packet.h:365</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a9db755451f14e2bf590d4b85d82b32e6"><div class="ttname"><a href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">AVStream::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00898">avformat.h:898</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="adecklink__enc_8cpp_html_ae0ac7c720099b0e9bd20c39a7c39839c"><div class="ttname"><a href="decklink__enc_8cpp.html#ae0ac7c720099b0e9bd20c39a7c39839c">ff_decklink_write_trailer</a></div><div class="ttdeci">av_cold int ff_decklink_write_trailer(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00276">decklink_enc.cpp:276</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a667b04d7fb6ef46db4da4af554c5b6f7"><div class="ttname"><a href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a></div><div class="ttdeci">#define width</div></div>
<div class="ttc" id="afilter__design_8txt_html_a7d537039ea0e18164d9edb0b5ca984dd"><div class="ttname"><a href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample format(the sample packing is implied by the sample format) and sample rate. The lists are not just lists</div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9f76f2475ef24ff4c9771dd53072d040"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">AVCodecParameters::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:60</a></div></div>
<div class="ttc" id="aclassdecklink__output__callback_html"><div class="ttname"><a href="classdecklink__output__callback.html">decklink_output_callback</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00138">decklink_enc.cpp:139</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html"><div class="ttname"><a href="classdecklink__frame.html">decklink_frame</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00048">decklink_enc.cpp:49</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga46d6d32f6482a3e9c19203db5877105b"><div class="ttname"><a href="group__lavu__frame.html#ga46d6d32f6482a3e9c19203db5877105b">av_frame_clone</a></div><div class="ttdeci">AVFrame * av_frame_clone(const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00540">frame.c:540</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="avaapi__decode_8c_html_a0fd12851a78b80080e277db30411728d"><div class="ttname"><a href="vaapi__decode_8c.html#a0fd12851a78b80080e277db30411728d">codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__decode_8c_source.html#l00239">vaapi_decode.c:369</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea3eb24d18d2fb3bf64e695e77562bd49c"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3eb24d18d2fb3bf64e695e77562bd49c">AV_CODEC_ID_WRAPPED_AVFRAME</a></div><div class="ttdeci">@ AV_CODEC_ID_WRAPPED_AVFRAME</div><div class="ttdoc">Passthrough codec, AVFrames wrapped in AVPacket.</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00568">codec_id.h:568</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a1643932de8429a4e1af0f23f6efc8e58"><div class="ttname"><a href="os2threads_8h.html#a1643932de8429a4e1af0f23f6efc8e58">pthread_cond_broadcast</a></div><div class="ttdeci">static av_always_inline int pthread_cond_broadcast(pthread_cond_t *cond)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00162">os2threads.h:162</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_aaa581bdcb74939f4556be7cbdd2e9c5f"><div class="ttname"><a href="classdecklink__frame.html#aaa581bdcb74939f4556be7cbdd2e9c5f">decklink_frame::GetFlags</a></div><div class="ttdeci">virtual BMDFrameFlags STDMETHODCALLTYPE GetFlags(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00071">decklink_enc.cpp:71</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga77a800026abd6dc2f4ac1e0ad7e3e999"><div class="ttname"><a href="group__lavc__packet.html#ga77a800026abd6dc2f4ac1e0ad7e3e999">av_packet_get_side_data</a></div><div class="ttdeci">uint8_t * av_packet_get_side_data(const AVPacket *pkt, enum AVPacketSideDataType type, int *size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00353">avpacket.c:353</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a66ff78095d58d383e0e2c16f66099e81"><div class="ttname"><a href="classdecklink__frame.html#a66ff78095d58d383e0e2c16f66099e81">decklink_frame::_width</a></div><div class="ttdeci">int _width</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00132">decklink_enc.cpp:132</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html"><div class="ttname"><a href="libavformat_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf51c0fafb1c1b683c7f943c2a349904"><div class="ttname"><a href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a></div><div class="ttdeci">and forward the result(frame or status change) to the corresponding input. If nothing is possible</div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_acb7f261c4fdecd824e187ffd831e1ad7"><div class="ttname"><a href="classdecklink__frame.html#acb7f261c4fdecd824e187ffd831e1ad7">decklink_frame::SetAncillaryData</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE SetAncillaryData(IDeckLinkVideoFrameAncillary *ancillary)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00103">decklink_enc.cpp:103</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_ad23379ec6a9bd7cc7867148cf2dd618b"><div class="ttname"><a href="classdecklink__frame.html#ad23379ec6a9bd7cc7867148cf2dd618b">decklink_frame::QueryInterface</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE QueryInterface(REFIID iid, LPVOID *ppv)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00111">decklink_enc.cpp:111</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a24c20dd9fb216dd99f59d63f740288aa"><div class="ttname"><a href="decklink__common_8cpp.html#a24c20dd9fb216dd99f59d63f740288aa">ff_decklink_set_configs</a></div><div class="ttdeci">int ff_decklink_set_configs(AVFormatContext *avctx, decklink_direction_t direction)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00143">decklink_common.cpp:143</a></div></div>
<div class="ttc" id="adecklink__enc_8cpp_html_ad12aa582f21aab6199616c7785abacc2"><div class="ttname"><a href="decklink__enc_8cpp.html#ad12aa582f21aab6199616c7785abacc2">ff_decklink_list_output_devices</a></div><div class="ttdeci">int ff_decklink_list_output_devices(AVFormatContext *avctx, struct AVDeviceInfoList *device_list)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00635">decklink_enc.cpp:635</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a0b748d924898b08b89ff4974afd17285"><div class="ttname"><a href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">AVFormatContext::nb_streams</a></div><div class="ttdeci">unsigned int nb_streams</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01279">avformat.h:1279</a></div></div>
<div class="ttc" id="affprobe_8c_html_aa91b7ec8ae8a2d699fb09cc20c444fe8"><div class="ttname"><a href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="ffprobe_8c_source.html#l00066">ffprobe.c:66</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a3f89733f429c98ba5bc64373fb0a3f13"><div class="ttname"><a href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">AVFrame::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaadca229ad2c20e060a14fec08a5cc7ce"><div class="ttname"><a href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a></div><div class="ttdeci">AVCodecID</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00046">codec_id.h:46</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a15a154b17994113a76c0cd3fcc15f4de"><div class="ttname"><a href="structdecklink__cctx.html#a15a154b17994113a76c0cd3fcc15f4de">decklink_cctx::preroll</a></div><div class="ttdeci">double preroll</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00047">decklink_common_c.h:47</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_aab5542950d6beb910dc9237aac99989e"><div class="ttname"><a href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a></div><div class="ttdeci">void avpriv_set_pts_info(AVStream *s, int pts_wrap_bits, unsigned int pts_num, unsigned int pts_den)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04871">utils.c:4871</a></div></div>
<div class="ttc" id="adecklink__enc_8cpp_html_a78a0cbe3c0f38b08b5120e9c0b624c17"><div class="ttname"><a href="decklink__enc_8cpp.html#a78a0cbe3c0f38b08b5120e9c0b624c17">decklink_write_video_packet</a></div><div class="ttdeci">static int decklink_write_video_packet(AVFormatContext *avctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00431">decklink_enc.cpp:431</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea11b45c130aea73e9ab73c4cdfb176803"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea11b45c130aea73e9ab73c4cdfb176803">AV_CODEC_ID_V210</a></div><div class="ttdeci">@ AV_CODEC_ID_V210</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00176">codec_id.h:176</a></div></div>
<div class="ttc" id="adecklink__common_8h_html"><div class="ttname"><a href="decklink__common_8h.html">decklink_common.h</a></div></div>
<div class="ttc" id="aavdevice_8h_html"><div class="ttname"><a href="avdevice_8h.html">avdevice.h</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a651c97cb2dcd2241d42f0062a0bbd4e3"><div class="ttname"><a href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">AVFormatContext::url</a></div><div class="ttdeci">char * url</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01319">avformat.h:1319</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a261141ce6758333d007eff1f3b96f561"><div class="ttname"><a href="decklink__common_8cpp.html#a261141ce6758333d007eff1f3b96f561">ff_decklink_list_formats</a></div><div class="ttdeci">int ff_decklink_list_formats(AVFormatContext *avctx, decklink_direction_t direction)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00429">decklink_common.cpp:429</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aa52bfc6605f6a3059a0c3226cc0f6567"><div class="ttname"><a href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">AVFrame::linesize</a></div><div class="ttdeci">int linesize[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00339">frame.h:339</a></div></div>
<div class="ttc" id="astructline_html"><div class="ttname"><a href="structline.html">line</a></div><div class="ttdef"><b>Definition:</b> <a href="graph2dot_8c_source.html#l00048">graph2dot.c:48</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1e71ce60cedd5f3b6811714a9f7f9e0a"><div class="ttname"><a href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">AVFrame::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_ad010d461c97b7adace61c263b9f25ce1"><div class="ttname"><a href="decklink__common_8cpp.html#ad010d461c97b7adace61c263b9f25ce1">ff_decklink_cleanup</a></div><div class="ttdeci">void ff_decklink_cleanup(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00480">decklink_common.cpp:480</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a4c57837c88ef09274545ae2ebd18160a"><div class="ttname"><a href="os2threads_8h.html#a4c57837c88ef09274545ae2ebd18160a">pthread_cond_destroy</a></div><div class="ttdeci">static av_always_inline int pthread_cond_destroy(pthread_cond_t *cond)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00144">os2threads.h:144</a></div></div>
<div class="ttc" id="aos2threads_8h_html_af75a104513c9384ace314b0a6b1a8240"><div class="ttname"><a href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a></div><div class="ttdeci">static av_always_inline int pthread_mutex_destroy(pthread_mutex_t *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00112">os2threads.h:112</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_af2e9cc7b9388b4e314b1d5672871e0b5"><div class="ttname"><a href="decklink__common_8h.html#af2e9cc7b9388b4e314b1d5672871e0b5">buffercount_type</a></div><div class="ttdeci">uint32_t buffercount_type</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00162">decklink_common.h:162</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_acfefb6b6cf21e87a0dcbd1a547ba2348"><div class="ttname"><a href="struct_a_v_format_context.html#acfefb6b6cf21e87a0dcbd1a547ba2348">AVFormatContext::streams</a></div><div class="ttdeci">AVStream ** streams</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01291">avformat.h:1291</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a7257e4e76715a945eaf8545d4679620e"><div class="ttname"><a href="structdecklink__cctx.html#a7257e4e76715a945eaf8545d4679620e">decklink_cctx::list_formats</a></div><div class="ttdeci">int list_formats</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00044">decklink_common_c.h:44</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a040e0c8e021a87b49cd6f3718e012c3c"><div class="ttname"><a href="classdecklink__frame.html#a040e0c8e021a87b49cd6f3718e012c3c">decklink_frame::GetTimecode</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE GetTimecode(BMDTimecodeFormat format, IDeckLinkTimecode **timecode)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00092">decklink_enc.cpp:92</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_aa5daef95772fe78fd59d7d02f304a9ce"><div class="ttname"><a href="classdecklink__frame.html#aa5daef95772fe78fd59d7d02f304a9ce">decklink_frame::decklink_frame</a></div><div class="ttdeci">decklink_frame(struct decklink_ctx *ctx, AVFrame *avframe, AVCodecID codec_id, int height, int width)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00051">decklink_enc.cpp:51</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a0c0f4ce79fd3722715902dc734e582f1"><div class="ttname"><a href="structdecklink__cctx.html#a0c0f4ce79fd3722715902dc734e582f1">decklink_cctx::list_devices</a></div><div class="ttdeci">int list_devices</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00043">decklink_common_c.h:43</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_aeb18b8ef49f79e84c385ad3533ae507e"><div class="ttname"><a href="classdecklink__frame.html#aeb18b8ef49f79e84c385ad3533ae507e">decklink_frame::GetAncillaryData</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE GetAncillaryData(IDeckLinkVideoFrameAncillary **ancillary)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00093">decklink_enc.cpp:93</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a7376747651b9113c8dd5afecc94742d2"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a7376747651b9113c8dd5afecc94742d2">AV_PKT_DATA_A53_CC</a></div><div class="ttdeci">@ AV_PKT_DATA_A53_CC</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00242">packet.h:242</a></div></div>
<div class="ttc" id="aclassdecklink__output__callback_html_a229cc2bfe1e115cdaae7fcd416a5e9f7"><div class="ttname"><a href="classdecklink__output__callback.html#a229cc2bfe1e115cdaae7fcd416a5e9f7">decklink_output_callback::QueryInterface</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE QueryInterface(REFIID iid, LPVOID *ppv)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00159">decklink_enc.cpp:159</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga0a2b687f9c1c5ed0089b01fd61227108"><div class="ttname"><a href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a></div><div class="ttdeci">void av_frame_unref(AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00553">frame.c:553</a></div></div>
<div class="ttc" id="aclassdecklink__output__callback_html_a75c46cb7fb82d77ae4cb64ef643857ed"><div class="ttname"><a href="classdecklink__output__callback.html#a75c46cb7fb82d77ae4cb64ef643857ed">decklink_output_callback::Release</a></div><div class="ttdeci">virtual ULONG STDMETHODCALLTYPE Release(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00161">decklink_enc.cpp:161</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html"><div class="ttname"><a href="struct_a_v_codec_parameters.html">AVCodecParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00052">codec_par.h:52</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a4b8bbbe12148683b09820e9d6d9c8957"><div class="ttname"><a href="classdecklink__frame.html#a4b8bbbe12148683b09820e9d6d9c8957">decklink_frame::AddRef</a></div><div class="ttdeci">virtual ULONG STDMETHODCALLTYPE AddRef(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00112">decklink_enc.cpp:112</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a77b147c2df7c3d920d116ba098de1774"><div class="ttname"><a href="classdecklink__frame.html#a77b147c2df7c3d920d116ba098de1774">decklink_frame::_ctx</a></div><div class="ttdeci">struct decklink_ctx * _ctx</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00126">decklink_enc.cpp:126</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="aavformat_8h_html"><div class="ttname"><a href="avformat_8h.html">avformat.h</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a4b8a29937744c722f35fccafb91ebdf0"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a4b8a29937744c722f35fccafb91ebdf0">AV_PIX_FMT_UYVY422</a></div><div class="ttdeci">@ AV_PIX_FMT_UYVY422</div><div class="ttdoc">packed YUV 4:2:2, 16bpp, Cb Y0 Cr Y1</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00081">pixfmt.h:81</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1d0f65014a8d1bf78cec8cbed2304992"><div class="ttname"><a href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">AVFrame::data</a></div><div class="ttdeci">uint8_t * data[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00322">frame.h:322</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ab5bf43ceeffd5c440d539ae2ed025827"><div class="ttname"><a href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a></div><div class="ttdeci">the frame and frame reference mechanism is intended to as much as expensive copies of that data while still allowing the filters to produce correct results The data is stored in buffers represented by AVFrame structures Several references can point to the same frame buffer</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00049">filter_design.txt:49</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a9e2c1ee3441b4691cb3e0f3ba1012e89"><div class="ttname"><a href="classdecklink__frame.html#a9e2c1ee3441b4691cb3e0f3ba1012e89">decklink_frame::GetWidth</a></div><div class="ttdeci">virtual long STDMETHODCALLTYPE GetWidth(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00055">decklink_enc.cpp:55</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_afddf64290d2130f798d72e7ce33376caa110d8bc2cf7464da0e5b438dc51ee183"><div class="ttname"><a href="decklink__common_8h.html#afddf64290d2130f798d72e7ce33376caa110d8bc2cf7464da0e5b438dc51ee183">DIRECTION_OUT</a></div><div class="ttdeci">@ DIRECTION_OUT</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00156">decklink_common.h:156</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html"><div class="ttname"><a href="structdecklink__ctx.html">decklink_ctx</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00088">decklink_common.h:88</a></div></div>
<div class="ttc" id="aclassdecklink__output__callback_html_a2357ecb54256057986e3021bb2a88dd3"><div class="ttname"><a href="classdecklink__output__callback.html#a2357ecb54256057986e3021bb2a88dd3">decklink_output_callback::ScheduledPlaybackHasStopped</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE ScheduledPlaybackHasStopped(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00158">decklink_enc.cpp:158</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_adc71518c2883d48d7b43144d4ce917af"><div class="ttname"><a href="classdecklink__frame.html#adc71518c2883d48d7b43144d4ce917af">decklink_frame::GetRowBytes</a></div><div class="ttdeci">virtual long STDMETHODCALLTYPE GetRowBytes(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00057">decklink_enc.cpp:57</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html"><div class="ttname"><a href="struct_a_v_format_context.html">AVFormatContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01223">avformat.h:1223</a></div></div>
<div class="ttc" id="aclassdecklink__output__callback_html_a42be57fc740f55c8defd6c48ffbbbf02"><div class="ttname"><a href="classdecklink__output__callback.html#a42be57fc740f55c8defd6c48ffbbbf02">decklink_output_callback::ScheduledFrameCompleted</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE ScheduledFrameCompleted(IDeckLinkVideoFrame *_frame, BMDOutputFrameCompletionResult result)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00141">decklink_enc.cpp:141</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a05e112e6f8da37a216c0271c96e6529e"><div class="ttname"><a href="structdecklink__cctx.html#a05e112e6f8da37a216c0271c96e6529e">decklink_cctx::duplex_mode</a></div><div class="ttdeci">int duplex_mode</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00050">decklink_common_c.h:50</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a401fecf1eeb2402e5462bc36521c4523"><div class="ttname"><a href="classdecklink__frame.html#a401fecf1eeb2402e5462bc36521c4523">decklink_frame::_height</a></div><div class="ttdeci">int _height</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00131">decklink_enc.cpp:131</a></div></div>
<div class="ttc" id="aos2threads_8h_html_af2ed122199f455b63a734ae9b592d286"><div class="ttname"><a href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a></div><div class="ttdeci">static av_always_inline int pthread_cond_wait(pthread_cond_t *cond, pthread_mutex_t *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00192">os2threads.h:192</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_a20b8924e08148d26267e658b1d921837"><div class="ttname"><a href="classdecklink__frame.html#a20b8924e08148d26267e658b1d921837">decklink_frame::decklink_frame</a></div><div class="ttdeci">decklink_frame(struct decklink_ctx *ctx, AVPacket *avpacket, AVCodecID codec_id, int height, int width)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00053">decklink_enc.cpp:53</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a988744a389cfc570ca0cb757408dd8e4"><div class="ttname"><a href="decklink__common_8cpp.html#a988744a389cfc570ca0cb757408dd8e4">ff_decklink_set_format</a></div><div class="ttdeci">int ff_decklink_set_format(AVFormatContext *avctx, int width, int height, int tb_num, int tb_den, enum AVFieldOrder field_order, decklink_direction_t direction)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00199">decklink_common.cpp:199</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html"><div class="ttname"><a href="struct_a_v_stream.html">AVStream</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00869">avformat.h:869</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a58369c3a8a986935b572df5aa6361ce2"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">AVCodecParameters::codec_type</a></div><div class="ttdeci">enum AVMediaType codec_type</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:56</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="adecklink__enc_8h_html"><div class="ttname"><a href="decklink__enc_8h.html">decklink_enc.h</a></div></div>
<div class="ttc" id="aimgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a90293d12cef762b6df0139309d13fdbf"><div class="ttname"><a href="os2threads_8h.html#a90293d12cef762b6df0139309d13fdbf">pthread_cond_init</a></div><div class="ttdeci">static av_always_inline int pthread_cond_init(pthread_cond_t *cond, const pthread_condattr_t *attr)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00133">os2threads.h:133</a></div></div>
<div class="ttc" id="adecklink__enc_8cpp_html_ad0ac468c79924a135b711e2ea82b6224"><div class="ttname"><a href="decklink__enc_8cpp.html#ad0ac468c79924a135b711e2ea82b6224">decklink_setup_video</a></div><div class="ttdeci">static int decklink_setup_video(AVFormatContext *avctx, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00164">decklink_enc.cpp:164</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga334ea23fd9e492cd0e718330f2353b6b"><div class="ttname"><a href="group__lavu__error.html#ga334ea23fd9e492cd0e718330f2353b6b">AVERROR_EXIT</a></div><div class="ttdeci">#define AVERROR_EXIT</div><div class="ttdoc">Immediate exit was requested; the called function should not be restarted.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00056">error.h:56</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_aecb0846b1f6798e43e71b66fdbd6f963"><div class="ttname"><a href="classdecklink__frame.html#aecb0846b1f6798e43e71b66fdbd6f963">decklink_frame::_codec_id</a></div><div class="ttdeci">AVCodecID _codec_id</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00129">decklink_enc.cpp:129</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_ab15a26f91f4ecec4f6aeda0b98165dcd"><div class="ttname"><a href="decklink__common_8cpp.html#ab15a26f91f4ecec4f6aeda0b98165dcd">ff_decklink_list_devices</a></div><div class="ttdeci">int ff_decklink_list_devices(AVFormatContext *avctx, struct AVDeviceInfoList *device_list, int show_inputs, int show_outputs)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00335">decklink_common.cpp:335</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gacbe3e51cf411a7003d706127dc48cbb1"><div class="ttname"><a href="group__lavc__packet.html#gacbe3e51cf411a7003d706127dc48cbb1">av_packet_clone</a></div><div class="ttdeci">AVPacket * av_packet_clone(const AVPacket *src)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00651">avpacket.c:651</a></div></div>
<div class="ttc" id="adecklink__enc_8cpp_html_ab501d9c860f44d169a375f7d01105b7d"><div class="ttname"><a href="decklink__enc_8cpp.html#ab501d9c860f44d169a375f7d01105b7d">decklink_setup_audio</a></div><div class="ttdeci">static int decklink_setup_audio(AVFormatContext *avctx, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00235">decklink_enc.cpp:235</a></div></div>
<div class="ttc" id="affprobe_8c_html_a3bd1ad5edf8fc93f783af77e8cd6ee9a"><div class="ttname"><a href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="ffprobe_8c_source.html#l00062">ffprobe.c:62</a></div></div>
<div class="ttc" id="aclassdecklink__frame_html_aea569178c83712c07b7780f94cc70a8d"><div class="ttname"><a href="classdecklink__frame.html#aea569178c83712c07b7780f94cc70a8d">decklink_frame::GetBytes</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE GetBytes(void **buffer)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__enc_8cpp_source.html#l00079">decklink_enc.cpp:79</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
