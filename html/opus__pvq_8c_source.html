<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/opus_pvq.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">opus_pvq.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="opus__pvq_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2007-2008 CSIRO</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2007-2009 Xiph.Org Foundation</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2008-2009 Gregory Maxwell</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (c) 2012 Andrew D&#39;Addesio</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Copyright (c) 2013-2014 Mozilla Corporation</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Copyright (c) 2017 Rostislav Pehlivanov &lt;atomnuker@gmail.com&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opustab_8h.html">opustab.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opus__pvq_8h.html">opus_pvq.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#ac8597585bee1ca3cc7a29e28d6b71feb">   29</a></span>&#160;<span class="preprocessor">#define CELT_PVQ_U(n, k) (ff_celt_pvq_u_row[FFMIN(n, k)][FFMAX(n, k)])</span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a6dc6bb78d0068ee6f11beae094beb5ae">   30</a></span>&#160;<span class="preprocessor">#define CELT_PVQ_V(n, k) (CELT_PVQ_U(n, k) + CELT_PVQ_U(n, (k) + 1))</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#aac045e54677f9fdd9c0856664432b0c7">   32</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> int16_t <a class="code" href="opus__pvq_8c.html#aac045e54677f9fdd9c0856664432b0c7">celt_cos</a>(int16_t x)</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    x = (<a class="code" href="mathops_8h.html#a22c70c3b9c3c05bad0d5ff51e7ebb3fa">MUL16</a>(x, x) + 4096) &gt;&gt; 13;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    x = (32767-x) + <a class="code" href="opus_8h.html#abaf3cb1208e8b01dfa0ee8caf5719287">ROUND_MUL16</a>(x, (-7651 + <a class="code" href="opus_8h.html#abaf3cb1208e8b01dfa0ee8caf5719287">ROUND_MUL16</a>(x, (8277 + <a class="code" href="opus_8h.html#abaf3cb1208e8b01dfa0ee8caf5719287">ROUND_MUL16</a>(-626, x)))));</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">return</span> x + 1;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a892875548a4bb54a45e4144c52606651">   39</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="opus__pvq_8c.html#a892875548a4bb54a45e4144c52606651">celt_log2tan</a>(<span class="keywordtype">int</span> isin, <span class="keywordtype">int</span> icos)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">int</span> lc, ls;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    lc = <a class="code" href="opus__rc_8h.html#a492120faf46437986114ca65892d7765">opus_ilog</a>(icos);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    ls = <a class="code" href="opus__rc_8h.html#a492120faf46437986114ca65892d7765">opus_ilog</a>(isin);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    icos &lt;&lt;= 15 - lc;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    isin &lt;&lt;= 15 - ls;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">return</span> (ls &lt;&lt; 11) - (lc &lt;&lt; 11) +</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;           <a class="code" href="opus_8h.html#abaf3cb1208e8b01dfa0ee8caf5719287">ROUND_MUL16</a>(isin, <a class="code" href="opus_8h.html#abaf3cb1208e8b01dfa0ee8caf5719287">ROUND_MUL16</a>(isin, -2597) + 7932) -</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;           <a class="code" href="opus_8h.html#abaf3cb1208e8b01dfa0ee8caf5719287">ROUND_MUL16</a>(icos, <a class="code" href="opus_8h.html#abaf3cb1208e8b01dfa0ee8caf5719287">ROUND_MUL16</a>(icos, -2597) + 7932);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a9f17c9808bb89fddfcdecb9667caa159">   51</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="opus__pvq_8c.html#a9f17c9808bb89fddfcdecb9667caa159">celt_bits2pulses</a>(<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *cache, <span class="keywordtype">int</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// TODO: Find the size of cache and make it into an array in the parameters list</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, low = 0, high;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    high = cache[0];</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>--;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keywordtype">int</span> center = (low + high + 1) &gt;&gt; 1;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">if</span> (cache[center] &gt;= <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            high = center;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            low = center;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> - (low == 0 ? -1 : cache[low]) &lt;= cache[high] - <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>) ? low : high;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a6a0cfc3877b61235fb2716aed4354fc9">   70</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="opus__pvq_8c.html#a6a0cfc3877b61235fb2716aed4354fc9">celt_pulses2bits</a>(<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *cache, <span class="keywordtype">int</span> <a class="code" href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a>)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// TODO: Find the size of cache and make it into an array in the parameters list</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <span class="keywordflow">return</span> (<a class="code" href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a> == 0) ? 0 : cache[<a class="code" href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a>] + 1;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#ae78a95f598f0f999070b23dfbc6e3725">   76</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#ae78a95f598f0f999070b23dfbc6e3725">celt_normalize_residual</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> * av_restrict iy, <span class="keywordtype">float</span> * av_restrict <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                                           <span class="keywordtype">int</span> <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <span class="keywordtype">float</span> <a class="code" href="vf__curves_8c.html#a1b5e77b92dea40e646b2e7e196e0b322">g</a>)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="vf__curves_8c.html#a1b5e77b92dea40e646b2e7e196e0b322">g</a> * iy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a88aebe858f4d058966af41de4e8d2327">   84</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#a88aebe858f4d058966af41de4e8d2327">celt_exp_rotation_impl</a>(<span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, uint32_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, uint32_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                   <span class="keywordtype">float</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <span class="keywordtype">float</span> <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">float</span> *Xptr;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    Xptr = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordtype">float</span> x1     = Xptr[0];</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordtype">float</span> x2     = Xptr[<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        Xptr[<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> * x2 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> * x1;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        *Xptr++      = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> * x1 - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> * x2;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    Xptr = &amp;<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 2 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> - 1];</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 2 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordtype">float</span> x1     = Xptr[0];</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordtype">float</span> x2     = Xptr[<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        Xptr[<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> * x2 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> * x1;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        *Xptr--      = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> * x1 - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> * x2;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a2702575156dad339aeeaebe414e9b615">  107</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#a2702575156dad339aeeaebe414e9b615">celt_exp_rotation</a>(<span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, uint32_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                     uint32_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, uint32_t K,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                     <span class="keyword">enum</span> <a class="code" href="opus__celt_8h.html#a6b2bf8b6b55040d3f41d48870d6f3d0c">CeltSpread</a> spread, <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="encode__audio_8c.html#a4883bd84aced552588972551e86d8575">encode</a>)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    uint32_t stride2 = 0;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">float</span> gain, theta;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (2*K &gt;= <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> || spread == <a class="code" href="opus__celt_8h.html#a6b2bf8b6b55040d3f41d48870d6f3d0caa636e8d9a58f9dde560d983ba4458425">CELT_SPREAD_NONE</a>)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    gain = (float)<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> / (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + (20 - 5*spread) * K);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    theta = <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * gain * gain / 4;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = <a class="code" href="libm_8h.html#a4feea5aac9457df2db706f1065f0b28b">cosf</a>(theta);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="libm_8h.html#a403b30a3b20ba833b366b9d61cfdd3d2">sinf</a>(theta);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;= <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> &lt;&lt; 3) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        stride2 = 1;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">/* This is just a simple (equivalent) way of computing sqrt(len/stride) with rounding.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">        It&#39;s basically incrementing long as (stride2+0.5)^2 &lt; len/stride. */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">while</span> ((stride2 * stride2 + stride2) * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> + (<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> &gt;&gt; 2) &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            stride2++;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> /= <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="encode__audio_8c.html#a4883bd84aced552588972551e86d8575">encode</a>) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <a class="code" href="opus__pvq_8c.html#a88aebe858f4d058966af41de4e8d2327">celt_exp_rotation_impl</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, 1, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, -<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">if</span> (stride2)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                <a class="code" href="opus__pvq_8c.html#a88aebe858f4d058966af41de4e8d2327">celt_exp_rotation_impl</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, stride2, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, -<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keywordflow">if</span> (stride2)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                <a class="code" href="opus__pvq_8c.html#a88aebe858f4d058966af41de4e8d2327">celt_exp_rotation_impl</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, stride2, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <a class="code" href="opus__pvq_8c.html#a88aebe858f4d058966af41de4e8d2327">celt_exp_rotation_impl</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, 1, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a7d3b17cea5ff66f2a77988f9c331bfff">  147</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="opus__pvq_8c.html#a7d3b17cea5ff66f2a77988f9c331bfff">celt_extract_collapse_mask</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> *iy, uint32_t <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, uint32_t <a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a>)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a> = <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> / <a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    uint32_t collapse_mask = 0;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a> &lt;= 1)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>; j++)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            collapse_mask |= (!!iy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>*<a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>+j]) &lt;&lt; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> collapse_mask;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a3f910e261dd4c7826c9c3fd88929e8f6">  161</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#a3f910e261dd4c7826c9c3fd88929e8f6">celt_stereo_merge</a>(<span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <span class="keywordtype">float</span> *<a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <span class="keywordtype">float</span> mid, <span class="keywordtype">int</span> <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">float</span> xp = 0, side = 0;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="avdct_8c.html#a07484107e6d9fdf38b53edf631d6511d">E</a>[2];</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">float</span> mid2;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">float</span> gain[2];</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">/* Compute the norm of X+Y and X-Y as |X|^2 + |Y|^2 +/- sum(xy) */</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        xp   += <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        side += <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">/* Compensating for the mid normalization */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    xp *= mid;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    mid2 = mid;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="avdct_8c.html#a07484107e6d9fdf38b53edf631d6511d">E</a>[0] = mid2 * mid2 + side - 2 * xp;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="avdct_8c.html#a07484107e6d9fdf38b53edf631d6511d">E</a>[1] = mid2 * mid2 + side + 2 * xp;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="avdct_8c.html#a07484107e6d9fdf38b53edf631d6511d">E</a>[0] &lt; 6e-4<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> || <a class="code" href="avdct_8c.html#a07484107e6d9fdf38b53edf631d6511d">E</a>[1] &lt; 6e-4<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    gain[0] = 1.0f / sqrtf(<a class="code" href="avdct_8c.html#a07484107e6d9fdf38b53edf631d6511d">E</a>[0]);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    gain[1] = 1.0f / sqrtf(<a class="code" href="avdct_8c.html#a07484107e6d9fdf38b53edf631d6511d">E</a>[1]);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordtype">float</span> <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>[2];</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">/* Apply mid scaling (side is already scaled) */</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>[0] = mid * <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>[1] = <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = gain[0] * (<a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>[0] - <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>[1]);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = gain[1] * (<a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>[0] + <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>[1]);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a474228d614dcd9ccbf791ee4285e66f8">  199</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#a474228d614dcd9ccbf791ee4285e66f8">celt_interleave_hadamard</a>(<span class="keywordtype">float</span> *tmp, <span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <span class="keywordtype">int</span> <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                     <span class="keywordtype">int</span> <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <span class="keywordtype">int</span> hadamard)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *order = &amp;<a class="code" href="opustab_8c.html#a3d101f3f319cdb3adb0a949d9d52e7ea">ff_celt_hadamard_order</a>[hadamard ? <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> - 2 : 30];</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>; j++)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            tmp[j*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>+<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[order[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]*<a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>+j];</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    memcpy(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, tmp, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a24e19a560f0edc8a9a49ac4518189b8d">  212</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#a24e19a560f0edc8a9a49ac4518189b8d">celt_deinterleave_hadamard</a>(<span class="keywordtype">float</span> *tmp, <span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <span class="keywordtype">int</span> <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                       <span class="keywordtype">int</span> <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <span class="keywordtype">int</span> hadamard)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;{</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *order = &amp;<a class="code" href="opustab_8c.html#a3d101f3f319cdb3adb0a949d9d52e7ea">ff_celt_hadamard_order</a>[hadamard ? <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> - 2 : 30];</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>; j++)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            tmp[order[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]*<a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>+j] = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[j*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>+<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    memcpy(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, tmp, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#aa3e5b0659a8373a9f2a71f0036c81d1f">  225</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#aa3e5b0659a8373a9f2a71f0036c81d1f">celt_haar1</a>(<span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <span class="keywordtype">int</span> <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>, <span class="keywordtype">int</span> <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a> &gt;&gt;= 1;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>; j++) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordtype">float</span> x0 = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> * (2 * j + 0) + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordtype">float</span> x1 = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> * (2 * j + 1) + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> * (2 * j + 0) + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (x0 + x1) * <a class="code" href="mathematics_8h.html#acdbb2c2f9429f08916f03c8786d2d2d7">M_SQRT1_2</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> * (2 * j + 1) + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (x0 - x1) * <a class="code" href="mathematics_8h.html#acdbb2c2f9429f08916f03c8786d2d2d7">M_SQRT1_2</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#ab3b2c51f59e94f789558a37463b68402">  239</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="opus__pvq_8c.html#ab3b2c51f59e94f789558a37463b68402">celt_compute_qn</a>(<span class="keywordtype">int</span> <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <span class="keywordtype">int</span> <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, <span class="keywordtype">int</span> pulse_cap,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                  <span class="keywordtype">int</span> stereo)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordtype">int</span> qn, qb;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vf__pp7_8c.html#acd864640121c7df2c19f61f7baa507e4">N2</a> = 2 * <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> - 1;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (stereo &amp;&amp; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> == 2)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="vf__pp7_8c.html#acd864640121c7df2c19f61f7baa507e4">N2</a>--;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">/* The upper limit ensures that in a stereo split with itheta==16384, we&#39;ll</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">     * always have enough bits left over to code at least one pulse in the</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">     * side; otherwise it would collapse, since it doesn&#39;t get folded. */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    qb = <a class="code" href="common_8h.html#af6afbffa12562b076c34055bdcb3ad65">FFMIN3</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> - pulse_cap - (4 &lt;&lt; 3), (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> + <a class="code" href="vf__pp7_8c.html#acd864640121c7df2c19f61f7baa507e4">N2</a> * <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>) / <a class="code" href="vf__pp7_8c.html#acd864640121c7df2c19f61f7baa507e4">N2</a>, 8 &lt;&lt; 3);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    qn = (qb &lt; (1 &lt;&lt; 3 &gt;&gt; 1)) ? 1 : ((<a class="code" href="opustab_8c.html#a7060d4341a6f7d793d30d1688645930c">ff_celt_qn_exp2</a>[qb &amp; 0x7] &gt;&gt; (14 - (qb &gt;&gt; 3))) + 1) &gt;&gt; 1 &lt;&lt; 1;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> qn;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">/* Convert the quantized vector to an index */</span></div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a08ac55ab697f7db293c7ef8ff083e6eb">  256</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="opus__pvq_8c.html#a08ac55ab697f7db293c7ef8ff083e6eb">celt_icwrsi</a>(uint32_t <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, uint32_t K, <span class="keyword">const</span> <span class="keywordtype">int</span> *y)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, idx = 0, sum = 0;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keyword">const</span> uint32_t i_s = <a class="code" href="opus__pvq_8c.html#ac8597585bee1ca3cc7a29e28d6b71feb">CELT_PVQ_U</a>(<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, sum + <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) + 1);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        idx += <a class="code" href="opus__pvq_8c.html#ac8597585bee1ca3cc7a29e28d6b71feb">CELT_PVQ_U</a>(<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, sum) + (y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; 0)*i_s;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        sum += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">return</span> idx;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">// this code was adapted from libopus</span></div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a11aff75a8a219c93b9485887839f2e84">  268</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint64_t <a class="code" href="opus__pvq_8c.html#a11aff75a8a219c93b9485887839f2e84">celt_cwrsi</a>(uint32_t <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, uint32_t K, uint32_t <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keywordtype">int</span> *y)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;{</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    uint64_t norm = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    uint32_t q, p;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordtype">int</span> k0;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &gt; 2) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="comment">/*Lots of pulses case:*/</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span> (K &gt;= <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keyword">const</span> uint32_t *row = <a class="code" href="opustab_8c.html#a2a6a301bf0a21249f64fdc480eb650ff">ff_celt_pvq_u_row</a>[<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>];</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="comment">/* Are the pulses in this dimension negative? */</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            p  = row[K + 1];</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>  = -(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= p);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> -= p &amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="comment">/*Count how many pulses were placed in this dimension.*/</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            k0 = K;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            q = row[<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>];</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keywordflow">if</span> (q &gt; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                K = <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    p = <a class="code" href="opustab_8c.html#a2a6a301bf0a21249f64fdc480eb650ff">ff_celt_pvq_u_row</a>[--K][<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>];</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                } <span class="keywordflow">while</span> (p &gt; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                <span class="keywordflow">for</span> (p = row[K]; p &gt; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>; p = row[K])</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    K--;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>    -= p;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>   = (k0 - K + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>) ^ <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            norm += <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> * <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            *y++  = <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">/*Lots of dimensions case:*/</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="comment">/*Are there any pulses in this dimension at all?*/</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            p = <a class="code" href="opustab_8c.html#a2a6a301bf0a21249f64fdc480eb650ff">ff_celt_pvq_u_row</a>[K    ][<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>];</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            q = <a class="code" href="opustab_8c.html#a2a6a301bf0a21249f64fdc480eb650ff">ff_celt_pvq_u_row</a>[K + 1][<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>];</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">if</span> (p &lt;= <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp;&amp; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; q) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> -= p;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                *y++ = 0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="comment">/*Are the pulses in this dimension negative?*/</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>  = -(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= q);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> -= q &amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="comment">/*Count how many pulses were placed in this dimension.*/</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                k0 = K;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="keywordflow">do</span> p = <a class="code" href="opustab_8c.html#a2a6a301bf0a21249f64fdc480eb650ff">ff_celt_pvq_u_row</a>[--K][<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>];</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                <span class="keywordflow">while</span> (p &gt; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>    -= p;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>   = (k0 - K + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>) ^ <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                norm += <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> * <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                *y++  = <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>--;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">/* N == 2 */</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    p  = 2 * K + 1;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>  = -(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= p);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> -= p &amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    k0 = K;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    K  = (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) / 2;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span> (K)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> -= 2 * K - 1;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>   = (k0 - K + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>) ^ <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    norm += <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> * <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    *y++  = <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">/* N==1 */</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>     = -<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>   = (K + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>) ^ <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    norm += <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> * <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    *y    = <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> norm;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a2938597c0b14f4b7794f041299c74cfe">  351</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#a2938597c0b14f4b7794f041299c74cfe">celt_encode_pulses</a>(<a class="code" href="struct_opus_range_coder.html">OpusRangeCoder</a> *rc, <span class="keywordtype">int</span> *y, uint32_t <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, uint32_t K)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;{</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="opus__rc_8c.html#a13da91efe382288f22bc9ed24b758f42">ff_opus_rc_enc_uint</a>(rc, <a class="code" href="opus__pvq_8c.html#a08ac55ab697f7db293c7ef8ff083e6eb">celt_icwrsi</a>(<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, K, y), <a class="code" href="opus__pvq_8c.html#a6dc6bb78d0068ee6f11beae094beb5ae">CELT_PVQ_V</a>(<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, K));</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a36ddedccc95d71e335766d721a364db3">  356</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="opus__pvq_8c.html#a36ddedccc95d71e335766d721a364db3">celt_decode_pulses</a>(<a class="code" href="struct_opus_range_coder.html">OpusRangeCoder</a> *rc, <span class="keywordtype">int</span> *y, uint32_t <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, uint32_t K)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keyword">const</span> uint32_t idx = <a class="code" href="opus__rc_8c.html#a11570adec89b51f06a5bfbd1d98c68b5">ff_opus_rc_dec_uint</a>(rc, <a class="code" href="opus__pvq_8c.html#a6dc6bb78d0068ee6f11beae094beb5ae">CELT_PVQ_V</a>(<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, K));</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="opus__pvq_8c.html#a11aff75a8a219c93b9485887839f2e84">celt_cwrsi</a>(<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, K, idx, y);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"> * Faster than libopus&#39;s search, operates entirely in the signed domain.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"> * Slightly worse/better depending on N, K and the input vector.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a0bf29958652af7200c3b638e5a3c2277">  366</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="opus__pvq_8c.html#a0bf29958652af7200c3b638e5a3c2277">ppp_pvq_search_c</a>(<span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <span class="keywordtype">int</span> *y, <span class="keywordtype">int</span> K, <span class="keywordtype">int</span> <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;{</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, y_norm = 0;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordtype">float</span> res = 0.0f, xy_norm = 0.0f;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        res += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    res = K/(res + FLT_EPSILON);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(res*<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        y_norm  += y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]*y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        xy_norm += y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]*<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        K -= <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">while</span> (K) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordtype">int</span> max_idx = 0, phase = <a class="code" href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a>(K);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordtype">float</span> max_num = 0.0f;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordtype">float</span> max_den = 1.0f;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        y_norm += 1.0f;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="comment">/* If the sum has been overshot and the best place has 0 pulses allocated</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">             * to it, attempting to decrease it further will actually increase the</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">             * sum. Prevent this by disregarding any 0 positions when decrementing. */</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> ca = 1 ^ ((y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] == 0) &amp; (phase &lt; 0));</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> y_new = y_norm  + 2*phase*<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(y[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordtype">float</span> xy_new = xy_norm + 1*phase*<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            xy_new = xy_new * xy_new;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="keywordflow">if</span> (ca &amp;&amp; (max_den*xy_new) &gt; (y_new*max_num)) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                max_den = y_new;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                max_num = xy_new;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                max_idx = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        K -= phase;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        phase *= <a class="code" href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[max_idx]);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        xy_norm += 1*phase*<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[max_idx];</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        y_norm  += 2*phase*y[max_idx];</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        y[max_idx] += phase;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">float</span>)y_norm;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a0494fa28b4c192c6c11ffd2fd2a2e934">  415</a></span>&#160;<span class="keyword">static</span> uint32_t <a class="code" href="opus__pvq_8c.html#a0494fa28b4c192c6c11ffd2fd2a2e934">celt_alg_quant</a>(<a class="code" href="struct_opus_range_coder.html">OpusRangeCoder</a> *rc, <span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, uint32_t <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, uint32_t K,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                               <span class="keyword">enum</span> <a class="code" href="opus__celt_8h.html#a6b2bf8b6b55040d3f41d48870d6f3d0c">CeltSpread</a> spread, uint32_t blocks, <span class="keywordtype">float</span> gain,</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                               <a class="code" href="struct_celt_p_v_q.html">CeltPVQ</a> *pvq)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">int</span> *y = pvq-&gt;qcoeff;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="opus__pvq_8c.html#a2702575156dad339aeeaebe414e9b615">celt_exp_rotation</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, blocks, K, spread, 1);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    gain /= sqrtf(pvq-&gt;<a class="code" href="struct_celt_p_v_q.html#af2497a3fae9405bd5650fe9bc5e141ed">pvq_search</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, y, K, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>));</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="opus__pvq_8c.html#a2938597c0b14f4b7794f041299c74cfe">celt_encode_pulses</a>(rc, y,  <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, K);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="opus__pvq_8c.html#ae78a95f598f0f999070b23dfbc6e3725">celt_normalize_residual</a>(y, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, gain);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="opus__pvq_8c.html#a2702575156dad339aeeaebe414e9b615">celt_exp_rotation</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, blocks, K, spread, 0);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="opus__pvq_8c.html#a7d3b17cea5ff66f2a77988f9c331bfff">celt_extract_collapse_mask</a>(y, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, blocks);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;}</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#ae53beaadc7501655dcf54cc2126387bb">  431</a></span>&#160;<span class="keyword">static</span> uint32_t <a class="code" href="opus__pvq_8c.html#ae53beaadc7501655dcf54cc2126387bb">celt_alg_unquant</a>(<a class="code" href="struct_opus_range_coder.html">OpusRangeCoder</a> *rc, <span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, uint32_t <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, uint32_t K,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                                 <span class="keyword">enum</span> <a class="code" href="opus__celt_8h.html#a6b2bf8b6b55040d3f41d48870d6f3d0c">CeltSpread</a> spread, uint32_t blocks, <span class="keywordtype">float</span> gain,</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                 <a class="code" href="struct_celt_p_v_q.html">CeltPVQ</a> *pvq)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordtype">int</span> *y = pvq-&gt;qcoeff;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    gain /= sqrtf(<a class="code" href="opus__pvq_8c.html#a36ddedccc95d71e335766d721a364db3">celt_decode_pulses</a>(rc, y, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, K));</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="opus__pvq_8c.html#ae78a95f598f0f999070b23dfbc6e3725">celt_normalize_residual</a>(y, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, gain);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="opus__pvq_8c.html#a2702575156dad339aeeaebe414e9b615">celt_exp_rotation</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, blocks, K, spread, 0);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="opus__pvq_8c.html#a7d3b17cea5ff66f2a77988f9c331bfff">celt_extract_collapse_mask</a>(y, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, blocks);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#adc5ec4620084b11046e21d27ef70dc6d">  443</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="opus__pvq_8c.html#adc5ec4620084b11046e21d27ef70dc6d">celt_calc_theta</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <span class="keywordtype">int</span> coupling, <span class="keywordtype">int</span> <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;{</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordtype">float</span> e[2] = { 0.0f, 0.0f };</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (coupling) { <span class="comment">/* Coupling case */</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            e[0] += (<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])*(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            e[1] += (<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])*(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            e[0] += <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]*<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            e[1] += <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]*<a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(32768.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>*<a class="code" href="libm_8h.html#a77f93d002e4f6c2d215bd96bb1f0ab4e">atan2f</a>(sqrtf(e[1]), sqrtf(e[0]))/<a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;}</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a59e92b5419f5772fa00893518a370bc4">  461</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#a59e92b5419f5772fa00893518a370bc4">celt_stereo_is_decouple</a>(<span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <span class="keywordtype">float</span> *<a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <span class="keywordtype">float</span> e_l, <span class="keywordtype">float</span> e_r, <span class="keywordtype">int</span> <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;{</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> energy_n = 1.0f/(sqrtf(e_l*e_l + e_r*e_r) + FLT_EPSILON);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    e_l *= energy_n;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    e_r *= energy_n;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = e_l*<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + e_r*<a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a1a427aea4c90c457af9d80d61071539b">  471</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="opus__pvq_8c.html#a1a427aea4c90c457af9d80d61071539b">celt_stereo_ms_decouple</a>(<span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <span class="keywordtype">float</span> *<a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <span class="keywordtype">int</span> <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> Xret = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])*<a class="code" href="mathematics_8h.html#acdbb2c2f9429f08916f03c8786d2d2d7">M_SQRT1_2</a>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - Xret)*<a class="code" href="mathematics_8h.html#acdbb2c2f9429f08916f03c8786d2d2d7">M_SQRT1_2</a>;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a73c95ca0ce852963bb20ae93df133eb5">  481</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> uint32_t <a class="code" href="opus__pvq_8c.html#a73c95ca0ce852963bb20ae93df133eb5">quant_band_template</a>(<a class="code" href="struct_celt_p_v_q.html">CeltPVQ</a> *pvq, <a class="code" href="struct_celt_frame.html">CeltFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                                                     <a class="code" href="struct_opus_range_coder.html">OpusRangeCoder</a> *rc,</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                                     <span class="keyword">const</span> <span class="keywordtype">int</span> band, <span class="keywordtype">float</span> *<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>,</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                                                     <span class="keywordtype">float</span> *<a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <span class="keywordtype">int</span> <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <span class="keywordtype">int</span> <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>,</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                                     uint32_t blocks, <span class="keywordtype">float</span> *lowband,</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                                                     <span class="keywordtype">int</span> <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, <span class="keywordtype">float</span> *lowband_out,</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                                     <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, <span class="keywordtype">float</span> gain,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                                     <span class="keywordtype">float</span> *lowband_scratch,</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                                     <span class="keywordtype">int</span> fill, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a>)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *cache;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordtype">int</span> stereo = !!<a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <a class="code" href="af__channelmap_8c.html#ad79bfa4ac7a887fff6b118ca6e77ad27">split</a> = stereo;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordtype">int</span> imid = 0, iside = 0;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    uint32_t <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a> = <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordtype">int</span> N_B = <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> / blocks;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordtype">int</span> N_B0 = N_B;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> = blocks;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordtype">int</span> time_divide = 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">int</span> recombine = 0;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordtype">int</span> inv = 0;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordtype">float</span> mid = 0, side = 0;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordtype">int</span> longblocks = (<a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> == 1);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    uint32_t <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = 0;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> == 1) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordtype">float</span> *x = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= stereo; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="keywordtype">int</span> sign = 0;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 &gt;= 1 &lt;&lt; 3) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a>) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    sign = x[0] &lt; 0;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                    <a class="code" href="opus__rc_8c.html#a5df2c36cb9295932df4dd60acef1ecbd">ff_opus_rc_put_raw</a>(rc, sign, 1);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                    sign = <a class="code" href="opus__rc_8c.html#a9f761fd87b3c54869c06153a49e596d5">ff_opus_rc_get_raw</a>(rc, 1);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 -= 1 &lt;&lt; 3;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            x[0] = 1.0f - 2.0f*sign;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            x = <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">if</span> (lowband_out)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            lowband_out[0] = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[0];</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">if</span> (!stereo &amp;&amp; <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> == 0) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordtype">int</span> tf_change = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;tf_change[band];</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordtype">int</span> k;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">if</span> (tf_change &gt; 0)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            recombine = tf_change;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="comment">/* Band recombining to increase frequency resolution */</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">if</span> (lowband &amp;&amp;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            (recombine || ((N_B &amp; 1) == 0 &amp;&amp; tf_change &lt; 0) || <a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &gt; 1)) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                lowband_scratch[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = lowband[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            lowband = lowband_scratch;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">for</span> (k = 0; k &lt; recombine; k++) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a> || lowband)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                <a class="code" href="opus__pvq_8c.html#aa3e5b0659a8373a9f2a71f0036c81d1f">celt_haar1</a>(<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a> ? <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a> : lowband, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &gt;&gt; k, 1 &lt;&lt; k);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            fill = <a class="code" href="opustab_8c.html#a24d89115862425cbc4df5662a3cd0bff">ff_celt_bit_interleave</a>[fill &amp; 0xF] | <a class="code" href="opustab_8c.html#a24d89115862425cbc4df5662a3cd0bff">ff_celt_bit_interleave</a>[fill &gt;&gt; 4] &lt;&lt; 2;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        blocks &gt;&gt;= recombine;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        N_B &lt;&lt;= recombine;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="comment">/* Increasing the time resolution */</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">while</span> ((N_B &amp; 1) == 0 &amp;&amp; tf_change &lt; 0) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a> || lowband)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <a class="code" href="opus__pvq_8c.html#aa3e5b0659a8373a9f2a71f0036c81d1f">celt_haar1</a>(<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a> ? <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a> : lowband, N_B, blocks);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            fill |= fill &lt;&lt; blocks;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            blocks &lt;&lt;= 1;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            N_B &gt;&gt;= 1;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            time_divide++;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            tf_change++;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> = blocks;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        N_B0 = N_B;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="comment">/* Reorganize the samples in time order instead of frequency order */</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &gt; 1 &amp;&amp; (<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a> || lowband))</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <a class="code" href="opus__pvq_8c.html#a24e19a560f0edc8a9a49ac4518189b8d">celt_deinterleave_hadamard</a>(pvq-&gt;hadamard_tmp, <a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a> ? <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a> : lowband,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                                       N_B &gt;&gt; recombine, <a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &lt;&lt; recombine,</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                       longblocks);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">/* If we need 1.5 more bit than we can produce, split the band in two. */</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    cache = <a class="code" href="opustab_8c.html#a61f80d6cef441f16f02f39e1bcd2277d">ff_celt_cache_bits</a> +</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <a class="code" href="opustab_8c.html#a72c3bca6d80763464dea0d6932e40a31">ff_celt_cache_index</a>[(<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> + 1) * <a class="code" href="opus_8h.html#ab20adf1ddf763aaffdcfe2389c68a6e8">CELT_MAX_BANDS</a> + band];</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">if</span> (!stereo &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> &gt;= 0 &amp;&amp; <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &gt; cache[cache[0]] + 12 &amp;&amp; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &gt; 2) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &gt;&gt;= 1;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a> = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a> + <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="af__channelmap_8c.html#ad79bfa4ac7a887fff6b118ca6e77ad27">split</a> = 1;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> -= 1;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">if</span> (blocks == 1)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            fill = (fill &amp; 1) | (fill &lt;&lt; 1);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        blocks = (blocks + 1) &gt;&gt; 1;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="af__channelmap_8c.html#ad79bfa4ac7a887fff6b118ca6e77ad27">split</a>) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordtype">int</span> qn;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordtype">int</span> itheta = <a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a> ? <a class="code" href="opus__pvq_8c.html#adc5ec4620084b11046e21d27ef70dc6d">celt_calc_theta</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, stereo, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) : 0;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordtype">int</span> mbits, sbits, <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordtype">int</span> qalloc;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordtype">int</span> pulse_cap;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordtype">int</span> orig_fill;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordtype">int</span> tell;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">/* Decide on the resolution to give to the split parameter theta */</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        pulse_cap = <a class="code" href="opustab_8c.html#a16fa69f8dc1b87769ac91167a6d90578">ff_celt_log_freq_range</a>[band] + <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> * 8;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = (pulse_cap &gt;&gt; 1) - (stereo &amp;&amp; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> == 2 ? <a class="code" href="opus__celt_8h.html#a276137ca908e85157fb6a370e29631ba">CELT_QTHETA_OFFSET_TWOPHASE</a> :</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                                          <a class="code" href="opus__celt_8h.html#a73a2cf3bc9951fa014a594ac769076e2">CELT_QTHETA_OFFSET</a>);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        qn = (stereo &amp;&amp; band &gt;= <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;intensity_stereo) ? 1 :</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;             <a class="code" href="opus__pvq_8c.html#ab3b2c51f59e94f789558a37463b68402">celt_compute_qn</a>(<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, pulse_cap, stereo);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        tell = <a class="code" href="opus__rc_8h.html#ab5248728fbce196929cdb96c7fd31dc6">opus_rc_tell_frac</a>(rc);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">if</span> (qn != 1) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a>)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                itheta = (itheta*qn + 8192) &gt;&gt; 14;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <span class="comment">/* Entropy coding of the angle. We use a uniform pdf for the</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">             * time split, a step for stereo, and a triangular one for the rest. */</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a>) {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="keywordflow">if</span> (stereo &amp;&amp; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &gt; 2)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    <a class="code" href="opus__rc_8c.html#a2c47e392724e6f7c4ddc31b2858f72c9">ff_opus_rc_enc_uint_step</a>(rc, itheta, qn / 2);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stereo || <a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &gt; 1)</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    <a class="code" href="opus__rc_8c.html#a13da91efe382288f22bc9ed24b758f42">ff_opus_rc_enc_uint</a>(rc, itheta, qn + 1);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                    <a class="code" href="opus__rc_8c.html#a34f9fcd2a14705c1189fe2a8feee097e">ff_opus_rc_enc_uint_tri</a>(rc, itheta, qn);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                itheta = itheta * 16384 / qn;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                <span class="keywordflow">if</span> (stereo) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    <span class="keywordflow">if</span> (itheta == 0)</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                        <a class="code" href="opus__pvq_8c.html#a59e92b5419f5772fa00893518a370bc4">celt_stereo_is_decouple</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;block[0].lin_energy[band],</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                                <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;block[1].lin_energy[band], <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        <a class="code" href="opus__pvq_8c.html#a1a427aea4c90c457af9d80d61071539b">celt_stereo_ms_decouple</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="keywordflow">if</span> (stereo &amp;&amp; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &gt; 2)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    itheta = <a class="code" href="opus__rc_8c.html#a2a99d34c1f497e54c1b3c6683591afce">ff_opus_rc_dec_uint_step</a>(rc, qn / 2);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stereo || <a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &gt; 1)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    itheta = <a class="code" href="opus__rc_8c.html#a11570adec89b51f06a5bfbd1d98c68b5">ff_opus_rc_dec_uint</a>(rc, qn+1);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    itheta = <a class="code" href="opus__rc_8c.html#a903a739d10307be3f3ed48709dba5db2">ff_opus_rc_dec_uint_tri</a>(rc, qn);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                itheta = itheta * 16384 / qn;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stereo) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a>) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                inv = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;apply_phase_inv ? itheta &gt; 8192 : 0;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                 <span class="keywordflow">if</span> (inv) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                       <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= -1;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                 }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                 <a class="code" href="opus__pvq_8c.html#a59e92b5419f5772fa00893518a370bc4">celt_stereo_is_decouple</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;block[0].lin_energy[band],</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                         <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;block[1].lin_energy[band], <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &gt; 2 &lt;&lt; 3 &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 &gt; 2 &lt;&lt; 3) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                    <a class="code" href="opus__rc_8c.html#aa298a2a818146a4349761d92054529cf">ff_opus_rc_enc_log</a>(rc, inv, 2);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    inv = 0;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                inv = (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &gt; 2 &lt;&lt; 3 &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 &gt; 2 &lt;&lt; 3) ? <a class="code" href="opus__rc_8c.html#a8723a6f5c670b13f0dd2fcbb405c07e8">ff_opus_rc_dec_log</a>(rc, 2) : 0;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                inv = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;apply_phase_inv ? inv : 0;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            itheta = 0;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        qalloc = <a class="code" href="opus__rc_8h.html#ab5248728fbce196929cdb96c7fd31dc6">opus_rc_tell_frac</a>(rc) - tell;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> -= qalloc;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        orig_fill = fill;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> (itheta == 0) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            imid = 32767;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            iside = 0;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            fill = av_mod_uintp2(fill, blocks);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = -16384;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itheta == 16384) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            imid = 0;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            iside = 32767;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            fill &amp;= ((1 &lt;&lt; blocks) - 1) &lt;&lt; blocks;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = 16384;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            imid = <a class="code" href="opus__pvq_8c.html#aac045e54677f9fdd9c0856664432b0c7">celt_cos</a>(itheta);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            iside = <a class="code" href="opus__pvq_8c.html#aac045e54677f9fdd9c0856664432b0c7">celt_cos</a>(16384-itheta);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <span class="comment">/* This is the mid vs side allocation that minimizes squared error</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">            in that band. */</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = <a class="code" href="opus_8h.html#abaf3cb1208e8b01dfa0ee8caf5719287">ROUND_MUL16</a>((<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> - 1) &lt;&lt; 7, <a class="code" href="opus__pvq_8c.html#a892875548a4bb54a45e4144c52606651">celt_log2tan</a>(iside, imid));</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        mid  = imid  / 32768.0f;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        side = iside / 32768.0f;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="comment">/* This is a special case for N=2 that only works for stereo and takes</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">        advantage of the fact that mid and side are orthogonal to encode</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">        the side with just one bit. */</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> == 2 &amp;&amp; stereo) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            <span class="keywordtype">int</span> sign = 0;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <span class="keywordtype">float</span> tmp;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="keywordtype">float</span> *x2, *y2;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            mbits = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <span class="comment">/* Only need one bit for the side */</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            sbits = (itheta != 0 &amp;&amp; itheta != 16384) ? 1 &lt;&lt; 3 : 0;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            mbits -= sbits;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = (itheta &gt; 8192);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 -= qalloc+sbits;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            x2 = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> ? <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a> : <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            y2 = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> ? <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a> : <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="keywordflow">if</span> (sbits) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a>) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                    sign = x2[0]*y2[1] - x2[1]*y2[0] &lt; 0;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                    <a class="code" href="opus__rc_8c.html#a5df2c36cb9295932df4dd60acef1ecbd">ff_opus_rc_put_raw</a>(rc, sign, 1);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                    sign = <a class="code" href="opus__rc_8c.html#a9f761fd87b3c54869c06153a49e596d5">ff_opus_rc_get_raw</a>(rc, 1);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            sign = 1 - 2 * sign;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="comment">/* We use orig_fill here because we want to fold the side, but if</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">            itheta==16384, we&#39;ll have cleared the low bits of fill. */</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = pvq-&gt;<a class="code" href="struct_celt_p_v_q.html#abbf4b8ae846147b80ee19d7523397cf9">quant_band</a>(pvq, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, rc, band, x2, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, mbits, blocks, lowband, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>,</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                 lowband_out, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, gain, lowband_scratch, orig_fill);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="comment">/* We don&#39;t split N=2 bands, so cm is either 1 or 0 (for a fold-collapse),</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">            and there&#39;s no need to worry about mixing with the other channel. */</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            y2[0] = -sign * x2[1];</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            y2[1] =  sign * x2[0];</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[0] *= mid;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[1] *= mid;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[0] *= side;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[1] *= side;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            tmp = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[0];</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[0] = tmp - <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[0];</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[0] = tmp + <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[0];</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            tmp = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[1];</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[1] = tmp - <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[1];</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[1] = tmp + <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[1];</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="comment">/* &quot;Normal&quot; split code */</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="keywordtype">float</span> *next_lowband2     = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            <span class="keywordtype">float</span> *next_lowband_out1 = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <span class="keywordtype">int</span> next_level = 0;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="keywordtype">int</span> rebalance;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            uint32_t cmt;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <span class="comment">/* Give more bits to low-energy MDCTs than they would</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">             * otherwise deserve */</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &gt; 1 &amp;&amp; !stereo &amp;&amp; (itheta &amp; 0x3fff)) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                <span class="keywordflow">if</span> (itheta &gt; 8192)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                    <span class="comment">/* Rough approximation for pre-echo masking */</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                    <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> -= <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &gt;&gt; (4 - <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                    <span class="comment">/* Corresponds to a forward-masking slope of</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">                     * 1.5 dB per 10 ms */</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                    <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(0, <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> + (<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &lt;&lt; 3 &gt;&gt; (5 - <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>)));</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            mbits = av_clip((<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> - <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>) / 2, 0, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            sbits = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> - mbits;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 -= qalloc;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="keywordflow">if</span> (lowband &amp;&amp; !stereo)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                next_lowband2 = lowband + <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <span class="comment">/* &gt;32-bit split case */</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="comment">/* Only stereo needs to pass on lowband_out.</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">             * Otherwise, it&#39;s handled at the end */</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            <span class="keywordflow">if</span> (stereo)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                next_lowband_out1 = lowband_out;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                next_level = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> + 1;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            rebalance = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">if</span> (mbits &gt;= sbits) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <span class="comment">/* In stereo mode, we do not apply a scaling to the mid</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">                 * because we need the normalized mid for folding later */</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = pvq-&gt;<a class="code" href="struct_celt_p_v_q.html#abbf4b8ae846147b80ee19d7523397cf9">quant_band</a>(pvq, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, rc, band, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, mbits, blocks,</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                                     lowband, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, next_lowband_out1, next_level,</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                                     stereo ? 1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> : (gain * mid), lowband_scratch, fill);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                rebalance = mbits - (rebalance - <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <span class="keywordflow">if</span> (rebalance &gt; 3 &lt;&lt; 3 &amp;&amp; itheta != 0)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                    sbits += rebalance - (3 &lt;&lt; 3);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <span class="comment">/* For a stereo split, the high bits of fill are always zero,</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">                 * so no folding will be done to the side. */</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                cmt = pvq-&gt;<a class="code" href="struct_celt_p_v_q.html#abbf4b8ae846147b80ee19d7523397cf9">quant_band</a>(pvq, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, rc, band, <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, sbits, blocks,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                      next_lowband2, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, next_level,</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                                      gain * side, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, fill &gt;&gt; blocks);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> |= cmt &lt;&lt; ((<a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &gt;&gt; 1) &amp; (stereo - 1));</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                <span class="comment">/* For a stereo split, the high bits of fill are always zero,</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">                 * so no folding will be done to the side. */</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = pvq-&gt;<a class="code" href="struct_celt_p_v_q.html#abbf4b8ae846147b80ee19d7523397cf9">quant_band</a>(pvq, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, rc, band, <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, sbits, blocks,</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                                     next_lowband2, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, next_level,</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                                     gain * side, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, fill &gt;&gt; blocks);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> &lt;&lt;= ((<a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &gt;&gt; 1) &amp; (stereo - 1));</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                rebalance = sbits - (rebalance - <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <span class="keywordflow">if</span> (rebalance &gt; 3 &lt;&lt; 3 &amp;&amp; itheta != 16384)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    mbits += rebalance - (3 &lt;&lt; 3);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                <span class="comment">/* In stereo mode, we do not apply a scaling to the mid because</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">                 * we need the normalized mid for folding later */</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> |= pvq-&gt;<a class="code" href="struct_celt_p_v_q.html#abbf4b8ae846147b80ee19d7523397cf9">quant_band</a>(pvq, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, rc, band, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, mbits, blocks,</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                                      lowband, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, next_lowband_out1, next_level,</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                                      stereo ? 1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> : (gain * mid), lowband_scratch, fill);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="comment">/* This is the basic no-split case */</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        uint32_t q         = <a class="code" href="opus__pvq_8c.html#a9f17c9808bb89fddfcdecb9667caa159">celt_bits2pulses</a>(cache, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        uint32_t curr_bits = <a class="code" href="opus__pvq_8c.html#a6a0cfc3877b61235fb2716aed4354fc9">celt_pulses2bits</a>(cache, q);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 -= curr_bits;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="comment">/* Ensures we can never bust the budget */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 &lt; 0 &amp;&amp; q &gt; 0) {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 += curr_bits;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            curr_bits      = <a class="code" href="opus__pvq_8c.html#a6a0cfc3877b61235fb2716aed4354fc9">celt_pulses2bits</a>(cache, --q);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;remaining2 -= curr_bits;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordflow">if</span> (q != 0) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="comment">/* Finally do the actual (de)quantization */</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a>) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = <a class="code" href="opus__pvq_8c.html#a0494fa28b4c192c6c11ffd2fd2a2e934">celt_alg_quant</a>(rc, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, (q &lt; 8) ? q : (8 + (q &amp; 7)) &lt;&lt; ((q &gt;&gt; 3) - 1),</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                                    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;spread, blocks, gain, pvq);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = <a class="code" href="opus__pvq_8c.html#ae53beaadc7501655dcf54cc2126387bb">celt_alg_unquant</a>(rc, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, (q &lt; 8) ? q : (8 + (q &amp; 7)) &lt;&lt; ((q &gt;&gt; 3) - 1),</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                                      <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;spread, blocks, gain, pvq);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            <span class="comment">/* If there&#39;s no pulse, fill the band anyway */</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            uint32_t cm_mask = (1 &lt;&lt; blocks) - 1;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            fill &amp;= cm_mask;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <span class="keywordflow">if</span> (fill) {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                <span class="keywordflow">if</span> (!lowband) {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                    <span class="comment">/* Noise */</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                        <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>)<a class="code" href="opus__celt_8h.html#a01a5f958314fe61cd5e90df8495da701">celt_rng</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>)) &gt;&gt; 20);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                    <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = cm_mask;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                    <span class="comment">/* Folded spectrum */</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                        <span class="comment">/* About 48 dB below the &quot;normal&quot; folding level */</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                        <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = lowband[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + (((<a class="code" href="opus__celt_8h.html#a01a5f958314fe61cd5e90df8495da701">celt_rng</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>)) &amp; 0x8000) ? 1.0f / 256 : -1.0f / 256);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                    }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                    <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = fill;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                <a class="code" href="opus__celt_8h.html#a229037e59bafd49effcbe3c654e72a86">celt_renormalize_vector</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, gain);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                memset(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, 0, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="comment">/* This code is used by the decoder and by the resynthesis-enabled encoder */</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">if</span> (stereo) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &gt; 2)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            <a class="code" href="opus__pvq_8c.html#a3f910e261dd4c7826c9c3fd88929e8f6">celt_stereo_merge</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, mid, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">if</span> (inv) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= -1;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> == 0) {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordtype">int</span> k;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="comment">/* Undo the sample reorganization going from time order to frequency order */</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &gt; 1)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <a class="code" href="opus__pvq_8c.html#a474228d614dcd9ccbf791ee4285e66f8">celt_interleave_hadamard</a>(pvq-&gt;hadamard_tmp, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, N_B &gt;&gt; recombine,</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                                     <a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a> &lt;&lt; recombine, longblocks);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="comment">/* Undo time-freq changes that we did earlier */</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        N_B = N_B0;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        blocks = <a class="code" href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">for</span> (k = 0; k &lt; time_divide; k++) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            blocks &gt;&gt;= 1;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            N_B &lt;&lt;= 1;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> |= <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> &gt;&gt; blocks;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <a class="code" href="opus__pvq_8c.html#aa3e5b0659a8373a9f2a71f0036c81d1f">celt_haar1</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, N_B, blocks);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">for</span> (k = 0; k &lt; recombine; k++) {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = <a class="code" href="opustab_8c.html#aac22218b71ffa05df9eb347ba79bebd1">ff_celt_bit_deinterleave</a>[<a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>];</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <a class="code" href="opus__pvq_8c.html#aa3e5b0659a8373a9f2a71f0036c81d1f">celt_haar1</a>(<a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>&gt;&gt;k, 1&lt;&lt;k);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        blocks &lt;&lt;= recombine;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="comment">/* Scale output for later folding */</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">if</span> (lowband_out) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="keywordtype">float</span> n = sqrtf(<a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                lowband_out[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = n * <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = av_mod_uintp2(<a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>, blocks);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;}</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a46ee6d56559e28d08d9bc60266590464">  877</a></span>&#160;<span class="keyword">static</span> <a class="code" href="opus__pvq_8c.html#a46ee6d56559e28d08d9bc60266590464">QUANT_FN</a>(pvq_decode_band)</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;{</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="preprocessor">#if CONFIG_OPUS_DECODER</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="opus__pvq_8c.html#a73c95ca0ce852963bb20ae93df133eb5">quant_band_template</a>(pvq, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, rc, band, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, blocks, lowband, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>,</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                               lowband_out, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, gain, lowband_scratch, fill, 0);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="opus__pvq_8c.html#a0908b97fc0c15d93c4b3ea24ece8be5f">  887</a></span>&#160;<span class="keyword">static</span> <a class="code" href="opus__pvq_8c.html#a46ee6d56559e28d08d9bc60266590464">QUANT_FN</a>(pvq_encode_band)</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;{</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="preprocessor">#if CONFIG_OPUS_ENCODER</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="opus__pvq_8c.html#a73c95ca0ce852963bb20ae93df133eb5">quant_band_template</a>(pvq, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, rc, band, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a>, <a class="code" href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>, <a class="code" href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, blocks, lowband, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>,</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                               lowband_out, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, gain, lowband_scratch, fill, 1);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;}</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno"><a class="line" href="opus__pvq_8h.html#a34691225a3022ba992fb329aa335d356">  897</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <a class="code" href="opus__pvq_8c.html#a4b9e0e5765e508a8d06aca8e66bb5513">ff_celt_pvq_init</a>(<a class="code" href="struct_celt_p_v_q.html">CeltPVQ</a> **pvq, <span class="keywordtype">int</span> <a class="code" href="encode__audio_8c.html#a4883bd84aced552588972551e86d8575">encode</a>)</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;{</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="struct_celt_p_v_q.html">CeltPVQ</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_celt_p_v_q.html">CeltPVQ</a>));</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pvq_search = <a class="code" href="opus__pvq_8c.html#a0bf29958652af7200c3b638e5a3c2277">ppp_pvq_search_c</a>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quant_band = <a class="code" href="encode__audio_8c.html#a4883bd84aced552588972551e86d8575">encode</a> ? pvq_encode_band : pvq_decode_band;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (CONFIG_OPUS_ENCODER &amp;&amp; ARCH_X86)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <a class="code" href="opus__pvq_8h.html#a312b33031a4a57f8d7f314920ae39972">ff_celt_pvq_init_x86</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    *pvq = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="opus__pvq_8h.html#acf4b5eb3bfed5540727ca4140d166668">  914</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <a class="code" href="opus__pvq_8c.html#a50203575d295ccabb9ba72cfeb9004e3">ff_celt_pvq_uninit</a>(<a class="code" href="struct_celt_p_v_q.html">CeltPVQ</a> **pvq)</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;{</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(pvq);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aopustab_8c_html_a61f80d6cef441f16f02f39e1bcd2277d"><div class="ttname"><a href="opustab_8c.html#a61f80d6cef441f16f02f39e1bcd2277d">ff_celt_cache_bits</a></div><div class="ttdeci">const uint8_t ff_celt_cache_bits[392]</div><div class="ttdef"><b>Definition:</b> <a href="opustab_8c_source.html#l00888">opustab.c:888</a></div></div>
<div class="ttc" id="aopustab_8c_html_aac22218b71ffa05df9eb347ba79bebd1"><div class="ttname"><a href="opustab_8c.html#aac22218b71ffa05df9eb347ba79bebd1">ff_celt_bit_deinterleave</a></div><div class="ttdeci">const uint8_t ff_celt_bit_deinterleave[]</div><div class="ttdef"><b>Definition:</b> <a href="opustab_8c_source.html#l00936">opustab.c:936</a></div></div>
<div class="ttc" id="amace_8c_html_a08f66a6870d87afcd5dc1b60d1019692"><div class="ttname"><a href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a></div><div class="ttdeci">int stride</div><div class="ttdef"><b>Definition:</b> <a href="mace_8c_source.html#l00144">mace.c:144</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_ae78a95f598f0f999070b23dfbc6e3725"><div class="ttname"><a href="opus__pvq_8c.html#ae78a95f598f0f999070b23dfbc6e3725">celt_normalize_residual</a></div><div class="ttdeci">static void celt_normalize_residual(const int *av_restrict iy, float *av_restrict X, int N, float g)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00076">opus_pvq.c:76</a></div></div>
<div class="ttc" id="asvq3_8c_html_abbb6c7c49508c1ac374683f2d1159e08"><div class="ttname"><a href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a></div><div class="ttdeci">uint8_t level</div><div class="ttdef"><b>Definition:</b> <a href="svq3_8c_source.html#l00205">svq3.c:205</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopustab_8c_html_a7060d4341a6f7d793d30d1688645930c"><div class="ttname"><a href="opustab_8c.html#a7060d4341a6f7d793d30d1688645930c">ff_celt_qn_exp2</a></div><div class="ttdeci">const uint16_t ff_celt_qn_exp2[]</div><div class="ttdef"><b>Definition:</b> <a href="opustab_8c_source.html#l00949">opustab.c:949</a></div></div>
<div class="ttc" id="astruct_celt_p_v_q_html"><div class="ttname"><a href="struct_celt_p_v_q.html">CeltPVQ</a></div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8h_source.html#l00035">opus_pvq.h:35</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_ae53beaadc7501655dcf54cc2126387bb"><div class="ttname"><a href="opus__pvq_8c.html#ae53beaadc7501655dcf54cc2126387bb">celt_alg_unquant</a></div><div class="ttdeci">static uint32_t celt_alg_unquant(OpusRangeCoder *rc, float *X, uint32_t N, uint32_t K, enum CeltSpread spread, uint32_t blocks, float gain, CeltPVQ *pvq)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00431">opus_pvq.c:431</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a0bf29958652af7200c3b638e5a3c2277"><div class="ttname"><a href="opus__pvq_8c.html#a0bf29958652af7200c3b638e5a3c2277">ppp_pvq_search_c</a></div><div class="ttdeci">static float ppp_pvq_search_c(float *X, int *y, int K, int N)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00366">opus_pvq.c:366</a></div></div>
<div class="ttc" id="aopus__rc_8h_html_a492120faf46437986114ca65892d7765"><div class="ttname"><a href="opus__rc_8h.html#a492120faf46437986114ca65892d7765">opus_ilog</a></div><div class="ttdeci">#define opus_ilog(i)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8h_source.html#l00031">opus_rc.h:31</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_a9f761fd87b3c54869c06153a49e596d5"><div class="ttname"><a href="opus__rc_8c.html#a9f761fd87b3c54869c06153a49e596d5">ff_opus_rc_get_raw</a></div><div class="ttdeci">uint32_t ff_opus_rc_get_raw(OpusRangeCoder *rc, uint32_t count)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00140">opus_rc.c:140</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a73c95ca0ce852963bb20ae93df133eb5"><div class="ttname"><a href="opus__pvq_8c.html#a73c95ca0ce852963bb20ae93df133eb5">quant_band_template</a></div><div class="ttdeci">static av_always_inline uint32_t quant_band_template(CeltPVQ *pvq, CeltFrame *f, OpusRangeCoder *rc, const int band, float *X, float *Y, int N, int b, uint32_t blocks, float *lowband, int duration, float *lowband_out, int level, float gain, float *lowband_scratch, int fill, int quant)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00481">opus_pvq.c:481</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a11aff75a8a219c93b9485887839f2e84"><div class="ttname"><a href="opus__pvq_8c.html#a11aff75a8a219c93b9485887839f2e84">celt_cwrsi</a></div><div class="ttdeci">static uint64_t celt_cwrsi(uint32_t N, uint32_t K, uint32_t i, int *y)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00268">opus_pvq.c:268</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_a13da91efe382288f22bc9ed24b758f42"><div class="ttname"><a href="opus__rc_8c.html#a13da91efe382288f22bc9ed24b758f42">ff_opus_rc_enc_uint</a></div><div class="ttdeci">void ff_opus_rc_enc_uint(OpusRangeCoder *rc, uint32_t val, uint32_t size)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00204">opus_rc.c:204</a></div></div>
<div class="ttc" id="alibm_8h_html_a77f93d002e4f6c2d215bd96bb1f0ab4e"><div class="ttname"><a href="libm_8h.html#a77f93d002e4f6c2d215bd96bb1f0ab4e">atan2f</a></div><div class="ttdeci">#define atan2f(y, x)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00045">libm.h:45</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_aa3e5b0659a8373a9f2a71f0036c81d1f"><div class="ttname"><a href="opus__pvq_8c.html#aa3e5b0659a8373a9f2a71f0036c81d1f">celt_haar1</a></div><div class="ttdeci">static void celt_haar1(float *X, int N0, int stride)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00225">opus_pvq.c:225</a></div></div>
<div class="ttc" id="afaandct_8c_html_a8a03ef52aa4926d1d75cb647ac768622"><div class="ttname"><a href="faandct_8c.html#a8a03ef52aa4926d1d75cb647ac768622">B0</a></div><div class="ttdeci">#define B0</div><div class="ttdef"><b>Definition:</b> <a href="faandct_8c_source.html#l00040">faandct.c:40</a></div></div>
<div class="ttc" id="aopus__celt_8h_html_a6b2bf8b6b55040d3f41d48870d6f3d0caa636e8d9a58f9dde560d983ba4458425"><div class="ttname"><a href="opus__celt_8h.html#a6b2bf8b6b55040d3f41d48870d6f3d0caa636e8d9a58f9dde560d983ba4458425">CELT_SPREAD_NONE</a></div><div class="ttdeci">@ CELT_SPREAD_NONE</div><div class="ttdef"><b>Definition:</b> <a href="opus__celt_8h_source.html#l00050">opus_celt.h:50</a></div></div>
<div class="ttc" id="ainput_8c_html_ad6cdb6a14abe3eab42eaaadc93409aec"><div class="ttname"><a href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a></div><div class="ttdeci">#define b</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00041">input.c:41</a></div></div>
<div class="ttc" id="aopustab_8c_html_a16fa69f8dc1b87769ac91167a6d90578"><div class="ttname"><a href="opustab_8c.html#a16fa69f8dc1b87769ac91167a6d90578">ff_celt_log_freq_range</a></div><div class="ttdeci">const uint8_t ff_celt_log_freq_range[]</div><div class="ttdef"><b>Definition:</b> <a href="opustab_8c_source.html#l00774">opustab.c:774</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a59e92b5419f5772fa00893518a370bc4"><div class="ttname"><a href="opus__pvq_8c.html#a59e92b5419f5772fa00893518a370bc4">celt_stereo_is_decouple</a></div><div class="ttdeci">static void celt_stereo_is_decouple(float *X, float *Y, float e_l, float e_r, int N)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00461">opus_pvq.c:461</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a88aebe858f4d058966af41de4e8d2327"><div class="ttname"><a href="opus__pvq_8c.html#a88aebe858f4d058966af41de4e8d2327">celt_exp_rotation_impl</a></div><div class="ttdeci">static void celt_exp_rotation_impl(float *X, uint32_t len, uint32_t stride, float c, float s)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00084">opus_pvq.c:84</a></div></div>
<div class="ttc" id="aopustab_8c_html_a3d101f3f319cdb3adb0a949d9d52e7ea"><div class="ttname"><a href="opustab_8c.html#a3d101f3f319cdb3adb0a949d9d52e7ea">ff_celt_hadamard_order</a></div><div class="ttdeci">const uint8_t ff_celt_hadamard_order[]</div><div class="ttdef"><b>Definition:</b> <a href="opustab_8c_source.html#l00941">opustab.c:941</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_adc5ec4620084b11046e21d27ef70dc6d"><div class="ttname"><a href="opus__pvq_8c.html#adc5ec4620084b11046e21d27ef70dc6d">celt_calc_theta</a></div><div class="ttdeci">static int celt_calc_theta(const float *X, const float *Y, int coupling, int N)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00443">opus_pvq.c:443</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a36ddedccc95d71e335766d721a364db3"><div class="ttname"><a href="opus__pvq_8c.html#a36ddedccc95d71e335766d721a364db3">celt_decode_pulses</a></div><div class="ttdeci">static float celt_decode_pulses(OpusRangeCoder *rc, int *y, uint32_t N, uint32_t K)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00356">opus_pvq.c:356</a></div></div>
<div class="ttc" id="avf__pp7_8c_html_acd864640121c7df2c19f61f7baa507e4"><div class="ttname"><a href="vf__pp7_8c.html#acd864640121c7df2c19f61f7baa507e4">N2</a></div><div class="ttdeci">#define N2</div><div class="ttdef"><b>Definition:</b> <a href="vf__pp7_8c_source.html#l00069">vf_pp7.c:69</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a46ee6d56559e28d08d9bc60266590464"><div class="ttname"><a href="opus__pvq_8c.html#a46ee6d56559e28d08d9bc60266590464">QUANT_FN</a></div><div class="ttdeci">static QUANT_FN(pvq_decode_band)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00877">opus_pvq.c:877</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a4b9e0e5765e508a8d06aca8e66bb5513"><div class="ttname"><a href="opus__pvq_8c.html#a4b9e0e5765e508a8d06aca8e66bb5513">ff_celt_pvq_init</a></div><div class="ttdeci">int av_cold ff_celt_pvq_init(CeltPVQ **pvq, int encode)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00897">opus_pvq.c:897</a></div></div>
<div class="ttc" id="aopustab_8c_html_a2a6a301bf0a21249f64fdc480eb650ff"><div class="ttname"><a href="opustab_8c.html#a2a6a301bf0a21249f64fdc480eb650ff">ff_celt_pvq_u_row</a></div><div class="ttdeci">const uint32_t *const ff_celt_pvq_u_row[15]</div><div class="ttdef"><b>Definition:</b> <a href="opustab_8c_source.html#l01155">opustab.c:1155</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a2702575156dad339aeeaebe414e9b615"><div class="ttname"><a href="opus__pvq_8c.html#a2702575156dad339aeeaebe414e9b615">celt_exp_rotation</a></div><div class="ttdeci">static void celt_exp_rotation(float *X, uint32_t len, uint32_t stride, uint32_t K, enum CeltSpread spread, const int encode)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00107">opus_pvq.c:107</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a892875548a4bb54a45e4144c52606651"><div class="ttname"><a href="opus__pvq_8c.html#a892875548a4bb54a45e4144c52606651">celt_log2tan</a></div><div class="ttdeci">static int celt_log2tan(int isin, int icos)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00039">opus_pvq.c:39</a></div></div>
<div class="ttc" id="alibm_8h_html_a4feea5aac9457df2db706f1065f0b28b"><div class="ttname"><a href="libm_8h.html#a4feea5aac9457df2db706f1065f0b28b">cosf</a></div><div class="ttdeci">#define cosf(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00078">libm.h:78</a></div></div>
<div class="ttc" id="acommon_8h_html_af5e4ff7761996bc901e59bd59756268d"><div class="ttname"><a href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a></div><div class="ttdeci">#define FFSIGN(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00073">common.h:73</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba58833a3110c570fb05130d40c365d1e4">X</a></div><div class="ttdeci">@ X</div><div class="ttdef"><b>Definition:</b> <a href="vf__addroi_8c_source.html#l00026">vf_addroi.c:26</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a6a0cfc3877b61235fb2716aed4354fc9"><div class="ttname"><a href="opus__pvq_8c.html#a6a0cfc3877b61235fb2716aed4354fc9">celt_pulses2bits</a></div><div class="ttdeci">static int celt_pulses2bits(const uint8_t *cache, int pulses)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00070">opus_pvq.c:70</a></div></div>
<div class="ttc" id="aaeval_8c_html_a16aca557f352132b55bbc3c4769daa8b"><div class="ttname"><a href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a></div><div class="ttdeci">static double val(void *priv, double ch)</div><div class="ttdef"><b>Definition:</b> <a href="aeval_8c_source.html#l00076">aeval.c:76</a></div></div>
<div class="ttc" id="acommon_8h_html_af6afbffa12562b076c34055bdcb3ad65"><div class="ttname"><a href="common_8h.html#af6afbffa12562b076c34055bdcb3ad65">FFMIN3</a></div><div class="ttdeci">#define FFMIN3(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00097">common.h:97</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a9f17c9808bb89fddfcdecb9667caa159"><div class="ttname"><a href="opus__pvq_8c.html#a9f17c9808bb89fddfcdecb9667caa159">celt_bits2pulses</a></div><div class="ttdeci">static int celt_bits2pulses(const uint8_t *cache, int bits)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00051">opus_pvq.c:51</a></div></div>
<div class="ttc" id="aopus__celt_8h_html_a229037e59bafd49effcbe3c654e72a86"><div class="ttname"><a href="opus__celt_8h.html#a229037e59bafd49effcbe3c654e72a86">celt_renormalize_vector</a></div><div class="ttdeci">static av_always_inline void celt_renormalize_vector(float *X, int N, float gain)</div><div class="ttdef"><b>Definition:</b> <a href="opus__celt_8h_source.html#l00149">opus_celt.h:149</a></div></div>
<div class="ttc" id="astruct_opus_range_coder_html"><div class="ttname"><a href="struct_opus_range_coder.html">OpusRangeCoder</a></div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8h_source.html#l00040">opus_rc.h:40</a></div></div>
<div class="ttc" id="amathops_8h_html_a22c70c3b9c3c05bad0d5ff51e7ebb3fa"><div class="ttname"><a href="mathops_8h.html#a22c70c3b9c3c05bad0d5ff51e7ebb3fa">MUL16</a></div><div class="ttdeci">#define MUL16(ra, rb)</div><div class="ttdef"><b>Definition:</b> <a href="mathops_8h_source.html#l00088">mathops.h:88</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1f342e4e3615abc9314684ce6b4819c0"><div class="ttname"><a href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00063">movenc.c:63</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_ac8597585bee1ca3cc7a29e28d6b71feb"><div class="ttname"><a href="opus__pvq_8c.html#ac8597585bee1ca3cc7a29e28d6b71feb">CELT_PVQ_U</a></div><div class="ttdeci">#define CELT_PVQ_U(n, k)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00029">opus_pvq.c:29</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_a11570adec89b51f06a5bfbd1d98c68b5"><div class="ttname"><a href="opus__rc_8c.html#a11570adec89b51f06a5bfbd1d98c68b5">ff_opus_rc_dec_uint</a></div><div class="ttdeci">uint32_t ff_opus_rc_dec_uint(OpusRangeCoder *rc, uint32_t size)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00182">opus_rc.c:182</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a0494fa28b4c192c6c11ffd2fd2a2e934"><div class="ttname"><a href="opus__pvq_8c.html#a0494fa28b4c192c6c11ffd2fd2a2e934">celt_alg_quant</a></div><div class="ttdeci">static uint32_t celt_alg_quant(OpusRangeCoder *rc, float *X, uint32_t N, uint32_t K, enum CeltSpread spread, uint32_t blocks, float gain, CeltPVQ *pvq)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00415">opus_pvq.c:415</a></div></div>
<div class="ttc" id="avf__curves_8c_html_a1b5e77b92dea40e646b2e7e196e0b322"><div class="ttname"><a href="vf__curves_8c.html#a1b5e77b92dea40e646b2e7e196e0b322">g</a></div><div class="ttdeci">const char * g</div><div class="ttdef"><b>Definition:</b> <a href="vf__curves_8c_source.html#l00115">vf_curves.c:115</a></div></div>
<div class="ttc" id="astruct_celt_p_v_q_html_af2497a3fae9405bd5650fe9bc5e141ed"><div class="ttname"><a href="struct_celt_p_v_q.html#af2497a3fae9405bd5650fe9bc5e141ed">CeltPVQ::pvq_search</a></div><div class="ttdeci">float(* pvq_search)(float *X, int *y, int K, int N)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8h_source.html#l00039">opus_pvq.h:39</a></div></div>
<div class="ttc" id="avp3data_8h_html_a46a6da6b1936191571fd30b2a749f38c"><div class="ttname"><a href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a></div><div class="ttdeci">uint8_t bits</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00202">vp3data.h:202</a></div></div>
<div class="ttc" id="aopus__celt_8h_html_a276137ca908e85157fb6a370e29631ba"><div class="ttname"><a href="opus__celt_8h.html#a276137ca908e85157fb6a370e29631ba">CELT_QTHETA_OFFSET_TWOPHASE</a></div><div class="ttdeci">#define CELT_QTHETA_OFFSET_TWOPHASE</div><div class="ttdef"><b>Definition:</b> <a href="opus__celt_8h_source.html#l00043">opus_celt.h:43</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_a34f9fcd2a14705c1189fe2a8feee097e"><div class="ttname"><a href="opus__rc_8c.html#a34f9fcd2a14705c1189fe2a8feee097e">ff_opus_rc_enc_uint_tri</a></div><div class="ttdeci">void ff_opus_rc_enc_uint_tri(OpusRangeCoder *rc, uint32_t k, int qn)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00258">opus_rc.c:258</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a08ac55ab697f7db293c7ef8ff083e6eb"><div class="ttname"><a href="opus__pvq_8c.html#a08ac55ab697f7db293c7ef8ff083e6eb">celt_icwrsi</a></div><div class="ttdeci">static uint32_t celt_icwrsi(uint32_t N, uint32_t K, const int *y)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00256">opus_pvq.c:256</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="aavdct_8c_html_a07484107e6d9fdf38b53edf631d6511d"><div class="ttname"><a href="avdct_8c.html#a07484107e6d9fdf38b53edf631d6511d">E</a></div><div class="ttdeci">#define E</div><div class="ttdef"><b>Definition:</b> <a href="avdct_8c_source.html#l00032">avdct.c:32</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_afd12020da5a235dfcf0c3c748fb5baed"><div class="ttname"><a href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a></div><div class="ttdeci">int32_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="aopustab_8c_html_a72c3bca6d80763464dea0d6932e40a31"><div class="ttname"><a href="opustab_8c.html#a72c3bca6d80763464dea0d6932e40a31">ff_celt_cache_index</a></div><div class="ttdeci">const int16_t ff_celt_cache_index[105]</div><div class="ttdef"><b>Definition:</b> <a href="opustab_8c_source.html#l00918">opustab.c:918</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a50203575d295ccabb9ba72cfeb9004e3"><div class="ttname"><a href="opus__pvq_8c.html#a50203575d295ccabb9ba72cfeb9004e3">ff_celt_pvq_uninit</a></div><div class="ttdeci">void av_cold ff_celt_pvq_uninit(CeltPVQ **pvq)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00914">opus_pvq.c:914</a></div></div>
<div class="ttc" id="aopus_8h_html_ab20adf1ddf763aaffdcfe2389c68a6e8"><div class="ttname"><a href="opus_8h.html#ab20adf1ddf763aaffdcfe2389c68a6e8">CELT_MAX_BANDS</a></div><div class="ttdeci">#define CELT_MAX_BANDS</div><div class="ttdef"><b>Definition:</b> <a href="opus_8h_source.html#l00045">opus.h:45</a></div></div>
<div class="ttc" id="aopus__celt_8h_html_a73a2cf3bc9951fa014a594ac769076e2"><div class="ttname"><a href="opus__celt_8h.html#a73a2cf3bc9951fa014a594ac769076e2">CELT_QTHETA_OFFSET</a></div><div class="ttdeci">#define CELT_QTHETA_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="opus__celt_8h_source.html#l00042">opus_celt.h:42</a></div></div>
<div class="ttc" id="alibm_8h_html_a403b30a3b20ba833b366b9d61cfdd3d2"><div class="ttname"><a href="libm_8h.html#a403b30a3b20ba833b366b9d61cfdd3d2">sinf</a></div><div class="ttdeci">#define sinf(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00419">libm.h:419</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_a903a739d10307be3f3ed48709dba5db2"><div class="ttname"><a href="opus__rc_8c.html#a903a739d10307be3f3ed48709dba5db2">ff_opus_rc_dec_uint_tri</a></div><div class="ttdeci">uint32_t ff_opus_rc_dec_uint_tri(OpusRangeCoder *rc, int qn)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00234">opus_rc.c:234</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a24e19a560f0edc8a9a49ac4518189b8d"><div class="ttname"><a href="opus__pvq_8c.html#a24e19a560f0edc8a9a49ac4518189b8d">celt_deinterleave_hadamard</a></div><div class="ttdeci">static void celt_deinterleave_hadamard(float *tmp, float *X, int N0, int stride, int hadamard)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00212">opus_pvq.c:212</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="aopustab_8h_html"><div class="ttname"><a href="opustab_8h.html">opustab.h</a></div></div>
<div class="ttc" id="astruct_celt_p_v_q_html_abbf4b8ae846147b80ee19d7523397cf9"><div class="ttname"><a href="struct_celt_p_v_q.html#abbf4b8ae846147b80ee19d7523397cf9">CeltPVQ::quant_band</a></div><div class="ttdeci">QUANT_FN * quant_band</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8h_source.html#l00040">opus_pvq.h:40</a></div></div>
<div class="ttc" id="aopus__pvq_8h_html"><div class="ttname"><a href="opus__pvq_8h.html">opus_pvq.h</a></div></div>
<div class="ttc" id="avf__pp7_8c_html_a248f08b5e77b891677f51fc447ab06cc"><div class="ttname"><a href="vf__pp7_8c.html#a248f08b5e77b891677f51fc447ab06cc">N0</a></div><div class="ttdeci">#define N0</div><div class="ttdef"><b>Definition:</b> <a href="vf__pp7_8c_source.html#l00067">vf_pp7.c:67</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_aac045e54677f9fdd9c0856664432b0c7"><div class="ttname"><a href="opus__pvq_8c.html#aac045e54677f9fdd9c0856664432b0c7">celt_cos</a></div><div class="ttdeci">static int16_t celt_cos(int16_t x)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00032">opus_pvq.c:32</a></div></div>
<div class="ttc" id="aaf__channelmap_8c_html_ad79bfa4ac7a887fff6b118ca6e77ad27"><div class="ttname"><a href="af__channelmap_8c.html#ad79bfa4ac7a887fff6b118ca6e77ad27">split</a></div><div class="ttdeci">static char * split(char *message, char delim)</div><div class="ttdef"><b>Definition:</b> <a href="af__channelmap_8c_source.html#l00081">af_channelmap.c:81</a></div></div>
<div class="ttc" id="aopus__celt_8h_html_a01a5f958314fe61cd5e90df8495da701"><div class="ttname"><a href="opus__celt_8h.html#a01a5f958314fe61cd5e90df8495da701">celt_rng</a></div><div class="ttdeci">static av_always_inline uint32_t celt_rng(CeltFrame *f)</div><div class="ttdef"><b>Definition:</b> <a href="opus__celt_8h_source.html#l00143">opus_celt.h:143</a></div></div>
<div class="ttc" id="aencode__audio_8c_html_a4883bd84aced552588972551e86d8575"><div class="ttname"><a href="encode__audio_8c.html#a4883bd84aced552588972551e86d8575">encode</a></div><div class="ttdeci">static void encode(AVCodecContext *ctx, AVFrame *frame, AVPacket *pkt, FILE *output)</div><div class="ttdef"><b>Definition:</b> <a href="encode__audio_8c_source.html#l00095">encode_audio.c:95</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="aaf__mcompand_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="af__mcompand_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div><div class="ttdef"><b>Definition:</b> <a href="af__mcompand_8c_source.html#l00054">af_mcompand.c:54</a></div></div>
<div class="ttc" id="aopus_8h_html_abaf3cb1208e8b01dfa0ee8caf5719287"><div class="ttname"><a href="opus_8h.html#abaf3cb1208e8b01dfa0ee8caf5719287">ROUND_MUL16</a></div><div class="ttdeci">#define ROUND_MUL16(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="opus_8h_source.html#l00051">opus.h:51</a></div></div>
<div class="ttc" id="amathematics_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00052">mathematics.h:52</a></div></div>
<div class="ttc" id="aboxblur_8h_html_a798e4073d613ca5ba9618e1b3253df14"><div class="ttname"><a href="boxblur_8h.html#a798e4073d613ca5ba9618e1b3253df14">Y</a></div><div class="ttdeci">#define Y</div><div class="ttdef"><b>Definition:</b> <a href="boxblur_8h_source.html#l00038">boxblur.h:38</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_a2c47e392724e6f7c4ddc31b2858f72c9"><div class="ttname"><a href="opus__rc_8c.html#a2c47e392724e6f7c4ddc31b2858f72c9">ff_opus_rc_enc_uint_step</a></div><div class="ttdeci">void ff_opus_rc_enc_uint_step(OpusRangeCoder *rc, uint32_t val, int k0)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00226">opus_rc.c:226</a></div></div>
<div class="ttc" id="astruct_celt_frame_html"><div class="ttname"><a href="struct_celt_frame.html">CeltFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="opus__celt_8h_source.html#l00092">opus_celt.h:92</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="alibm__mips_8h_html_acf57fc15cac2891669e0f0a0be2fb155"><div class="ttname"><a href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a></div><div class="ttdeci">#define lrintf(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm__mips_8h_source.html#l00070">libm_mips.h:70</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_a5df2c36cb9295932df4dd60acef1ecbd"><div class="ttname"><a href="opus__rc_8c.html#a5df2c36cb9295932df4dd60acef1ecbd">ff_opus_rc_put_raw</a></div><div class="ttdeci">void ff_opus_rc_put_raw(OpusRangeCoder *rc, uint32_t val, uint32_t count)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00161">opus_rc.c:161</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_a1ee4a05b54419bfadd66ee351d05812e"><div class="ttname"><a href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a></div><div class="ttdeci">float delta</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00457">vorbis_enc_data.h:457</a></div></div>
<div class="ttc" id="aattributes_8h_html_a28f50f4c125959216885f01d56dbe866"><div class="ttname"><a href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a></div><div class="ttdeci">#define av_always_inline</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00049">attributes.h:49</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a09f9d0cee65cb17a34e6e6d313c44b76"><div class="ttname"><a href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf default value</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a2938597c0b14f4b7794f041299c74cfe"><div class="ttname"><a href="opus__pvq_8c.html#a2938597c0b14f4b7794f041299c74cfe">celt_encode_pulses</a></div><div class="ttdeci">static void celt_encode_pulses(OpusRangeCoder *rc, int *y, uint32_t N, uint32_t K)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00351">opus_pvq.c:351</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="aopus__rc_8h_html_ab5248728fbce196929cdb96c7fd31dc6"><div class="ttname"><a href="opus__rc_8h.html#ab5248728fbce196929cdb96c7fd31dc6">opus_rc_tell_frac</a></div><div class="ttdeci">static av_always_inline uint32_t opus_rc_tell_frac(const OpusRangeCoder *rc)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8h_source.html#l00066">opus_rc.h:66</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_a2a99d34c1f497e54c1b3c6683591afce"><div class="ttname"><a href="opus__rc_8c.html#a2a99d34c1f497e54c1b3c6683591afce">ff_opus_rc_dec_uint_step</a></div><div class="ttdeci">uint32_t ff_opus_rc_dec_uint_step(OpusRangeCoder *rc, int k0)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00211">opus_rc.c:211</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a3f910e261dd4c7826c9c3fd88929e8f6"><div class="ttname"><a href="opus__pvq_8c.html#a3f910e261dd4c7826c9c3fd88929e8f6">celt_stereo_merge</a></div><div class="ttdeci">static void celt_stereo_merge(float *X, float *Y, float mid, int N)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00161">opus_pvq.c:161</a></div></div>
<div class="ttc" id="amathematics_8h_html_acdbb2c2f9429f08916f03c8786d2d2d7"><div class="ttname"><a href="mathematics_8h.html#acdbb2c2f9429f08916f03c8786d2d2d7">M_SQRT1_2</a></div><div class="ttdeci">#define M_SQRT1_2</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00058">mathematics.h:58</a></div></div>
<div class="ttc" id="ahuffyuvdsp_8h_html_a111da81ae5883147168bbb8366377b10"><div class="ttname"><a href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a></div><div class="ttdeci">#define B</div><div class="ttdef"><b>Definition:</b> <a href="huffyuvdsp_8h_source.html#l00032">huffyuvdsp.h:32</a></div></div>
<div class="ttc" id="aopus__celt_8h_html_a6b2bf8b6b55040d3f41d48870d6f3d0c"><div class="ttname"><a href="opus__celt_8h.html#a6b2bf8b6b55040d3f41d48870d6f3d0c">CeltSpread</a></div><div class="ttdeci">CeltSpread</div><div class="ttdef"><b>Definition:</b> <a href="opus__celt_8h_source.html#l00049">opus_celt.h:49</a></div></div>
<div class="ttc" id="advbsubdec_8c_html_a583257b7c70608a95289b0a109197ca3"><div class="ttname"><a href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a></div><div class="ttdeci">#define cm</div><div class="ttdef"><b>Definition:</b> <a href="dvbsubdec_8c_source.html#l00037">dvbsubdec.c:37</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_aa298a2a818146a4349761d92054529cf"><div class="ttname"><a href="opus__rc_8c.html#aa298a2a818146a4349761d92054529cf">ff_opus_rc_enc_log</a></div><div class="ttdeci">void ff_opus_rc_enc_log(OpusRangeCoder *rc, int val, uint32_t bits)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00131">opus_rc.c:131</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_ab3b2c51f59e94f789558a37463b68402"><div class="ttname"><a href="opus__pvq_8c.html#ab3b2c51f59e94f789558a37463b68402">celt_compute_qn</a></div><div class="ttdeci">static int celt_compute_qn(int N, int b, int offset, int pulse_cap, int stereo)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00239">opus_pvq.c:239</a></div></div>
<div class="ttc" id="aopus__pvq_8h_html_a312b33031a4a57f8d7f314920ae39972"><div class="ttname"><a href="opus__pvq_8h.html#a312b33031a4a57f8d7f314920ae39972">ff_celt_pvq_init_x86</a></div><div class="ttdeci">void ff_celt_pvq_init_x86(struct CeltPVQ *s)</div><div class="ttdef"><b>Definition:</b> <a href="celt__pvq__init_8c_source.html#l00031">celt_pvq_init.c:31</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a474228d614dcd9ccbf791ee4285e66f8"><div class="ttname"><a href="opus__pvq_8c.html#a474228d614dcd9ccbf791ee4285e66f8">celt_interleave_hadamard</a></div><div class="ttdeci">static void celt_interleave_hadamard(float *tmp, float *X, int N0, int stride, int hadamard)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00199">opus_pvq.c:199</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_a0ec8e44e0e296a1e3307a1436a0f0fdf"><div class="ttname"><a href="vorbis__enc__data_8h.html#a0ec8e44e0e296a1e3307a1436a0f0fdf">quant</a></div><div class="ttdeci">const uint8_t * quant</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00458">vorbis_enc_data.h:458</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="aopustab_8c_html_a24d89115862425cbc4df5662a3cd0bff"><div class="ttname"><a href="opustab_8c.html#a24d89115862425cbc4df5662a3cd0bff">ff_celt_bit_interleave</a></div><div class="ttdeci">const uint8_t ff_celt_bit_interleave[]</div><div class="ttdef"><b>Definition:</b> <a href="opustab_8c_source.html#l00932">opustab.c:932</a></div></div>
<div class="ttc" id="aopus__rc_8c_html_a8723a6f5c670b13f0dd2fcbb405c07e8"><div class="ttname"><a href="opus__rc_8c.html#a8723a6f5c670b13f0dd2fcbb405c07e8">ff_opus_rc_dec_log</a></div><div class="ttdeci">uint32_t ff_opus_rc_dec_log(OpusRangeCoder *rc, uint32_t bits)</div><div class="ttdef"><b>Definition:</b> <a href="opus__rc_8c_source.html#l00114">opus_rc.c:114</a></div></div>
<div class="ttc" id="ag723__1_8h_html_ae7066a3dd30231dccbc429b70615a5a7"><div class="ttname"><a href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a></div><div class="ttdeci">static const int8_t pulses[4]</div><div class="ttdef"><b>Definition:</b> <a href="g723__1_8h_source.html#l00723">g723_1.h:723</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a7d3b17cea5ff66f2a77988f9c331bfff"><div class="ttname"><a href="opus__pvq_8c.html#a7d3b17cea5ff66f2a77988f9c331bfff">celt_extract_collapse_mask</a></div><div class="ttdeci">static uint32_t celt_extract_collapse_mask(const int *iy, uint32_t N, uint32_t B)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00147">opus_pvq.c:147</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a1a427aea4c90c457af9d80d61071539b"><div class="ttname"><a href="opus__pvq_8c.html#a1a427aea4c90c457af9d80d61071539b">celt_stereo_ms_decouple</a></div><div class="ttdeci">static void celt_stereo_ms_decouple(float *X, float *Y, int N)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00471">opus_pvq.c:471</a></div></div>
<div class="ttc" id="aopus__pvq_8c_html_a6dc6bb78d0068ee6f11beae094beb5ae"><div class="ttname"><a href="opus__pvq_8c.html#a6dc6bb78d0068ee6f11beae094beb5ae">CELT_PVQ_V</a></div><div class="ttdeci">#define CELT_PVQ_V(n, k)</div><div class="ttdef"><b>Definition:</b> <a href="opus__pvq_8c_source.html#l00030">opus_pvq.c:30</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
