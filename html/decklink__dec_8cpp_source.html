<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavdevice/decklink_dec.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_48592b5c3a3534c0c7026c4e6bbb7be4.html">libavdevice</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">decklink_dec.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="decklink__dec_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Blackmagic DeckLink input</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2013-2014 Luca Barbato, Deti Fliegl</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2014 Rafaël Carré</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (c) 2017 Akamai Technologies, Inc.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using</span> std::atomic;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* Include internal.h first to avoid conflict between winsock.h (used by</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * DeckLink headers) and winsock2.h (used by libavformat) in MSVC++ builds */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavformat_2internal_8h.html">libavformat/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;DeckLinkAPI.h&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;config.h&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avformat_8h.html">libavformat/avformat.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avutil_8h.html">libavutil/avutil.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">libavutil/common.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="intreadwrite_8h.html">libavutil/intreadwrite.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="time_8h.html">libavutil/time.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timecode_8h.html">libavutil/timecode.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mathematics_8h.html">libavutil/mathematics.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="reverse_8h.html">libavutil/reverse.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avdevice_8h.html">avdevice.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#if CONFIG_LIBZVBI</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;libzvbi.h&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="decklink__common_8h.html">decklink_common.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="decklink__dec_8h.html">decklink_dec.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#ab951888caf2c88d9003ace49ee030cb3">   57</a></span>&#160;<span class="preprocessor">#define MAX_WIDTH_VANC 1920</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a95077f77cf6aa78830ef285af2051aeb">   58</a></span>&#160;<span class="keyword">const</span> BMDDisplayMode <a class="code" href="decklink__dec_8cpp.html#a95077f77cf6aa78830ef285af2051aeb">AUTODETECT_DEFAULT_MODE</a> = bmdModeNTSC;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="struct_v_a_n_c_line_number.html">   60</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_v_a_n_c_line_number.html">VANCLineNumber</a> {</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="struct_v_a_n_c_line_number.html#a827cdf5599764157993de8265300efe9">   61</a></span>&#160;    BMDDisplayMode <a class="code" href="struct_v_a_n_c_line_number.html#a827cdf5599764157993de8265300efe9">mode</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="struct_v_a_n_c_line_number.html#abd22e293e8cd922f8324a6252e603a8b">   62</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_n_c_line_number.html#abd22e293e8cd922f8324a6252e603a8b">vanc_start</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="struct_v_a_n_c_line_number.html#a7f905dec2b38ea5a7b513900ac6ec00f">   63</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_n_c_line_number.html#a7f905dec2b38ea5a7b513900ac6ec00f">field0_vanc_end</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="struct_v_a_n_c_line_number.html#aa098e641fd6ebea5e0c40280acdc32b0">   64</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_n_c_line_number.html#aa098e641fd6ebea5e0c40280acdc32b0">field1_vanc_start</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_v_a_n_c_line_number.html#aa8a04ad63056a29b07a133cc97a4e465">   65</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_v_a_n_c_line_number.html#aa8a04ad63056a29b07a133cc97a4e465">vanc_end</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#aa544ec7bf909ee280c59cb6e0209d7ea">   66</a></span>&#160;} <a class="code" href="decklink__dec_8cpp.html#aa544ec7bf909ee280c59cb6e0209d7ea">VANCLineNumber</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/* These VANC line numbers need not be very accurate. In any case</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> * GetBufferForVerticalBlankingLine() will return an error when invalid</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> * ancillary line number was requested. We just need to make sure that the</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> * entire VANC region is covered, while making sure we don&#39;t decode VANC of</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> * another source during switching*/</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a0ce5e7a8b047e16f46aff6e302986c0c">   73</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_v_a_n_c_line_number.html">VANCLineNumber</a> <a class="code" href="decklink__dec_8cpp.html#a0ce5e7a8b047e16f46aff6e302986c0c">vanc_line_numbers</a>[] = {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">/* SD Modes */</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    {bmdModeNTSC, 11, 19, 274, 282},</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    {bmdModeNTSC2398, 11, 19, 274, 282},</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    {bmdModePAL, 7, 22, 320, 335},</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    {bmdModeNTSCp, 11, -1, -1, 39},</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    {bmdModePALp, 7, -1, -1, 45},</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">/* HD 1080 Modes */</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    {bmdModeHD1080p2398, 8, -1, -1, 42},</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    {bmdModeHD1080p24, 8, -1, -1, 42},</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {bmdModeHD1080p25, 8, -1, -1, 42},</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    {bmdModeHD1080p2997, 8, -1, -1, 42},</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    {bmdModeHD1080p30, 8, -1, -1, 42},</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    {bmdModeHD1080i50, 8, 20, 570, 585},</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    {bmdModeHD1080i5994, 8, 20, 570, 585},</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    {bmdModeHD1080i6000, 8, 20, 570, 585},</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    {bmdModeHD1080p50, 8, -1, -1, 42},</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    {bmdModeHD1080p5994, 8, -1, -1, 42},</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {bmdModeHD1080p6000, 8, -1, -1, 42},</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;     <span class="comment">/* HD 720 Modes */</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    {bmdModeHD720p50, 8, -1, -1, 26},</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {bmdModeHD720p5994, 8, -1, -1, 26},</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    {bmdModeHD720p60, 8, -1, -1, 26},</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">/* For all other modes, for which we don&#39;t support VANC */</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    {bmdModeUnknown, 0, -1, -1, -1}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;};</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html">  106</a></span>&#160;<span class="keyword">class </span><a class="code" href="classdecklink__allocator.html">decklink_allocator</a> : <span class="keyword">public</span> IDeckLinkMemoryAllocator</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#a80b1dbd116c561a9344c5844b92471af">  109</a></span>&#160;        <a class="code" href="classdecklink__allocator.html#a80b1dbd116c561a9344c5844b92471af">decklink_allocator</a>(): <a class="code" href="classdecklink__allocator.html#ad09b7e8904f64e9e3ccbd5ce038a02b0">_refs</a>(1) { }</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#a3bec26c295f39822d0bcdae7b7fc35b3">  110</a></span>&#160;        <span class="keyword">virtual</span> <a class="code" href="classdecklink__allocator.html#a3bec26c295f39822d0bcdae7b7fc35b3">~decklink_allocator</a>() { }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="comment">// IDeckLinkMemoryAllocator methods</span></div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#abc649efb1d0e1d2d37e373861d052902">  113</a></span>&#160;        <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__allocator.html#abc649efb1d0e1d2d37e373861d052902">AllocateBuffer</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bufferSize, <span class="keywordtype">void</span>* *allocatedBuffer)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordtype">void</span> *buf = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(bufferSize + <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">if</span> (!buf)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                <span class="keywordflow">return</span> E_OUTOFMEMORY;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            *allocatedBuffer = buf;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        }</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#ad219dfbfb88b085e97d41bde1055bd57">  121</a></span>&#160;        <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__allocator.html#ad219dfbfb88b085e97d41bde1055bd57">ReleaseBuffer</a>(<span class="keywordtype">void</span>* <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        }</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#a06629a0f1b83f41f88e44ef111dd42e0">  126</a></span>&#160;        <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__allocator.html#a06629a0f1b83f41f88e44ef111dd42e0">Commit</a>() { <span class="keywordflow">return</span> S_OK; }</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#a0516fd992df1d700d4c2f5dac03c20b2">  127</a></span>&#160;        <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__allocator.html#a0516fd992df1d700d4c2f5dac03c20b2">Decommit</a>() { <span class="keywordflow">return</span> S_OK; }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="comment">// IUnknown methods</span></div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#a02a2b0b2115f6e3e13e212f892be918b">  130</a></span>&#160;        <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__allocator.html#a02a2b0b2115f6e3e13e212f892be918b">QueryInterface</a>(REFIID iid, LPVOID *ppv) { <span class="keywordflow">return</span> E_NOINTERFACE; }</div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#a5cff127fb30353fefc3c713560ab4457">  131</a></span>&#160;        <span class="keyword">virtual</span> ULONG   STDMETHODCALLTYPE <a class="code" href="classdecklink__allocator.html#a5cff127fb30353fefc3c713560ab4457">AddRef</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> ++<a class="code" href="classdecklink__allocator.html#ad09b7e8904f64e9e3ccbd5ce038a02b0">_refs</a>; }</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#a5ada2d82f9b95a681e8fde59590af00f">  132</a></span>&#160;        <span class="keyword">virtual</span> ULONG   STDMETHODCALLTYPE <a class="code" href="classdecklink__allocator.html#a5ada2d82f9b95a681e8fde59590af00f">Release</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = --<a class="code" href="classdecklink__allocator.html#ad09b7e8904f64e9e3ccbd5ce038a02b0">_refs</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keyword">delete</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classdecklink__allocator.html#ad09b7e8904f64e9e3ccbd5ce038a02b0">  141</a></span>&#160;        std::atomic&lt;int&gt;  <a class="code" href="classdecklink__allocator.html#ad09b7e8904f64e9e3ccbd5ce038a02b0">_refs</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;};</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#aff1581479636bf5238686be77bf0f4fe">  145</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="decklink__dec_8cpp.html#aff1581479636bf5238686be77bf0f4fe">decklink_object_free</a>(<span class="keywordtype">void</span> *opaque, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    IUnknown *obj = (<span class="keyword">class </span>IUnknown *)opaque;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    obj-&gt;Release();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a9e66f32b6f0b4c6638a1136f114f8b86">  152</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#a9e66f32b6f0b4c6638a1136f114f8b86">get_vanc_line_idx</a>(BMDDisplayMode <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="decklink__dec_8cpp.html#a0ce5e7a8b047e16f46aff6e302986c0c">vanc_line_numbers</a>); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> == <a class="code" href="decklink__dec_8cpp.html#a0ce5e7a8b047e16f46aff6e302986c0c">vanc_line_numbers</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">/* Return the VANC idx for Unknown mode */</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a8eaa5b3b223101eba57c9363313fb418">  163</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="decklink__dec_8cpp.html#a8eaa5b3b223101eba57c9363313fb418">clear_parity_bits</a>(uint16_t *buf, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp;= 0xff;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a28484f90d0900e743cc22bedff3bc02a">  169</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#a28484f90d0900e743cc22bedff3bc02a">check_vanc_parity_checksum</a>(uint16_t *buf, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, uint16_t <a class="code" href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a>) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    uint16_t vanc_sum = 0;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        uint16_t v = buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordtype">int</span> np = v &gt;&gt; 8;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordtype">int</span> p = av_parity(v &amp; 0xff);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">if</span> ((!!p ^ !!(v &amp; 0x100)) || (np != 1 &amp;&amp; np != 2)) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="comment">// Parity check failed</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        vanc_sum += v;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    vanc_sum &amp;= 0x1ff;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    vanc_sum |= ((~vanc_sum &amp; 0x100) &lt;&lt; 1);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a> != vanc_sum) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">// Checksum verification failed</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">/* The 10-bit VANC data is packed in V210, we only need the luma component. */</span></div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#aecb8976d236302490093efdc6b25e69a">  192</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="decklink__dec_8cpp.html#aecb8976d236302490093efdc6b25e69a">extract_luma_from_v210</a>(uint16_t *dst, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;{</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> / 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        *dst++ = (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[1] &gt;&gt; 2) + ((<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[2] &amp; 15) &lt;&lt; 6);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        *dst++ =  <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[4]       + ((<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[5] &amp;  3) &lt;&lt; 8);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        *dst++ = (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[6] &gt;&gt; 4) + ((<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[7] &amp; 63) &lt;&lt; 4);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> += 8;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#aeabce984360e5515c3ff315fe2512fc3">  203</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="decklink__dec_8cpp.html#aeabce984360e5515c3ff315fe2512fc3">unpack_v210</a>(uint16_t *dst, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> * 2 / 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        *dst++ =  <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[0]       + ((<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[1] &amp; 3)  &lt;&lt; 8);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        *dst++ = (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[1] &gt;&gt; 2) + ((<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[2] &amp; 15) &lt;&lt; 6);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        *dst++ = (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[2] &gt;&gt; 4) + ((<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[3] &amp; 63) &lt;&lt; 4);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> += 4;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a1c45db5e753980dcc0dc0606cd942b17">  214</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="decklink__dec_8cpp.html#a1c45db5e753980dcc0dc0606cd942b17">calc_parity_and_line_offset</a>(<span class="keywordtype">int</span> <a class="code" href="structline.html">line</a>)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = (<a class="code" href="structline.html">line</a> &lt; 313) &lt;&lt; 5;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structline.html">line</a> &gt;= 7 &amp;&amp; <a class="code" href="structline.html">line</a> &lt;= 22)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> += <a class="code" href="swscale_8txt.html#aa111755617738a3e99d08d488ed0d3c4">line</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structline.html">line</a> &gt;= 320 &amp;&amp; <a class="code" href="structline.html">line</a> &lt;= 335)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> += (<a class="code" href="structline.html">line</a> - 313);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a0bda1d732055163f9a3fdfd6cc5bc129">  224</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="decklink__dec_8cpp.html#a0bda1d732055163f9a3fdfd6cc5bc129">fill_data_unit_head</a>(<span class="keywordtype">int</span> <a class="code" href="structline.html">line</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *tgt)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;{</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    tgt[0] = 0x02; <span class="comment">// data_unit_id</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    tgt[1] = 0x2c; <span class="comment">// data_unit_length</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    tgt[2] = <a class="code" href="decklink__dec_8cpp.html#a1c45db5e753980dcc0dc0606cd942b17">calc_parity_and_line_offset</a>(<a class="code" href="structline.html">line</a>); <span class="comment">// field_parity, line_offset</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    tgt[3] = 0xe4; <span class="comment">// framing code</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor">#if CONFIG_LIBZVBI</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>* teletext_data_unit_from_vbi_data(<span class="keywordtype">int</span> <a class="code" href="structline.html">line</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *tgt, vbi_pixfmt fmt)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    vbi_bit_slicer slicer;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    vbi_bit_slicer_init(&amp;slicer, 720, 13500000, 6937500, 6937500, 0x00aaaae4, 0xffff, 18, 6, 42 * 8, VBI_MODULATION_NRZ_MSB, fmt);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> (vbi_bit_slice(&amp;slicer, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, tgt + 4) == FALSE)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">return</span> tgt;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="decklink__dec_8cpp.html#a0bda1d732055163f9a3fdfd6cc5bc129">fill_data_unit_head</a>(<a class="code" href="structline.html">line</a>, tgt);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> tgt + 46;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>* teletext_data_unit_from_vbi_data_10bit(<span class="keywordtype">int</span> <a class="code" href="structline.html">line</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *tgt)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> y[720];</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *py = y;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *pend = y + 720;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">/* The 10-bit VBI data is packed in V210, but libzvbi only supports 8-bit,</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">     * so we extract the 8 MSBs of the luma component, that is enough for</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">     * teletext bit slicing. */</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">while</span> (py &lt; pend) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        *py++ = (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[1] &gt;&gt; 4) + ((<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[2] &amp; 15) &lt;&lt; 4);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        *py++ = (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[4] &gt;&gt; 2) + ((<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[5] &amp; 3 ) &lt;&lt; 6);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        *py++ = (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[6] &gt;&gt; 6) + ((<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[7] &amp; 63) &lt;&lt; 2);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> += 8;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> teletext_data_unit_from_vbi_data(<a class="code" href="structline.html">line</a>, y, tgt, VBI_PIXFMT_YUV420);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a62db790648803ff591ebd69b87962a42">  265</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>* <a class="code" href="decklink__dec_8cpp.html#a62db790648803ff591ebd69b87962a42">teletext_data_unit_from_op47_vbi_packet</a>(<span class="keywordtype">int</span> <a class="code" href="structline.html">line</a>, uint16_t *py, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *tgt)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;{</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> (py[0] != 0x255 || py[1] != 0x255 || py[2] != 0x227)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">return</span> tgt;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="decklink__dec_8cpp.html#a0bda1d732055163f9a3fdfd6cc5bc129">fill_data_unit_head</a>(<a class="code" href="structline.html">line</a>, tgt);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    py += 3;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    tgt += 4;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 42; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;       *tgt++ = <a class="code" href="libavutil_2reverse_8c.html#a4e3fcd62e1fd64fc2892891186febdd1">ff_reverse</a>[py[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; 255];</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> tgt;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a8103a160b6437a90de0d314aac932dd7">  283</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#a8103a160b6437a90de0d314aac932dd7">linemask_matches</a>(<span class="keywordtype">int</span> <a class="code" href="structline.html">line</a>, int64_t <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a> = -1;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structline.html">line</a> &gt;= 6 &amp;&amp; <a class="code" href="structline.html">line</a> &lt;= 22)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a> = <a class="code" href="structline.html">line</a> - 6;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structline.html">line</a> &gt;= 318 &amp;&amp; <a class="code" href="structline.html">line</a> &lt;= 335)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a> = <a class="code" href="structline.html">line</a> - 318 + 17;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a> &gt;= 0 &amp;&amp; ((1ULL &lt;&lt; <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>) &amp; <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;}</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#acaa56cecc98a176e018245c1b16fec54">  293</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>* <a class="code" href="decklink__dec_8cpp.html#acaa56cecc98a176e018245c1b16fec54">teletext_data_unit_from_op47_data</a>(uint16_t *py, uint16_t *pend, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *tgt, int64_t wanted_lines)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;{</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span> (py &lt; pend - 9) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">if</span> (py[0] == 0x151 &amp;&amp; py[1] == 0x115 &amp;&amp; py[3] == 0x102) {       <span class="comment">// identifier, identifier, format code for WST teletext</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            uint16_t *descriptors = py + 4;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            py += 9;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5 &amp;&amp; py &lt; pend - 45; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++, py += 45) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="structline.html">line</a> = (descriptors[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; 31) + (!(descriptors[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; 128)) * 313;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="structline.html">line</a> &amp;&amp; <a class="code" href="decklink__dec_8cpp.html#a8103a160b6437a90de0d314aac932dd7">linemask_matches</a>(<a class="code" href="structline.html">line</a>, wanted_lines))</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    tgt = <a class="code" href="decklink__dec_8cpp.html#a62db790648803ff591ebd69b87962a42">teletext_data_unit_from_op47_vbi_packet</a>(<a class="code" href="structline.html">line</a>, py, tgt);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">return</span> tgt;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a81cd1047e19936934e18a7d56967527d">  310</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>* <a class="code" href="decklink__dec_8cpp.html#a81cd1047e19936934e18a7d56967527d">teletext_data_unit_from_ancillary_packet</a>(uint16_t *py, uint16_t *pend, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *tgt, int64_t wanted_lines, <span class="keywordtype">int</span> allow_multipacket)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    uint16_t did = py[0];                                               <span class="comment">// data id</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    uint16_t sdid = py[1];                                              <span class="comment">// secondary data id</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    uint16_t <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = py[2] &amp; 255;                                          <span class="comment">// data count</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    py += 3;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    pend = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(pend, py + <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (did == 0x143 &amp;&amp; sdid == 0x102) {                                <span class="comment">// subtitle distribution packet</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        tgt = <a class="code" href="decklink__dec_8cpp.html#acaa56cecc98a176e018245c1b16fec54">teletext_data_unit_from_op47_data</a>(py, pend, tgt, wanted_lines);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (allow_multipacket &amp;&amp; did == 0x143 &amp;&amp; sdid == 0x203) {    <span class="comment">// VANC multipacket</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        py += 2;                                                        <span class="comment">// priority, line/field</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">while</span> (py &lt; pend - 3) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            tgt = <a class="code" href="decklink__dec_8cpp.html#a81cd1047e19936934e18a7d56967527d">teletext_data_unit_from_ancillary_packet</a>(py, pend, tgt, wanted_lines, 0);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            py += 4 + (py[2] &amp; 255);                                    <span class="comment">// ndid, nsdid, ndc, line/field</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">return</span> tgt;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a376a9d4f4998c3ce294e31abd4c160cc">  329</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="decklink__dec_8cpp.html#a376a9d4f4998c3ce294e31abd4c160cc">vanc_to_cc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, uint16_t *buf, <span class="keywordtype">size_t</span> words,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                           <span class="keywordtype">unsigned</span> &amp;cc_count)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = (buf[5] &amp; 0xff) + 6 + 1;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> cdp_sum, rate;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    uint16_t hdr, ftr;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *cc;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    uint16_t *cdp = &amp;buf[6]; <span class="comment">// CDP follows</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (cdp[0] != 0x96 || cdp[1] != 0x69) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid CDP header 0x%.2x 0x%.2x\n&quot;</span>, cdp[0], cdp[1]);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> -= 7; <span class="comment">// remove VANC header and checksum</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">if</span> (cdp[2] != <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;CDP len %d != %zu\n&quot;</span>, cdp[2], <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    cdp_sum = 0;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        cdp_sum += cdp[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    cdp_sum = cdp_sum ? 256 - cdp_sum : 0;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (cdp[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1] != cdp_sum) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;CDP checksum invalid 0x%.4x != 0x%.4x\n&quot;</span>, cdp_sum, cdp[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>-1]);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    rate = cdp[3];</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> (!(rate &amp; 0x0f)) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;CDP frame rate invalid (0x%.2x)\n&quot;</span>, rate);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    rate &gt;&gt;= 4;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span> (rate &gt; 8) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;CDP frame rate invalid (0x%.2x)\n&quot;</span>, rate);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (!(cdp[4] &amp; 0x43)) <span class="comment">/* ccdata_present | caption_service_active | reserved */</span> {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;CDP flags invalid (0x%.2x)\n&quot;</span>, cdp[4]);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    hdr = (cdp[5] &lt;&lt; 8) | cdp[6];</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (cdp[7] != 0x72) <span class="comment">/* ccdata_id */</span> {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid ccdata_id 0x%.2x\n&quot;</span>, cdp[7]);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    cc_count = cdp[8];</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (!(cc_count &amp; 0xe0)) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid cc_count 0x%.2x\n&quot;</span>, cc_count);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    cc_count &amp;= 0x1f;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 13) &lt; cc_count * 3) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid cc_count %d (&gt; %zu)\n&quot;</span>, cc_count * 3, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 13);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (cdp[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 4] != 0x74) <span class="comment">/* footer id */</span> {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid footer id 0x%.2x\n&quot;</span>, cdp[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>-4]);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    ftr = (cdp[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 3] &lt;&lt; 8) | cdp[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 2];</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (ftr != hdr) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Header 0x%.4x != Footer 0x%.4x\n&quot;</span>, hdr, ftr);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    cc = (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)<a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(cc_count * 3);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span> (cc == <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;CC - av_malloc failed for cc_count = %d\n&quot;</span>, cc_count);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; cc_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        cc[3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 0] = cdp[9 + 3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+0] <span class="comment">/* &amp; 3 */</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        cc[3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] = cdp[9 + 3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1];</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        cc[3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 2] = cdp[9 + 3*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+2];</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    cc_count *= 3;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">return</span> cc;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#af16ea91b42f8e0fbdf572163a8927c86">  419</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="decklink__dec_8cpp.html#af16ea91b42f8e0fbdf572163a8927c86">get_metadata</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, uint16_t *buf, <span class="keywordtype">size_t</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                             <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *tgt, <span class="keywordtype">size_t</span> tgt_size, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *) avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    uint16_t *max_buf = buf + <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    while (buf &lt; max_buf - 6) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        uint16_t did = buf[3] &amp; 0xFF;                                  <span class="comment">// data id</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        uint16_t sdid = buf[4] &amp; 0xFF;                                 <span class="comment">// secondary data id</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment">/* Check for VANC header */</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">if</span> (buf[0] != 0 || buf[1] != 0x3ff || buf[2] != 0x3ff) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keywordflow">return</span> tgt;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = (buf[5] &amp; 0xff) + 6 + 1;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt; max_buf - buf) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Data Count (%d) &gt; data left (%zu)\n&quot;</span>,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, max_buf - buf);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">return</span> tgt;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">if</span> (did == 0x43 &amp;&amp; (sdid == 0x02 || sdid == 0x03) &amp;&amp; cctx-&gt;<a class="code" href="structdecklink__cctx.html#af94272c404cb69b4703114f54f69c9ac">teletext_lines</a> &amp;&amp;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> == 1920 &amp;&amp; tgt_size &gt;= 1920) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="decklink__dec_8cpp.html#a28484f90d0900e743cc22bedff3bc02a">check_vanc_parity_checksum</a>(buf, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, buf[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1]) &lt; 0) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;VANC parity or checksum incorrect\n&quot;</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                <span class="keywordflow">goto</span> skip_packet;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            tgt = <a class="code" href="decklink__dec_8cpp.html#a81cd1047e19936934e18a7d56967527d">teletext_data_unit_from_ancillary_packet</a>(buf + 3, buf + <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, tgt, cctx-&gt;<a class="code" href="structdecklink__cctx.html#af94272c404cb69b4703114f54f69c9ac">teletext_lines</a>, 1);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (did == 0x61 &amp;&amp; sdid == 0x01) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> data_len;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="decklink__dec_8cpp.html#a28484f90d0900e743cc22bedff3bc02a">check_vanc_parity_checksum</a>(buf, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, buf[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1]) &lt; 0) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;VANC parity or checksum incorrect\n&quot;</span>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                <span class="keywordflow">goto</span> skip_packet;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <a class="code" href="decklink__dec_8cpp.html#a8eaa5b3b223101eba57c9363313fb418">clear_parity_bits</a>(buf, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> = <a class="code" href="decklink__dec_8cpp.html#a376a9d4f4998c3ce294e31abd4c160cc">vanc_to_cc</a>(avctx, buf, <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>, data_len);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="group__lavc__packet.html#ga8ac567e12e7637fa5cba87c1b9841f49">av_packet_add_side_data</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a7376747651b9113c8dd5afecc94742d2">AV_PKT_DATA_A53_CC</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, data_len) &lt; 0)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Unknown meta data DID = 0x%.2x SDID = 0x%.2x\n&quot;</span>,</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                    did, sdid);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;skip_packet:</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        buf += <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">return</span> tgt;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a594d985f6552b34e8a640926794b959d">  472</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="decklink__dec_8cpp.html#a594d985f6552b34e8a640926794b959d">avpacket_queue_init</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="struct_a_v_packet_queue.html">AVPacketQueue</a> *q)</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    memset(q, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_packet_queue.html">AVPacketQueue</a>));</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="os2threads_8h.html#a90293d12cef762b6df0139309d13fdbf">pthread_cond_init</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a389de739fe1f7b85ed31421032ad50fc">cond</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7f00e21ae1b962caf6dcb516c37dbc12">avctx</a> = avctx;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a2bf78c8844f5ae204b4f642cc5627c06">max_q_size</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;queue_size;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#add74ed024069adf2f5553704a7f63b5b">  482</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="decklink__dec_8cpp.html#add74ed024069adf2f5553704a7f63b5b">avpacket_queue_flush</a>(<a class="code" href="struct_a_v_packet_queue.html">AVPacketQueue</a> *q)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;{</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, *pkt1;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> = q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a95b5e6b55cf7f0c2ec186c256487659d">first_pkt</a>; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> != <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> = pkt1) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        pkt1 = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;next;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;pkt);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a1e133caa4c7d614471d8b55f6bd83662">last_pkt</a>   = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a95b5e6b55cf7f0c2ec186c256487659d">first_pkt</a>  = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a53a09d72e8720741096b740044c4129a">nb_packets</a> = 0;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a73e24aba469aa5096ba4653cebb75f93">size</a>       = 0;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a66d537bad00ec3003410e55ab9465903">  499</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="decklink__dec_8cpp.html#a66d537bad00ec3003410e55ab9465903">avpacket_queue_end</a>(<a class="code" href="struct_a_v_packet_queue.html">AVPacketQueue</a> *q)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="decklink__dec_8cpp.html#add74ed024069adf2f5553704a7f63b5b">avpacket_queue_flush</a>(q);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="os2threads_8h.html#a4c57837c88ef09274545ae2ebd18160a">pthread_cond_destroy</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a389de739fe1f7b85ed31421032ad50fc">cond</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a2b79c58aa7fd4777080a0533090ceaf6">  506</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="decklink__dec_8cpp.html#a2b79c58aa7fd4777080a0533090ceaf6">avpacket_queue_size</a>(<a class="code" href="struct_a_v_packet_queue.html">AVPacketQueue</a> *q)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;{</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a73e24aba469aa5096ba4653cebb75f93">size</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#ae7c50aed4cb9aece04ed15772d267c99">  515</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#ae7c50aed4cb9aece04ed15772d267c99">avpacket_queue_put</a>(<a class="code" href="struct_a_v_packet_queue.html">AVPacketQueue</a> *q, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;{</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *pkt1;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">// Drop Packet if queue size is &gt; maximum queue size</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="decklink__dec_8cpp.html#a2b79c58aa7fd4777080a0533090ceaf6">avpacket_queue_size</a>(q) &gt; (uint64_t)q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a2bf78c8844f5ae204b4f642cc5627c06">max_q_size</a>) {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7f00e21ae1b962caf6dcb516c37dbc12">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,  <span class="stringliteral">&quot;Decklink input buffer overrun!\n&quot;</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="comment">/* ensure the packet is reference counted */</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavc__packet.html#ga8a6deff6c1809029037ffd760db3e0d4">av_packet_make_refcounted</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) &lt; 0) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    pkt1 = (<a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *)<a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_packet_list.html">AVPacketList</a>));</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (!pkt1) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="group__lavc__packet.html#ga91dbb1359f99547adb544ee96a406b21">av_packet_move_ref</a>(&amp;pkt1-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    pkt1-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span> (!q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a1e133caa4c7d614471d8b55f6bd83662">last_pkt</a>) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a95b5e6b55cf7f0c2ec186c256487659d">first_pkt</a> = pkt1;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a1e133caa4c7d614471d8b55f6bd83662">last_pkt</a>-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a> = pkt1;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a1e133caa4c7d614471d8b55f6bd83662">last_pkt</a> = pkt1;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a53a09d72e8720741096b740044c4129a">nb_packets</a>++;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a73e24aba469aa5096ba4653cebb75f93">size</a> += pkt1-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> + <span class="keyword">sizeof</span>(*pkt1);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="os2threads_8h.html#a215efed993567deadcea30a74ed05d6c">pthread_cond_signal</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a389de739fe1f7b85ed31421032ad50fc">cond</a>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#ab86828be3ca3e6cfadc5c455cee3e9f9">  557</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#ab86828be3ca3e6cfadc5c455cee3e9f9">avpacket_queue_get</a>(<a class="code" href="struct_a_v_packet_queue.html">AVPacketQueue</a> *q, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;{</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *pkt1;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">for</span> (;; ) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        pkt1 = q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a95b5e6b55cf7f0c2ec186c256487659d">first_pkt</a>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">if</span> (pkt1) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a95b5e6b55cf7f0c2ec186c256487659d">first_pkt</a> = pkt1-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="keywordflow">if</span> (!q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a95b5e6b55cf7f0c2ec186c256487659d">first_pkt</a>) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a1e133caa4c7d614471d8b55f6bd83662">last_pkt</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a53a09d72e8720741096b740044c4129a">nb_packets</a>--;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a73e24aba469aa5096ba4653cebb75f93">size</a> -= pkt1-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> + <span class="keyword">sizeof</span>(*pkt1);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>     = pkt1-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(pkt1);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 1;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a389de739fe1f7b85ed31421032ad50fc">cond</a>, &amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;q-&gt;<a class="code" href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">mutex</a>);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#ab72e41d28e4e26bc81f51c8a3adbfec0">  588</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="decklink__dec_8cpp.html#ab72e41d28e4e26bc81f51c8a3adbfec0">handle_klv</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, IDeckLinkVideoInputFrame *videoFrame, int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;{</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> KLV_DID = 0x44;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> KLV_IN_VANC_SDID = 0x04;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_k_l_v_packet.html">KLVPacket</a></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        uint16_t sequence_counter;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        std::vector&lt;uint8_t&gt; <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    };</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordtype">size_t</span> total_size = 0;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    std::vector&lt;std::vector&lt;KLVPacket&gt;&gt; klv_packets(256);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    IDeckLinkVideoFrameAncillaryPackets *packets = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (videoFrame-&gt;QueryInterface(IID_IDeckLinkVideoFrameAncillaryPackets, (<span class="keywordtype">void</span>**)&amp;packets) != S_OK)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    IDeckLinkAncillaryPacketIterator *<a class="code" href="writing__filters_8txt.html#a3859a4129dbce920c88bdbeb078d4728">it</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span> (packets-&gt;GetPacketIterator(&amp;<a class="code" href="writing__filters_8txt.html#a3859a4129dbce920c88bdbeb078d4728">it</a>) != S_OK) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        packets-&gt;Release();</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    IDeckLinkAncillaryPacket *packet = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="writing__filters_8txt.html#a3859a4129dbce920c88bdbeb078d4728">it</a>-&gt;Next(&amp;packet) == S_OK) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        uint32_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = 0;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">if</span> (packet-&gt;GetDID() == KLV_DID &amp;&amp; packet-&gt;GetSDID() == KLV_IN_VANC_SDID) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;             <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Found KLV VANC packet on line: %d\n&quot;</span>, packet-&gt;GetLineNumber());</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">if</span> (packet-&gt;GetBytes(bmdAncillaryPacketFormatUInt8, (<span class="keyword">const</span> <span class="keywordtype">void</span>**) &amp;<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, &amp;<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>) == S_OK) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="comment">// MID and PSC</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; 3) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> mid = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[0];</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    uint16_t psc = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[1] &lt;&lt; 8 | <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[2];</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;KLV with MID: %d and PSC: %d\n&quot;</span>, mid, psc);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    <span class="keyword">auto</span>&amp; <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> = klv_packets[mid];</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    uint16_t expected_psc = <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>.size() + 1;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <span class="keywordflow">if</span> (psc == expected_psc) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                        uint32_t data_len = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - 3;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                        total_size += data_len;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                        <a class="code" href="struct_k_l_v_packet.html">KLVPacket</a> packet{ psc };</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                        packet.data.resize(data_len);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                        memcpy(packet.data.data(), <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> + 3, data_len);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                        <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>.push_back(std::move(packet));</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Out of order PSC: %d for MID: %d\n&quot;</span>, psc, mid);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>.empty()) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; klv : <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                                total_size -= klv.data.size();</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                            <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>.clear();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                        }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        packet-&gt;Release();</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="writing__filters_8txt.html#a3859a4129dbce920c88bdbeb078d4728">it</a>-&gt;Release();</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    packets-&gt;Release();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (total_size &gt; 0) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        std::vector&lt;uint8_t&gt; klv;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        klv.reserve(total_size);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; klv_packets.size(); ++<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keyword">auto</span>&amp; <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> = klv_packets[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>.empty())</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Joining MID: %d\n&quot;</span>, (<span class="keywordtype">int</span>)<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; packet : <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>)</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                klv.insert(klv.end(), packet.data.begin(), packet.data.end());</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> klv_packet;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;klv_packet);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        klv_packet.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        klv_packet.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        klv_packet.<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> |= <a class="code" href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        klv_packet.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;klv_st-&gt;index;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        klv_packet.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = klv.data();</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        klv_packet.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = klv.size();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="decklink__dec_8cpp.html#ae7c50aed4cb9aece04ed15772d267c99">avpacket_queue_put</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;queue, &amp;klv_packet) &lt; 0) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            ++<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dropped;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html">  691</a></span>&#160;<span class="keyword">class </span><a class="code" href="classdecklink__input__callback.html">decklink_input_callback</a> : <span class="keyword">public</span> IDeckLinkInputCallback</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;{</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="classdecklink__input__callback.html#a3b0e7406d1c3326bde3d5c9e65602058">decklink_input_callback</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *_avctx);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <a class="code" href="classdecklink__input__callback.html#a88afd3d5311f3daae949165cd41760d3">~decklink_input_callback</a>();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a60189574816494871d8222c0d8a124cf">  697</a></span>&#160;        <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__input__callback.html#a60189574816494871d8222c0d8a124cf">QueryInterface</a>(REFIID iid, LPVOID *ppv) { <span class="keywordflow">return</span> E_NOINTERFACE; }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keyword">virtual</span> ULONG STDMETHODCALLTYPE <a class="code" href="classdecklink__input__callback.html#a7605d371673e1459937bb6fe0e01dd0f">AddRef</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keyword">virtual</span> ULONG STDMETHODCALLTYPE  <a class="code" href="classdecklink__input__callback.html#a0a7c6051a4f916e6ead5cd45f8ed45b3">Release</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__input__callback.html#a40d03c413a6320b8fa4c5326f82074a7">VideoInputFormatChanged</a>(BMDVideoInputFormatChangedEvents, IDeckLinkDisplayMode*, BMDDetectedVideoInputFormatFlags);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <a class="code" href="classdecklink__input__callback.html#a2c72bc1d81d3d7c941cf1cc73bad0f5a">VideoInputFrameArrived</a>(IDeckLinkVideoInputFrame*, IDeckLinkAudioInputPacket*);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#aa1939e3875e647411dca69e27a7fca66">  704</a></span>&#160;        std::atomic&lt;int&gt;  <a class="code" href="classdecklink__input__callback.html#aa1939e3875e647411dca69e27a7fca66">_refs</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">  705</a></span>&#160;        <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">  706</a></span>&#160;        <a class="code" href="structdecklink__ctx.html">decklink_ctx</a>    *<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>;</div>
<div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a8a17036823f8c60a8ede5ccc2000a340">  707</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="classdecklink__input__callback.html#a8a17036823f8c60a8ede5ccc2000a340">no_video</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a264e8c813104a8cd7fffef837fdace42">  708</a></span>&#160;        int64_t <a class="code" href="classdecklink__input__callback.html#a264e8c813104a8cd7fffef837fdace42">initial_video_pts</a>;</div>
<div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a7d6c9fcc4addfe9ccebb09b6cb46830b">  709</a></span>&#160;        int64_t <a class="code" href="classdecklink__input__callback.html#a7d6c9fcc4addfe9ccebb09b6cb46830b">initial_audio_pts</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;};</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a3b0e7406d1c3326bde3d5c9e65602058">  712</a></span>&#160;<a class="code" href="classdecklink__input__callback.html#a3b0e7406d1c3326bde3d5c9e65602058">decklink_input_callback::decklink_input_callback</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *_avctx) : _refs(1)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;{</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a> = _avctx;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="structdecklink__cctx.html">decklink_cctx</a>       *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="classdecklink__input__callback.html#a8a17036823f8c60a8ede5ccc2000a340">no_video</a> = 0;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="classdecklink__input__callback.html#a7d6c9fcc4addfe9ccebb09b6cb46830b">initial_audio_pts</a> = <a class="code" href="classdecklink__input__callback.html#a264e8c813104a8cd7fffef837fdace42">initial_video_pts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a88afd3d5311f3daae949165cd41760d3">  721</a></span>&#160;<a class="code" href="classdecklink__input__callback.html#a88afd3d5311f3daae949165cd41760d3">decklink_input_callback::~decklink_input_callback</a>()</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a7605d371673e1459937bb6fe0e01dd0f">  725</a></span>&#160;ULONG <a class="code" href="classdecklink__input__callback.html#a7605d371673e1459937bb6fe0e01dd0f">decklink_input_callback::AddRef</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">return</span> ++<a class="code" href="classdecklink__input__callback.html#aa1939e3875e647411dca69e27a7fca66">_refs</a>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a0a7c6051a4f916e6ead5cd45f8ed45b3">  730</a></span>&#160;ULONG <a class="code" href="classdecklink__input__callback.html#a0a7c6051a4f916e6ead5cd45f8ed45b3">decklink_input_callback::Release</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;{</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = --<a class="code" href="classdecklink__input__callback.html#aa1939e3875e647411dca69e27a7fca66">_refs</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="keyword">delete</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;}</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a0a9c1a42f4d6c8014adf7fa225779fb3">  738</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="decklink__dec_8cpp.html#a0a9c1a42f4d6c8014adf7fa225779fb3">get_pkt_pts</a>(IDeckLinkVideoInputFrame *videoFrame,</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                           IDeckLinkAudioInputPacket *audioFrame,</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                           int64_t wallclock,</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                           int64_t abs_wallclock,</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                           <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5">DecklinkPtsSource</a> pts_src,</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                           <a class="code" href="struct_a_v_rational.html">AVRational</a> time_base, int64_t *initial_pts,</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                           <span class="keywordtype">int</span> <a class="code" href="structdecklink__cctx.html#ab3cb6d8b1daeeb6948d14eea379e5161">copyts</a>)</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;{</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    BMDTimeValue bmd_pts;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    BMDTimeValue bmd_duration;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    HRESULT res = E_INVALIDARG;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">switch</span> (pts_src) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a2afe3d7ee3765386a76a3fba2155008a">PTS_SRC_AUDIO</a>:</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">if</span> (audioFrame)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                res = audioFrame-&gt;GetPacketTime(&amp;bmd_pts, time_base.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a35e725fca3053d932b908971d76481d8">PTS_SRC_VIDEO</a>:</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="keywordflow">if</span> (videoFrame)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                res = videoFrame-&gt;GetStreamTime(&amp;bmd_pts, &amp;bmd_duration, time_base.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a9bfe6cf66e7696e90a5aef66677a6de4">PTS_SRC_REFERENCE</a>:</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="keywordflow">if</span> (videoFrame)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                res = videoFrame-&gt;GetHardwareReferenceTimestamp(time_base.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, &amp;bmd_pts, &amp;bmd_duration);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a9e59809f45480f187c726053321a162a">PTS_SRC_WALLCLOCK</a>:</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <span class="comment">/* fall through */</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5ab3b0ce97007cc4344a30a7345a8f2f1e">PTS_SRC_ABS_WALLCLOCK</a>:</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="comment">/* MSVC does not support compound literals like AV_TIME_BASE_Q</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">             * in C++ code (compiler error C4576) */</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <a class="code" href="struct_a_v_rational.html">AVRational</a> timebase;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            timebase.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> = 1;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            timebase.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> = <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">if</span> (pts_src == <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a9e59809f45480f187c726053321a162a">PTS_SRC_WALLCLOCK</a>)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(wallclock, timebase, time_base);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(abs_wallclock, timebase, time_base);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span> (res == S_OK)</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = bmd_pts / time_base.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structdecklink__cctx.html#ab3cb6d8b1daeeb6948d14eea379e5161">copyts</a>) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; *initial_pts == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            *initial_pts = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="keywordflow">if</span> (*initial_pts != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> -= *initial_pts;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;}</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a2c72bc1d81d3d7c941cf1cc73bad0f5a">  792</a></span>&#160;HRESULT <a class="code" href="classdecklink__input__callback.html#a2c72bc1d81d3d7c941cf1cc73bad0f5a">decklink_input_callback::VideoInputFrameArrived</a>(</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    IDeckLinkVideoInputFrame *videoFrame, IDeckLinkAudioInputPacket *audioFrame)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;{</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordtype">void</span> *frameBytes;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordtype">void</span> *audioFrameBytes;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    BMDTimeValue frameTime;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    BMDTimeValue frameDuration;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    int64_t wallclock = 0, abs_wallclock = 0;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *) <a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a3c6e34a05b4d399777130a5163cdb982">autodetect</a>) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keywordflow">if</span> (videoFrame &amp;&amp; !(videoFrame-&gt;GetFlags() &amp; bmdFrameHasNoInputSource) &amp;&amp;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a94b966fd1f983dd4d7dd1bcfd6151ee7">bmd_mode</a> == bmdModeUnknown)</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a94b966fd1f983dd4d7dd1bcfd6151ee7">bmd_mode</a> = <a class="code" href="decklink__dec_8cpp.html#a95077f77cf6aa78830ef285af2051aeb">AUTODETECT_DEFAULT_MODE</a>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="comment">// Drop the frames till system&#39;s timestamp aligns with the configured value.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">if</span> (0 == <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a4c4c45ddd1268c3cda4aec41becef263">frameCount</a> &amp;&amp; cctx-&gt;<a class="code" href="structdecklink__cctx.html#aaf7a6f521f2e3ab48b7aad83c7d070a5">timestamp_align</a>) {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <a class="code" href="struct_a_v_rational.html">AVRational</a> remainder = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(<a class="code" href="time_8c.html#aebf7f9c94187487c31d26fa3da816468">av_gettime</a>() % cctx-&gt;<a class="code" href="structdecklink__cctx.html#aaf7a6f521f2e3ab48b7aad83c7d070a5">timestamp_align</a>, 1000000);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <a class="code" href="struct_a_v_rational.html">AVRational</a> frame_duration = <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#afffec184aa1098354341c24a29a772d6">video_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">r_frame_rate</a>);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__math__rational.html#gaa440bf42ede128219a571ae4ce0f90b8">av_cmp_q</a>(remainder, frame_duration) &gt; 0) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            ++<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#af5c2d5791ba0967a0dca29df1467b040">dropped</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a4c4c45ddd1268c3cda4aec41becef263">frameCount</a>++;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a3a1f1e2a25e54811a311636e9c73d32a">audio_pts_source</a> == <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a9e59809f45480f187c726053321a162a">PTS_SRC_WALLCLOCK</a> || <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a8fbfb683331bbd35c17cfb49b5bde9de">video_pts_source</a> == <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a9e59809f45480f187c726053321a162a">PTS_SRC_WALLCLOCK</a>)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        wallclock = <a class="code" href="time_8c.html#adf0e36df54426fa167e3cc5a3406f3b7">av_gettime_relative</a>();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a3a1f1e2a25e54811a311636e9c73d32a">audio_pts_source</a> == <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5ab3b0ce97007cc4344a30a7345a8f2f1e">PTS_SRC_ABS_WALLCLOCK</a> || <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a8fbfb683331bbd35c17cfb49b5bde9de">video_pts_source</a> == <a class="code" href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5ab3b0ce97007cc4344a30a7345a8f2f1e">PTS_SRC_ABS_WALLCLOCK</a>)</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        abs_wallclock = <a class="code" href="time_8c.html#aebf7f9c94187487c31d26fa3da816468">av_gettime</a>();</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="comment">// Handle Video Frame</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">if</span> (videoFrame) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a4c4c45ddd1268c3cda4aec41becef263">frameCount</a> % 25 == 0) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> qsize = <a class="code" href="decklink__dec_8cpp.html#a2b79c58aa7fd4777080a0533090ceaf6">avpacket_queue_size</a>(&amp;<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#aa8c5b33d2f9bcef1694d7bd8ebb130c8">queue</a>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                    <span class="stringliteral">&quot;Frame received (#%lu) - Valid (%liB) - QSize %fMB\n&quot;</span>,</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                    <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a4c4c45ddd1268c3cda4aec41becef263">frameCount</a>,</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                    videoFrame-&gt;GetRowBytes() * videoFrame-&gt;GetHeight(),</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                    (<span class="keywordtype">double</span>)qsize / 1024 / 1024);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        videoFrame-&gt;GetBytes(&amp;frameBytes);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        videoFrame-&gt;GetStreamTime(&amp;frameTime, &amp;frameDuration,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                                  <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#afffec184aa1098354341c24a29a772d6">video_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keywordflow">if</span> (videoFrame-&gt;GetFlags() &amp; bmdFrameHasNoInputSource) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a633d8fd72a55ea707beadf98353fe23d">draw_bars</a> &amp;&amp; videoFrame-&gt;GetPixelFormat() == bmdFormat8BitYUV) {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                <span class="keywordtype">unsigned</span> bars[8] = {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                    0xEA80EA80, 0xD292D210, 0xA910A9A5, 0x90229035,</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                    0x6ADD6ACA, 0x51EF515A, 0x286D28EF, 0x10801080 };</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>  = videoFrame-&gt;GetWidth();</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> = videoFrame-&gt;GetHeight();</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                <span class="keywordtype">unsigned</span> *p = (<span class="keywordtype">unsigned</span> *)frameBytes;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>; y++) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>; x += 2)</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                        *p++ = bars[(x * 8) / <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>];</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                }</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classdecklink__input__callback.html#a8a17036823f8c60a8ede5ccc2000a340">no_video</a>) {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Frame received (#%lu) - No input signal detected &quot;</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                        <span class="stringliteral">&quot;- Frames dropped %u\n&quot;</span>, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a4c4c45ddd1268c3cda4aec41becef263">frameCount</a>, ++<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#af5c2d5791ba0967a0dca29df1467b040">dropped</a>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <a class="code" href="classdecklink__input__callback.html#a8a17036823f8c60a8ede5ccc2000a340">no_video</a> = 1;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a8a17036823f8c60a8ede5ccc2000a340">no_video</a>) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Frame received (#%lu) - Input returned &quot;</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                        <span class="stringliteral">&quot;- Frames dropped %u\n&quot;</span>, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a4c4c45ddd1268c3cda4aec41becef263">frameCount</a>, ++<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#af5c2d5791ba0967a0dca29df1467b040">dropped</a>);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <a class="code" href="classdecklink__input__callback.html#a8a17036823f8c60a8ede5ccc2000a340">no_video</a> = 0;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="comment">// Handle Timecode (if requested)</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ab37d99fae671f0f505936496b5a973b5">tc_format</a>) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                IDeckLinkTimecode *timecode;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                <span class="keywordflow">if</span> (videoFrame-&gt;GetTimecode(<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ab37d99fae671f0f505936496b5a973b5">tc_format</a>, &amp;timecode) == S_OK) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                    <a class="code" href="decklink__common_8h.html#acfc74c2bc0030897cde609691c9924c2">DECKLINK_STR</a> decklink_tc;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                    <span class="keywordflow">if</span> (timecode-&gt;GetString(&amp;decklink_tc) == S_OK) {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                        <a class="code" href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a> = <a class="code" href="decklink__common_8h.html#aed22f66a56a01266ea7f5a2277dbdf3e">DECKLINK_STRDUP</a>(decklink_tc);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                        <a class="code" href="decklink__common_8h.html#ab3ba139b3013c516bc18fb11c3489e02">DECKLINK_FREE</a>(decklink_tc);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                    }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                    timecode-&gt;Release();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a>) {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                        <a class="code" href="struct_a_v_dictionary.html">AVDictionary</a>* metadata_dict = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                        <span class="keywordtype">int</span> metadata_len;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>* packed_metadata;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                        <a class="code" href="struct_a_v_timecode.html">AVTimecode</a> tcr;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="timecode_8c.html#a02596c9d431329a3acc646c943b1c800">av_timecode_init_from_string</a>(&amp;tcr, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#afffec184aa1098354341c24a29a772d6">video_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">r_frame_rate</a>, <a class="code" href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a>, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>) &gt;= 0) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                            uint32_t tc_data = <a class="code" href="timecode_8c.html#ae3045b65cc54f72e9d53d3c97a5f4da5">av_timecode_get_smpte_from_framenum</a>(&amp;tcr, 0);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                            <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <span class="keyword">sizeof</span>(uint32_t) * 4;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                            uint32_t *sd = (uint32_t *)<a class="code" href="group__lavc__packet.html#gac59f9714ac34774b43b3797c80b06c68">av_packet_new_side_data</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a1b4458780fbdf7fc23b18a7cb5327371">AV_PKT_DATA_S12M_TIMECODE</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                            <span class="keywordflow">if</span> (sd) {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                                *sd       = 1;       <span class="comment">// one TC</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                                *(sd + 1) = tc_data; <span class="comment">// TC</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                            }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                        }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;metadata_dict, <span class="stringliteral">&quot;timecode&quot;</span>, <a class="code" href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a>, <a class="code" href="group__lavu__dict.html#ga7a9a991cb7837b10ffd44725263de425">AV_DICT_DONT_STRDUP_VAL</a>) &gt;= 0) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                            packed_metadata = <a class="code" href="group__lavc__packet.html#ga7a0673855be71c876334ed04c6989ae8">av_packet_pack_dictionary</a>(metadata_dict, &amp;metadata_len);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                            <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;metadata_dict);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                            <span class="keywordflow">if</span> (packed_metadata) {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="group__lavc__packet.html#ga8ac567e12e7637fa5cba87c1b9841f49">av_packet_add_side_data</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a18d2e9d2c572fbe22a5880176fc41e9a">AV_PKT_DATA_STRINGS_METADATA</a>, packed_metadata, metadata_len) &lt; 0)</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                                    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;packed_metadata);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ab107650edaf85473657065a119e1a794">tc_seen</a>)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                                    <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ab107650edaf85473657065a119e1a794">tc_seen</a> = <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a4c4c45ddd1268c3cda4aec41becef263">frameCount</a>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                            }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                        }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                    }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Unable to find timecode.\n&quot;</span>);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ab37d99fae671f0f505936496b5a973b5">tc_format</a> &amp;&amp; cctx-&gt;<a class="code" href="structdecklink__cctx.html#a089b4cdfc3b3cac4c549b54aa80f1131">wait_for_tc</a> &amp;&amp; !<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ab107650edaf85473657065a119e1a794">tc_seen</a>) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;No TC detected yet. wait_for_tc set. Dropping. \n&quot;</span>);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Frame received (#%lu) - &quot;</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                        <span class="stringliteral">&quot;- Frames dropped %u\n&quot;</span>, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a4c4c45ddd1268c3cda4aec41becef263">frameCount</a>, ++<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#af5c2d5791ba0967a0dca29df1467b040">dropped</a>);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="decklink__dec_8cpp.html#a0a9c1a42f4d6c8014adf7fa225779fb3">get_pkt_pts</a>(videoFrame, audioFrame, wallclock, abs_wallclock, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a8fbfb683331bbd35c17cfb49b5bde9de">video_pts_source</a>, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#afffec184aa1098354341c24a29a772d6">video_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, &amp;<a class="code" href="classdecklink__input__callback.html#a264e8c813104a8cd7fffef837fdace42">initial_video_pts</a>, cctx-&gt;<a class="code" href="structdecklink__cctx.html#ab3cb6d8b1daeeb6948d14eea379e5161">copyts</a>);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> = frameDuration;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="comment">//To be made sure it still applies</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a>       |= <a class="code" href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#afffec184aa1098354341c24a29a772d6">video_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>         = (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)frameBytes;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>         = videoFrame-&gt;GetRowBytes() *</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                           videoFrame-&gt;GetHeight();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">//fprintf(stderr,&quot;Video Frame size %d ts %d\n&quot;, pkt.size, pkt.pts);</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classdecklink__input__callback.html#a8a17036823f8c60a8ede5ccc2000a340">no_video</a>) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            IDeckLinkVideoFrameAncillary *vanc;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <a class="code" href="struct_a_v_packet.html">AVPacket</a> txt_pkt;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> txt_buf0[3531]; <span class="comment">// 35 * 46 bytes decoded teletext lines + 1 byte data_identifier + 1920 bytes OP47 decode buffer</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *txt_buf = txt_buf0;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a95eeac9ebbfdb49e4979cc9131fa3aa5">enable_klv</a>) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                <a class="code" href="decklink__dec_8cpp.html#ab72e41d28e4e26bc81f51c8a3adbfec0">handle_klv</a>(<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>, videoFrame, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            <span class="keywordflow">if</span> (videoFrame-&gt;GetAncillaryData(&amp;vanc) == S_OK) {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                int64_t line_mask = 1;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                BMDPixelFormat vanc_format = vanc-&gt;GetPixelFormat();</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                txt_buf[0] = 0x10;    <span class="comment">// data_identifier - EBU_data</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                txt_buf++;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="preprocessor">#if CONFIG_LIBZVBI</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a94b966fd1f983dd4d7dd1bcfd6151ee7">bmd_mode</a> == bmdModePAL &amp;&amp; <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a422899113430f0ee63a731f0263c68ee">teletext_lines</a> &amp;&amp;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                    (vanc_format == bmdFormat8BitYUV || vanc_format == bmdFormat10BitYUV)) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(videoFrame-&gt;GetWidth() == 720);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 336; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++, line_mask &lt;&lt;= 1) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                        <span class="keywordflow">if</span> ((<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a422899113430f0ee63a731f0263c68ee">teletext_lines</a> &amp; line_mask) &amp;&amp; vanc-&gt;GetBufferForVerticalBlankingLine(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, (<span class="keywordtype">void</span>**)&amp;buf) == S_OK) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                            <span class="keywordflow">if</span> (vanc_format == bmdFormat8BitYUV)</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                                txt_buf = teletext_data_unit_from_vbi_data(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, buf, txt_buf, VBI_PIXFMT_UYVY);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                txt_buf = teletext_data_unit_from_vbi_data_10bit(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, buf, txt_buf);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                        }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == 22)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 317;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                    }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                <span class="keywordflow">if</span> (vanc_format == bmdFormat10BitYUV &amp;&amp; videoFrame-&gt;GetWidth() &lt;= <a class="code" href="decklink__dec_8cpp.html#ab951888caf2c88d9003ace49ee030cb3">MAX_WIDTH_VANC</a>) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                    <span class="keywordtype">int</span> idx = <a class="code" href="decklink__dec_8cpp.html#a9e66f32b6f0b4c6638a1136f114f8b86">get_vanc_line_idx</a>(<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a94b966fd1f983dd4d7dd1bcfd6151ee7">bmd_mode</a>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="decklink__dec_8cpp.html#a0ce5e7a8b047e16f46aff6e302986c0c">vanc_line_numbers</a>[idx].vanc_start; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= <a class="code" href="decklink__dec_8cpp.html#a0ce5e7a8b047e16f46aff6e302986c0c">vanc_line_numbers</a>[idx].<a class="code" href="struct_v_a_n_c_line_number.html#aa8a04ad63056a29b07a133cc97a4e465">vanc_end</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                        <span class="keywordflow">if</span> (vanc-&gt;GetBufferForVerticalBlankingLine(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, (<span class="keywordtype">void</span>**)&amp;buf) == S_OK) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                            uint16_t vanc[<a class="code" href="decklink__dec_8cpp.html#ab951888caf2c88d9003ace49ee030cb3">MAX_WIDTH_VANC</a>];</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                            <span class="keywordtype">size_t</span> vanc_size = videoFrame-&gt;GetWidth();</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a94b966fd1f983dd4d7dd1bcfd6151ee7">bmd_mode</a> == bmdModeNTSC &amp;&amp; videoFrame-&gt;GetWidth() * 2 &lt;= <a class="code" href="decklink__dec_8cpp.html#ab951888caf2c88d9003ace49ee030cb3">MAX_WIDTH_VANC</a>) {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                                vanc_size = vanc_size * 2;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                <a class="code" href="decklink__dec_8cpp.html#aeabce984360e5515c3ff315fe2512fc3">unpack_v210</a>(vanc, buf, videoFrame-&gt;GetWidth());</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                                <a class="code" href="decklink__dec_8cpp.html#aecb8976d236302490093efdc6b25e69a">extract_luma_from_v210</a>(vanc, buf, videoFrame-&gt;GetWidth());</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                            }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                            txt_buf = <a class="code" href="decklink__dec_8cpp.html#af16ea91b42f8e0fbdf572163a8927c86">get_metadata</a>(<a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>, vanc, vanc_size,</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                                   txt_buf, <span class="keyword">sizeof</span>(txt_buf0) - (txt_buf - txt_buf0), &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                        }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="decklink__dec_8cpp.html#a0ce5e7a8b047e16f46aff6e302986c0c">vanc_line_numbers</a>[idx].field0_vanc_end)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="decklink__dec_8cpp.html#a0ce5e7a8b047e16f46aff6e302986c0c">vanc_line_numbers</a>[idx].<a class="code" href="struct_v_a_n_c_line_number.html#aa098e641fd6ebea5e0c40280acdc32b0">field1_vanc_start</a> - 1;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                vanc-&gt;Release();</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                <span class="keywordflow">if</span> (txt_buf - txt_buf0 &gt; 1) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                    <span class="keywordtype">int</span> stuffing_units = (4 - ((45 + txt_buf - txt_buf0) / 46) % 4) % 4;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                    <span class="keywordflow">while</span> (stuffing_units--) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                        memset(txt_buf, 0xff, 46);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                        txt_buf[1] = 0x2c; <span class="comment">// data_unit_length</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                        txt_buf += 46;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                    }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                    <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;txt_pkt);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                    txt_pkt.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                    txt_pkt.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                    txt_pkt.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#abd759a1067a651a757e63cb76d8e7154">teletext_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                    txt_pkt.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = txt_buf0;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                    txt_pkt.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = txt_buf - txt_buf0;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="decklink__dec_8cpp.html#ae7c50aed4cb9aece04ed15772d267c99">avpacket_queue_put</a>(&amp;<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#aa8c5b33d2f9bcef1694d7bd8ebb130c8">queue</a>, &amp;txt_pkt) &lt; 0) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                        ++<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#af5c2d5791ba0967a0dca29df1467b040">dropped</a>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a> = <a class="code" href="group__lavu__buffer.html#ga3e7f4c92db85ccba0b2a16dd0069842a">av_buffer_create</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>, <a class="code" href="decklink__dec_8cpp.html#aff1581479636bf5238686be77bf0f4fe">decklink_object_free</a>, videoFrame, 0);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">buf</a>)</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            videoFrame-&gt;AddRef();</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="decklink__dec_8cpp.html#ae7c50aed4cb9aece04ed15772d267c99">avpacket_queue_put</a>(&amp;<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#aa8c5b33d2f9bcef1694d7bd8ebb130c8">queue</a>, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) &lt; 0) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            ++<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#af5c2d5791ba0967a0dca29df1467b040">dropped</a>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="comment">// Handle Audio Frame</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">if</span> (audioFrame) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        BMDTimeValue audio_pts;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="comment">//hack among hacks</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = audioFrame-&gt;GetSampleFrameCount() * <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ad60deaabe8092369feb5e4972393550b">audio_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> * (<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ab86082f46d855dc217af69cb17793189">audio_depth</a> / 8);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        audioFrame-&gt;GetBytes(&amp;audioFrameBytes);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        audioFrame-&gt;GetPacketTime(&amp;audio_pts, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ad60deaabe8092369feb5e4972393550b">audio_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="decklink__dec_8cpp.html#a0a9c1a42f4d6c8014adf7fa225779fb3">get_pkt_pts</a>(videoFrame, audioFrame, wallclock, abs_wallclock, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a3a1f1e2a25e54811a311636e9c73d32a">audio_pts_source</a>, <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ad60deaabe8092369feb5e4972393550b">audio_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, &amp;<a class="code" href="classdecklink__input__callback.html#a7d6c9fcc4addfe9ccebb09b6cb46830b">initial_audio_pts</a>, cctx-&gt;<a class="code" href="structdecklink__cctx.html#ab3cb6d8b1daeeb6948d14eea379e5161">copyts</a>);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="comment">//fprintf(stderr,&quot;Audio Frame size %d ts %d\n&quot;, pkt.size, pkt.pts);</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a>       |= <a class="code" href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#ad60deaabe8092369feb5e4972393550b">audio_st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>         = (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)audioFrameBytes;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="decklink__dec_8cpp.html#ae7c50aed4cb9aece04ed15772d267c99">avpacket_queue_put</a>(&amp;<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#aa8c5b33d2f9bcef1694d7bd8ebb130c8">queue</a>, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) &lt; 0) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            ++<a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#af5c2d5791ba0967a0dca29df1467b040">dropped</a>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;}</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"><a class="line" href="classdecklink__input__callback.html#a40d03c413a6320b8fa4c5326f82074a7"> 1045</a></span>&#160;HRESULT <a class="code" href="classdecklink__input__callback.html#a40d03c413a6320b8fa4c5326f82074a7">decklink_input_callback::VideoInputFormatChanged</a>(</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    BMDVideoInputFormatChangedEvents events, IDeckLinkDisplayMode *<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>,</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    BMDDetectedVideoInputFormatFlags formatFlags)</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;{</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *) <a class="code" href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">avctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#a94b966fd1f983dd4d7dd1bcfd6151ee7">bmd_mode</a> = <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>-&gt;GetDisplayMode();</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">// check the C context member to make sure we set both raw_format and bmd_mode with data from the same format change callback</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span> (!cctx-&gt;<a class="code" href="structdecklink__cctx.html#aa27aaf204608d98d293cc618a19726fe">raw_format</a>)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <a class="code" href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">ctx</a>-&gt;<a class="code" href="structdecklink__ctx.html#af8dc841f244a3a3803f0c78bf4d7741e">raw_format</a> = (formatFlags &amp; bmdDetectedVideoInputRGB444) ? bmdFormat8BitARGB : bmdFormat8BitYUV;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">return</span> S_OK;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;}</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"><a class="line" href="decklink__dec_8cpp.html#a4eb0bebad24d2fa311a2119721323181"> 1057</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#a4eb0bebad24d2fa311a2119721323181">decklink_autodetect</a>(<span class="keyword">struct</span> <a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct </span><a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <a class="code" href="decklink__common_8h.html#a9b7a244098308ee87581b1b9b26192b3">DECKLINK_BOOL</a> autodetect_supported = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;attr-&gt;GetFlag(BMDDeckLinkSupportsInputFormatDetection, &amp;autodetect_supported) != S_OK)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span> (autodetect_supported == <span class="keyword">false</span>)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;autodetect = 1;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_mode  = bmdModeUnknown;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;EnableVideoInput(<a class="code" href="decklink__dec_8cpp.html#a95077f77cf6aa78830ef285af2051aeb">AUTODETECT_DEFAULT_MODE</a>,</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                                   bmdFormat8BitYUV,</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                                   bmdVideoInputEnableFormatDetection) != S_OK) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;StartStreams() != S_OK) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// 3 second timeout</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 30; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <a class="code" href="time_8c.html#a4eee9c65835652a808973f4bc1641a51">av_usleep</a>(100000);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="comment">/* Sometimes VideoInputFrameArrived is called without the</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">         * bmdFrameHasNoInputSource flag before VideoInputFormatChanged.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">         * So don&#39;t break for bmd_mode == AUTODETECT_DEFAULT_MODE. */</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_mode != bmdModeUnknown &amp;&amp;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_mode != <a class="code" href="decklink__dec_8cpp.html#a95077f77cf6aa78830ef285af2051aeb">AUTODETECT_DEFAULT_MODE</a>)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;PauseStreams();</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;FlushStreams();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;autodetect = 0;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_mode != bmdModeUnknown) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        cctx-&gt;<a class="code" href="structdecklink__cctx.html#ae0a0c14d4879ad735c30f2487108ce11">format_code</a> = (<span class="keywordtype">char</span> *)<a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(5);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keywordflow">if</span> (!cctx-&gt;<a class="code" href="structdecklink__cctx.html#ae0a0c14d4879ad735c30f2487108ce11">format_code</a>)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <a class="code" href="intreadwrite_8h.html#a36097280ddfe8ebfc825d0f98fd00621">AV_WB32</a>(cctx-&gt;<a class="code" href="structdecklink__cctx.html#ae0a0c14d4879ad735c30f2487108ce11">format_code</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_mode);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"><a class="line" href="decklink__dec_8h.html#ac01f873725fbe7e9c3c886dde1c16b35"> 1107</a></span>&#160;<a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#a6214db531e0ad906893f9b7892b6b6ef">ff_decklink_read_close</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;{</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli) {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;StopStreams();</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;DisableVideoInput();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;DisableAudioInput();</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160; </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <a class="code" href="decklink__common_8cpp.html#ad010d461c97b7adace61c263b9f25ce1">ff_decklink_cleanup</a>(avctx);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <a class="code" href="decklink__dec_8cpp.html#a66d537bad00ec3003410e55ab9465903">avpacket_queue_end</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;queue);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;}</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"><a class="line" href="decklink__dec_8h.html#a83a03cd1359e8f8b75bd569ecb0bda8e"> 1126</a></span>&#160;<a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#afaf57cc0426c509a9d90c5bc8241df01">ff_decklink_read_header</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx)</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;{</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keyword">class</span> <a class="code" href="classdecklink__allocator.html">decklink_allocator</a> *allocator;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keyword">class</span> <a class="code" href="classdecklink__input__callback.html">decklink_input_callback</a> *<a class="code" href="mmaldec_8c.html#a50b28ae8c033ca7cae2dd18201208586">input_callback</a>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    HRESULT <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *) <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a>));</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;list_devices = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a0c0f4ce79fd3722715902dc734e582f1">list_devices</a>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;list_formats = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a7257e4e76715a945eaf8545d4679620e">list_formats</a>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;enable_klv = cctx-&gt;<a class="code" href="structdecklink__cctx.html#aaa13d3b350900dec5c86fc83b497c172">enable_klv</a>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;teletext_lines = cctx-&gt;<a class="code" href="structdecklink__cctx.html#af94272c404cb69b4703114f54f69c9ac">teletext_lines</a>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;preroll      = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a15a154b17994113a76c0cd3fcc15f4de">preroll</a>;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;duplex_mode  = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a05e112e6f8da37a216c0271c96e6529e">duplex_mode</a>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">if</span> (cctx-&gt;<a class="code" href="structdecklink__cctx.html#a3baf904a465ea9fe5d53ba98bde0c162">tc_format</a> &gt; 0 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a3baf904a465ea9fe5d53ba98bde0c162">tc_format</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="decklink__common_8h.html#a86906bd410107cd49ecff68f193bff24">decklink_timecode_format_map</a>))</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;tc_format = <a class="code" href="decklink__common_8h.html#a86906bd410107cd49ecff68f193bff24">decklink_timecode_format_map</a>[cctx-&gt;<a class="code" href="structdecklink__cctx.html#a3baf904a465ea9fe5d53ba98bde0c162">tc_format</a>];</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (cctx-&gt;<a class="code" href="structdecklink__cctx.html#a353893125d5fc1211070c8c388bdb778">video_input</a> &gt; 0 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a353893125d5fc1211070c8c388bdb778">video_input</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="decklink__common_8h.html#a2b9d1c1874f52de83e55c4859a65d2f7">decklink_video_connection_map</a>))</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;video_input = <a class="code" href="decklink__common_8h.html#a2b9d1c1874f52de83e55c4859a65d2f7">decklink_video_connection_map</a>[cctx-&gt;<a class="code" href="structdecklink__cctx.html#a353893125d5fc1211070c8c388bdb778">video_input</a>];</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">if</span> (cctx-&gt;<a class="code" href="structdecklink__cctx.html#a333882c7fff86d103ffab476b457fc7f">audio_input</a> &gt; 0 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a333882c7fff86d103ffab476b457fc7f">audio_input</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="decklink__common_8h.html#aa6ec66142fed350c80b89f0c55f5dbf6">decklink_audio_connection_map</a>))</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio_input = <a class="code" href="decklink__common_8h.html#aa6ec66142fed350c80b89f0c55f5dbf6">decklink_audio_connection_map</a>[cctx-&gt;<a class="code" href="structdecklink__cctx.html#a333882c7fff86d103ffab476b457fc7f">audio_input</a>];</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio_pts_source = cctx-&gt;<a class="code" href="structdecklink__cctx.html#aaeb3b81a1ffd1a8523359759205a08a3">audio_pts_source</a>;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;video_pts_source = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a7e61471234066e6054e6be753a277073">video_pts_source</a>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;draw_bars = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a6efba7c1a7b41de1d307cfe3234537e0">draw_bars</a>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio_depth = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a9d3f557493be8b4aa94d5733565ca1e1">audio_depth</a>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">if</span> (cctx-&gt;<a class="code" href="structdecklink__cctx.html#aa27aaf204608d98d293cc618a19726fe">raw_format</a> &gt; 0 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)cctx-&gt;<a class="code" href="structdecklink__cctx.html#aa27aaf204608d98d293cc618a19726fe">raw_format</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="decklink__common_8h.html#a94db9e03cff66dc377f03fff87ca9a17">decklink_raw_format_map</a>))</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;raw_format = <a class="code" href="decklink__common_8h.html#a94db9e03cff66dc377f03fff87ca9a17">decklink_raw_format_map</a>[cctx-&gt;<a class="code" href="structdecklink__cctx.html#aa27aaf204608d98d293cc618a19726fe">raw_format</a>];</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">/* Check audio channel option for valid values: 2, 8 or 16 */</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">switch</span> (cctx-&gt;<a class="code" href="structdecklink__cctx.html#aac7c7ace3a1de08565364d6d46260ae7">audio_channels</a>) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <span class="keywordflow">case</span> 16:</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Value of channels option must be one of 2, 8 or 16\n&quot;</span>);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">/* Check audio bit depth option for valid values: 16 or 32 */</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">switch</span> (cctx-&gt;<a class="code" href="structdecklink__cctx.html#a9d3f557493be8b4aa94d5733565ca1e1">audio_depth</a>) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <span class="keywordflow">case</span> 16:</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="keywordflow">case</span> 32:</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Value for audio bit depth option must be either 16 or 32\n&quot;</span>);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    }</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="comment">/* List available devices. */</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;list_devices) {</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;The -list_devices option is deprecated and will be removed. Please use ffmpeg -sources decklink instead.\n&quot;</span>);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <a class="code" href="decklink__common_8cpp.html#a5384e63f242fea7f5f872dc4ad941b72">ff_decklink_list_devices_legacy</a>(avctx, 1, 0);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga334ea23fd9e492cd0e718330f2353b6b">AVERROR_EXIT</a>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decklink__common_8cpp.html#a463be976ea4e274b9dedc08c1994d4d6">ff_decklink_init_device</a>(avctx, avctx-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="comment">/* Get input device. */</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dl-&gt;QueryInterface(IID_IDeckLinkInput, (<span class="keywordtype">void</span> **) &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli) != S_OK) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not open input device from &#39;%s&#39;\n&quot;</span>,</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;               avctx-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="decklink__common_8cpp.html#a24c20dd9fb216dd99f59d63f740288aa">ff_decklink_set_configs</a>(avctx, <a class="code" href="decklink__common_8h.html#afddf64290d2130f798d72e7ce33376caa66a3c638b3f4a3d2e144245311b29241">DIRECTION_IN</a>) &lt; 0) {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not set input configuration\n&quot;</span>);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">/* List supported formats. */</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;list_formats) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <a class="code" href="decklink__common_8cpp.html#a261141ce6758333d007eff1f3b96f561">ff_decklink_list_formats</a>(avctx, <a class="code" href="decklink__common_8h.html#afddf64290d2130f798d72e7ce33376caa66a3c638b3f4a3d2e144245311b29241">DIRECTION_IN</a>);</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga334ea23fd9e492cd0e718330f2353b6b">AVERROR_EXIT</a>;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <a class="code" href="mmaldec_8c.html#a50b28ae8c033ca7cae2dd18201208586">input_callback</a> = <span class="keyword">new</span> <a class="code" href="classdecklink__input__callback.html">decklink_input_callback</a>(avctx);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;SetCallback(<a class="code" href="mmaldec_8c.html#a50b28ae8c033ca7cae2dd18201208586">input_callback</a>) == S_OK ? 0 : <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <a class="code" href="mmaldec_8c.html#a50b28ae8c033ca7cae2dd18201208586">input_callback</a>-&gt;Release();</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot set input callback\n&quot;</span>);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    }</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    allocator = <span class="keyword">new</span> <a class="code" href="classdecklink__allocator.html">decklink_allocator</a>();</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;SetVideoInputFrameMemoryAllocator(allocator) == S_OK ? 0 : <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    allocator-&gt;Release();</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot set custom memory allocator\n&quot;</span>);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span> (!cctx-&gt;<a class="code" href="structdecklink__cctx.html#ae0a0c14d4879ad735c30f2487108ce11">format_code</a>) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="decklink__dec_8cpp.html#a4eb0bebad24d2fa311a2119721323181">decklink_autodetect</a>(cctx) &lt; 0) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot Autodetect input stream or No signal\n&quot;</span>);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        }</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Autodetected the input mode\n&quot;</span>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;raw_format == (BMDPixelFormat)0)</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;raw_format = bmdFormat8BitYUV;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="decklink__common_8cpp.html#a988744a389cfc570ca0cb757408dd8e4">ff_decklink_set_format</a>(avctx, <a class="code" href="decklink__common_8h.html#afddf64290d2130f798d72e7ce33376caa66a3c638b3f4a3d2e144245311b29241">DIRECTION_IN</a>) &lt; 0) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not set format code %s for %s\n&quot;</span>,</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            cctx-&gt;<a class="code" href="structdecklink__cctx.html#ae0a0c14d4879ad735c30f2487108ce11">format_code</a> ? cctx-&gt;<a class="code" href="structdecklink__cctx.html#ae0a0c14d4879ad735c30f2487108ce11">format_code</a> : <span class="stringliteral">&quot;(unset)&quot;</span>, avctx-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="preprocessor">#if !CONFIG_LIBZVBI</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;teletext_lines &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_mode == bmdModePAL) {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Libzvbi support is needed for capturing SD PAL teletext, please recompile FFmpeg.\n&quot;</span>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOSYS);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="comment">/* Setup streams. */</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    st = <a class="code" href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a>(avctx, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">if</span> (!st) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot add stream\n&quot;</span>);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    st-&gt;codecpar-&gt;codec_type  = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    st-&gt;codecpar-&gt;codec_id    = cctx-&gt;<a class="code" href="structdecklink__cctx.html#a9d3f557493be8b4aa94d5733565ca1e1">audio_depth</a> == 32 ? <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6384417ba463d7aeb03015797cff3349">AV_CODEC_ID_PCM_S32LE</a> : <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a>;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    st-&gt;codecpar-&gt;sample_rate = bmdAudioSampleRate48kHz;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    st-&gt;codecpar-&gt;channels    = cctx-&gt;<a class="code" href="structdecklink__cctx.html#aac7c7ace3a1de08565364d6d46260ae7">audio_channels</a>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, 1, 1000000);  <span class="comment">/* 64 bits pts in us */</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio_st=st;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    st = <a class="code" href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a>(avctx, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> (!st) {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot add stream\n&quot;</span>);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    st-&gt;codecpar-&gt;codec_type  = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    st-&gt;codecpar-&gt;width       = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_width;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    st-&gt;codecpar-&gt;height      = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_height;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    st-&gt;time_base.den      = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_den;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    st-&gt;time_base.num      = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_num;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    st-&gt;r_frame_rate       = <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(st-&gt;time_base.den, st-&gt;time_base.num);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;raw_format) {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">case</span> bmdFormat8BitYUV:</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        st-&gt;codecpar-&gt;codec_id    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc">AV_CODEC_ID_RAWVIDEO</a>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        st-&gt;codecpar-&gt;codec_tag   = <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;U&#39;</span>, <span class="charliteral">&#39;Y&#39;</span>, <span class="charliteral">&#39;V&#39;</span>, <span class="charliteral">&#39;Y&#39;</span>);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        st-&gt;codecpar-&gt;format      = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a4b8a29937744c722f35fccafb91ebdf0">AV_PIX_FMT_UYVY422</a>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        st-&gt;codecpar-&gt;bit_rate    = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_width * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_height * 16, st-&gt;time_base.den, st-&gt;time_base.num);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">case</span> bmdFormat10BitYUV:</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        st-&gt;codecpar-&gt;codec_id    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea11b45c130aea73e9ab73c4cdfb176803">AV_CODEC_ID_V210</a>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        st-&gt;codecpar-&gt;codec_tag   = <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;V&#39;</span>,<span class="charliteral">&#39;2&#39;</span>,<span class="charliteral">&#39;1&#39;</span>,<span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        st-&gt;codecpar-&gt;bit_rate    = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_width * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_height * 64, st-&gt;time_base.den, st-&gt;time_base.num * 3);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        st-&gt;codecpar-&gt;bits_per_coded_sample = 10;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">case</span> bmdFormat8BitARGB:</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        st-&gt;codecpar-&gt;codec_id    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc">AV_CODEC_ID_RAWVIDEO</a>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        st-&gt;codecpar-&gt;format      = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ad998d9449c5c948d9b9e5078d38f4fa2">AV_PIX_FMT_0RGB</a>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        st-&gt;codecpar-&gt;codec_tag   = <a class="code" href="group__lavc__misc__pixfmt.html#ga9bb07f91a7c87cba19a44ebdcf5bde63">avcodec_pix_fmt_to_codec_tag</a>((<span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a>)st-&gt;codecpar-&gt;format);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        st-&gt;codecpar-&gt;bit_rate    = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_width * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_height * 32, st-&gt;time_base.den, st-&gt;time_base.num);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordflow">case</span> bmdFormat8BitBGRA:</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        st-&gt;codecpar-&gt;codec_id    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc">AV_CODEC_ID_RAWVIDEO</a>;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        st-&gt;codecpar-&gt;format      = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a258e7e59a7f956604b743c14032906b0">AV_PIX_FMT_BGR0</a>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        st-&gt;codecpar-&gt;codec_tag   = <a class="code" href="group__lavc__misc__pixfmt.html#ga9bb07f91a7c87cba19a44ebdcf5bde63">avcodec_pix_fmt_to_codec_tag</a>((<span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a>)st-&gt;codecpar-&gt;format);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        st-&gt;codecpar-&gt;bit_rate    = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_width * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_height * 32, st-&gt;time_base.den, st-&gt;time_base.num);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">case</span> bmdFormat10BitRGB:</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        st-&gt;codecpar-&gt;codec_id    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2400153f986f90a4db379bd407e225b3">AV_CODEC_ID_R210</a>;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        st-&gt;codecpar-&gt;codec_tag   = <a class="code" href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a>(<span class="charliteral">&#39;R&#39;</span>,<span class="charliteral">&#39;2&#39;</span>,<span class="charliteral">&#39;1&#39;</span>,<span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        st-&gt;codecpar-&gt;format      = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5aa797e3c052ee86d1384769604b89ac42">AV_PIX_FMT_RGB48LE</a>;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        st-&gt;codecpar-&gt;bit_rate    = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_width * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_height * 30, st-&gt;time_base.den, st-&gt;time_base.num);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        st-&gt;codecpar-&gt;bits_per_coded_sample = 10;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="keywordtype">char</span> fourcc_str[<a class="code" href="group__lavu__misc.html#gaed5482506b009b48569356a08b21e403">AV_FOURCC_MAX_STRING_SIZE</a>] = {0};</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <a class="code" href="group__lavu__misc.html#gaf3ec42914c8ef8c78a01e8c00191db2f">av_fourcc_make_string</a>(fourcc_str, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;raw_format);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Raw Format %s not supported\n&quot;</span>, fourcc_str);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    }</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_field_dominance) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">case</span> bmdUpperFieldFirst:</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        st-&gt;codecpar-&gt;field_order = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23">AV_FIELD_TT</a>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">case</span> bmdLowerFieldFirst:</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        st-&gt;codecpar-&gt;field_order = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4">AV_FIELD_BB</a>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">case</span> bmdProgressiveFrame:</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">case</span> bmdProgressiveSegmentedFrame:</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        st-&gt;codecpar-&gt;field_order = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a>;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, 1, 1000000);  <span class="comment">/* 64 bits pts in us */</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;video_st=st;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160; </div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;enable_klv) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        st = <a class="code" href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a>(avctx, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">if</span> (!st) {</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        st-&gt;codecpar-&gt;codec_type = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a>;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        st-&gt;time_base.den        = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_den;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        st-&gt;time_base.num        = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_num;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        st-&gt;codecpar-&gt;codec_id   = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea44cfc6da6c78153c2def0bd9fab6d84c">AV_CODEC_ID_SMPTE_KLV</a>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, 1, 1000000);  <span class="comment">/* 64 bits pts in us */</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;klv_st = st;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;teletext_lines) {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        st = <a class="code" href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a>(avctx, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        <span class="keywordflow">if</span> (!st) {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot add stream\n&quot;</span>);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        st-&gt;codecpar-&gt;codec_type  = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        st-&gt;time_base.den         = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_den;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        st-&gt;time_base.num         = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_tb_num;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        st-&gt;codecpar-&gt;codec_id    = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceacefff4578427aea42f7bae17f6a5a0a4">AV_CODEC_ID_DVB_TELETEXT</a>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, 1, 1000000);  <span class="comment">/* 64 bits pts in us */</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;teletext_st = st;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Using %d input audio channels\n&quot;</span>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio_st-&gt;codecpar-&gt;channels);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;EnableAudioInput(bmdAudioSampleRate48kHz, cctx-&gt;<a class="code" href="structdecklink__cctx.html#a9d3f557493be8b4aa94d5733565ca1e1">audio_depth</a> == 32 ? bmdAudioSampleType32bitInteger : bmdAudioSampleType16bitInteger, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;audio_st-&gt;codecpar-&gt;channels);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> != S_OK) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot enable audio input\n&quot;</span>);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    }</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;EnableVideoInput(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;bmd_mode,</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                                        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;raw_format,</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                                        bmdVideoInputFlagDefault);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a> != S_OK) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot enable video input\n&quot;</span>);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    }</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <a class="code" href="decklink__dec_8cpp.html#a594d985f6552b34e8a640926794b959d">avpacket_queue_init</a> (avctx, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;queue);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dli-&gt;StartStreams() != S_OK) {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot start input stream\n&quot;</span>);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EIO);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    }</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <a class="code" href="decklink__common_8cpp.html#ad010d461c97b7adace61c263b9f25ce1">ff_decklink_cleanup</a>(avctx);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;}</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160; </div>
<div class="line"><a name="l01401"></a><span class="lineno"><a class="line" href="decklink__dec_8h.html#ac62ccebeb3612336fe030cdfa7906eea"> 1401</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#ac62ccebeb3612336fe030cdfa7906eea">ff_decklink_read_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;{</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *cctx = (<span class="keyword">struct </span><a class="code" href="structdecklink__cctx.html">decklink_cctx</a> *)avctx-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = (<span class="keyword">struct</span> <a class="code" href="structdecklink__ctx.html">decklink_ctx</a> *)cctx-&gt;<a class="code" href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">ctx</a>;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="decklink__dec_8cpp.html#ab86828be3ca3e6cfadc5c455cee3e9f9">avpacket_queue_get</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;queue, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, 1);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;tc_format &amp;&amp; !(<a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;video_st-&gt;<a class="code" href="struct_a_v_format_context.html#a3019a56080ed2e3297ff25bc2ff88adf">metadata</a>, <span class="stringliteral">&quot;timecode&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0))) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *side_metadata = <a class="code" href="group__lavc__packet.html#ga77a800026abd6dc2f4ac1e0ad7e3e999">av_packet_get_side_data</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a18d2e9d2c572fbe22a5880176fc41e9a">AV_PKT_DATA_STRINGS_METADATA</a>, &amp;<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="keywordflow">if</span> (side_metadata) {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;           <span class="keywordflow">if</span> (<a class="code" href="group__lavc__packet.html#ga1db169cc19e8194eca7311f877783a50">av_packet_unpack_dictionary</a>(side_metadata, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;video_st-&gt;<a class="code" href="struct_a_v_format_context.html#a3019a56080ed2e3297ff25bc2ff88adf">metadata</a>) &lt; 0)</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;               <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to set timecode\n&quot;</span>);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        }</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    }</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;}</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"><a class="line" href="decklink__dec_8h.html#ad037a0ff14f1b40bda8d19e33e121066"> 1420</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="decklink__dec_8cpp.html#ad037a0ff14f1b40bda8d19e33e121066">ff_decklink_list_input_devices</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avctx, <span class="keyword">struct</span> <a class="code" href="struct_a_v_device_info_list.html">AVDeviceInfoList</a> *device_list)</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;{</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="decklink__common_8cpp.html#ab15a26f91f4ecec4f6aeda0b98165dcd">ff_decklink_list_devices</a>(avctx, device_list, 1, 0);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;}</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160; </div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;} <span class="comment">/* extern &quot;C&quot; */</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="adecklink__dec_8cpp_html_af16ea91b42f8e0fbdf572163a8927c86"><div class="ttname"><a href="decklink__dec_8cpp.html#af16ea91b42f8e0fbdf572163a8927c86">get_metadata</a></div><div class="ttdeci">static uint8_t * get_metadata(AVFormatContext *avctx, uint16_t *buf, size_t width, uint8_t *tgt, size_t tgt_size, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00419">decklink_dec.cpp:419</a></div></div>
<div class="ttc" id="atarget__bsf__fuzzer_8c_html_aa3d85a3469f60990fdff296efb86a9c2"><div class="ttname"><a href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a></div><div class="ttdeci">static void error(const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="target__bsf__fuzzer_8c_source.html#l00030">target_bsf_fuzzer.c:30</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S16LE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00308">codec_id.h:308</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_ae0a0c14d4879ad735c30f2487108ce11"><div class="ttname"><a href="structdecklink__cctx.html#ae0a0c14d4879ad735c30f2487108ce11">decklink_cctx::format_code</a></div><div class="ttdeci">char * format_code</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00057">decklink_common_c.h:57</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a></div><div class="ttdeci">@ AVMEDIA_TYPE_SUBTITLE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00204">avutil.h:204</a></div></div>
<div class="ttc" id="atime_8c_html_adf0e36df54426fa167e3cc5a3406f3b7"><div class="ttname"><a href="time_8c.html#adf0e36df54426fa167e3cc5a3406f3b7">av_gettime_relative</a></div><div class="ttdeci">int64_t av_gettime_relative(void)</div><div class="ttdef"><b>Definition:</b> <a href="time_8c_source.html#l00056">time.c:56</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a81cd1047e19936934e18a7d56967527d"><div class="ttname"><a href="decklink__dec_8cpp.html#a81cd1047e19936934e18a7d56967527d">teletext_data_unit_from_ancillary_packet</a></div><div class="ttdeci">static uint8_t * teletext_data_unit_from_ancillary_packet(uint16_t *py, uint16_t *pend, uint8_t *tgt, int64_t wanted_lines, int allow_multipacket)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00310">decklink_dec.cpp:310</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_abd759a1067a651a757e63cb76d8e7154"><div class="ttname"><a href="structdecklink__ctx.html#abd759a1067a651a757e63cb76d8e7154">decklink_ctx::teletext_st</a></div><div class="ttdeci">AVStream * teletext_st</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00124">decklink_common.h:124</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="agroup__lavf__core_html_gadcb0fd3e507d9b58fe78f61f8ad39827"><div class="ttname"><a href="group__lavf__core.html#gadcb0fd3e507d9b58fe78f61f8ad39827">avformat_new_stream</a></div><div class="ttdeci">AVStream * avformat_new_stream(AVFormatContext *s, const AVCodec *c)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04453">utils.c:4453</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_html"><div class="ttname"><a href="struct_a_v_dictionary.html">AVDictionary</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00030">dict.c:30</a></div></div>
<div class="ttc" id="astruct_a_v_packet_list_html"><div class="ttname"><a href="struct_a_v_packet_list.html">AVPacketList</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00396">packet.h:396</a></div></div>
<div class="ttc" id="acommon_8h_html_a19c68e2b5efcbab914d79db1e4fee734"><div class="ttname"><a href="common_8h.html#a19c68e2b5efcbab914d79db1e4fee734">MKTAG</a></div><div class="ttdeci">#define MKTAG(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00405">common.h:405</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a4f8250fbf301e0e62dad0aad3ba030a9"><div class="ttname"><a href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a></div><div class="ttdeci">static av_always_inline int pthread_mutex_init(pthread_mutex_t *mutex, const pthread_mutexattr_t *attr)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00104">os2threads.h:104</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_ad09b7e8904f64e9e3ccbd5ce038a02b0"><div class="ttname"><a href="classdecklink__allocator.html#ad09b7e8904f64e9e3ccbd5ce038a02b0">decklink_allocator::_refs</a></div><div class="ttdeci">std::atomic&lt; int &gt; _refs</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00141">decklink_dec.cpp:141</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_aa8c5b33d2f9bcef1694d7bd8ebb130c8"><div class="ttname"><a href="structdecklink__ctx.html#aa8c5b33d2f9bcef1694d7bd8ebb130c8">decklink_ctx::queue</a></div><div class="ttdeci">AVPacketQueue queue</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00110">decklink_common.h:110</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a95077f77cf6aa78830ef285af2051aeb"><div class="ttname"><a href="decklink__dec_8cpp.html#a95077f77cf6aa78830ef285af2051aeb">AUTODETECT_DEFAULT_MODE</a></div><div class="ttdeci">const BMDDisplayMode AUTODETECT_DEFAULT_MODE</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00058">decklink_dec.cpp:58</a></div></div>
<div class="ttc" id="adecklink__common__c_8h_html_a15aeddb31c774af4bdc24bb66de0d7e5a2afe3d7ee3765386a76a3fba2155008a"><div class="ttname"><a href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a2afe3d7ee3765386a76a3fba2155008a">PTS_SRC_AUDIO</a></div><div class="ttdeci">@ PTS_SRC_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00029">decklink_common_c.h:29</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a7e61471234066e6054e6be753a277073"><div class="ttname"><a href="structdecklink__cctx.html#a7e61471234066e6054e6be753a277073">decklink_cctx::video_pts_source</a></div><div class="ttdeci">DecklinkPtsSource video_pts_source</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00052">decklink_common_c.h:52</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1b88854d7b37174f45df205456d7c1cc">AV_CODEC_ID_RAWVIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_RAWVIDEO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00062">codec_id.h:62</a></div></div>
<div class="ttc" id="astruct_a_v_device_info_list_html"><div class="ttname"><a href="struct_a_v_device_info_list.html">AVDeviceInfoList</a></div><div class="ttdef"><b>Definition:</b> <a href="avdevice_8h_source.html#l00460">avdevice.h:460</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a264e8c813104a8cd7fffef837fdace42"><div class="ttname"><a href="classdecklink__input__callback.html#a264e8c813104a8cd7fffef837fdace42">decklink_input_callback::initial_video_pts</a></div><div class="ttdeci">int64_t initial_video_pts</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00708">decklink_dec.cpp:708</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a40d03c413a6320b8fa4c5326f82074a7"><div class="ttname"><a href="classdecklink__input__callback.html#a40d03c413a6320b8fa4c5326f82074a7">decklink_input_callback::VideoInputFormatChanged</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE VideoInputFormatChanged(BMDVideoInputFormatChangedEvents, IDeckLinkDisplayMode *, BMDDetectedVideoInputFormatFlags)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l01045">decklink_dec.cpp:1045</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a6214db531e0ad906893f9b7892b6b6ef"><div class="ttname"><a href="decklink__dec_8cpp.html#a6214db531e0ad906893f9b7892b6b6ef">ff_decklink_read_close</a></div><div class="ttdeci">av_cold int ff_decklink_read_close(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l01107">decklink_dec.cpp:1107</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_aaa13d3b350900dec5c86fc83b497c172"><div class="ttname"><a href="structdecklink__cctx.html#aaa13d3b350900dec5c86fc83b497c172">decklink_cctx::enable_klv</a></div><div class="ttdeci">int enable_klv</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00045">decklink_common_c.h:45</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceacefff4578427aea42f7bae17f6a5a0a4"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceacefff4578427aea42f7bae17f6a5a0a4">AV_CODEC_ID_DVB_TELETEXT</a></div><div class="ttdeci">@ AV_CODEC_ID_DVB_TELETEXT</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00524">codec_id.h:524</a></div></div>
<div class="ttc" id="alibavutil_2reverse_8c_html_a4e3fcd62e1fd64fc2892891186febdd1"><div class="ttname"><a href="libavutil_2reverse_8c.html#a4e3fcd62e1fd64fc2892891186febdd1">ff_reverse</a></div><div class="ttdeci">const uint8_t ff_reverse[256]</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2reverse_8c_source.html#l00023">reverse.c:23</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_a0516fd992df1d700d4c2f5dac03c20b2"><div class="ttname"><a href="classdecklink__allocator.html#a0516fd992df1d700d4c2f5dac03c20b2">decklink_allocator::Decommit</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE Decommit()</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00127">decklink_dec.cpp:127</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_a94db9e03cff66dc377f03fff87ca9a17"><div class="ttname"><a href="decklink__common_8h.html#a94db9e03cff66dc377f03fff87ca9a17">decklink_raw_format_map</a></div><div class="ttdeci">static const BMDPixelFormat decklink_raw_format_map[]</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00165">decklink_common.h:165</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_ab3ba139b3013c516bc18fb11c3489e02"><div class="ttname"><a href="decklink__common_8h.html#ab3ba139b3013c516bc18fb11c3489e02">DECKLINK_FREE</a></div><div class="ttdeci">#define DECKLINK_FREE(s)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00071">decklink_common.h:71</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_a3a1f1e2a25e54811a311636e9c73d32a"><div class="ttname"><a href="structdecklink__ctx.html#a3a1f1e2a25e54811a311636e9c73d32a">decklink_ctx::audio_pts_source</a></div><div class="ttdeci">DecklinkPtsSource audio_pts_source</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00134">decklink_common.h:134</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga9b58b28e2d429b930b69db19877f76a8"><div class="ttname"><a href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a></div><div class="ttdeci">#define AV_LOG_VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00210">log.h:210</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga3e7f4c92db85ccba0b2a16dd0069842a"><div class="ttname"><a href="group__lavu__buffer.html#ga3e7f4c92db85ccba0b2a16dd0069842a">av_buffer_create</a></div><div class="ttdeci">AVBufferRef * av_buffer_create(uint8_t *data, int size, void(*free)(void *opaque, uint8_t *data), void *opaque, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00029">buffer.c:29</a></div></div>
<div class="ttc" id="areverse_8h_html"><div class="ttname"><a href="reverse_8h.html">reverse.h</a></div></div>
<div class="ttc" id="amathematics_8h_html"><div class="ttname"><a href="mathematics_8h.html">mathematics.h</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga75603d7c2b8adf5829f4fd2fb860168f"><div class="ttname"><a href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a></div><div class="ttdeci">#define AV_PKT_FLAG_KEY</div><div class="ttdoc">The packet contains a keyframe.</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00401">packet.h:401</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a9e66f32b6f0b4c6638a1136f114f8b86"><div class="ttname"><a href="decklink__dec_8cpp.html#a9e66f32b6f0b4c6638a1136f114f8b86">get_vanc_line_idx</a></div><div class="ttdeci">static int get_vanc_line_idx(BMDDisplayMode mode)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00152">decklink_dec.cpp:152</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_a3bec26c295f39822d0bcdae7b7fc35b3"><div class="ttname"><a href="classdecklink__allocator.html#a3bec26c295f39822d0bcdae7b7fc35b3">decklink_allocator::~decklink_allocator</a></div><div class="ttdeci">virtual ~decklink_allocator()</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00110">decklink_dec.cpp:110</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a94eb42e94961e070dc838cbc5aceff79"><div class="ttname"><a href="structdecklink__cctx.html#a94eb42e94961e070dc838cbc5aceff79">decklink_cctx::ctx</a></div><div class="ttdeci">void * ctx</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00040">decklink_common_c.h:40</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="agroup__lavc__misc__pixfmt_html_ga9bb07f91a7c87cba19a44ebdcf5bde63"><div class="ttname"><a href="group__lavc__misc__pixfmt.html#ga9bb07f91a7c87cba19a44ebdcf5bde63">avcodec_pix_fmt_to_codec_tag</a></div><div class="ttdeci">unsigned int avcodec_pix_fmt_to_codec_tag(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="raw_8c_source.html#l00305">raw.c:305</a></div></div>
<div class="ttc" id="astruct_a_v_packet_queue_html_a389de739fe1f7b85ed31421032ad50fc"><div class="ttname"><a href="struct_a_v_packet_queue.html#a389de739fe1f7b85ed31421032ad50fc">AVPacketQueue::cond</a></div><div class="ttdeci">pthread_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00083">decklink_common.h:83</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a463be976ea4e274b9dedc08c1994d4d6"><div class="ttname"><a href="decklink__common_8cpp.html#a463be976ea4e274b9dedc08c1994d4d6">ff_decklink_init_device</a></div><div class="ttdeci">int ff_decklink_init_device(AVFormatContext *avctx, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00497">decklink_common.cpp:497</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_a80b1dbd116c561a9344c5844b92471af"><div class="ttname"><a href="classdecklink__allocator.html#a80b1dbd116c561a9344c5844b92471af">decklink_allocator::decklink_allocator</a></div><div class="ttdeci">decklink_allocator()</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00109">decklink_dec.cpp:109</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a5384e63f242fea7f5f872dc4ad941b72"><div class="ttname"><a href="decklink__common_8cpp.html#a5384e63f242fea7f5f872dc4ad941b72">ff_decklink_list_devices_legacy</a></div><div class="ttdeci">void ff_decklink_list_devices_legacy(AVFormatContext *avctx, int show_inputs, int show_outputs)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00408">decklink_common.cpp:408</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23">AV_FIELD_TT</a></div><div class="ttdeci">@ AV_FIELD_TT</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00039">codec_par.h:39</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a12826d21779289356722971d362c583c"><div class="ttname"><a href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">AVStream::codecpar</a></div><div class="ttdeci">AVCodecParameters * codecpar</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01034">avformat.h:1034</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_aaf7a6f521f2e3ab48b7aad83c7d070a5"><div class="ttname"><a href="structdecklink__cctx.html#aaf7a6f521f2e3ab48b7aad83c7d070a5">decklink_cctx::timestamp_align</a></div><div class="ttdeci">int64_t timestamp_align</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00061">decklink_common_c.h:61</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga8ac567e12e7637fa5cba87c1b9841f49"><div class="ttname"><a href="group__lavc__packet.html#ga8ac567e12e7637fa5cba87c1b9841f49">av_packet_add_side_data</a></div><div class="ttdeci">FF_ENABLE_DEPRECATION_WARNINGS int av_packet_add_side_data(AVPacket *pkt, enum AVPacketSideDataType type, uint8_t *data, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00298">avpacket.c:298</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gaed5482506b009b48569356a08b21e403"><div class="ttname"><a href="group__lavu__misc.html#gaed5482506b009b48569356a08b21e403">AV_FOURCC_MAX_STRING_SIZE</a></div><div class="ttdeci">#define AV_FOURCC_MAX_STRING_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00346">avutil.h:346</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_ac4c0777e54085af2f3f1b27130e2b21b"><div class="ttname"><a href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">AVFormatContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01251">avformat.h:1251</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga7a0673855be71c876334ed04c6989ae8"><div class="ttname"><a href="group__lavc__packet.html#ga7a0673855be71c876334ed04c6989ae8">av_packet_pack_dictionary</a></div><div class="ttdeci">uint8_t * av_packet_pack_dictionary(AVDictionary *dict, int *size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00495">avpacket.c:495</a></div></div>
<div class="ttc" id="atimecode_8h_html"><div class="ttname"><a href="timecode_8h.html">timecode.h</a></div></div>
<div class="ttc" id="adecklink__common__c_8h_html_a15aeddb31c774af4bdc24bb66de0d7e5"><div class="ttname"><a href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5">DecklinkPtsSource</a></div><div class="ttdeci">DecklinkPtsSource</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00028">decklink_common_c.h:28</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_aaeb3b81a1ffd1a8523359759205a08a3"><div class="ttname"><a href="structdecklink__cctx.html#aaeb3b81a1ffd1a8523359759205a08a3">decklink_cctx::audio_pts_source</a></div><div class="ttdeci">DecklinkPtsSource audio_pts_source</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00051">decklink_common_c.h:51</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea2400153f986f90a4db379bd407e225b3"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2400153f986f90a4db379bd407e225b3">AV_CODEC_ID_R210</a></div><div class="ttdeci">@ AV_CODEC_ID_R210</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00182">codec_id.h:182</a></div></div>
<div class="ttc" id="atranscode__aac_8c_html_a4fbb704fb96c36a78a36eee010306ce7"><div class="ttname"><a href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a></div><div class="ttdeci">static int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="transcode__aac_8c_source.html#l00647">transcode_aac.c:647</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_a2b9d1c1874f52de83e55c4859a65d2f7"><div class="ttname"><a href="decklink__common_8h.html#a2b9d1c1874f52de83e55c4859a65d2f7">decklink_video_connection_map</a></div><div class="ttdeci">static const BMDVideoConnection decklink_video_connection_map[]</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00184">decklink_common.h:184</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_ad60deaabe8092369feb5e4972393550b"><div class="ttname"><a href="structdecklink__ctx.html#ad60deaabe8092369feb5e4972393550b">decklink_ctx::audio_st</a></div><div class="ttdeci">AVStream * audio_st</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00121">decklink_common.h:121</a></div></div>
<div class="ttc" id="astruct_a_v_packet_queue_html"><div class="ttname"><a href="struct_a_v_packet_queue.html">AVPacketQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00077">decklink_common.h:77</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html"><div class="ttname"><a href="structdecklink__cctx.html">decklink_cctx</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00037">decklink_common_c.h:37</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a2c72bc1d81d3d7c941cf1cc73bad0f5a"><div class="ttname"><a href="classdecklink__input__callback.html#a2c72bc1d81d3d7c941cf1cc73bad0f5a">decklink_input_callback::VideoInputFrameArrived</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE VideoInputFrameArrived(IDeckLinkVideoInputFrame *, IDeckLinkAudioInputPacket *)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00792">decklink_dec.cpp:792</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga7a9a991cb7837b10ffd44725263de425"><div class="ttname"><a href="group__lavu__dict.html#ga7a9a991cb7837b10ffd44725263de425">AV_DICT_DONT_STRDUP_VAL</a></div><div class="ttdeci">#define AV_DICT_DONT_STRDUP_VAL</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00075">dict.h:74</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a18d2e9d2c572fbe22a5880176fc41e9a"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a18d2e9d2c572fbe22a5880176fc41e9a">AV_PKT_DATA_STRINGS_METADATA</a></div><div class="ttdeci">@ AV_PKT_DATA_STRINGS_METADATA</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00172">packet.h:172</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_ac62ccebeb3612336fe030cdfa7906eea"><div class="ttname"><a href="decklink__dec_8cpp.html#ac62ccebeb3612336fe030cdfa7906eea">ff_decklink_read_packet</a></div><div class="ttdeci">int ff_decklink_read_packet(AVFormatContext *avctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l01401">decklink_dec.cpp:1401</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a0d1cb9b5a32b00fb6edc81ea3aae2a49"><div class="ttname"><a href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">AVPacket::stream_index</a></div><div class="ttdeci">int stream_index</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00365">packet.h:365</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a36097280ddfe8ebfc825d0f98fd00621"><div class="ttname"><a href="intreadwrite_8h.html#a36097280ddfe8ebfc825d0f98fd00621">AV_WB32</a></div><div class="ttdeci">#define AV_WB32(p, val)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00273">intreadwrite.h:273</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a9db755451f14e2bf590d4b85d82b32e6"><div class="ttname"><a href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">AVStream::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00898">avformat.h:898</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="alzw_8c_html_a450ea4ae52aeb4ca6e2fabf02c695153"><div class="ttname"><a href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a></div><div class="ttdeci">static const uint16_t mask[17]</div><div class="ttdef"><b>Definition:</b> <a href="lzw_8c_source.html#l00038">lzw.c:38</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_gae67f143237b2cb2936c9b147aa6dfde3"><div class="ttname"><a href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a></div><div class="ttdeci">AVDictionaryEntry * av_dict_get(const AVDictionary *m, const char *key, const AVDictionaryEntry *prev, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00040">dict.c:40</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_acaa56cecc98a176e018245c1b16fec54"><div class="ttname"><a href="decklink__dec_8cpp.html#acaa56cecc98a176e018245c1b16fec54">teletext_data_unit_from_op47_data</a></div><div class="ttdeci">static uint8_t * teletext_data_unit_from_op47_data(uint16_t *py, uint16_t *pend, uint8_t *tgt, int64_t wanted_lines)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00293">decklink_dec.cpp:293</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_aa6ec66142fed350c80b89f0c55f5dbf6"><div class="ttname"><a href="decklink__common_8h.html#aa6ec66142fed350c80b89f0c55f5dbf6">decklink_audio_connection_map</a></div><div class="ttdeci">static const BMDAudioConnection decklink_audio_connection_map[]</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00174">decklink_common.h:174</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a667b04d7fb6ef46db4da4af554c5b6f7"><div class="ttname"><a href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a></div><div class="ttdeci">#define width</div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_aff1581479636bf5238686be77bf0f4fe"><div class="ttname"><a href="decklink__dec_8cpp.html#aff1581479636bf5238686be77bf0f4fe">decklink_object_free</a></div><div class="ttdeci">static void decklink_object_free(void *opaque, uint8_t *data)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00145">decklink_dec.cpp:145</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a4d418b807283607a231d2d8cdf559f00"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">AVCodecParameters::channels</a></div><div class="ttdeci">int channels</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00166">codec_par.h:166</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html"><div class="ttname"><a href="intreadwrite_8h.html">intreadwrite.h</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a3019a56080ed2e3297ff25bc2ff88adf"><div class="ttname"><a href="struct_a_v_format_context.html#a3019a56080ed2e3297ff25bc2ff88adf">AVFormatContext::metadata</a></div><div class="ttdeci">AVDictionary * metadata</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01463">avformat.h:1463</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_aac7c7ace3a1de08565364d6d46260ae7"><div class="ttname"><a href="structdecklink__cctx.html#aac7c7ace3a1de08565364d6d46260ae7">decklink_cctx::audio_channels</a></div><div class="ttdeci">int audio_channels</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00048">decklink_common_c.h:48</a></div></div>
<div class="ttc" id="adecklink__common__c_8h_html_a15aeddb31c774af4bdc24bb66de0d7e5ab3b0ce97007cc4344a30a7345a8f2f1e"><div class="ttname"><a href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5ab3b0ce97007cc4344a30a7345a8f2f1e">PTS_SRC_ABS_WALLCLOCK</a></div><div class="ttdeci">@ PTS_SRC_ABS_WALLCLOCK</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00033">decklink_common_c.h:33</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_a633d8fd72a55ea707beadf98353fe23d"><div class="ttname"><a href="structdecklink__ctx.html#a633d8fd72a55ea707beadf98353fe23d">decklink_ctx::draw_bars</a></div><div class="ttdeci">int draw_bars</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00136">decklink_common.h:136</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a88afd3d5311f3daae949165cd41760d3"><div class="ttname"><a href="classdecklink__input__callback.html#a88afd3d5311f3daae949165cd41760d3">decklink_input_callback::~decklink_input_callback</a></div><div class="ttdeci">~decklink_input_callback()</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00721">decklink_dec.cpp:721</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a6d20f3be45580f69c57fff40ab12a667"><div class="ttname"><a href="classdecklink__input__callback.html#a6d20f3be45580f69c57fff40ab12a667">decklink_input_callback::avctx</a></div><div class="ttdeci">AVFormatContext * avctx</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00705">decklink_dec.cpp:705</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_ab86082f46d855dc217af69cb17793189"><div class="ttname"><a href="structdecklink__ctx.html#ab86082f46d855dc217af69cb17793189">decklink_ctx::audio_depth</a></div><div class="ttdeci">int audio_depth</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00152">decklink_common.h:152</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_a94b966fd1f983dd4d7dd1bcfd6151ee7"><div class="ttname"><a href="structdecklink__ctx.html#a94b966fd1f983dd4d7dd1bcfd6151ee7">decklink_ctx::bmd_mode</a></div><div class="ttdeci">BMDDisplayMode bmd_mode</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00100">decklink_common.h:100</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gaf02994a8bbeaa91d4757df179cbe567f"><div class="ttname"><a href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a></div><div class="ttdeci">int64_t av_rescale_q(int64_t a, AVRational bq, AVRational cq)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00142">mathematics.c:142</a></div></div>
<div class="ttc" id="astruct_v_a_n_c_line_number_html_aa098e641fd6ebea5e0c40280acdc32b0"><div class="ttname"><a href="struct_v_a_n_c_line_number.html#aa098e641fd6ebea5e0c40280acdc32b0">VANCLineNumber::field1_vanc_start</a></div><div class="ttdeci">int field1_vanc_start</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00064">decklink_dec.cpp:64</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="adecklink__common__c_8h_html_a15aeddb31c774af4bdc24bb66de0d7e5a9e59809f45480f187c726053321a162a"><div class="ttname"><a href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a9e59809f45480f187c726053321a162a">PTS_SRC_WALLCLOCK</a></div><div class="ttdeci">@ PTS_SRC_WALLCLOCK</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00032">decklink_common_c.h:32</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a28484f90d0900e743cc22bedff3bc02a"><div class="ttname"><a href="decklink__dec_8cpp.html#a28484f90d0900e743cc22bedff3bc02a">check_vanc_parity_checksum</a></div><div class="ttdeci">static int check_vanc_parity_checksum(uint16_t *buf, int len, uint16_t checksum)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00169">decklink_dec.cpp:169</a></div></div>
<div class="ttc" id="atime_8c_html_a4eee9c65835652a808973f4bc1641a51"><div class="ttname"><a href="time_8c.html#a4eee9c65835652a808973f4bc1641a51">av_usleep</a></div><div class="ttdeci">int av_usleep(unsigned usec)</div><div class="ttdef"><b>Definition:</b> <a href="time_8c_source.html#l00084">time.c:84</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a></div><div class="ttdeci">@ AVMEDIA_TYPE_DATA</div><div class="ttdoc">Opaque data information usually continuous.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00203">avutil.h:203</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gac59f9714ac34774b43b3797c80b06c68"><div class="ttname"><a href="group__lavc__packet.html#gac59f9714ac34774b43b3797c80b06c68">av_packet_new_side_data</a></div><div class="ttdeci">uint8_t * av_packet_new_side_data(AVPacket *pkt, enum AVPacketSideDataType type, int size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00332">avpacket.c:332</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga77a800026abd6dc2f4ac1e0ad7e3e999"><div class="ttname"><a href="group__lavc__packet.html#ga77a800026abd6dc2f4ac1e0ad7e3e999">av_packet_get_side_data</a></div><div class="ttdeci">uint8_t * av_packet_get_side_data(const AVPacket *pkt, enum AVPacketSideDataType type, int *size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00353">avpacket.c:353</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a6efba7c1a7b41de1d307cfe3234537e0"><div class="ttname"><a href="structdecklink__cctx.html#a6efba7c1a7b41de1d307cfe3234537e0">decklink_cctx::draw_bars</a></div><div class="ttdeci">int draw_bars</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00056">decklink_common_c.h:56</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html"><div class="ttname"><a href="libavformat_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_ab86828be3ca3e6cfadc5c455cee3e9f9"><div class="ttname"><a href="decklink__dec_8cpp.html#ab86828be3ca3e6cfadc5c455cee3e9f9">avpacket_queue_get</a></div><div class="ttdeci">static int avpacket_queue_get(AVPacketQueue *q, AVPacket *pkt, int block)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00557">decklink_dec.cpp:557</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf51c0fafb1c1b683c7f943c2a349904"><div class="ttname"><a href="filter__design_8txt.html#adf51c0fafb1c1b683c7f943c2a349904">result</a></div><div class="ttdeci">and forward the result(frame or status change) to the corresponding input. If nothing is possible</div></div>
<div class="ttc" id="astruct_a_v_packet_html_a437be96a9da675f12caa228a9c81bd82"><div class="ttname"><a href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">AVPacket::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00369">packet.h:369</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_acfc74c2bc0030897cde609691c9924c2"><div class="ttname"><a href="decklink__common_8h.html#acfc74c2bc0030897cde609691c9924c2">DECKLINK_STR</a></div><div class="ttdeci">#define DECKLINK_STR</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00068">decklink_common.h:68</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_a9b7a244098308ee87581b1b9b26192b3"><div class="ttname"><a href="decklink__common_8h.html#a9b7a244098308ee87581b1b9b26192b3">DECKLINK_BOOL</a></div><div class="ttdeci">#define DECKLINK_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00041">decklink_common.h:41</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5aa797e3c052ee86d1384769604b89ac42"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5aa797e3c052ee86d1384769604b89ac42">AV_PIX_FMT_RGB48LE</a></div><div class="ttdeci">@ AV_PIX_FMT_RGB48LE</div><div class="ttdoc">packed RGB 16:16:16, 48bpp, 16R, 16G, 16B, the 2-byte value for each R/G/B component is stored as lit...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00103">pixfmt.h:103</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_a86906bd410107cd49ecff68f193bff24"><div class="ttname"><a href="decklink__common_8h.html#a86906bd410107cd49ecff68f193bff24">decklink_timecode_format_map</a></div><div class="ttdeci">static const BMDTimecodeFormat decklink_timecode_format_map[]</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00194">decklink_common.h:194</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_a06629a0f1b83f41f88e44ef111dd42e0"><div class="ttname"><a href="classdecklink__allocator.html#a06629a0f1b83f41f88e44ef111dd42e0">decklink_allocator::Commit</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE Commit()</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00126">decklink_dec.cpp:126</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a0a7c6051a4f916e6ead5cd45f8ed45b3"><div class="ttname"><a href="classdecklink__input__callback.html#a0a7c6051a4f916e6ead5cd45f8ed45b3">decklink_input_callback::Release</a></div><div class="ttdeci">virtual ULONG STDMETHODCALLTYPE Release(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00730">decklink_dec.cpp:730</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a9f17285cc70842ab252aa590b046ecf5"><div class="ttname"><a href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining list</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00025">filter_design.txt:25</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_a4c4c45ddd1268c3cda4aec41becef263"><div class="ttname"><a href="structdecklink__ctx.html#a4c4c45ddd1268c3cda4aec41becef263">decklink_ctx::frameCount</a></div><div class="ttdeci">unsigned long frameCount</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00119">decklink_common.h:119</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_afaf57cc0426c509a9d90c5bc8241df01"><div class="ttname"><a href="decklink__dec_8cpp.html#afaf57cc0426c509a9d90c5bc8241df01">ff_decklink_read_header</a></div><div class="ttdeci">av_cold int ff_decklink_read_header(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l01126">decklink_dec.cpp:1126</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a258e7e59a7f956604b743c14032906b0"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a258e7e59a7f956604b743c14032906b0">AV_PIX_FMT_BGR0</a></div><div class="ttdeci">@ AV_PIX_FMT_BGR0</div><div class="ttdoc">packed BGR 8:8:8, 32bpp, BGRXBGRX... X=unused/undefined</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00240">pixfmt.h:240</a></div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a24c20dd9fb216dd99f59d63f740288aa"><div class="ttname"><a href="decklink__common_8cpp.html#a24c20dd9fb216dd99f59d63f740288aa">ff_decklink_set_configs</a></div><div class="ttdeci">int ff_decklink_set_configs(AVFormatContext *avctx, decklink_direction_t direction)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00143">decklink_common.cpp:143</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea44cfc6da6c78153c2def0bd9fab6d84c"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea44cfc6da6c78153c2def0bd9fab6d84c">AV_CODEC_ID_SMPTE_KLV</a></div><div class="ttdeci">@ AV_CODEC_ID_SMPTE_KLV</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00555">codec_id.h:555</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga91dbb1359f99547adb544ee96a406b21"><div class="ttname"><a href="group__lavc__packet.html#ga91dbb1359f99547adb544ee96a406b21">av_packet_move_ref</a></div><div class="ttdeci">void av_packet_move_ref(AVPacket *dst, AVPacket *src)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00664">avpacket.c:664</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_ae7c50aed4cb9aece04ed15772d267c99"><div class="ttname"><a href="decklink__dec_8cpp.html#ae7c50aed4cb9aece04ed15772d267c99">avpacket_queue_put</a></div><div class="ttdeci">static int avpacket_queue_put(AVPacketQueue *q, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00515">decklink_dec.cpp:515</a></div></div>
<div class="ttc" id="astruct_v_a_n_c_line_number_html_a827cdf5599764157993de8265300efe9"><div class="ttname"><a href="struct_v_a_n_c_line_number.html#a827cdf5599764157993de8265300efe9">VANCLineNumber::mode</a></div><div class="ttdeci">BMDDisplayMode mode</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00061">decklink_dec.cpp:61</a></div></div>
<div class="ttc" id="astruct_a_v_timecode_html"><div class="ttname"><a href="struct_a_v_timecode.html">AVTimecode</a></div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00041">timecode.h:41</a></div></div>
<div class="ttc" id="affprobe_8c_html_aa91b7ec8ae8a2d699fb09cc20c444fe8"><div class="ttname"><a href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="ffprobe_8c_source.html#l00066">ffprobe.c:66</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_aa27aaf204608d98d293cc618a19726fe"><div class="ttname"><a href="structdecklink__cctx.html#aa27aaf204608d98d293cc618a19726fe">decklink_cctx::raw_format</a></div><div class="ttdeci">int raw_format</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00058">decklink_common_c.h:58</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a8a17036823f8c60a8ede5ccc2000a340"><div class="ttname"><a href="classdecklink__input__callback.html#a8a17036823f8c60a8ede5ccc2000a340">decklink_input_callback::no_video</a></div><div class="ttdeci">int no_video</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00707">decklink_dec.cpp:707</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a15a154b17994113a76c0cd3fcc15f4de"><div class="ttname"><a href="structdecklink__cctx.html#a15a154b17994113a76c0cd3fcc15f4de">decklink_cctx::preroll</a></div><div class="ttdeci">double preroll</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00047">decklink_common_c.h:47</a></div></div>
<div class="ttc" id="astruct_a_v_packet_queue_html_a95b5e6b55cf7f0c2ec186c256487659d"><div class="ttname"><a href="struct_a_v_packet_queue.html#a95b5e6b55cf7f0c2ec186c256487659d">AVPacketQueue::first_pkt</a></div><div class="ttdeci">AVPacketList * first_pkt</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00078">decklink_common.h:78</a></div></div>
<div class="ttc" id="asnow_8txt_html_a719d7e9253d560ae4bac6546c3abc071"><div class="ttname"><a href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a></div><div class="ttdeci">Tag MUST be and&lt; 10hcoeff half pel interpolation filter coefficients, hcoeff[0] are the 2 middle coefficients[1] are the next outer ones and so on, resulting in a filter like:...eff[2], hcoeff[1], hcoeff[0], hcoeff[0], hcoeff[1], hcoeff[2] ... the sign of the coefficients is not explicitly stored but alternates after each coeff and coeff[0] is positive, so ...,+,-,+,-,+,+,-,+,-,+,... hcoeff[0] is not explicitly stored but found by subtracting the sum of all stored coefficients with signs from 32 hcoeff[0]=32 - hcoeff[1] - hcoeff[2] - ... a good choice for hcoeff and htaps is htaps=6 hcoeff={40,-10, 2} an alternative which requires more computations at both encoder and decoder side and may or may not be better is htaps=8 hcoeff={42,-14, 6,-2}ref_frames minimum of the number of available reference frames and max_ref_frames for example the first frame after a key frame always has ref_frames=1spatial_decomposition_type wavelet type 0 is a 9/7 symmetric compact integer wavelet 1 is a 5/3 symmetric compact integer wavelet others are reserved stored as delta from last, last is reset to 0 if always_reset||keyframeqlog quality(logarithmic quantizer scale) stored as delta from last, last is reset to 0 if always_reset||keyframemv_scale stored as delta from last, last is reset to 0 if always_reset||keyframe FIXME check that everything works fine if this changes between framesqbias dequantization bias stored as delta from last, last is reset to 0 if always_reset||keyframeblock_max_depth maximum depth of the block tree stored as delta from last, last is reset to 0 if always_reset||keyframequant_table quantization tableHighlevel bitstream structure:==============================--------------------------------------------|Header|--------------------------------------------|------------------------------------|||Block0||||split?||||yes no||||......... intra?||||:Block01 :yes no||||:Block02 :....... ..........||||:Block03 ::y DC ::ref index:||||:Block04 ::cb DC ::motion x :||||......... :cr DC ::motion y :||||....... ..........|||------------------------------------||------------------------------------|||Block1|||...|--------------------------------------------|------------ ------------ ------------|||Y subbands||Cb subbands||Cr subbands||||--- ---||--- ---||--- ---|||||LL0||HL0||||LL0||HL0||||LL0||HL0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||LH0||HH0||||LH0||HH0||||LH0||HH0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HL1||LH1||||HL1||LH1||||HL1||LH1|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HH1||HL2||||HH1||HL2||||HH1||HL2|||||...||...||...|||------------ ------------ ------------|--------------------------------------------Decoding process:=================------------|||Subbands|------------||||------------|Intra DC||||LL0 subband prediction ------------|\ Dequantization ------------------- \||Reference frames|\ IDWT|------- -------|Motion \|||Frame 0||Frame 1||Compensation . OBMC v -------|------- -------|--------------. \------&gt; Frame n output Frame Frame&lt;----------------------------------/|...|------------------- Range Coder:============Binary Range Coder:------------------- The implemented range coder is an adapted version based upon &quot;Range encoding: an algorithm for removing redundancy from a digitised message.&quot; by G. N. N. Martin. The symbols encoded by the Snow range coder are bits(0|1). The associated probabilities are not fix but change depending on the symbol mix seen so far. bit seen|new state ---------+----------------------------------------------- 0|256 - state_transition_table[256 - old_state];1|state_transition_table[old_state];state_transition_table={ 0, 0, 0, 0, 0, 0, 0, 0, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 190, 191, 192, 194, 194, 195, 196, 197, 198, 199, 200, 201, 202, 202, 204, 205, 206, 207, 208, 209, 209, 210, 211, 212, 213, 215, 215, 216, 217, 218, 219, 220, 220, 222, 223, 224, 225, 226, 227, 227, 229, 229, 230, 231, 232, 234, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 248, 0, 0, 0, 0, 0, 0, 0};FIXME Range Coding of integers:------------------------- FIXME Neighboring Blocks:===================left and top are set to the respective blocks unless they are outside of the image in which case they are set to the Null block top-left is set to the top left block unless it is outside of the image in which case it is set to the left block if this block has no larger parent block or it is at the left side of its parent block and the top right block is not outside of the image then the top right block is used for top-right else the top-left block is used Null block y, cb, cr are 128 level, ref, mx and my are 0 Motion Vector Prediction:=========================1. the motion vectors of all the neighboring blocks are scaled to compensate for the difference of reference frames scaled_mv=(mv *(256 *(current_reference+1)/(mv.reference+1))+128)&gt; the median of the scaled top and top right vectors is used as motion vector prediction the used motion vector is the sum of the predictor and(mvx_diff, mvy_diff) *mv_scale Intra DC Prediction block[y][x] dc[1]</div><div class="ttdef"><b>Definition:</b> <a href="snow_8txt_source.html#l00400">snow.txt:400</a></div></div>
<div class="ttc" id="astruct_a_v_packet_list_html_a6a1d0f1a75cfafa4643b93752edef643"><div class="ttname"><a href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">AVPacketList::next</a></div><div class="ttdeci">struct AVPacketList * next</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00398">packet.h:398</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a2b79c58aa7fd4777080a0533090ceaf6"><div class="ttname"><a href="decklink__dec_8cpp.html#a2b79c58aa7fd4777080a0533090ceaf6">avpacket_queue_size</a></div><div class="ttdeci">static unsigned long long avpacket_queue_size(AVPacketQueue *q)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00506">decklink_dec.cpp:506</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_ad219dfbfb88b085e97d41bde1055bd57"><div class="ttname"><a href="classdecklink__allocator.html#ad219dfbfb88b085e97d41bde1055bd57">decklink_allocator::ReleaseBuffer</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE ReleaseBuffer(void *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00121">decklink_dec.cpp:121</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_aab5542950d6beb910dc9237aac99989e"><div class="ttname"><a href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a></div><div class="ttdeci">void avpriv_set_pts_info(AVStream *s, int pts_wrap_bits, unsigned int pts_num, unsigned int pts_den)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04871">utils.c:4871</a></div></div>
<div class="ttc" id="astruct_a_v_packet_queue_html_a53a09d72e8720741096b740044c4129a"><div class="ttname"><a href="struct_a_v_packet_queue.html#a53a09d72e8720741096b740044c4129a">AVPacketQueue::nb_packets</a></div><div class="ttdeci">int nb_packets</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00079">decklink_common.h:79</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga7778b1d209ceb3e4bf34e40150d3b882"><div class="ttname"><a href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a></div><div class="ttdeci">static AVRational av_make_q(int num, int den)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00071">rational.h:71</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_ab3cb6d8b1daeeb6948d14eea379e5161"><div class="ttname"><a href="structdecklink__cctx.html#ab3cb6d8b1daeeb6948d14eea379e5161">decklink_cctx::copyts</a></div><div class="ttdeci">int copyts</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00060">decklink_common_c.h:60</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_ga2eaefe702f95f619ea6f2d08afa01be1"><div class="ttname"><a href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a></div><div class="ttdeci">#define AV_NOPTS_VALUE</div><div class="ttdoc">Undefined timestamp value.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00248">avutil.h:248</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gaf3ec42914c8ef8c78a01e8c00191db2f"><div class="ttname"><a href="group__lavu__misc.html#gaf3ec42914c8ef8c78a01e8c00191db2f">av_fourcc_make_string</a></div><div class="ttdeci">char * av_fourcc_make_string(char *buf, uint32_t fourcc)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2utils_8c_source.html#l00121">utils.c:121</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea11b45c130aea73e9ab73c4cdfb176803"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea11b45c130aea73e9ab73c4cdfb176803">AV_CODEC_ID_V210</a></div><div class="ttdeci">@ AV_CODEC_ID_V210</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00176">codec_id.h:176</a></div></div>
<div class="ttc" id="adecklink__common_8h_html"><div class="ttname"><a href="decklink__common_8h.html">decklink_common.h</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_ad037a0ff14f1b40bda8d19e33e121066"><div class="ttname"><a href="decklink__dec_8cpp.html#ad037a0ff14f1b40bda8d19e33e121066">ff_decklink_list_input_devices</a></div><div class="ttdeci">int ff_decklink_list_input_devices(AVFormatContext *avctx, struct AVDeviceInfoList *device_list)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l01420">decklink_dec.cpp:1420</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a7d6c9fcc4addfe9ccebb09b6cb46830b"><div class="ttname"><a href="classdecklink__input__callback.html#a7d6c9fcc4addfe9ccebb09b6cb46830b">decklink_input_callback::initial_audio_pts</a></div><div class="ttdeci">int64_t initial_audio_pts</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00709">decklink_dec.cpp:709</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a4eb0bebad24d2fa311a2119721323181"><div class="ttname"><a href="decklink__dec_8cpp.html#a4eb0bebad24d2fa311a2119721323181">decklink_autodetect</a></div><div class="ttdeci">static int decklink_autodetect(struct decklink_cctx *cctx)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l01057">decklink_dec.cpp:1057</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a85dbbd306b44b02390cd91c45e6a0f76"><div class="ttname"><a href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">AVPacket::dts</a></div><div class="ttdeci">int64_t dts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00362">packet.h:362</a></div></div>
<div class="ttc" id="aavdevice_8h_html"><div class="ttname"><a href="avdevice_8h.html">avdevice.h</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_aa544ec7bf909ee280c59cb6e0209d7ea"><div class="ttname"><a href="decklink__dec_8cpp.html#aa544ec7bf909ee280c59cb6e0209d7ea">VANCLineNumber</a></div><div class="ttdeci">struct VANCLineNumber VANCLineNumber</div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a651c97cb2dcd2241d42f0062a0bbd4e3"><div class="ttname"><a href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">AVFormatContext::url</a></div><div class="ttdeci">char * url</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01319">avformat.h:1319</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a261141ce6758333d007eff1f3b96f561"><div class="ttname"><a href="decklink__common_8cpp.html#a261141ce6758333d007eff1f3b96f561">ff_decklink_list_formats</a></div><div class="ttdeci">int ff_decklink_list_formats(AVFormatContext *avctx, decklink_direction_t direction)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00429">decklink_common.cpp:429</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga9c520e483ba8648495620ffdb4c491f2"><div class="ttname"><a href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a></div><div class="ttdeci">#define AVERROR_EXTERNAL</div><div class="ttdoc">Generic error in an external library.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00057">error.h:57</a></div></div>
<div class="ttc" id="astructline_html"><div class="ttname"><a href="structline.html">line</a></div><div class="ttdef"><b>Definition:</b> <a href="graph2dot_8c_source.html#l00048">graph2dot.c:48</a></div></div>
<div class="ttc" id="adecklink__dec_8h_html"><div class="ttname"><a href="decklink__dec_8h.html">decklink_dec.h</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga8a6deff6c1809029037ffd760db3e0d4"><div class="ttname"><a href="group__lavc__packet.html#ga8a6deff6c1809029037ffd760db3e0d4">av_packet_make_refcounted</a></div><div class="ttdeci">int av_packet_make_refcounted(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00672">avpacket.c:672</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga1bafd682b1fbb90e48a4cc3814b820f7"><div class="ttname"><a href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a></div><div class="ttdeci">void av_dict_free(AVDictionary **pm)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00203">dict.c:203</a></div></div>
<div class="ttc" id="astruct_a_v_packet_queue_html_a7f00e21ae1b962caf6dcb516c37dbc12"><div class="ttname"><a href="struct_a_v_packet_queue.html#a7f00e21ae1b962caf6dcb516c37dbc12">AVPacketQueue::avctx</a></div><div class="ttdeci">AVFormatContext * avctx</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00084">decklink_common.h:84</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga1db169cc19e8194eca7311f877783a50"><div class="ttname"><a href="group__lavc__packet.html#ga1db169cc19e8194eca7311f877783a50">av_packet_unpack_dictionary</a></div><div class="ttdeci">int av_packet_unpack_dictionary(const uint8_t *data, int size, AVDictionary **dict)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00530">avpacket.c:530</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_ad010d461c97b7adace61c263b9f25ce1"><div class="ttname"><a href="decklink__common_8cpp.html#ad010d461c97b7adace61c263b9f25ce1">ff_decklink_cleanup</a></div><div class="ttdeci">void ff_decklink_cleanup(AVFormatContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00480">decklink_common.cpp:480</a></div></div>
<div class="ttc" id="astruct_v_a_n_c_line_number_html_aa8a04ad63056a29b07a133cc97a4e465"><div class="ttname"><a href="struct_v_a_n_c_line_number.html#aa8a04ad63056a29b07a133cc97a4e465">VANCLineNumber::vanc_end</a></div><div class="ttdeci">int vanc_end</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00065">decklink_dec.cpp:65</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a4c57837c88ef09274545ae2ebd18160a"><div class="ttname"><a href="os2threads_8h.html#a4c57837c88ef09274545ae2ebd18160a">pthread_cond_destroy</a></div><div class="ttdeci">static av_always_inline int pthread_cond_destroy(pthread_cond_t *cond)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00144">os2threads.h:144</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a0bda1d732055163f9a3fdfd6cc5bc129"><div class="ttname"><a href="decklink__dec_8cpp.html#a0bda1d732055163f9a3fdfd6cc5bc129">fill_data_unit_head</a></div><div class="ttdeci">static void fill_data_unit_head(int line, uint8_t *tgt)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00224">decklink_dec.cpp:224</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_a8fbfb683331bbd35c17cfb49b5bde9de"><div class="ttname"><a href="structdecklink__ctx.html#a8fbfb683331bbd35c17cfb49b5bde9de">decklink_ctx::video_pts_source</a></div><div class="ttdeci">DecklinkPtsSource video_pts_source</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00135">decklink_common.h:135</a></div></div>
<div class="ttc" id="aos2threads_8h_html_af75a104513c9384ace314b0a6b1a8240"><div class="ttname"><a href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a></div><div class="ttdeci">static av_always_inline int pthread_mutex_destroy(pthread_mutex_t *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00112">os2threads.h:112</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a1c45db5e753980dcc0dc0606cd942b17"><div class="ttname"><a href="decklink__dec_8cpp.html#a1c45db5e753980dcc0dc0606cd942b17">calc_parity_and_line_offset</a></div><div class="ttdeci">static uint8_t calc_parity_and_line_offset(int line)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00214">decklink_dec.cpp:214</a></div></div>
<div class="ttc" id="atimecode_8c_html_ae3045b65cc54f72e9d53d3c97a5f4da5"><div class="ttname"><a href="timecode_8c.html#ae3045b65cc54f72e9d53d3c97a5f4da5">av_timecode_get_smpte_from_framenum</a></div><div class="ttdeci">uint32_t av_timecode_get_smpte_from_framenum(const AVTimecode *tc, int framenum)</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8c_source.html#l00055">timecode.c:55</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4">AV_FIELD_BB</a></div><div class="ttdeci">@ AV_FIELD_BB</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00040">codec_par.h:40</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a60189574816494871d8222c0d8a124cf"><div class="ttname"><a href="classdecklink__input__callback.html#a60189574816494871d8222c0d8a124cf">decklink_input_callback::QueryInterface</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE QueryInterface(REFIID iid, LPVOID *ppv)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00697">decklink_dec.cpp:697</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_afffec184aa1098354341c24a29a772d6"><div class="ttname"><a href="structdecklink__ctx.html#afffec184aa1098354341c24a29a772d6">decklink_ctx::video_st</a></div><div class="ttdeci">AVStream * video_st</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00122">decklink_common.h:122</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a7257e4e76715a945eaf8545d4679620e"><div class="ttname"><a href="structdecklink__cctx.html#a7257e4e76715a945eaf8545d4679620e">decklink_cctx::list_formats</a></div><div class="ttdeci">int list_formats</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00044">decklink_common_c.h:44</a></div></div>
<div class="ttc" id="adecklink__common__c_8h_html_a15aeddb31c774af4bdc24bb66de0d7e5a9bfe6cf66e7696e90a5aef66677a6de4"><div class="ttname"><a href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a9bfe6cf66e7696e90a5aef66677a6de4">PTS_SRC_REFERENCE</a></div><div class="ttdeci">@ PTS_SRC_REFERENCE</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00031">decklink_common_c.h:31</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_ab107650edaf85473657065a119e1a794"><div class="ttname"><a href="structdecklink__ctx.html#ab107650edaf85473657065a119e1a794">decklink_ctx::tc_seen</a></div><div class="ttdeci">unsigned long tc_seen</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00153">decklink_common.h:153</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_aed22f66a56a01266ea7f5a2277dbdf3e"><div class="ttname"><a href="decklink__common_8h.html#aed22f66a56a01266ea7f5a2277dbdf3e">DECKLINK_STRDUP</a></div><div class="ttdeci">#define DECKLINK_STRDUP</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00069">decklink_common.h:69</a></div></div>
<div class="ttc" id="astruct_v_a_n_c_line_number_html_a7f905dec2b38ea5a7b513900ac6ec00f"><div class="ttname"><a href="struct_v_a_n_c_line_number.html#a7f905dec2b38ea5a7b513900ac6ec00f">VANCLineNumber::field0_vanc_end</a></div><div class="ttdeci">int field0_vanc_end</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00063">decklink_dec.cpp:63</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a089b4cdfc3b3cac4c549b54aa80f1131"><div class="ttname"><a href="structdecklink__cctx.html#a089b4cdfc3b3cac4c549b54aa80f1131">decklink_cctx::wait_for_tc</a></div><div class="ttdeci">int wait_for_tc</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00063">decklink_common_c.h:63</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_gaa11ed202b70e1f52bac809811a910e2a"><div class="ttname"><a href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a></div><div class="ttdeci">#define AV_TIME_BASE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00254">avutil.h:254</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a0ce5e7a8b047e16f46aff6e302986c0c"><div class="ttname"><a href="decklink__dec_8cpp.html#a0ce5e7a8b047e16f46aff6e302986c0c">vanc_line_numbers</a></div><div class="ttdeci">static VANCLineNumber vanc_line_numbers[]</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00073">decklink_dec.cpp:73</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a0c0f4ce79fd3722715902dc734e582f1"><div class="ttname"><a href="structdecklink__cctx.html#a0c0f4ce79fd3722715902dc734e582f1">decklink_cctx::list_devices</a></div><div class="ttdeci">int list_devices</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00043">decklink_common_c.h:43</a></div></div>
<div class="ttc" id="acommon_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a7376747651b9113c8dd5afecc94742d2"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a7376747651b9113c8dd5afecc94742d2">AV_PKT_DATA_A53_CC</a></div><div class="ttdeci">@ AV_PKT_DATA_A53_CC</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00242">packet.h:242</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a6ca823054632821e085377f7d371a2d1"><div class="ttname"><a href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">AVStream::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00870">avformat.h:870</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_gab646f0a7cc30af543ba4a91b37f9de6e"><div class="ttname"><a href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a></div><div class="ttdeci">static av_always_inline AVRational av_inv_q(AVRational q)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00159">rational.h:159</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga3daf97178dd1b08b5e916be381cd33e4"><div class="ttname"><a href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a></div><div class="ttdeci">int64_t av_rescale(int64_t a, int64_t b, int64_t c)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00129">mathematics.c:129</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a333882c7fff86d103ffab476b457fc7f"><div class="ttname"><a href="structdecklink__cctx.html#a333882c7fff86d103ffab476b457fc7f">decklink_cctx::audio_input</a></div><div class="ttdeci">int audio_input</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00053">decklink_common_c.h:53</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a66d537bad00ec3003410e55ab9465903"><div class="ttname"><a href="decklink__dec_8cpp.html#a66d537bad00ec3003410e55ab9465903">avpacket_queue_end</a></div><div class="ttdeci">static void avpacket_queue_end(AVPacketQueue *q)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00499">decklink_dec.cpp:499</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_gaa440bf42ede128219a571ae4ce0f90b8"><div class="ttname"><a href="group__lavu__math__rational.html#gaa440bf42ede128219a571ae4ce0f90b8">av_cmp_q</a></div><div class="ttdeci">static int av_cmp_q(AVRational a, AVRational b)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00089">rational.h:89</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a62db790648803ff591ebd69b87962a42"><div class="ttname"><a href="decklink__dec_8cpp.html#a62db790648803ff591ebd69b87962a42">teletext_data_unit_from_op47_vbi_packet</a></div><div class="ttdeci">static uint8_t * teletext_data_unit_from_op47_vbi_packet(int line, uint16_t *py, uint8_t *tgt)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00265">decklink_dec.cpp:265</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a8103a160b6437a90de0d314aac932dd7"><div class="ttname"><a href="decklink__dec_8cpp.html#a8103a160b6437a90de0d314aac932dd7">linemask_matches</a></div><div class="ttdeci">static int linemask_matches(int line, int64_t mask)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00283">decklink_dec.cpp:283</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a3b0e7406d1c3326bde3d5c9e65602058"><div class="ttname"><a href="classdecklink__input__callback.html#a3b0e7406d1c3326bde3d5c9e65602058">decklink_input_callback::decklink_input_callback</a></div><div class="ttdeci">decklink_input_callback(AVFormatContext *_avctx)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00712">decklink_dec.cpp:712</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_aeabce984360e5515c3ff315fe2512fc3"><div class="ttname"><a href="decklink__dec_8cpp.html#aeabce984360e5515c3ff315fe2512fc3">unpack_v210</a></div><div class="ttdeci">static void unpack_v210(uint16_t *dst, const uint8_t *src, int width)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00203">decklink_dec.cpp:203</a></div></div>
<div class="ttc" id="astruct_a_v_packet_queue_html_a73e24aba469aa5096ba4653cebb75f93"><div class="ttname"><a href="struct_a_v_packet_queue.html#a73e24aba469aa5096ba4653cebb75f93">AVPacketQueue::size</a></div><div class="ttdeci">unsigned long long size</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00080">decklink_common.h:80</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_add74ed024069adf2f5553704a7f63b5b"><div class="ttname"><a href="decklink__dec_8cpp.html#add74ed024069adf2f5553704a7f63b5b">avpacket_queue_flush</a></div><div class="ttdeci">static void avpacket_queue_flush(AVPacketQueue *q)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00482">decklink_dec.cpp:482</a></div></div>
<div class="ttc" id="aavformat_8h_html"><div class="ttname"><a href="avformat_8h.html">avformat.h</a></div></div>
<div class="ttc" id="atests_2adler32_8c_html_aa4a4ec4e17257f17b6efac777b468700"><div class="ttname"><a href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a></div><div class="ttdeci">static volatile int checksum</div><div class="ttdef"><b>Definition:</b> <a href="tests_2adler32_8c_source.html#l00030">adler32.c:30</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a1b4458780fbdf7fc23b18a7cb5327371"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a1b4458780fbdf7fc23b18a7cb5327371">AV_PKT_DATA_S12M_TIMECODE</a></div><div class="ttdeci">@ AV_PKT_DATA_S12M_TIMECODE</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00291">packet.h:291</a></div></div>
<div class="ttc" id="astruct_a_v_packet_queue_html_a1e133caa4c7d614471d8b55f6bd83662"><div class="ttname"><a href="struct_a_v_packet_queue.html#a1e133caa4c7d614471d8b55f6bd83662">AVPacketQueue::last_pkt</a></div><div class="ttdeci">AVPacketList * last_pkt</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00078">decklink_common.h:78</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga8f5b632a03ce83ac8e025894b1fc307a"><div class="ttname"><a href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a></div><div class="ttdeci">#define AV_INPUT_BUFFER_PADDING_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00215">avcodec.h:215</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a215efed993567deadcea30a74ed05d6c"><div class="ttname"><a href="os2threads_8h.html#a215efed993567deadcea30a74ed05d6c">pthread_cond_signal</a></div><div class="ttdeci">static av_always_inline int pthread_cond_signal(pthread_cond_t *cond)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00152">os2threads.h:152</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a4b8a29937744c722f35fccafb91ebdf0"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a4b8a29937744c722f35fccafb91ebdf0">AV_PIX_FMT_UYVY422</a></div><div class="ttdeci">@ AV_PIX_FMT_UYVY422</div><div class="ttdoc">packed YUV 4:2:2, 16bpp, Cb Y0 Cr Y1</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00081">pixfmt.h:81</a></div></div>
<div class="ttc" id="asinewin__tablegen__template_8c_html_a3508a98d3ee7e2c9a4841fe264cf70f7"><div class="ttname"><a href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a></div><div class="ttdeci">#define FF_ARRAY_ELEMS(a)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen__template_8c_source.html#l00038">sinewin_tablegen_template.c:38</a></div></div>
<div class="ttc" id="adecklink__common_8h_html_afddf64290d2130f798d72e7ce33376caa66a3c638b3f4a3d2e144245311b29241"><div class="ttname"><a href="decklink__common_8h.html#afddf64290d2130f798d72e7ce33376caa66a3c638b3f4a3d2e144245311b29241">DIRECTION_IN</a></div><div class="ttdeci">@ DIRECTION_IN</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00156">decklink_common.h:156</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="ammaldec_8c_html_a50b28ae8c033ca7cae2dd18201208586"><div class="ttname"><a href="mmaldec_8c.html#a50b28ae8c033ca7cae2dd18201208586">input_callback</a></div><div class="ttdeci">static void input_callback(MMAL_PORT_T *port, MMAL_BUFFER_HEADER_T *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="mmaldec_8c_source.html#l00201">mmaldec.c:201</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ab5bf43ceeffd5c440d539ae2ed025827"><div class="ttname"><a href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a></div><div class="ttdeci">the frame and frame reference mechanism is intended to as much as expensive copies of that data while still allowing the filters to produce correct results The data is stored in buffers represented by AVFrame structures Several references can point to the same frame buffer</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00049">filter_design.txt:49</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html"><div class="ttname"><a href="structdecklink__ctx.html">decklink_ctx</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00088">decklink_common.h:88</a></div></div>
<div class="ttc" id="aebur128_8h_html_a1a6b6fb557d8d37d59700faf4e4c9167"><div class="ttname"><a href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> <a href="ebur128_8h_source.html#l00083">ebur128.h:83</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_a422899113430f0ee63a731f0263c68ee"><div class="ttname"><a href="structdecklink__ctx.html#a422899113430f0ee63a731f0263c68ee">decklink_ctx::teletext_lines</a></div><div class="ttdeci">int64_t teletext_lines</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00131">decklink_common.h:131</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html"><div class="ttname"><a href="struct_a_v_format_context.html">AVFormatContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01223">avformat.h:1223</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a0a9c1a42f4d6c8014adf7fa225779fb3"><div class="ttname"><a href="decklink__dec_8cpp.html#a0a9c1a42f4d6c8014adf7fa225779fb3">get_pkt_pts</a></div><div class="ttdeci">static int64_t get_pkt_pts(IDeckLinkVideoInputFrame *videoFrame, IDeckLinkAudioInputPacket *audioFrame, int64_t wallclock, int64_t abs_wallclock, DecklinkPtsSource pts_src, AVRational time_base, int64_t *initial_pts, int copyts)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00738">decklink_dec.cpp:738</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a05e112e6f8da37a216c0271c96e6529e"><div class="ttname"><a href="structdecklink__cctx.html#a05e112e6f8da37a216c0271c96e6529e">decklink_cctx::duplex_mode</a></div><div class="ttdeci">int duplex_mode</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00050">decklink_common_c.h:50</a></div></div>
<div class="ttc" id="astruct_k_l_v_packet_html"><div class="ttname"><a href="struct_k_l_v_packet.html">KLVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00067">mxf.h:67</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a9d3f557493be8b4aa94d5733565ca1e1"><div class="ttname"><a href="structdecklink__cctx.html#a9d3f557493be8b4aa94d5733565ca1e1">decklink_cctx::audio_depth</a></div><div class="ttdeci">int audio_depth</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00049">decklink_common_c.h:49</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_ab951888caf2c88d9003ace49ee030cb3"><div class="ttname"><a href="decklink__dec_8cpp.html#ab951888caf2c88d9003ace49ee030cb3">MAX_WIDTH_VANC</a></div><div class="ttdeci">#define MAX_WIDTH_VANC</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00057">decklink_dec.cpp:57</a></div></div>
<div class="ttc" id="adecklink__common__c_8h_html_a15aeddb31c774af4bdc24bb66de0d7e5a35e725fca3053d932b908971d76481d8"><div class="ttname"><a href="decklink__common__c_8h.html#a15aeddb31c774af4bdc24bb66de0d7e5a35e725fca3053d932b908971d76481d8">PTS_SRC_VIDEO</a></div><div class="ttdeci">@ PTS_SRC_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00030">decklink_common_c.h:30</a></div></div>
<div class="ttc" id="astruct_a_v_packet_list_html_a2d7ef80c60c0c3a804248ab691b9c5a7"><div class="ttname"><a href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">AVPacketList::pkt</a></div><div class="ttdeci">AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00397">packet.h:397</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a3bf81872813551fe9343dd0e09993e38"><div class="ttname"><a href="struct_a_v_packet.html#a3bf81872813551fe9343dd0e09993e38">AVPacket::buf</a></div><div class="ttdeci">AVBufferRef * buf</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00346">packet.h:346</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html"><div class="ttname"><a href="classdecklink__input__callback.html">decklink_input_callback</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00691">decklink_dec.cpp:692</a></div></div>
<div class="ttc" id="aos2threads_8h_html_af2ed122199f455b63a734ae9b592d286"><div class="ttname"><a href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a></div><div class="ttdeci">static av_always_inline int pthread_cond_wait(pthread_cond_t *cond, pthread_mutex_t *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00192">os2threads.h:192</a></div></div>
<div class="ttc" id="atime_8c_html_aebf7f9c94187487c31d26fa3da816468"><div class="ttname"><a href="time_8c.html#aebf7f9c94187487c31d26fa3da816468">av_gettime</a></div><div class="ttdeci">int64_t av_gettime(void)</div><div class="ttdef"><b>Definition:</b> <a href="time_8c_source.html#l00039">time.c:39</a></div></div>
<div class="ttc" id="asonic_8c_html_aee201839e95f7edeff51ad9c8e072bda"><div class="ttname"><a href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a></div><div class="ttdeci">static int shift(int a, int b)</div><div class="ttdef"><b>Definition:</b> <a href="sonic_8c_source.html#l00082">sonic.c:82</a></div></div>
<div class="ttc" id="astruct_v_a_n_c_line_number_html_abd22e293e8cd922f8324a6252e603a8b"><div class="ttname"><a href="struct_v_a_n_c_line_number.html#abd22e293e8cd922f8324a6252e603a8b">VANCLineNumber::vanc_start</a></div><div class="ttdeci">int vanc_start</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00062">decklink_dec.cpp:62</a></div></div>
<div class="ttc" id="aregdef_8h_html_a71234e05f922466327ffed37b019c7fb"><div class="ttname"><a href="regdef_8h.html#a71234e05f922466327ffed37b019c7fb">tc</a></div><div class="ttdeci">#define tc</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00069">regdef.h:69</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_a5ada2d82f9b95a681e8fde59590af00f"><div class="ttname"><a href="classdecklink__allocator.html#a5ada2d82f9b95a681e8fde59590af00f">decklink_allocator::Release</a></div><div class="ttdeci">virtual ULONG STDMETHODCALLTYPE Release(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00132">decklink_dec.cpp:132</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea6384417ba463d7aeb03015797cff3349"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6384417ba463d7aeb03015797cff3349">AV_CODEC_ID_PCM_S32LE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S32LE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00316">codec_id.h:316</a></div></div>
<div class="ttc" id="aavutil_8h_html"><div class="ttname"><a href="avutil_8h.html">avutil.h</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_a988744a389cfc570ca0cb757408dd8e4"><div class="ttname"><a href="decklink__common_8cpp.html#a988744a389cfc570ca0cb757408dd8e4">ff_decklink_set_format</a></div><div class="ttdeci">int ff_decklink_set_format(AVFormatContext *avctx, int width, int height, int tb_num, int tb_den, enum AVFieldOrder field_order, decklink_direction_t direction)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00199">decklink_common.cpp:199</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_a5cff127fb30353fefc3c713560ab4457"><div class="ttname"><a href="classdecklink__allocator.html#a5cff127fb30353fefc3c713560ab4457">decklink_allocator::AddRef</a></div><div class="ttdeci">virtual ULONG STDMETHODCALLTYPE AddRef(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00131">decklink_dec.cpp:131</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a3859a4129dbce920c88bdbeb078d4728"><div class="ttname"><a href="writing__filters_8txt.html#a3859a4129dbce920c88bdbeb078d4728">it</a></div><div class="ttdeci">s EdgeDetect Foobar g libavfilter vf_edgedetect c libavfilter vf_foobar c edit libavfilter and add an entry for foobar following the pattern of the other filters edit libavfilter allfilters and add an entry for foobar following the pattern of the other filters configure make j&lt; whatever &gt; ffmpeg ffmpeg i you should get a foobar png with Lena edge detected That s it</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00031">writing_filters.txt:31</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a></div><div class="ttdeci">@ AV_FIELD_PROGRESSIVE</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00038">codec_par.h:38</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html"><div class="ttname"><a href="struct_a_v_stream.html">AVStream</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00869">avformat.h:869</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_aa1939e3875e647411dca69e27a7fca66"><div class="ttname"><a href="classdecklink__input__callback.html#aa1939e3875e647411dca69e27a7fca66">decklink_input_callback::_refs</a></div><div class="ttdeci">std::atomic&lt; int &gt; _refs</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00704">decklink_dec.cpp:704</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_a02a2b0b2115f6e3e13e212f892be918b"><div class="ttname"><a href="classdecklink__allocator.html#a02a2b0b2115f6e3e13e212f892be918b">decklink_allocator::QueryInterface</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE QueryInterface(REFIID iid, LPVOID *ppv)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00130">decklink_dec.cpp:130</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a3baf904a465ea9fe5d53ba98bde0c162"><div class="ttname"><a href="structdecklink__cctx.html#a3baf904a465ea9fe5d53ba98bde0c162">decklink_cctx::tc_format</a></div><div class="ttdeci">int tc_format</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00055">decklink_common_c.h:55</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a079eab092887563f2bef9106c6120089"><div class="ttname"><a href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a></div><div class="ttdeci">#define av_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00034">tableprint_vlc.h:34</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_a3c6e34a05b4d399777130a5163cdb982"><div class="ttname"><a href="structdecklink__ctx.html#a3c6e34a05b4d399777130a5163cdb982">decklink_ctx::autodetect</a></div><div class="ttdeci">int autodetect</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00145">decklink_common.h:145</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga8d9c2de72b310cef8e6a28c9cd3acbbe"><div class="ttname"><a href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a></div><div class="ttdeci">int av_dict_set(AVDictionary **pm, const char *key, const char *value, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00070">dict.c:70</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a622e758be29fd500aed0ffdc069550f7"><div class="ttname"><a href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">AVPacket::duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00381">packet.h:381</a></div></div>
<div class="ttc" id="aimgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ad998d9449c5c948d9b9e5078d38f4fa2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ad998d9449c5c948d9b9e5078d38f4fa2">AV_PIX_FMT_0RGB</a></div><div class="ttdeci">@ AV_PIX_FMT_0RGB</div><div class="ttdoc">packed RGB 8:8:8, 32bpp, XRGBXRGB... X=unused/undefined</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00237">pixfmt.h:237</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_a353893125d5fc1211070c8c388bdb778"><div class="ttname"><a href="structdecklink__cctx.html#a353893125d5fc1211070c8c388bdb778">decklink_cctx::video_input</a></div><div class="ttdeci">int video_input</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00054">decklink_common_c.h:54</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a17afa58b2bc574dedcd1cc02e1fdf165"><div class="ttname"><a href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a></div><div class="ttdeci">The exact code depends on how similar the blocks are and how related they are to the block</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00207">filter_design.txt:207</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_aecb8976d236302490093efdc6b25e69a"><div class="ttname"><a href="decklink__dec_8cpp.html#aecb8976d236302490093efdc6b25e69a">extract_luma_from_v210</a></div><div class="ttdeci">static void extract_luma_from_v210(uint16_t *dst, const uint8_t *src, int width)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00192">decklink_dec.cpp:192</a></div></div>
<div class="ttc" id="astruct_a_v_packet_queue_html_a2bf78c8844f5ae204b4f642cc5627c06"><div class="ttname"><a href="struct_a_v_packet_queue.html#a2bf78c8844f5ae204b4f642cc5627c06">AVPacketQueue::max_q_size</a></div><div class="ttdeci">int64_t max_q_size</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00085">decklink_common.h:85</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a594d985f6552b34e8a640926794b959d"><div class="ttname"><a href="decklink__dec_8cpp.html#a594d985f6552b34e8a640926794b959d">avpacket_queue_init</a></div><div class="ttdeci">static void avpacket_queue_init(AVFormatContext *avctx, AVPacketQueue *q)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00472">decklink_dec.cpp:472</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a90293d12cef762b6df0139309d13fdbf"><div class="ttname"><a href="os2threads_8h.html#a90293d12cef762b6df0139309d13fdbf">pthread_cond_init</a></div><div class="ttdeci">static av_always_inline int pthread_cond_init(pthread_cond_t *cond, const pthread_condattr_t *attr)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00133">os2threads.h:133</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga334ea23fd9e492cd0e718330f2353b6b"><div class="ttname"><a href="group__lavu__error.html#ga334ea23fd9e492cd0e718330f2353b6b">AVERROR_EXIT</a></div><div class="ttdeci">#define AVERROR_EXIT</div><div class="ttdoc">Immediate exit was requested; the called function should not be restarted.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00056">error.h:56</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a024b5483a4d6ad784022912c97071a63"><div class="ttname"><a href="classdecklink__input__callback.html#a024b5483a4d6ad784022912c97071a63">decklink_input_callback::ctx</a></div><div class="ttdeci">decklink_ctx * ctx</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00706">decklink_dec.cpp:706</a></div></div>
<div class="ttc" id="atimecode_8c_html_a02596c9d431329a3acc646c943b1c800"><div class="ttname"><a href="timecode_8c.html#a02596c9d431329a3acc646c943b1c800">av_timecode_init_from_string</a></div><div class="ttdeci">int av_timecode_init_from_string(AVTimecode *tc, AVRational rate, const char *str, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8c_source.html#l00232">timecode.c:232</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html"><div class="ttname"><a href="classdecklink__allocator.html">decklink_allocator</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00106">decklink_dec.cpp:107</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="astruct_a_v_packet_queue_html_a7bd9dfb32d49b9907d62bc63941ba168"><div class="ttname"><a href="struct_a_v_packet_queue.html#a7bd9dfb32d49b9907d62bc63941ba168">AVPacketQueue::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00082">decklink_common.h:82</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_ab37d99fae671f0f505936496b5a973b5"><div class="ttname"><a href="structdecklink__ctx.html#ab37d99fae671f0f505936496b5a973b5">decklink_ctx::tc_format</a></div><div class="ttdeci">BMDTimecodeFormat tc_format</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00103">decklink_common.h:103</a></div></div>
<div class="ttc" id="adecklink__common_8cpp_html_ab15a26f91f4ecec4f6aeda0b98165dcd"><div class="ttname"><a href="decklink__common_8cpp.html#ab15a26f91f4ecec4f6aeda0b98165dcd">ff_decklink_list_devices</a></div><div class="ttdeci">int ff_decklink_list_devices(AVFormatContext *avctx, struct AVDeviceInfoList *device_list, int show_inputs, int show_outputs)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8cpp_source.html#l00335">decklink_common.cpp:335</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_ab72e41d28e4e26bc81f51c8a3adbfec0"><div class="ttname"><a href="decklink__dec_8cpp.html#ab72e41d28e4e26bc81f51c8a3adbfec0">handle_klv</a></div><div class="ttdeci">static void handle_klv(AVFormatContext *avctx, decklink_ctx *ctx, IDeckLinkVideoInputFrame *videoFrame, int64_t pts)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00588">decklink_dec.cpp:588</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_af8dc841f244a3a3803f0c78bf4d7741e"><div class="ttname"><a href="structdecklink__ctx.html#af8dc841f244a3a3803f0c78bf4d7741e">decklink_ctx::raw_format</a></div><div class="ttdeci">BMDPixelFormat raw_format</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00137">decklink_common.h:137</a></div></div>
<div class="ttc" id="astructdecklink__cctx_html_af94272c404cb69b4703114f54f69c9ac"><div class="ttname"><a href="structdecklink__cctx.html#af94272c404cb69b4703114f54f69c9ac">decklink_cctx::teletext_lines</a></div><div class="ttdeci">int64_t teletext_lines</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common__c_8h_source.html#l00046">decklink_common_c.h:46</a></div></div>
<div class="ttc" id="aclassdecklink__input__callback_html_a7605d371673e1459937bb6fe0e01dd0f"><div class="ttname"><a href="classdecklink__input__callback.html#a7605d371673e1459937bb6fe0e01dd0f">decklink_input_callback::AddRef</a></div><div class="ttdeci">virtual ULONG STDMETHODCALLTYPE AddRef(void)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00725">decklink_dec.cpp:725</a></div></div>
<div class="ttc" id="aswscale_8txt_html_aa111755617738a3e99d08d488ed0d3c4"><div class="ttname"><a href="swscale_8txt.html#aa111755617738a3e99d08d488ed0d3c4">line</a></div><div class="ttdeci">The official guide to swscale for confused that consecutive non overlapping rectangles of slice_bottom special converter These generally are unscaled converters of common like for each output line the vertical scaler pulls lines from a ring buffer When the ring buffer does not contain the wanted line</div><div class="ttdef"><b>Definition:</b> <a href="swscale_8txt_source.html#l00040">swscale.txt:40</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_af5c2d5791ba0967a0dca29df1467b040"><div class="ttname"><a href="structdecklink__ctx.html#af5c2d5791ba0967a0dca29df1467b040">decklink_ctx::dropped</a></div><div class="ttdeci">unsigned int dropped</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00120">decklink_common.h:120</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_ad63fb11cc1415e278e09ddc676e8a1ad"><div class="ttname"><a href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">AVStream::r_frame_rate</a></div><div class="ttdeci">AVRational r_frame_rate</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01011">avformat.h:1011</a></div></div>
<div class="ttc" id="astructdecklink__ctx_html_a95eeac9ebbfdb49e4979cc9131fa3aa5"><div class="ttname"><a href="structdecklink__ctx.html#a95eeac9ebbfdb49e4979cc9131fa3aa5">decklink_ctx::enable_klv</a></div><div class="ttdeci">int enable_klv</div><div class="ttdef"><b>Definition:</b> <a href="decklink__common_8h_source.html#l00130">decklink_common.h:130</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gac9cb9756175b96e7441575803757fb73"><div class="ttname"><a href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a></div><div class="ttdeci">void av_init_packet(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00035">avpacket.c:35</a></div></div>
<div class="ttc" id="affprobe_8c_html_a3bd1ad5edf8fc93f783af77e8cd6ee9a"><div class="ttname"><a href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="ffprobe_8c_source.html#l00062">ffprobe.c:62</a></div></div>
<div class="ttc" id="astruct_v_a_n_c_line_number_html"><div class="ttname"><a href="struct_v_a_n_c_line_number.html">VANCLineNumber</a></div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00060">decklink_dec.cpp:60</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a8eaa5b3b223101eba57c9363313fb418"><div class="ttname"><a href="decklink__dec_8cpp.html#a8eaa5b3b223101eba57c9363313fb418">clear_parity_bits</a></div><div class="ttdeci">static void clear_parity_bits(uint16_t *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00163">decklink_dec.cpp:163</a></div></div>
<div class="ttc" id="aclassdecklink__allocator_html_abc649efb1d0e1d2d37e373861d052902"><div class="ttname"><a href="classdecklink__allocator.html#abc649efb1d0e1d2d37e373861d052902">decklink_allocator::AllocateBuffer</a></div><div class="ttdeci">virtual HRESULT STDMETHODCALLTYPE AllocateBuffer(unsigned int bufferSize, void **allocatedBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00113">decklink_dec.cpp:113</a></div></div>
<div class="ttc" id="adecklink__dec_8cpp_html_a376a9d4f4998c3ce294e31abd4c160cc"><div class="ttname"><a href="decklink__dec_8cpp.html#a376a9d4f4998c3ce294e31abd4c160cc">vanc_to_cc</a></div><div class="ttdeci">static uint8_t * vanc_to_cc(AVFormatContext *avctx, uint16_t *buf, size_t words, unsigned &amp;cc_count)</div><div class="ttdef"><b>Definition:</b> <a href="decklink__dec_8cpp_source.html#l00329">decklink_dec.cpp:329</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
