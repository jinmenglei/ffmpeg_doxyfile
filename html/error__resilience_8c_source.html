<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/error_resilience.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">error_resilience.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="error__resilience_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Error resilience / concealment</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2002-2004 Michael Niedermayer &lt;michaelni@gmx.at&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="limits_8h.html">limits.h</a>&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">libavutil/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="error__resilience_8h.html">error_resilience.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="me__cmp_8h.html">me_cmp.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegutils_8h.html">mpegutils.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegvideo_8h.html">mpegvideo.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rectangle_8h.html">rectangle.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2thread_8h.html">thread.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libswscale_2version_8h.html">version.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#a2a70ccc66327a6bf4a21b2e7c8d371fa">   44</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#a2a70ccc66327a6bf4a21b2e7c8d371fa">set_mv_strides</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, ptrdiff_t *mv_step, ptrdiff_t *<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>)</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        *mv_step = 4;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        *<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width * 4;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        *mv_step = 2;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        *<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#aa222e3fd20c93eaf918936937543e550">   59</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#aa222e3fd20c93eaf918936937543e550">put_dc</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_y, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_cb,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                   <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_cr, <span class="keywordtype">int</span> mb_x, <span class="keywordtype">int</span> mb_y)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;{</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">int</span> *linesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;linesize;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>, dcu, dcv, y, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[0][mb_x * 2 + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp;  1) + (mb_y * 2 + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;&gt; 1)) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride];</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> &lt; 0)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = 0;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> &gt; 2040)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = 2040;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">for</span> (y = 0; y &lt; 8; y++) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="keywordtype">int</span> x;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="keywordflow">for</span> (x = 0; x &lt; 8; x++)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                dest_y[x + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp;  1) * 8 + (y + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;&gt; 1) * 8) * linesize[0]] = <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> / 8;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    dcu = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[1][mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    dcv = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[2][mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (dcu &lt; 0)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        dcu = 0;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dcu &gt; 2040)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        dcu = 2040;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (dcv &lt; 0)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        dcv = 0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dcv &gt; 2040)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        dcv = 2040;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (dest_cr)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; 8; y++) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordtype">int</span> x;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; 8; x++) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            dest_cb[x + y * linesize[1]] = dcu / 8;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            dest_cr[x + y * linesize[2]] = dcv / 8;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#ab6e33e69e6e94ae22ed1d453efe327d2">   97</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#ab6e33e69e6e94ae22ed1d453efe327d2">filter181</a>(int16_t *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>, ptrdiff_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">/* horizontal filter */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">for</span> (y = 1; y &lt; <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> - 1; y++) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordtype">int</span> prev_dc = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[0 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">for</span> (x = 1; x &lt; <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> - 1; x++) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = -prev_dc +</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                 <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[x     + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] * 8 -</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                 <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[x + 1 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = (av_clip(<a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>, INT_MIN/10923, INT_MAX/10923 - 32768) * 10923 + 32768) &gt;&gt; 16;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            prev_dc = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[x + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[x + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">/* vertical filter */</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">for</span> (x = 1; x &lt; <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> - 1; x++) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordtype">int</span> prev_dc = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[x];</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">for</span> (y = 1; y &lt; <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> - 1; y++) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = -prev_dc +</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                 <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[x +  y      * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] * 8 -</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                 <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[x + (y + 1) * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = (av_clip(<a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>, INT_MIN/10923, INT_MAX/10923 - 32768) * 10923 + 32768) &gt;&gt; 16;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            prev_dc = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[x + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>[x + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#ad8231478b0fe9ead385b843c2eb57482">  138</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#ad8231478b0fe9ead385b843c2eb57482">guess_dc</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int16_t *<a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>, <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                     <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, ptrdiff_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <span class="keywordtype">int</span> is_luma)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">int</span> b_x, b_y;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    int16_t  (*col )[4] = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>*<span class="keyword">sizeof</span>( int16_t)*4);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    uint32_t (*dist)[4] = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>*<span class="keyword">sizeof</span>(uint32_t)*4);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span>(!col || !dist) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;guess_dc() is out of memory\n&quot;</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">for</span>(b_y=0; b_y&lt;<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>; b_y++){</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structcolor.html">color</a>= 1024;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>= -1;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">for</span>(b_x=0; b_x&lt;<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>; b_x++){</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordtype">int</span> mb_index_j= (b_x&gt;&gt;is_luma) + (b_y&gt;&gt;is_luma)*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordtype">int</span> error_j= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_index_j];</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keywordtype">int</span> intra_j = <a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_index_j]);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">if</span>(intra_j==0 || !(error_j&amp;<a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a>)){</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <a class="code" href="structcolor.html">color</a>= <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>= b_x;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            col [b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][1]= <a class="code" href="log_8c.html#a3b4f0685dba79673184dceeecd4ca93f">color</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            dist[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][1]= <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> &gt;= 0 ? b_x-<a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> : 9999;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="structcolor.html">color</a>= 1024;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>= -1;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">for</span>(b_x=<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>-1; b_x&gt;=0; b_x--){</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordtype">int</span> mb_index_j= (b_x&gt;&gt;is_luma) + (b_y&gt;&gt;is_luma)*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="keywordtype">int</span> error_j= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_index_j];</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordtype">int</span> intra_j = <a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_index_j]);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span>(intra_j==0 || !(error_j&amp;<a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a>)){</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <a class="code" href="structcolor.html">color</a>= <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>= b_x;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            col [b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][0]= <a class="code" href="log_8c.html#a3b4f0685dba79673184dceeecd4ca93f">color</a>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            dist[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][0]= <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> &gt;= 0 ? <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>-b_x : 9999;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">for</span>(b_x=0; b_x&lt;<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>; b_x++){</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structcolor.html">color</a>= 1024;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>= -1;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">for</span>(b_y=0; b_y&lt;<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>; b_y++){</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordtype">int</span> mb_index_j= (b_x&gt;&gt;is_luma) + (b_y&gt;&gt;is_luma)*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordtype">int</span> error_j= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_index_j];</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordtype">int</span> intra_j = <a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_index_j]);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">if</span>(intra_j==0 || !(error_j&amp;<a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a>)){</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <a class="code" href="structcolor.html">color</a>= <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>= b_y;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            col [b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][3]= <a class="code" href="log_8c.html#a3b4f0685dba79673184dceeecd4ca93f">color</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            dist[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][3]= <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> &gt;= 0 ? b_y-<a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> : 9999;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="structcolor.html">color</a>= 1024;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>= -1;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">for</span>(b_y=<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-1; b_y&gt;=0; b_y--){</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordtype">int</span> mb_index_j= (b_x&gt;&gt;is_luma) + (b_y&gt;&gt;is_luma)*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordtype">int</span> error_j= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_index_j];</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordtype">int</span> intra_j = <a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_index_j]);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">if</span>(intra_j==0 || !(error_j&amp;<a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a>)){</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                <a class="code" href="structcolor.html">color</a>= <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>= b_y;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            col [b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][2]= <a class="code" href="log_8c.html#a3b4f0685dba79673184dceeecd4ca93f">color</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            dist[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][2]= <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> &gt;= 0 ? <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>-b_y : 9999;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">for</span> (b_y = 0; b_y &lt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>; b_y++) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">for</span> (b_x = 0; b_x &lt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>; b_x++) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordtype">int</span> mb_index, <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, j;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            int64_t guess, weight_sum;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            mb_index = (b_x &gt;&gt; is_luma) + (b_y &gt;&gt; is_luma) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_index];</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a69ee557358fd6cd78c0d051e2532c89f">IS_INTER</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_index]))</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="keywordflow">continue</span>; <span class="comment">// inter</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">if</span> (!(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a>))</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <span class="keywordflow">continue</span>; <span class="comment">// dc-ok</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            weight_sum = 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            guess      = 0;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                int64_t <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>  = 256 * 256 * 256 * 16 / <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(dist[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][j], 1);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                guess          += <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>*(int64_t)col[b_x + b_y*<a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>][j];</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                weight_sum     += <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            guess = (guess + weight_sum / 2) / weight_sum;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>[b_x + b_y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = guess;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;col);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;dist);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#a4f3325359abceb30bde7f8dbce611b14">  241</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#a4f3325359abceb30bde7f8dbce611b14">h_block_filter</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst, <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>,</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                           <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, ptrdiff_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <span class="keywordtype">int</span> is_luma)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">int</span> b_x, b_y;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    ptrdiff_t mvx_stride, mvy_stride;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = <a class="code" href="motionpixels__tablegen_8c.html#a5a80f2e1a53f6569c66bd672237054c6">ff_crop_tab</a> + <a class="code" href="mathops_8h.html#a6b63e9916b6b0ead1e780a4bdb0a53c6">MAX_NEG_CROP</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="error__resilience_8c.html#a2a70ccc66327a6bf4a21b2e7c8d371fa">set_mv_strides</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;mvx_stride, &amp;mvy_stride);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    mvx_stride &gt;&gt;= is_luma;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    mvy_stride *= mvx_stride;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">for</span> (b_y = 0; b_y &lt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>; b_y++) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">for</span> (b_x = 0; b_x &lt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> - 1; b_x++) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordtype">int</span> y;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordtype">int</span> left_status  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[( b_x      &gt;&gt; is_luma) + (b_y &gt;&gt; is_luma) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordtype">int</span> right_status = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[((b_x + 1) &gt;&gt; is_luma) + (b_y &gt;&gt; is_luma) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordtype">int</span> left_intra   = <a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[( b_x      &gt;&gt; is_luma) + (b_y &gt;&gt; is_luma) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride]);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordtype">int</span> right_intra  = <a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[((b_x + 1) &gt;&gt; is_luma) + (b_y &gt;&gt; is_luma) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride]);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordtype">int</span> left_damage  = left_status &amp; <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordtype">int</span> right_damage = right_status &amp; <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>       = b_x * 8 + b_y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> * 8;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            int16_t *left_mv  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mvy_stride * b_y + mvx_stride *  b_x];</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            int16_t *right_mv = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mvy_stride * b_y + mvx_stride * (b_x + 1)];</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">if</span> (!(left_damage || right_damage))</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="keywordflow">continue</span>; <span class="comment">// both undamaged</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">if</span> ((!left_intra) &amp;&amp; (!right_intra) &amp;&amp;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(left_mv[0] - right_mv[0]) +</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(left_mv[1] + right_mv[1]) &lt; 2)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordflow">for</span> (y = 0; y &lt; 8; y++) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, d;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 7 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 6 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 8 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 7 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 9 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 8 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                d = <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>) - ((<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>) + <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>) + 1) &gt;&gt; 1);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                d = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(d, 0);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &lt; 0)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                    d = -d;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="keywordflow">if</span> (d == 0)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <span class="keywordflow">if</span> (!(left_damage &amp;&amp; right_damage))</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                    d = d * 16 / 9;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="keywordflow">if</span> (left_damage) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 7 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 7 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] + ((d * 7) &gt;&gt; 4)];</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 6 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 6 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] + ((d * 5) &gt;&gt; 4)];</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 5 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 5 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] + ((d * 3) &gt;&gt; 4)];</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 4 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 4 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] + ((d * 1) &gt;&gt; 4)];</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                <span class="keywordflow">if</span> (right_damage) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 8 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> +  8 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - ((d * 7) &gt;&gt; 4)];</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 9 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> +  9 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - ((d * 5) &gt;&gt; 4)];</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 10+ y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 10 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - ((d * 3) &gt;&gt; 4)];</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 11+ y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + 11 + y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - ((d * 1) &gt;&gt; 4)];</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#a19847bd5e63ba0b58442c40e226c7175">  310</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#a19847bd5e63ba0b58442c40e226c7175">v_block_filter</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst, <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                           ptrdiff_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <span class="keywordtype">int</span> is_luma)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;{</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">int</span> b_x, b_y;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    ptrdiff_t mvx_stride, mvy_stride;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a> = <a class="code" href="motionpixels__tablegen_8c.html#a5a80f2e1a53f6569c66bd672237054c6">ff_crop_tab</a> + <a class="code" href="mathops_8h.html#a6b63e9916b6b0ead1e780a4bdb0a53c6">MAX_NEG_CROP</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="error__resilience_8c.html#a2a70ccc66327a6bf4a21b2e7c8d371fa">set_mv_strides</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;mvx_stride, &amp;mvy_stride);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    mvx_stride &gt;&gt;= is_luma;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    mvy_stride *= mvx_stride;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">for</span> (b_y = 0; b_y &lt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> - 1; b_y++) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">for</span> (b_x = 0; b_x &lt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>; b_x++) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordtype">int</span> x;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordtype">int</span> top_status    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[(b_x &gt;&gt; is_luma) +  (b_y      &gt;&gt; is_luma) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordtype">int</span> bottom_status = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[(b_x &gt;&gt; is_luma) + ((b_y + 1) &gt;&gt; is_luma) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordtype">int</span> top_intra     = <a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[(b_x &gt;&gt; is_luma) + ( b_y      &gt;&gt; is_luma) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride]);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="keywordtype">int</span> bottom_intra  = <a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[(b_x &gt;&gt; is_luma) + ((b_y + 1) &gt;&gt; is_luma) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride]);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordtype">int</span> top_damage    = top_status &amp; <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordtype">int</span> bottom_damage = bottom_status &amp; <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>        = b_x * 8 + b_y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> * 8;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            int16_t *top_mv    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mvy_stride *  b_y      + mvx_stride * b_x];</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            int16_t *bottom_mv = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mvy_stride * (b_y + 1) + mvx_stride * b_x];</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">if</span> (!(top_damage || bottom_damage))</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordflow">continue</span>; <span class="comment">// both undamaged</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="keywordflow">if</span> ((!top_intra) &amp;&amp; (!bottom_intra) &amp;&amp;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(top_mv[0] - bottom_mv[0]) +</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(top_mv[1] + bottom_mv[1]) &lt; 2)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">for</span> (x = 0; x &lt; 8; x++) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, d;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 7 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 6 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 8 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 7 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 9 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 8 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>];</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                d = <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>) - ((<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>) + <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>) + 1) &gt;&gt; 1);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                d = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(d, 0);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &lt; 0)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    d = -d;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">if</span> (d == 0)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <span class="keywordflow">if</span> (!(top_damage &amp;&amp; bottom_damage))</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    d = d * 16 / 9;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">if</span> (top_damage) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  7 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  7 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] + ((d * 7) &gt;&gt; 4)];</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  6 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  6 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] + ((d * 5) &gt;&gt; 4)];</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  5 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  5 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] + ((d * 3) &gt;&gt; 4)];</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  4 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  4 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] + ((d * 1) &gt;&gt; 4)];</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                <span class="keywordflow">if</span> (bottom_damage) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  8 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  8 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - ((d * 7) &gt;&gt; 4)];</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  9 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x +  9 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - ((d * 5) &gt;&gt; 4)];</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 10 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 10 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - ((d * 3) &gt;&gt; 4)];</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 11 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] = <a class="code" href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a>[dst[<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + x + 11 * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>] - ((d * 1) &gt;&gt; 4)];</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">  377</a></span>&#160;<span class="preprocessor">#define MV_FROZEN    8</span></div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#af85bea6c4ce11b37b76142639bc79fd1">  378</a></span>&#160;<span class="preprocessor">#define MV_CHANGED   4</span></div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#a4a00de0a91dcd454cc8ff8638f1a52c2">  379</a></span>&#160;<span class="preprocessor">#define MV_UNCHANGED 2</span></div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#aa30c6b3733564bbd1f159c4554c07b75">  380</a></span>&#160;<span class="preprocessor">#define MV_LISTED    1</span></div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">  381</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a>(<span class="keywordtype">int</span> (*blocklist)[2], <span class="keywordtype">int</span> *blocklist_length, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>, <span class="keywordtype">int</span> mb_x, <span class="keywordtype">int</span> mb_y, <span class="keywordtype">int</span> mb_xy)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;{</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy])</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy] = <a class="code" href="error__resilience_8c.html#aa30c6b3733564bbd1f159c4554c07b75">MV_LISTED</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    blocklist[ *blocklist_length   ][0] = mb_x;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    blocklist[(*blocklist_length)++][1] = mb_y;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#a2983a97e5a99dda462cb7136740aacba">  390</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#a2983a97e5a99dda462cb7136740aacba">guess_mv</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;{</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> (*blocklist)[2], (*next_blocklist)[2];</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">const</span> ptrdiff_t mb_stride = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> mb_width  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordtype">int</span> mb_height = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, depth, num_avail;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">int</span> mb_x, mb_y;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    ptrdiff_t mot_step, mot_stride;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordtype">int</span> blocklist_length, next_blocklist_length;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;data[0])</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        mb_height = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(mb_height, (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;height+15)&gt;&gt;4);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f-&gt;data[0])</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        mb_height = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(mb_height, (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f-&gt;height+15)&gt;&gt;4);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    blocklist      = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> (*)[2])<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;er_temp_buffer;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    next_blocklist = blocklist + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>          = (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)(next_blocklist + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="error__resilience_8c.html#a2a70ccc66327a6bf4a21b2e7c8d371fa">set_mv_strides</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;mot_step, &amp;mot_stride);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    num_avail = 0;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.motion_val[0])</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.tf, mb_height-1, 0);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mb_width * mb_height; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = 0;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy]))</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = <a class="code" href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">MV_FROZEN</a>; <span class="comment">// intra // FIXME check</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a>))</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = <a class="code" href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">MV_FROZEN</a>; <span class="comment">// inter with undamaged MV</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy] = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> == <a class="code" href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">MV_FROZEN</a>)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            num_avail++;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;data[0] &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.motion_val[0]){</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_y= mb_xy / <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_x= mb_xy % <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mot_index= (mb_x + mb_y*mot_stride) * mot_step;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index][0]= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.motion_val[0][mot_index][0];</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index][1]= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.motion_val[0][mot_index][1];</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[0][4*mb_xy]      = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.ref_index[0][4*mb_xy];</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">if</span> ((!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;error_concealment&amp;<a class="code" href="avcodec_8h.html#ae1bc421e255d43c6b499ad8d7c6ccb4e">FF_EC_GUESS_MVS</a>)) ||</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        num_avail &lt;= <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(mb_width, mb_height) / 2) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">for</span> (mb_y = 0; mb_y &lt; mb_height; mb_y++) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">for</span> (mb_x = 0; mb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; mb_x++) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                <span class="keywordtype">int</span> mv_dir = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;data[0]) ? <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a> : <a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy]))</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy] &amp; <a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a>))</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] = 0;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] = 0;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decode_mb(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque, 0, mv_dir, <a class="code" href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                             mb_x, mb_y, 0, 0);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    blocklist_length = 0;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">for</span> (mb_y = 0; mb_y &lt; mb_height; mb_y++) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">for</span> (mb_x = 0; mb_x &lt; mb_width; mb_x++) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = mb_x + mb_y * mb_stride;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy] == <a class="code" href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">MV_FROZEN</a>) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <span class="keywordflow">if</span> (mb_x)               <a class="code" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a>(blocklist, &amp;blocklist_length, <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>, mb_x - 1, mb_y, mb_xy - 1);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                <span class="keywordflow">if</span> (mb_y)               <a class="code" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a>(blocklist, &amp;blocklist_length, <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>, mb_x, mb_y - 1, mb_xy - mb_stride);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <span class="keywordflow">if</span> (mb_x+1 &lt; mb_width)  <a class="code" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a>(blocklist, &amp;blocklist_length, <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>, mb_x + 1, mb_y, mb_xy + 1);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                <span class="keywordflow">if</span> (mb_y+1 &lt; mb_height) <a class="code" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a>(blocklist, &amp;blocklist_length, <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>, mb_x, mb_y + 1, mb_xy + mb_stride);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">for</span> (depth = 0; ; depth++) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordtype">int</span> changed, <a class="code" href="fft__template_8c.html#a9f2587d1070b8924b276ba83988d3667">pass</a>, none_left;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordtype">int</span> blocklist_index;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        none_left = 1;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        changed   = 1;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="fft__template_8c.html#a9f2587d1070b8924b276ba83988d3667">pass</a> = 0; (changed || <a class="code" href="fft__template_8c.html#a9f2587d1070b8924b276ba83988d3667">pass</a> &lt; 2) &amp;&amp; <a class="code" href="fft__template_8c.html#a9f2587d1070b8924b276ba83988d3667">pass</a> &lt; 10; <a class="code" href="fft__template_8c.html#a9f2587d1070b8924b276ba83988d3667">pass</a>++) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="keywordtype">int</span> score_sum = 0;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            changed = 0;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <span class="keywordflow">for</span> (blocklist_index = 0; blocklist_index &lt; blocklist_length; blocklist_index++) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> mb_x = blocklist[blocklist_index][0];</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> mb_y = blocklist[blocklist_index][1];</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = mb_x + mb_y * mb_stride;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                <span class="keywordtype">int</span> mv_predictor[8][2];</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[8];</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <span class="keywordtype">int</span> pred_count;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                <span class="keywordtype">int</span> best_score;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <span class="keywordtype">int</span> best_pred;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                <span class="keywordtype">int</span> mot_index;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <span class="keywordtype">int</span> prev_x, prev_y, prev_ref;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                <span class="keywordflow">if</span> ((mb_x ^ mb_y ^ <a class="code" href="fft__template_8c.html#a9f2587d1070b8924b276ba83988d3667">pass</a>) &amp; 1)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy] != <a class="code" href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">MV_FROZEN</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(!<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy]));</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;data[0]);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                j = 0;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                <span class="keywordflow">if</span> (mb_x &gt; 0)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    j |= <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy - 1];</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                <span class="keywordflow">if</span> (mb_x + 1 &lt; mb_width)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                    j |= <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy + 1];</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <span class="keywordflow">if</span> (mb_y &gt; 0)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                    j |= <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy - mb_stride];</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <span class="keywordflow">if</span> (mb_y + 1 &lt; mb_height)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    j |= <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy + mb_stride];</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(j &amp; <a class="code" href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">MV_FROZEN</a>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="keywordflow">if</span> (!(j &amp; <a class="code" href="error__resilience_8c.html#af85bea6c4ce11b37b76142639bc79fd1">MV_CHANGED</a>) &amp;&amp; <a class="code" href="fft__template_8c.html#a9f2587d1070b8924b276ba83988d3667">pass</a> &gt; 1)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                none_left = 0;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                pred_count = 0;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                mot_index  = (mb_x + mb_y * mot_stride) * mot_step;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <span class="keywordflow">if</span> (mb_x &gt; 0 &amp;&amp; <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy - 1] &gt; 1) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    mv_predictor[pred_count][0] =</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index - mot_step][0];</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                    mv_predictor[pred_count][1] =</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index - mot_step][1];</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                    <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[pred_count] =</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[0][4 * (mb_xy - 1)];</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                    pred_count++;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                <span class="keywordflow">if</span> (mb_x + 1 &lt; mb_width &amp;&amp; <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy + 1] &gt; 1) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                    mv_predictor[pred_count][0] =</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index + mot_step][0];</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                    mv_predictor[pred_count][1] =</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index + mot_step][1];</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[pred_count] =</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[0][4 * (mb_xy + 1)];</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                    pred_count++;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                <span class="keywordflow">if</span> (mb_y &gt; 0 &amp;&amp; <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy - mb_stride] &gt; 1) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                    mv_predictor[pred_count][0] =</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index - mot_stride * mot_step][0];</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                    mv_predictor[pred_count][1] =</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index - mot_stride * mot_step][1];</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                    <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[pred_count] =</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[0][4 * (mb_xy - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride)];</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                    pred_count++;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <span class="keywordflow">if</span> (mb_y + 1&lt;mb_height &amp;&amp; <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy + mb_stride] &gt; 1) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    mv_predictor[pred_count][0] =</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index + mot_stride * mot_step][0];</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    mv_predictor[pred_count][1] =</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index + mot_stride * mot_step][1];</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                    <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[pred_count] =</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[0][4 * (mb_xy + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride)];</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    pred_count++;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                <span class="keywordflow">if</span> (pred_count == 0)</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="keywordflow">if</span> (pred_count &gt; 1) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    <span class="keywordtype">int</span> sum_x = 0, sum_y = 0, sum_r = 0;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    <span class="keywordtype">int</span> max_x, max_y, min_x, min_y, max_r, min_r;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                    <span class="keywordflow">for</span> (j = 0; j &lt; pred_count; j++) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                        sum_x += mv_predictor[j][0];</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                        sum_y += mv_predictor[j][1];</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                        sum_r += <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[j];</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                        <span class="keywordflow">if</span> (j &amp;&amp; <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[j] != <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[j - 1])</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                            <span class="keywordflow">goto</span> skip_mean_and_median;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                    }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                    <span class="comment">/* mean */</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                    mv_predictor[pred_count][0] = sum_x / j;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                    mv_predictor[pred_count][1] = sum_y / j;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                             <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[pred_count]    = sum_r / j;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                    <span class="comment">/* median */</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                    <span class="keywordflow">if</span> (pred_count &gt;= 3) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                        min_y = min_x = min_r =  99999;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                        max_y = max_x = max_r = -99999;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                        min_x = min_y = max_x = max_y = min_r = max_r = 0;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                    <span class="keywordflow">for</span> (j = 0; j &lt; pred_count; j++) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                        max_x = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(max_x, mv_predictor[j][0]);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                        max_y = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(max_y, mv_predictor[j][1]);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                        max_r = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(max_r, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[j]);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                        min_x = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(min_x, mv_predictor[j][0]);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                        min_y = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(min_y, mv_predictor[j][1]);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                        min_r = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(min_r, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[j]);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                    mv_predictor[pred_count + 1][0] = sum_x - max_x - min_x;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                    mv_predictor[pred_count + 1][1] = sum_y - max_y - min_y;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                             <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[pred_count + 1]    = sum_r - max_r - min_r;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                    <span class="keywordflow">if</span> (pred_count == 4) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                        mv_predictor[pred_count + 1][0] /= 2;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                        mv_predictor[pred_count + 1][1] /= 2;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                                 <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[pred_count + 1]    /= 2;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                    }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                    pred_count += 2;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;skip_mean_and_median:</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                <span class="comment">/* zero MV */</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                mv_predictor[pred_count][0] =</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                mv_predictor[pred_count][1] =</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                         <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[pred_count]    = 0;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                pred_count++;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                prev_x   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index][0];</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                prev_y   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index][1];</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                prev_ref = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[0][4 * mb_xy];</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <span class="comment">/* last MV */</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                mv_predictor[pred_count][0] = prev_x;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                mv_predictor[pred_count][1] = prev_y;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                         <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[pred_count]    = prev_ref;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                pred_count++;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                best_pred = 0;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                best_score = 256 * 256 * 256 * 64;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; pred_count; j++) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    <span class="keywordtype">int</span> *linesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;linesize;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    <span class="keywordtype">int</span> score = 0;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[0] +</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                                   mb_x * 16 + mb_y * 16 * linesize[0];</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index][0] =</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] = mv_predictor[j][0];</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index][1] =</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] = mv_predictor[j][1];</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    <span class="comment">// predictor intra or otherwise not available</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[j] &lt; 0)</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decode_mb(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[j], <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>,</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                 <a class="code" href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv, mb_x, mb_y, 0, 0);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                    <span class="keywordflow">if</span> (mb_x &gt; 0 &amp;&amp; <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy - 1] &gt; 1) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                        <span class="keywordtype">int</span> k;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                        <span class="keywordflow">for</span> (k = 0; k &lt; 16; k++)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                            score += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[k * linesize[0] - 1] -</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                                           <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[k * linesize[0]]);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                    }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                    <span class="keywordflow">if</span> (mb_x + 1 &lt; mb_width &amp;&amp; <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy + 1] &gt; 1) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                        <span class="keywordtype">int</span> k;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        <span class="keywordflow">for</span> (k = 0; k &lt; 16; k++)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                            score += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[k * linesize[0] + 15] -</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                                           <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[k * linesize[0] + 16]);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    <span class="keywordflow">if</span> (mb_y &gt; 0 &amp;&amp; <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy - mb_stride] &gt; 1) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                        <span class="keywordtype">int</span> k;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        <span class="keywordflow">for</span> (k = 0; k &lt; 16; k++)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                            score += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[k - linesize[0]] - <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[k]);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    <span class="keywordflow">if</span> (mb_y + 1 &lt; mb_height &amp;&amp; <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy + mb_stride] &gt; 1) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                        <span class="keywordtype">int</span> k;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                        <span class="keywordflow">for</span> (k = 0; k &lt; 16; k++)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                            score += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[k + linesize[0] * 15] -</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                                           <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[k + linesize[0] * 16]);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    <span class="keywordflow">if</span> (score &lt;= best_score) { <span class="comment">// &lt;= will favor the last MV</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        best_score = score;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        best_pred  = j;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                    }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                score_sum += best_score;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] = mv_predictor[best_pred][0];</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] = mv_predictor[best_pred][1];</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mot_step; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                    <span class="keywordflow">for</span> (j = 0; j &lt; mot_step; j++) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + j * mot_stride][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0];</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0][mot_index + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + j * mot_stride][1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1];</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                    }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decode_mb(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[best_pred], <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>,</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                             <a class="code" href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv, mb_x, mb_y, 0, 0);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] != prev_x || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] != prev_y) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                    <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy] = <a class="code" href="error__resilience_8c.html#af85bea6c4ce11b37b76142639bc79fd1">MV_CHANGED</a>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    changed++;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy] = <a class="code" href="error__resilience_8c.html#a4a00de0a91dcd454cc8ff8638f1a52c2">MV_UNCHANGED</a>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">if</span> (none_left)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        next_blocklist_length = 0;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keywordflow">for</span> (blocklist_index = 0; blocklist_index &lt; blocklist_length; blocklist_index++) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_x = blocklist[blocklist_index][0];</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_y = blocklist[blocklist_index][1];</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = mb_x + mb_y * mb_stride;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy] &amp; (<a class="code" href="error__resilience_8c.html#af85bea6c4ce11b37b76142639bc79fd1">MV_CHANGED</a>|<a class="code" href="error__resilience_8c.html#a4a00de0a91dcd454cc8ff8638f1a52c2">MV_UNCHANGED</a>|<a class="code" href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">MV_FROZEN</a>)) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>[mb_xy] = <a class="code" href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">MV_FROZEN</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                <span class="keywordflow">if</span> (mb_x &gt; 0)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                    <a class="code" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a>(next_blocklist, &amp;next_blocklist_length, <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>, mb_x - 1, mb_y, mb_xy - 1);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                <span class="keywordflow">if</span> (mb_y &gt; 0)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                    <a class="code" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a>(next_blocklist, &amp;next_blocklist_length, <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>, mb_x, mb_y - 1, mb_xy - mb_stride);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <span class="keywordflow">if</span> (mb_x + 1 &lt; mb_width)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                    <a class="code" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a>(next_blocklist, &amp;next_blocklist_length, <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>, mb_x + 1, mb_y, mb_xy + 1);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                <span class="keywordflow">if</span> (mb_y + 1 &lt; mb_height)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                    <a class="code" href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a>(next_blocklist, &amp;next_blocklist_length, <a class="code" href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a>, mb_x, mb_y + 1, mb_xy + mb_stride);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(next_blocklist_length &lt;= mb_height * mb_width);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keywordtype">int</span> , blocklist_length, next_blocklist_length);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keywordtype">void</span>*, blocklist, next_blocklist);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;}</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#a87b220f457b619907e1ded4b84d83d79">  722</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="error__resilience_8c.html#a87b220f457b619907e1ded4b84d83d79">is_intra_more_likely</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordtype">int</span> is_intra_likely, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, undamaged_count, skip_amount, mb_x, mb_y;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;data[0])</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">return</span> 1; <span class="comment">// no previous frame available -&gt; use spatial prediction</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;error_concealment &amp; <a class="code" href="avcodec_8h.html#a4387693eb304cef91531ccb2c3a7dfed">FF_EC_FAVOR_INTER</a>)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    undamaged_count = 0;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">if</span> (!((<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a>) &amp;&amp; (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a>)))</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            undamaged_count++;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span> (undamaged_count &lt; 5)</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">return</span> 0; <span class="comment">// almost all MBs damaged -&gt; use temporal prediction</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="comment">// prevent dsp.sad() check, that requires access to the image</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (CONFIG_XVMC    &amp;&amp;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel-&gt;decode_mb &amp;&amp;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    skip_amount     = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(undamaged_count / 50, 1); <span class="comment">// check only up to 50 MBs</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    is_intra_likely = 0;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    j = 0;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">for</span> (mb_y = 0; mb_y &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height - 1; mb_y++) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">for</span> (mb_x = 0; mb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; mb_x++) {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a>) &amp;&amp; (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a>))</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <span class="keywordflow">continue</span>; <span class="comment">// skip damaged</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            j++;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="comment">// skip a few to speed things up</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <span class="keywordflow">if</span> ((j % skip_amount) != 0)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                <span class="keywordtype">int</span> *linesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;linesize;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *mb_ptr      = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[0] +</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                                       mb_x * 16 + mb_y * 16 * linesize[0];</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *last_mb_ptr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;data[0] +</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                                       mb_x * 16 + mb_y * 16 * linesize[0];</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                    <span class="comment">// FIXME</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.tf, mb_y, 0);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                is_intra_likely += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mecc.sad[0](<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, last_mb_ptr, mb_ptr,</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                                  linesize[0], 16);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                <span class="comment">// FIXME need await_progress() here</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                is_intra_likely -= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mecc.sad[0](<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, last_mb_ptr,</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                                                  last_mb_ptr + linesize[0] * 16,</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                                                  linesize[0], 16);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy]))</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                   is_intra_likely++;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                   is_intra_likely--;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">//      av_log(NULL, AV_LOG_ERROR, &quot;is_intra_likely: %d type:%d\n&quot;, is_intra_likely, s-&gt;pict_type);</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">return</span> is_intra_likely &gt; 0;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;}</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno"><a class="line" href="error__resilience_8h.html#ae8d70ac72d47676353321483847593e7">  797</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#ae8d70ac72d47676353321483847593e7">ff_er_frame_start</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;{</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;error_concealment)</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mecc_inited) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <a class="code" href="me__cmp_8c.html#acb0172ad172925a055b234b39fc5f3dd">ff_me_cmp_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mecc, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mecc_inited = 1;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table, <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a> | <a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a> | <a class="code" href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a>,</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>));</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count, 3 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_occurred = 0;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;}</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno"><a class="line" href="error__resilience_8c.html#a4b8104bce56fba9181065500ab9ecb11">  813</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="error__resilience_8c.html#a4b8104bce56fba9181065500ab9ecb11">er_supported</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;{</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel-&gt;decode_slice           ||</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;       !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f                                                  ||</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.field_picture</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    )</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;}</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="error__resilience_8h.html#a00b6ab0da3b338afa209792001e707fb">  830</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#a00b6ab0da3b338afa209792001e707fb">ff_er_add_slice</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> startx, <span class="keywordtype">int</span> starty,</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                     <span class="keywordtype">int</span> endx, <span class="keywordtype">int</span> endy, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>)</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;{</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> start_i  = av_clip(startx + starty * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num - 1);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> end_i    = av_clip(endx   + endy   * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> start_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[start_i];</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> end_xy   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[end_i];</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>           = -1;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel-&gt;decode_slice)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">if</span> (start_i &gt; end_i || start_xy &gt; end_xy) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;               <span class="stringliteral">&quot;internal error, slice end before start\n&quot;</span>);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;error_concealment)</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a> &amp;= ~<a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &amp; (<a class="code" href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a> | <a class="code" href="error__resilience_8h.html#a88006d7542a25c0412e6f6952f96b410">ER_AC_END</a>)) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>           &amp;= ~(<a class="code" href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a> | <a class="code" href="error__resilience_8h.html#a88006d7542a25c0412e6f6952f96b410">ER_AC_END</a>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="gcc_2stdatomic_8h.html#aedf6fb62e0fc9e8f8cf2e3685f0a1e88">atomic_fetch_add</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count, start_i - end_i - 1);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &amp; (<a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a> | <a class="code" href="error__resilience_8h.html#a94880c618424e4733e4a166fc0c80341">ER_DC_END</a>)) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>           &amp;= ~(<a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a> | <a class="code" href="error__resilience_8h.html#a94880c618424e4733e4a166fc0c80341">ER_DC_END</a>);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <a class="code" href="gcc_2stdatomic_8h.html#aedf6fb62e0fc9e8f8cf2e3685f0a1e88">atomic_fetch_add</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count, start_i - end_i - 1);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &amp; (<a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a> | <a class="code" href="error__resilience_8h.html#a85f3dd456588d7b4b71f943ecc76ef63">ER_MV_END</a>)) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>           &amp;= ~(<a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a> | <a class="code" href="error__resilience_8h.html#a85f3dd456588d7b4b71f943ecc76ef63">ER_MV_END</a>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <a class="code" href="gcc_2stdatomic_8h.html#aedf6fb62e0fc9e8f8cf2e3685f0a1e88">atomic_fetch_add</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count, start_i - end_i - 1);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> &amp; <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_occurred = 1;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count, INT_MAX);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a> == ~0x7F) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[start_xy], 0,</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;               (end_xy - start_xy) * <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>));</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = start_xy; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; end_xy; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp;= <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">if</span> (end_i == <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count, INT_MAX);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[end_xy] &amp;= <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[end_xy] |= <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[start_xy] |= <a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> (start_xy &gt; 0 &amp;&amp; !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;active_thread_type &amp; <a class="code" href="avcodec_8h.html#a91bc1a1c1c4a3cc6db54d59705fded0b">FF_THREAD_SLICE</a>) &amp;&amp;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="error__resilience_8c.html#a4b8104bce56fba9181065500ab9ecb11">er_supported</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>) &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;skip_top * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width &lt; start_i) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordtype">int</span> prev_status = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[start_i - 1]];</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        prev_status &amp;= ~<a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3"> VP_START</a>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">if</span> (prev_status != (<a class="code" href="error__resilience_8h.html#a85f3dd456588d7b4b71f943ecc76ef63">ER_MV_END</a> | <a class="code" href="error__resilience_8h.html#a94880c618424e4733e4a166fc0c80341">ER_DC_END</a> | <a class="code" href="error__resilience_8h.html#a88006d7542a25c0412e6f6952f96b410">ER_AC_END</a>)) {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_occurred = 1;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count, INT_MAX);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;}</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno"><a class="line" href="error__resilience_8h.html#a38248dbb9d274f4c6509ee063a177edf">  900</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="error__resilience_8c.html#a38248dbb9d274f4c6509ee063a177edf">ff_er_frame_end</a>(<a class="code" href="struct_e_r_context.html">ERContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;{</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordtype">int</span> *linesize = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, mb_x, mb_y, <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, error_type, dc_error, mv_error, ac_error;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordtype">int</span> threshold_part[4] = { 100, 100, 100 };</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordtype">int</span> threshold = 50;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordtype">int</span> is_intra_likely;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride * 2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="comment">/* We do not support ER of field pictures yet,</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">     * though it should not crash if enabled. */</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;error_concealment || !<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count)  ||</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres                                               ||</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        !<a class="code" href="error__resilience_8c.html#a4b8104bce56fba9181065500ab9ecb11">er_supported</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)                                               ||</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count) == 3 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width *</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                          (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;skip_top + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;skip_bottom)) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    linesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;linesize;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">for</span> (mb_x = 0; mb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; mb_x++) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_x + (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height - 1) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> != 0x7F)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">if</span> (   mb_x == <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        &amp;&amp; (<a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;height, 16)&amp;16)</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        &amp;&amp; <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_count) == 3 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;skip_top + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;skip_bottom + 1)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    ) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;ignoring last missing slice\n&quot;</span>);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    }</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;width  != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;width  ||</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;height != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;height ||</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;format != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;format) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot use previous picture in error concealment\n&quot;</span>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic));</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f-&gt;width  != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;width  ||</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f-&gt;height != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;height ||</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f-&gt;format != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;format) {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot use next picture in error concealment\n&quot;</span>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic));</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[0] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[0]) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Warning MVs not available\n&quot;</span>);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ref_index_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]  = <a class="code" href="group__lavu__buffer.html#ga27f37cc004f768b00442b6cb08091686">av_buffer_allocz</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * 4 * <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>));</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="group__lavu__buffer.html#ga27f37cc004f768b00442b6cb08091686">av_buffer_allocz</a>((<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> + 4) * 2 * <span class="keyword">sizeof</span>(uint16_t));</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ref_index_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ref_index_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;data;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (int16_t (*)[2])<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;data + 4;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ref_index_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]  = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;debug &amp; <a class="code" href="avcodec_8h.html#a6764f1d5e32d47ea35be0fb5d4b878bc">FF_DEBUG_ER</a>) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="keywordflow">for</span> (mb_y = 0; mb_y &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height; mb_y++) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            <span class="keywordflow">for</span> (mb_x = 0; mb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; mb_x++) {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;%2X &quot;</span>, <a class="code" href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a>);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="preprocessor">#if 1</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment">/* handle overlapping slices */</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">for</span> (error_type = 1; error_type &lt;= 3; error_type++) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="keywordtype">int</span> end_ok = 0;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>       = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; (1 &lt;&lt; error_type))</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                end_ok = 1;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; (8 &lt;&lt; error_type))</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                end_ok = 1;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <span class="keywordflow">if</span> (!end_ok)</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy] |= 1 &lt;&lt; error_type;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a>)</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                end_ok = 0;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="preprocessor">#if 1</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="comment">/* handle slices with partitions of different length */</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;partitioned_frame) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="keywordtype">int</span> end_ok = 0;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>       = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a88006d7542a25c0412e6f6952f96b410">ER_AC_END</a>)</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                end_ok = 0;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a85f3dd456588d7b4b71f943ecc76ef63">ER_MV_END</a>) ||</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a94880c618424e4733e4a166fc0c80341">ER_DC_END</a>) ||</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a>))</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                end_ok = 1;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            <span class="keywordflow">if</span> (!end_ok)</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy]|= <a class="code" href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a>)</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                end_ok = 0;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="comment">/* handle missing slices */</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;err_recognition &amp; <a class="code" href="avcodec_8h.html#a6101c3b2a02c61ea41f3c97e88b64d39">AV_EF_EXPLODE</a>) {</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordtype">int</span> end_ok = 1;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="comment">// FIXME + 100 hack</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num - 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width + 100; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <span class="keywordtype">int</span> error1 = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            <span class="keywordtype">int</span> error2 = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1]];</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <span class="keywordflow">if</span> (error1 &amp; <a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a>)</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                end_ok = 1;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <span class="keywordflow">if</span> (error2 == (<a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a> | <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a> | <a class="code" href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a>) &amp;&amp;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                error1 != (<a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a> | <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a> | <a class="code" href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a>) &amp;&amp;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                ((error1 &amp; <a class="code" href="error__resilience_8h.html#a88006d7542a25c0412e6f6952f96b410">ER_AC_END</a>) || (error1 &amp; <a class="code" href="error__resilience_8h.html#a94880c618424e4733e4a166fc0c80341">ER_DC_END</a>) ||</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                (error1 &amp; <a class="code" href="error__resilience_8h.html#a85f3dd456588d7b4b71f943ecc76ef63">ER_MV_END</a>))) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                <span class="comment">// end &amp; uninit</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                end_ok = 0;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            <span class="keywordflow">if</span> (!end_ok)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy] |= <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="preprocessor">#if 1</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="comment">/* backward mark errors */</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> = 9999999;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">for</span> (error_type = 1; error_type &lt;= 3; error_type++) {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <span class="keywordtype">int</span>       <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbskip_table || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbskip_table[mb_xy]) <span class="comment">// FIXME partition specific</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a>++;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; (1 &lt;&lt; error_type))</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> = 0;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;partitioned_frame) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> &lt; threshold_part[error_type - 1])</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy] |= 1 &lt;&lt; error_type;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> &lt; threshold)</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy] |= 1 &lt;&lt; error_type;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a>)</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                <a class="code" href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a> = 9999999;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="comment">/* forward mark errors */</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = 0;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordtype">int</span> old_error   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="keywordflow">if</span> (old_error &amp; <a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a>) {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = old_error &amp; <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> |= old_error &amp; <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy] |= <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="preprocessor">#if 1</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="comment">/* handle not partitioned case */</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;partitioned_frame) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>)</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> |= <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy] = <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        }</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    dc_error = ac_error = mv_error = 0;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a>)</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            dc_error++;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a>)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            ac_error++;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a>)</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            mv_error++;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    }</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;concealing %d DC, %d AC, %d MV errors in %c frame\n&quot;</span>,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;           dc_error, ac_error, mv_error, <a class="code" href="group__lavu__picture.html#gacbf2ea8b2b89924c890ef8ec10a3d922">av_get_picture_type_char</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;pict_type));</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;decode_error_flags |= <a class="code" href="frame_8h.html#a42d55145377a67437a5d144c3908fb56">FF_DECODE_ERROR_CONCEALMENT_ACTIVE</a>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    is_intra_likely = <a class="code" href="error__resilience_8c.html#a87b220f457b619907e1ded4b84d83d79">is_intra_more_likely</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="comment">/* set unknown mb-type to most likely */</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">if</span> (!((<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a>) &amp;&amp; (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a>)))</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="keywordflow">if</span> (is_intra_likely)</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy] = <a class="code" href="mpegutils_8h.html#a5b78b46a96f48a97d29857959b6f290e">MB_TYPE_INTRA4x4</a>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy] = <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#ac8cac1ccad39ddfc2ac2914b11faebf8">MB_TYPE_L0</a>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="comment">// change inter to intra blocks if no reference frames are available</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;data[0]) &amp;&amp;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f-&gt;data[0]))</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy]))</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy] = <a class="code" href="mpegutils_8h.html#a5b78b46a96f48a97d29857959b6f290e">MB_TYPE_INTRA4x4</a>;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="comment">/* handle inter blocks with damaged AC */</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">for</span> (mb_y = 0; mb_y &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height; mb_y++) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="keywordflow">for</span> (mb_x = 0; mb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; mb_x++) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy   = mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_type = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy];</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> dir     = !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;data[0]);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mv_dir  = dir ? <a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a> : <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="keywordtype">int</span> mv_type;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type))</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                <span class="keywordflow">continue</span>; <span class="comment">// intra</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a>)</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                <span class="keywordflow">continue</span>; <span class="comment">// inter with damaged MV</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            <span class="keywordflow">if</span> (!(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a>))</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                <span class="keywordflow">continue</span>; <span class="comment">// undamaged inter</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#ab8c5b21d0da9f13a58e04abc7c612a70">IS_8X8</a>(mb_type)) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                <span class="keywordtype">int</span> mb_index = mb_x * 2 + mb_y * 2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                mv_type = <a class="code" href="mpegvideo_8h.html#a98f9328b4f99d0b6a3974cf441633edf">MV_TYPE_8X8</a>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][j][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[dir][mb_index + (j &amp; 1) + (j &gt;&gt; 1) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride][0];</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][j][1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[dir][mb_index + (j &amp; 1) + (j &gt;&gt; 1) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride][1];</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                mv_type     = <a class="code" href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[dir][mb_x * 2 + mb_y * 2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride][0];</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[dir][mb_x * 2 + mb_y * 2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride][1];</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160; </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decode_mb(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque, 0 <span class="comment">/* FIXME H.264 partitioned slices need this set */</span>,</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                         mv_dir, mv_type, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv, mb_x, mb_y, 0, 0);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="comment">/* guess MVs */</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">for</span> (mb_y = 0; mb_y &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height; mb_y++) {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            <span class="keywordflow">for</span> (mb_x = 0; mb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; mb_x++) {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                <span class="keywordtype">int</span>       xy      = mb_x * 2 + mb_y * 2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy   = mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> mb_type = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy];</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                <span class="keywordtype">int</span> mv_dir = <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a> | <a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a>;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type))</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                <span class="keywordflow">if</span> (!(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a>))</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                    <span class="keywordflow">continue</span>; <span class="comment">// inter with undamaged MV</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                <span class="keywordflow">if</span> (!(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a>))</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                    <span class="keywordflow">continue</span>; <span class="comment">// undamaged inter</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic.f-&gt;data[0]))</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                    mv_dir &amp;= ~<a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.f-&gt;data[0]))</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                    mv_dir &amp;= ~<a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a>;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pp_time) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                    <span class="keywordtype">int</span> time_pp = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pp_time;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                    <span class="keywordtype">int</span> time_pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb_time;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160; </div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;codec_id != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                    <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.tf, mb_y, 0);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.motion_val[0][xy][0] *  time_pb            / time_pp;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.motion_val[0][xy][1] *  time_pb            / time_pp;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.motion_val[0][xy][0] * (time_pb - time_pp) / time_pp;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic.motion_val[0][xy][1] * (time_pb - time_pp) / time_pp;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][0] = 0;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[0][0][1] = 0;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][0] = 0;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[1][0][1] = 0;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decode_mb(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque, 0, mv_dir, <a class="code" href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv,</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                             mb_x, mb_y, 0, 0);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            }</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <a class="code" href="error__resilience_8c.html#a2983a97e5a99dda462cb7136740aacba">guess_mv</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="comment">/* the filters below manipulate raw image, skip them */</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">if</span> (CONFIG_XVMC &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel-&gt;decode_mb)</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <span class="keywordflow">goto</span> ec_clean;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="comment">/* fill DC for inter blocks */</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">for</span> (mb_y = 0; mb_y &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height; mb_y++) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">for</span> (mb_x = 0; mb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; mb_x++) {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a>, dcu, dcv, y, n;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            int16_t *dc_ptr;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_y, *dest_cb, *dest_cr;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy   = mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_type = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy];</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="comment">// error = s-&gt;error_status_table[mb_xy];</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type) &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;partitioned_frame)</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <span class="comment">// if (error &amp; ER_MV_ERROR)</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <span class="comment">//     continue; // inter data damaged FIXME is this good?</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            dest_y  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[0] + mb_x * 16 + mb_y * 16 * linesize[0];</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            dest_cb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[1] + mb_x *  8 + mb_y *  8 * linesize[1];</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            dest_cr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[2] + mb_x *  8 + mb_y *  8 * linesize[2];</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            dc_ptr = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[0][mb_x * 2 + mb_y * 2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride];</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <span class="keywordflow">for</span> (n = 0; n &lt; 4; n++) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> = 0;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                <span class="keywordflow">for</span> (y = 0; y &lt; 8; y++) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                    <span class="keywordtype">int</span> x;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                    <span class="keywordflow">for</span> (x = 0; x &lt; 8; x++)</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                       <a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> += dest_y[x + (n &amp; 1) * 8 +</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                             (y + (n &gt;&gt; 1) * 8) * linesize[0]];</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                dc_ptr[(n &amp; 1) + (n &gt;&gt; 1) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride] = (<a class="code" href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a> + 4) &gt;&gt; 3;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[2])</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            dcu = dcv = 0;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            <span class="keywordflow">for</span> (y = 0; y &lt; 8; y++) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                <span class="keywordtype">int</span> x;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                <span class="keywordflow">for</span> (x = 0; x &lt; 8; x++) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                    dcu += dest_cb[x + y * linesize[1]];</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    dcv += dest_cr[x + y * linesize[2]];</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                }</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[1][mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride] = (dcu + 4) &gt;&gt; 3;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[2][mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride] = (dcv + 4) &gt;&gt; 3;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="preprocessor">#if 1</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="comment">/* guess DC for damaged blocks */</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <a class="code" href="error__resilience_8c.html#ad8231478b0fe9ead385b843c2eb57482">guess_dc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width*2, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height*2, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride, 1);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <a class="code" href="error__resilience_8c.html#ad8231478b0fe9ead385b843c2eb57482">guess_dc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[1], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width  , <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height  , <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride, 0);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <a class="code" href="error__resilience_8c.html#ad8231478b0fe9ead385b843c2eb57482">guess_dc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[2], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width  , <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height  , <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride, 0);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="comment">/* filter luma DC */</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <a class="code" href="error__resilience_8c.html#ab6e33e69e6e94ae22ed1d453efe327d2">filter181</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width * 2, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * 2, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="preprocessor">#if 1</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="comment">/* render DC only intra */</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordflow">for</span> (mb_y = 0; mb_y &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height; mb_y++) {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="keywordflow">for</span> (mb_x = 0; mb_x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; mb_x++) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_y, *dest_cb, *dest_cr;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy   = mb_x + mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> mb_type = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.mb_type[mb_xy];</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a69ee557358fd6cd78c0d051e2532c89f">IS_INTER</a>(mb_type))</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            <span class="keywordflow">if</span> (!(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; <a class="code" href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a>))</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                <span class="keywordflow">continue</span>; <span class="comment">// undamaged</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            dest_y  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[0] + mb_x * 16 + mb_y * 16 * linesize[0];</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            dest_cb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[1] + mb_x *  8 + mb_y *  8 * linesize[1];</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            dest_cr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[2] + mb_x *  8 + mb_y *  8 * linesize[2];</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[2])</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                dest_cb = dest_cr = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            <a class="code" href="error__resilience_8c.html#aa222e3fd20c93eaf918936937543e550">put_dc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr, mb_x, mb_y);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;error_concealment &amp; <a class="code" href="avcodec_8h.html#a231414efd6dea4acb5292456dfbe6e86">FF_EC_DEBLOCK</a>) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="comment">/* filter horizontal block boundaries */</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <a class="code" href="error__resilience_8c.html#a4f3325359abceb30bde7f8dbce611b14">h_block_filter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width * 2,</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * 2, linesize[0], 1);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <span class="comment">/* filter vertical block boundaries */</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <a class="code" href="error__resilience_8c.html#a19847bd5e63ba0b58442c40e226c7175">v_block_filter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width * 2,</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * 2, linesize[0], 1);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[2]) {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            <a class="code" href="error__resilience_8c.html#a4f3325359abceb30bde7f8dbce611b14">h_block_filter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[1], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width,</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height, linesize[1], 0);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;            <a class="code" href="error__resilience_8c.html#a4f3325359abceb30bde7f8dbce611b14">h_block_filter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[2], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width,</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height, linesize[2], 0);</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            <a class="code" href="error__resilience_8c.html#a19847bd5e63ba0b58442c40e226c7175">v_block_filter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[1], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width,</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height, linesize[1], 0);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            <a class="code" href="error__resilience_8c.html#a19847bd5e63ba0b58442c40e226c7175">v_block_filter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;data[2], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width,</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height, linesize[2], 0);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    }</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;ec_clean:</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="comment">/* clean a few tables */</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordtype">int</span>       <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;error_status_table[mb_xy];</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbskip_table &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.f-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> &amp;&amp;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            (<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> &amp; (<a class="code" href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a> | <a class="code" href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a> | <a class="code" href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a>))) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbskip_table[mb_xy] = 0;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbintra_table)</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbintra_table[mb_xy] = 1;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ref_index_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;motion_val_buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.ref_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]  = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic.motion_val[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    }</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_pic, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_e_r_picture.html">ERPicture</a>));</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pic, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_e_r_picture.html">ERPicture</a>));</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_pic, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_e_r_picture.html">ERPicture</a>));</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="atarget__bsf__fuzzer_8c_html_aa3d85a3469f60990fdff296efb86a9c2"><div class="ttname"><a href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a></div><div class="ttdeci">static void error(const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="target__bsf__fuzzer_8c_source.html#l00030">target_bsf_fuzzer.c:30</a></div></div>
<div class="ttc" id="aframe_8h_html_a42d55145377a67437a5d144c3908fb56"><div class="ttname"><a href="frame_8h.html#a42d55145377a67437a5d144c3908fb56">FF_DECODE_ERROR_CONCEALMENT_ACTIVE</a></div><div class="ttdeci">#define FF_DECODE_ERROR_CONCEALMENT_ACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00606">frame.h:606</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ab8c5b21d0da9f13a58e04abc7c612a70"><div class="ttname"><a href="mpegutils_8h.html#ab8c5b21d0da9f13a58e04abc7c612a70">IS_8X8</a></div><div class="ttdeci">#define IS_8X8(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00089">mpegutils.h:89</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ac8cac1ccad39ddfc2ac2914b11faebf8"><div class="ttname"><a href="mpegutils_8h.html#ac8cac1ccad39ddfc2ac2914b11faebf8">MB_TYPE_L0</a></div><div class="ttdeci">#define MB_TYPE_L0</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00067">mpegutils.h:67</a></div></div>
<div class="ttc" id="amace_8c_html_a08f66a6870d87afcd5dc1b60d1019692"><div class="ttname"><a href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a></div><div class="ttdeci">int stride</div><div class="ttdef"><b>Definition:</b> <a href="mace_8c_source.html#l00144">mace.c:144</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_ae17ddc0eaf08f5eea9e1d13399f1cb08"><div class="ttname"><a href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a></div><div class="ttdeci">#define MV_TYPE_16X16</div><div class="ttdoc">1 vector for the whole mb</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00266">mpegvideo.h:266</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ad6a339ae538717b3e99082a8016207df"><div class="ttname"><a href="filter__design_8txt.html#ad6a339ae538717b3e99082a8016207df">status</a></div><div class="ttdeci">they must not be accessed directly The fifo field contains the frames that are queued in the input for processing by the filter The status_in and status_out fields contains the queued status(EOF or error) of the link</div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_a0241b1f231c55cdf092b2d509e8d83df"><div class="ttname"><a href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a></div><div class="ttdeci">#define atomic_store(object, desired)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00085">stdatomic.h:85</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a4a00de0a91dcd454cc8ff8638f1a52c2"><div class="ttname"><a href="error__resilience_8c.html#a4a00de0a91dcd454cc8ff8638f1a52c2">MV_UNCHANGED</a></div><div class="ttdeci">#define MV_UNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00379">error_resilience.c:379</a></div></div>
<div class="ttc" id="acommon_8h_html_a09a0bb7d8fcfac416de7a5fe7fd8b0f1"><div class="ttname"><a href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a></div><div class="ttdeci">#define FFSWAP(type, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00099">common.h:99</a></div></div>
<div class="ttc" id="astructcolor_html"><div class="ttname"><a href="structcolor.html">color</a></div><div class="ttdef"><b>Definition:</b> <a href="vf__paletteuse_8c_source.html#l00582">vf_paletteuse.c:582</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_af85bea6c4ce11b37b76142639bc79fd1"><div class="ttname"><a href="error__resilience_8c.html#af85bea6c4ce11b37b76142639bc79fd1">MV_CHANGED</a></div><div class="ttdeci">#define MV_CHANGED</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00378">error_resilience.c:378</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html"><div class="ttname"><a href="libavutil_2thread_8h.html">thread.h</a></div></div>
<div class="ttc" id="amem_8c_html_a254f3455439c15a2c8a75b8f0235fdbd"><div class="ttname"><a href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a></div><div class="ttdeci">void * av_malloc_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00182">mem.c:182</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a87b220f457b619907e1ded4b84d83d79"><div class="ttname"><a href="error__resilience_8c.html#a87b220f457b619907e1ded4b84d83d79">is_intra_more_likely</a></div><div class="ttdeci">static int is_intra_more_likely(ERContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00722">error_resilience.c:722</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a2a70ccc66327a6bf4a21b2e7c8d371fa"><div class="ttname"><a href="error__resilience_8c.html#a2a70ccc66327a6bf4a21b2e7c8d371fa">set_mv_strides</a></div><div class="ttdeci">static void set_mv_strides(ERContext *s, ptrdiff_t *mv_step, ptrdiff_t *stride)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00044">error_resilience.c:44</a></div></div>
<div class="ttc" id="allviddspenc_8c_html_aba9ed0487b0aa23eba534648df8384c0"><div class="ttname"><a href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a></div><div class="ttdeci">uint8_t w</div><div class="ttdef"><b>Definition:</b> <a href="llviddspenc_8c_source.html#l00038">llviddspenc.c:38</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a5b78b46a96f48a97d29857959b6f290e"><div class="ttname"><a href="mpegutils_8h.html#a5b78b46a96f48a97d29857959b6f290e">MB_TYPE_INTRA4x4</a></div><div class="ttdeci">#define MB_TYPE_INTRA4x4</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00051">mpegutils.h:51</a></div></div>
<div class="ttc" id="ainput_8c_html_ad6cdb6a14abe3eab42eaaadc93409aec"><div class="ttname"><a href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a></div><div class="ttdeci">#define b</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00041">input.c:41</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a41e45b9cc77ea8146abd8f735612bf0a"><div class="ttname"><a href="error__resilience_8c.html#a41e45b9cc77ea8146abd8f735612bf0a">MV_FROZEN</a></div><div class="ttdeci">#define MV_FROZEN</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00377">error_resilience.c:377</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ac03a9d42dfb3c1cb8ef0512dde22a723"><div class="ttname"><a href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a></div><div class="ttdeci">#define MB_TYPE_16x16</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00054">mpegutils.h:54</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_ae8d70ac72d47676353321483847593e7"><div class="ttname"><a href="error__resilience_8c.html#ae8d70ac72d47676353321483847593e7">ff_er_frame_start</a></div><div class="ttdeci">void ff_er_frame_start(ERContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00797">error_resilience.c:797</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga27f37cc004f768b00442b6cb08091686"><div class="ttname"><a href="group__lavu__buffer.html#ga27f37cc004f768b00442b6cb08091686">av_buffer_allocz</a></div><div class="ttdeci">AVBufferRef * av_buffer_allocz(int size)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00083">buffer.c:83</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a00b6ab0da3b338afa209792001e707fb"><div class="ttname"><a href="error__resilience_8c.html#a00b6ab0da3b338afa209792001e707fb">ff_er_add_slice</a></div><div class="ttdeci">void ff_er_add_slice(ERContext *s, int startx, int starty, int endx, int endy, int status)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00830">error_resilience.c:830</a></div></div>
<div class="ttc" id="aavcodec_8h_html_ae1bc421e255d43c6b499ad8d7c6ccb4e"><div class="ttname"><a href="avcodec_8h.html#ae1bc421e255d43c6b499ad8d7c6ccb4e">FF_EC_GUESS_MVS</a></div><div class="ttdeci">#define FF_EC_GUESS_MVS</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01602">avcodec.h:1602</a></div></div>
<div class="ttc" id="ampegvideo_8h_html"><div class="ttname"><a href="mpegvideo_8h.html">mpegvideo.h</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html_a94880c618424e4733e4a166fc0c80341"><div class="ttname"><a href="error__resilience_8h.html#a94880c618424e4733e4a166fc0c80341">ER_DC_END</a></div><div class="ttdeci">#define ER_DC_END</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00035">error_resilience.h:35</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a4f3325359abceb30bde7f8dbce611b14"><div class="ttname"><a href="error__resilience_8c.html#a4f3325359abceb30bde7f8dbce611b14">h_block_filter</a></div><div class="ttdeci">static void h_block_filter(ERContext *s, uint8_t *dst, int w, int h, ptrdiff_t stride, int is_luma)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00241">error_resilience.c:241</a></div></div>
<div class="ttc" id="ampegutils_8h_html"><div class="ttname"><a href="mpegutils_8h.html">mpegutils.h</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html_a57bb1f62d86662641eb4dcd165ae4e2d"><div class="ttname"><a href="error__resilience_8h.html#a57bb1f62d86662641eb4dcd165ae4e2d">ER_MV_ERROR</a></div><div class="ttdeci">#define ER_MV_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00033">error_resilience.h:33</a></div></div>
<div class="ttc" id="amultithreading_8txt_html_ab66ca23680e500f1f51b1608e8a5419a"><div class="ttname"><a href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a></div><div class="ttdeci">the pkt_dts and pkt_pts fields in AVFrame will work as usual Restrictions on codec whose streams don t reset across will not work because their bitstreams cannot be decoded in parallel *The contents of buffers must not be read before ff_thread_await_progress() has been called on them. reget_buffer() and buffer age optimizations no longer work. *The contents of buffers must not be written to after ff_thread_report_progress() has been called on them. This includes draw_edges(). Porting codecs to frame threading</div></div>
<div class="ttc" id="amotionpixels__tablegen_8c_html_a5a80f2e1a53f6569c66bd672237054c6"><div class="ttname"><a href="motionpixels__tablegen_8c.html#a5a80f2e1a53f6569c66bd672237054c6">ff_crop_tab</a></div><div class="ttdeci">#define ff_crop_tab</div><div class="ttdef"><b>Definition:</b> <a href="motionpixels__tablegen_8c_source.html#l00026">motionpixels_tablegen.c:26</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a3935dbba78d09ce118d42be836777da5"><div class="ttname"><a href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a></div><div class="ttdeci">#define MV_DIR_BACKWARD</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00263">mpegvideo.h:263</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a6764f1d5e32d47ea35be0fb5d4b878bc"><div class="ttname"><a href="avcodec_8h.html#a6764f1d5e32d47ea35be0fb5d4b878bc">FF_DEBUG_ER</a></div><div class="ttdeci">#define FF_DEBUG_ER</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01626">avcodec.h:1626</a></div></div>
<div class="ttc" id="ame__cmp_8c_html_acb0172ad172925a055b234b39fc5f3dd"><div class="ttname"><a href="me__cmp_8c.html#acb0172ad172925a055b234b39fc5f3dd">ff_me_cmp_init</a></div><div class="ttdeci">av_cold void ff_me_cmp_init(MECmpContext *c, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="me__cmp_8c_source.html#l01035">me_cmp.c:1035</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html_a0d18cd02310a81d0b3d2f823e57dac68"><div class="ttname"><a href="error__resilience_8h.html#a0d18cd02310a81d0b3d2f823e57dac68">ER_DC_ERROR</a></div><div class="ttdeci">#define ER_DC_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00032">error_resilience.h:32</a></div></div>
<div class="ttc" id="alzw_8c_html_a450ea4ae52aeb4ca6e2fabf02c695153"><div class="ttname"><a href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a></div><div class="ttdeci">static const uint16_t mask[17]</div><div class="ttdef"><b>Definition:</b> <a href="lzw_8c_source.html#l00038">lzw.c:38</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a667b04d7fb6ef46db4da4af554c5b6f7"><div class="ttname"><a href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a></div><div class="ttdeci">#define width</div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a231414efd6dea4acb5292456dfbe6e86"><div class="ttname"><a href="avcodec_8h.html#a231414efd6dea4acb5292456dfbe6e86">FF_EC_DEBLOCK</a></div><div class="ttdeci">#define FF_EC_DEBLOCK</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01603">avcodec.h:1603</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a4b8104bce56fba9181065500ab9ecb11"><div class="ttname"><a href="error__resilience_8c.html#a4b8104bce56fba9181065500ab9ecb11">er_supported</a></div><div class="ttdeci">static int er_supported(ERContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00813">error_resilience.c:813</a></div></div>
<div class="ttc" id="astruct_e_r_context_html"><div class="ttname"><a href="struct_e_r_context.html">ERContext</a></div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00053">error_resilience.h:53</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a2983a97e5a99dda462cb7136740aacba"><div class="ttname"><a href="error__resilience_8c.html#a2983a97e5a99dda462cb7136740aacba">guess_mv</a></div><div class="ttdeci">static void guess_mv(ERContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00390">error_resilience.c:390</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="alimits_8h_html"><div class="ttname"><a href="limits_8h.html">limits.h</a></div></div>
<div class="ttc" id="ahevcpred__template_8c_html_ad0133753510e9949508f0bb5af9c70d4"><div class="ttname"><a href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a></div><div class="ttdeci">#define IS_INTRA(x, y)</div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_acced2a78b2a440317feed51f3e505d1d"><div class="ttname"><a href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a></div><div class="ttdeci">#define atomic_load(object)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00093">stdatomic.h:93</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a19847bd5e63ba0b58442c40e226c7175"><div class="ttname"><a href="error__resilience_8c.html#a19847bd5e63ba0b58442c40e226c7175">v_block_filter</a></div><div class="ttdeci">static void v_block_filter(ERContext *s, uint8_t *dst, int w, int h, ptrdiff_t stride, int is_luma)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00310">error_resilience.c:310</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="afft__template_8c_html_a9f2587d1070b8924b276ba83988d3667"><div class="ttname"><a href="fft__template_8c.html#a9f2587d1070b8924b276ba83988d3667">pass</a></div><div class="ttdeci">#define pass</div><div class="ttdef"><b>Definition:</b> <a href="fft__template_8c_source.html#l00619">fft_template.c:619</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a></div><div class="ttdeci">@ AV_CODEC_ID_H264</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00076">codec_id.h:76</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a3f21e90669fe8bd24c526f317716f76b"><div class="ttname"><a href="error__resilience_8c.html#a3f21e90669fe8bd24c526f317716f76b">add_blocklist</a></div><div class="ttdeci">static av_always_inline void add_blocklist(int(*blocklist)[2], int *blocklist_length, uint8_t *fixed, int mb_x, int mb_y, int mb_xy)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00381">error_resilience.c:381</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga135e9e929b5033bb8f68322497b2effc"><div class="ttname"><a href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a></div><div class="ttdeci">void av_buffer_unref(AVBufferRef **buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00125">buffer.c:125</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html_a42c5b919d4d0527fa94f25b89b60ae06"><div class="ttname"><a href="error__resilience_8h.html#a42c5b919d4d0527fa94f25b89b60ae06">ER_AC_ERROR</a></div><div class="ttdeci">#define ER_AC_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00031">error_resilience.h:31</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html_ad43db7da26ad2ea6d2d466ea7f039aee"><div class="ttname"><a href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a></div><div class="ttdeci">#define ER_MB_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00038">error_resilience.h:38</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_I</div><div class="ttdoc">Intra.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00274">avutil.h:274</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_ad8231478b0fe9ead385b843c2eb57482"><div class="ttname"><a href="error__resilience_8c.html#ad8231478b0fe9ead385b843c2eb57482">guess_dc</a></div><div class="ttdeci">static void guess_dc(ERContext *s, int16_t *dc, int w, int h, ptrdiff_t stride, int is_luma)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00138">error_resilience.c:138</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a6101c3b2a02c61ea41f3c97e88b64d39"><div class="ttname"><a href="avcodec_8h.html#a6101c3b2a02c61ea41f3c97e88b64d39">AV_EF_EXPLODE</a></div><div class="ttdeci">#define AV_EF_EXPLODE</div><div class="ttdoc">abort decoding on minor error detection</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01666">avcodec.h:1666</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="alibavcodec_2diracdec_8c_html_abba89017a0b8aef3a4defd8fe9c20a9e"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a></div><div class="ttdeci">static int weight(int i, int blen, int offset)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01560">diracdec.c:1560</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a98f9328b4f99d0b6a3974cf441633edf"><div class="ttname"><a href="mpegvideo_8h.html#a98f9328b4f99d0b6a3974cf441633edf">MV_TYPE_8X8</a></div><div class="ttdeci">#define MV_TYPE_8X8</div><div class="ttdoc">4 vectors (H.263, MPEG-4 4MV)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00267">mpegvideo.h:267</a></div></div>
<div class="ttc" id="asnow_8txt_html_a719d7e9253d560ae4bac6546c3abc071"><div class="ttname"><a href="snow_8txt.html#a719d7e9253d560ae4bac6546c3abc071">dc</a></div><div class="ttdeci">Tag MUST be and&lt; 10hcoeff half pel interpolation filter coefficients, hcoeff[0] are the 2 middle coefficients[1] are the next outer ones and so on, resulting in a filter like:...eff[2], hcoeff[1], hcoeff[0], hcoeff[0], hcoeff[1], hcoeff[2] ... the sign of the coefficients is not explicitly stored but alternates after each coeff and coeff[0] is positive, so ...,+,-,+,-,+,+,-,+,-,+,... hcoeff[0] is not explicitly stored but found by subtracting the sum of all stored coefficients with signs from 32 hcoeff[0]=32 - hcoeff[1] - hcoeff[2] - ... a good choice for hcoeff and htaps is htaps=6 hcoeff={40,-10, 2} an alternative which requires more computations at both encoder and decoder side and may or may not be better is htaps=8 hcoeff={42,-14, 6,-2}ref_frames minimum of the number of available reference frames and max_ref_frames for example the first frame after a key frame always has ref_frames=1spatial_decomposition_type wavelet type 0 is a 9/7 symmetric compact integer wavelet 1 is a 5/3 symmetric compact integer wavelet others are reserved stored as delta from last, last is reset to 0 if always_reset||keyframeqlog quality(logarithmic quantizer scale) stored as delta from last, last is reset to 0 if always_reset||keyframemv_scale stored as delta from last, last is reset to 0 if always_reset||keyframe FIXME check that everything works fine if this changes between framesqbias dequantization bias stored as delta from last, last is reset to 0 if always_reset||keyframeblock_max_depth maximum depth of the block tree stored as delta from last, last is reset to 0 if always_reset||keyframequant_table quantization tableHighlevel bitstream structure:==============================--------------------------------------------|Header|--------------------------------------------|------------------------------------|||Block0||||split?||||yes no||||......... intra?||||:Block01 :yes no||||:Block02 :....... ..........||||:Block03 ::y DC ::ref index:||||:Block04 ::cb DC ::motion x :||||......... :cr DC ::motion y :||||....... ..........|||------------------------------------||------------------------------------|||Block1|||...|--------------------------------------------|------------ ------------ ------------|||Y subbands||Cb subbands||Cr subbands||||--- ---||--- ---||--- ---|||||LL0||HL0||||LL0||HL0||||LL0||HL0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||LH0||HH0||||LH0||HH0||||LH0||HH0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HL1||LH1||||HL1||LH1||||HL1||LH1|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HH1||HL2||||HH1||HL2||||HH1||HL2|||||...||...||...|||------------ ------------ ------------|--------------------------------------------Decoding process:=================------------|||Subbands|------------||||------------|Intra DC||||LL0 subband prediction ------------|\ Dequantization ------------------- \||Reference frames|\ IDWT|------- -------|Motion \|||Frame 0||Frame 1||Compensation . OBMC v -------|------- -------|--------------. \------&gt; Frame n output Frame Frame&lt;----------------------------------/|...|------------------- Range Coder:============Binary Range Coder:------------------- The implemented range coder is an adapted version based upon &quot;Range encoding: an algorithm for removing redundancy from a digitised message.&quot; by G. N. N. Martin. The symbols encoded by the Snow range coder are bits(0|1). The associated probabilities are not fix but change depending on the symbol mix seen so far. bit seen|new state ---------+----------------------------------------------- 0|256 - state_transition_table[256 - old_state];1|state_transition_table[old_state];state_transition_table={ 0, 0, 0, 0, 0, 0, 0, 0, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 190, 191, 192, 194, 194, 195, 196, 197, 198, 199, 200, 201, 202, 202, 204, 205, 206, 207, 208, 209, 209, 210, 211, 212, 213, 215, 215, 216, 217, 218, 219, 220, 220, 222, 223, 224, 225, 226, 227, 227, 229, 229, 230, 231, 232, 234, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 248, 0, 0, 0, 0, 0, 0, 0};FIXME Range Coding of integers:------------------------- FIXME Neighboring Blocks:===================left and top are set to the respective blocks unless they are outside of the image in which case they are set to the Null block top-left is set to the top left block unless it is outside of the image in which case it is set to the left block if this block has no larger parent block or it is at the left side of its parent block and the top right block is not outside of the image then the top right block is used for top-right else the top-left block is used Null block y, cb, cr are 128 level, ref, mx and my are 0 Motion Vector Prediction:=========================1. the motion vectors of all the neighboring blocks are scaled to compensate for the difference of reference frames scaled_mv=(mv *(256 *(current_reference+1)/(mv.reference+1))+128)&gt; the median of the scaled top and top right vectors is used as motion vector prediction the used motion vector is the sum of the predictor and(mvx_diff, mvy_diff) *mv_scale Intra DC Prediction block[y][x] dc[1]</div><div class="ttdef"><b>Definition:</b> <a href="snow_8txt_source.html#l00400">snow.txt:400</a></div></div>
<div class="ttc" id="arectangle_8h_html"><div class="ttname"><a href="rectangle_8h.html">rectangle.h</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html_a0bf1ca2f964d50a238af584b681cf1e3"><div class="ttname"><a href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a></div><div class="ttdeci">#define VP_START</div><div class="ttdoc">&lt; current MB is the first after a resync marker</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00030">error_resilience.h:30</a></div></div>
<div class="ttc" id="alog_8c_html_a3b4f0685dba79673184dceeecd4ca93f"><div class="ttname"><a href="log_8c.html#a3b4f0685dba79673184dceeecd4ca93f">color</a></div><div class="ttdeci">static const uint32_t color[16+AV_CLASS_CATEGORY_NB]</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00092">log.c:92</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a91bc1a1c1c4a3cc6db54d59705fded0b"><div class="ttname"><a href="avcodec_8h.html#a91bc1a1c1c4a3cc6db54d59705fded0b">FF_THREAD_SLICE</a></div><div class="ttdeci">#define FF_THREAD_SLICE</div><div class="ttdoc">Decode more than one part of a single frame at once.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01797">avcodec.h:1797</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="aundefined_8txt_html_ad99f336d4c117c453fef82993434eb4d"><div class="ttname"><a href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a></div><div class="ttdeci">The reader does not expect b to be semantically here and if the code is changed by maybe adding a a division or other the signedness will almost certainly be mistaken To avoid this confusion a new type was SUINT is the C unsigned type but it holds a signed int to use the same example SUINT a</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00041">undefined.txt:41</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_gacbf2ea8b2b89924c890ef8ec10a3d922"><div class="ttname"><a href="group__lavu__picture.html#gacbf2ea8b2b89924c890ef8ec10a3d922">av_get_picture_type_char</a></div><div class="ttdeci">char av_get_picture_type_char(enum AVPictureType pict_type)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2utils_8c_source.html#l00088">utils.c:88</a></div></div>
<div class="ttc" id="aavassert_8h_html_a2764bf422e4df5bf3aac652f21fe780a"><div class="ttname"><a href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a></div><div class="ttdeci">#define av_assert2(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00064">avassert.h:64</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="aavassert_8h_html_a557ed9c8df70c282bf6b7e0e07d7d5b0"><div class="ttname"><a href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a></div><div class="ttdeci">#define av_assert1(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00053">avassert.h:53</a></div></div>
<div class="ttc" id="aattributes_8h_html_a28f50f4c125959216885f01d56dbe866"><div class="ttname"><a href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a></div><div class="ttdeci">#define av_always_inline</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00049">attributes.h:49</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="alibswscale_2version_8h_html"><div class="ttname"><a href="libswscale_2version_8h.html">version.h</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="ame__cmp_8h_html"><div class="ttname"><a href="me__cmp_8h.html">me_cmp.h</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_B</div><div class="ttdoc">Bi-dir predicted.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00276">avutil.h:276</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html"><div class="ttname"><a href="error__resilience_8h.html">error_resilience.h</a></div></div>
<div class="ttc" id="agcc_2stdatomic_8h_html_aedf6fb62e0fc9e8f8cf2e3685f0a1e88"><div class="ttname"><a href="gcc_2stdatomic_8h.html#aedf6fb62e0fc9e8f8cf2e3685f0a1e88">atomic_fetch_add</a></div><div class="ttdeci">#define atomic_fetch_add(object, operand)</div><div class="ttdef"><b>Definition:</b> <a href="gcc_2stdatomic_8h_source.html#l00131">stdatomic.h:131</a></div></div>
<div class="ttc" id="advbsubdec_8c_html_a583257b7c70608a95289b0a109197ca3"><div class="ttname"><a href="dvbsubdec_8c.html#a583257b7c70608a95289b0a109197ca3">cm</a></div><div class="ttdeci">#define cm</div><div class="ttdef"><b>Definition:</b> <a href="dvbsubdec_8c_source.html#l00037">dvbsubdec.c:37</a></div></div>
<div class="ttc" id="atests_2jpeg2000dwt_8c_html_a5cabdd8be5af41f675fed06498e094b7"><div class="ttname"><a href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a></div><div class="ttdeci">static int ref[MAX_W *MAX_W]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2jpeg2000dwt_8c_source.html#l00107">jpeg2000dwt.c:107</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_aa30c6b3733564bbd1f159c4554c07b75"><div class="ttname"><a href="error__resilience_8c.html#aa30c6b3733564bbd1f159c4554c07b75">MV_LISTED</a></div><div class="ttdeci">#define MV_LISTED</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00380">error_resilience.c:380</a></div></div>
<div class="ttc" id="astruct_e_r_picture_html"><div class="ttname"><a href="struct_e_r_picture.html">ERPicture</a></div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00041">error_resilience.h:41</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_aa222e3fd20c93eaf918936937543e550"><div class="ttname"><a href="error__resilience_8c.html#aa222e3fd20c93eaf918936937543e550">put_dc</a></div><div class="ttdeci">static void put_dc(ERContext *s, uint8_t *dest_y, uint8_t *dest_cb, uint8_t *dest_cr, int mb_x, int mb_y)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00059">error_resilience.c:59</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a69ee557358fd6cd78c0d051e2532c89f"><div class="ttname"><a href="mpegutils_8h.html#a69ee557358fd6cd78c0d051e2532c89f">IS_INTER</a></div><div class="ttdeci">#define IS_INTER(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00079">mpegutils.h:79</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html_a52711cb6645977b95bf9d991b02a4a8f"><div class="ttname"><a href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a></div><div class="ttdeci">#define ER_MB_END</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00039">error_resilience.h:39</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html_a85f3dd456588d7b4b71f943ecc76ef63"><div class="ttname"><a href="error__resilience_8h.html#a85f3dd456588d7b4b71f943ecc76ef63">ER_MV_END</a></div><div class="ttdeci">#define ER_MV_END</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00036">error_resilience.h:36</a></div></div>
<div class="ttc" id="amacros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a91f96ac4aa02badb684e42c5294a45bf"><div class="ttname"><a href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a></div><div class="ttdeci">#define MV_DIR_FORWARD</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00262">mpegvideo.h:262</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_a38248dbb9d274f4c6509ee063a177edf"><div class="ttname"><a href="error__resilience_8c.html#a38248dbb9d274f4c6509ee063a177edf">ff_er_frame_end</a></div><div class="ttdeci">void ff_er_frame_end(ERContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00900">error_resilience.c:900</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a0054aac01003b56232190c1f31bc8ad9"><div class="ttname"><a href="cbs__av1_8c.html#a0054aac01003b56232190c1f31bc8ad9">fixed</a></div><div class="ttdeci">#define fixed(width, name, value)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00565">cbs_av1.c:565</a></div></div>
<div class="ttc" id="anellymoserenc_8c_html_a0a5299ac77dc4fb1f9b2682d957945d2"><div class="ttname"><a href="nellymoserenc_8c.html#a0a5299ac77dc4fb1f9b2682d957945d2">distance</a></div><div class="ttdeci">static float distance(float x, float y, int band)</div><div class="ttdef"><b>Definition:</b> <a href="nellymoserenc_8c_source.html#l00234">nellymoserenc.c:234</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="avp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="aerror__resilience_8h_html_a88006d7542a25c0412e6f6952f96b410"><div class="ttname"><a href="error__resilience_8h.html#a88006d7542a25c0412e6f6952f96b410">ER_AC_END</a></div><div class="ttdeci">#define ER_AC_END</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00034">error_resilience.h:34</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_af8a9cbe9495fcafaa892b24b383acf96"><div class="ttname"><a href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a></div><div class="ttdeci">#define atomic_init(obj, value)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00033">stdatomic.h:33</a></div></div>
<div class="ttc" id="amathops_8h_html_a6b63e9916b6b0ead1e780a4bdb0a53c6"><div class="ttname"><a href="mathops_8h.html#a6b63e9916b6b0ead1e780a4bdb0a53c6">MAX_NEG_CROP</a></div><div class="ttdeci">#define MAX_NEG_CROP</div><div class="ttdef"><b>Definition:</b> <a href="mathops_8h_source.html#l00031">mathops.h:31</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a4387693eb304cef91531ccb2c3a7dfed"><div class="ttname"><a href="avcodec_8h.html#a4387693eb304cef91531ccb2c3a7dfed">FF_EC_FAVOR_INTER</a></div><div class="ttdeci">#define FF_EC_FAVOR_INTER</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01604">avcodec.h:1604</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG2VIDEO</div><div class="ttdoc">preferred ID for MPEG-1/2 video decoding</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00051">codec_id.h:51</a></div></div>
<div class="ttc" id="aerror__resilience_8c_html_ab6e33e69e6e94ae22ed1d453efe327d2"><div class="ttname"><a href="error__resilience_8c.html#ab6e33e69e6e94ae22ed1d453efe327d2">filter181</a></div><div class="ttdeci">static void filter181(int16_t *data, int width, int height, ptrdiff_t stride)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00097">error_resilience.c:97</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
