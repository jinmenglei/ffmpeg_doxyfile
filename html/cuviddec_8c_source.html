<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/cuviddec.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">cuviddec.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="cuviddec_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Nvidia CUVID decoder</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2016 Timo Rothenpieler &lt;timo@rothenpieler.org&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dynlink__loader_8h.html">compat/cuda/dynlink_loader.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="buffer_8h.html">libavutil/buffer.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mathematics_8h.html">libavutil/mathematics.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hwcontext_8h.html">libavutil/hwcontext.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hwcontext__cuda__internal_8h.html">libavutil/hwcontext_cuda_internal.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cuda__check_8h.html">libavutil/cuda_check.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fifo_8h.html">libavutil/fifo.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">libavutil/log.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixdesc_8h.html">libavutil/pixdesc.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="decode_8h.html">decode.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hwconfig_8h.html">hwconfig.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nvdec_8h.html">nvdec.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#if !NVDECAPI_CHECK_VERSION(9, 0)</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a6c13ba7f37b47f1053998edb6de66707">   41</a></span>&#160;<span class="preprocessor">#define cudaVideoSurfaceFormat_YUV444 2</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#ae6245e751a2cb4cbb0c5dea0b5b96711">   42</a></span>&#160;<span class="preprocessor">#define cudaVideoSurfaceFormat_YUV444_16Bit 3</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#if NVDECAPI_CHECK_VERSION(11, 0)</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#define CUVID_HAS_AV1_SUPPORT</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html">   49</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_cuvid_context.html">CuvidContext</a></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a80e37f9e687aba814dc9b7a54a9d4079">   51</a></span>&#160;    <a class="code" href="struct_a_v_class.html">AVClass</a> *<a class="code" href="struct_cuvid_context.html#a80e37f9e687aba814dc9b7a54a9d4079">avclass</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a3b6e7e87f12272237e198128e3f14e3a">   53</a></span>&#160;    CUvideodecoder <a class="code" href="struct_cuvid_context.html#a3b6e7e87f12272237e198128e3f14e3a">cudecoder</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a3fb9b69ea1990c7c423035ad2c3c04a9">   54</a></span>&#160;    CUvideoparser <a class="code" href="struct_cuvid_context.html#a3fb9b69ea1990c7c423035ad2c3c04a9">cuparser</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a858d289f8f190aae24b119b58e462046">   56</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="struct_cuvid_context.html#a858d289f8f190aae24b119b58e462046">cu_gpu</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a95d1da91f82c2a5509cd255eca6ed4cd">   57</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#a95d1da91f82c2a5509cd255eca6ed4cd">nb_surfaces</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a0a997ee23233e301c2ae309f3da08eaf">   58</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#a0a997ee23233e301c2ae309f3da08eaf">drop_second_field</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a19e0d357257e8686c1b28bf5753333c0">   59</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="struct_cuvid_context.html#a19e0d357257e8686c1b28bf5753333c0">crop_expr</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a40030d9cc1fc3c3c825e6953e6d6f65a">   60</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="struct_cuvid_context.html#a40030d9cc1fc3c3c825e6953e6d6f65a">resize_expr</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#ac27d88701695f568c8495985b978da16">   63</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#ac27d88701695f568c8495985b978da16">left</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a9917d7e1522feff5b3aa92b5423bf63a">   64</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#a9917d7e1522feff5b3aa92b5423bf63a">top</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a4b797f0ac8a0880eb7ab6d048057ee7a">   65</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#a4b797f0ac8a0880eb7ab6d048057ee7a">right</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#af7fc009ea78cbea9407adbe2767f8715">   66</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#af7fc009ea78cbea9407adbe2767f8715">bottom</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a541b6f9ed5be6aed1ae1e8a78f85bda0">   67</a></span>&#160;    } <a class="code" href="struct_cuvid_context.html#a541b6f9ed5be6aed1ae1e8a78f85bda0">crop</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a033c870285b387ec1e89d8a9104188fa">   70</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#a033c870285b387ec1e89d8a9104188fa">width</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a9cec684208747b75664ab666f1f52e71">   71</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#a9cec684208747b75664ab666f1f52e71">height</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a3d8b9e67f94eb4a995313641938eebd8">   72</a></span>&#160;    } <a class="code" href="struct_cuvid_context.html#a3d8b9e67f94eb4a995313641938eebd8">resize</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a73199c3ff2d59955e75abdec0e8ea5d2">   74</a></span>&#160;    <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *<a class="code" href="struct_cuvid_context.html#a73199c3ff2d59955e75abdec0e8ea5d2">hwdevice</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#ac18e7dc8d77f29a48d442a4490d7a35f">   75</a></span>&#160;    <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *<a class="code" href="struct_cuvid_context.html#ac18e7dc8d77f29a48d442a4490d7a35f">hwframe</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a1c2d9a0fda46ebb0b917729476d50ec2">   77</a></span>&#160;    <a class="code" href="struct_a_v_fifo_buffer.html">AVFifoBuffer</a> *<a class="code" href="struct_cuvid_context.html#a1c2d9a0fda46ebb0b917729476d50ec2">frame_queue</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#ab22bf838ab6657fc8fe24e73b3f2ac10">   79</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#ab22bf838ab6657fc8fe24e73b3f2ac10">deint_mode</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a54376dff5d44ea4e5b2a01b9390567cb">   80</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#a54376dff5d44ea4e5b2a01b9390567cb">deint_mode_current</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a5b59a2a72efd8b08c8a8328491f33ada">   81</a></span>&#160;    int64_t <a class="code" href="struct_cuvid_context.html#a5b59a2a72efd8b08c8a8328491f33ada">prev_pts</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#ae01614f64553f8df1b2cb552aed665a2">   82</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#ae01614f64553f8df1b2cb552aed665a2">progressive_sequence</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#ac4ce87b4c74058f6d7d7d4c2f07c937b">   84</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#ac4ce87b4c74058f6d7d7d4c2f07c937b">internal_error</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a72c86801d3408c429c145b307579d3a5">   85</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_context.html#a72c86801d3408c429c145b307579d3a5">decoder_flushing</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a117c15db09a6772e94d30419f7718dc4">   87</a></span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="struct_cuvid_context.html#a117c15db09a6772e94d30419f7718dc4">key_frame</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a80e8871963db38d6a1c3595427b6eafd">   89</a></span>&#160;    cudaVideoCodec <a class="code" href="struct_cuvid_context.html#a80e8871963db38d6a1c3595427b6eafd">codec_type</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#ac04ceebc808697d11b922ec788e13aa4">   90</a></span>&#160;    cudaVideoChromaFormat <a class="code" href="struct_cuvid_context.html#ac04ceebc808697d11b922ec788e13aa4">chroma_format</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#ac4537b63c1caba757dda1b7d74ec1d92">   92</a></span>&#160;    CUVIDDECODECAPS <a class="code" href="struct_cuvid_context.html#ac4537b63c1caba757dda1b7d74ec1d92">caps8</a>, <a class="code" href="struct_cuvid_context.html#acd94b2f8874923611d942a50819e9cc2">caps10</a>, <a class="code" href="struct_cuvid_context.html#a3891f0b341ab1fef4136e11037b646da">caps12</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#accd1fef3717eeb5ea73a86cb1c789f45">   94</a></span>&#160;    CUVIDPARSERPARAMS <a class="code" href="struct_cuvid_context.html#accd1fef3717eeb5ea73a86cb1c789f45">cuparseinfo</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#aee0bbfb7968694dbb5ea9d6d0b6d827e">   95</a></span>&#160;    CUVIDEOFORMATEX *<a class="code" href="struct_cuvid_context.html#aee0bbfb7968694dbb5ea9d6d0b6d827e">cuparse_ext</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a5c6f6e3aab966aa688c4b042595dcdbe">   97</a></span>&#160;    CudaFunctions *<a class="code" href="struct_cuvid_context.html#a5c6f6e3aab966aa688c4b042595dcdbe">cudl</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="struct_cuvid_context.html#a70fbab8f5de2b873b7ad8ecd2dbcf1be">   98</a></span>&#160;    CuvidFunctions *<a class="code" href="struct_cuvid_context.html#a70fbab8f5de2b873b7ad8ecd2dbcf1be">cvdl</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a34e7809113a8fc57ac40b950e0b2e9e9">   99</a></span>&#160;} <a class="code" href="cuviddec_8c.html#a34e7809113a8fc57ac40b950e0b2e9e9">CuvidContext</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="struct_cuvid_parsed_frame.html">  101</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">  103</a></span>&#160;    CUVIDPARSERDISPINFO <a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="struct_cuvid_parsed_frame.html#a2100975adb6d5d98832b1078c4f4bfd2">  104</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_parsed_frame.html#a2100975adb6d5d98832b1078c4f4bfd2">second_field</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="struct_cuvid_parsed_frame.html#a0197d7785f358c463ff487c209442c7e">  105</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_cuvid_parsed_frame.html#a0197d7785f358c463ff487c209442c7e">is_deinterlacing</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#acf858ae6e08ceaa6bd5e1b1fc73a6411">  106</a></span>&#160;} <a class="code" href="cuviddec_8c.html#acf858ae6e08ceaa6bd5e1b1fc73a6411">CuvidParsedFrame</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">  108</a></span>&#160;<span class="preprocessor">#define CHECK_CU(x) FF_CUDA_CHECK_DL(avctx, ctx-&gt;cudl, x)</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#ab6399e99afbfdf9f0ea61f19225d05f4">  110</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> CUDAAPI <a class="code" href="cuviddec_8c.html#ab6399e99afbfdf9f0ea61f19225d05f4">cuvid_handle_video_sequence</a>(<span class="keywordtype">void</span> *opaque, CUVIDEOFORMAT* <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx = opaque;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *hwframe_ctx = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a>*)<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe-&gt;data;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    CUVIDDECODECAPS *caps = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    CUVIDDECODECREATEINFO cuinfo;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">int</span> surface_fmt;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">int</span> chroma_444;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordtype">int</span> old_width = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordtype">int</span> old_height = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>[3] = { <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5ab95e18c0c9e5335f29121418eab314">AV_PIX_FMT_CUDA</a>,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                       <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>,  <span class="comment">// Will be updated below</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                       <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a> };</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;pfnSequenceCallback, progressive_sequence=%d\n&quot;</span>, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;progressive_sequence);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    memset(&amp;cuinfo, 0, <span class="keyword">sizeof</span>(cuinfo));</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = 0;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    avctx-&gt;coded_width = cuinfo.ulWidth = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;coded_width;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    avctx-&gt;coded_height = cuinfo.ulHeight = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;coded_height;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// apply cropping</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    cuinfo.display_area.left = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;display_area.left + <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop.left;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    cuinfo.display_area.top = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;display_area.top + <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop.top;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    cuinfo.display_area.right = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;display_area.right - <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop.right;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    cuinfo.display_area.bottom = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;display_area.bottom - <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop.bottom;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// width and height need to be set before calling ff_get_format</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;resize_expr) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        avctx-&gt;width = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;resize.width;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        avctx-&gt;height = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;resize.height;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        avctx-&gt;width = cuinfo.display_area.right - cuinfo.display_area.left;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        avctx-&gt;height = cuinfo.display_area.bottom - cuinfo.display_area.top;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// target width/height need to be multiples of two</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    cuinfo.ulTargetWidth = avctx-&gt;width = (avctx-&gt;width + 1) &amp; ~1;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    cuinfo.ulTargetHeight = avctx-&gt;height = (avctx-&gt;height + 1) &amp; ~1;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// aspect ratio conversion, 1:1, depends on scaled resolution</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    cuinfo.target_rect.left = 0;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    cuinfo.target_rect.top = 0;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    cuinfo.target_rect.right = cuinfo.ulTargetWidth;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    cuinfo.target_rect.bottom = cuinfo.ulTargetHeight;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    chroma_444 = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;chroma_format == cudaVideoChromaFormat_444;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;bit_depth_luma_minus8) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">case</span> 0: <span class="comment">// 8-bit</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>[1] = chroma_444 ? <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a">AV_PIX_FMT_YUV444P</a> : <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        caps = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">case</span> 2: <span class="comment">// 10-bit</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>[1] = chroma_444 ? <a class="code" href="pixfmt_8h.html#ae7920607c5cf9a219cc94b5c7efc457d">AV_PIX_FMT_YUV444P16</a> : <a class="code" href="pixfmt_8h.html#a6265531cbe491ec34449e3769e545f1f">AV_PIX_FMT_P010</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        caps = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">case</span> 4: <span class="comment">// 12-bit</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>[1] = chroma_444 ? <a class="code" href="pixfmt_8h.html#ae7920607c5cf9a219cc94b5c7efc457d">AV_PIX_FMT_YUV444P16</a> : <a class="code" href="pixfmt_8h.html#a6506505b35c1afd66c10cd537369cdd6">AV_PIX_FMT_P016</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        caps = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (!caps || !caps-&gt;bIsSupported) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;unsupported bit depth: %d\n&quot;</span>,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;               <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;bit_depth_luma_minus8 + 8);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    surface_fmt = <a class="code" href="decode_8c.html#a8a7eadb05d8ea6f849a146035377ad1f">ff_get_format</a>(avctx, <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (surface_fmt &lt; 0) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;ff_get_format failed: %d\n&quot;</span>, surface_fmt);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Formats: Original: %s | HW: %s | SW: %s\n&quot;</span>,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;           <a class="code" href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a>(avctx-&gt;pix_fmt),</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;           <a class="code" href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a>(surface_fmt),</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;           <a class="code" href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a>(avctx-&gt;sw_pix_fmt));</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    avctx-&gt;pix_fmt = surface_fmt;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// Update our hwframe ctx, as the get_format callback might have refreshed it!</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;hw_frames_ctx) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(avctx-&gt;hw_frames_ctx);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        hwframe_ctx = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a>*)<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe-&gt;data;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a>(avctx, <a class="code" href="group__lavu__math__rational.html#gaffa24e7bd38e12dbac540d8b66461f97">av_div_q</a>(</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        (<a class="code" href="struct_a_v_rational.html">AVRational</a>){ <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;display_aspect_ratio.x, <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;display_aspect_ratio.y },</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){ avctx-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>, avctx-&gt;height }));</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;deint_mode_current = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;progressive_sequence</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                              ? cudaVideoDeinterlaceMode_Weave</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                              : <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;deint_mode;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;progressive_sequence = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;progressive_sequence;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;progressive_sequence &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;deint_mode_current == cudaVideoDeinterlaceMode_Weave)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_frame.html#a49020cc320b8fb1f5449167b6c97515b">flags</a> |= <a class="code" href="group__lavc__core.html#ga502225f65e2092fbc45945247892cb0f">AV_CODEC_FLAG_INTERLACED_DCT</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        avctx-&gt;flags &amp;= ~<a class="code" href="group__lavc__core.html#ga502225f65e2092fbc45945247892cb0f">AV_CODEC_FLAG_INTERLACED_DCT</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;video_signal_description.video_full_range_flag)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        avctx-&gt;color_range = <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        avctx-&gt;color_range = <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    avctx-&gt;color_primaries = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;video_signal_description.<a class="code" href="struct_a_v_frame.html#a59a3f830494f2ed1133103a1bc9481e7">color_primaries</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    avctx-&gt;color_trc = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;video_signal_description.transfer_characteristics;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_frame.html#a9262c231f1f64869439b4fe587fe1710">colorspace</a> = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;video_signal_description.matrix_coefficients;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;bitrate)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        avctx-&gt;bit_rate = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;bitrate;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;frame_rate.numerator &amp;&amp; <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;frame_rate.denominator) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        avctx-&gt;framerate.num = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;frame_rate.numerator;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        avctx-&gt;framerate.den = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;frame_rate.denominator;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            &amp;&amp; avctx-&gt;coded_width == <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;coded_width</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            &amp;&amp; avctx-&gt;coded_height == <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;coded_height</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a> == old_width</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            &amp;&amp; avctx-&gt;height == old_height</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;chroma_format == <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;chroma_format</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;codec_type == <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;codec)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;Re-initializing decoder\n&quot;</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidDestroyDecoder(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder));</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error &lt; 0)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (hwframe_ctx-&gt;pool &amp;&amp; (</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            hwframe_ctx-&gt;width &lt; avctx-&gt;width ||</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            hwframe_ctx-&gt;height &lt; avctx-&gt;height ||</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            hwframe_ctx-&gt;format != <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5ab95e18c0c9e5335f29121418eab314">AV_PIX_FMT_CUDA</a> ||</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            hwframe_ctx-&gt;sw_format != avctx-&gt;sw_pix_fmt)) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;AVHWFramesContext is already initialized with incompatible parameters\n&quot;</span>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;width: %d &lt;-&gt; %d\n&quot;</span>, hwframe_ctx-&gt;width, avctx-&gt;width);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;height: %d &lt;-&gt; %d\n&quot;</span>, hwframe_ctx-&gt;height, avctx-&gt;height);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;format: %s &lt;-&gt; cuda\n&quot;</span>, <a class="code" href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a>(hwframe_ctx-&gt;format));</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;sw_format: %s &lt;-&gt; %s\n&quot;</span>,</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;               <a class="code" href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a>(hwframe_ctx-&gt;sw_format), <a class="code" href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a>(avctx-&gt;sw_pix_fmt));</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;chroma_format = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;chroma_format;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    cuinfo.CodecType = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;codec_type = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;codec;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    cuinfo.ChromaFormat = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;chroma_format;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">switch</span> (avctx-&gt;sw_pix_fmt) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>:</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        cuinfo.OutputFormat = cudaVideoSurfaceFormat_NV12;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a6265531cbe491ec34449e3769e545f1f">AV_PIX_FMT_P010</a>:</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a6506505b35c1afd66c10cd537369cdd6">AV_PIX_FMT_P016</a>:</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        cuinfo.OutputFormat = cudaVideoSurfaceFormat_P016;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a">AV_PIX_FMT_YUV444P</a>:</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        cuinfo.OutputFormat = <a class="code" href="cuviddec_8c.html#a6c13ba7f37b47f1053998edb6de66707">cudaVideoSurfaceFormat_YUV444</a>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#ae7920607c5cf9a219cc94b5c7efc457d">AV_PIX_FMT_YUV444P16</a>:</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        cuinfo.OutputFormat = <a class="code" href="cuviddec_8c.html#ae6245e751a2cb4cbb0c5dea0b5b96711">cudaVideoSurfaceFormat_YUV444_16Bit</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported output format: %s\n&quot;</span>,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;               <a class="code" href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a>(avctx-&gt;sw_pix_fmt));</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    cuinfo.ulNumDecodeSurfaces = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;nb_surfaces;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    cuinfo.ulNumOutputSurfaces = 1;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    cuinfo.ulCreationFlags = cudaVideoCreate_PreferCUVID;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    cuinfo.bitDepthMinus8 = <a class="code" href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a>-&gt;bit_depth_luma_minus8;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    cuinfo.DeinterlaceMode = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;deint_mode_current;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;deint_mode_current != cudaVideoDeinterlaceMode_Weave &amp;&amp; !<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;drop_second_field)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        avctx-&gt;framerate = <a class="code" href="group__lavu__math__rational.html#ga3f9c69432582e2857147bcba3c75dc32">av_mul_q</a>(avctx-&gt;framerate, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){2, 1});</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidCreateDecoder(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder, &amp;cuinfo));</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error &lt; 0)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (!hwframe_ctx-&gt;pool) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        hwframe_ctx-&gt;format = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5ab95e18c0c9e5335f29121418eab314">AV_PIX_FMT_CUDA</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        hwframe_ctx-&gt;sw_format = avctx-&gt;sw_pix_fmt;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        hwframe_ctx-&gt;width = avctx-&gt;width;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        hwframe_ctx-&gt;height = avctx-&gt;height;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = <a class="code" href="hwcontext_8c.html#a66a7e1ebc7e459ce07d3de6639ac7e38">av_hwframe_ctx_init</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe)) &lt; 0) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;av_hwframe_ctx_init failed\n&quot;</span>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a0ee6c9c42169709635f6d26d49ebf7b0">  332</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> CUDAAPI <a class="code" href="cuviddec_8c.html#a0ee6c9c42169709635f6d26d49ebf7b0">cuvid_handle_picture_decode</a>(<span class="keywordtype">void</span> *opaque, CUVIDPICPARAMS* picparams)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx = opaque;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;pfnDecodePicture\n&quot;</span>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;key_frame[picparams-&gt;CurrPicIdx] = picparams-&gt;intra_pic_flag;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidDecodePicture(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder, picparams));</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error &lt; 0)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a8753c8093c9b4b524ca54e452049c6d2">  348</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> CUDAAPI <a class="code" href="cuviddec_8c.html#a8753c8093c9b4b524ca54e452049c6d2">cuvid_handle_picture_display</a>(<span class="keywordtype">void</span> *opaque, CUVIDPARSERDISPINFO* dispinfo)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx = opaque;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a> parsed_frame = { { 0 } };</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a> = *dispinfo;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error = 0;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// For some reason, dispinfo-&gt;progressive_frame is sometimes wrong.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>.progressive_frame = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;progressive_sequence;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;deint_mode_current == cudaVideoDeinterlaceMode_Weave) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="libavutil_2fifo_8c.html#ae95c15dcdd266b4005f8919e4f571180">av_fifo_generic_write</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue, &amp;parsed_frame, <span class="keyword">sizeof</span>(<a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a>), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#a0197d7785f358c463ff487c209442c7e">is_deinterlacing</a> = 1;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <a class="code" href="libavutil_2fifo_8c.html#ae95c15dcdd266b4005f8919e4f571180">av_fifo_generic_write</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue, &amp;parsed_frame, <span class="keyword">sizeof</span>(<a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a>), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;drop_second_field) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#a2100975adb6d5d98832b1078c4f4bfd2">second_field</a> = 1;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <a class="code" href="libavutil_2fifo_8c.html#ae95c15dcdd266b4005f8919e4f571180">av_fifo_generic_write</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue, &amp;parsed_frame, <span class="keyword">sizeof</span>(<a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a>), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#af324391f20c02b7e33b8e200a6bc1021">  374</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="cuviddec_8c.html#af324391f20c02b7e33b8e200a6bc1021">cuvid_is_buffer_full</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">int</span> delay = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.ulMaxDisplayDelay;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;deint_mode != cudaVideoDeinterlaceMode_Weave &amp;&amp; !<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;drop_second_field)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        delay *= 2;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue) / <span class="keyword">sizeof</span>(<a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a>)) + delay &gt;= <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;nb_surfaces;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a03a32c5df9ba9785e774cbf499ce01f0">  385</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="cuviddec_8c.html#a03a32c5df9ba9785e774cbf499ce01f0">cuvid_decode_packet</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keyword">const</span> <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;{</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a> *device_ctx = (<a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a>*)<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice-&gt;data;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="struct_a_v_c_u_d_a_device_context.html">AVCUDADeviceContext</a> *device_hwctx = device_ctx-&gt;<a class="code" href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">hwctx</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    CUcontext <a class="code" href="motion_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>, cuda_ctx = device_hwctx-&gt;cuda_ctx;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    CUVIDSOURCEDATAPACKET cupkt;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0, eret = 0, is_flush = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoder_flushing;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;cuvid_decode_packet\n&quot;</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span> (is_flush &amp;&amp; avpkt &amp;&amp; avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cuviddec_8c.html#af324391f20c02b7e33b8e200a6bc1021">cuvid_is_buffer_full</a>(avctx) &amp;&amp; avpkt &amp;&amp; avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl-&gt;cuCtxPushCurrent(cuda_ctx));</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    memset(&amp;cupkt, 0, <span class="keyword">sizeof</span>(cupkt));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span> (avpkt &amp;&amp; avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        cupkt.payload_size = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        cupkt.payload = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">if</span> (avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            cupkt.flags = CUVID_PKT_TIMESTAMP;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                cupkt.timestamp = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){1, 10000000});</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                cupkt.timestamp = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        cupkt.flags = CUVID_PKT_ENDOFSTREAM;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoder_flushing = 1;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidParseVideoData(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser, &amp;cupkt));</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// cuvidParseVideoData doesn&#39;t return an error just because stuff failed...</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;cuvid decode callback error\n&quot;</span>);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;internal_error;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    eret = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl-&gt;cuCtxPopCurrent(&amp;<a class="code" href="motion_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>));</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (eret &lt; 0)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">return</span> eret;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_flush)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a34d7b281a49319ae824cb695ff6cd6a8">  450</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="cuviddec_8c.html#a34d7b281a49319ae824cb695ff6cd6a8">cuvid_output_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;{</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a> *device_ctx = (<a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a>*)<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice-&gt;data;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="struct_a_v_c_u_d_a_device_context.html">AVCUDADeviceContext</a> *device_hwctx = device_ctx-&gt;<a class="code" href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">hwctx</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    CUcontext <a class="code" href="motion_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>, cuda_ctx = device_hwctx-&gt;cuda_ctx;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    CUdeviceptr mapped_frame = 0;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0, eret = 0;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;cuvid_output_frame\n&quot;</span>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoder_flushing) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#a03a32c5df9ba9785e774cbf499ce01f0">cuvid_decode_packet</a>(avctx, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cuviddec_8c.html#af324391f20c02b7e33b8e200a6bc1021">cuvid_is_buffer_full</a>(avctx)) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> = {0};</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decode_8c.html#a87fcb1ca6a586c1480f9eaf926a3f09c">ff_decode_get_packet</a>(avctx, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#a03a32c5df9ba9785e774cbf499ce01f0">cuvid_decode_packet</a>(avctx, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">// cuvid_is_buffer_full() should avoid this.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN))</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl-&gt;cuCtxPushCurrent(cuda_ctx));</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue)) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a> *pixdesc;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a> parsed_frame;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        CUVIDPROCPARAMS params;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pitch = 0;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = 0;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="libavutil_2fifo_8c.html#ab708d2f19b7a9592caa278256787adb6">av_fifo_generic_read</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue, &amp;parsed_frame, <span class="keyword">sizeof</span>(<a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a>), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        memset(&amp;params, 0, <span class="keyword">sizeof</span>(params));</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        params.progressive_frame = parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>.progressive_frame;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        params.second_field = parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#a2100975adb6d5d98832b1078c4f4bfd2">second_field</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        params.top_field_first = parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>.top_field_first;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidMapVideoFrame(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder, parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>.picture_index, &amp;mapped_frame, &amp;pitch, &amp;params));</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5ab95e18c0c9e5335f29121418eab314">AV_PIX_FMT_CUDA</a>) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="hwcontext_8c.html#adfa5aaa3a4f69b163ea30cadc6d663dc">av_hwframe_get_buffer</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;av_hwframe_get_buffer failed\n&quot;</span>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decode_8c.html#a227b4a5329003bed45b8bdf0a4e370a1">ff_decode_frame_props</a>(avctx, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;ff_decode_frame_props failed\n&quot;</span>);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            pixdesc = <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1ff9829b01eeb0063c21d039dcc5900d">sw_pix_fmt</a>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pixdesc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#ae83de203f97288c9f4070212a5eac5de">nb_components</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> &gt;&gt; (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ? pixdesc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#abea8ed308fe00644fc066a00018afa95">log2_chroma_h</a> : 0);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                CUDA_MEMCPY2D cpy = {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                    .srcMemoryType = CU_MEMORYTYPE_DEVICE,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    .dstMemoryType = CU_MEMORYTYPE_DEVICE,</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    .srcDevice     = mapped_frame,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                    .dstDevice     = (CUdeviceptr)<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                    .srcPitch      = pitch,</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                    .dstPitch      = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                    .srcY          = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>,</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                    .WidthInBytes  = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(pitch, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]),</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                    .Height        = <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                };</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl-&gt;cuMemcpy2DAsync(&amp;cpy, device_hwctx-&gt;stream));</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>      ||</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                   avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a6265531cbe491ec34449e3769e545f1f">AV_PIX_FMT_P010</a>      ||</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                   avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a6506505b35c1afd66c10cd537369cdd6">AV_PIX_FMT_P016</a>      ||</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                   avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a">AV_PIX_FMT_YUV444P</a>   ||</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                   avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#ae7920607c5cf9a219cc94b5c7efc457d">AV_PIX_FMT_YUV444P16</a>) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = 0;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <a class="code" href="struct_a_v_frame.html">AVFrame</a> *tmp_frame = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">if</span> (!tmp_frame) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;av_frame_alloc failed\n&quot;</span>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            pixdesc = <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1ff9829b01eeb0063c21d039dcc5900d">sw_pix_fmt</a>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            tmp_frame-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a>        = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5ab95e18c0c9e5335f29121418eab314">AV_PIX_FMT_CUDA</a>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            tmp_frame-&gt;<a class="code" href="struct_a_v_frame.html#a29493fbfabaa21432c360a090426aa8e">hw_frames_ctx</a> = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            tmp_frame-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>         = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            tmp_frame-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a>        = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">             * Note that the following logic would not work for three plane</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">             * YUV420 because the pitch value is different for the chroma</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">             * planes.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pixdesc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#ae83de203f97288c9f4070212a5eac5de">nb_components</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                tmp_frame-&gt;<a class="code" href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]     = (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)mapped_frame + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                tmp_frame-&gt;<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = pitch;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += pitch * (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> &gt;&gt; (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ? pixdesc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#abea8ed308fe00644fc066a00018afa95">log2_chroma_h</a> : 0));</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(avctx, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;ff_get_buffer failed\n&quot;</span>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;tmp_frame);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="hwcontext_8c.html#abf1b1664b8239d953ae2cac8b643815a">av_hwframe_transfer_data</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, tmp_frame, 0);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;av_hwframe_transfer_data failed\n&quot;</span>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;tmp_frame);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;tmp_frame);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa102cde7ec5acbc099c3bcbb58556a18">AVERROR_BUG</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;key_frame = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;key_frame[parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>.picture_index];</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;width = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;height = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>.timestamp, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){1, 10000000}, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts = parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>.timestamp;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">if</span> (parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#a2100975adb6d5d98832b1078c4f4bfd2">second_field</a>) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_pts == INT64_MIN) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_pts = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts += (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> * avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>) / (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> * avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                <span class="keywordtype">int</span> pts_diff = (<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts - <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_pts) / 2;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_pts = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts += pts_diff;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="comment">/* CUVIDs opaque reordering breaks the internal pkt logic.</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">         * So set pkt_pts and clear all the other pkt_ fields.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="preprocessor">#if FF_API_PKT_PTS</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pkt_pts = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pkt_pos = -1;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pkt_duration = 0;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pkt_size = -1;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;interlaced_frame = !parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#a0197d7785f358c463ff487c209442c7e">is_deinterlacing</a> &amp;&amp; !parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>.progressive_frame;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;interlaced_frame)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;top_field_first = parsed_frame.<a class="code" href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">dispinfo</a>.top_field_first;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoder_flushing) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (mapped_frame)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        eret = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidUnmapVideoFrame(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder, mapped_frame));</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    eret = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl-&gt;cuCtxPopCurrent(&amp;<a class="code" href="motion_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">if</span> (eret &lt; 0)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">return</span> eret;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a6b1aa3d52a688982e33f3e048ffce07a">  642</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="cuviddec_8c.html#a6b1aa3d52a688982e33f3e048ffce07a">cuvid_decode_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">int</span> *got_frame, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt)</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;{</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;cuvid_decode_frame\n&quot;</span>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;deint_mode_current != cudaVideoDeinterlaceMode_Weave) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Deinterlacing is not supported via the old API\n&quot;</span>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoder_flushing) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#a03a32c5df9ba9785e774cbf499ce01f0">cuvid_decode_packet</a>(avctx, avpkt);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#a34d7b281a49319ae824cb695ff6cd6a8">cuvid_output_frame</a>(avctx, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN) || <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        *got_frame = 0;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        *got_frame = 1;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a3a495448f4dab120e3d1806e34253b42">  673</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="cuviddec_8c.html#a3a495448f4dab120e3d1806e34253b42">cuvid_decode_end</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="libavutil_2fifo_8c.html#a612be59edb6ab388a82d1487d1bd0c4d">av_fifo_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidDestroyVideoParser(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder)</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidDestroyDecoder(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;key_frame);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    cuvid_free_functions(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;}</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a77a3088ebff83e56e8345e0a895de5c2">  698</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="cuviddec_8c.html#a77a3088ebff83e56e8345e0a895de5c2">cuvid_test_capabilities</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                   <span class="keyword">const</span> CUVIDPARSERPARAMS *cuparseinfo,</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                   <span class="keywordtype">int</span> probed_width,</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                   <span class="keywordtype">int</span> probed_height,</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                   <span class="keywordtype">int</span> <a class="code" href="af__astats_8c.html#a3fb64d8b9f96155a5d4138e186198917">bit_depth</a>)</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;{</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    CUVIDDECODECAPS *caps;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordtype">int</span> res8 = 0, res10 = 0, res12 = 0;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidGetDecoderCaps) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Used Nvidia driver is too old to perform a capability check.\n&quot;</span>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;The minimum required version is &quot;</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;#<span class="keywordflow">if</span> defined(_WIN32) || defined(__CYGWIN__)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="stringliteral">&quot;378.66&quot;</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;#<span class="keywordflow">else</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="stringliteral">&quot;378.13&quot;</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;#endif</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <span class="stringliteral">&quot;. Continuing blind.\n&quot;</span>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.bIsSupported = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10.bIsSupported = 1;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="comment">// 12 bit was not supported before the capability check was introduced, so disable it.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12.bIsSupported = 0;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.eCodecType = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10.eCodecType = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12.eCodecType</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        = cuparseinfo-&gt;CodecType;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.eChromaFormat = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10.eChromaFormat = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12.eChromaFormat</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        = cudaVideoChromaFormat_420;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.nBitDepthMinus8 = 0;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10.nBitDepthMinus8 = 2;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12.nBitDepthMinus8 = 4;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    res8 = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidGetDecoderCaps(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8));</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    res10 = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidGetDecoderCaps(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10));</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    res12 = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidGetDecoderCaps(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12));</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;CUVID capabilities for %s:\n&quot;</span>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;8 bit: supported: %d, min_width: %d, max_width: %d, min_height: %d, max_height: %d\n&quot;</span>,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;           <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.bIsSupported, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.nMinWidth, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.nMaxWidth, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.nMinHeight, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.nMaxHeight);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;10 bit: supported: %d, min_width: %d, max_width: %d, min_height: %d, max_height: %d\n&quot;</span>,</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;           <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10.bIsSupported, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10.nMinWidth, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10.nMaxWidth, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10.nMinHeight, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10.nMaxHeight);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;12 bit: supported: %d, min_width: %d, max_width: %d, min_height: %d, max_height: %d\n&quot;</span>,</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;           <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12.bIsSupported, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12.nMinWidth, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12.nMaxWidth, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12.nMinHeight, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12.nMaxHeight);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="af__astats_8c.html#a3fb64d8b9f96155a5d4138e186198917">bit_depth</a>) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">case</span> 10:</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        caps = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps10;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">if</span> (res10 &lt; 0)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <span class="keywordflow">return</span> res10;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">case</span> 12:</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        caps = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps12;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">if</span> (res12 &lt; 0)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <span class="keywordflow">return</span> res12;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        caps = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">if</span> (res8 &lt; 0)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <span class="keywordflow">return</span> res8;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;caps8.bIsSupported) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Codec %s is not supported.\n&quot;</span>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (!caps-&gt;bIsSupported) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Bit depth %d is not supported.\n&quot;</span>, <a class="code" href="af__astats_8c.html#a3fb64d8b9f96155a5d4138e186198917">bit_depth</a>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (probed_width &gt; caps-&gt;nMaxWidth || probed_width &lt; caps-&gt;nMinWidth) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Video width %d not within range from %d to %d\n&quot;</span>,</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;               probed_width, caps-&gt;nMinWidth, caps-&gt;nMaxWidth);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span> (probed_height &gt; caps-&gt;nMaxHeight || probed_height &lt; caps-&gt;nMinHeight) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Video height %d not within range from %d to %d\n&quot;</span>,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;               probed_height, caps-&gt;nMinHeight, caps-&gt;nMaxHeight);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">if</span> ((probed_width * probed_height) / 256 &gt; caps-&gt;nMaxMBCount) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Video macroblock count %d exceeds maximum of %d\n&quot;</span>,</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;               (<span class="keywordtype">int</span>)(probed_width * probed_height) / 256, caps-&gt;nMaxMBCount);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;}</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#abf49e35b3cb482bc0721d23a49b36868">  792</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="cuviddec_8c.html#abf49e35b3cb482bc0721d23a49b36868">cuvid_decode_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;{</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="struct_a_v_c_u_d_a_device_context.html">AVCUDADeviceContext</a> *device_hwctx;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a> *device_ctx;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *hwframe_ctx;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    CUVIDSOURCEDATAPACKET seq_pkt;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    CUcontext cuda_ctx = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    CUcontext <a class="code" href="motion_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *extradata;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordtype">int</span> extradata_size;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>[3] = { <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5ab95e18c0c9e5335f29121418eab314">AV_PIX_FMT_CUDA</a>,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                                       <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a>,</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                                       <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a> };</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordtype">int</span> probed_width = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae3c157e97ff15d46e898a538c6bc7f09">coded_width</a> ? avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae3c157e97ff15d46e898a538c6bc7f09">coded_width</a> : 1280;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordtype">int</span> probed_height = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab2ebb76836ef4cd9822b5077c17b33d0">coded_height</a> ? avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab2ebb76836ef4cd9822b5077c17b33d0">coded_height</a> : 720;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordtype">int</span> probed_bit_depth = 8;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a> *probe_desc = <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">if</span> (probe_desc &amp;&amp; probe_desc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#ae83de203f97288c9f4070212a5eac5de">nb_components</a>)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        probed_bit_depth = probe_desc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#a17569c9349766c3b5201b33f84f19a25">comp</a>[0].<a class="code" href="struct_a_v_component_descriptor.html#ae504ab46ea3719e9930f91491af593dc">depth</a>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="comment">// Accelerated transcoding scenarios with &#39;ffmpeg&#39; require that the</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">// pix_fmt be set to AV_PIX_FMT_CUDA early. The sw_pix_fmt, and the</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="comment">// pix_fmt for non-accelerated transcoding, do not need to be correct</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="comment">// but need to be set to something. We arbitrarily pick NV12.</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decode_8c.html#a8a7eadb05d8ea6f849a146035377ad1f">ff_get_format</a>(avctx, <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;ff_get_format failed: %d\n&quot;</span>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> = <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;resize_expr &amp;&amp; sscanf(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;resize_expr, <span class="stringliteral">&quot;%dx%d&quot;</span>,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                                   &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;resize.width, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;resize.height) != 2) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid resize expressions\n&quot;</span>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop_expr &amp;&amp; sscanf(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop_expr, <span class="stringliteral">&quot;%dx%dx%dx%d&quot;</span>,</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                                 &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop.top, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop.bottom,</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                                 &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop.left, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;crop.right) != 4) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid cropping expressions\n&quot;</span>);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = cuvid_load_functions(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl, avctx);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed loading nvcuvid.\n&quot;</span>);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue = <a class="code" href="libavutil_2fifo_8c.html#adae9b18c5eed14fe851c5bb984ce374b">av_fifo_alloc</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;nb_surfaces * <span class="keyword">sizeof</span>(<a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a>));</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">hw_frames_ctx</a>) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">hw_frames_ctx</a>);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        hwframe_ctx = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a>*)<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe-&gt;data;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(hwframe_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a2f3908bfadd569103b67ee4972ee7305">device_ref</a>);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#acf8113e490f9e7b57465e65af9c0c75c">hw_device_ctx</a>) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#acf8113e490f9e7b57465e65af9c0c75c">hw_device_ctx</a>);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="hwcontext_8c.html#a21fbd088225e4e25c4d9a01b3f5e8c51">av_hwdevice_ctx_create</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice, <a class="code" href="hwcontext_8h.html#acf25724be4b066a51ad86aa9214b0d34a8447d4488b0fc4113c281cbdc6e7334e">AV_HWDEVICE_TYPE_CUDA</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cu_gpu, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe = <a class="code" href="hwcontext_8c.html#ac45a7c039eb4e084b692f69ff5f2e217">av_hwframe_ctx_alloc</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;av_hwframe_ctx_alloc failed\n&quot;</span>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        hwframe_ctx = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a>*)<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwframe-&gt;data;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    device_ctx = hwframe_ctx-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#ac9a7dbd0cbfcabc0b1529cb34cf53b6d">device_ctx</a>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    device_hwctx = device_ctx-&gt;<a class="code" href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">hwctx</a>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    cuda_ctx = device_hwctx-&gt;<a class="code" href="struct_a_v_c_u_d_a_device_context.html#ace8e7f76355f4120e33dd4488e26e96d">cuda_ctx</a>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl = device_hwctx-&gt;<a class="code" href="struct_a_v_c_u_d_a_device_context.html#ae6172fe56bd91f73d50837bdf1434aa7">internal</a>-&gt;<a class="code" href="struct_a_v_c_u_d_a_device_context_internal.html#a73041ed3506f9ce333218b4728b5d737">cuda_dl</a>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    memset(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo, 0, <span class="keyword">sizeof</span>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo));</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    memset(&amp;seq_pkt, 0, <span class="keyword">sizeof</span>(seq_pkt));</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">switch</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a01a53d07936f4c7ee280444793b6967b">id</a>) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="preprocessor">#if CONFIG_H264_CUVID_DECODER</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>:</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_H264;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="preprocessor">#if CONFIG_HEVC_CUVID_DECODER</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa3e19a45b81bb602a4a37a4221274a20">AV_CODEC_ID_HEVC</a>:</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_HEVC;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="preprocessor">#if CONFIG_MJPEG_CUVID_DECODER</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409">AV_CODEC_ID_MJPEG</a>:</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_JPEG;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">#if CONFIG_MPEG1_CUVID_DECODER</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a>:</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_MPEG1;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="preprocessor">#if CONFIG_MPEG2_CUVID_DECODER</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>:</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_MPEG2;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="preprocessor">#if CONFIG_MPEG4_CUVID_DECODER</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a>:</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_MPEG4;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="preprocessor">#if CONFIG_VP8_CUVID_DECODER</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea77772369e1d305824b08b53a8d5c56b6">AV_CODEC_ID_VP8</a>:</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_VP8;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="preprocessor">#if CONFIG_VP9_CUVID_DECODER</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72">AV_CODEC_ID_VP9</a>:</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_VP9;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="preprocessor">#if CONFIG_VC1_CUVID_DECODER</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea7765c5c02c05ea1a96ef1ca35dad068f">AV_CODEC_ID_VC1</a>:</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_VC1;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="preprocessor">#if CONFIG_AV1_CUVID_DECODER &amp;&amp; defined(CUVID_HAS_AV1_SUPPORT)</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6dbe55d3a303780cfdb3627384e4141d">AV_CODEC_ID_AV1</a>:</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.CodecType = cudaVideoCodec_AV1;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid CUVID codec!\n&quot;</span>);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa102cde7ec5acbc099c3bcbb58556a18">AVERROR_BUG</a>;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a4227db7a6938acb9f88e328a3ae0eab2">bsfs</a>) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a5cdf9e56a17ed08f3e86f9f217e47cd5">bsf</a>-&gt;<a class="code" href="struct_a_v_b_s_f_context.html#ab58f8c37eec197e0f30d17d60959a60d">par_out</a>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        extradata = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">extradata</a>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        extradata_size = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">extradata_size</a>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        extradata = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#abe964316aaaa61967b012efdcced79c4">extradata</a>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        extradata_size = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae246ca7a1c72c151891ed0599e8dbfba">extradata_size</a>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    }</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext)</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            + <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(extradata_size - (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext-&gt;raw_seqhdr_data), 0));</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">if</span> (extradata_size &gt; 0)</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        memcpy(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext-&gt;raw_seqhdr_data, extradata, extradata_size);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext-&gt;format.seqhdr_data_length = extradata_size;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160; </div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.pExtVideoInfo = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;key_frame = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;nb_surfaces * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;key_frame) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.ulMaxNumDecodeSurfaces = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;nb_surfaces;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.ulMaxDisplayDelay = 4;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.pUserData = avctx;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.pfnSequenceCallback = <a class="code" href="cuviddec_8c.html#ab6399e99afbfdf9f0ea61f19225d05f4">cuvid_handle_video_sequence</a>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.pfnDecodePicture = <a class="code" href="cuviddec_8c.html#a0ee6c9c42169709635f6d26d49ebf7b0">cuvid_handle_picture_decode</a>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo.pfnDisplayPicture = <a class="code" href="cuviddec_8c.html#a8753c8093c9b4b524ca54e452049c6d2">cuvid_handle_picture_display</a>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl-&gt;cuCtxPushCurrent(cuda_ctx));</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#a77a3088ebff83e56e8345e0a895de5c2">cuvid_test_capabilities</a>(avctx, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo,</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                                  probed_width,</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                                  probed_height,</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                                  probed_bit_depth);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidCreateVideoParser(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo));</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    seq_pkt.payload = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext-&gt;raw_seqhdr_data;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    seq_pkt.payload_size = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext-&gt;format.seqhdr_data_length;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">if</span> (seq_pkt.payload &amp;&amp; seq_pkt.payload_size) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidParseVideoData(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser, &amp;seq_pkt));</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl-&gt;cuCtxPopCurrent(&amp;<a class="code" href="motion_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>));</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_pts = INT64_MIN;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">if</span> (!avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> || !avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>)</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid pkt_timebase, passing timestamps as-is.\n&quot;</span>);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="cuviddec_8c.html#a3a495448f4dab120e3d1806e34253b42">cuvid_decode_end</a>(avctx);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;}</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#af82b51bb61d1e0133bcb40e63aebca30"> 1032</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="cuviddec_8c.html#af82b51bb61d1e0133bcb40e63aebca30">cuvid_flush</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;{</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="struct_cuvid_context.html">CuvidContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a> *device_ctx = (<a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a>*)<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;hwdevice-&gt;data;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="code" href="struct_a_v_c_u_d_a_device_context.html">AVCUDADeviceContext</a> *device_hwctx = device_ctx-&gt;<a class="code" href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">hwctx</a>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    CUcontext <a class="code" href="motion_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>, cuda_ctx = device_hwctx-&gt;cuda_ctx;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    CUVIDSOURCEDATAPACKET seq_pkt = { 0 };</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl-&gt;cuCtxPushCurrent(cuda_ctx));</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <a class="code" href="libavutil_2fifo_8c.html#a612be59edb6ab388a82d1487d1bd0c4d">av_fifo_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue = <a class="code" href="libavutil_2fifo_8c.html#adae9b18c5eed14fe851c5bb984ce374b">av_fifo_alloc</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;nb_surfaces * <span class="keyword">sizeof</span>(<a class="code" href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a>));</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_queue) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to recreate frame queue on flush\n&quot;</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidDestroyDecoder(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudecoder = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidDestroyVideoParser(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidCreateVideoParser(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparseinfo));</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    seq_pkt.payload = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext-&gt;raw_seqhdr_data;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    seq_pkt.payload_size = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparse_ext-&gt;format.seqhdr_data_length;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">if</span> (seq_pkt.payload &amp;&amp; seq_pkt.payload_size) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cvdl-&gt;cuvidParseVideoData(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cuparser, &amp;seq_pkt));</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cudl-&gt;cuCtxPopCurrent(&amp;<a class="code" href="motion_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>));</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_pts = INT64_MIN;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoder_flushing = 0;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;CUDA reinit on flush failed\n&quot;</span>);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;}</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#ad12dce0a7bf9d908b172a28155b3d261"> 1088</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(CuvidContext, x)</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390"> 1089</a></span>&#160;<span class="preprocessor">#define VD AV_OPT_FLAG_VIDEO_PARAM | AV_OPT_FLAG_DECODING_PARAM</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a384ff94b5139f441c282c9b4c7b985e6"> 1090</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="cuviddec_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a>[] = {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    { <span class="stringliteral">&quot;deint&quot;</span>,    <span class="stringliteral">&quot;Set deinterlacing mode&quot;</span>, <a class="code" href="cuviddec_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(deint_mode), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>,   { .i64 = cudaVideoDeinterlaceMode_Weave    }, cudaVideoDeinterlaceMode_Weave, cudaVideoDeinterlaceMode_Adaptive, <a class="code" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a>, <span class="stringliteral">&quot;deint&quot;</span> },</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    { <span class="stringliteral">&quot;weave&quot;</span>,    <span class="stringliteral">&quot;Weave deinterlacing (do nothing)&quot;</span>,        0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = cudaVideoDeinterlaceMode_Weave    }, 0, 0, <a class="code" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a>, <span class="stringliteral">&quot;deint&quot;</span> },</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    { <span class="stringliteral">&quot;bob&quot;</span>,      <span class="stringliteral">&quot;Bob deinterlacing&quot;</span>,                       0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = cudaVideoDeinterlaceMode_Bob      }, 0, 0, <a class="code" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a>, <span class="stringliteral">&quot;deint&quot;</span> },</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    { <span class="stringliteral">&quot;adaptive&quot;</span>, <span class="stringliteral">&quot;Adaptive deinterlacing&quot;</span>,                  0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = cudaVideoDeinterlaceMode_Adaptive }, 0, 0, <a class="code" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a>, <span class="stringliteral">&quot;deint&quot;</span> },</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    { <span class="stringliteral">&quot;gpu&quot;</span>,      <span class="stringliteral">&quot;GPU to be used for decoding&quot;</span>, <a class="code" href="cuviddec_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(cu_gpu), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a>, { .str = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }, 0, 0, <a class="code" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a> },</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    { <span class="stringliteral">&quot;surfaces&quot;</span>, <span class="stringliteral">&quot;Maximum surfaces to be used for decoding&quot;</span>, <a class="code" href="cuviddec_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(nb_surfaces), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, { .i64 = 25 }, 0, INT_MAX, <a class="code" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a> },</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    { <span class="stringliteral">&quot;drop_second_field&quot;</span>, <span class="stringliteral">&quot;Drop second field when deinterlacing&quot;</span>, <a class="code" href="cuviddec_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(drop_second_field), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, { .i64 = 0 }, 0, 1, <a class="code" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a> },</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    { <span class="stringliteral">&quot;crop&quot;</span>,     <span class="stringliteral">&quot;Crop (top)x(bottom)x(left)x(right)&quot;</span>, <a class="code" href="cuviddec_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(crop_expr), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a>, { .str = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }, 0, 0, <a class="code" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a> },</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    { <span class="stringliteral">&quot;resize&quot;</span>,   <span class="stringliteral">&quot;Resize (width)x(height)&quot;</span>, <a class="code" href="cuviddec_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(resize_expr), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a>, { .str = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }, 0, 0, <a class="code" href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a> },</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;};</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#a27e646a8ac27e6f2b432e869cbf63b53"> 1103</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_codec_h_w_config_internal.html">AVCodecHWConfigInternal</a> *<span class="keyword">const</span> <a class="code" href="cuviddec_8c.html#a27e646a8ac27e6f2b432e869cbf63b53">cuvid_hw_configs</a>[] = {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    &amp;(<span class="keyword">const</span> <a class="code" href="hwconfig_8h.html#a527984f94d846e8f58921e2bf5d1ad05">AVCodecHWConfigInternal</a>) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        .<a class="code" href="struct_a_v_codec_h_w_config_internal.html#af9a9001359c30951bf3c465f978f2e54">public</a> = {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            .<a class="code" href="struct_a_v_codec_h_w_config.html#a9352b11d6d6b315fe3c61b65447d5174">pix_fmt</a>     = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5ab95e18c0c9e5335f29121418eab314">AV_PIX_FMT_CUDA</a>,</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            .methods     = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba680870b80f0ed65e9ba97ea0905eb2fa">AV_CODEC_HW_CONFIG_METHOD_HW_DEVICE_CTX</a> |</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                           <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa7386da6a6a78eb809d838053e4035ee">AV_CODEC_HW_CONFIG_METHOD_INTERNAL</a>,</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            .device_type = <a class="code" href="hwcontext_8h.html#acf25724be4b066a51ad86aa9214b0d34a8447d4488b0fc4113c281cbdc6e7334e">AV_HWDEVICE_TYPE_CUDA</a></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        },</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        .hwaccel = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    },</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;};</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc"> 1116</a></span>&#160;<span class="preprocessor">#define DEFINE_CUVID_CODEC(x, X, bsf_name) \</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="preprocessor">    static const AVClass x##_cuvid_class = { \</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="preprocessor">        .class_name = #x &quot;_cuvid&quot;, \</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="preprocessor">        .item_name = av_default_item_name, \</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="preprocessor">        .option = options, \</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="preprocessor">        .version = LIBAVUTIL_VERSION_INT, \</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="preprocessor">    }; \</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="preprocessor">    AVCodec ff_##x##_cuvid_decoder = { \</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="preprocessor">        .name           = #x &quot;_cuvid&quot;, \</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="preprocessor">        .long_name      = NULL_IF_CONFIG_SMALL(&quot;Nvidia CUVID &quot; #X &quot; decoder&quot;), \</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="preprocessor">        .type           = AVMEDIA_TYPE_VIDEO, \</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="preprocessor">        .id             = AV_CODEC_ID_##X, \</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="preprocessor">        .priv_data_size = sizeof(CuvidContext), \</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="preprocessor">        .priv_class     = &amp;x##_cuvid_class, \</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="preprocessor">        .init           = cuvid_decode_init, \</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="preprocessor">        .close          = cuvid_decode_end, \</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="preprocessor">        .decode         = cuvid_decode_frame, \</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="preprocessor">        .receive_frame  = cuvid_output_frame, \</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="preprocessor">        .flush          = cuvid_flush, \</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="preprocessor">        .bsfs           = bsf_name, \</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="preprocessor">        .capabilities   = AV_CODEC_CAP_DELAY | AV_CODEC_CAP_AVOID_PROBING | AV_CODEC_CAP_HARDWARE, \</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="preprocessor">        .pix_fmts       = (const enum AVPixelFormat[]){ AV_PIX_FMT_CUDA, \</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="preprocessor">                                                        AV_PIX_FMT_NV12, \</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="preprocessor">                                                        AV_PIX_FMT_P010, \</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="preprocessor">                                                        AV_PIX_FMT_P016, \</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="preprocessor">                                                        AV_PIX_FMT_NONE }, \</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="preprocessor">        .hw_configs     = cuvid_hw_configs, \</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="preprocessor">        .wrapper_name   = &quot;cuvid&quot;, \</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="preprocessor">    };</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="preprocessor">#if CONFIG_AV1_CUVID_DECODER &amp;&amp; defined(CUVID_HAS_AV1_SUPPORT)</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(av1, AV1, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="preprocessor">#if CONFIG_HEVC_CUVID_DECODER</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(hevc, HEVC, <span class="stringliteral">&quot;hevc_mp4toannexb&quot;</span>)</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160; </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="preprocessor">#if CONFIG_H264_CUVID_DECODER</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(h264, H264, <span class="stringliteral">&quot;h264_mp4toannexb&quot;</span>)</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="preprocessor">#if CONFIG_MJPEG_CUVID_DECODER</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(mjpeg, MJPEG, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="preprocessor">#if CONFIG_MPEG1_CUVID_DECODER</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(mpeg1, MPEG1VIDEO, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="preprocessor">#if CONFIG_MPEG2_CUVID_DECODER</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(mpeg2, MPEG2VIDEO, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="preprocessor">#if CONFIG_MPEG4_CUVID_DECODER</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(mpeg4, MPEG4, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="preprocessor">#if CONFIG_VP8_CUVID_DECODER</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(vp8, VP8, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="preprocessor">#if CONFIG_VP9_CUVID_DECODER</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(vp9, VP9, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160; </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="preprocessor">#if CONFIG_VC1_CUVID_DECODER</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<a class="code" href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a>(vc1, VC1, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="atarget__bsf__fuzzer_8c_html_aa3d85a3469f60990fdff296efb86a9c2"><div class="ttname"><a href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a></div><div class="ttdeci">static void error(const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="target__bsf__fuzzer_8c_source.html#l00030">target_bsf_fuzzer.c:30</a></div></div>
<div class="ttc" id="ahwconfig_8h_html"><div class="ttname"><a href="hwconfig_8h.html">hwconfig.h</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_aa6ef004d10669ab4ee062367a014ea33"><div class="ttname"><a href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_ENABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00085">internal.h:85</a></div></div>
<div class="ttc" id="aaf__astats_8c_html_a3fb64d8b9f96155a5d4138e186198917"><div class="ttname"><a href="af__astats_8c.html#a3fb64d8b9f96155a5d4138e186198917">bit_depth</a></div><div class="ttdeci">static void bit_depth(AudioStatsContext *s, uint64_t mask, uint64_t imask, AVRational *depth)</div><div class="ttdef"><b>Definition:</b> <a href="af__astats_8c_source.html#l00254">af_astats.c:254</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="adecode_8c_html_a87fcb1ca6a586c1480f9eaf926a3f09c"><div class="ttname"><a href="decode_8c.html#a87fcb1ca6a586c1480f9eaf926a3f09c">ff_decode_get_packet</a></div><div class="ttdeci">int ff_decode_get_packet(AVCodecContext *avctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l00248">decode.c:248</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a5ab95e18c0c9e5335f29121418eab314"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5ab95e18c0c9e5335f29121418eab314">AV_PIX_FMT_CUDA</a></div><div class="ttdeci">@ AV_PIX_FMT_CUDA</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00235">pixfmt.h:235</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3bac44bb0b016ab838780cc19ac277d6"><div class="ttname"><a href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">AVCodecContext::hw_frames_ctx</a></div><div class="ttdeci">AVBufferRef * hw_frames_ctx</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02226">avcodec.h:2226</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a72c86801d3408c429c145b307579d3a5"><div class="ttname"><a href="struct_cuvid_context.html#a72c86801d3408c429c145b307579d3a5">CuvidContext::decoder_flushing</a></div><div class="ttdeci">int decoder_flushing</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00085">cuviddec.c:85</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a8753c8093c9b4b524ca54e452049c6d2"><div class="ttname"><a href="cuviddec_8c.html#a8753c8093c9b4b524ca54e452049c6d2">cuvid_handle_picture_display</a></div><div class="ttdeci">static int CUDAAPI cuvid_handle_picture_display(void *opaque, CUVIDPARSERDISPINFO *dispinfo)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00348">cuviddec.c:348</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a6b1aa3d52a688982e33f3e048ffce07a"><div class="ttname"><a href="cuviddec_8c.html#a6b1aa3d52a688982e33f3e048ffce07a">cuvid_decode_frame</a></div><div class="ttdeci">static int cuvid_decode_frame(AVCodecContext *avctx, void *data, int *got_frame, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00642">cuviddec.c:642</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a9917d7e1522feff5b3aa92b5423bf63a"><div class="ttname"><a href="struct_cuvid_context.html#a9917d7e1522feff5b3aa92b5423bf63a">CuvidContext::top</a></div><div class="ttdeci">int top</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00064">cuviddec.c:64</a></div></div>
<div class="ttc" id="ahwcontext__cuda__internal_8h_html"><div class="ttname"><a href="hwcontext__cuda__internal_8h.html">hwcontext_cuda_internal.h</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_ae95c15dcdd266b4005f8919e4f571180"><div class="ttname"><a href="libavutil_2fifo_8c.html#ae95c15dcdd266b4005f8919e4f571180">av_fifo_generic_write</a></div><div class="ttdeci">int av_fifo_generic_write(AVFifoBuffer *f, void *src, int size, int(*func)(void *, void *, int))</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00122">fifo.c:122</a></div></div>
<div class="ttc" id="adecode_8c_html_a8a7eadb05d8ea6f849a146035377ad1f"><div class="ttname"><a href="decode_8c.html#a8a7eadb05d8ea6f849a146035377ad1f">ff_get_format</a></div><div class="ttdeci">int ff_get_format(AVCodecContext *avctx, const enum AVPixelFormat *fmt)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01299">decode.c:1299</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="apixdesc_8c_html_afe0c3e8aef5173de28bbdaea4298f5f0"><div class="ttname"><a href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a></div><div class="ttdeci">const AVPixFmtDescriptor * av_pix_fmt_desc_get(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02573">pixdesc.c:2573</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gab4faa0afdf35076914824200331defff"><div class="ttname"><a href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a></div><div class="ttdeci">#define AVERROR_EOF</div><div class="ttdoc">End of file.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00055">error.h:55</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a59a3f830494f2ed1133103a1bc9481e7"><div class="ttname"><a href="struct_a_v_frame.html#a59a3f830494f2ed1133103a1bc9481e7">AVFrame::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00545">frame.h:554</a></div></div>
<div class="ttc" id="astruct_a_v_codec_internal_html_a5cdf9e56a17ed08f3e86f9f217e47cd5"><div class="ttname"><a href="struct_a_v_codec_internal.html#a5cdf9e56a17ed08f3e86f9f217e47cd5">AVCodecInternal::bsf</a></div><div class="ttdeci">AVBSFContext * bsf</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00141">internal.h:141</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_gaffa24e7bd38e12dbac540d8b66461f97"><div class="ttname"><a href="group__lavu__math__rational.html#gaffa24e7bd38e12dbac540d8b66461f97">av_div_q</a></div><div class="ttdeci">AVRational av_div_q(AVRational b, AVRational c)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00088">rational.c:88</a></div></div>
<div class="ttc" id="astruct_a_v_codec_h_w_config_internal_html_af9a9001359c30951bf3c465f978f2e54"><div class="ttname"><a href="struct_a_v_codec_h_w_config_internal.html#af9a9001359c30951bf3c465f978f2e54">AVCodecHWConfigInternal::public</a></div><div class="ttdeci">AVCodecHWConfig public</div><div class="ttdef"><b>Definition:</b> <a href="hwconfig_8h_source.html#l00034">hwconfig.h:34</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab2ebb76836ef4cd9822b5077c17b33d0"><div class="ttname"><a href="struct_a_v_codec_context.html#ab2ebb76836ef4cd9822b5077c17b33d0">AVCodecContext::coded_height</a></div><div class="ttdeci">int coded_height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00714">avcodec.h:714</a></div></div>
<div class="ttc" id="astruct_a_v_codec_h_w_config_internal_html"><div class="ttname"><a href="struct_a_v_codec_h_w_config_internal.html">AVCodecHWConfigInternal</a></div><div class="ttdef"><b>Definition:</b> <a href="hwconfig_8h_source.html#l00029">hwconfig.h:29</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG4</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00061">codec_id.h:61</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_a66a7e1ebc7e459ce07d3de6639ac7e38"><div class="ttname"><a href="hwcontext_8c.html#a66a7e1ebc7e459ce07d3de6639ac7e38">av_hwframe_ctx_init</a></div><div class="ttdeci">int av_hwframe_ctx_init(AVBufferRef *ref)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00333">hwcontext.c:333</a></div></div>
<div class="ttc" id="apixdesc_8h_html"><div class="ttname"><a href="pixdesc_8h.html">pixdesc.h</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a></div><div class="ttdeci">@ AVCOL_RANGE_JPEG</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00586">pixfmt.h:586</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a34d7b281a49319ae824cb695ff6cd6a8"><div class="ttname"><a href="cuviddec_8c.html#a34d7b281a49319ae824cb695ff6cd6a8">cuvid_output_frame</a></div><div class="ttdeci">static int cuvid_output_frame(AVCodecContext *avctx, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00450">cuviddec.c:450</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_ac45a7c039eb4e084b692f69ff5f2e217"><div class="ttname"><a href="hwcontext_8c.html#ac45a7c039eb4e084b692f69ff5f2e217">av_hwframe_ctx_alloc</a></div><div class="ttdeci">AVBufferRef * av_hwframe_ctx_alloc(AVBufferRef *device_ref_in)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00247">hwcontext.c:247</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a40030d9cc1fc3c3c825e6953e6d6f65a"><div class="ttname"><a href="struct_cuvid_context.html#a40030d9cc1fc3c3c825e6953e6d6f65a">CuvidContext::resize_expr</a></div><div class="ttdeci">char * resize_expr</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00060">cuviddec.c:60</a></div></div>
<div class="ttc" id="astruct_a_v_c_u_d_a_device_context_html"><div class="ttname"><a href="struct_a_v_c_u_d_a_device_context.html">AVCUDADeviceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__cuda_8h_source.html#l00042">hwcontext_cuda.h:42</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="acuviddec_8c_html_acf858ae6e08ceaa6bd5e1b1fc73a6411"><div class="ttname"><a href="cuviddec_8c.html#acf858ae6e08ceaa6bd5e1b1fc73a6411">CuvidParsedFrame</a></div><div class="ttdeci">struct CuvidParsedFrame CuvidParsedFrame</div></div>
<div class="ttc" id="astruct_cuvid_context_html"><div class="ttname"><a href="struct_cuvid_context.html">CuvidContext</a></div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00049">cuviddec.c:50</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga9b58b28e2d429b930b69db19877f76a8"><div class="ttname"><a href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a></div><div class="ttdeci">#define AV_LOG_VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00210">log.h:210</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_device_context_html_a46055b48d1a40445d775b4ae24f77f20"><div class="ttname"><a href="struct_a_v_h_w_device_context.html#a46055b48d1a40445d775b4ae24f77f20">AVHWDeviceContext::hwctx</a></div><div class="ttdeci">void * hwctx</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00092">hwcontext.h:92</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a384ff94b5139f441c282c9b4c7b985e6"><div class="ttname"><a href="cuviddec_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a></div><div class="ttdeci">static const AVOption options[]</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l01090">cuviddec.c:1090</a></div></div>
<div class="ttc" id="amathematics_8h_html"><div class="ttname"><a href="mathematics_8h.html">mathematics.h</a></div></div>
<div class="ttc" id="astruct_a_v_fifo_buffer_html"><div class="ttname"><a href="struct_a_v_fifo_buffer.html">AVFifoBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="fifo_8h_source.html#l00031">fifo.h:31</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_ab708d2f19b7a9592caa278256787adb6"><div class="ttname"><a href="libavutil_2fifo_8c.html#ab708d2f19b7a9592caa278256787adb6">av_fifo_generic_read</a></div><div class="ttdeci">int av_fifo_generic_read(AVFifoBuffer *f, void *dest, int buf_size, void(*func)(void *, void *, int))</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00213">fifo.c:213</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_acd94b2f8874923611d942a50819e9cc2"><div class="ttname"><a href="struct_cuvid_context.html#acd94b2f8874923611d942a50819e9cc2">CuvidContext::caps10</a></div><div class="ttdeci">CUVIDDECODECAPS caps10</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00092">cuviddec.c:92</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9befe0b86412646017afb0051d144d13"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9befe0b86412646017afb0051d144d13">AVCodecParameters::extradata</a></div><div class="ttdeci">uint8_t * extradata</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00074">codec_par.h:74</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="ahwcontext_8h_html_acf25724be4b066a51ad86aa9214b0d34a8447d4488b0fc4113c281cbdc6e7334e"><div class="ttname"><a href="hwcontext_8h.html#acf25724be4b066a51ad86aa9214b0d34a8447d4488b0fc4113c281cbdc6e7334e">AV_HWDEVICE_TYPE_CUDA</a></div><div class="ttdeci">@ AV_HWDEVICE_TYPE_CUDA</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00030">hwcontext.h:30</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ae246ca7a1c72c151891ed0599e8dbfba"><div class="ttname"><a href="struct_a_v_codec_context.html#ae246ca7a1c72c151891ed0599e8dbfba">AVCodecContext::extradata_size</a></div><div class="ttdeci">int extradata_size</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00628">avcodec.h:628</a></div></div>
<div class="ttc" id="astruct_a_v_b_s_f_context_html_ab58f8c37eec197e0f30d17d60959a60d"><div class="ttname"><a href="struct_a_v_b_s_f_context.html#ab58f8c37eec197e0f30d17d60959a60d">AVBSFContext::par_out</a></div><div class="ttdeci">AVCodecParameters * par_out</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8h_source.html#l00083">bsf.h:83</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a70fbab8f5de2b873b7ad8ecd2dbcf1be"><div class="ttname"><a href="struct_cuvid_context.html#a70fbab8f5de2b873b7ad8ecd2dbcf1be">CuvidContext::cvdl</a></div><div class="ttdeci">CuvidFunctions * cvdl</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00098">cuviddec.c:98</a></div></div>
<div class="ttc" id="adynlink__loader_8h_html"><div class="ttname"><a href="dynlink__loader_8h.html">dynlink_loader.h</a></div></div>
<div class="ttc" id="afifo_8h_html"><div class="ttname"><a href="fifo_8h.html">fifo.h</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a29493fbfabaa21432c360a090426aa8e"><div class="ttname"><a href="struct_a_v_frame.html#a29493fbfabaa21432c360a090426aa8e">AVFrame::hw_frames_ctx</a></div><div class="ttdeci">AVBufferRef * hw_frames_ctx</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00647">frame.h:647</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_af7fc009ea78cbea9407adbe2767f8715"><div class="ttname"><a href="struct_cuvid_context.html#af7fc009ea78cbea9407adbe2767f8715">CuvidContext::bottom</a></div><div class="ttdeci">int bottom</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00066">cuviddec.c:66</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a54376dff5d44ea4e5b2a01b9390567cb"><div class="ttname"><a href="struct_cuvid_context.html#a54376dff5d44ea4e5b2a01b9390567cb">CuvidContext::deint_mode_current</a></div><div class="ttdeci">int deint_mode_current</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00080">cuviddec.c:80</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a117c15db09a6772e94d30419f7718dc4"><div class="ttname"><a href="struct_cuvid_context.html#a117c15db09a6772e94d30419f7718dc4">CuvidContext::key_frame</a></div><div class="ttdeci">int * key_frame</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00087">cuviddec.c:87</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a5b59a2a72efd8b08c8a8328491f33ada"><div class="ttname"><a href="struct_cuvid_context.html#a5b59a2a72efd8b08c8a8328491f33ada">CuvidContext::prev_pts</a></div><div class="ttdeci">int64_t prev_pts</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00081">cuviddec.c:81</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55baa7386da6a6a78eb809d838053e4035ee"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa7386da6a6a78eb809d838053e4035ee">AV_CODEC_HW_CONFIG_METHOD_INTERNAL</a></div><div class="ttdeci">@ AV_CODEC_HW_CONFIG_METHOD_INTERNAL</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00411">codec.h:411</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba680870b80f0ed65e9ba97ea0905eb2fa"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba680870b80f0ed65e9ba97ea0905eb2fa">AV_CODEC_HW_CONFIG_METHOD_HW_DEVICE_CTX</a></div><div class="ttdeci">@ AV_CODEC_HW_CONFIG_METHOD_HW_DEVICE_CTX</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00391">codec.h:391</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga502225f65e2092fbc45945247892cb0f"><div class="ttname"><a href="group__lavc__core.html#ga502225f65e2092fbc45945247892cb0f">AV_CODEC_FLAG_INTERLACED_DCT</a></div><div class="ttdeci">#define AV_CODEC_FLAG_INTERLACED_DCT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00321">avcodec.h:321</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_device_context_html"><div class="ttname"><a href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00061">hwcontext.h:61</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gac700017c5270c79c1e1befdeeb008b2f"><div class="ttname"><a href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a></div><div class="ttdeci">AVFrame * av_frame_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00190">frame.c:190</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a3fb9b69ea1990c7c423035ad2c3c04a9"><div class="ttname"><a href="struct_cuvid_context.html#a3fb9b69ea1990c7c423035ad2c3c04a9">CuvidContext::cuparser</a></div><div class="ttdeci">CUvideoparser cuparser</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00054">cuviddec.c:54</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga030300ea4843c53b2fe178a434964b39"><div class="ttname"><a href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a></div><div class="ttdeci">#define AV_LOG_TRACE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00220">log.h:220</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html_abea8ed308fe00644fc066a00018afa95"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html#abea8ed308fe00644fc066a00018afa95">AVPixFmtDescriptor::log2_chroma_h</a></div><div class="ttdeci">uint8_t log2_chroma_h</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00101">pixdesc.h:101</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a3b6e7e87f12272237e198128e3f14e3a"><div class="ttname"><a href="struct_cuvid_context.html#a3b6e7e87f12272237e198128e3f14e3a">CuvidContext::cudecoder</a></div><div class="ttdeci">CUvideodecoder cudecoder</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00053">cuviddec.c:53</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html_a17569c9349766c3b5201b33f84f19a25"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html#a17569c9349766c3b5201b33f84f19a25">AVPixFmtDescriptor::comp</a></div><div class="ttdeci">AVComponentDescriptor comp[4]</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00117">pixdesc.h:117</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a060002ff641fb6c358517df941e9c4c5"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a060002ff641fb6c358517df941e9c4c5">AVCodecParameters::extradata_size</a></div><div class="ttdeci">int extradata_size</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00078">codec_par.h:78</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a49020cc320b8fb1f5449167b6c97515b"><div class="ttname"><a href="struct_a_v_frame.html#a49020cc320b8fb1f5449167b6c97515b">AVFrame::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00545">frame.h:545</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a27e646a8ac27e6f2b432e869cbf63b53"><div class="ttname"><a href="cuviddec_8c.html#a27e646a8ac27e6f2b432e869cbf63b53">cuvid_hw_configs</a></div><div class="ttdeci">static const AVCodecHWConfigInternal *const cuvid_hw_configs[]</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l01103">cuviddec.c:1103</a></div></div>
<div class="ttc" id="astruct_cuvid_parsed_frame_html_a2100975adb6d5d98832b1078c4f4bfd2"><div class="ttname"><a href="struct_cuvid_parsed_frame.html#a2100975adb6d5d98832b1078c4f4bfd2">CuvidParsedFrame::second_field</a></div><div class="ttdeci">int second_field</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00104">cuviddec.c:104</a></div></div>
<div class="ttc" id="astruct_a_v_component_descriptor_html_ae504ab46ea3719e9930f91491af593dc"><div class="ttname"><a href="struct_a_v_component_descriptor.html#ae504ab46ea3719e9930f91491af593dc">AVComponentDescriptor::depth</a></div><div class="ttdeci">int depth</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00058">pixdesc.h:58</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ae7920607c5cf9a219cc94b5c7efc457d"><div class="ttname"><a href="pixfmt_8h.html#ae7920607c5cf9a219cc94b5c7efc457d">AV_PIX_FMT_YUV444P16</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV444P16</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00412">pixfmt.h:412</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_ae01614f64553f8df1b2cb552aed665a2"><div class="ttname"><a href="struct_cuvid_context.html#ae01614f64553f8df1b2cb552aed665a2">CuvidContext::progressive_sequence</a></div><div class="ttdeci">int progressive_sequence</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00082">cuviddec.c:82</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a7d537039ea0e18164d9edb0b5ca984dd"><div class="ttname"><a href="filter__design_8txt.html#a7d537039ea0e18164d9edb0b5ca984dd">format</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample format(the sample packing is implied by the sample format) and sample rate. The lists are not just lists</div></div>
<div class="ttc" id="acuviddec_8c_html_a0ee6c9c42169709635f6d26d49ebf7b0"><div class="ttname"><a href="cuviddec_8c.html#a0ee6c9c42169709635f6d26d49ebf7b0">cuvid_handle_picture_decode</a></div><div class="ttdeci">static int CUDAAPI cuvid_handle_picture_decode(void *opaque, CUVIDPICPARAMS *picparams)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00332">cuviddec.c:332</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72">AV_CODEC_ID_VP9</a></div><div class="ttdeci">@ AV_CODEC_ID_VP9</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00217">codec_id.h:217</a></div></div>
<div class="ttc" id="acuviddec_8c_html_ad9f0ce453f36bcded45b8ef1c9a3f2cc"><div class="ttname"><a href="cuviddec_8c.html#ad9f0ce453f36bcded45b8ef1c9a3f2cc">DEFINE_CUVID_CODEC</a></div><div class="ttdeci">#define DEFINE_CUVID_CODEC(x, X, bsf_name)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l01116">cuviddec.c:1116</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_aa1219ee396a270ba57fd4f2306b64c6e"><div class="ttname"><a href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00162">libkvazaar.c:300</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a2f3908bfadd569103b67ee4972ee7305"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a2f3908bfadd569103b67ee4972ee7305">AVHWFramesContext::device_ref</a></div><div class="ttdeci">AVBufferRef * device_ref</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00141">hwcontext.h:141</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a4b797f0ac8a0880eb7ab6d048057ee7a"><div class="ttname"><a href="struct_cuvid_context.html#a4b797f0ac8a0880eb7ab6d048057ee7a">CuvidContext::right</a></div><div class="ttdeci">int right</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00065">cuviddec.c:65</a></div></div>
<div class="ttc" id="adecode_8h_html"><div class="ttname"><a href="decode_8h.html">decode.h</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gaf02994a8bbeaa91d4757df179cbe567f"><div class="ttname"><a href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a></div><div class="ttdeci">int64_t av_rescale_q(int64_t a, AVRational bq, AVRational cq)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00142">mathematics.c:142</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a73199c3ff2d59955e75abdec0e8ea5d2"><div class="ttname"><a href="struct_cuvid_context.html#a73199c3ff2d59955e75abdec0e8ea5d2">CuvidContext::hwdevice</a></div><div class="ttdeci">AVBufferRef * hwdevice</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00074">cuviddec.c:74</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a></div><div class="ttdeci">@ AV_CODEC_ID_H264</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00076">codec_id.h:76</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a9262c231f1f64869439b4fe587fe1710"><div class="ttname"><a href="struct_a_v_frame.html#a9262c231f1f64869439b4fe587fe1710">AVFrame::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00545">frame.h:563</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a03a32c5df9ba9785e774cbf499ce01f0"><div class="ttname"><a href="cuviddec_8c.html#a03a32c5df9ba9785e774cbf499ce01f0">cuvid_decode_packet</a></div><div class="ttdeci">static int cuvid_decode_packet(AVCodecContext *avctx, const AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00385">cuviddec.c:385</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga6eff035c271caa5a533987a1e00ad43e"><div class="ttname"><a href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a></div><div class="ttdeci">struct AVRational AVRational</div></div>
<div class="ttc" id="astruct_cuvid_context_html_ab22bf838ab6657fc8fe24e73b3f2ac10"><div class="ttname"><a href="struct_cuvid_context.html#ab22bf838ab6657fc8fe24e73b3f2ac10">CuvidContext::deint_mode</a></div><div class="ttdeci">int deint_mode</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00079">cuviddec.c:79</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_accd1fef3717eeb5ea73a86cb1c789f45"><div class="ttname"><a href="struct_cuvid_context.html#accd1fef3717eeb5ea73a86cb1c789f45">CuvidContext::cuparseinfo</a></div><div class="ttdeci">CUVIDPARSERPARAMS cuparseinfo</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00094">cuviddec.c:94</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga135e9e929b5033bb8f68322497b2effc"><div class="ttname"><a href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a></div><div class="ttdeci">void av_buffer_unref(AVBufferRef **buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00125">buffer.c:125</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea6dbe55d3a303780cfdb3627384e4141d"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea6dbe55d3a303780cfdb3627384e4141d">AV_CODEC_ID_AV1</a></div><div class="ttdeci">@ AV_CODEC_ID_AV1</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00276">codec_id.h:276</a></div></div>
<div class="ttc" id="acuviddec_8c_html_aa786055ad8b70c06fcd3fb7c848bc390"><div class="ttname"><a href="cuviddec_8c.html#aa786055ad8b70c06fcd3fb7c848bc390">VD</a></div><div class="ttdeci">#define VD</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l01089">cuviddec.c:1089</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a77a3088ebff83e56e8345e0a895de5c2"><div class="ttname"><a href="cuviddec_8c.html#a77a3088ebff83e56e8345e0a895de5c2">cuvid_test_capabilities</a></div><div class="ttdeci">static int cuvid_test_capabilities(AVCodecContext *avctx, const CUVIDPARSERPARAMS *cuparseinfo, int probed_width, int probed_height, int bit_depth)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00698">cuviddec.c:698</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00124">hwcontext.h:124</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a5c6f6e3aab966aa688c4b042595dcdbe"><div class="ttname"><a href="struct_cuvid_context.html#a5c6f6e3aab966aa688c4b042595dcdbe">CuvidContext::cudl</a></div><div class="ttdeci">CudaFunctions * cudl</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00097">cuviddec.c:97</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html_ae83de203f97288c9f4070212a5eac5de"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html#ae83de203f97288c9f4070212a5eac5de">AVPixFmtDescriptor::nb_components</a></div><div class="ttdeci">uint8_t nb_components</div><div class="ttdoc">The number of components each pixel has, (1-4)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00083">pixdesc.h:83</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_ac18e7dc8d77f29a48d442a4490d7a35f"><div class="ttname"><a href="struct_cuvid_context.html#ac18e7dc8d77f29a48d442a4490d7a35f">CuvidContext::hwframe</a></div><div class="ttdeci">AVBufferRef * hwframe</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00075">cuviddec.c:75</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00081">pixdesc.h:81</a></div></div>
<div class="ttc" id="acuviddec_8c_html_af324391f20c02b7e33b8e200a6bc1021"><div class="ttname"><a href="cuviddec_8c.html#af324391f20c02b7e33b8e200a6bc1021">cuvid_is_buffer_full</a></div><div class="ttdeci">static int cuvid_is_buffer_full(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00374">cuviddec.c:374</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG1VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00050">codec_id.h:50</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a3f89733f429c98ba5bc64373fb0a3f13"><div class="ttname"><a href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">AVFrame::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_a4227db7a6938acb9f88e328a3ae0eab2"><div class="ttname"><a href="struct_a_v_codec.html#a4227db7a6938acb9f88e328a3ae0eab2">AVCodec::bsfs</a></div><div class="ttdeci">const char * bsfs</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00314">codec.h:314</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="astruct_a_v_codec_h_w_config_html_a9352b11d6d6b315fe3c61b65447d5174"><div class="ttname"><a href="struct_a_v_codec_h_w_config.html#a9352b11d6d6b315fe3c61b65447d5174">AVCodecHWConfig::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00328">codec.h:432</a></div></div>
<div class="ttc" id="acuviddec_8c_html_abf49e35b3cb482bc0721d23a49b36868"><div class="ttname"><a href="cuviddec_8c.html#abf49e35b3cb482bc0721d23a49b36868">cuvid_decode_init</a></div><div class="ttdeci">static av_cold int cuvid_decode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00792">cuviddec.c:792</a></div></div>
<div class="ttc" id="adecode_8c_html_a0d5adb2b84051826883605b3ab4d1bab"><div class="ttname"><a href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a></div><div class="ttdeci">int ff_get_buffer(AVCodecContext *avctx, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01879">decode.c:1879</a></div></div>
<div class="ttc" id="astruct_a_v_c_u_d_a_device_context_html_ae6172fe56bd91f73d50837bdf1434aa7"><div class="ttname"><a href="struct_a_v_c_u_d_a_device_context.html#ae6172fe56bd91f73d50837bdf1434aa7">AVCUDADeviceContext::internal</a></div><div class="ttdeci">AVCUDADeviceContextInternal * internal</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__cuda_8h_source.html#l00045">hwcontext_cuda.h:45</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a541b6f9ed5be6aed1ae1e8a78f85bda0"><div class="ttname"><a href="struct_cuvid_context.html#a541b6f9ed5be6aed1ae1e8a78f85bda0">CuvidContext::crop</a></div><div class="ttdeci">struct CuvidContext::@0 crop</div></div>
<div class="ttc" id="astruct_cuvid_context_html_a1c2d9a0fda46ebb0b917729476d50ec2"><div class="ttname"><a href="struct_cuvid_context.html#a1c2d9a0fda46ebb0b917729476d50ec2">CuvidContext::frame_queue</a></div><div class="ttdeci">AVFifoBuffer * frame_queue</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00077">cuviddec.c:77</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a858d289f8f190aae24b119b58e462046"><div class="ttname"><a href="struct_cuvid_context.html#a858d289f8f190aae24b119b58e462046">CuvidContext::cu_gpu</a></div><div class="ttdeci">char * cu_gpu</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00056">cuviddec.c:56</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a3a495448f4dab120e3d1806e34253b42"><div class="ttname"><a href="cuviddec_8c.html#a3a495448f4dab120e3d1806e34253b42">cuvid_decode_end</a></div><div class="ttdeci">static av_cold int cuvid_decode_end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00673">cuviddec.c:673</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_a01a53d07936f4c7ee280444793b6967b"><div class="ttname"><a href="struct_a_v_codec.html#a01a53d07936f4c7ee280444793b6967b">AVCodec::id</a></div><div class="ttdeci">enum AVCodecID id</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00202">codec.h:204</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_ga2eaefe702f95f619ea6f2d08afa01be1"><div class="ttname"><a href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a></div><div class="ttdeci">#define AV_NOPTS_VALUE</div><div class="ttdoc">Undefined timestamp value.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00248">avutil.h:248</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a4d08b297e97eefd66c714df4fff493c8"><div class="ttname"><a href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">AVCodecContext::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02069">avcodec.h:2069</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a19e0d357257e8686c1b28bf5753333c0"><div class="ttname"><a href="struct_cuvid_context.html#a19e0d357257e8686c1b28bf5753333c0">CuvidContext::crop_expr</a></div><div class="ttdeci">char * crop_expr</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00059">cuviddec.c:59</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_acf8113e490f9e7b57465e65af9c0c75c"><div class="ttname"><a href="struct_a_v_codec_context.html#acf8113e490f9e7b57465e65af9c0c75c">AVCodecContext::hw_device_ctx</a></div><div class="ttdeci">AVBufferRef * hw_device_ctx</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02278">avcodec.h:2278</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html"><div class="ttname"><a href="struct_a_v_buffer_ref.html">AVBufferRef</a></div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00081">buffer.h:81</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="abuffer_8h_html"><div class="ttname"><a href="buffer_8h.html">buffer.h</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aa52bfc6605f6a3059a0c3226cc0f6567"><div class="ttname"><a href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">AVFrame::linesize</a></div><div class="ttdeci">int linesize[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00339">frame.h:339</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga9c520e483ba8648495620ffdb4c491f2"><div class="ttname"><a href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a></div><div class="ttdeci">#define AVERROR_EXTERNAL</div><div class="ttdoc">Generic error in an external library.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00057">error.h:57</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="acuviddec_8c_html_ae6245e751a2cb4cbb0c5dea0b5b96711"><div class="ttname"><a href="cuviddec_8c.html#ae6245e751a2cb4cbb0c5dea0b5b96711">cudaVideoSurfaceFormat_YUV444_16Bit</a></div><div class="ttdeci">#define cudaVideoSurfaceFormat_YUV444_16Bit</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00042">cuviddec.c:42</a></div></div>
<div class="ttc" id="anvdec_8h_html"><div class="ttname"><a href="nvdec_8h.html">nvdec.h</a></div></div>
<div class="ttc" id="acuviddec_8c_html_aabb147a1f2a98d37cb3ce0dd6d50b78d"><div class="ttname"><a href="cuviddec_8c.html#aabb147a1f2a98d37cb3ce0dd6d50b78d">CHECK_CU</a></div><div class="ttdeci">#define CHECK_CU(x)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00108">cuviddec.c:108</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1e71ce60cedd5f3b6811714a9f7f9e0a"><div class="ttname"><a href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">AVFrame::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="astruct_a_v_c_u_d_a_device_context_internal_html_a73041ed3506f9ce333218b4728b5d737"><div class="ttname"><a href="struct_a_v_c_u_d_a_device_context_internal.html#a73041ed3506f9ce333218b4728b5d737">AVCUDADeviceContextInternal::cuda_dl</a></div><div class="ttdeci">CudaFunctions * cuda_dl</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__cuda__internal_8h_source.html#l00032">hwcontext_cuda_internal.h:32</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_aee0bbfb7968694dbb5ea9d6d0b6d827e"><div class="ttname"><a href="struct_cuvid_context.html#aee0bbfb7968694dbb5ea9d6d0b6d827e">CuvidContext::cuparse_ext</a></div><div class="ttdeci">CUVIDEOFORMATEX * cuparse_ext</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00095">cuviddec.c:95</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a033c870285b387ec1e89d8a9104188fa"><div class="ttname"><a href="struct_cuvid_context.html#a033c870285b387ec1e89d8a9104188fa">CuvidContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00070">cuviddec.c:70</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409">AV_CODEC_ID_MJPEG</a></div><div class="ttdeci">@ AV_CODEC_ID_MJPEG</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00056">codec_id.h:56</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a9cec684208747b75664ab666f1f52e71"><div class="ttname"><a href="struct_cuvid_context.html#a9cec684208747b75664ab666f1f52e71">CuvidContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00071">cuviddec.c:71</a></div></div>
<div class="ttc" id="alog_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaa3e19a45b81bb602a4a37a4221274a20"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa3e19a45b81bb602a4a37a4221274a20">AV_CODEC_ID_HEVC</a></div><div class="ttdeci">@ AV_CODEC_ID_HEVC</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00223">codec_id.h:223</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_ac4ce87b4c74058f6d7d7d4c2f07c937b"><div class="ttname"><a href="struct_cuvid_context.html#ac4ce87b4c74058f6d7d7d4c2f07c937b">CuvidContext::internal_error</a></div><div class="ttdeci">int internal_error</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00084">cuviddec.c:84</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea7765c5c02c05ea1a96ef1ca35dad068f"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea7765c5c02c05ea1a96ef1ca35dad068f">AV_CODEC_ID_VC1</a></div><div class="ttdeci">@ AV_CODEC_ID_VC1</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00119">codec_id.h:119</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html"><div class="ttname"><a href="struct_a_v_codec_parameters.html">AVCodecParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00052">codec_par.h:52</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a3891f0b341ab1fef4136e11037b646da"><div class="ttname"><a href="struct_cuvid_context.html#a3891f0b341ab1fef4136e11037b646da">CuvidContext::caps12</a></div><div class="ttdeci">CUVIDDECODECAPS caps12</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00092">cuviddec.c:92</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a></div><div class="ttdeci">@ AVCOL_RANGE_MPEG</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00569">pixfmt.h:569</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a6506505b35c1afd66c10cd537369cdd6"><div class="ttname"><a href="pixfmt_8h.html#a6506505b35c1afd66c10cd537369cdd6">AV_PIX_FMT_P016</a></div><div class="ttdeci">#define AV_PIX_FMT_P016</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00449">pixfmt.h:449</a></div></div>
<div class="ttc" id="astruct_cuvid_parsed_frame_html_ad45ad6a17e0b8f3c7261303f27b76e0d"><div class="ttname"><a href="struct_cuvid_parsed_frame.html#ad45ad6a17e0b8f3c7261303f27b76e0d">CuvidParsedFrame::dispinfo</a></div><div class="ttdeci">CUVIDPARSERDISPINFO dispinfo</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00103">cuviddec.c:103</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a3d8b9e67f94eb4a995313641938eebd8"><div class="ttname"><a href="struct_cuvid_context.html#a3d8b9e67f94eb4a995313641938eebd8">CuvidContext::resize</a></div><div class="ttdeci">struct CuvidContext::@1 resize</div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="astruct_a_v_c_u_d_a_device_context_html_ace8e7f76355f4120e33dd4488e26e96d"><div class="ttname"><a href="struct_a_v_c_u_d_a_device_context.html#ace8e7f76355f4120e33dd4488e26e96d">AVCUDADeviceContext::cuda_ctx</a></div><div class="ttdeci">CUcontext cuda_ctx</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__cuda_8h_source.html#l00043">hwcontext_cuda.h:43</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_ac04ceebc808697d11b922ec788e13aa4"><div class="ttname"><a href="struct_cuvid_context.html#ac04ceebc808697d11b922ec788e13aa4">CuvidContext::chroma_format</a></div><div class="ttdeci">cudaVideoChromaFormat chroma_format</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00090">cuviddec.c:90</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0b271df0acd125218c1e365a0f754022">AV_PIX_FMT_NV12</a></div><div class="ttdeci">@ AV_PIX_FMT_NV12</div><div class="ttdoc">planar YUV 4:2:0, 12bpp, 1 plane for Y and 1 plane for the UV components, which are interleaved (firs...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00089">pixfmt.h:89</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_abe964316aaaa61967b012efdcced79c4"><div class="ttname"><a href="struct_a_v_codec_context.html#abe964316aaaa61967b012efdcced79c4">AVCodecContext::extradata</a></div><div class="ttdeci">uint8_t * extradata</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00627">avcodec.h:627</a></div></div>
<div class="ttc" id="acuda__check_8h_html"><div class="ttname"><a href="cuda__check_8h.html">cuda_check.h</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_a21fbd088225e4e25c4d9a01b3f5e8c51"><div class="ttname"><a href="hwcontext_8c.html#a21fbd088225e4e25c4d9a01b3f5e8c51">av_hwdevice_ctx_create</a></div><div class="ttdeci">int av_hwdevice_ctx_create(AVBufferRef **pdevice_ref, enum AVHWDeviceType type, const char *device, AVDictionary *opts, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00610">hwcontext.c:610</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_abf1b1664b8239d953ae2cac8b643815a"><div class="ttname"><a href="hwcontext_8c.html#abf1b1664b8239d953ae2cac8b643815a">av_hwframe_transfer_data</a></div><div class="ttdeci">int av_hwframe_transfer_data(AVFrame *dst, const AVFrame *src, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00443">hwcontext.c:443</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a6c13ba7f37b47f1053998edb6de66707"><div class="ttname"><a href="cuviddec_8c.html#a6c13ba7f37b47f1053998edb6de66707">cudaVideoSurfaceFormat_YUV444</a></div><div class="ttdeci">#define cudaVideoSurfaceFormat_YUV444</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00041">cuviddec.c:41</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_a6f234e0cc3f8e214f4934844601ae85c"><div class="ttname"><a href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a></div><div class="ttdeci">int ff_set_sar(AVCodecContext *avctx, AVRational sar)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00121">utils.c:121</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_ac9a7dbd0cbfcabc0b1529cb34cf53b6d"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#ac9a7dbd0cbfcabc0b1529cb34cf53b6d">AVHWFramesContext::device_ctx</a></div><div class="ttdeci">AVHWDeviceContext * device_ctx</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00149">hwcontext.h:149</a></div></div>
<div class="ttc" id="adecode_8c_html_a227b4a5329003bed45b8bdf0a4e370a1"><div class="ttname"><a href="decode_8c.html#a227b4a5329003bed45b8bdf0a4e370a1">ff_decode_frame_props</a></div><div class="ttdeci">int ff_decode_frame_props(AVCodecContext *avctx, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01704">decode.c:1704</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1d0f65014a8d1bf78cec8cbed2304992"><div class="ttname"><a href="struct_a_v_frame.html#a1d0f65014a8d1bf78cec8cbed2304992">AVFrame::data</a></div><div class="ttdeci">uint8_t * data[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00322">frame.h:322</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_ac4537b63c1caba757dda1b7d74ec1d92"><div class="ttname"><a href="struct_cuvid_context.html#ac4537b63c1caba757dda1b7d74ec1d92">CuvidContext::caps8</a></div><div class="ttdeci">CUVIDDECODECAPS caps8</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00092">cuviddec.c:92</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aed14fa772ce46881020fd1545c86432c"><div class="ttname"><a href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">AVFrame::format</a></div><div class="ttdeci">int format</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00381">frame.h:381</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aeffc0091dc3138015b53107c8ffb04af"><div class="ttname"><a href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">AVCodecContext::internal</a></div><div class="ttdeci">struct AVCodecInternal * internal</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00561">avcodec.h:561</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="amotion_8c_html_a7c1d654b7b6114d7a0abc8d351dd1bcd"><div class="ttname"><a href="motion_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a></div><div class="ttdeci">int dummy</div><div class="ttdef"><b>Definition:</b> <a href="motion_8c_source.html#l00064">motion.c:64</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a></div><div class="ttdeci">@ AV_OPT_TYPE_INT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00225">opt.h:225</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a0a997ee23233e301c2ae309f3da08eaf"><div class="ttname"><a href="struct_cuvid_context.html#a0a997ee23233e301c2ae309f3da08eaf">CuvidContext::drop_second_field</a></div><div class="ttdeci">int drop_second_field</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00058">cuviddec.c:58</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1ff9829b01eeb0063c21d039dcc5900d"><div class="ttname"><a href="struct_a_v_codec_context.html#a1ff9829b01eeb0063c21d039dcc5900d">AVCodecContext::sw_pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat sw_pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02069">avcodec.h:2076</a></div></div>
<div class="ttc" id="acuviddec_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="cuviddec_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l01088">cuviddec.c:1088</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga3f9c69432582e2857147bcba3c75dc32"><div class="ttname"><a href="group__lavu__math__rational.html#ga3f9c69432582e2857147bcba3c75dc32">av_mul_q</a></div><div class="ttdeci">AVRational av_mul_q(AVRational b, AVRational c)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00080">rational.c:80</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_gaa40ce7d3ede946a89d03323bbd7268c1"><div class="ttname"><a href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a></div><div class="ttdeci">AVBufferRef * av_buffer_ref(AVBufferRef *buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00093">buffer.c:93</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a">AV_PIX_FMT_YUV444P</a></div><div class="ttdeci">@ AV_PIX_FMT_YUV444P</div><div class="ttdoc">planar YUV 4:4:4, 24bpp, (1 Cr &amp; Cb sample per 1x1 Y samples)</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00071">pixfmt.h:71</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a6265531cbe491ec34449e3769e545f1f"><div class="ttname"><a href="pixfmt_8h.html#a6265531cbe491ec34449e3769e545f1f">AV_PIX_FMT_P010</a></div><div class="ttdeci">#define AV_PIX_FMT_P010</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00448">pixfmt.h:448</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a5837cafc419c2b5ecdb1dfa330675d13"><div class="ttname"><a href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_DISABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00084">internal.h:84</a></div></div>
<div class="ttc" id="astruct_cuvid_parsed_frame_html_a0197d7785f358c463ff487c209442c7e"><div class="ttname"><a href="struct_cuvid_parsed_frame.html#a0197d7785f358c463ff487c209442c7e">CuvidParsedFrame::is_deinterlacing</a></div><div class="ttdeci">int is_deinterlacing</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00105">cuviddec.c:105</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ae3c157e97ff15d46e898a538c6bc7f09"><div class="ttname"><a href="struct_a_v_codec_context.html#ae3c157e97ff15d46e898a538c6bc7f09">AVCodecContext::coded_width</a></div><div class="ttdeci">int coded_width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00714">avcodec.h:714</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_ac27d88701695f568c8495985b978da16"><div class="ttname"><a href="struct_cuvid_context.html#ac27d88701695f568c8495985b978da16">CuvidContext::left</a></div><div class="ttdeci">int left</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00063">cuviddec.c:63</a></div></div>
<div class="ttc" id="acuviddec_8c_html_af82b51bb61d1e0133bcb40e63aebca30"><div class="ttname"><a href="cuviddec_8c.html#af82b51bb61d1e0133bcb40e63aebca30">cuvid_flush</a></div><div class="ttdeci">static void cuvid_flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l01032">cuviddec.c:1032</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a80e8871963db38d6a1c3595427b6eafd"><div class="ttname"><a href="struct_cuvid_context.html#a80e8871963db38d6a1c3595427b6eafd">CuvidContext::codec_type</a></div><div class="ttdeci">cudaVideoCodec codec_type</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00089">cuviddec.c:89</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_a81f4cea70d96846df7111daccc5ecce2"><div class="ttname"><a href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a></div><div class="ttdeci">int av_fifo_size(const AVFifoBuffer *f)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00077">fifo.c:77</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0425c77b3d06d71e5db88b1d7e1b37f2"><div class="ttname"><a href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">AVCodecContext::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00721">avcodec.h:736</a></div></div>
<div class="ttc" id="astruct_cuvid_context_html_a80e37f9e687aba814dc9b7a54a9d4079"><div class="ttname"><a href="struct_cuvid_context.html#a80e37f9e687aba814dc9b7a54a9d4079">CuvidContext::avclass</a></div><div class="ttdeci">AVClass * avclass</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00051">cuviddec.c:51</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_a612be59edb6ab388a82d1487d1bd0c4d"><div class="ttname"><a href="libavutil_2fifo_8c.html#a612be59edb6ab388a82d1487d1bd0c4d">av_fifo_freep</a></div><div class="ttdeci">void av_fifo_freep(AVFifoBuffer **f)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00063">fifo.c:63</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a></div><div class="ttdeci">@ AV_OPT_TYPE_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00242">opt.h:242</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_adae9b18c5eed14fe851c5bb984ce374b"><div class="ttname"><a href="libavutil_2fifo_8c.html#adae9b18c5eed14fe851c5bb984ce374b">av_fifo_alloc</a></div><div class="ttdeci">AVFifoBuffer * av_fifo_alloc(unsigned int size)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00043">fifo.c:43</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea77772369e1d305824b08b53a8d5c56b6"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea77772369e1d305824b08b53a8d5c56b6">AV_CODEC_ID_VP8</a></div><div class="ttdeci">@ AV_CODEC_ID_VP8</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00189">codec_id.h:189</a></div></div>
<div class="ttc" id="ahwcontext_8h_html"><div class="ttname"><a href="hwcontext_8h.html">hwcontext.h</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa102cde7ec5acbc099c3bcbb58556a18"><div class="ttname"><a href="group__lavu__error.html#gaa102cde7ec5acbc099c3bcbb58556a18">AVERROR_BUG</a></div><div class="ttdeci">#define AVERROR_BUG</div><div class="ttdoc">Internal bug, also see AVERROR_BUG2.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00050">error.h:50</a></div></div>
<div class="ttc" id="acuviddec_8c_html_a34e7809113a8fc57ac40b950e0b2e9e9"><div class="ttname"><a href="cuviddec_8c.html#a34e7809113a8fc57ac40b950e0b2e9e9">CuvidContext</a></div><div class="ttdeci">struct CuvidContext CuvidContext</div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_cuvid_parsed_frame_html"><div class="ttname"><a href="struct_cuvid_parsed_frame.html">CuvidParsedFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00101">cuviddec.c:102</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a></div><div class="ttdeci">@ AV_OPT_TYPE_STRING</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00229">opt.h:229</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a6e606effa68724cae2ef5cc05f7fd9cb"><div class="ttname"><a href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">AVCodecContext::codec</a></div><div class="ttdeci">const struct AVCodec * codec</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00535">avcodec.h:535</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="ahwconfig_8h_html_a527984f94d846e8f58921e2bf5d1ad05"><div class="ttname"><a href="hwconfig_8h.html#a527984f94d846e8f58921e2bf5d1ad05">AVCodecHWConfigInternal</a></div><div class="ttdeci">struct AVCodecHWConfigInternal AVCodecHWConfigInternal</div></div>
<div class="ttc" id="astruct_cuvid_context_html_a95d1da91f82c2a5509cd255eca6ed4cd"><div class="ttname"><a href="struct_cuvid_context.html#a95d1da91f82c2a5509cd255eca6ed4cd">CuvidContext::nb_surfaces</a></div><div class="ttdeci">int nb_surfaces</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00057">cuviddec.c:57</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG2VIDEO</div><div class="ttdoc">preferred ID for MPEG-1/2 video decoding</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00051">codec_id.h:51</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_adfa5aaa3a4f69b163ea30cadc6d663dc"><div class="ttname"><a href="hwcontext_8c.html#adfa5aaa3a4f69b163ea30cadc6d663dc">av_hwframe_get_buffer</a></div><div class="ttdeci">int av_hwframe_get_buffer(AVBufferRef *hwframe_ref, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00502">hwcontext.c:502</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a></div><div class="ttdeci">@ AV_OPT_TYPE_CONST</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00234">opt.h:234</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a33a289c990bc3fbcad01c4a09f34da38"><div class="ttname"><a href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">AVCodecContext::pkt_timebase</a></div><div class="ttdeci">AVRational pkt_timebase</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02083">avcodec.h:2083</a></div></div>
<div class="ttc" id="apixdesc_8c_html_ab92e2a8a9b58c982560c49df9f01e47e"><div class="ttname"><a href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a></div><div class="ttdeci">const char * av_get_pix_fmt_name(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02489">pixdesc.c:2489</a></div></div>
<div class="ttc" id="acuviddec_8c_html_ab6399e99afbfdf9f0ea61f19225d05f4"><div class="ttname"><a href="cuviddec_8c.html#ab6399e99afbfdf9f0ea61f19225d05f4">cuvid_handle_video_sequence</a></div><div class="ttdeci">static int CUDAAPI cuvid_handle_video_sequence(void *opaque, CUVIDEOFORMAT *format)</div><div class="ttdef"><b>Definition:</b> <a href="cuviddec_8c_source.html#l00110">cuviddec.c:110</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
