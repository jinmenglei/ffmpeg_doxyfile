<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/dvdsubenc.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">dvdsubenc.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="dvdsubenc_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * DVD subtitle encoding</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2005 Wolfram Gloger</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bytestream_8h.html">bytestream.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bprint_8h.html">libavutil/bprint.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="struct_d_v_d_subtitle_context.html">   29</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="struct_d_v_d_subtitle_context.html#a8bfba0d50ebaccc067189b5907a00a0e">   30</a></span>&#160;    <a class="code" href="struct_a_v_class.html">AVClass</a> *<span class="keyword">class</span>;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">   31</a></span>&#160;    uint32_t global_palette[16];</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="struct_d_v_d_subtitle_context.html#a848b988de3bc4fb81763b57f3379448d">   32</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="struct_d_v_d_subtitle_context.html#a848b988de3bc4fb81763b57f3379448d">palette_str</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="struct_d_v_d_subtitle_context.html#a341e3c6fe760ee7fdd773040021fc396">   33</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_d_v_d_subtitle_context.html#a341e3c6fe760ee7fdd773040021fc396">even_rows_fix</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;} <a class="code" href="struct_d_v_d_subtitle_context.html">DVDSubtitleContext</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// ncnt is the nibble counter</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">   37</a></span>&#160;<span class="preprocessor">#define PUTNIBBLE(val)\</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">do {\</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">    if (ncnt++ &amp; 1)\</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">        *q++ = bitbuf | ((val) &amp; 0x0f);\</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">    else\</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">        bitbuf = (val) &lt;&lt; 4;\</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">} while(0)</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#ac827412999501976799d7bde31a0394e">   45</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="dvdsubenc_8c.html#ac827412999501976799d7bde31a0394e">dvd_encode_rle</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **pq,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                           <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *bitmap, <span class="keywordtype">int</span> linesize,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                           <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                           <span class="keyword">const</span> <span class="keywordtype">int</span> cmap[256])</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *q;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bitbuf = 0;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordtype">int</span> ncnt;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">int</span> x, y, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>, <a class="code" href="log_8c.html#a3b4f0685dba79673184dceeecd4ca93f">color</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    q = *pq;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>; ++y) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        ncnt = 0;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">for</span>(x = 0; x &lt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>; x += <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <a class="code" href="structcolor.html">color</a> = bitmap[x];</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>=1; x+<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>; ++<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                <span class="keywordflow">if</span> (bitmap[x+<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>] != <a class="code" href="structcolor.html">color</a>)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <a class="code" href="structcolor.html">color</a> = cmap[<a class="code" href="log_8c.html#a3b4f0685dba79673184dceeecd4ca93f">color</a>];</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="structcolor.html">color</a> &lt; 4);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 0x04) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>((<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt;&lt; 2)|<a class="code" href="structcolor.html">color</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 0x10) {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;&gt; 2);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>((<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt;&lt; 2)|<a class="code" href="structcolor.html">color</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 0x40) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(0);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;&gt; 2);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>((<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt;&lt; 2)|<a class="code" href="structcolor.html">color</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x+<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> == <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(0);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(0);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(0);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(<a class="code" href="structcolor.html">color</a>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt; 0xff)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                    <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = 0xff;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(0);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;&gt; 6);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;&gt; 2);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>((<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt;&lt; 2)|<a class="code" href="structcolor.html">color</a>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="comment">/* end of line */</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">if</span> (ncnt &amp; 1)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <a class="code" href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a>(0);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        bitmap += linesize;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    *pq = q;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#ab54cd8f19f830b9f034134744feb54c4">   98</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="dvdsubenc_8c.html#ab54cd8f19f830b9f034134744feb54c4">color_distance</a>(uint32_t <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, uint32_t <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> = 0, d, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">int</span> alpha_a = 8, alpha_b = 8;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 24; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> -= 8) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        d = alpha_a * (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)((<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> &gt;&gt; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) &amp; 0xFF) -</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            alpha_b * (<span class="keywordtype">int</span>)((<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &gt;&gt; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) &amp; 0xFF);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> += d * d;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        alpha_a = <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> &gt;&gt; 28;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        alpha_b = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> &gt;&gt; 28;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#ac7aab4cb5c016c66ccb7095227b43a62">  117</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="dvdsubenc_8c.html#ac7aab4cb5c016c66ccb7095227b43a62">count_colors</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keywordtype">unsigned</span> hits[33],</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                         <span class="keyword">const</span> <a class="code" href="struct_a_v_subtitle_rect.html">AVSubtitleRect</a> *<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="struct_d_v_d_subtitle_context.html">DVDSubtitleContext</a> *dvdc = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordtype">unsigned</span> count[256] = { 0 };</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    uint32_t *palette = (uint32_t *)<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;data[1];</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    uint32_t <a class="code" href="structcolor.html">color</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordtype">int</span> x, y, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, match, d, best_d, <a class="code" href="attributes_8h.html#a934ff195492486f0f9d22770103e757b">av_uninit</a>(best_j);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *p = <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;data[0];</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;h; y++) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;w; x++)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            count[*(p++)]++;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        p += <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;linesize[0] - <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;w;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 256; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span> (!count[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) <span class="comment">/* avoid useless search */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="structcolor.html">color</a> = palette[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="comment">/* 0: transparent, 1-16: semi-transparent, 17-33 opaque */</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        match = <a class="code" href="structcolor.html">color</a> &lt; 0x33000000 ? 0 : <a class="code" href="structcolor.html">color</a> &lt; 0xCC000000 ? 1 : 17;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span> (match) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            best_d = INT_MAX;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 16; j++) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                d = <a class="code" href="dvdsubenc_8c.html#ab54cd8f19f830b9f034134744feb54c4">color_distance</a>(0xFF000000 | <a class="code" href="structcolor.html">color</a>,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                   0xFF000000 | dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>[j]);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <span class="keywordflow">if</span> (d &lt; best_d) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    best_d = d;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    best_j = j;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            match += best_j;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        hits[match] += count[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#aba5dd1881e0256919ded123857c7beab">  154</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="dvdsubenc_8c.html#aba5dd1881e0256919ded123857c7beab">select_palette</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keywordtype">int</span> out_palette[4],</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                           <span class="keywordtype">int</span> out_alpha[4], <span class="keywordtype">unsigned</span> hits[33])</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="struct_d_v_d_subtitle_context.html">DVDSubtitleContext</a> *dvdc = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, bright, <a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    uint32_t <a class="code" href="log_8c.html#a3b4f0685dba79673184dceeecd4ca93f">color</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">int</span> selected[4] = { 0 };</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    uint32_t pseudopal[33] = { 0 };</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    uint32_t refcolor[3] = { 0x00000000, 0xFFFFFFFF, 0xFF000000 };</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">/* Bonus for transparent: if the rectangle fits tightly the text, the</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">       background color can be quite rare, but it would be ugly without it */</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    hits[0] *= 16;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">/* Bonus for bright colors */</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">if</span> (!(hits[1 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + hits[17 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">continue</span>; <span class="comment">/* skip unused colors to gain time */</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="structcolor.html">color</a> = dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        bright = 0;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++, color &gt;&gt;= 8)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            bright += (<a class="code" href="structcolor.html">color</a> &amp; 0xFF) &lt; 0x40 || (<a class="code" href="structcolor.html">color</a> &amp; 0xFF) &gt;= 0xC0;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a> = 2 + <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(bright, 2);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        hits[ 1 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= <a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        hits[17 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= <a class="code" href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">/* Select four most frequent colors */</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 33; j++)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">if</span> (hits[j] &gt; hits[selected[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]])</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                selected[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = j;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        hits[selected[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = 0;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">/* Order the colors like in most DVDs:</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">       0: background, 1: foreground, 2: outline */</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        pseudopal[ 1 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0x80000000 | dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        pseudopal[17 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0xFF000000 | dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordtype">int</span> best_d = <a class="code" href="dvdsubenc_8c.html#ab54cd8f19f830b9f034134744feb54c4">color_distance</a>(refcolor[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], pseudopal[selected[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]]);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">for</span> (j = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1; j &lt; 4; j++) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordtype">int</span> d = <a class="code" href="dvdsubenc_8c.html#ab54cd8f19f830b9f034134744feb54c4">color_distance</a>(refcolor[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], pseudopal[selected[j]]);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">if</span> (d &lt; best_d) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keywordtype">int</span>, selected[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], selected[j]);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                best_d = d;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">/* Output */</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        out_palette[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = selected[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] ? (selected[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - 1) &amp; 0xF : 0;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        out_alpha  [<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = !selected[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] ? 0 : selected[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; 17 ? 0x80 : 0xFF;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#ada2c74b7c5b1e0aa3ab41b1489e1264f">  212</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="dvdsubenc_8c.html#ada2c74b7c5b1e0aa3ab41b1489e1264f">build_color_map</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keywordtype">int</span> cmap[],</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                            <span class="keyword">const</span> uint32_t palette[],</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">int</span> out_palette[], <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> out_alpha[])</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="struct_d_v_d_subtitle_context.html">DVDSubtitleContext</a> *dvdc = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, d, best_d;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    uint32_t pseudopal[4];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        pseudopal[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (out_alpha[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; 24) |</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                       dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>[out_palette[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 256; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        best_d = INT_MAX;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            d = <a class="code" href="dvdsubenc_8c.html#ab54cd8f19f830b9f034134744feb54c4">color_distance</a>(pseudopal[j], palette[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">if</span> (d &lt; best_d) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                cmap[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = j;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                best_d = d;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#ae430bcbc205c749b2329a4bf38b038e7">  235</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="dvdsubenc_8c.html#ae430bcbc205c749b2329a4bf38b038e7">copy_rectangle</a>(<a class="code" href="struct_a_v_subtitle_rect.html">AVSubtitleRect</a> *dst, <a class="code" href="struct_a_v_subtitle_rect.html">AVSubtitleRect</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">int</span> cmap[])</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *p, *q;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    p = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;data[0];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    q = dst-&gt;<a class="code" href="struct_a_v_subtitle_rect.html#aa5cbbdf0485ec8de1d8acfa437ca0254">data</a>[0] + (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;x - dst-&gt;<a class="code" href="struct_a_v_subtitle_rect.html#a0059c986f1ee3aab45c0f62f0709621b">x</a>) +</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                            (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;y - dst-&gt;<a class="code" href="struct_a_v_subtitle_rect.html#ab9e5fdd0c592636abf46530b110311bb">y</a>) * dst-&gt;<a class="code" href="struct_a_v_subtitle_rect.html#adefe2c038e26cc9f1b5076476f1ffc96">linesize</a>[0];</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;h; y++) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;w; x++)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            *(q++) = cmap[*(p++)];</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        p += <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;linesize[0] - <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;w;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        q += dst-&gt;<a class="code" href="struct_a_v_subtitle_rect.html#adefe2c038e26cc9f1b5076476f1ffc96">linesize</a>[0] - <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;w;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#a6f4990a972122ab6e24d8a7a0b9a3b1d">  251</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="dvdsubenc_8c.html#a6f4990a972122ab6e24d8a7a0b9a3b1d">encode_dvd_subtitles</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *outbuf, <span class="keywordtype">int</span> outbuf_size,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                <span class="keyword">const</span> <a class="code" href="struct_a_v_subtitle.html">AVSubtitle</a> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;{</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="struct_d_v_d_subtitle_context.html">DVDSubtitleContext</a> *dvdc = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *q, *qq;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">int</span> offset1, offset2;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, rects = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;num_rects, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">unsigned</span> global_palette_hits[33] = { 0 };</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">int</span> cmap[256];</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">int</span> out_palette[4];</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">int</span> out_alpha[4];</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="struct_a_v_subtitle_rect.html">AVSubtitleRect</a> vrect;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *vrect_data = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordtype">int</span> x2, y2;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordtype">int</span> forced = 0;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (rects == 0 || !<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rects; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;type != <a class="code" href="group__lavc__core.html#gga828218dcb8874ab2c5af8d486c365421a0e577aa36b52d777c6ec5bef8625dde4">SUBTITLE_BITMAP</a>) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Bitmap subtitle required\n&quot;</span>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">/* Mark this subtitle forced if any of the rectangles is forced. */</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rects; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga9235aa94caef10933f1436929ae15903">AV_SUBTITLE_FLAG_FORCED</a>) != 0) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            forced = 1;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#if FF_API_AVPICTURE</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rects; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;data[0]) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="struct_a_v_subtitle_rect.html">AVSubtitleRect</a> *<a class="code" href="structrect.html">rect</a> = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <a class="code" href="structrect.html">rect</a>-&gt;data[j] = <a class="code" href="structrect.html">rect</a>-&gt;pict.data[j];</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <a class="code" href="structrect.html">rect</a>-&gt;linesize[j] = <a class="code" href="structrect.html">rect</a>-&gt;pict.linesize[j];</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    vrect = *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[0];</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (rects &gt; 1) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="comment">/* DVD subtitles can have only one rectangle: build a virtual</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">           rectangle containing all actual rectangles.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">           The data of the rectangles will be copied later, when the palette</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">           is decided, because the rectangles may have different palettes. */</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordtype">int</span> xmin = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[0]-&gt;x, xmax = xmin + <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[0]-&gt;w;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordtype">int</span> ymin = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[0]-&gt;y, ymax = ymin + <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[0]-&gt;h;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rects; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            xmin = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(xmin, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;x);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            ymin = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(ymin, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;y);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            xmax = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(xmax, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;x + <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;w);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            ymax = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(ymax, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;y + <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;h);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        vrect.x = xmin;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        vrect.y = ymin;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        vrect.w = xmax - xmin;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        vrect.h = ymax - ymin;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__picture.html#ga3a867b6180ddad1e0c382ef0c5940b8e">av_image_check_size</a>(vrect.w, vrect.h, 0, avctx)) &lt; 0)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment">/* Count pixels outside the virtual rectangle as transparent */</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        global_palette_hits[0] = vrect.w * vrect.h;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rects; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            global_palette_hits[0] -= <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;w * <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;h;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rects; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <a class="code" href="dvdsubenc_8c.html#ac7aab4cb5c016c66ccb7095227b43a62">count_colors</a>(avctx, global_palette_hits, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="dvdsubenc_8c.html#aba5dd1881e0256919ded123857c7beab">select_palette</a>(avctx, out_palette, out_alpha, global_palette_hits);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (rects &gt; 1) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">if</span> (!(vrect_data = <a class="code" href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a>(vrect.w, vrect.h)))</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        vrect.data    [0] = vrect_data;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        vrect.linesize[0] = vrect.w;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rects; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <a class="code" href="dvdsubenc_8c.html#ada2c74b7c5b1e0aa3ab41b1489e1264f">build_color_map</a>(avctx, cmap, (uint32_t *)<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;data[1],</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                            out_palette, out_alpha);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <a class="code" href="dvdsubenc_8c.html#ae430bcbc205c749b2329a4bf38b038e7">copy_rectangle</a>(&amp;vrect, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], cmap);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            cmap[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="dvdsubenc_8c.html#ada2c74b7c5b1e0aa3ab41b1489e1264f">build_color_map</a>(avctx, cmap, (uint32_t *)<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;rects[0]-&gt;data[1],</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                        out_palette, out_alpha);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Selected palette:&quot;</span>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot; 0x%06&quot;</span>PRIx32<span class="stringliteral">&quot;@@%02x (0x%x,0x%x)&quot;</span>,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;               dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>[out_palette[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]], out_alpha[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;               out_palette[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], out_alpha[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;&gt; 4);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// encode data block</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    q = outbuf + 4;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    offset1 = q - outbuf;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// worst case memory requirement: 1 nibble per pixel..</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> ((q - outbuf) + vrect.w * vrect.h / 2 + 17 + 21 &gt; outbuf_size) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;dvd_subtitle too big\n&quot;</span>);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga76077a6d42ee211f59712485bd977e40">AVERROR_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="dvdsubenc_8c.html#ac827412999501976799d7bde31a0394e">dvd_encode_rle</a>(&amp;q, vrect.data[0], vrect.w * 2,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                   vrect.w, (vrect.h + 1) &gt;&gt; 1, cmap);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    offset2 = q - outbuf;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="dvdsubenc_8c.html#ac827412999501976799d7bde31a0394e">dvd_encode_rle</a>(&amp;q, vrect.data[0] + vrect.w, vrect.w * 2,</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                   vrect.w, vrect.h &gt;&gt; 1, cmap);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a341e3c6fe760ee7fdd773040021fc396">even_rows_fix</a> &amp;&amp; (vrect.h &amp; 1)) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">// Work-around for some players that want the height to be even.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        vrect.h++;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        *q++ = 0x00; <span class="comment">// 0x00 0x00 == empty row, i.e. fully transparent</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        *q++ = 0x00;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// set data packet size</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    qq = outbuf + 2;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    bytestream_put_be16(&amp;qq, q - outbuf);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// send start display command</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    bytestream_put_be16(&amp;q, (<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;start_display_time*90) &gt;&gt; 10);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    bytestream_put_be16(&amp;q, (q - outbuf) <span class="comment">/*- 2 */</span> + 8 + 12 + 2);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    *q++ = 0x03; <span class="comment">// palette - 4 nibbles</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    *q++ = (out_palette[3] &lt;&lt; 4) | out_palette[2];</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    *q++ = (out_palette[1] &lt;&lt; 4) | out_palette[0];</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    *q++ = 0x04; <span class="comment">// alpha - 4 nibbles</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    *q++ = (out_alpha[3] &amp; 0xF0) | (out_alpha[2] &gt;&gt; 4);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    *q++ = (out_alpha[1] &amp; 0xF0) | (out_alpha[0] &gt;&gt; 4);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// 12 bytes per rect</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    x2 = vrect.x + vrect.w - 1;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    y2 = vrect.y + vrect.h - 1;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    *q++ = 0x05;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// x1 x2 -&gt; 6 nibbles</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    *q++ = vrect.x &gt;&gt; 4;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    *q++ = (vrect.x &lt;&lt; 4) | ((x2 &gt;&gt; 8) &amp; 0xf);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    *q++ = x2;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// y1 y2 -&gt; 6 nibbles</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    *q++ = vrect.y &gt;&gt; 4;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    *q++ = (vrect.y &lt;&lt; 4) | ((y2 &gt;&gt; 8) &amp; 0xf);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    *q++ = y2;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    *q++ = 0x06;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// offset1, offset2</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    bytestream_put_be16(&amp;q, offset1);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    bytestream_put_be16(&amp;q, offset2);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    *q++ = forced ? 0x00 : 0x01; <span class="comment">// start command</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    *q++ = 0xff; <span class="comment">// terminating command</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// send stop display command last</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    bytestream_put_be16(&amp;q, (<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;end_display_time*90) &gt;&gt; 10);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    bytestream_put_be16(&amp;q, (q - outbuf) - 2 <span class="comment">/*+ 4*/</span>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    *q++ = 0x02; <span class="comment">// set end</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    *q++ = 0xff; <span class="comment">// terminating command</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    qq = outbuf;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    bytestream_put_be16(&amp;qq, q - outbuf);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;subtitle_packet size=%&quot;</span><a class="code" href="libavutil_2internal_8h.html#a5a241f1b73b42f74b4122da23004dc6c">PTRDIFF_SPECIFIER</a><span class="stringliteral">&quot;\n&quot;</span>, q - outbuf);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = q - outbuf;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(vrect_data);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#a9798d9be551b9dc4424db08e4eaea071">  427</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="dvdsubenc_8c.html#a9798d9be551b9dc4424db08e4eaea071">bprint_to_extradata</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keyword">struct</span> AVBPrint *buf)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="bprint_8c.html#a3fd45f50d9d4f7cc8fed5331a37f47ea">av_bprint_finalize</a>(buf, &amp;<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="bprint_8h.html#a07432f704c49a6fa636197e2aa80bac0">av_bprint_is_complete</a>(buf)) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#abe964316aaaa61967b012efdcced79c4">extradata</a> = <a class="code" href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">str</a>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">/* Note: the string is NUL terminated (so extradata can be read as a</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">     * string), but the ending character is not accounted in the size (in</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">     * binary formats you are likely not supposed to mux that character). When</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">     * extradata is copied, it is also padded with AV_INPUT_BUFFER_PADDING_SIZE</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">     * zeros. */</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae246ca7a1c72c151891ed0599e8dbfba">extradata_size</a> = buf-&gt;len;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#a424c595879a2c240345b7997ff77a179">  450</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="dvdsubenc_8c.html#a424c595879a2c240345b7997ff77a179">dvdsub_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;{</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="struct_d_v_d_subtitle_context.html">DVDSubtitleContext</a> *dvdc = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint32_t default_palette[16] = {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        0x000000, 0x0000FF, 0x00FF00, 0xFF0000,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        0xFFFF00, 0xFF00FF, 0x00FFFF, 0xFFFFFF,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        0x808000, 0x8080FF, 0x800080, 0x80FF80,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        0x008080, 0xFF8080, 0x555555, 0xAAAAAA,</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    };</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    AVBPrint extradata;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<span class="keyword">sizeof</span>(dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>) == <span class="keyword">sizeof</span>(default_palette));</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a848b988de3bc4fb81763b57f3379448d">palette_str</a>) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="dvdsub_8c.html#a3305f61248ae68145ce35e9966379a02">ff_dvdsub_parse_palette</a>(dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>, dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a848b988de3bc4fb81763b57f3379448d">palette_str</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        memcpy(dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>, default_palette, <span class="keyword">sizeof</span>(dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>));</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="bprint_8c.html#a26abc84daea3189592c511fc26067d66">av_bprint_init</a>(&amp;extradata, 0, <a class="code" href="bprint_8h.html#a0e07836126dff024ac10acbc744ebe8f">AV_BPRINT_SIZE_AUTOMATIC</a>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;extradata, <span class="stringliteral">&quot;size: %dx%d\n&quot;</span>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;extradata, <span class="stringliteral">&quot;palette:&quot;</span>);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;extradata, <span class="stringliteral">&quot; %06&quot;</span>PRIx32<span class="stringliteral">&quot;%c&quot;</span>,</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                   dvdc-&gt;<a class="code" href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">global_palette</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; 0xFFFFFF, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 15 ? <span class="charliteral">&#39;,&#39;</span> : <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="dvdsubenc_8c.html#a9798d9be551b9dc4424db08e4eaea071">bprint_to_extradata</a>(avctx, &amp;extradata);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#a90573ccd825259cf553ca3db596d1e68">  484</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="dvdsubenc_8c.html#a90573ccd825259cf553ca3db596d1e68">dvdsub_encode</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buf, <span class="keywordtype">int</span> buf_size,</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                         <span class="keyword">const</span> <a class="code" href="struct_a_v_subtitle.html">AVSubtitle</a> *<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;{</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">//DVDSubtitleContext *s = avctx-&gt;priv_data;</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="dvdsubenc_8c.html#a6f4990a972122ab6e24d8a7a0b9a3b1d">encode_dvd_subtitles</a>(avctx, buf, buf_size, <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261">  495</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(DVDSubtitleContext, x)</span></div>
<div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#a18bbe716f5be6adbd2150139244c0262">  496</a></span>&#160;<span class="preprocessor">#define SE AV_OPT_FLAG_SUBTITLE_PARAM | AV_OPT_FLAG_ENCODING_PARAM</span></div>
<div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">  497</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="dvdsubenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a>[] = {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    {<span class="stringliteral">&quot;palette&quot;</span>, <span class="stringliteral">&quot;set the global palette&quot;</span>, <a class="code" href="dvdsubenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(palette_str), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a>, { .str = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }, 0, 0, <a class="code" href="dvdsubenc_8c.html#a18bbe716f5be6adbd2150139244c0262">SE</a> },</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    {<span class="stringliteral">&quot;even_rows_fix&quot;</span>, <span class="stringliteral">&quot;Make number of rows even (workaround for some players)&quot;</span>, <a class="code" href="dvdsubenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(even_rows_fix), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, {.i64 = 0}, 0, 1, <a class="code" href="dvdsubenc_8c.html#a18bbe716f5be6adbd2150139244c0262">SE</a>},</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;};</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#aabb8769e9d27d0de4df948e516f9d4af">  503</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <a class="code" href="dvdsubenc_8c.html#aabb8769e9d27d0de4df948e516f9d4af">dvdsubenc_class</a> = {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a> = <span class="stringliteral">&quot;VOBSUB subtitle encoder&quot;</span>,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    .item_name  = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    .option     = <a class="code" href="dvdsubenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a>,</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    .version    = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;};</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="dvdsubenc_8c.html#af8255c6cbfe00359f4abe9b8a35f56bf">  510</a></span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="dvdsubenc_8c.html#af8255c6cbfe00359f4abe9b8a35f56bf">ff_dvdsub_encoder</a> = {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>           = <span class="stringliteral">&quot;dvdsub&quot;</span>,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;DVD subtitles&quot;</span>),</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    .type           = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>,</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    .id             = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2d41739284f633efadccd4b43e906937">AV_CODEC_ID_DVD_SUBTITLE</a>,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    .init           = <a class="code" href="dvdsubenc_8c.html#a424c595879a2c240345b7997ff77a179">dvdsub_init</a>,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    .encode_sub     = <a class="code" href="dvdsubenc_8c.html#a90573ccd825259cf553ca3db596d1e68">dvdsub_encode</a>,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    .priv_class     = &amp;<a class="code" href="dvdsubenc_8c.html#aabb8769e9d27d0de4df948e516f9d4af">dvdsubenc_class</a>,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="struct_d_v_d_subtitle_context.html">DVDSubtitleContext</a>),</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="advdsubenc_8c_html_a384ff94b5139f441c282c9b4c7b985e6"><div class="ttname"><a href="dvdsubenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a></div><div class="ttdeci">static const AVOption options[]</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00497">dvdsubenc.c:497</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_aa6ef004d10669ab4ee062367a014ea33"><div class="ttname"><a href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_ENABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00085">internal.h:85</a></div></div>
<div class="ttc" id="astruct_d_v_d_subtitle_context_html_a341e3c6fe760ee7fdd773040021fc396"><div class="ttname"><a href="struct_d_v_d_subtitle_context.html#a341e3c6fe760ee7fdd773040021fc396">DVDSubtitleContext::even_rows_fix</a></div><div class="ttdeci">int even_rows_fix</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00033">dvdsubenc.c:33</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a></div><div class="ttdeci">@ AVMEDIA_TYPE_SUBTITLE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00204">avutil.h:204</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="avf__curves_8c_html_a33ac7b8ce37a3a60855883424fcf8b62"><div class="ttname"><a href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a></div><div class="ttdeci">const char * r</div><div class="ttdef"><b>Definition:</b> <a href="vf__curves_8c_source.html#l00114">vf_curves.c:114</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_aabb8769e9d27d0de4df948e516f9d4af"><div class="ttname"><a href="dvdsubenc_8c.html#aabb8769e9d27d0de4df948e516f9d4af">dvdsubenc_class</a></div><div class="ttdeci">static const AVClass dvdsubenc_class</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00503">dvdsubenc.c:503</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_ae430bcbc205c749b2329a4bf38b038e7"><div class="ttname"><a href="dvdsubenc_8c.html#ae430bcbc205c749b2329a4bf38b038e7">copy_rectangle</a></div><div class="ttdeci">static void copy_rectangle(AVSubtitleRect *dst, AVSubtitleRect *src, int cmap[])</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00235">dvdsubenc.c:235</a></div></div>
<div class="ttc" id="astruct_d_v_d_subtitle_context_html_a848b988de3bc4fb81763b57f3379448d"><div class="ttname"><a href="struct_d_v_d_subtitle_context.html#a848b988de3bc4fb81763b57f3379448d">DVDSubtitleContext::palette_str</a></div><div class="ttdeci">char * palette_str</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00032">dvdsubenc.c:32</a></div></div>
<div class="ttc" id="abprint_8c_html_a3fd45f50d9d4f7cc8fed5331a37f47ea"><div class="ttname"><a href="bprint_8c.html#a3fd45f50d9d4f7cc8fed5331a37f47ea">av_bprint_finalize</a></div><div class="ttdeci">int av_bprint_finalize(AVBPrint *buf, char **ret_str)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00235">bprint.c:235</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="acommon_8h_html_a09a0bb7d8fcfac416de7a5fe7fd8b0f1"><div class="ttname"><a href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a></div><div class="ttdeci">#define FFSWAP(type, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00099">common.h:99</a></div></div>
<div class="ttc" id="astructcolor_html"><div class="ttname"><a href="structcolor.html">color</a></div><div class="ttdef"><b>Definition:</b> <a href="vf__paletteuse_8c_source.html#l00582">vf_paletteuse.c:582</a></div></div>
<div class="ttc" id="abprint_8c_html_a26abc84daea3189592c511fc26067d66"><div class="ttname"><a href="bprint_8c.html#a26abc84daea3189592c511fc26067d66">av_bprint_init</a></div><div class="ttdeci">void av_bprint_init(AVBPrint *buf, unsigned size_init, unsigned size_max)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00069">bprint.c:69</a></div></div>
<div class="ttc" id="adnn__backend__native__layer__mathbinary_8c_html_aec238e230db0cd41b80558db403931dd"><div class="ttname"><a href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a></div><div class="ttdeci">static float sub(float src0, float src1)</div><div class="ttdef"><b>Definition:</b> <a href="dnn__backend__native__layer__mathbinary_8c_source.html#l00033">dnn_backend_native_layer_mathbinary.c:33</a></div></div>
<div class="ttc" id="astructrect_html"><div class="ttname"><a href="structrect.html">rect</a></div><div class="ttdef"><b>Definition:</b> <a href="f__ebur128_8c_source.html#l00091">f_ebur128.c:91</a></div></div>
<div class="ttc" id="advdsub_8c_html_a3305f61248ae68145ce35e9966379a02"><div class="ttname"><a href="dvdsub_8c.html#a3305f61248ae68145ce35e9966379a02">ff_dvdsub_parse_palette</a></div><div class="ttdeci">void ff_dvdsub_parse_palette(uint32_t *palette, const char *p)</div><div class="ttdef"><b>Definition:</b> <a href="dvdsub_8c_source.html#l00026">dvdsub.c:26</a></div></div>
<div class="ttc" id="allviddspenc_8c_html_aba9ed0487b0aa23eba534648df8384c0"><div class="ttname"><a href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a></div><div class="ttdeci">uint8_t w</div><div class="ttdef"><b>Definition:</b> <a href="llviddspenc_8c_source.html#l00038">llviddspenc.c:38</a></div></div>
<div class="ttc" id="ainput_8c_html_ad6cdb6a14abe3eab42eaaadc93409aec"><div class="ttname"><a href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a></div><div class="ttdeci">#define b</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00041">input.c:41</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_ac7aab4cb5c016c66ccb7095227b43a62"><div class="ttname"><a href="dvdsubenc_8c.html#ac7aab4cb5c016c66ccb7095227b43a62">count_colors</a></div><div class="ttdeci">static void count_colors(AVCodecContext *avctx, unsigned hits[33], const AVSubtitleRect *r)</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00117">dvdsubenc.c:117</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_rect_html_ab9e5fdd0c592636abf46530b110311bb"><div class="ttname"><a href="struct_a_v_subtitle_rect.html#ab9e5fdd0c592636abf46530b110311bb">AVSubtitleRect::y</a></div><div class="ttdeci">int y</div><div class="ttdoc">top left corner of pict, undefined when pict is not set</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02661">avcodec.h:2661</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_af7ec9d0e8fe4c7c996e70d62c517eb21"><div class="ttname"><a href="dvdsubenc_8c.html#af7ec9d0e8fe4c7c996e70d62c517eb21">PUTNIBBLE</a></div><div class="ttdeci">#define PUTNIBBLE(val)</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00037">dvdsubenc.c:37</a></div></div>
<div class="ttc" id="astruct_d_v_d_subtitle_context_html_a313c267b5556b6d69558f0e17c6ab259"><div class="ttname"><a href="struct_d_v_d_subtitle_context.html#a313c267b5556b6d69558f0e17c6ab259">DVDSubtitleContext::global_palette</a></div><div class="ttdeci">uint32_t global_palette[16]</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00031">dvdsubenc.c:31</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ae246ca7a1c72c151891ed0599e8dbfba"><div class="ttname"><a href="struct_a_v_codec_context.html#ae246ca7a1c72c151891ed0599e8dbfba">AVCodecContext::extradata_size</a></div><div class="ttdeci">int extradata_size</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00628">avcodec.h:628</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_rect_html_adefe2c038e26cc9f1b5076476f1ffc96"><div class="ttname"><a href="struct_a_v_subtitle_rect.html#adefe2c038e26cc9f1b5076476f1ffc96">AVSubtitleRect::linesize</a></div><div class="ttdeci">int linesize[4]</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02678">avcodec.h:2678</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_aba5dd1881e0256919ded123857c7beab"><div class="ttname"><a href="dvdsubenc_8c.html#aba5dd1881e0256919ded123857c7beab">select_palette</a></div><div class="ttdeci">static void select_palette(AVCodecContext *avctx, int out_palette[4], int out_alpha[4], unsigned hits[33])</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00154">dvdsubenc.c:154</a></div></div>
<div class="ttc" id="abprint_8h_html_a0e07836126dff024ac10acbc744ebe8f"><div class="ttname"><a href="bprint_8h.html#a0e07836126dff024ac10acbc744ebe8f">AV_BPRINT_SIZE_AUTOMATIC</a></div><div class="ttdeci">#define AV_BPRINT_SIZE_AUTOMATIC</div></div>
<div class="ttc" id="agroup__lavu__error_html_ga76077a6d42ee211f59712485bd977e40"><div class="ttname"><a href="group__lavu__error.html#ga76077a6d42ee211f59712485bd977e40">AVERROR_BUFFER_TOO_SMALL</a></div><div class="ttdeci">#define AVERROR_BUFFER_TOO_SMALL</div><div class="ttdoc">Buffer too small.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00051">error.h:51</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_a9798d9be551b9dc4424db08e4eaea071"><div class="ttname"><a href="dvdsubenc_8c.html#a9798d9be551b9dc4424db08e4eaea071">bprint_to_extradata</a></div><div class="ttdeci">static int bprint_to_extradata(AVCodecContext *avctx, struct AVBPrint *buf)</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00427">dvdsubenc.c:427</a></div></div>
<div class="ttc" id="alibavcodec_2g726_8c_html_a3470b7623b99914ff31998edf1518700"><div class="ttname"><a href="libavcodec_2g726_8c.html#a3470b7623b99914ff31998edf1518700">mult</a></div><div class="ttdeci">static int16_t mult(Float11 *f1, Float11 *f2)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2g726_8c_source.html#l00055">g726.c:55</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_a6f4990a972122ab6e24d8a7a0b9a3b1d"><div class="ttname"><a href="dvdsubenc_8c.html#a6f4990a972122ab6e24d8a7a0b9a3b1d">encode_dvd_subtitles</a></div><div class="ttdeci">static int encode_dvd_subtitles(AVCodecContext *avctx, uint8_t *outbuf, int outbuf_size, const AVSubtitle *h)</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00251">dvdsubenc.c:251</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_html"><div class="ttname"><a href="struct_a_v_subtitle.html">AVSubtitle</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02694">avcodec.h:2694</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_rect_html_a0059c986f1ee3aab45c0f62f0709621b"><div class="ttname"><a href="struct_a_v_subtitle_rect.html#a0059c986f1ee3aab45c0f62f0709621b">AVSubtitleRect::x</a></div><div class="ttdeci">int x</div><div class="ttdoc">top left corner of pict, undefined when pict is not set</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02660">avcodec.h:2660</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_rect_html_aa5cbbdf0485ec8de1d8acfa437ca0254"><div class="ttname"><a href="struct_a_v_subtitle_rect.html#aa5cbbdf0485ec8de1d8acfa437ca0254">AVSubtitleRect::data</a></div><div class="ttdeci">uint8_t * data[4]</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02677">avcodec.h:2677</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="astruct_a_v_class_html_aa8883e113a3f2965abd008f7667db7eb"><div class="ttname"><a href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">AVClass::class_name</a></div><div class="ttdeci">const char * class_name</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00072">log.h:72</a></div></div>
<div class="ttc" id="agroup__lavu__ver_html_ga36e17e3fc9bcbe5c55820a8ac8b47e3c"><div class="ttname"><a href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a></div><div class="ttdeci">#define LIBAVUTIL_VERSION_INT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2version_8h_source.html#l00085">version.h:85</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a5a241f1b73b42f74b4122da23004dc6c"><div class="ttname"><a href="libavutil_2internal_8h.html#a5a241f1b73b42f74b4122da23004dc6c">PTRDIFF_SPECIFIER</a></div><div class="ttdeci">#define PTRDIFF_SPECIFIER</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00228">internal.h:228</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea2d41739284f633efadccd4b43e906937"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea2d41739284f633efadccd4b43e906937">AV_CODEC_ID_DVD_SUBTITLE</a></div><div class="ttdeci">@ AV_CODEC_ID_DVD_SUBTITLE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00517">codec_id.h:517</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga791fcd0dba1d19fe0c3677509344328e"><div class="ttname"><a href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a></div><div class="ttdeci">const char * av_default_item_name(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00235">log.c:235</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_a90573ccd825259cf553ca3db596d1e68"><div class="ttname"><a href="dvdsubenc_8c.html#a90573ccd825259cf553ca3db596d1e68">dvdsub_encode</a></div><div class="ttdeci">static int dvdsub_encode(AVCodecContext *avctx, unsigned char *buf, int buf_size, const AVSubtitle *sub)</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00484">dvdsubenc.c:484</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_rect_html"><div class="ttname"><a href="struct_a_v_subtitle_rect.html">AVSubtitleRect</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02659">avcodec.h:2659</a></div></div>
<div class="ttc" id="abprint_8h_html_a07432f704c49a6fa636197e2aa80bac0"><div class="ttname"><a href="bprint_8h.html#a07432f704c49a6fa636197e2aa80bac0">av_bprint_is_complete</a></div><div class="ttdeci">static int av_bprint_is_complete(const AVBPrint *buf)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8h_source.html#l00185">bprint.h:185</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_ada2c74b7c5b1e0aa3ab41b1489e1264f"><div class="ttname"><a href="dvdsubenc_8c.html#ada2c74b7c5b1e0aa3ab41b1489e1264f">build_color_map</a></div><div class="ttdeci">static void build_color_map(AVCodecContext *avctx, int cmap[], const uint32_t palette[], const int out_palette[], unsigned int const out_alpha[])</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00212">dvdsubenc.c:212</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="alog_8c_html_a3b4f0685dba79673184dceeecd4ca93f"><div class="ttname"><a href="log_8c.html#a3b4f0685dba79673184dceeecd4ca93f">color</a></div><div class="ttdeci">static const uint32_t color[16+AV_CLASS_CATEGORY_NB]</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00092">log.c:92</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="aundefined_8txt_html_ad99f336d4c117c453fef82993434eb4d"><div class="ttname"><a href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a></div><div class="ttdeci">The reader does not expect b to be semantically here and if the code is changed by maybe adding a a division or other the signedness will almost certainly be mistaken To avoid this confusion a new type was SUINT is the C unsigned type but it holds a signed int to use the same example SUINT a</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00041">undefined.txt:41</a></div></div>
<div class="ttc" id="astruct_d_v_d_subtitle_context_html"><div class="ttname"><a href="struct_d_v_d_subtitle_context.html">DVDSubtitleContext</a></div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00029">dvdsubenc.c:29</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga9235aa94caef10933f1436929ae15903"><div class="ttname"><a href="group__lavc__core.html#ga9235aa94caef10933f1436929ae15903">AV_SUBTITLE_FLAG_FORCED</a></div><div class="ttdeci">#define AV_SUBTITLE_FLAG_FORCED</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02657">avcodec.h:2657</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gga828218dcb8874ab2c5af8d486c365421a0e577aa36b52d777c6ec5bef8625dde4"><div class="ttname"><a href="group__lavc__core.html#gga828218dcb8874ab2c5af8d486c365421a0e577aa36b52d777c6ec5bef8625dde4">SUBTITLE_BITMAP</a></div><div class="ttdeci">@ SUBTITLE_BITMAP</div><div class="ttdoc">A bitmap, pict will be set.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02642">avcodec.h:2642</a></div></div>
<div class="ttc" id="abprint_8h_html"><div class="ttname"><a href="bprint_8h.html">bprint.h</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_ac827412999501976799d7bde31a0394e"><div class="ttname"><a href="dvdsubenc_8c.html#ac827412999501976799d7bde31a0394e">dvd_encode_rle</a></div><div class="ttdeci">static void dvd_encode_rle(uint8_t **pq, const uint8_t *bitmap, int linesize, int w, int h, const int cmap[256])</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00045">dvdsubenc.c:45</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_ab54cd8f19f830b9f034134744feb54c4"><div class="ttname"><a href="dvdsubenc_8c.html#ab54cd8f19f830b9f034134744feb54c4">color_distance</a></div><div class="ttdeci">static int color_distance(uint32_t a, uint32_t b)</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00098">dvdsubenc.c:98</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_a18bbe716f5be6adbd2150139244c0262"><div class="ttname"><a href="dvdsubenc_8c.html#a18bbe716f5be6adbd2150139244c0262">SE</a></div><div class="ttdeci">#define SE</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00496">dvdsubenc.c:496</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_af8255c6cbfe00359f4abe9b8a35f56bf"><div class="ttname"><a href="dvdsubenc_8c.html#af8255c6cbfe00359f4abe9b8a35f56bf">ff_dvdsub_encoder</a></div><div class="ttdeci">AVCodec ff_dvdsub_encoder</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00510">dvdsubenc.c:510</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="aattributes_8h_html_a934ff195492486f0f9d22770103e757b"><div class="ttname"><a href="attributes_8h.html#a934ff195492486f0f9d22770103e757b">av_uninit</a></div><div class="ttdeci">#define av_uninit(x)</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00156">attributes.h:156</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_abe964316aaaa61967b012efdcced79c4"><div class="ttname"><a href="struct_a_v_codec_context.html#abe964316aaaa61967b012efdcced79c4">AVCodecContext::extradata</a></div><div class="ttdeci">uint8_t * extradata</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00627">avcodec.h:627</a></div></div>
<div class="ttc" id="abprint_8c_html_a123a83f3ad2f3c370ed18592d0299fd6"><div class="ttname"><a href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a></div><div class="ttdeci">void av_bprintf(AVBPrint *buf, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00094">bprint.c:94</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_a424c595879a2c240345b7997ff77a179"><div class="ttname"><a href="dvdsubenc_8c.html#a424c595879a2c240345b7997ff77a179">dvdsub_init</a></div><div class="ttdeci">static int dvdsub_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00450">dvdsubenc.c:450</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaaf38f6d994f5a85854ef47fd98fa6e9a"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaaf38f6d994f5a85854ef47fd98fa6e9a">av_calloc</a></div><div class="ttdeci">void * av_calloc(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00245">mem.c:245</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a5837cafc419c2b5ecdb1dfa330675d13"><div class="ttname"><a href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_DISABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00084">internal.h:84</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a079eab092887563f2bef9106c6120089"><div class="ttname"><a href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a></div><div class="ttdeci">#define av_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00034">tableprint_vlc.h:34</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a></div><div class="ttdeci">@ AV_OPT_TYPE_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00242">opt.h:242</a></div></div>
<div class="ttc" id="abytestream_8h_html"><div class="ttname"><a href="bytestream_8h.html">bytestream.h</a></div></div>
<div class="ttc" id="anamespaceconvert__header_html_ae1e061c0db8a47f53e1f3de5e371872e"><div class="ttname"><a href="namespaceconvert__header.html#ae1e061c0db8a47f53e1f3de5e371872e">convert_header.str</a></div><div class="ttdeci">string str</div><div class="ttdef"><b>Definition:</b> <a href="convert__header_8py_source.html#l00020">convert_header.py:20</a></div></div>
<div class="ttc" id="aimgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="avp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ga3a867b6180ddad1e0c382ef0c5940b8e"><div class="ttname"><a href="group__lavu__picture.html#ga3a867b6180ddad1e0c382ef0c5940b8e">av_image_check_size</a></div><div class="ttdeci">int av_image_check_size(unsigned int w, unsigned int h, int log_offset, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="imgutils_8c_source.html#l00317">imgutils.c:317</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afadddce95ad3b690dd38644b458b96c4">AV_OPT_TYPE_STRING</a></div><div class="ttdeci">@ AV_OPT_TYPE_STRING</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00229">opt.h:229</a></div></div>
<div class="ttc" id="advdsubenc_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="dvdsubenc_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="dvdsubenc_8c_source.html#l00495">dvdsubenc.c:495</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
