<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavfilter/vf_normalize.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_e1bd69597e95623f2084619f16269321.html">libavfilter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">vf_normalize.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="vf__normalize_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2017 Richard Ling</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * Normalize RGB video (aka histogram stretching, contrast stretching).</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * See: https://en.wikipedia.org/wiki/Normalization_(image_processing)</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * For each channel of each frame, the filter computes the input range and maps</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * it linearly to the user-specified output range. The output range defaults</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * to the full dynamic range from pure black to pure white.</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * Naively maximising the dynamic range of each frame of video in isolation</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * may cause flickering (rapid changes in brightness of static objects in the</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * scene) when small dark or bright objects enter or leave the scene. This</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * filter can apply temporal smoothing to the input range to reduce flickering.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * Temporal smoothing is similar to the auto-exposure (automatic gain control)</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * on a video camera, which performs the same function; and, like a video</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * camera, it may cause a period of over- or under-exposure of the video.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * The filter can normalize the R,G,B channels independently, which may cause</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * color shifting, or link them together as a single channel, which prevents</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * color shifting. More precisely, linked normalization preserves hue (as it&#39;s</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> * defined in HSV/HSL color spaces) while independent normalization does not.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * Independent normalization can be used to remove color casts, such as the</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> * blue cast from underwater video, restoring more natural colors. The filter</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> * can also combine independent and linked normalization in any ratio.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> * Finally the overall strength of the filter can be adjusted, from no effect</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * to full normalization.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> * The 5 AVOptions are:</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> *   blackpt,   Colors which define the output range. The minimum input value</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> *   whitept    is mapped to the blackpt. The maximum input value is mapped to</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> *              the whitept. The defaults are black and white respectively.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> *              Specifying white for blackpt and black for whitept will give</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> *              color-inverted, normalized video. Shades of grey can be used</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> *              to reduce the dynamic range (contrast). Specifying saturated</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> *              colors here can create some interesting effects.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> *   smoothing  The amount of temporal smoothing, expressed in frames (&gt;=0).</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> *              the minimum and maximum input values of each channel are</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> *              smoothed using a rolling average over the current frame and</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> *              that many previous frames of video.  Defaults to 0 (no temporal</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> *              smoothing).</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *   independence</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> *              Controls the ratio of independent (color shifting) channel</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> *              normalization to linked (color preserving) normalization. 0.0</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> *              is fully linked, 1.0 is fully independent. Defaults to fully</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> *              independent.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> *   strength   Overall strength of the filter. 1.0 is full strength. 0.0 is</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> *              a rather expensive no-op. Values in between can give a gentle</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> *              boost to low-contrast video without creating an artificial</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> *              over-processed look. The default is full strength.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="intreadwrite_8h.html">libavutil/intreadwrite.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixdesc_8h.html">libavutil/pixdesc.h</a>&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avfilter_8h.html">avfilter.h</a>&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="drawutils_8h.html">drawutils.h</a>&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="formats_8h.html">formats.h</a>&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="video_8h.html">video.h</a>&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="struct_normalize_history.html">   85</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_normalize_history.html">NormalizeHistory</a> {</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="struct_normalize_history.html#a6473e3d599a75a877bdc5edf5dcaf8b7">   86</a></span>&#160;    uint16_t *<a class="code" href="struct_normalize_history.html#a6473e3d599a75a877bdc5edf5dcaf8b7">history</a>;      <span class="comment">// History entries.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_normalize_history.html#ab7b18b21861d1073c17b2256bbd6466c">   87</a></span>&#160;    uint64_t <a class="code" href="struct_normalize_history.html#ab7b18b21861d1073c17b2256bbd6466c">history_sum</a>;   <span class="comment">// Sum of history entries.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a75bbfb92dc3114cb359b665b247d85ab">   88</a></span>&#160;} <a class="code" href="vf__normalize_8c.html#a75bbfb92dc3114cb359b665b247d85ab">NormalizeHistory</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct_normalize_local.html">   90</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_normalize_local.html">NormalizeLocal</a> {</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct_normalize_local.html#aa09b75848fe5d5e8c36d62a15765a8e5">   91</a></span>&#160;    uint16_t <a class="code" href="struct_normalize_local.html#aa09b75848fe5d5e8c36d62a15765a8e5">in</a>;    <span class="comment">// Original input byte value for this frame.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_normalize_local.html#af057ad48834a41ba3912389f791e5b5d">   92</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_normalize_local.html#af057ad48834a41ba3912389f791e5b5d">smoothed</a>; <span class="comment">// Smoothed input value [0,255].</span></div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="struct_normalize_local.html#aecf0ad4367be661a1254f2ba3f9fad10">   93</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_normalize_local.html#aecf0ad4367be661a1254f2ba3f9fad10">out</a>;      <span class="comment">// Output value [0,255]</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#ae2cfe94356f5bb7ebbf9d337ab28e5bc">   94</a></span>&#160;} <a class="code" href="vf__normalize_8c.html#ae2cfe94356f5bb7ebbf9d337ab28e5bc">NormalizeLocal</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="struct_normalize_context.html">   96</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_normalize_context.html">NormalizeContext</a> {</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#af270a5e1b0903517037fc97ef9cebb0e">   97</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> *<span class="keyword">class</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// Storage for the corresponding AVOptions</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a4f947a988c92c8633c52214fd5ffba99">  100</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_normalize_context.html#a4f947a988c92c8633c52214fd5ffba99">blackpt</a>[4];</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#aec9d75284dd9df402e1c984a3e6242aa">  101</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_normalize_context.html#aec9d75284dd9df402e1c984a3e6242aa">whitept</a>[4];</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a298a6f146010ee61e8dba6065f9cbda7">  102</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_normalize_context.html#a298a6f146010ee61e8dba6065f9cbda7">smoothing</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a7ac67b9895e77e6a0b4e03a09ac28f74">  103</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_normalize_context.html#a7ac67b9895e77e6a0b4e03a09ac28f74">independence</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a375292b07fbf849b4212fb6e49d07673">  104</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_normalize_context.html#a375292b07fbf849b4212fb6e49d07673">strength</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a4b9a50cf668c8739aec57f8acda581cf">  106</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_normalize_context.html#a4b9a50cf668c8739aec57f8acda581cf">co</a>[4];      <span class="comment">// Offsets to R,G,B,A bytes respectively in each pixel</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a79e417d91dcdee79bc1a1e0f36804aea">  107</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_normalize_context.html#a79e417d91dcdee79bc1a1e0f36804aea">depth</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a4634b702d59290ff66af59cd55020f32">  108</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_normalize_context.html#a4634b702d59290ff66af59cd55020f32">sblackpt</a>[4];</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#af5483cc1a75e7e0452d481b9d2b1364e">  109</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_normalize_context.html#af5483cc1a75e7e0452d481b9d2b1364e">swhitept</a>[4];</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a22ca531c2e3022b7033d3dd42d6d3bfb">  110</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_normalize_context.html#a22ca531c2e3022b7033d3dd42d6d3bfb">num_components</a>; <span class="comment">// Number of components in the pixel format</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#ad8216bc6cabed9ad74e4ba8630cf18f7">  111</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_normalize_context.html#ad8216bc6cabed9ad74e4ba8630cf18f7">step</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#ad728d8a1648a618fba1f873d0addd897">  112</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_normalize_context.html#ad728d8a1648a618fba1f873d0addd897">history_len</a>;    <span class="comment">// Number of frames to average; based on smoothing factor</span></div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a30c586011e109b0c53760b68b409e3fb">  113</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_normalize_context.html#a30c586011e109b0c53760b68b409e3fb">frame_num</a>;      <span class="comment">// Increments on each frame, starting from 0.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// Per-extremum, per-channel history, for temporal smoothing.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#a27d21cb400b7dcc675513aa3796212c7">  116</a></span>&#160;    <a class="code" href="struct_normalize_history.html">NormalizeHistory</a> <a class="code" href="struct_normalize_context.html#a27d21cb400b7dcc675513aa3796212c7">min</a>[3], <a class="code" href="struct_normalize_context.html#af466db3b42fd0b5ed625f0bcf9aa8142">max</a>[3];           <span class="comment">// Min and max for each channel in {R,G,B}.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#ae31430869d1db6ae3b2277acfe171fb3">  117</a></span>&#160;    uint16_t *<a class="code" href="struct_normalize_context.html#ae31430869d1db6ae3b2277acfe171fb3">history_mem</a>;       <span class="comment">// Single allocation for above history entries</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#abc6623876ad8433ce78745d8c53501da">  119</a></span>&#160;    uint16_t <a class="code" href="struct_normalize_context.html#abc6623876ad8433ce78745d8c53501da">lut</a>[3][65536];    <span class="comment">// Lookup table</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#ae3566e1af5e27cce195e189b3cdcab9e">  121</a></span>&#160;    <a class="code" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> (*<a class="code" href="struct_normalize_context.html#ae3566e1af5e27cce195e189b3cdcab9e">find_min_max</a>)(<span class="keyword">struct </span><a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="struct_normalize_context.html#a27d21cb400b7dcc675513aa3796212c7">min</a>[3], <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="struct_normalize_context.html#af466db3b42fd0b5ed625f0bcf9aa8142">max</a>[3]);</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="struct_normalize_context.html#ac573a1cc5d80a70ef52a08f0b718c02f">  122</a></span>&#160;    <a class="code" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> (*<a class="code" href="struct_normalize_context.html#ac573a1cc5d80a70ef52a08f0b718c02f">process</a>)(<span class="keyword">struct </span><a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>);</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a6c6ae84bcd033597799fc41efe40c769">  123</a></span>&#160;} <a class="code" href="vf__normalize_8c.html#a6c6ae84bcd033597799fc41efe40c769">NormalizeContext</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#ad12dce0a7bf9d908b172a28155b3d261">  125</a></span>&#160;<span class="preprocessor">#define OFFSET(x) offsetof(NormalizeContext, x)</span></div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">  126</a></span>&#160;<span class="preprocessor">#define FLAGS AV_OPT_FLAG_VIDEO_PARAM|AV_OPT_FLAG_FILTERING_PARAM</span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a1fe5aefea987526a38f5cbbe1e7f2469">  127</a></span>&#160;<span class="preprocessor">#define FLAGSR AV_OPT_FLAG_VIDEO_PARAM|AV_OPT_FLAG_FILTERING_PARAM|AV_OPT_FLAG_RUNTIME_PARAM</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a387e00c3cdd27c5b2dd85d802d330e30">  129</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="vf__normalize_8c.html#a387e00c3cdd27c5b2dd85d802d330e30">normalize_options</a>[] = {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    { <span class="stringliteral">&quot;blackpt&quot;</span>,  <span class="stringliteral">&quot;output color to which darkest input color is mapped&quot;</span>,  <a class="code" href="vf__normalize_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_normalize_context.html#a4f947a988c92c8633c52214fd5ffba99">blackpt</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afdcd13cbd184901b05e27595e647fadc">AV_OPT_TYPE_COLOR</a>, { .str = <span class="stringliteral">&quot;black&quot;</span> }, 0, 0, <a class="code" href="vf__normalize_8c.html#a1fe5aefea987526a38f5cbbe1e7f2469">FLAGSR</a> },</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    { <span class="stringliteral">&quot;whitept&quot;</span>,  <span class="stringliteral">&quot;output color to which brightest input color is mapped&quot;</span>,  <a class="code" href="vf__normalize_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_normalize_context.html#aec9d75284dd9df402e1c984a3e6242aa">whitept</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afdcd13cbd184901b05e27595e647fadc">AV_OPT_TYPE_COLOR</a>, { .str = <span class="stringliteral">&quot;white&quot;</span> }, 0, 0, <a class="code" href="vf__normalize_8c.html#a1fe5aefea987526a38f5cbbe1e7f2469">FLAGSR</a> },</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    { <span class="stringliteral">&quot;smoothing&quot;</span>,  <span class="stringliteral">&quot;amount of temporal smoothing of the input range, to reduce flicker&quot;</span>, <a class="code" href="vf__normalize_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_normalize_context.html#a298a6f146010ee61e8dba6065f9cbda7">smoothing</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, {.i64=0}, 0, INT_MAX/8, <a class="code" href="vf__normalize_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a> },</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    { <span class="stringliteral">&quot;independence&quot;</span>, <span class="stringliteral">&quot;proportion of independent to linked channel normalization&quot;</span>, <a class="code" href="vf__normalize_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_normalize_context.html#a7ac67b9895e77e6a0b4e03a09ac28f74">independence</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a>, {.dbl=1.0}, 0.0, 1.0, <a class="code" href="vf__normalize_8c.html#a1fe5aefea987526a38f5cbbe1e7f2469">FLAGSR</a> },</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    { <span class="stringliteral">&quot;strength&quot;</span>, <span class="stringliteral">&quot;strength of filter, from no effect to full normalization&quot;</span>, <a class="code" href="vf__normalize_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a>(<a class="code" href="struct_normalize_context.html#a375292b07fbf849b4212fb6e49d07673">strength</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a>, {.dbl=1.0}, 0.0, 1.0, <a class="code" href="vf__normalize_8c.html#a1fe5aefea987526a38f5cbbe1e7f2469">FLAGSR</a> },</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;};</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a98d3ace1c572413ee2169484351c177b">  138</a></span>&#160;<a class="code" href="vf__normalize_8c.html#a98d3ace1c572413ee2169484351c177b">AVFILTER_DEFINE_CLASS</a>(<a class="code" href="namespacenormalize.html">normalize</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#aed54204b8ac9c58480c9cf7d54826b07">  140</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#aed54204b8ac9c58480c9cf7d54826b07">find_min_max</a>(<a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[3], <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[3])</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a> = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a> = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]];</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;height; y++) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *inp = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[0];</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;width; x++) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].in = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]]);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].in = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]]);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            inp += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;step;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a52799b226340bdeb1008b00df4186643">  156</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#a52799b226340bdeb1008b00df4186643">process</a>(<a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;height; y++) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *inp = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[0];</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *outp = <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[0] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[0];</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;width; x++) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                outp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>][inp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]]];</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_components == 4)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <span class="comment">// Copy alpha as-is.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                outp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[3]] = inp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[3]];</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            inp += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;step;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            outp += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;step;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a1128ded6baef49acbae09cf58acfd7b4">  173</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#a1128ded6baef49acbae09cf58acfd7b4">find_min_max_planar</a>(<a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[3], <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[3])</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[0].in = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[0].in = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[2][0];</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[1].in = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[1].in = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0][0];</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[2].in = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[2].in = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[1][0];</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;height; y++) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *inrp = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[2] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[2];</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ingp = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[0];</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *inbp = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[1] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[1];</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;width; x++) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[0].in = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[0].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inrp[x]);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[0].in = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[0].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inrp[x]);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[1].in = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[1].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, ingp[x]);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[1].in = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[1].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, ingp[x]);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[2].in = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[2].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inbp[x]);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[2].in = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[2].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inbp[x]);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a4a43152c5e8b9f8bbd490026421f2ac0">  193</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#a4a43152c5e8b9f8bbd490026421f2ac0">process_planar</a>(<a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;height; y++) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *inrp = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[2] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[2];</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ingp = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[0];</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *inbp = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[1] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[1];</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *inap = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[3] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[3];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *outrp = <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[2] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[2];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *outgp = <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[0] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[0];</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *outbp = <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[1] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[1];</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *outap = <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[3] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[3];</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;width; x++) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            outrp[x] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[0][inrp[x]];</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            outgp[x] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[1][ingp[x]];</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            outbp[x] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[2][inbp[x]];</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_components == 4)</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                outap[x] = inap[x];</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#acd69d1c5a126bed20f715e483fcb8754">  214</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#acd69d1c5a126bed20f715e483fcb8754">find_min_max_16</a>(<a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[3], <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[3])</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a> = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a> = <a class="code" href="intreadwrite_8h.html#abba39129956db1c2c54c984819b9356e">AV_RN16</a>(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0] + 2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;height; y++) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        uint16_t *inp = (uint16_t *)(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[0]);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;width; x++) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].in = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]]);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].in = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]]);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            inp += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;step;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a8bae2a4bd75e31c7077a3816464e8b03">  230</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#a8bae2a4bd75e31c7077a3816464e8b03">process_16</a>(<a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;height; y++) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        uint16_t *inp  = (uint16_t *)(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[0]);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        uint16_t *outp = (uint16_t *)(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[0] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[0]);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;width; x++) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                outp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>][inp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>]]];</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_components == 4)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="comment">// Copy alpha as-is.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                outp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[3]] = inp[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co[3]];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            inp += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;step;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            outp += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;step;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a964fd415c79b7d1e05394f52bf1ce2e6">  247</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#a964fd415c79b7d1e05394f52bf1ce2e6">find_min_max_planar_16</a>(<a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[3], <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[3])</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[0].in = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[0].in = <a class="code" href="intreadwrite_8h.html#abba39129956db1c2c54c984819b9356e">AV_RN16</a>(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[2]);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[1].in = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[1].in = <a class="code" href="intreadwrite_8h.html#abba39129956db1c2c54c984819b9356e">AV_RN16</a>(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0]);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[2].in = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[2].in = <a class="code" href="intreadwrite_8h.html#abba39129956db1c2c54c984819b9356e">AV_RN16</a>(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[1]);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;height; y++) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        uint16_t *inrp = (uint16_t *)(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[2] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[2]);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        uint16_t *ingp = (uint16_t *)(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[0]);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        uint16_t *inbp = (uint16_t *)(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[1] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[1]);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;width; x++) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[0].in = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[0].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inrp[x]);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[0].in = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[0].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inrp[x]);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[1].in = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[1].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, ingp[x]);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[1].in = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[1].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, ingp[x]);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[2].in = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[2].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inbp[x]);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[2].in = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[2].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, inbp[x]);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#ac6ed8ec8c1c86eb4693cdee886551211">  267</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#ac6ed8ec8c1c86eb4693cdee886551211">process_planar_16</a>(<a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;{</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;height; y++) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        uint16_t *inrp  = (uint16_t *)(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[2] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[2]);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        uint16_t *ingp  = (uint16_t *)(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[0] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[0]);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        uint16_t *inbp  = (uint16_t *)(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[1] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[1]);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        uint16_t *inap  = (uint16_t *)(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;data[3] + y * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;linesize[3]);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        uint16_t *outrp = (uint16_t *)(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[2] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[2]);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        uint16_t *outgp = (uint16_t *)(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[0] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[0]);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        uint16_t *outbp = (uint16_t *)(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[1] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[1]);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        uint16_t *outap = (uint16_t *)(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;data[3] + y * <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;linesize[3]);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;width; x++) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            outrp[x] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[0][inrp[x]];</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            outgp[x] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[1][ingp[x]];</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            outbp[x] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[2][inbp[x]];</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_components == 4)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                outap[x] = inap[x];</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">// This function is the main guts of the filter. Normalizes the input frame</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">// into the output frame. The frames are known to have the same dimensions</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">// and pixel format.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a271b174061d4ba8e443056ae6f927529">  291</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#a271b174061d4ba8e443056ae6f927529">normalize</a>(<a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// Per-extremum, per-channel local variables.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="struct_normalize_local.html">NormalizeLocal</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[3], <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[3];   <span class="comment">// Min and max for each channel in {R,G,B}.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordtype">float</span> rgb_min_smoothed; <span class="comment">// Min input range for linked normalization</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">float</span> rgb_max_smoothed; <span class="comment">// Max input range for linked normalization</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// First, scan the input frame to find, for each channel, the minimum</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// (min.in) and maximum (max.in) values present in the channel.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;find_min_max(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// Next, for each channel, push min.in and max.in into their respective</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// histories, to determine the min.smoothed and max.smoothed for this frame.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordtype">int</span> history_idx = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_num % <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_len;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">// Assume the history is not yet full; num_history_vals is the number</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment">// of frames received so far including the current frame.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordtype">int</span> num_history_vals = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_num + 1;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_num &gt;= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_len) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="comment">//The history is full; drop oldest value and cap num_history_vals.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history_sum -= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history[history_idx];</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history_sum -= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history[history_idx];</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            num_history_vals = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_len;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="comment">// For each extremum, update history_sum and calculate smoothed value</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="comment">// as the rolling average of the history entries.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history_sum += (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history[history_idx] = <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].in);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history_sum / (float)num_history_vals;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history_sum += (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history[history_idx] = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].in);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history_sum / (float)num_history_vals;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// Determine the input range for linked normalization. This is simply the</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// minimum of the per-channel minimums, and the maximum of the per-channel</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// maximums.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    rgb_min_smoothed = <a class="code" href="common_8h.html#af6afbffa12562b076c34055bdcb3ad65">FFMIN3</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[0].smoothed, <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[1].smoothed, <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[2].smoothed);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    rgb_max_smoothed = <a class="code" href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[0].smoothed, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[1].smoothed, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[2].smoothed);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// Now, process each channel to determine the input and output range and</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// build the lookup tables.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordtype">int</span> in_val;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="comment">// Adjust the input range for this channel [min.smoothed,max.smoothed]</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="comment">// by mixing in the correct proportion of the linked normalization</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="comment">// input range [rgb_min_smoothed,rgb_max_smoothed].</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed = (<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed  *         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;independence)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                        + (rgb_min_smoothed * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;independence));</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed = (<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed  *         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;independence)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                        + (rgb_max_smoothed * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;independence));</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="comment">// Calculate the output range [min.out,max.out] as a ratio of the full-</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="comment">// strength output range [blackpt,whitept] and the original input range</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="comment">// [min.in,max.in], based on the user-specified filter strength.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].out = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sblackpt[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>] *        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;strength)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                   + (<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>     * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;strength));</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].out = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;swhitept[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>] *        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;strength)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                   + (<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>     * (1.0<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;strength));</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="comment">// Now, build a lookup table which linearly maps the adjusted input range</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="comment">// [min.smoothed,max.smoothed] to the output range [min.out,max.out].</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="comment">// Perform the linear interpolation for each x:</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="comment">//     lut[x] = (int)(float(x - min.smoothed) * scale + max.out + 0.5)</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="comment">// where scale = (max.out - min.out) / (max.smoothed - min.smoothed)</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed == <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="comment">// There is no dynamic range to expand. No mapping for this channel.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">for</span> (in_val = <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>; in_val &lt;= <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].in; in_val++)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>][in_val] = <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].out;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="comment">// We must set lookup values for all values in the original input</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="comment">// range [min.in,max.in]. Since the original input range may be</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="comment">// larger than [min.smoothed,max.smoothed], some output values may</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="comment">// fall outside the [0,255] dynamic range. We need to clamp them.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordtype">float</span> scale = (<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].out - <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].out) / (<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed - <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordflow">for</span> (in_val = <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>; in_val &lt;= <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].in; in_val++) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                <span class="keywordtype">int</span> out_val = (in_val - <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].smoothed) * scale + <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> + 0.5<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                out_val = <a class="code" href="common_8h.html#a867dba37c785d27d42b272aa968efda8">av_clip_uintp2_c</a>(out_val, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;depth);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lut[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>][in_val] = out_val;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// Finally, process the pixels of the input frame using the lookup tables.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;process(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_num++;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">// Now we define all the functions accessible from the ff_vf_normalize class,</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">// which is ffmpeg&#39;s interface to our filter.  See doc/filter_design.txt and</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">// doc/writing_filters.txt for descriptions of what these interface functions</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">// are expected to do.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">// Set the pixel formats that our filter supports. We should be able to process</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">// any 8-bit RGB formats. 16-bit support might be useful one day.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">  391</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vf__normalize_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> pixel_fmts[] = {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a107eadfcfe8c9fc751289eeb7744a6d3">AV_PIX_FMT_RGB24</a>,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5acc582ddd3f60d4cd3ddffb48116fb154">AV_PIX_FMT_BGR24</a>,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a375034d667a39133f8012069098a45ca">AV_PIX_FMT_ARGB</a>,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a7ffbd399b88a48196e3cba416eec4dac">AV_PIX_FMT_RGBA</a>,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5110926011394bc4f6066145314a5330">AV_PIX_FMT_ABGR</a>,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a41c64e3682529dd5caca6f7d5d3c19c7">AV_PIX_FMT_BGRA</a>,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ad998d9449c5c948d9b9e5078d38f4fa2">AV_PIX_FMT_0RGB</a>,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ab9fcc01ba1689d75e4bc2080a347e1d0">AV_PIX_FMT_RGB0</a>,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a698dbf894ce405d3775c6cf440debf65">AV_PIX_FMT_0BGR</a>,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a258e7e59a7f956604b743c14032906b0">AV_PIX_FMT_BGR0</a>,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <a class="code" href="pixfmt_8h.html#a8aa3ddf224cba014fb9eac404498046a">AV_PIX_FMT_RGB48</a>,  <a class="code" href="pixfmt_8h.html#a45b2138ca7fb038237736bb4ab1cdeb6">AV_PIX_FMT_BGR48</a>,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="pixfmt_8h.html#a79f0cce2e796a9e51f75fea1695c9160">AV_PIX_FMT_RGBA64</a>, <a class="code" href="pixfmt_8h.html#acc8e582bacbe0fe0072597140ee7b219">AV_PIX_FMT_BGRA64</a>,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ad000ae47faa5fbe8d4b3b375151694ef">AV_PIX_FMT_GBRP</a>, <a class="code" href="pixfmt_8h.html#a35c39789390ba2489026c7ecdbfafba7">AV_PIX_FMT_GBRP9</a>, <a class="code" href="pixfmt_8h.html#a65c2f27287363d45e9e1da64bf569ebd">AV_PIX_FMT_GBRP10</a>,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="pixfmt_8h.html#a7de060139e9fd1ba12510b9e14e1e259">AV_PIX_FMT_GBRP12</a>, <a class="code" href="pixfmt_8h.html#ae081a48741bb30a5028a1745a5ade38e">AV_PIX_FMT_GBRP14</a>, <a class="code" href="pixfmt_8h.html#ad876c695f2d5ddc2ec4ec8823120dd16">AV_PIX_FMT_GBRP16</a>,</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a87ab52104aeac9b13a39da1a09835bbc">AV_PIX_FMT_GBRAP</a>, <a class="code" href="pixfmt_8h.html#ad02e8b710fc2142d177bbeacf109bfd1">AV_PIX_FMT_GBRAP10</a>, <a class="code" href="pixfmt_8h.html#a05f1c9489f15319fd76ba9392cb91302">AV_PIX_FMT_GBRAP12</a>, <a class="code" href="pixfmt_8h.html#a3362ea3b30713088111d51a74c10d79b">AV_PIX_FMT_GBRAP16</a>,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    };</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// According to filter_design.txt, using ff_set_common_formats() this way</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// ensures the pixel formats of the input and output will be the same. That</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// saves a bit of effort possibly needing to handle format conversions.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="struct_a_v_filter_formats.html">AVFilterFormats</a> *<a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a> = <a class="code" href="formats_8c.html#a43e709e9689273a94a5edc40d1cb5aed">ff_make_format_list</a>(pixel_fmts);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a>)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="formats_8c.html#a3ea436a8d465066eecdfb2ff513ff504">ff_set_common_formats</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">// At this point we know the pixel format used for both input and output.  We</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">// can also access the frame rate of the input video and allocate some memory</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">// appropriately</span></div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a6349dbef489cb1be3b41b8aeffdd2a21">  423</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vf__normalize_8c.html#a6349dbef489cb1be3b41b8aeffdd2a21">config_input</a>(<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst-&gt;priv;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// Store offsets to R,G,B,A bytes respectively in each pixel</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;format);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>, scale;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="drawutils_8c.html#a7e1def46093af0284469fe56a5d76ed6">ff_fill_rgba_map</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;co, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;format);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;depth = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;comp[0].depth;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    scale = 1 &lt;&lt; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;depth - 8);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;num_components = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;nb_components;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;step = <a class="code" href="pixdesc_8c.html#a89cf35c5ef18c9e996c7784e1a893b9e">av_get_padded_bits_per_pixel</a>(<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>) &gt;&gt; (3 + (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;depth &gt; 8));</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Convert smoothing value to history_len (a count of frames to average,</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// must be at least 1).  Currently this is a direct assignment, but the</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// smoothing value was originally envisaged as a number of seconds.  In</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// future it would be nice to set history_len using a number of seconds,</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// but VFR video is currently an obstacle to doing so.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_len = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;smoothing + 1;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// Allocate the history buffers -- there are 6 -- one for each extrema.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// s-&gt;smoothing is limited to INT_MAX/8, so that (s-&gt;history_len * 6)</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// can&#39;t overflow on 32bit causing a too-small allocation.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_mem = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_len * 6 * <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_mem));</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_mem == <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = 0; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> &lt; 3; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>++) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_mem + (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>*2)   * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_len;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>].history = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_mem + (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>*2+1) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_len;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sblackpt[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>] = scale * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;blackpt[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>] + (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;blackpt[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>] &amp; (1 &lt;&lt; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;depth - 8)));</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;swhitept[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>] = scale * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;whitept[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>] + (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;whitept[<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>] &amp; (1 &lt;&lt; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;depth - 8)));</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a> = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;flags &amp; <a class="code" href="pixdesc_8h.html#ab2dcf0e479980cad6c8477d5a53a3638">AV_PIX_FMT_FLAG_PLANAR</a>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;depth &lt;= 8) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;find_min_max = <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a> ? <a class="code" href="vf__normalize_8c.html#a1128ded6baef49acbae09cf58acfd7b4">find_min_max_planar</a> : <a class="code" href="vf__normalize_8c.html#aed54204b8ac9c58480c9cf7d54826b07">find_min_max</a>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;process = <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>? <a class="code" href="vf__normalize_8c.html#a4a43152c5e8b9f8bbd490026421f2ac0">process_planar</a> : <a class="code" href="vf__normalize_8c.html#a52799b226340bdeb1008b00df4186643">process</a>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;find_min_max = <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a> ? <a class="code" href="vf__normalize_8c.html#a964fd415c79b7d1e05394f52bf1ce2e6">find_min_max_planar_16</a> : <a class="code" href="vf__normalize_8c.html#acd69d1c5a126bed20f715e483fcb8754">find_min_max_16</a>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;process = <a class="code" href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a>? <a class="code" href="vf__normalize_8c.html#ac6ed8ec8c1c86eb4693cdee886551211">process_planar_16</a> : <a class="code" href="vf__normalize_8c.html#a8bae2a4bd75e31c7077a3816464e8b03">process_16</a>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">// Free any memory allocations here</span></div>
<div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#abbead6cde1da3e72ce200578c426f1e6">  469</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="vf__normalize_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;{</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_mem);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">// This function is pretty much standard from doc/writing_filters.txt.  It</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">// tries to do in-place filtering where possible, only allocating a new output</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">// frame when absolutely necessary.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a9056c701b381ba84a4cebc5eb7c9d5b9">  479</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vf__normalize_8c.html#a9056c701b381ba84a4cebc5eb7c9d5b9">filter_frame</a>(<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *outlink = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;outputs[0];</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="struct_normalize_context.html">NormalizeContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;priv;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// Set &#39;direct&#39; if we can modify the input frame in-place.  Otherwise we</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// need to retrieve a new frame from the output link.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a> = <a class="code" href="group__lavu__frame.html#ga3ba755bada5c3c8883361ef43fb5fb7a">av_frame_is_writable</a>(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>) &amp;&amp; !<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;is_disabled;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a>) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = <a class="code" href="video_8c.html#a7f0f699d7689ef551622672dcd39a96a">ff_get_video_buffer</a>(outlink, outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">w</a>, outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">h</a>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <a class="code" href="group__lavu__frame.html#gab9b275b114ace0db95c5796bc71f3012">av_frame_copy_props</a>(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// Now we&#39;ve got the input and output frames (which may be the same frame)</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// perform the filtering with our custom function.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="vf__normalize_8c.html#a271b174061d4ba8e443056ae6f927529">normalize</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;is_disabled) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="avfilter_8c.html#a65d6e9755eadf69367843dfc738143b4">ff_filter_frame</a>(outlink, <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a>)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="avfilter_8c.html#a65d6e9755eadf69367843dfc738143b4">ff_filter_frame</a>(outlink, <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44">  515</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_filter_pad.html">AVFilterPad</a> <a class="code" href="vf__normalize_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44">inputs</a>[] = {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        .<a class="code" href="struct_a_v_filter_pad.html#afc112061a6035639934e0135aab7d425">name</a>         = <span class="stringliteral">&quot;default&quot;</span>,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        .type         = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        .filter_frame = <a class="code" href="vf__normalize_8c.html#a9056c701b381ba84a4cebc5eb7c9d5b9">filter_frame</a>,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        .config_props = <a class="code" href="vf__normalize_8c.html#a6349dbef489cb1be3b41b8aeffdd2a21">config_input</a>,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    },</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;};</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">  525</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_filter_pad.html">AVFilterPad</a> <a class="code" href="vf__normalize_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a>[] = {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        .<a class="code" href="struct_a_v_filter_pad.html#afc112061a6035639934e0135aab7d425">name</a> = <span class="stringliteral">&quot;default&quot;</span>,</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        .type = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    },</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;};</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="vf__normalize_8c.html#abdff1e9195324e8743bc90a3d1a92b76">  533</a></span>&#160;<a class="code" href="struct_a_v_filter.html">AVFilter</a> <a class="code" href="vf__normalize_8c.html#abdff1e9195324e8743bc90a3d1a92b76">ff_vf_normalize</a> = {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    .<a class="code" href="struct_a_v_filter.html#a28a4776f344f91055f42a4c2a1b15c0c">name</a>          = <span class="stringliteral">&quot;normalize&quot;</span>,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    .description   = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;Normalize RGB video.&quot;</span>),</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    .priv_size     = <span class="keyword">sizeof</span>(<a class="code" href="vf__normalize_8c.html#a6c6ae84bcd033597799fc41efe40c769">NormalizeContext</a>),</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    .priv_class    = &amp;normalize_class,</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    .<a class="code" href="vf__normalize_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a>        = <a class="code" href="vf__normalize_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a>,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    .<a class="code" href="vf__normalize_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a> = <a class="code" href="vf__normalize_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a>,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    .<a class="code" href="vf__normalize_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44">inputs</a>        = <a class="code" href="vf__normalize_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44">inputs</a>,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    .<a class="code" href="vf__normalize_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a>       = <a class="code" href="vf__normalize_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a>,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    .<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>         = <a class="code" href="group__lavfi.html#gae225339ad292450a5832296f58f0d424">AVFILTER_FLAG_SUPPORT_TIMELINE_INTERNAL</a>,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    .<a class="code" href="af__adenorm_8c.html#ab523542a3916784efb8a058e6252ce5d">process_command</a> = <a class="code" href="avfilter_8c.html#a6a85cce734e15b727032257a18f2b624">ff_filter_process_command</a>,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="asignature_8h_html_a12f58149bb2cdab504621ba5b390ef64"><div class="ttname"><a href="signature_8h.html#a12f58149bb2cdab504621ba5b390ef64">formats</a></div><div class="ttdeci">formats</div><div class="ttdef"><b>Definition:</b> <a href="signature_8h_source.html#l00048">signature.h:48</a></div></div>
<div class="ttc" id="avideo_8c_html_a7f0f699d7689ef551622672dcd39a96a"><div class="ttname"><a href="video_8c.html#a7f0f699d7689ef551622672dcd39a96a">ff_get_video_buffer</a></div><div class="ttdeci">AVFrame * ff_get_video_buffer(AVFilterLink *link, int w, int h)</div><div class="ttdef"><b>Definition:</b> <a href="video_8c_source.html#l00099">video.c:99</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3362ea3b30713088111d51a74c10d79b"><div class="ttname"><a href="pixfmt_8h.html#a3362ea3b30713088111d51a74c10d79b">AV_PIX_FMT_GBRAP16</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRAP16</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00421">pixfmt.h:421</a></div></div>
<div class="ttc" id="alibavfilter_2af__afir_8c_html_a2935ad4574b6b85a524d227a44e8f171"><div class="ttname"><a href="libavfilter_2af__afir_8c.html#a2935ad4574b6b85a524d227a44e8f171">direct</a></div><div class="ttdeci">static void direct(const float *in, const FFTComplex *ir, int len, float *out)</div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2af__afir_8c_source.html#l00060">af_afir.c:60</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a52799b226340bdeb1008b00df4186643"><div class="ttname"><a href="vf__normalize_8c.html#a52799b226340bdeb1008b00df4186643">process</a></div><div class="ttdeci">static void process(NormalizeContext *s, AVFrame *in, AVFrame *out)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00156">vf_normalize.c:156</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_ae31430869d1db6ae3b2277acfe171fb3"><div class="ttname"><a href="struct_normalize_context.html#ae31430869d1db6ae3b2277acfe171fb3">NormalizeContext::history_mem</a></div><div class="ttdeci">uint16_t * history_mem</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00117">vf_normalize.c:117</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="aformats_8c_html_a43e709e9689273a94a5edc40d1cb5aed"><div class="ttname"><a href="formats_8c.html#a43e709e9689273a94a5edc40d1cb5aed">ff_make_format_list</a></div><div class="ttdeci">AVFilterFormats * ff_make_format_list(const int *fmts)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00286">formats.c:286</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html"><div class="ttname"><a href="struct_a_v_filter_link.html">AVFilterLink</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00471">avfilter.h:471</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html"><div class="ttname"><a href="struct_a_v_filter_context.html">AVFilterContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00341">avfilter.h:341</a></div></div>
<div class="ttc" id="aaf__adenorm_8c_html_ab523542a3916784efb8a058e6252ce5d"><div class="ttname"><a href="af__adenorm_8c.html#ab523542a3916784efb8a058e6252ce5d">process_command</a></div><div class="ttdeci">static int process_command(AVFilterContext *ctx, const char *cmd, const char *args, char *res, int res_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="af__adenorm_8c_source.html#l00253">af_adenorm.c:253</a></div></div>
<div class="ttc" id="aavfilter_8c_html_a65d6e9755eadf69367843dfc738143b4"><div class="ttname"><a href="avfilter_8c.html#a65d6e9755eadf69367843dfc738143b4">ff_filter_frame</a></div><div class="ttdeci">int ff_filter_frame(AVFilterLink *link, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8c_source.html#l01091">avfilter.c:1091</a></div></div>
<div class="ttc" id="apixdesc_8c_html_afe0c3e8aef5173de28bbdaea4298f5f0"><div class="ttname"><a href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a></div><div class="ttdeci">const AVPixFmtDescriptor * av_pix_fmt_desc_get(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02573">pixdesc.c:2573</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a720b17cc89203cfc793b5d7e17a6ca88"><div class="ttname"><a href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a></div><div class="ttdeci">The exact code depends on how similar the blocks are and how related they are to the and needs to apply these operations to the correct inlink or outlink if there are several Macros are available to factor that when no extra processing is inlink</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00212">filter_design.txt:212</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_abba39129956db1c2c54c984819b9356e"><div class="ttname"><a href="intreadwrite_8h.html#abba39129956db1c2c54c984819b9356e">AV_RN16</a></div><div class="ttdeci">#define AV_RN16(p)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00360">intreadwrite.h:360</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="apixdesc_8h_html"><div class="ttname"><a href="pixdesc_8h.html">pixdesc.h</a></div></div>
<div class="ttc" id="acommon_8h_html_a867dba37c785d27d42b272aa968efda8"><div class="ttname"><a href="common_8h.html#a867dba37c785d27d42b272aa968efda8">av_clip_uintp2_c</a></div><div class="ttdeci">static av_always_inline av_const unsigned av_clip_uintp2_c(int a, int p)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00229">common.h:229</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a964fd415c79b7d1e05394f52bf1ce2e6"><div class="ttname"><a href="vf__normalize_8c.html#a964fd415c79b7d1e05394f52bf1ce2e6">find_min_max_planar_16</a></div><div class="ttdeci">static void find_min_max_planar_16(NormalizeContext *s, AVFrame *in, NormalizeLocal min[3], NormalizeLocal max[3])</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00247">vf_normalize.c:247</a></div></div>
<div class="ttc" id="astruct_normalize_history_html_a6473e3d599a75a877bdc5edf5dcaf8b7"><div class="ttname"><a href="struct_normalize_history.html#a6473e3d599a75a877bdc5edf5dcaf8b7">NormalizeHistory::history</a></div><div class="ttdeci">uint16_t * history</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00086">vf_normalize.c:86</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a79e417d91dcdee79bc1a1e0f36804aea"><div class="ttname"><a href="struct_normalize_context.html#a79e417d91dcdee79bc1a1e0f36804aea">NormalizeContext::depth</a></div><div class="ttdeci">int depth</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00107">vf_normalize.c:107</a></div></div>
<div class="ttc" id="astruct_a_v_filter_pad_html"><div class="ttname"><a href="struct_a_v_filter_pad.html">AVFilterPad</a></div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2internal_8h_source.html#l00054">internal.h:54</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a387e00c3cdd27c5b2dd85d802d330e30"><div class="ttname"><a href="vf__normalize_8c.html#a387e00c3cdd27c5b2dd85d802d330e30">normalize_options</a></div><div class="ttdeci">static const AVOption normalize_options[]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00129">vf_normalize.c:129</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5acc582ddd3f60d4cd3ddffb48116fb154"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5acc582ddd3f60d4cd3ddffb48116fb154">AV_PIX_FMT_BGR24</a></div><div class="ttdeci">@ AV_PIX_FMT_BGR24</div><div class="ttdoc">packed RGB 8:8:8, 24bpp, BGRBGR...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00069">pixfmt.h:69</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a41c64e3682529dd5caca6f7d5d3c19c7"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a41c64e3682529dd5caca6f7d5d3c19c7">AV_PIX_FMT_BGRA</a></div><div class="ttdeci">@ AV_PIX_FMT_BGRA</div><div class="ttdoc">packed BGRA 8:8:8:8, 32bpp, BGRABGRA...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00095">pixfmt.h:95</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00033">cuda_runtime.h:33</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a1efd10db9d097b6d27054da46e06e133"><div class="ttname"><a href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">AVFilterLink::h</a></div><div class="ttdeci">int h</div><div class="ttdoc">agreed upon image height</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00482">avfilter.h:482</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a1128ded6baef49acbae09cf58acfd7b4"><div class="ttname"><a href="vf__normalize_8c.html#a1128ded6baef49acbae09cf58acfd7b4">find_min_max_planar</a></div><div class="ttdeci">static void find_min_max_planar(NormalizeContext *s, AVFrame *in, NormalizeLocal min[3], NormalizeLocal max[3])</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00173">vf_normalize.c:173</a></div></div>
<div class="ttc" id="avideo_8h_html"><div class="ttname"><a href="video_8h.html">video.h</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_ad8216bc6cabed9ad74e4ba8630cf18f7"><div class="ttname"><a href="struct_normalize_context.html#ad8216bc6cabed9ad74e4ba8630cf18f7">NormalizeContext::step</a></div><div class="ttdeci">int step</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00111">vf_normalize.c:111</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="aformats_8h_html"><div class="ttname"><a href="formats_8h.html">formats.h</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a4a43152c5e8b9f8bbd490026421f2ac0"><div class="ttname"><a href="vf__normalize_8c.html#a4a43152c5e8b9f8bbd490026421f2ac0">process_planar</a></div><div class="ttdeci">static void process_planar(NormalizeContext *s, AVFrame *in, AVFrame *out)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00193">vf_normalize.c:193</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_af5483cc1a75e7e0452d481b9d2b1364e"><div class="ttname"><a href="struct_normalize_context.html#af5483cc1a75e7e0452d481b9d2b1364e">NormalizeContext::swhitept</a></div><div class="ttdeci">int swhitept[4]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00109">vf_normalize.c:109</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ae081a48741bb30a5028a1745a5ade38e"><div class="ttname"><a href="pixfmt_8h.html#ae081a48741bb30a5028a1745a5ade38e">AV_PIX_FMT_GBRP14</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRP14</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00417">pixfmt.h:417</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a87ab52104aeac9b13a39da1a09835bbc"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a87ab52104aeac9b13a39da1a09835bbc">AV_PIX_FMT_GBRAP</a></div><div class="ttdeci">@ AV_PIX_FMT_GBRAP</div><div class="ttdoc">planar GBRA 4:4:4:4 32bpp</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00215">pixfmt.h:215</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_ae2cfe94356f5bb7ebbf9d337ab28e5bc"><div class="ttname"><a href="vf__normalize_8c.html#ae2cfe94356f5bb7ebbf9d337ab28e5bc">NormalizeLocal</a></div><div class="ttdeci">struct NormalizeLocal NormalizeLocal</div></div>
<div class="ttc" id="apixfmt_8h_html_a65c2f27287363d45e9e1da64bf569ebd"><div class="ttname"><a href="pixfmt_8h.html#a65c2f27287363d45e9e1da64bf569ebd">AV_PIX_FMT_GBRP10</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRP10</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00415">pixfmt.h:415</a></div></div>
<div class="ttc" id="astruct_normalize_local_html_af057ad48834a41ba3912389f791e5b5d"><div class="ttname"><a href="struct_normalize_local.html#af057ad48834a41ba3912389f791e5b5d">NormalizeLocal::smoothed</a></div><div class="ttdeci">float smoothed</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00092">vf_normalize.c:92</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_ac573a1cc5d80a70ef52a08f0b718c02f"><div class="ttname"><a href="struct_normalize_context.html#ac573a1cc5d80a70ef52a08f0b718c02f">NormalizeContext::process</a></div><div class="ttdeci">void(* process)(struct NormalizeContext *s, AVFrame *in, AVFrame *out)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00122">vf_normalize.c:122</a></div></div>
<div class="ttc" id="acommon_8h_html_af6afbffa12562b076c34055bdcb3ad65"><div class="ttname"><a href="common_8h.html#af6afbffa12562b076c34055bdcb3ad65">FFMIN3</a></div><div class="ttdeci">#define FFMIN3(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00097">common.h:97</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_aec9d75284dd9df402e1c984a3e6242aa"><div class="ttname"><a href="struct_normalize_context.html#aec9d75284dd9df402e1c984a3e6242aa">NormalizeContext::whitept</a></div><div class="ttdeci">uint8_t whitept[4]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00101">vf_normalize.c:101</a></div></div>
<div class="ttc" id="astruct_normalize_history_html_ab7b18b21861d1073c17b2256bbd6466c"><div class="ttname"><a href="struct_normalize_history.html#ab7b18b21861d1073c17b2256bbd6466c">NormalizeHistory::history_sum</a></div><div class="ttdeci">uint64_t history_sum</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00087">vf_normalize.c:87</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="aformats_8c_html_a3ea436a8d465066eecdfb2ff513ff504"><div class="ttname"><a href="formats_8c.html#a3ea436a8d465066eecdfb2ff513ff504">ff_set_common_formats</a></div><div class="ttdeci">int ff_set_common_formats(AVFilterContext *ctx, AVFilterFormats *formats)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00587">formats.c:587</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a75bbfb92dc3114cb359b665b247d85ab"><div class="ttname"><a href="vf__normalize_8c.html#a75bbfb92dc3114cb359b665b247d85ab">NormalizeHistory</a></div><div class="ttdeci">struct NormalizeHistory NormalizeHistory</div></div>
<div class="ttc" id="apixfmt_8h_html_ad02e8b710fc2142d177bbeacf109bfd1"><div class="ttname"><a href="pixfmt_8h.html#ad02e8b710fc2142d177bbeacf109bfd1">AV_PIX_FMT_GBRAP10</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRAP10</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00419">pixfmt.h:419</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a7ddb0b5ac76101c5bee71e9840bf1698"><div class="ttname"><a href="vf__normalize_8c.html#a7ddb0b5ac76101c5bee71e9840bf1698">outputs</a></div><div class="ttdeci">static const AVFilterPad outputs[]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00525">vf_normalize.c:525</a></div></div>
<div class="ttc" id="acommon_8h_html_a013fdaa079045ec5632fe121e211e516"><div class="ttname"><a href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a></div><div class="ttdeci">#define FFMAX3(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00095">common.h:95</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html"><div class="ttname"><a href="intreadwrite_8h.html">intreadwrite.h</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a05f1c9489f15319fd76ba9392cb91302"><div class="ttname"><a href="pixfmt_8h.html#a05f1c9489f15319fd76ba9392cb91302">AV_PIX_FMT_GBRAP12</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRAP12</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00420">pixfmt.h:420</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_abdff1e9195324e8743bc90a3d1a92b76"><div class="ttname"><a href="vf__normalize_8c.html#abdff1e9195324e8743bc90a3d1a92b76">ff_vf_normalize</a></div><div class="ttdeci">AVFilter ff_vf_normalize</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00533">vf_normalize.c:533</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a6c6ae84bcd033597799fc41efe40c769"><div class="ttname"><a href="vf__normalize_8c.html#a6c6ae84bcd033597799fc41efe40c769">NormalizeContext</a></div><div class="ttdeci">struct NormalizeContext NormalizeContext</div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a375292b07fbf849b4212fb6e49d07673"><div class="ttname"><a href="struct_normalize_context.html#a375292b07fbf849b4212fb6e49d07673">NormalizeContext::strength</a></div><div class="ttdeci">float strength</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00104">vf_normalize.c:104</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a1fe5aefea987526a38f5cbbe1e7f2469"><div class="ttname"><a href="vf__normalize_8c.html#a1fe5aefea987526a38f5cbbe1e7f2469">FLAGSR</a></div><div class="ttdeci">#define FLAGSR</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00127">vf_normalize.c:127</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a5b4e302dfe4b2ee5369f0278621acd5f"><div class="ttname"><a href="vf__normalize_8c.html#a5b4e302dfe4b2ee5369f0278621acd5f">query_formats</a></div><div class="ttdeci">static int query_formats(AVFilterContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00391">vf_normalize.c:391</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a7ffbd399b88a48196e3cba416eec4dac"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a7ffbd399b88a48196e3cba416eec4dac">AV_PIX_FMT_RGBA</a></div><div class="ttdeci">@ AV_PIX_FMT_RGBA</div><div class="ttdoc">packed RGBA 8:8:8:8, 32bpp, RGBARGBA...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00093">pixfmt.h:93</a></div></div>
<div class="ttc" id="astruct_normalize_context_html"><div class="ttname"><a href="struct_normalize_context.html">NormalizeContext</a></div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00096">vf_normalize.c:96</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_aed54204b8ac9c58480c9cf7d54826b07"><div class="ttname"><a href="vf__normalize_8c.html#aed54204b8ac9c58480c9cf7d54826b07">find_min_max</a></div><div class="ttdeci">static void find_min_max(NormalizeContext *s, AVFrame *in, NormalizeLocal min[3], NormalizeLocal max[3])</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00140">vf_normalize.c:140</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ad876c695f2d5ddc2ec4ec8823120dd16"><div class="ttname"><a href="pixfmt_8h.html#ad876c695f2d5ddc2ec4ec8823120dd16">AV_PIX_FMT_GBRP16</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRP16</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00418">pixfmt.h:418</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a79f0cce2e796a9e51f75fea1695c9160"><div class="ttname"><a href="pixfmt_8h.html#a79f0cce2e796a9e51f75fea1695c9160">AV_PIX_FMT_RGBA64</a></div><div class="ttdeci">#define AV_PIX_FMT_RGBA64</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00389">pixfmt.h:389</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a45b2138ca7fb038237736bb4ab1cdeb6"><div class="ttname"><a href="pixfmt_8h.html#a45b2138ca7fb038237736bb4ab1cdeb6">AV_PIX_FMT_BGR48</a></div><div class="ttdeci">#define AV_PIX_FMT_BGR48</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00390">pixfmt.h:390</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gab9b275b114ace0db95c5796bc71f3012"><div class="ttname"><a href="group__lavu__frame.html#gab9b275b114ace0db95c5796bc71f3012">av_frame_copy_props</a></div><div class="ttdeci">int av_frame_copy_props(AVFrame *dst, const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00658">frame.c:658</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_abc6623876ad8433ce78745d8c53501da"><div class="ttname"><a href="struct_normalize_context.html#abc6623876ad8433ce78745d8c53501da">NormalizeContext::lut</a></div><div class="ttdeci">uint16_t lut[3][65536]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00119">vf_normalize.c:119</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444afdcd13cbd184901b05e27595e647fadc"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444afdcd13cbd184901b05e27595e647fadc">AV_OPT_TYPE_COLOR</a></div><div class="ttdeci">@ AV_OPT_TYPE_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00240">opt.h:240</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a6e04c7ed634034f9b8c1fec9d362ce44"><div class="ttname"><a href="vf__normalize_8c.html#a6e04c7ed634034f9b8c1fec9d362ce44">inputs</a></div><div class="ttdeci">static const AVFilterPad inputs[]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00515">vf_normalize.c:515</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a4634b702d59290ff66af59cd55020f32"><div class="ttname"><a href="struct_normalize_context.html#a4634b702d59290ff66af59cd55020f32">NormalizeContext::sblackpt</a></div><div class="ttdeci">int sblackpt[4]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00108">vf_normalize.c:108</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a258e7e59a7f956604b743c14032906b0"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a258e7e59a7f956604b743c14032906b0">AV_PIX_FMT_BGR0</a></div><div class="ttdeci">@ AV_PIX_FMT_BGR0</div><div class="ttdoc">packed BGR 8:8:8, 32bpp, BGRXBGRX... X=unused/undefined</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00240">pixfmt.h:240</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00081">pixdesc.h:81</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a298a6f146010ee61e8dba6065f9cbda7"><div class="ttname"><a href="struct_normalize_context.html#a298a6f146010ee61e8dba6065f9cbda7">NormalizeContext::smoothing</a></div><div class="ttdeci">int smoothing</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00102">vf_normalize.c:102</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a35c39789390ba2489026c7ecdbfafba7"><div class="ttname"><a href="pixfmt_8h.html#a35c39789390ba2489026c7ecdbfafba7">AV_PIX_FMT_GBRP9</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRP9</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00414">pixfmt.h:414</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a5110926011394bc4f6066145314a5330"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5110926011394bc4f6066145314a5330">AV_PIX_FMT_ABGR</a></div><div class="ttdeci">@ AV_PIX_FMT_ABGR</div><div class="ttdoc">packed ABGR 8:8:8:8, 32bpp, ABGRABGR...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00094">pixfmt.h:94</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="ah264pred__template_8c_html_a93cca9adbbca82ea00bf3250781f6dce"><div class="ttname"><a href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a></div><div class="ttdeci">for(j=16;j &gt;0;--j)</div><div class="ttdef"><b>Definition:</b> <a href="h264pred__template_8c_source.html#l00469">h264pred_template.c:469</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_ac6ed8ec8c1c86eb4693cdee886551211"><div class="ttname"><a href="vf__normalize_8c.html#ac6ed8ec8c1c86eb4693cdee886551211">process_planar_16</a></div><div class="ttdeci">static void process_planar_16(NormalizeContext *s, AVFrame *in, AVFrame *out)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00267">vf_normalize.c:267</a></div></div>
<div class="ttc" id="astruct_normalize_history_html"><div class="ttname"><a href="struct_normalize_history.html">NormalizeHistory</a></div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00085">vf_normalize.c:85</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_ad12dce0a7bf9d908b172a28155b3d261"><div class="ttname"><a href="vf__normalize_8c.html#ad12dce0a7bf9d908b172a28155b3d261">OFFSET</a></div><div class="ttdeci">#define OFFSET(x)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00125">vf_normalize.c:125</a></div></div>
<div class="ttc" id="astruct_a_v_filter_pad_html_afc112061a6035639934e0135aab7d425"><div class="ttname"><a href="struct_a_v_filter_pad.html#afc112061a6035639934e0135aab7d425">AVFilterPad::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="libavfilter_2internal_8h_source.html#l00060">internal.h:60</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a107eadfcfe8c9fc751289eeb7744a6d3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a107eadfcfe8c9fc751289eeb7744a6d3">AV_PIX_FMT_RGB24</a></div><div class="ttdeci">@ AV_PIX_FMT_RGB24</div><div class="ttdoc">packed RGB 8:8:8, 24bpp, RGBRGB...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00068">pixfmt.h:68</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="apixdesc_8c_html_a89cf35c5ef18c9e996c7784e1a893b9e"><div class="ttname"><a href="pixdesc_8c.html#a89cf35c5ef18c9e996c7784e1a893b9e">av_get_padded_bits_per_pixel</a></div><div class="ttdeci">int av_get_padded_bits_per_pixel(const AVPixFmtDescriptor *pixdesc)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02538">pixdesc.c:2538</a></div></div>
<div class="ttc" id="astruct_normalize_local_html"><div class="ttname"><a href="struct_normalize_local.html">NormalizeLocal</a></div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00090">vf_normalize.c:90</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a8bae2a4bd75e31c7077a3816464e8b03"><div class="ttname"><a href="vf__normalize_8c.html#a8bae2a4bd75e31c7077a3816464e8b03">process_16</a></div><div class="ttdeci">static void process_16(NormalizeContext *s, AVFrame *in, AVFrame *out)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00230">vf_normalize.c:230</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a6ccad09b4a2a06ae178418fdccf5940d"><div class="ttname"><a href="vf__normalize_8c.html#a6ccad09b4a2a06ae178418fdccf5940d">FLAGS</a></div><div class="ttdeci">#define FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00126">vf_normalize.c:126</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a8aa3ddf224cba014fb9eac404498046a"><div class="ttname"><a href="pixfmt_8h.html#a8aa3ddf224cba014fb9eac404498046a">AV_PIX_FMT_RGB48</a></div><div class="ttdeci">#define AV_PIX_FMT_RGB48</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00385">pixfmt.h:385</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_abbead6cde1da3e72ce200578c426f1e6"><div class="ttname"><a href="vf__normalize_8c.html#abbead6cde1da3e72ce200578c426f1e6">uninit</a></div><div class="ttdeci">static av_cold void uninit(AVFilterContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00469">vf_normalize.c:469</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a22ca531c2e3022b7033d3dd42d6d3bfb"><div class="ttname"><a href="struct_normalize_context.html#a22ca531c2e3022b7033d3dd42d6d3bfb">NormalizeContext::num_components</a></div><div class="ttdeci">int num_components</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00110">vf_normalize.c:110</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga3ba755bada5c3c8883361ef43fb5fb7a"><div class="ttname"><a href="group__lavu__frame.html#ga3ba755bada5c3c8883361ef43fb5fb7a">av_frame_is_writable</a></div><div class="ttdeci">int av_frame_is_writable(AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00594">frame.c:594</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a4b9a50cf668c8739aec57f8acda581cf"><div class="ttname"><a href="struct_normalize_context.html#a4b9a50cf668c8739aec57f8acda581cf">NormalizeContext::co</a></div><div class="ttdeci">uint8_t co[4]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00106">vf_normalize.c:106</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a9056c701b381ba84a4cebc5eb7c9d5b9"><div class="ttname"><a href="vf__normalize_8c.html#a9056c701b381ba84a4cebc5eb7c9d5b9">filter_frame</a></div><div class="ttdeci">static int filter_frame(AVFilterLink *inlink, AVFrame *in)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00479">vf_normalize.c:479</a></div></div>
<div class="ttc" id="aavfilter_8c_html_a6a85cce734e15b727032257a18f2b624"><div class="ttname"><a href="avfilter_8c.html#a6a85cce734e15b727032257a18f2b624">ff_filter_process_command</a></div><div class="ttdeci">int ff_filter_process_command(AVFilterContext *ctx, const char *cmd, const char *arg, char *res, int res_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8c_source.html#l00885">avfilter.c:885</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a7ac67b9895e77e6a0b4e03a09ac28f74"><div class="ttname"><a href="struct_normalize_context.html#a7ac67b9895e77e6a0b4e03a09ac28f74">NormalizeContext::independence</a></div><div class="ttdeci">float independence</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00103">vf_normalize.c:103</a></div></div>
<div class="ttc" id="astruct_normalize_local_html_aa09b75848fe5d5e8c36d62a15765a8e5"><div class="ttname"><a href="struct_normalize_local.html#aa09b75848fe5d5e8c36d62a15765a8e5">NormalizeLocal::in</a></div><div class="ttdeci">uint16_t in</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00091">vf_normalize.c:91</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ab9fcc01ba1689d75e4bc2080a347e1d0"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ab9fcc01ba1689d75e4bc2080a347e1d0">AV_PIX_FMT_RGB0</a></div><div class="ttdeci">@ AV_PIX_FMT_RGB0</div><div class="ttdoc">packed RGB 8:8:8, 32bpp, RGBXRGBX... X=unused/undefined</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00238">pixfmt.h:238</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a375034d667a39133f8012069098a45ca"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a375034d667a39133f8012069098a45ca">AV_PIX_FMT_ARGB</a></div><div class="ttdeci">@ AV_PIX_FMT_ARGB</div><div class="ttdoc">packed ARGB 8:8:8:8, 32bpp, ARGBARGB...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00092">pixfmt.h:92</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ae91d3f6cbac4a4de2a6e880ac2a52d1a">AV_OPT_TYPE_FLOAT</a></div><div class="ttdeci">@ AV_OPT_TYPE_FLOAT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00228">opt.h:228</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ab92ad91055387e15b43ff5f6f60f2895"><div class="ttname"><a href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16, int16_t,(*(const int16_t *) pi &gt;&gt; 8)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32, int32_t,(*(const int32_t *) pi &gt;&gt; 24)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, float, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, float, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, float, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, double, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, double, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, double, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) #define SET_CONV_FUNC_GROUP(ofmt, ifmt) static void set_generic_function(AudioConvert *ac) { } void ff_audio_convert_free(AudioConvert **ac) { if(! *ac) return;ff_dither_free(&amp;(*ac) -&gt;dc);av_freep(ac);} AudioConvert *ff_audio_convert_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map) { AudioConvert *ac;int in_planar, out_planar;ac=av_mallocz(sizeof(*ac));if(!ac) return NULL;ac-&gt;avr=avr;ac-&gt;out_fmt=out_fmt;ac-&gt;in_fmt=in_fmt;ac-&gt;channels=channels;ac-&gt;apply_map=apply_map;if(avr-&gt;dither_method !=AV_RESAMPLE_DITHER_NONE &amp;&amp;av_get_packed_sample_fmt(out_fmt)==AV_SAMPLE_FMT_S16 &amp;&amp;av_get_bytes_per_sample(in_fmt) &gt; 2) { ac-&gt;dc=ff_dither_alloc(avr, out_fmt, in_fmt, channels, sample_rate, apply_map);if(!ac-&gt;dc) { av_free(ac);return NULL;} return ac;} in_planar=ff_sample_fmt_is_planar(in_fmt, channels);out_planar=ff_sample_fmt_is_planar(out_fmt, channels);if(in_planar==out_planar) { ac-&gt;func_type=CONV_FUNC_TYPE_FLAT;ac-&gt;planes=in_planar ? ac-&gt;channels :1;} else if(in_planar) ac-&gt;func_type=CONV_FUNC_TYPE_INTERLEAVE;else ac-&gt;func_type=CONV_FUNC_TYPE_DEINTERLEAVE;set_generic_function(ac);if(ARCH_AARCH64) ff_audio_convert_init_aarch64(ac);if(ARCH_ARM) ff_audio_convert_init_arm(ac);if(ARCH_X86) ff_audio_convert_init_x86(ac);return ac;} int ff_audio_convert(AudioConvert *ac, AudioData *out, AudioData *in) { int use_generic=1;int len=in-&gt;nb_samples;int p;if(ac-&gt;dc) { av_log(ac-&gt;avr, AV_LOG_TRACE, &quot;%d samples - audio_convert: %s to %s (dithered)\n&quot;, len, av_get_sample_fmt_name(ac-&gt;in_fmt), av_get_sample_fmt_name(ac-&gt;out_fmt));return ff_convert_dither(ac-&gt; in</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00326">audio_convert.c:326</a></div></div>
<div class="ttc" id="anamespacenormalize_html"><div class="ttname"><a href="namespacenormalize.html">normalize</a></div><div class="ttdef"><b>Definition:</b> <a href="normalize_8py_source.html#l00001">normalize.py:1</a></div></div>
<div class="ttc" id="apixfmt_8h_html_acc8e582bacbe0fe0072597140ee7b219"><div class="ttname"><a href="pixfmt_8h.html#acc8e582bacbe0fe0072597140ee7b219">AV_PIX_FMT_BGRA64</a></div><div class="ttdeci">#define AV_PIX_FMT_BGRA64</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00394">pixfmt.h:394</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a6349dbef489cb1be3b41b8aeffdd2a21"><div class="ttname"><a href="vf__normalize_8c.html#a6349dbef489cb1be3b41b8aeffdd2a21">config_input</a></div><div class="ttdeci">static int config_input(AVFilterLink *inlink)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00423">vf_normalize.c:423</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a7de060139e9fd1ba12510b9e14e1e259"><div class="ttname"><a href="pixfmt_8h.html#a7de060139e9fd1ba12510b9e14e1e259">AV_PIX_FMT_GBRP12</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRP12</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00416">pixfmt.h:416</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="astruct_a_v_filter_formats_html"><div class="ttname"><a href="struct_a_v_filter_formats.html">AVFilterFormats</a></div><div class="ttdef"><b>Definition:</b> <a href="formats_8h_source.html#l00065">formats.h:65</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_acd69d1c5a126bed20f715e483fcb8754"><div class="ttname"><a href="vf__normalize_8c.html#acd69d1c5a126bed20f715e483fcb8754">find_min_max_16</a></div><div class="ttdeci">static void find_min_max_16(NormalizeContext *s, AVFrame *in, NormalizeLocal min[3], NormalizeLocal max[3])</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00214">vf_normalize.c:214</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a698dbf894ce405d3775c6cf440debf65"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a698dbf894ce405d3775c6cf440debf65">AV_PIX_FMT_0BGR</a></div><div class="ttdeci">@ AV_PIX_FMT_0BGR</div><div class="ttdoc">packed BGR 8:8:8, 32bpp, XBGRXBGR... X=unused/undefined</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00239">pixfmt.h:239</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a271b174061d4ba8e443056ae6f927529"><div class="ttname"><a href="vf__normalize_8c.html#a271b174061d4ba8e443056ae6f927529">normalize</a></div><div class="ttdeci">static void normalize(NormalizeContext *s, AVFrame *in, AVFrame *out)</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00291">vf_normalize.c:291</a></div></div>
<div class="ttc" id="arematrix__template_8c_html_a4dfdfbb7b69470f1152e022432ee2d45"><div class="ttname"><a href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a></div><div class="ttdeci">typedef void(RENAME(mix_any_func_type))</div><div class="ttdef"><b>Definition:</b> <a href="rematrix__template_8c_source.html#l00052">rematrix_template.c:52</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a27d21cb400b7dcc675513aa3796212c7"><div class="ttname"><a href="struct_normalize_context.html#a27d21cb400b7dcc675513aa3796212c7">NormalizeContext::min</a></div><div class="ttdeci">NormalizeHistory min[3]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00116">vf_normalize.c:116</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a4f947a988c92c8633c52214fd5ffba99"><div class="ttname"><a href="struct_normalize_context.html#a4f947a988c92c8633c52214fd5ffba99">NormalizeContext::blackpt</a></div><div class="ttdeci">uint8_t blackpt[4]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00100">vf_normalize.c:100</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a></div><div class="ttdeci">@ AV_OPT_TYPE_INT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00225">opt.h:225</a></div></div>
<div class="ttc" id="aavfilter_8h_html"><div class="ttname"><a href="avfilter_8h.html">avfilter.h</a></div></div>
<div class="ttc" id="apixdesc_8h_html_ab2dcf0e479980cad6c8477d5a53a3638"><div class="ttname"><a href="pixdesc_8h.html#ab2dcf0e479980cad6c8477d5a53a3638">AV_PIX_FMT_FLAG_PLANAR</a></div><div class="ttdeci">#define AV_PIX_FMT_FLAG_PLANAR</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00144">pixdesc.h:144</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_af466db3b42fd0b5ed625f0bcf9aa8142"><div class="ttname"><a href="struct_normalize_context.html#af466db3b42fd0b5ed625f0bcf9aa8142">NormalizeContext::max</a></div><div class="ttdeci">NormalizeHistory max[3]</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00116">vf_normalize.c:116</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ad000ae47faa5fbe8d4b3b375151694ef"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ad000ae47faa5fbe8d4b3b375151694ef">AV_PIX_FMT_GBRP</a></div><div class="ttdeci">@ AV_PIX_FMT_GBRP</div><div class="ttdoc">planar GBR 4:4:4 24bpp</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00168">pixfmt.h:168</a></div></div>
<div class="ttc" id="alibsvtav1_8c_html_a710bce51374aba96ab04912897666c35"><div class="ttname"><a href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a></div><div class="ttdeci">const char * desc</div><div class="ttdef"><b>Definition:</b> <a href="libsvtav1_8c_source.html#l00079">libsvtav1.c:79</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_ae3566e1af5e27cce195e189b3cdcab9e"><div class="ttname"><a href="struct_normalize_context.html#ae3566e1af5e27cce195e189b3cdcab9e">NormalizeContext::find_min_max</a></div><div class="ttdeci">void(* find_min_max)(struct NormalizeContext *s, AVFrame *in, NormalizeLocal min[3], NormalizeLocal max[3])</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00121">vf_normalize.c:121</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="astruct_a_v_filter_html"><div class="ttname"><a href="struct_a_v_filter.html">AVFilter</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00145">avfilter.h:145</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_a30c586011e109b0c53760b68b409e3fb"><div class="ttname"><a href="struct_normalize_context.html#a30c586011e109b0c53760b68b409e3fb">NormalizeContext::frame_num</a></div><div class="ttdeci">int frame_num</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00113">vf_normalize.c:113</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="adrawutils_8c_html_a7e1def46093af0284469fe56a5d76ed6"><div class="ttname"><a href="drawutils_8c.html#a7e1def46093af0284469fe56a5d76ed6">ff_fill_rgba_map</a></div><div class="ttdeci">int ff_fill_rgba_map(uint8_t *rgba_map, enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="drawutils_8c_source.html#l00035">drawutils.c:35</a></div></div>
<div class="ttc" id="agroup__lavfi_html_gae225339ad292450a5832296f58f0d424"><div class="ttname"><a href="group__lavfi.html#gae225339ad292450a5832296f58f0d424">AVFILTER_FLAG_SUPPORT_TIMELINE_INTERNAL</a></div><div class="ttdeci">#define AVFILTER_FLAG_SUPPORT_TIMELINE_INTERNAL</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00134">avfilter.h:134</a></div></div>
<div class="ttc" id="aimgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ad998d9449c5c948d9b9e5078d38f4fa2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ad998d9449c5c948d9b9e5078d38f4fa2">AV_PIX_FMT_0RGB</a></div><div class="ttdeci">@ AV_PIX_FMT_0RGB</div><div class="ttdoc">packed RGB 8:8:8, 32bpp, XRGBXRGB... X=unused/undefined</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00237">pixfmt.h:237</a></div></div>
<div class="ttc" id="astruct_a_v_filter_html_a28a4776f344f91055f42a4c2a1b15c0c"><div class="ttname"><a href="struct_a_v_filter.html#a28a4776f344f91055f42a4c2a1b15c0c">AVFilter::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00149">avfilter.h:149</a></div></div>
<div class="ttc" id="adrawutils_8h_html"><div class="ttname"><a href="drawutils_8h.html">drawutils.h</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="aaudioconvert_8c_html_a004d49561226c4c0d9a2ee7f52a5209e"><div class="ttname"><a href="audioconvert_8c.html#a004d49561226c4c0d9a2ee7f52a5209e">planar</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_U8,(uint64_t)((*(const uint8_t *) pi - 0x80U))&lt;&lt; 56) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16,(*(const int16_t *) pi &gt;&gt;8)+0x80) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1&lt;&lt; 16)) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S16,(uint64_t)(*(const int16_t *) pi)&lt;&lt; 48) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32,(*(const int32_t *) pi &gt;&gt;24)+0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S32,(uint64_t)(*(const int32_t *) pi)&lt;&lt; 32) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S64,(*(const int64_t *) pi &gt;&gt;56)+0x80) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S64, *(const int64_t *) pi *(1.0f/(UINT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S64, *(const int64_t *) pi *(1.0/(UINT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_FLT, llrintf(*(const float *) pi *(UINT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_DBL, llrint(*(const double *) pi *(UINT64_C(1)&lt;&lt; 63))) #define FMT_PAIR_FUNC(out, in) static conv_func_type *const fmt_pair_to_conv_functions[AV_SAMPLE_FMT_NB *AV_SAMPLE_FMT_NB]={ FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S64), };static void cpy1(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, len);} static void cpy2(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 2 *len);} static void cpy4(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 4 *len);} static void cpy8(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 8 *len);} AudioConvert *swri_audio_convert_alloc(enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, const int *ch_map, int flags) { AudioConvert *ctx;conv_func_type *f=fmt_pair_to_conv_functions[av_get_packed_sample_fmt(out_fmt)+AV_SAMPLE_FMT_NB *av_get_packed_sample_fmt(in_fmt)];if(!f) return NULL;ctx=av_mallocz(sizeof(*ctx));if(!ctx) return NULL;if(channels==1){ in_fmt=av_get_planar_sample_fmt(in_fmt);out_fmt=av_get_planar_sample_fmt(out_fmt);} ctx-&gt;channels=channels;ctx-&gt;conv_f=f;ctx-&gt;ch_map=ch_map;if(in_fmt==AV_SAMPLE_FMT_U8||in_fmt==AV_SAMPLE_FMT_U8P) memset(ctx-&gt;silence, 0x80, sizeof(ctx-&gt;silence));if(out_fmt==in_fmt &amp;&amp;!ch_map) { switch(av_get_bytes_per_sample(in_fmt)){ case 1:ctx-&gt;simd_f=cpy1;break;case 2:ctx-&gt;simd_f=cpy2;break;case 4:ctx-&gt;simd_f=cpy4;break;case 8:ctx-&gt;simd_f=cpy8;break;} } if(HAVE_X86ASM &amp;&amp;HAVE_MMX) swri_audio_convert_init_x86(ctx, out_fmt, in_fmt, channels);if(ARCH_ARM) swri_audio_convert_init_arm(ctx, out_fmt, in_fmt, channels);if(ARCH_AARCH64) swri_audio_convert_init_aarch64(ctx, out_fmt, in_fmt, channels);return ctx;} void swri_audio_convert_free(AudioConvert **ctx) { av_freep(ctx);} int swri_audio_convert(AudioConvert *ctx, AudioData *out, AudioData *in, int len) { int ch;int off=0;const int os=(out-&gt;planar ? 1 :out-&gt;ch_count) *out-&gt;bps;unsigned misaligned=0;av_assert0(ctx-&gt;channels==out-&gt;ch_count);if(ctx-&gt;in_simd_align_mask) { int planes=in-&gt;planar ? in-&gt;ch_count :1;unsigned m=0;for(ch=0;ch&lt; planes;ch++) m|=(intptr_t) in-&gt;ch[ch];misaligned|=m &amp;ctx-&gt;in_simd_align_mask;} if(ctx-&gt;out_simd_align_mask) { int planes=out-&gt;planar ? out-&gt;ch_count :1;unsigned m=0;for(ch=0;ch&lt; planes;ch++) m|=(intptr_t) out-&gt;ch[ch];misaligned|=m &amp;ctx-&gt;out_simd_align_mask;} if(ctx-&gt;simd_f &amp;&amp;!ctx-&gt;ch_map &amp;&amp;!misaligned){ off=len &amp;~15;av_assert1(off &gt;=0);av_assert1(off&lt;=len);av_assert2(ctx-&gt;channels==SWR_CH_MAX||!in-&gt;ch[ctx-&gt;channels]);if(off &gt;0){ if(out-&gt;planar==in-&gt;planar){ int planes=out-&gt;planar ? out-&gt;ch_count :1;for(ch=0;ch&lt; planes;ch++){ ctx-&gt;simd_f(out-&gt;ch+ch,(const uint8_t **) in-&gt;ch+ch, off *(out-&gt; planar</div><div class="ttdef"><b>Definition:</b> <a href="audioconvert_8c_source.html#l00226">audioconvert.c:56</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a08e3e25929bb29d5f6ef768343ff7f57"><div class="ttname"><a href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">AVFilterLink::w</a></div><div class="ttdeci">int w</div><div class="ttdoc">agreed upon image width</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00481">avfilter.h:481</a></div></div>
<div class="ttc" id="astruct_normalize_local_html_aecf0ad4367be661a1254f2ba3f9fad10"><div class="ttname"><a href="struct_normalize_local.html#aecf0ad4367be661a1254f2ba3f9fad10">NormalizeLocal::out</a></div><div class="ttdeci">float out</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00093">vf_normalize.c:93</a></div></div>
<div class="ttc" id="astruct_normalize_context_html_ad728d8a1648a618fba1f873d0addd897"><div class="ttname"><a href="struct_normalize_context.html#ad728d8a1648a618fba1f873d0addd897">NormalizeContext::history_len</a></div><div class="ttdeci">int history_len</div><div class="ttdef"><b>Definition:</b> <a href="vf__normalize_8c_source.html#l00112">vf_normalize.c:112</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_ad2e88d75f808e6d4e78d48bceb10c336"><div class="ttname"><a href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a></div><div class="ttdeci">float min</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00456">vorbis_enc_data.h:456</a></div></div>
<div class="ttc" id="avf__normalize_8c_html_a98d3ace1c572413ee2169484351c177b"><div class="ttname"><a href="vf__normalize_8c.html#a98d3ace1c572413ee2169484351c177b">AVFILTER_DEFINE_CLASS</a></div><div class="ttdeci">AVFILTER_DEFINE_CLASS(normalize)</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
