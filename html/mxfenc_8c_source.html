<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavformat/mxfenc.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_5dbf34d3eccfe93a92dd48ea427d25bd.html">libavformat</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mxfenc.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mxfenc_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * MXF muxer</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2008 GUCAS, Zhentan Feng &lt;spyfeng at gmail dot com&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2008 Baptiste Coudurier &lt;baptiste dot coudurier at gmail dot com&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * signal_standard, color_siting, store_user_comments, sample rate and klv_fill_key version</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * fixes sponsored by NOA GmbH</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * References</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * SMPTE 336M KLV Data Encoding Protocol Using Key-Length-Value</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * SMPTE 377M MXF File Format Specifications</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * SMPTE 379M MXF Generic Container</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * SMPTE 381M Mapping MPEG Streams into the MXF Generic Container</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * SMPTE 422M Mapping JPEG 2000 Codestreams into the MXF Generic Container</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * SMPTE RP210: SMPTE Metadata Dictionary</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * SMPTE RP224: Registry of SMPTE Universal Labels</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="time_8h.html">time.h</a>&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="random__seed_8h.html">libavutil/random_seed.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timecode_8h.html">libavutil/timecode.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mastering__display__metadata_8h.html">libavutil/mastering_display_metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixdesc_8h.html">libavutil/pixdesc.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="time__internal_8h.html">libavutil/time_internal.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bytestream_8h.html">libavcodec/bytestream.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dnxhddata_8h.html">libavcodec/dnxhddata.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dv__profile_8h.html">libavcodec/dv_profile.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264__ps_8h.html">libavcodec/h264_ps.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="golomb_8h.html">libavcodec/golomb.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavcodec_2internal_8h.html">libavcodec/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avformat_8h.html">avformat.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avio__internal_8h.html">avio_internal.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avc_8h.html">avc.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mxf_8h.html">mxf.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;config.h&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">extern</span> <a class="code" href="struct_a_v_output_format.html">AVOutputFormat</a> <a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">extern</span> <a class="code" href="struct_a_v_output_format.html">AVOutputFormat</a> <a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a6047808424335311a3e5259a5dda34b0">   66</a></span>&#160;<span class="preprocessor">#define EDIT_UNITS_PER_BODY 250</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">   67</a></span>&#160;<span class="preprocessor">#define KAG_SIZE 512</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="struct_m_x_f_index_entry.html">   69</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_m_x_f_index_entry.html">MXFIndexEntry</a> {</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_m_x_f_index_entry.html#a860828beb605fe235f332bace41dfde1">   70</a></span>&#160;    uint64_t <a class="code" href="struct_m_x_f_index_entry.html#a860828beb605fe235f332bace41dfde1">offset</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_m_x_f_index_entry.html#a494664cd518f46d122c2de3df94242f1">   71</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="struct_m_x_f_index_entry.html#a494664cd518f46d122c2de3df94242f1">slice_offset</a>; </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">   72</a></span>&#160;    uint16_t <a class="code" href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">temporal_ref</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">   73</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a1f90c0d65d382d7343ea09c51b7caeb8">   74</a></span>&#160;} <a class="code" href="mxfenc_8c.html#a1f90c0d65d382d7343ea09c51b7caeb8">MXFIndexEntry</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html">   76</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> {</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#abfec8138a3d5e16b49d22113e3c41d2a">   77</a></span>&#160;    int64_t <a class="code" href="struct_m_x_f_stream_context.html#abfec8138a3d5e16b49d22113e3c41d2a">pkt_cnt</a>;         </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">   78</a></span>&#160;    <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">   79</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a>;               </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">   80</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> *<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">   81</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> *<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#ab515e3849c98255b0496478355800f27">   82</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#ab515e3849c98255b0496478355800f27">order</a>;               </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">   83</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>;          </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a7135baa21488bfd2b602c415ee5f0a07">   84</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a7135baa21488bfd2b602c415ee5f0a07">field_dominance</a>;     </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">   85</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">   86</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">color_siting</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#ade341374143ad5db0fd8ea1eb297fbbd">   87</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#ade341374143ad5db0fd8ea1eb297fbbd">signal_standard</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a3da809d545eba5fc3a8e20fa6d280e41">   88</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a3da809d545eba5fc3a8e20fa6d280e41">h_chroma_sub_sample</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#aa8f0f132a2f2f558abb71dea8f4e7cec">   89</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#aa8f0f132a2f2f558abb71dea8f4e7cec">v_chroma_sub_sample</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a3518d8d631b02ae6de54c4bf2ccf2848">   90</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a3518d8d631b02ae6de54c4bf2ccf2848">temporal_reordering</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">   91</a></span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> <a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a67b29b5d037074620e1b2487a7ef43d7">   92</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a67b29b5d037074620e1b2487a7ef43d7">closed_gop</a>;          </div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">   93</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">video_bit_rate</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#acf2f20cf2dee7626272509a69e08306b">   94</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#acf2f20cf2dee7626272509a69e08306b">slice_offset</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">   95</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a>;          </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#ab0441da511e6df50ad7c314d35d4f673">   96</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#ab0441da511e6df50ad7c314d35d4f673">seq_closed_gop</a>;      </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a22e95b662424831c5651c0a8fcbb2d5b">   97</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a22e95b662424831c5651c0a8fcbb2d5b">max_gop</a>;             </div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#afe1b86e790f761f43df067fff426a088">   98</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#afe1b86e790f761f43df067fff426a088">b_picture_count</a>;     </div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a74646711b0aac1657fece64eaafd47a3">   99</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a74646711b0aac1657fece64eaafd47a3">low_delay</a>;           </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="struct_m_x_f_stream_context.html#a4c2ac9df6d0abe6c48a46937a694bfa7">  100</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_stream_context.html#a4c2ac9df6d0abe6c48a46937a694bfa7">avc_intra</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#abd47ffe9269bd364a178738537222cd0">  101</a></span>&#160;} <a class="code" href="mxfenc_8c.html#abd47ffe9269bd364a178738537222cd0">MXFStreamContext</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="struct_m_x_f_container_essence_entry.html">  103</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_m_x_f_container_essence_entry.html">MXFContainerEssenceEntry</a> {</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="struct_m_x_f_container_essence_entry.html#a0b85c561dcb133565dc733d926bbb864">  104</a></span>&#160;    <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="struct_m_x_f_container_essence_entry.html#a0b85c561dcb133565dc733d926bbb864">container_ul</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="struct_m_x_f_container_essence_entry.html#a468cb26b162f96a3f921ab243133a76a">  105</a></span>&#160;    <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="struct_m_x_f_container_essence_entry.html#a468cb26b162f96a3f921ab243133a76a">element_ul</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="struct_m_x_f_container_essence_entry.html#ad8333d5329bc311a8b53c3dfdbcacd94">  106</a></span>&#160;    <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="struct_m_x_f_container_essence_entry.html#ad8333d5329bc311a8b53c3dfdbcacd94">codec_ul</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="struct_m_x_f_container_essence_entry.html#a687512680f5821b55220529c98363261">  107</a></span>&#160;    <a class="code" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> (*<a class="code" href="struct_m_x_f_container_essence_entry.html#a687512680f5821b55220529c98363261">write_desc</a>)(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *, <a class="code" href="struct_a_v_stream.html">AVStream</a> *);</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ab720d869f3089bcc2f801a22fba59192">  108</a></span>&#160;} <a class="code" href="mxfenc_8c.html#ab720d869f3089bcc2f801a22fba59192">MXFContainerEssenceEntry</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_m_x_f_package.html">MXFPackage</a> {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="struct_m_x_f_package.html#ae0412866c3499261e34f4ee0587a09d1">name</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keyword">enum</span> <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255ed">MXFMetadataSetType</a> <a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">  113</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">instance</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a1138ba4e7cfb75795578eb8cba035127">  114</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_m_x_f_package.html">MXFPackage</a> *<a class="code" href="struct_m_x_f_package.html#a0225324fd12bfcb855f3c8c289e4ef42">ref</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ade049c70ccd70c52e9c042d36dcea18c">  115</a></span>&#160;} <a class="code" href="mxfenc_8c.html#ade049c70ccd70c52e9c042d36dcea18c">MXFPackage</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488">  117</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488">ULIndex</a> {</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488aee78a19457cafee057232c55f57d38a7">  118</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488aee78a19457cafee057232c55f57d38a7">INDEX_MPEG2</a> = 0,</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a086443e03e27dce5bc4a241a26414eb3">  119</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a086443e03e27dce5bc4a241a26414eb3">INDEX_AES3</a>,</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488abbc6cbcb9b4892cdaffaf4545510a03e">  120</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488abbc6cbcb9b4892cdaffaf4545510a03e">INDEX_WAV</a>,</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488af2f411815209089345e9265984540ff5">  121</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488af2f411815209089345e9265984540ff5">INDEX_D10_VIDEO</a>,</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a98a1552314eaceb8d5cc1265ef8fcb13">  122</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a98a1552314eaceb8d5cc1265ef8fcb13">INDEX_D10_AUDIO</a>,</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a7a2e0135879a24255399431c9560ca44">  123</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a7a2e0135879a24255399431c9560ca44">INDEX_DV</a>,</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a294a1ec4eca73758c4526bfc9bc583af">  124</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a294a1ec4eca73758c4526bfc9bc583af">INDEX_DNXHD</a>,</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a05efa5f1f97e95615afa1125e3636a3f">  125</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a05efa5f1f97e95615afa1125e3636a3f">INDEX_JPEG2000</a>,</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a35cbaf366c9ef151b0a0807fb87bd965">  126</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a35cbaf366c9ef151b0a0807fb87bd965">INDEX_H264</a>,</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a8fa79c7c48b51b5b07fb1145266bea9a">  127</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a8fa79c7c48b51b5b07fb1145266bea9a">INDEX_S436M</a>,</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488ab1aa9d240c886c47c4f2b78ac62b03ad">  128</a></span>&#160;    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488ab1aa9d240c886c47c4f2b78ac62b03ad">INDEX_PRORES</a>,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;};</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <a class="code" href="mxfenc_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keyword">enum</span> <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488">ULIndex</a> <a class="code" href="mxfenc_8c.html#a1138ba4e7cfb75795578eb8cba035127">index</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;} <a class="code" href="mxfenc_8c.html#acb311745e5c550d0558c93336c94b8c7">mxf_essence_mappings</a>[] = {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    { <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>, <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488aee78a19457cafee057232c55f57d38a7">INDEX_MPEG2</a> },</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    { <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be">AV_CODEC_ID_PCM_S24LE</a>,  <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a086443e03e27dce5bc4a241a26414eb3">INDEX_AES3</a> },</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    { <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a>,  <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a086443e03e27dce5bc4a241a26414eb3">INDEX_AES3</a> },</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    { <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06">AV_CODEC_ID_DVVIDEO</a>,    <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a7a2e0135879a24255399431c9560ca44">INDEX_DV</a> },</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    { <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead36347b6ae291fc3cc95f84aecf8035a">AV_CODEC_ID_DNXHD</a>,      <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a294a1ec4eca73758c4526bfc9bc583af">INDEX_DNXHD</a> },</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    { <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea4ff1478f2b0f3bc728f6cce39d44b9f0">AV_CODEC_ID_JPEG2000</a>,   <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a05efa5f1f97e95615afa1125e3636a3f">INDEX_JPEG2000</a> },</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    { <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>,       <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a35cbaf366c9ef151b0a0807fb87bd965">INDEX_H264</a> },</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    { <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceab140360bd655d8add22265dbe45b581c">AV_CODEC_ID_PRORES</a>,     <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488ab1aa9d240c886c47c4f2b78ac62b03ad">INDEX_PRORES</a> },</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    { <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a> }</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#acb311745e5c550d0558c93336c94b8c7">  144</a></span>&#160;};</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ab07efabf9bb6a794e3e83ecb2a25d35e">mxf_write_wav_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a2dcb2922897d7c3d73e886d9a690c669">mxf_write_aes3_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a882e6b5bc070deca2cbd894aefd8e3d6">mxf_write_mpegvideo_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#aa0663cfca8e5954f89ef979ccd31ef34">mxf_write_h264_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ace13217324bdb3d39dcc81b95a6953d8">mxf_write_cdci_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ab4d6dc3ceb1354b85d9ef3178d9e3e6e">mxf_write_generic_sound_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a58d581a92c475354ac3885da0d66aaa1">mxf_write_s436m_anc_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ac1a73cc70ad1715be653592108af0ed2">  154</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_m_x_f_container_essence_entry.html">MXFContainerEssenceEntry</a> <a class="code" href="mxfenc_8c.html#ac1a73cc70ad1715be653592108af0ed2">mxf_essence_container_uls</a>[] = {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x02,0x0D,0x01,0x03,0x01,0x02,0x04,0x60,0x01 },</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0D,0x01,0x03,0x01,0x15,0x01,0x05,0x00 },</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x00,0x00,0x00 },</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <a class="code" href="mxfenc_8c.html#a882e6b5bc070deca2cbd894aefd8e3d6">mxf_write_mpegvideo_desc</a> },</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x06,0x03,0x00 },</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0D,0x01,0x03,0x01,0x16,0x01,0x03,0x00 },</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x02,0x02,0x01,0x00,0x00,0x00,0x00 },</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <a class="code" href="mxfenc_8c.html#a2dcb2922897d7c3d73e886d9a690c669">mxf_write_aes3_desc</a> },</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x06,0x01,0x00 },</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0D,0x01,0x03,0x01,0x16,0x01,0x01,0x00 },</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x02,0x02,0x01,0x00,0x00,0x00,0x00 },</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <a class="code" href="mxfenc_8c.html#ab07efabf9bb6a794e3e83ecb2a25d35e">mxf_write_wav_desc</a> },</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// D-10 Video</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x01,0x01,0x01 },</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0D,0x01,0x03,0x01,0x05,0x01,0x01,0x00 },</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x01,0x02,0x01,0x01 },</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <a class="code" href="mxfenc_8c.html#ace13217324bdb3d39dcc81b95a6953d8">mxf_write_cdci_desc</a> },</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// D-10 Audio</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x01,0x01,0x01 },</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0D,0x01,0x03,0x01,0x06,0x01,0x10,0x00 },</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x02,0x02,0x01,0x00,0x00,0x00,0x00 },</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <a class="code" href="mxfenc_8c.html#ab4d6dc3ceb1354b85d9ef3178d9e3e6e">mxf_write_generic_sound_desc</a> },</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// DV</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x7F,0x01 },</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0D,0x01,0x03,0x01,0x18,0x01,0x01,0x00 },</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x00,0x00,0x00 },</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <a class="code" href="mxfenc_8c.html#ace13217324bdb3d39dcc81b95a6953d8">mxf_write_cdci_desc</a> },</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// DNxHD</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x11,0x01,0x00 },</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0D,0x01,0x03,0x01,0x15,0x01,0x05,0x00 },</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0A,0x04,0x01,0x02,0x02,0x71,0x01,0x00,0x00 },</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="mxfenc_8c.html#ace13217324bdb3d39dcc81b95a6953d8">mxf_write_cdci_desc</a> },</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// JPEG2000</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    { { 0x06,0x0e,0x2b,0x34,0x04,0x01,0x01,0x07,0x0d,0x01,0x03,0x01,0x02,0x0c,0x01,0x00 },</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      { 0x06,0x0e,0x2b,0x34,0x01,0x02,0x01,0x01,0x0d,0x01,0x03,0x01,0x15,0x01,0x08,0x00 },</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      { 0x06,0x0e,0x2b,0x34,0x04,0x01,0x01,0x07,0x04,0x01,0x02,0x02,0x03,0x01,0x01,0x00 },</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <a class="code" href="mxfenc_8c.html#ace13217324bdb3d39dcc81b95a6953d8">mxf_write_cdci_desc</a> },</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// H.264</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x0D,0x01,0x03,0x01,0x02,0x10,0x60,0x01 },</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0D,0x01,0x03,0x01,0x15,0x01,0x05,0x00 },</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x00,0x00,0x00 },</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <a class="code" href="mxfenc_8c.html#aa0663cfca8e5954f89ef979ccd31ef34">mxf_write_h264_desc</a> },</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">// S436M ANC</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x0D,0x01,0x03,0x01,0x02,0x0e,0x00,0x00 },</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0D,0x01,0x03,0x01,0x17,0x01,0x02,0x00 },</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x01,0x5C,0x00 },</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="mxfenc_8c.html#a58d581a92c475354ac3885da0d66aaa1">mxf_write_s436m_anc_desc</a> },</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">// ProRes</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x0d,0x01,0x03,0x01,0x02,0x1c,0x01,0x00 },</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x01,0x02,0x01,0x01,0x0d,0x01,0x03,0x01,0x15,0x01,0x17,0x00 },</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x04,0x01,0x02,0x02,0x03,0x06,0x03,0x00 },</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="mxfenc_8c.html#ace13217324bdb3d39dcc81b95a6953d8">mxf_write_cdci_desc</a> },</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    { { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;};</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ab2e7da6dde9a606699facd04fab66c0b">  213</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#ab2e7da6dde9a606699facd04fab66c0b">mxf_d10_codec_uls</a>[] = {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x01,0x02,0x01,0x01 }, <span class="comment">// D-10 625/50 PAL 50mb/s</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x01,0x02,0x01,0x02 }, <span class="comment">// D-10 525/50 NTSC 50mb/s</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x01,0x02,0x01,0x03 }, <span class="comment">// D-10 625/50 PAL 40mb/s</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x01,0x02,0x01,0x04 }, <span class="comment">// D-10 525/50 NTSC 40mb/s</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x01,0x02,0x01,0x05 }, <span class="comment">// D-10 625/50 PAL 30mb/s</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x01,0x02,0x01,0x06 }, <span class="comment">// D-10 525/50 NTSC 30mb/s</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;};</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a03d2f960e765f9f5c4eb708f3124d247">  222</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a03d2f960e765f9f5c4eb708f3124d247">mxf_d10_container_uls</a>[] = {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x01,0x01,0x01 }, <span class="comment">// D-10 625/50 PAL 50mb/s</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x01,0x02,0x01 }, <span class="comment">// D-10 525/50 NTSC 50mb/s</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x01,0x03,0x01 }, <span class="comment">// D-10 625/50 PAL 40mb/s</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x01,0x04,0x01 }, <span class="comment">// D-10 525/50 NTSC 40mb/s</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x01,0x05,0x01 }, <span class="comment">// D-10 625/50 PAL 30mb/s</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x01,0x06,0x01 }, <span class="comment">// D-10 525/50 NTSC 30mb/s</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;};</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_m_x_f_context.html">MXFContext</a> {</div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a56f486265f6110192b8d07165b50e2e0">  232</a></span>&#160;    <a class="code" href="struct_a_v_class.html">AVClass</a> *<a class="code" href="struct_m_x_f_context.html#a56f486265f6110192b8d07165b50e2e0">av_class</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a00d740dac0f18778dc0c25be1dbde1be">  233</a></span>&#160;    int64_t <a class="code" href="struct_m_x_f_context.html#a00d740dac0f18778dc0c25be1dbde1be">footer_partition_offset</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">  234</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">essence_container_count</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">  235</a></span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> <a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">  236</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">  237</a></span>&#160;    <a class="code" href="struct_m_x_f_index_entry.html">MXFIndexEntry</a> *<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">  238</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#adeaa0889ffac2d991bf10d37f71455d8">  239</a></span>&#160;    uint64_t <a class="code" href="struct_m_x_f_context.html#adeaa0889ffac2d991bf10d37f71455d8">timestamp</a>;   </div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#ad9bc32ed1f92df9211ebe13435164d76">  240</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_m_x_f_context.html#ad9bc32ed1f92df9211ebe13435164d76">slice_count</a>;  </div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a0f7818763fb94714b758f4cf8de59416">  241</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#a0f7818763fb94714b758f4cf8de59416">last_indexed_edit_unit</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">  242</a></span>&#160;    uint64_t *<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">  243</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a>;</div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#ae1a14a2496213ff44ded5c54c3e71dd3">  244</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#ae1a14a2496213ff44ded5c54c3e71dd3">last_key_index</a>;  </div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a1e414bd816f6ee8013d104eff865bb98">  245</a></span>&#160;    uint64_t <a class="code" href="struct_m_x_f_context.html#a1e414bd816f6ee8013d104eff865bb98">duration</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">  246</a></span>&#160;    <a class="code" href="struct_a_v_timecode.html">AVTimecode</a> <a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>;       </div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">  247</a></span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#ab12f65a4ff35a10cfd22b144667e91fd">  248</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#ab12f65a4ff35a10cfd22b144667e91fd">timecode_base</a>;       </div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">  249</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>; </div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#ab41ba86e76941af3770b8ee825648868">  250</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#ab41ba86e76941af3770b8ee825648868">content_package_rate</a>; </div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">  251</a></span>&#160;    uint64_t <a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a7ac8566cf237622bad8a0f63e789082a">  252</a></span>&#160;    uint32_t <a class="code" href="struct_m_x_f_context.html#a7ac8566cf237622bad8a0f63e789082a">instance_number</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#abf6cc762099d2d3d70e62453774da9aa">  253</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_m_x_f_context.html#abf6cc762099d2d3d70e62453774da9aa">umid</a>[16];        </div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#ad78bf36b47a416d96a322ebf48953da5">  254</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#ad78bf36b47a416d96a322ebf48953da5">channel_count</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a27d0579cb5db945a6ce24d48fbe8b836">  255</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#a27d0579cb5db945a6ce24d48fbe8b836">signal_standard</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a07a2266f217761315fd01f42bd8014a5">  256</a></span>&#160;    uint32_t <a class="code" href="struct_m_x_f_context.html#a07a2266f217761315fd01f42bd8014a5">tagged_value_count</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a5f869be1e79f97ffefcd5e94b3fa0dbd">  257</a></span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> <a class="code" href="struct_m_x_f_context.html#a5f869be1e79f97ffefcd5e94b3fa0dbd">audio_edit_rate</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">  258</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">store_user_comments</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">  259</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a>; <span class="comment">// used to generate MXFTrack uuids</span></div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="struct_m_x_f_context.html#a6113618badc827fe35a268b4c25ad57a">  260</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_m_x_f_context.html#a6113618badc827fe35a268b4c25ad57a">cbr_index</a>;           </div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aa4a17fb088e6eccfd8b8a5a0c96288b9">  261</a></span>&#160;} <a class="code" href="mxfenc_8c.html#aa4a17fb088e6eccfd8b8a5a0c96288b9">MXFContext</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a34b8bfc8b43303581a58dd594c19186e">  263</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a34b8bfc8b43303581a58dd594c19186e">uuid_base</a>[]            = { 0xAD,0xAB,0x44,0x24,0x2f,0x25,0x4d,0xc7,0x92,0xff,0x29,0xbd };</div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#af2f17887a3405cd51ec4970ee7dd4008">  264</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#af2f17887a3405cd51ec4970ee7dd4008">umid_ul</a>[]              = { 0x06,0x0A,0x2B,0x34,0x01,0x01,0x01,0x05,0x01,0x01,0x0D,0x00,0x13 };</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ac17cc209ad4b6ba56510421df27287db">  269</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#ac17cc209ad4b6ba56510421df27287db">op1a_ul</a>[]                     = { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x02,0x01,0x01,0x01,0x09,0x00 };</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a1955ef5f8647033c43ee2a3272b3f31c">  270</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a1955ef5f8647033c43ee2a3272b3f31c">opatom_ul</a>[]                   = { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x02,0x0D,0x01,0x02,0x01,0x10,0x03,0x00,0x00 };</div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a14d27fd607de01b69c61de36be032106">  271</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a14d27fd607de01b69c61de36be032106">footer_partition_key</a>[]        = { 0x06,0x0E,0x2B,0x34,0x02,0x05,0x01,0x01,0x0D,0x01,0x02,0x01,0x01,0x04,0x04,0x00 }; <span class="comment">// ClosedComplete</span></div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a760f90cd43e5c03cf9e92eb1d3e27f81">  272</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a760f90cd43e5c03cf9e92eb1d3e27f81">primer_pack_key</a>[]             = { 0x06,0x0E,0x2B,0x34,0x02,0x05,0x01,0x01,0x0D,0x01,0x02,0x01,0x01,0x05,0x01,0x00 };</div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a9028ba8ee263357a969acb587481af6b">  273</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a9028ba8ee263357a969acb587481af6b">index_table_segment_key</a>[]     = { 0x06,0x0E,0x2B,0x34,0x02,0x53,0x01,0x01,0x0d,0x01,0x02,0x01,0x01,0x10,0x01,0x00 };</div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ad6de8cb1ec64893b34a208d0322600a6">  274</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#ad6de8cb1ec64893b34a208d0322600a6">random_index_pack_key</a>[]       = { 0x06,0x0E,0x2B,0x34,0x02,0x05,0x01,0x01,0x0D,0x01,0x02,0x01,0x01,0x11,0x01,0x00 };</div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a98d7628b1f5baee00eb9ffd8610563c0">  275</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a98d7628b1f5baee00eb9ffd8610563c0">header_open_partition_key</a>[]   = { 0x06,0x0E,0x2B,0x34,0x02,0x05,0x01,0x01,0x0D,0x01,0x02,0x01,0x01,0x02,0x01,0x00 }; <span class="comment">// OpenIncomplete</span></div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a73daf89ccfe6fce7401d82df1b3a5c9a">  276</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a73daf89ccfe6fce7401d82df1b3a5c9a">header_closed_partition_key</a>[] = { 0x06,0x0E,0x2B,0x34,0x02,0x05,0x01,0x01,0x0D,0x01,0x02,0x01,0x01,0x02,0x04,0x00 }; <span class="comment">// ClosedComplete</span></div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a46435e97207f6bda848d8c62ac091851">  277</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a46435e97207f6bda848d8c62ac091851">klv_fill_key</a>[]                = { 0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x03,0x01,0x02,0x10,0x01,0x00,0x00,0x00 };</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#afa963116f2229e58430c7878f785ad53">  278</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#afa963116f2229e58430c7878f785ad53">body_partition_key</a>[]          = { 0x06,0x0E,0x2B,0x34,0x02,0x05,0x01,0x01,0x0D,0x01,0x02,0x01,0x01,0x03,0x04,0x00 }; <span class="comment">// ClosedComplete</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a0be5317992ecb9de3b88fccadd559b0c">  283</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a0be5317992ecb9de3b88fccadd559b0c">header_metadata_key</a>[]  = { 0x06,0x0E,0x2B,0x34,0x02,0x53,0x01,0x01,0x0D,0x01,0x01,0x01,0x01 };</div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aedcb909b3190b1c56c69ad69b2e35296">  284</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#aedcb909b3190b1c56c69ad69b2e35296">multiple_desc_ul</a>[]     = { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x0D,0x01,0x03,0x01,0x02,0x7F,0x01,0x00 };</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a69c5f8dd5f11d60cfc0946036205b497">  290</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_m_x_f_local_tag_pair.html">MXFLocalTagPair</a> <a class="code" href="mxfenc_8c.html#a69c5f8dd5f11d60cfc0946036205b497">mxf_local_tag_batch</a>[] = {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// preface set</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    { 0x3C0A, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x01,0x01,0x15,0x02,0x00,0x00,0x00,0x00}}, <span class="comment">/* Instance UID */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    { 0x3B02, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x07,0x02,0x01,0x10,0x02,0x04,0x00,0x00}}, <span class="comment">/* Last Modified Date */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    { 0x3B05, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x03,0x01,0x02,0x01,0x05,0x00,0x00,0x00}}, <span class="comment">/* Version */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    { 0x3B07, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x03,0x01,0x02,0x01,0x04,0x00,0x00,0x00}}, <span class="comment">/* Object Model Version */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    { 0x3B06, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x04,0x06,0x04,0x00,0x00}}, <span class="comment">/* Identifications reference */</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    { 0x3B03, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x04,0x02,0x01,0x00,0x00}}, <span class="comment">/* Content Storage reference */</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    { 0x3B09, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x01,0x02,0x02,0x03,0x00,0x00,0x00,0x00}}, <span class="comment">/* Operational Pattern UL */</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    { 0x3B0A, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x01,0x02,0x02,0x10,0x02,0x01,0x00,0x00}}, <span class="comment">/* Essence Containers UL batch */</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    { 0x3B0B, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x01,0x02,0x02,0x10,0x02,0x02,0x00,0x00}}, <span class="comment">/* DM Schemes UL batch */</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// Identification</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    { 0x3C09, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x05,0x20,0x07,0x01,0x01,0x00,0x00,0x00}}, <span class="comment">/* This Generation UID */</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    { 0x3C01, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x05,0x20,0x07,0x01,0x02,0x01,0x00,0x00}}, <span class="comment">/* Company Name */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    { 0x3C02, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x05,0x20,0x07,0x01,0x03,0x01,0x00,0x00}}, <span class="comment">/* Product Name */</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    { 0x3C03, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x05,0x20,0x07,0x01,0x04,0x00,0x00,0x00}}, <span class="comment">/* Product Version */</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    { 0x3C04, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x05,0x20,0x07,0x01,0x05,0x01,0x00,0x00}}, <span class="comment">/* Version String */</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    { 0x3C05, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x05,0x20,0x07,0x01,0x07,0x00,0x00,0x00}}, <span class="comment">/* Product ID */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    { 0x3C06, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x07,0x02,0x01,0x10,0x02,0x03,0x00,0x00}}, <span class="comment">/* Modification Date */</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    { 0x3C07, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x05,0x20,0x07,0x01,0x0A,0x00,0x00,0x00}}, <span class="comment">/* Toolkit Version */</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    { 0x3C08, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x05,0x20,0x07,0x01,0x06,0x01,0x00,0x00}}, <span class="comment">/* Platform */</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// Content Storage</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    { 0x1901, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x04,0x05,0x01,0x00,0x00}}, <span class="comment">/* Package strong reference batch */</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    { 0x1902, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x04,0x05,0x02,0x00,0x00}}, <span class="comment">/* Package strong reference batch */</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// Essence Container Data</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    { 0x2701, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x06,0x01,0x00,0x00,0x00}}, <span class="comment">/* Linked Package UID */</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    { 0x3F07, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x04,0x01,0x03,0x04,0x04,0x00,0x00,0x00,0x00}}, <span class="comment">/* BodySID */</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// Package</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    { 0x4401, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x01,0x01,0x15,0x10,0x00,0x00,0x00,0x00}}, <span class="comment">/* Package UID */</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    { 0x4405, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x07,0x02,0x01,0x10,0x01,0x03,0x00,0x00}}, <span class="comment">/* Package Creation Date */</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    { 0x4404, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x07,0x02,0x01,0x10,0x02,0x05,0x00,0x00}}, <span class="comment">/* Package Modified Date */</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    { 0x4402, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x01,0x03,0x03,0x02,0x01,0x00,0x00,0x00}}, <span class="comment">/* Package Name */</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    { 0x4403, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x04,0x06,0x05,0x00,0x00}}, <span class="comment">/* Tracks Strong reference array */</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    { 0x4701, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x04,0x02,0x03,0x00,0x00}}, <span class="comment">/* Descriptor */</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// Track</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    { 0x4801, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x01,0x07,0x01,0x01,0x00,0x00,0x00,0x00}}, <span class="comment">/* Track ID */</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    { 0x4804, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x01,0x04,0x01,0x03,0x00,0x00,0x00,0x00}}, <span class="comment">/* Track Number */</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    { 0x4B01, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x05,0x30,0x04,0x05,0x00,0x00,0x00,0x00}}, <span class="comment">/* Edit Rate */</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    { 0x4B02, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x07,0x02,0x01,0x03,0x01,0x03,0x00,0x00}}, <span class="comment">/* Origin */</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    { 0x4803, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x04,0x02,0x04,0x00,0x00}}, <span class="comment">/* Sequence reference */</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// Sequence</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    { 0x0201, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x07,0x01,0x00,0x00,0x00,0x00,0x00}}, <span class="comment">/* Data Definition UL */</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    { 0x0202, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x07,0x02,0x02,0x01,0x01,0x03,0x00,0x00}}, <span class="comment">/* Duration */</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    { 0x1001, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x04,0x06,0x09,0x00,0x00}}, <span class="comment">/* Structural Components reference array */</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// Source Clip</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    { 0x1201, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x07,0x02,0x01,0x03,0x01,0x04,0x00,0x00}}, <span class="comment">/* Start position */</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    { 0x1101, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x03,0x01,0x00,0x00,0x00}}, <span class="comment">/* SourcePackageID */</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    { 0x1102, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x03,0x02,0x00,0x00,0x00}}, <span class="comment">/* SourceTrackID */</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// Timecode Component</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    { 0x1501, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x07,0x02,0x01,0x03,0x01,0x05,0x00,0x00}}, <span class="comment">/* Start Time Code */</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    { 0x1502, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x04,0x01,0x01,0x02,0x06,0x00,0x00}}, <span class="comment">/* Rounded Time Code Base */</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    { 0x1503, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x04,0x01,0x01,0x05,0x00,0x00,0x00}}, <span class="comment">/* Drop Frame */</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// File Descriptor</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    { 0x3F01, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x04,0x06,0x01,0x01,0x04,0x06,0x0B,0x00,0x00}}, <span class="comment">/* Sub Descriptors reference array */</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    { 0x3006, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x06,0x01,0x01,0x03,0x05,0x00,0x00,0x00}}, <span class="comment">/* Linked Track ID */</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    { 0x3001, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x06,0x01,0x01,0x00,0x00,0x00,0x00}}, <span class="comment">/* SampleRate */</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    { 0x3002, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x06,0x01,0x02,0x00,0x00,0x00,0x00}}, <span class="comment">/* ContainerDuration */</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    { 0x3004, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x06,0x01,0x01,0x04,0x01,0x02,0x00,0x00}}, <span class="comment">/* Essence Container */</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// Generic Picture Essence Descriptor</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    { 0x320C, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x03,0x01,0x04,0x00,0x00,0x00}}, <span class="comment">/* Frame Layout */</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    { 0x320D, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x01,0x03,0x02,0x05,0x00,0x00,0x00}}, <span class="comment">/* Video Line Map */</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    { 0x3203, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x02,0x02,0x00,0x00,0x00}}, <span class="comment">/* Stored Width */</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    { 0x3202, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x02,0x01,0x00,0x00,0x00}}, <span class="comment">/* Stored Height */</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    { 0x3216, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x01,0x03,0x02,0x08,0x00,0x00,0x00}}, <span class="comment">/* Stored F2 Offset */</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    { 0x3205, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x08,0x00,0x00,0x00}}, <span class="comment">/* Sampled Width */</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    { 0x3204, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x07,0x00,0x00,0x00}}, <span class="comment">/* Sampled Height */</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    { 0x3206, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x09,0x00,0x00,0x00}}, <span class="comment">/* Sampled X Offset */</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    { 0x3207, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x0A,0x00,0x00,0x00}}, <span class="comment">/* Sampled Y Offset */</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    { 0x3209, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x0C,0x00,0x00,0x00}}, <span class="comment">/* Display Width */</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    { 0x3208, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x0B,0x00,0x00,0x00}}, <span class="comment">/* Display Height */</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    { 0x320A, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x0D,0x00,0x00,0x00}}, <span class="comment">/* Display X offset */</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    { 0x320B, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x0E,0x00,0x00,0x00}}, <span class="comment">/* Presentation Y offset */</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    { 0x3217, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x01,0x03,0x02,0x07,0x00,0x00,0x00}}, <span class="comment">/* Display F2 offset */</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    { 0x320E, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x01,0x01,0x01,0x00,0x00,0x00}}, <span class="comment">/* Aspect Ratio */</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    { 0x3210, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x01,0x02,0x01,0x01,0x01,0x02,0x00}}, <span class="comment">/* Transfer characteristic */</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    { 0x3213, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x18,0x01,0x02,0x00,0x00,0x00,0x00}}, <span class="comment">/* Image Start Offset */</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    { 0x3214, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x18,0x01,0x03,0x00,0x00,0x00,0x00}}, <span class="comment">/* Image End Offset */</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    { 0x3201, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x01,0x06,0x01,0x00,0x00,0x00,0x00}}, <span class="comment">/* Picture Essence Coding */</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    { 0x3212, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x01,0x03,0x01,0x06,0x00,0x00,0x00}}, <span class="comment">/* Field Dominance (Opt) */</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    { 0x3215, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x05,0x01,0x13,0x00,0x00,0x00,0x00}}, <span class="comment">/* Signal Standard */</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// CDCI Picture Essence Descriptor</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    { 0x3301, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x01,0x05,0x03,0x0A,0x00,0x00,0x00}}, <span class="comment">/* Component Depth */</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    { 0x3302, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x05,0x00,0x00,0x00}}, <span class="comment">/* Horizontal Subsampling */</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    { 0x3308, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x01,0x05,0x01,0x10,0x00,0x00,0x00}}, <span class="comment">/* Vertical Subsampling */</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    { 0x3303, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x01,0x06,0x00,0x00,0x00}}, <span class="comment">/* Color Siting */</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    { 0x3307, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x18,0x01,0x04,0x00,0x00,0x00,0x00}}, <span class="comment">/* Padding Bits */</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    { 0x3304, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x03,0x03,0x00,0x00,0x00}}, <span class="comment">/* Black Ref level */</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    { 0x3305, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x01,0x05,0x03,0x04,0x00,0x00,0x00}}, <span class="comment">/* White Ref level */</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    { 0x3306, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x01,0x05,0x03,0x05,0x00,0x00,0x00}}, <span class="comment">/* Color Range */</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// Generic Sound Essence Descriptor</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    { 0x3D02, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x04,0x04,0x02,0x03,0x01,0x04,0x00,0x00,0x00}}, <span class="comment">/* Locked/Unlocked */</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    { 0x3D03, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x02,0x03,0x01,0x01,0x01,0x00,0x00}}, <span class="comment">/* Audio sampling rate */</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    { 0x3D04, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x01,0x04,0x02,0x01,0x01,0x03,0x00,0x00,0x00}}, <span class="comment">/* Audio Ref Level */</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    { 0x3D07, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x02,0x01,0x01,0x04,0x00,0x00,0x00}}, <span class="comment">/* ChannelCount */</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    { 0x3D01, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x04,0x04,0x02,0x03,0x03,0x04,0x00,0x00,0x00}}, <span class="comment">/* Quantization bits */</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    { 0x3D06, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x04,0x02,0x04,0x02,0x00,0x00,0x00,0x00}}, <span class="comment">/* Sound Essence Compression */</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">// Index Table Segment</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    { 0x3F0B, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x05,0x30,0x04,0x06,0x00,0x00,0x00,0x00}}, <span class="comment">/* Index Edit Rate */</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    { 0x3F0C, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x07,0x02,0x01,0x03,0x01,0x0A,0x00,0x00}}, <span class="comment">/* Index Start Position */</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    { 0x3F0D, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x07,0x02,0x02,0x01,0x01,0x02,0x00,0x00}}, <span class="comment">/* Index Duration */</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    { 0x3F05, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x04,0x04,0x06,0x02,0x01,0x00,0x00,0x00,0x00}}, <span class="comment">/* Edit Unit Byte Count */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    { 0x3F06, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x04,0x01,0x03,0x04,0x05,0x00,0x00,0x00,0x00}}, <span class="comment">/* IndexSID */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    { 0x3F08, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x04,0x04,0x04,0x04,0x01,0x01,0x00,0x00,0x00}}, <span class="comment">/* Slice Count */</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    { 0x3F09, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x04,0x04,0x01,0x06,0x00,0x00,0x00}}, <span class="comment">/* Delta Entry Array */</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    { 0x3F0A, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x04,0x04,0x02,0x05,0x00,0x00,0x00}}, <span class="comment">/* Index Entry Array */</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">// MPEG video Descriptor</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    { 0x8000, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x01,0x06,0x02,0x01,0x0B,0x00,0x00}}, <span class="comment">/* BitRate */</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    { 0x8003, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x01,0x06,0x02,0x01,0x05,0x00,0x00}}, <span class="comment">/* LowDelay */</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    { 0x8004, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x01,0x06,0x02,0x01,0x06,0x00,0x00}}, <span class="comment">/* ClosedGOP */</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    { 0x8006, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x01,0x06,0x02,0x01,0x08,0x00,0x00}}, <span class="comment">/* MaxGOP */</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    { 0x8007, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x01,0x06,0x02,0x01,0x0A,0x00,0x00}}, <span class="comment">/* ProfileAndLevel */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    { 0x8008, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x01,0x06,0x02,0x01,0x09,0x00,0x00}}, <span class="comment">/* BPictureCount */</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// Wave Audio Essence Descriptor</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    { 0x3D09, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x02,0x03,0x03,0x05,0x00,0x00,0x00}}, <span class="comment">/* Average Bytes Per Second */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    { 0x3D0A, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x05,0x04,0x02,0x03,0x02,0x01,0x00,0x00,0x00}}, <span class="comment">/* Block Align */</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;};</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#af4e06a11b91ff978fecd6b1614758a70">  407</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_m_x_f_local_tag_pair.html">MXFLocalTagPair</a> <a class="code" href="mxfenc_8c.html#af4e06a11b91ff978fecd6b1614758a70">mxf_avc_subdescriptor_local_tags</a>[] = {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    { 0x8100, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x09,0x06,0x01,0x01,0x04,0x06,0x10,0x00,0x00}}, <span class="comment">/* SubDescriptors */</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    { 0x8200, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x0E,0x04,0x01,0x06,0x06,0x01,0x0E,0x00,0x00}}, <span class="comment">/* AVC Decoding Delay */</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    { 0x8201, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x0E,0x04,0x01,0x06,0x06,0x01,0x0A,0x00,0x00}}, <span class="comment">/* AVC Profile */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    { 0x8202, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x0E,0x04,0x01,0x06,0x06,0x01,0x0D,0x00,0x00}}, <span class="comment">/* AVC Level */</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;};</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a86d34ba6bc49f7ebf36026db584a5465">  414</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_m_x_f_local_tag_pair.html">MXFLocalTagPair</a> <a class="code" href="mxfenc_8c.html#a86d34ba6bc49f7ebf36026db584a5465">mxf_user_comments_local_tag</a>[] = {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    { 0x4406, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x03,0x02,0x01,0x02,0x0C,0x00,0x00,0x00}}, <span class="comment">/* User Comments */</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    { 0x5001, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x03,0x02,0x01,0x02,0x09,0x01,0x00,0x00}}, <span class="comment">/* Name */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    { 0x5003, {0x06,0x0E,0x2B,0x34,0x01,0x01,0x01,0x02,0x03,0x02,0x01,0x02,0x0A,0x01,0x00,0x00}}, <span class="comment">/* Value */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;};</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">  420</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keyword">enum</span> <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255ed">MXFMetadataSetType</a> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a34b8bfc8b43303581a58dd594c19186e">uuid_base</a>, 12);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a98780f74c4764e08676c9746438eb3fc">  427</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a98780f74c4764e08676c9746438eb3fc">mxf_write_umid</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="mxfenc_8c.html#af2f17887a3405cd51ec4970ee7dd4008">umid_ul</a>, 13);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="avio_8h.html#a81a5cfb941abfe2b83a30be4f86ad06d">avio_wb24</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a7ac8566cf237622bad8a0f63e789082a">instance_number</a>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#abf6cc762099d2d3d70e62453774da9aa">umid</a>, 15);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">  436</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">int</span> ref_count)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;{</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, ref_count);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 16);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#af4481a295102cb399441cc7c2477d044">  442</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#af4481a295102cb399441cc7c2477d044">klv_ber_length</a>(uint64_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;{</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &lt; 128)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>) &gt;&gt; 3) + 2;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">  450</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, uint64_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;{</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// Determine the best BER size</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="mxfenc_8c.html#af4481a295102cb399441cc7c2477d044">klv_ber_length</a>(<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> == 1) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="comment">//short form</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> --;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">// long form</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0x80 + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>--;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;&gt; 8 * <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &amp; 0xff);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">  470</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;{</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0x80 + 3);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="avio_8h.html#a81a5cfb941abfe2b83a30be4f86ad06d">avio_wb24</a>(pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a98c67dc2ec2837757edb67e26990ed25">  476</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a98c67dc2ec2837757edb67e26990ed25">klv_encode_ber9_length</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, uint64_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;{</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0x80 + 8);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment"> * Get essence container ul index</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a5404d4fa88d0006ec9bb3fa9448eab68">  485</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a5404d4fa88d0006ec9bb3fa9448eab68">mxf_get_essence_container_ul_index</a>(<span class="keyword">enum</span> <a class="code" href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="mxfenc_8c.html#acb311745e5c550d0558c93336c94b8c7">mxf_essence_mappings</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].id; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mxfenc_8c.html#acb311745e5c550d0558c93336c94b8c7">mxf_essence_mappings</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<span class="keywordtype">id</span> == <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="mxfenc_8c.html#acb311745e5c550d0558c93336c94b8c7">mxf_essence_mappings</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].index;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;}</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#abd988af8d201ce379d51c67c431ca0df">  494</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#abd988af8d201ce379d51c67c431ca0df">mxf_write_local_tags</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keyword">const</span> <a class="code" href="struct_m_x_f_local_tag_pair.html">MXFLocalTagPair</a> *local_tags, <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;{</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, local_tags[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].local_tag);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, local_tags[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="mxfenc_8c.html#a99613136a67953261099533d962f9ac4">uid</a>, 16);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ad9a02684287104c322cef3b03a3d9107">  503</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ad9a02684287104c322cef3b03a3d9107">mxf_write_primer_pack</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;{</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordtype">int</span> local_tag_number, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordtype">int</span> avc_tags_count = 0;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordtype">int</span> mastering_tags_count = 0;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    local_tag_number = <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxfenc_8c.html#a69c5f8dd5f11d60cfc0946036205b497">mxf_local_tag_batch</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    local_tag_number += mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">store_user_comments</a> * <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxfenc_8c.html#a86d34ba6bc49f7ebf36026db584a5465">mxf_user_comments_local_tag</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;priv_data;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;codecpar-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a> &amp;&amp; !sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a4c2ac9df6d0abe6c48a46937a694bfa7">avc_intra</a>) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            avc_tags_count = <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxfenc_8c.html#af4e06a11b91ff978fecd6b1614758a70">mxf_avc_subdescriptor_local_tags</a>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavf__core.html#ga2c3404067d7e9bc7b8443e3f58cf8e65">av_stream_get_side_data</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a5fe6406e07337dcb0125bd03fba7ea2c">AV_PKT_DATA_MASTERING_DISPLAY_METADATA</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            mastering_tags_count = <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxf_8c.html#a127504a310dad716eb3a83a6e846c338">ff_mxf_mastering_display_local_tags</a>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    local_tag_number += avc_tags_count;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    local_tag_number += mastering_tags_count;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a760f90cd43e5c03cf9e92eb1d3e27f81">primer_pack_key</a>, 16);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, local_tag_number * 18 + 8);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, local_tag_number); <span class="comment">// local_tag num</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 18); <span class="comment">// item size, always 18 according to the specs</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxfenc_8c.html#a69c5f8dd5f11d60cfc0946036205b497">mxf_local_tag_batch</a>); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#a69c5f8dd5f11d60cfc0946036205b497">mxf_local_tag_batch</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].local_tag);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a69c5f8dd5f11d60cfc0946036205b497">mxf_local_tag_batch</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="mxfenc_8c.html#a99613136a67953261099533d962f9ac4">uid</a>, 16);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">store_user_comments</a>)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxfenc_8c.html#a86d34ba6bc49f7ebf36026db584a5465">mxf_user_comments_local_tag</a>); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#a86d34ba6bc49f7ebf36026db584a5465">mxf_user_comments_local_tag</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].local_tag);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a86d34ba6bc49f7ebf36026db584a5465">mxf_user_comments_local_tag</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="mxfenc_8c.html#a99613136a67953261099533d962f9ac4">uid</a>, 16);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (avc_tags_count &gt; 0)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="mxfenc_8c.html#abd988af8d201ce379d51c67c431ca0df">mxf_write_local_tags</a>(pb, <a class="code" href="mxfenc_8c.html#af4e06a11b91ff978fecd6b1614758a70">mxf_avc_subdescriptor_local_tags</a>, avc_tags_count);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (mastering_tags_count &gt; 0)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <a class="code" href="mxfenc_8c.html#abd988af8d201ce379d51c67c431ca0df">mxf_write_local_tags</a>(pb, <a class="code" href="mxf_8c.html#a127504a310dad716eb3a83a6e846c338">ff_mxf_mastering_display_local_tags</a>, mastering_tags_count);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">  548</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="keywordtype">int</span> <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">  554</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;{</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a0be5317992ecb9de3b88fccadd559b0c">header_metadata_key</a>, 13);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="avio_8h.html#a81a5cfb941abfe2b83a30be4f86ad06d">avio_wb24</a>(pb, <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;}</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a8f979a54e9cca2c61af2a119d630fd8c">  560</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_m_x_f_codec_u_l.html">MXFCodecUL</a> *<a class="code" href="mxfenc_8c.html#a8f979a54e9cca2c61af2a119d630fd8c">mxf_get_codec_ul_by_id</a>(<span class="keyword">const</span> <a class="code" href="struct_m_x_f_codec_u_l.html">MXFCodecUL</a> *uls, <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;{</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">while</span> (uls-&gt;<a class="code" href="struct_m_x_f_codec_u_l.html#a17df098ab7ab50e73f8c29e9c962984a">uid</a>[0]) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == uls-&gt;<a class="code" href="struct_m_x_f_codec_u_l.html#ad03fbea9a6e5c8865c85e3765d45d608">id</a>)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        uls++;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">return</span> uls;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;}</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">//one EC -&gt; one descriptor. N ECs -&gt; MultipleDescriptor + N descriptors</span></div>
<div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ad98b63994ecf2539e238039fdaba355d">  571</a></span>&#160;<span class="preprocessor">#define DESCRIPTOR_COUNT(essence_container_count) \</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="preprocessor">    (essence_container_count &gt; 1 ? essence_container_count + 1 : essence_container_count)</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a27a022aaf43fc28d9337cc8729a71d98">  574</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a27a022aaf43fc28d9337cc8729a71d98">mxf_write_essence_container_refs</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;{</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(pb, <a class="code" href="mxfenc_8c.html#ad98b63994ecf2539e238039fdaba355d">DESCRIPTOR_COUNT</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;essence_container_count));</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,<a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;essence container count:%d\n&quot;</span>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;essence_container_count);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;priv_data;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="comment">// check first track of essence container type and only write it once</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>[15] != 0)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, *sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a>, 16);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;essence_container_count == 1)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;essence_container_count &gt; 1)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#aedcb909b3190b1c56c69ad69b2e35296">multiple_desc_ul</a>, 16);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#adb887ad69198a655b7ed37086b9b0820">  596</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#adb887ad69198a655b7ed37086b9b0820">mxf_write_preface</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;{</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x012f00);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;preface key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 138 + 16LL * <a class="code" href="mxfenc_8c.html#ad98b63994ecf2539e238039fdaba355d">DESCRIPTOR_COUNT</a>(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">essence_container_count</a>));</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">// write preface set uid</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edaadb07486538b06c6f8f7df7e71bbf996">Preface</a>, 0);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;preface uid&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="comment">// last modified date</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3B02);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#adeaa0889ffac2d991bf10d37f71455d8">timestamp</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// write version</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 2, 0x3B05);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 259); <span class="comment">// v1.3</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// Object Model Version</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3B07);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 1);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// write identification_refs</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16 + 8, 0x3B06);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(pb, 1);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edad5ce1d4310219ec91bbfc4a3264afbc8">Identification</a>, 0);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">// write content_storage_refs</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3B03);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edae4948874833872e69ee04984a638d450">ContentStorage</a>, 0);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// operational pattern</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3B09);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a1955ef5f8647033c43ee2a3272b3f31c">opatom_ul</a>, 16);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#ac17cc209ad4b6ba56510421df27287db">op1a_ul</a>, 16);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// write essence_container_refs</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8 + 16LL * <a class="code" href="mxfenc_8c.html#ad98b63994ecf2539e238039fdaba355d">DESCRIPTOR_COUNT</a>(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">essence_container_count</a>), 0x3B0A);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="mxfenc_8c.html#a27a022aaf43fc28d9337cc8729a71d98">mxf_write_essence_container_refs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">// write dm_scheme_refs</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3B0B);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"> * Returns the length of the UTF-16 string, in 16-bit characters, that would result</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"> * from decoding the utf-8 string.</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a87b9b608743045c9a90243ccc391d347">  651</a></span>&#160;<span class="keyword">static</span> uint64_t <a class="code" href="mxfenc_8c.html#a87b9b608743045c9a90243ccc391d347">mxf_utf16len</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *utf8_str)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;{</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *q = utf8_str;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    uint64_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = 0;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">while</span> (*q) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        uint32_t ch;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <a class="code" href="common_8h.html#a1a2fd8cd42afb00c9f69562f52b1ae4b">GET_UTF8</a>(ch, *q++, <span class="keywordflow">goto</span> invalid;)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">if</span> (ch &lt; 0x10000)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>++;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> += 2;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;invalid:</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid UTF8 sequence in mxf_utf16len\n\n&quot;</span>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> += 1;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;}</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"> * Returns the calculated length a local tag containing an utf-8 string as utf-16</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a7d8935701eb5e62bb95109bff0ac6dff">  673</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a7d8935701eb5e62bb95109bff0ac6dff">mxf_utf16_local_tag_length</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *utf8_str)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    uint64_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">if</span> (!utf8_str)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="mxfenc_8c.html#a87b9b608743045c9a90243ccc391d347">mxf_utf16len</a>(utf8_str);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt;= UINT16_MAX/2) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;utf16 local tag size %&quot;</span>PRIx64<span class="stringliteral">&quot; invalid (too large), ignoring\n&quot;</span>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">return</span> 4 + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> * 2;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment"> * Write a local tag containing an utf-8 string as utf-16</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a6e3310f396e18fcca830326295a81572">  692</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a6e3310f396e18fcca830326295a81572">mxf_write_local_tag_utf16</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, <span class="keywordtype">int</span> <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;{</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    uint64_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="mxfenc_8c.html#a87b9b608743045c9a90243ccc391d347">mxf_utf16len</a>(<a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt;= UINT16_MAX/2) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;utf16 local tag size %&quot;</span>PRIx64<span class="stringliteral">&quot; invalid (too large), ignoring\n&quot;</span>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>*2, <a class="code" href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="avio_8h.html#acf3a933e43bd56dcf671a6bc0c897bda">avio_put_str16be</a>(pb, <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ae4dbbfcf3337bfa003e5dd8d0f804c40">  705</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ae4dbbfcf3337bfa003e5dd8d0f804c40">store_version</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>){</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#a2fa1d95841e62af509ba733a11c1b25b">AVFMT_FLAG_BITEXACT</a>) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 0); <span class="comment">// major</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 0); <span class="comment">// minor</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 0); <span class="comment">// tertiary</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="libavformat_2version_8h.html#a0d89981a751ac1abca0f9a08ec7e043f">LIBAVFORMAT_VERSION_MAJOR</a>); <span class="comment">// major</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="libavformat_2version_8h.html#aa45868b1be1d747ba7f836a67eff1df5">LIBAVFORMAT_VERSION_MINOR</a>); <span class="comment">// minor</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="libavformat_2version_8h.html#a3224be1c325e29c7ed5c1f69f5a4d343">LIBAVFORMAT_VERSION_MICRO</a>); <span class="comment">// tertiary</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 0); <span class="comment">// patch</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 0); <span class="comment">// release</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a201f2b9694bd26ceb99c8d5f8bcc9d78">  721</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a201f2b9694bd26ceb99c8d5f8bcc9d78">mxf_write_identification</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *company = <span class="stringliteral">&quot;FFmpeg&quot;</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *product = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat != &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a> ? <span class="stringliteral">&quot;OP1a Muxer&quot;</span> : <span class="stringliteral">&quot;OPAtom Muxer&quot;</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordtype">int</span> length;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x013000);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;identification key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#a2fa1d95841e62af509ba733a11c1b25b">AVFMT_FLAG_BITEXACT</a> ?</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="stringliteral">&quot;0.0.0&quot;</span> : <a class="code" href="group__preproc__misc.html#ga700cb39b719fc7069d15c134129b1ca0">AV_STRINGIFY</a>(<a class="code" href="libavformat_2version_8h.html#a82f92d7f1617b4f78bf94942c664dead">LIBAVFORMAT_VERSION</a>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    length = 100 +<a class="code" href="mxfenc_8c.html#a7d8935701eb5e62bb95109bff0ac6dff">mxf_utf16_local_tag_length</a>(company) +</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                  <a class="code" href="mxfenc_8c.html#a7d8935701eb5e62bb95109bff0ac6dff">mxf_utf16_local_tag_length</a>(product) +</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                  <a class="code" href="mxfenc_8c.html#a7d8935701eb5e62bb95109bff0ac6dff">mxf_utf16_local_tag_length</a>(<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, length);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// write uid</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edad5ce1d4310219ec91bbfc4a3264afbc8">Identification</a>, 0);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;identification uid&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// write generation uid</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C09);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edad5ce1d4310219ec91bbfc4a3264afbc8">Identification</a>, 1);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="mxfenc_8c.html#a6e3310f396e18fcca830326295a81572">mxf_write_local_tag_utf16</a>(pb, 0x3C01, company); <span class="comment">// Company Name</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <a class="code" href="mxfenc_8c.html#a6e3310f396e18fcca830326295a81572">mxf_write_local_tag_utf16</a>(pb, 0x3C02, product); <span class="comment">// Product Name</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 10, 0x3C03); <span class="comment">// Product Version</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="mxfenc_8c.html#ae4dbbfcf3337bfa003e5dd8d0f804c40">store_version</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="mxfenc_8c.html#a6e3310f396e18fcca830326295a81572">mxf_write_local_tag_utf16</a>(pb, 0x3C04, <a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a>); <span class="comment">// Version String</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// write product uid</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C05);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edad5ce1d4310219ec91bbfc4a3264afbc8">Identification</a>, 2);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="comment">// modification date</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3C06);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#adeaa0889ffac2d991bf10d37f71455d8">timestamp</a>);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 10, 0x3C07); <span class="comment">// Toolkit Version</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="mxfenc_8c.html#ae4dbbfcf3337bfa003e5dd8d0f804c40">store_version</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a569743a4b5d32c82e96994cda01ce22e">  768</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a569743a4b5d32c82e96994cda01ce22e">mxf_write_content_storage</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_m_x_f_package.html">MXFPackage</a> *packages, <span class="keywordtype">int</span> package_count)</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;{</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x011800);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;content storage key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 60 + (16 * package_count));</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">// write uid</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edae4948874833872e69ee04984a638d450">ContentStorage</a>, 0);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;content storage uid&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="comment">// write package reference</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16 * package_count + 8, 0x1901);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(pb, package_count);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; package_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, packages[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>, packages[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].instance);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="comment">// write essence container data</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8 + 16, 0x1902);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(pb, 1);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda8750083ee9d196596a1eadbe4e7d0ba7">EssenceContainerData</a>, 0);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;}</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a5044662a9f8237ed8c7e8f91202ecce9">  795</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a5044662a9f8237ed8c7e8f91202ecce9">mxf_write_track</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_m_x_f_package.html">MXFPackage</a> *package)</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;{</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x013b00);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;track key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 80);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">// write track uid</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="struct_track.html">Track</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a>);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;track uid&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="comment">// write track id</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x4801);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>+2);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="comment">// write track number</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x4804);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">if</span> (package-&gt;<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a> == <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda3bd9cdf56de2c5fd5694df86e513e353">MaterialPackage</a>)</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0); <span class="comment">// track number of material package is 0</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a> + 12, 4);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="comment">// write edit rate</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x4B01);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">if</span> (st == mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>.<a class="code" href="struct_a_v_timecode.html#a96510357827972576efb578725affb89">rate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>.<a class="code" href="struct_a_v_timecode.html#a96510357827972576efb578725affb89">rate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="comment">// write origin</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x4B02);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">// write sequence refs</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x4803);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda16fc0d03fb7ae5b1e8408b4716576cd4">Sequence</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a>);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;}</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#acc13aa8ddaadc412076802e869ecd1fd">  841</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#acc13aa8ddaadc412076802e869ecd1fd">smpte_12m_timecode_track_data_ul</a>[] = { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x01,0x03,0x02,0x01,0x01,0x00,0x00,0x00 };</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a7be7ba895855b1f3e3a15a446026031a">  843</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a7be7ba895855b1f3e3a15a446026031a">mxf_write_common_fields</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;{</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="comment">// find data define uls</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x0201);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (st == mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#acc13aa8ddaadc412076802e869ecd1fd">smpte_12m_timecode_track_data_ul</a>, 16);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_m_x_f_codec_u_l.html">MXFCodecUL</a> *data_def_ul = <a class="code" href="mxfenc_8c.html#a8f979a54e9cca2c61af2a119d630fd8c">mxf_get_codec_ul_by_id</a>(<a class="code" href="mxf_8c.html#a015d9e23a0437e8adb8801e0681b9c38">ff_mxf_data_definition_uls</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, data_def_ul-&gt;<a class="code" href="struct_m_x_f_codec_u_l.html#a17df098ab7ab50e73f8c29e9c962984a">uid</a>, 16);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// write duration</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x0202);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">if</span> (st != mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a> / mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a1e414bd816f6ee8013d104eff865bb98">duration</a>);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;}</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; </div>
<div class="line"><a name="l00867"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aa39aa122885b285822e1a28805d5b850">  867</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#aa39aa122885b285822e1a28805d5b850">mxf_write_sequence</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_m_x_f_package.html">MXFPackage</a> *package)</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;{</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keyword">enum</span> <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255ed">MXFMetadataSetType</a> component;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x010f00);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;sequence key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 80);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda16fc0d03fb7ae5b1e8408b4716576cd4">Sequence</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;sequence uid&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <a class="code" href="mxfenc_8c.html#a7be7ba895855b1f3e3a15a446026031a">mxf_write_common_fields</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="comment">// write structural component</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16 + 8, 0x1001);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(pb, 1);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">if</span> (st == mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>)</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        component = <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edabd339cc28c554f191a8c4c9d954bd440">TimecodeComponent</a>;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        component = <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda44c519a3ea4c29e34ae5d26b37e059f3">SourceClip</a>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, component, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a>);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;}</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a3ebbb4a4ec6c23227be7bffbbeb36b03">  894</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a3ebbb4a4ec6c23227be7bffbbeb36b03">mxf_write_timecode_component</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_m_x_f_package.html">MXFPackage</a> *package)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;{</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x011400);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 75);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="comment">// UID</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edabd339cc28c554f191a8c4c9d954bd440">TimecodeComponent</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a>);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="mxfenc_8c.html#a7be7ba895855b1f3e3a15a446026031a">mxf_write_common_fields</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="comment">// Start Time Code</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x1501);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>.<a class="code" href="struct_a_v_timecode.html#af467d05fd293b6206e635e453b1f524a">start</a>);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="comment">// Rounded Time Code Base</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 2, 0x1502);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ab12f65a4ff35a10cfd22b144667e91fd">timecode_base</a>);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="comment">// Drop Frame</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x1503);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, !!(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>.<a class="code" href="struct_a_v_timecode.html#a76c634043ddfaa9b5772af8286e76216">flags</a> &amp; <a class="code" href="timecode_8h.html#ad0e6464512b7849a2d14593708079219a4cacf5e87e2f19987c5e931be20a5c33">AV_TIMECODE_FLAG_DROPFRAME</a>));</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;}</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a203618d89dd07a6193dc04f2c9af1dcc">  921</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a203618d89dd07a6193dc04f2c9af1dcc">mxf_write_structural_component</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_m_x_f_package.html">MXFPackage</a> *package)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;{</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x011100);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;sturctural component key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 108);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// write uid</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda44c519a3ea4c29e34ae5d26b37e059f3">SourceClip</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;structural component uid&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <a class="code" href="mxfenc_8c.html#a7be7ba895855b1f3e3a15a446026031a">mxf_write_common_fields</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment">// write start_position</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x1201);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment">// write source package uid, end of the reference</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 32, 0x1101);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> (!package-&gt;<a class="code" href="struct_m_x_f_package.html#a0225324fd12bfcb855f3c8c289e4ef42">ref</a>) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <a class="code" href="mxfenc_8c.html#a98780f74c4764e08676c9746438eb3fc">mxf_write_umid</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, package-&gt;<a class="code" href="struct_m_x_f_package.html#a0225324fd12bfcb855f3c8c289e4ef42">ref</a>-&gt;<a class="code" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">instance</a>);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="comment">// write source track id</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x1102);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (package-&gt;<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a> == <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda92104cac10f46af29187f1242563cb70">SourcePackage</a> &amp;&amp; !package-&gt;<a class="code" href="struct_m_x_f_package.html#a0225324fd12bfcb855f3c8c289e4ef42">ref</a>)</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>+2);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a595fd1389ab86862e2c03c8a4d68bd2c">  958</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a595fd1389ab86862e2c03c8a4d68bd2c">mxf_write_tape_descriptor</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;{</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x012e00);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;tape descriptor key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 20);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda443dda9db12330ccb89369c2e3c227cb">TapeDescriptor</a>, 0);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;tape_desc uid&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;}</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ae5ea37451022259cf052c449c25ebf91">  971</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ae5ea37451022259cf052c449c25ebf91">mxf_write_multi_descriptor</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;{</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ul;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x014400);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;multiple descriptor key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 64 + 16LL * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda210e7c89f1682e9681d460815fb0f5de">MultipleDescriptor</a>, 0);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;multi_desc uid&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment">// write sample rate</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3001);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="comment">// write essence container ul</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3004);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">essence_container_count</a> &gt; 1)</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        ul = <a class="code" href="mxfenc_8c.html#aedcb909b3190b1c56c69ad69b2e35296">multiple_desc_ul</a>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[0]-&gt;priv_data;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        ul = *sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, ul, 16);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="comment">// write sub descriptor refs</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams * 16 + 8, 0x3F01);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edab0d193d188b54c7ebbfb57f19594d2ad">SubDescriptor</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;}</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#abcbd6bdd2e6117ed9dceaa3063df5476"> 1008</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mxfenc_8c.html#abcbd6bdd2e6117ed9dceaa3063df5476">mxf_write_generic_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;{</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, 16);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(pb, 0);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edab0d193d188b54c7ebbfb57f19594d2ad">SubDescriptor</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3006);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>+2);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3001);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a>) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a> ||</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be">AV_CODEC_ID_PCM_S24LE</a>) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 1);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3004);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, *sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a>, 16);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;}</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ae17c511e11351a32713eace7567fa90e"> 1046</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#ae17c511e11351a32713eace7567fa90e">mxf_s436m_anc_descriptor_key</a> = { 0x06,0x0e,0x2b,0x34,0x02,0x53,0x01,0x01,0x0d,0x01,0x01,0x01,0x01,0x01,0x5c,0x00 };</div>
<div class="line"><a name="l01047"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a5b6ec89069b7b694484bd889eb19943f"> 1047</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a5b6ec89069b7b694484bd889eb19943f">mxf_mpegvideo_descriptor_key</a> = { 0x06,0x0E,0x2B,0x34,0x02,0x53,0x01,0x01,0x0d,0x01,0x01,0x01,0x01,0x01,0x51,0x00 };</div>
<div class="line"><a name="l01048"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a9980207fba2926d9e201c34288faff16"> 1048</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a9980207fba2926d9e201c34288faff16">mxf_wav_descriptor_key</a>       = { 0x06,0x0E,0x2B,0x34,0x02,0x53,0x01,0x01,0x0d,0x01,0x01,0x01,0x01,0x01,0x48,0x00 };</div>
<div class="line"><a name="l01049"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ab720a7ccd4eb71e55b78438b7cf56d73"> 1049</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#ab720a7ccd4eb71e55b78438b7cf56d73">mxf_aes3_descriptor_key</a>      = { 0x06,0x0E,0x2B,0x34,0x02,0x53,0x01,0x01,0x0d,0x01,0x01,0x01,0x01,0x01,0x47,0x00 };</div>
<div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#af733d1c4b9d87e1f43bcc30e7121e6e8"> 1050</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#af733d1c4b9d87e1f43bcc30e7121e6e8">mxf_cdci_descriptor_key</a>      = { 0x06,0x0E,0x2B,0x34,0x02,0x53,0x01,0x01,0x0D,0x01,0x01,0x01,0x01,0x01,0x28,0x00 };</div>
<div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a26db80bae59f037980342c37a0975a75"> 1051</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a26db80bae59f037980342c37a0975a75">mxf_generic_sound_descriptor_key</a> = { 0x06,0x0E,0x2B,0x34,0x02,0x53,0x01,0x01,0x0D,0x01,0x01,0x01,0x01,0x01,0x42,0x00 };</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a7d087f41a16a84ed33a1b194207c8836"> 1053</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a7d087f41a16a84ed33a1b194207c8836">mxf_avc_subdescriptor_key</a> = { 0x06,0x0E,0x2B,0x34,0x02,0x53,0x01,0x01,0x0d,0x01,0x01,0x01,0x01,0x01,0x6E,0x00 };</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235"> 1055</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t <a class="code" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a>(<a class="code" href="struct_a_v_rational.html">AVRational</a> q)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;{</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">return</span> av_clip_uint16(<a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(q.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, <a class="code" href="mxf_8h.html#a9f4b0967374c0cb6078150bad6202d5d">FF_MXF_MASTERING_CHROMA_DEN</a>, q.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>));</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;}</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a76367d3e9f707949e068b26e16f354df"> 1060</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="mxfenc_8c.html#a76367d3e9f707949e068b26e16f354df">rescale_mastering_luma</a>(<a class="code" href="struct_a_v_rational.html">AVRational</a> q)</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;{</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(q.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, <a class="code" href="mxf_8h.html#ab2181937b94428311349b5dd301df42a">FF_MXF_MASTERING_LUMA_DEN</a>, q.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;}</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a1ff9126e75ce0b40c7243e0984762345"> 1065</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mxfenc_8c.html#a1ff9126e75ce0b40c7243e0984762345">mxf_write_cdci_common</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;{</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordtype">int</span> stored_width = 0;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordtype">int</span> stored_height = (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>+15)/16*16;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordtype">int</span> display_height;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordtype">int</span> f1, f2;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_m_x_f_codec_u_l.html">MXFCodecUL</a> *color_primaries_ul;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_m_x_f_codec_u_l.html">MXFCodecUL</a> *color_trc_ul;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_m_x_f_codec_u_l.html">MXFCodecUL</a> *color_space_ul;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#abcbd6bdd2e6117ed9dceaa3063df5476">mxf_write_generic_desc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *side_data;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    color_primaries_ul = <a class="code" href="mxfenc_8c.html#a8f979a54e9cca2c61af2a119d630fd8c">mxf_get_codec_ul_by_id</a>(<a class="code" href="mxf_8c.html#abf91b8102b35b2d56cf91fd986ac5b5e">ff_mxf_color_primaries_uls</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#aa884cae3fd16b30c61201a686664f96b">color_primaries</a>);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    color_trc_ul       = <a class="code" href="mxfenc_8c.html#a8f979a54e9cca2c61af2a119d630fd8c">mxf_get_codec_ul_by_id</a>(<a class="code" href="mxf_8c.html#a5bd22d0dc3c12b536935e752f8ba5ae4">ff_mxf_color_trc_uls</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#ac25ed8394e1efdbbcf28932ff0020893">color_trc</a>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    color_space_ul     = <a class="code" href="mxfenc_8c.html#a8f979a54e9cca2c61af2a119d630fd8c">mxf_get_codec_ul_by_id</a>(<a class="code" href="mxf_8c.html#a4cbc3df1dc3453dba47917475cb0bee0">ff_mxf_color_space_uls</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a020398a4963e932853cefc169d90456d">color_space</a>);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06">AV_CODEC_ID_DVVIDEO</a>) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> == 1080)</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            stored_width = 1920;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> == 720)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            stored_width = 1280;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span> (!stored_width)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        stored_width = (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>+15)/16*16;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3203);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, stored_width);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3202);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, stored_height&gt;&gt;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a>) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="comment">//Stored F2 Offset</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3216);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="comment">//Image Start Offset</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3213);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="comment">//Image End Offset</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3214);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">//Sampled width</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3205);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, stored_width);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">//Samples height</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3204);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>&gt;&gt;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">//Sampled X Offset</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3206);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">//Sampled Y Offset</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3207);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3209);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, stored_width);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> == 608) <span class="comment">// PAL + VBI</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        display_height = 576;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> == 512)  <span class="comment">// NTSC + VBI</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        display_height = 486;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        display_height = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3208);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, display_height&gt;&gt;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="comment">// display X offset</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x320A);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="comment">// display Y offset</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x320B);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> - display_height)&gt;&gt;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>) {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        <span class="comment">//Display F2 Offset</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3217);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, -((st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> - display_height)&amp;1));</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">// component depth</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3301);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a>);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">// horizontal subsampling</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3302);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a3da809d545eba5fc3a8e20fa6d280e41">h_chroma_sub_sample</a>);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="comment">// vertical subsampling</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3308);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aa8f0f132a2f2f558abb71dea8f4e7cec">v_chroma_sub_sample</a>);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="comment">// color siting</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x3303);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">color_siting</a>);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">// Padding Bits</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 2, 0x3307);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 0);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">color_range</a> != <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aaa374becbc2b5ee0bc1886048d151ea3e">AVCOL_RANGE_UNSPECIFIED</a>) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordtype">int</span> black = 0,</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            white = (1&lt;&lt;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a>) - 1,</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            <a class="code" href="structcolor.html">color</a> = (1&lt;&lt;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a>);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">color_range</a> == <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a>) {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            black = 1   &lt;&lt; (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> - 4);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            white = 235 &lt;&lt; (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> - 8);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <a class="code" href="structcolor.html">color</a> = (14 &lt;&lt; (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> - 4)) + 1;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        }</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3304);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, black);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3305);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, white);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3306);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, <a class="code" href="structcolor.html">color</a>);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ade341374143ad5db0fd8ea1eb297fbbd">signal_standard</a>) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x3215);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ade341374143ad5db0fd8ea1eb297fbbd">signal_standard</a>);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    }</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">// frame layout</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x320C);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160; </div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="comment">// video line map</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keywordflow">switch</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>) {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">case</span>  576: f1 = 23; f2 = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06">AV_CODEC_ID_DVVIDEO</a> ? 335 : 336; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">case</span>  608: f1 =  7; f2 = 320; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordflow">case</span>  480: f1 = 20; f2 = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06">AV_CODEC_ID_DVVIDEO</a> ? 285 : 283; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">case</span>  512: f1 =  7; f2 = 270; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">case</span>  720: f1 = 26; f2 =   0; <span class="keywordflow">break</span>; <span class="comment">// progressive</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">case</span> 1080: f1 = 21; f2 = 584; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">default</span>:   f1 =  0; f2 =   0; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a> &amp;&amp; f2) {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        f2  = 0;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        f1 *= 2;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x320D);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 2);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 4);</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, f1);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, f2);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x320E);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span> (color_primaries_ul-&gt;<a class="code" href="struct_m_x_f_codec_u_l.html#a17df098ab7ab50e73f8c29e9c962984a">uid</a>[0]) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3219);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, color_primaries_ul-&gt;<a class="code" href="struct_m_x_f_codec_u_l.html#a17df098ab7ab50e73f8c29e9c962984a">uid</a>, 16);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    };</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordflow">if</span> (color_trc_ul-&gt;<a class="code" href="struct_m_x_f_codec_u_l.html#a17df098ab7ab50e73f8c29e9c962984a">uid</a>[0]) {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3210);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, color_trc_ul-&gt;<a class="code" href="struct_m_x_f_codec_u_l.html#a17df098ab7ab50e73f8c29e9c962984a">uid</a>, 16);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    };</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">if</span> (color_space_ul-&gt;<a class="code" href="struct_m_x_f_codec_u_l.html#a17df098ab7ab50e73f8c29e9c962984a">uid</a>[0]) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x321A);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, color_space_ul-&gt;<a class="code" href="struct_m_x_f_codec_u_l.html#a17df098ab7ab50e73f8c29e9c962984a">uid</a>, 16);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    };</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160; </div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3201);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, *sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a>, 16);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="comment">// Mastering Display metadata</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    side_data = <a class="code" href="group__lavf__core.html#ga2c3404067d7e9bc7b8443e3f58cf8e65">av_stream_get_side_data</a>(st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a5fe6406e07337dcb0125bd03fba7ea2c">AV_PKT_DATA_MASTERING_DISPLAY_METADATA</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span> (side_data) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_a_v_mastering_display_metadata.html">AVMasteringDisplayMetadata</a> *metadata = (<span class="keyword">const</span> <a class="code" href="struct_a_v_mastering_display_metadata.html">AVMasteringDisplayMetadata</a>*)side_data;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="keywordflow">if</span> (metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a0e30962e66d883ddba77fac5af55d3af">has_primaries</a>) {</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 12, <a class="code" href="mxf_8c.html#a127504a310dad716eb3a83a6e846c338">ff_mxf_mastering_display_local_tags</a>[0].local_tag);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[0][0]));</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[0][1]));</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[1][0]));</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[1][1]));</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[2][0]));</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">display_primaries</a>[2][1]));</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, <a class="code" href="mxf_8c.html#a127504a310dad716eb3a83a6e846c338">ff_mxf_mastering_display_local_tags</a>[1].local_tag);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a968384052f48e91fc57b3c61b9f68224">white_point</a>[0]));</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a968384052f48e91fc57b3c61b9f68224">white_point</a>[1]));</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Not writing mastering display primaries. Missing data.\n&quot;</span>);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <span class="keywordflow">if</span> (metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#addf45817ef0970905e650aff3907ce4d">has_luminance</a>) {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, <a class="code" href="mxf_8c.html#a127504a310dad716eb3a83a6e846c338">ff_mxf_mastering_display_local_tags</a>[2].local_tag);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, <a class="code" href="mxfenc_8c.html#a76367d3e9f707949e068b26e16f354df">rescale_mastering_luma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a45890b654337321044a5b13c5e5961c5">max_luminance</a>));</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, <a class="code" href="mxf_8c.html#a127504a310dad716eb3a83a6e846c338">ff_mxf_mastering_display_local_tags</a>[3].local_tag);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, <a class="code" href="mxfenc_8c.html#a76367d3e9f707949e068b26e16f354df">rescale_mastering_luma</a>(metadata-&gt;<a class="code" href="struct_a_v_mastering_display_metadata.html#a4ad2e7f456d7763060c25e92be573341">min_luminance</a>));</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Not writing mastering display luminances. Missing data.\n&quot;</span>);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        }</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a7135baa21488bfd2b602c415ee5f0a07">field_dominance</a>) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x3212);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a7135baa21488bfd2b602c415ee5f0a07">field_dominance</a>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a> &amp;&amp; !sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a4c2ac9df6d0abe6c48a46937a694bfa7">avc_intra</a>) {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="comment">// write avc sub descriptor ref</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8 + 16, 0x8100);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(pb, 1);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edaf740a58d57e374e6f88ded837d1cd8a1">AVCSubDescriptor</a>, 0);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;}</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0"> 1289</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb, int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;{</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    int64_t cur_pos = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = cur_pos - <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> - 4, SEEK_SET);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(pb, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, cur_pos, SEEK_SET);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;}</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aea62f4c15fefa689b3c63bb039fccf50"> 1298</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#aea62f4c15fefa689b3c63bb039fccf50">mxf_write_avc_subdesc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;{</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a7d087f41a16a84ed33a1b194207c8836">mxf_avc_subdescriptor_key</a>, 16);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(pb, 0);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edaf740a58d57e374e6f88ded837d1cd8a1">AVCSubDescriptor</a>, 0);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x8200);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0xFF); <span class="comment">// AVC Decoding Delay, unknown</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x8201);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">profile</a>); <span class="comment">// AVC Profile</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x8202);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">level</a>); <span class="comment">// AVC Level</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ace13217324bdb3d39dcc81b95a6953d8"> 1322</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ace13217324bdb3d39dcc81b95a6953d8">mxf_write_cdci_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;{</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#a1ff9126e75ce0b40c7243e0984762345">mxf_write_cdci_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="mxfenc_8c.html#af733d1c4b9d87e1f43bcc30e7121e6e8">mxf_cdci_descriptor_key</a>);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <a class="code" href="mxfenc_8c.html#aea62f4c15fefa689b3c63bb039fccf50">mxf_write_avc_subdesc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aa0663cfca8e5954f89ef979ccd31ef34"> 1332</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#aa0663cfca8e5954f89ef979ccd31ef34">mxf_write_h264_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;{</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a4c2ac9df6d0abe6c48a46937a694bfa7">avc_intra</a>) {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <a class="code" href="mxfenc_8c.html#a882e6b5bc070deca2cbd894aefd8e3d6">mxf_write_mpegvideo_desc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#a1ff9126e75ce0b40c7243e0984762345">mxf_write_cdci_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="mxfenc_8c.html#af733d1c4b9d87e1f43bcc30e7121e6e8">mxf_cdci_descriptor_key</a>);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <a class="code" href="mxfenc_8c.html#aea62f4c15fefa689b3c63bb039fccf50">mxf_write_avc_subdesc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    }</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;}</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a58d581a92c475354ac3885da0d66aaa1"> 1344</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a58d581a92c475354ac3885da0d66aaa1">mxf_write_s436m_anc_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;{</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#abcbd6bdd2e6117ed9dceaa3063df5476">mxf_write_generic_desc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="mxfenc_8c.html#ae17c511e11351a32713eace7567fa90e">mxf_s436m_anc_descriptor_key</a>);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;}</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160; </div>
<div class="line"><a name="l01350"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a882e6b5bc070deca2cbd894aefd8e3d6"> 1350</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a882e6b5bc070deca2cbd894aefd8e3d6">mxf_write_mpegvideo_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;{</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordtype">int</span> profile_and_level = (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">profile</a>&lt;&lt;4) | st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">level</a>;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#a1ff9126e75ce0b40c7243e0984762345">mxf_write_cdci_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="mxfenc_8c.html#a5b6ec89069b7b694484bd889eb19943f">mxf_mpegvideo_descriptor_key</a>);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; </div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        <span class="comment">// bit rate</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x8000);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">video_bit_rate</a>);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="comment">// profile and level</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x8007);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <span class="keywordflow">if</span> (!st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">profile</a>)</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            profile_and_level |= 0x80; <span class="comment">// escape bit</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, profile_and_level);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <span class="comment">// low delay</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x8003);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a74646711b0aac1657fece64eaafd47a3">low_delay</a>);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <span class="comment">// closed gop</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x8004);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab0441da511e6df50ad7c314d35d4f673">seq_closed_gop</a>);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <span class="comment">// max gop</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 2, 0x8006);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a22e95b662424831c5651c0a8fcbb2d5b">max_gop</a>);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        <span class="comment">// b picture count</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 2, 0x8008);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#afe1b86e790f761f43df067fff426a088">b_picture_count</a>);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    }</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;}</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#add3060c3900aa3923b475c0e5d89075f"> 1388</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mxfenc_8c.html#add3060c3900aa3923b475c0e5d89075f">mxf_write_generic_sound_common</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;{</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordtype">int</span> show_warnings = !mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a00d740dac0f18778dc0c25be1dbde1be">footer_partition_offset</a>;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#abcbd6bdd2e6117ed9dceaa3063df5476">mxf_write_generic_desc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160; </div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3002);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a> / mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; </div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="comment">// audio locked</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x3D02);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 1);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="comment">// write audio sampling rate</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3D03);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 1);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a>) {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x3D04);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3D07);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ad78bf36b47a416d96a322ebf48953da5">channel_count</a> == -1) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="keywordflow">if</span> (show_warnings &amp;&amp; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a>) &amp;&amp; (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> != 4) &amp;&amp; (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> != 8))</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;the number of audio channels shall be 4 or 8 : the output will not comply to MXF D-10 specs, use -d10_channelcount to fix this\n&quot;</span>);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a>) {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <span class="keywordflow">if</span> (show_warnings &amp;&amp; (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ad78bf36b47a416d96a322ebf48953da5">channel_count</a> &lt; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>))</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;d10_channelcount &lt; actual number of audio channels : some channels will be discarded\n&quot;</span>);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="keywordflow">if</span> (show_warnings &amp;&amp; (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ad78bf36b47a416d96a322ebf48953da5">channel_count</a> != 4) &amp;&amp; (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ad78bf36b47a416d96a322ebf48953da5">channel_count</a> != 8))</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;d10_channelcount shall be set to 4 or 8 : the output will not comply to MXF D-10 specs\n&quot;</span>);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ad78bf36b47a416d96a322ebf48953da5">channel_count</a>);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3D01);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, <a class="code" href="group__lavc__misc.html#ga0717e7440fdb123f708082f66cd9b41d">av_get_bits_per_sample</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>));</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160; </div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;}</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a00bdf4216d0aa423556b05c9735aab94"> 1435</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="mxfenc_8c.html#a00bdf4216d0aa423556b05c9735aab94">mxf_write_wav_common</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;{</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#add3060c3900aa3923b475c0e5d89075f">mxf_write_generic_sound_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 2, 0x3D0A);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a>);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="comment">// avg bytes per sec</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3D09);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a>*st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;}</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ab07efabf9bb6a794e3e83ecb2a25d35e"> 1450</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ab07efabf9bb6a794e3e83ecb2a25d35e">mxf_write_wav_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;{</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#a00bdf4216d0aa423556b05c9735aab94">mxf_write_wav_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="mxfenc_8c.html#a9980207fba2926d9e201c34288faff16">mxf_wav_descriptor_key</a>);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;}</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a2dcb2922897d7c3d73e886d9a690c669"> 1456</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a2dcb2922897d7c3d73e886d9a690c669">mxf_write_aes3_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;{</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#a00bdf4216d0aa423556b05c9735aab94">mxf_write_wav_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="mxfenc_8c.html#ab720a7ccd4eb71e55b78438b7cf56d73">mxf_aes3_descriptor_key</a>);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;}</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160; </div>
<div class="line"><a name="l01462"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ab4d6dc3ceb1354b85d9ef3178d9e3e6e"> 1462</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ab4d6dc3ceb1354b85d9ef3178d9e3e6e">mxf_write_generic_sound_desc</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st)</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;{</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="mxfenc_8c.html#add3060c3900aa3923b475c0e5d89075f">mxf_write_generic_sound_common</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="mxfenc_8c.html#a26db80bae59f037980342c37a0975a75">mxf_generic_sound_descriptor_key</a>);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;}</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a5ec62f95987940764f1a90312e29ddbe"> 1468</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a5ec62f95987940764f1a90312e29ddbe">mxf_indirect_value_utf16le</a>[] = { 0x4c,0x00,0x02,0x10,0x01,0x00,0x00,0x00,0x00,0x06,0x0e,0x2b,0x34,0x01,0x04,0x01,0x01 };</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a88cdfc7f42496308c20b802c7842d459"> 1470</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a88cdfc7f42496308c20b802c7842d459">mxf_write_tagged_value</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="writing__filters_8txt.html#adb27990ed3d4ad300fd1dde281903508">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>)</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;{</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keywordtype">int</span> name_size = <a class="code" href="mxfenc_8c.html#a7d8935701eb5e62bb95109bff0ac6dff">mxf_utf16_local_tag_length</a>(<a class="code" href="writing__filters_8txt.html#adb27990ed3d4ad300fd1dde281903508">name</a>);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordtype">int</span> indirect_value_size = 13 + <a class="code" href="mxfenc_8c.html#a7d8935701eb5e62bb95109bff0ac6dff">mxf_utf16_local_tag_length</a>(<a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">if</span> (!name_size || indirect_value_size == 13)</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x013f00);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 24 + name_size + indirect_value_size);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160; </div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="comment">// write instance UID</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda53446dc38ef01e0a39658800907bdac3">TaggedValue</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a07a2266f217761315fd01f42bd8014a5">tagged_value_count</a>);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160; </div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="comment">// write name</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <a class="code" href="mxfenc_8c.html#a6e3310f396e18fcca830326295a81572">mxf_write_local_tag_utf16</a>(pb, 0x5001, <a class="code" href="writing__filters_8txt.html#adb27990ed3d4ad300fd1dde281903508">name</a>); <span class="comment">// Name</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160; </div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="comment">// write indirect value</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, indirect_value_size, 0x5003);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a5ec62f95987940764f1a90312e29ddbe">mxf_indirect_value_utf16le</a>, 17);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <a class="code" href="avio_8h.html#a4ff718da93c106f7ba48de1cb6b010c6">avio_put_str16le</a>(pb, <a class="code" href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a>);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a07a2266f217761315fd01f42bd8014a5">tagged_value_count</a>++;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;}</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a647b2c699f9f1ec6146811d82cae6c08"> 1499</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a647b2c699f9f1ec6146811d82cae6c08">mxf_write_user_comments</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keyword">const</span> <a class="code" href="struct_a_v_dictionary.html">AVDictionary</a> *m)</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;{</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *t = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160; </div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">while</span> ((t = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(m, <span class="stringliteral">&quot;comment_&quot;</span>, t, <a class="code" href="group__lavu__dict.html#ga341bbd1ea599dfb0510f419e5272fecc">AV_DICT_IGNORE_SUFFIX</a>))) {</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a07a2266f217761315fd01f42bd8014a5">tagged_value_count</a> &gt;= UINT16_MAX) {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;too many tagged values, ignoring remaining\n&quot;</span>);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;            <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        }</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160; </div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mxfenc_8c.html#a88cdfc7f42496308c20b802c7842d459">mxf_write_tagged_value</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, t-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#a38fc80176f8f839282bb61c03392e194">key</a> + 8, t-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>) == 0)</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;            count++;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;}</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ae496bd37b6a2ba1810db0e2d14d54fc0"> 1517</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ae496bd37b6a2ba1810db0e2d14d54fc0">mxf_write_package</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_m_x_f_package.html">MXFPackage</a> *package)</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;{</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, track_count = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams+1;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordtype">int</span> name_size = <a class="code" href="mxfenc_8c.html#a7d8935701eb5e62bb95109bff0ac6dff">mxf_utf16_local_tag_length</a>(package-&gt;<a class="code" href="struct_m_x_f_package.html#ae0412866c3499261e34f4ee0587a09d1">name</a>);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordtype">int</span> user_comment_count = 0;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160; </div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">if</span> (package-&gt;<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a> == <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda3bd9cdf56de2c5fd5694df86e513e353">MaterialPackage</a>) {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">store_user_comments</a>)</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            user_comment_count = <a class="code" href="mxfenc_8c.html#a647b2c699f9f1ec6146811d82cae6c08">mxf_write_user_comments</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x013600);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;Material Package key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 92 + name_size + (16*track_count) + (16*user_comment_count) + 12LL*mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">store_user_comments</a>);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x013700);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;Source Package key&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 112 + name_size + (16*track_count) + 12LL*mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">store_user_comments</a>); <span class="comment">// 20 bytes length for descriptor reference</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="comment">// write uid</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, package-&gt;<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a>, package-&gt;<a class="code" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">instance</a>);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;package type:%d\n&quot;</span>, package-&gt;<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a>);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;package uid&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; </div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="comment">// write package umid</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 32, 0x4401);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <a class="code" href="mxfenc_8c.html#a98780f74c4764e08676c9746438eb3fc">mxf_write_umid</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, package-&gt;<a class="code" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">instance</a>);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;package umid second part&quot;</span>, pb-&gt;<a class="code" href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">buf_ptr</a> - 16);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160; </div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="comment">// package name</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">if</span> (name_size)</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <a class="code" href="mxfenc_8c.html#a6e3310f396e18fcca830326295a81572">mxf_write_local_tag_utf16</a>(pb, 0x4402, package-&gt;<a class="code" href="struct_m_x_f_package.html#ae0412866c3499261e34f4ee0587a09d1">name</a>);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160; </div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="comment">// package creation date</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x4405);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#adeaa0889ffac2d991bf10d37f71455d8">timestamp</a>);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="comment">// package modified date</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x4404);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#adeaa0889ffac2d991bf10d37f71455d8">timestamp</a>);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160; </div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="comment">// write track refs</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, track_count*16 + 8, 0x4403);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(pb, track_count);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="comment">// these are the uuids of the tracks the will be written in mxf_write_track</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; track_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="struct_track.html">Track</a>,  mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160; </div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="comment">// write user comment refs</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">store_user_comments</a>) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, user_comment_count*16 + 8, 0x4406);</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <a class="code" href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a>(pb, user_comment_count);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; user_comment_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda53446dc38ef01e0a39658800907bdac3">TaggedValue</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a07a2266f217761315fd01f42bd8014a5">tagged_value_count</a> - user_comment_count + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    }</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="comment">// write multiple descriptor reference</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">if</span> (package-&gt;<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a> == <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda92104cac10f46af29187f1242563cb70">SourcePackage</a> &amp;&amp; package-&gt;<a class="code" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">instance</a> == 1) {</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x4701);</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams &gt; 1) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda210e7c89f1682e9681d460815fb0f5de">MultipleDescriptor</a>, 0);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;            <a class="code" href="mxfenc_8c.html#ae5ea37451022259cf052c449c25ebf91">mxf_write_multi_descriptor</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;            <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edab0d193d188b54c7ebbfb57f19594d2ad">SubDescriptor</a>, 0);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (package-&gt;<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a> == <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda92104cac10f46af29187f1242563cb70">SourcePackage</a> &amp;&amp; package-&gt;<a class="code" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">instance</a> == 2) {</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x4701);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda443dda9db12330ccb89369c2e3c227cb">TapeDescriptor</a>, 0);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <a class="code" href="mxfenc_8c.html#a595fd1389ab86862e2c03c8a4d68bd2c">mxf_write_tape_descriptor</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160; </div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment">     * for every 1 track in a package there is 1 sequence and 1 component.</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment">     * all 3 of these elements share the same instance number for generating</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment">     * there instance uuids. mxf-&gt;track_instance_count stores this value.</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">     * mxf-&gt;track_instance_count is incremented after a group of all 3 of</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="comment">     * these elements are written.</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="comment">// write timecode track</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <a class="code" href="mxfenc_8c.html#a5044662a9f8237ed8c7e8f91202ecce9">mxf_write_track</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>, package);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <a class="code" href="mxfenc_8c.html#aa39aa122885b285822e1a28805d5b850">mxf_write_sequence</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>, package);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <a class="code" href="mxfenc_8c.html#a3ebbb4a4ec6c23227be7bffbbeb36b03">mxf_write_timecode_component</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>, package);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a>++;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <a class="code" href="mxfenc_8c.html#a5044662a9f8237ed8c7e8f91202ecce9">mxf_write_track</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, package);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <a class="code" href="mxfenc_8c.html#aa39aa122885b285822e1a28805d5b850">mxf_write_sequence</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, package);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <a class="code" href="mxfenc_8c.html#a203618d89dd07a6193dc04f2c9af1dcc">mxf_write_structural_component</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, package);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a>++;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160; </div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">if</span> (package-&gt;<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a> == <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda92104cac10f46af29187f1242563cb70">SourcePackage</a> &amp;&amp; package-&gt;<a class="code" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">instance</a> == 1) {</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            <a class="code" href="mxfenc_8c.html#ac1a73cc70ad1715be653592108af0ed2">mxf_essence_container_uls</a>[sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a>].<a class="code" href="struct_m_x_f_container_essence_entry.html#a687512680f5821b55220529c98363261">write_desc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        }</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;}</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a49d0a7490ac6c609fc7b58f0f0f8d066"> 1617</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a49d0a7490ac6c609fc7b58f0f0f8d066">mxf_write_essence_container_data</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;{</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160; </div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <a class="code" href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a>(pb, 0x012300);</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 72);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A); <span class="comment">// Instance UID</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda8750083ee9d196596a1eadbe4e7d0ba7">EssenceContainerData</a>, 0);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160; </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 32, 0x2701); <span class="comment">// Linked Package UID</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <a class="code" href="mxfenc_8c.html#a98780f74c4764e08676c9746438eb3fc">mxf_write_umid</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 1);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160; </div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3F07); <span class="comment">// BodySID</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 1);</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160; </div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3F06); <span class="comment">// IndexSID</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 2);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;}</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a8c1c5bc9e8426f4fa046f30d838339cd"> 1639</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a8c1c5bc9e8426f4fa046f30d838339cd">mxf_write_header_metadata_sets</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;{</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *entry = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <a class="code" href="struct_m_x_f_package.html">MXFPackage</a> packages[3] = {{0}};</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordtype">int</span> package_count = 2;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    packages[0].<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a> = <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda3bd9cdf56de2c5fd5694df86e513e353">MaterialPackage</a>;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    packages[1].<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a> = <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda92104cac10f46af29187f1242563cb70">SourcePackage</a>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    packages[1].<a class="code" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">instance</a> = 1;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    packages[0].<a class="code" href="struct_m_x_f_package.html#a0225324fd12bfcb855f3c8c289e4ef42">ref</a> = &amp;packages[1];</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160; </div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordflow">if</span> (entry = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, <span class="stringliteral">&quot;material_package_name&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0))</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;       packages[0].<a class="code" href="struct_m_x_f_package.html#ae0412866c3499261e34f4ee0587a09d1">name</a> = entry-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160; </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordflow">if</span> (entry = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, <span class="stringliteral">&quot;file_package_name&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)) {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        packages[1].<a class="code" href="struct_m_x_f_package.html#ae0412866c3499261e34f4ee0587a09d1">name</a> = entry-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="comment">/* check if any of the streams contain a file_package_name */</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;            st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            <span class="keywordflow">if</span> (entry = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;file_package_name&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)) {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                packages[1].<a class="code" href="struct_m_x_f_package.html#ae0412866c3499261e34f4ee0587a09d1">name</a> = entry-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            }</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    entry = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, <span class="stringliteral">&quot;reel_name&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">if</span> (entry) {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        packages[2].<a class="code" href="struct_m_x_f_package.html#ae0412866c3499261e34f4ee0587a09d1">name</a> = entry-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        packages[2].<a class="code" href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">type</a> = <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda92104cac10f46af29187f1242563cb70">SourcePackage</a>;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        packages[2].<a class="code" href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">instance</a> = 2;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        packages[1].<a class="code" href="struct_m_x_f_package.html#a0225324fd12bfcb855f3c8c289e4ef42">ref</a> = &amp;packages[2];</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        package_count = 3;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    }</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <a class="code" href="mxfenc_8c.html#adb887ad69198a655b7ed37086b9b0820">mxf_write_preface</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <a class="code" href="mxfenc_8c.html#a201f2b9694bd26ceb99c8d5f8bcc9d78">mxf_write_identification</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <a class="code" href="mxfenc_8c.html#a569743a4b5d32c82e96994cda01ce22e">mxf_write_content_storage</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, packages, package_count);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">track_instance_count</a> = 0;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; package_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <a class="code" href="mxfenc_8c.html#ae496bd37b6a2ba1810db0e2d14d54fc0">mxf_write_package</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;packages[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <a class="code" href="mxfenc_8c.html#a49d0a7490ac6c609fc7b58f0f0f8d066">mxf_write_essence_container_data</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;}</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a13be66c065e3ca9ca346e824829accc1"> 1688</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="mxfenc_8c.html#a13be66c065e3ca9ca346e824829accc1">klv_fill_size</a>(uint64_t <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;{</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="keywordtype">unsigned</span> pad = <a class="code" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a> - (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &amp; (<a class="code" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a>-1));</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">if</span> (pad &lt; 20) <span class="comment">// smallest fill item possible</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="keywordflow">return</span> pad + <a class="code" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <span class="keywordflow">return</span> pad &amp; (<a class="code" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a>-1);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;}</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aee7586842abe70868842ec0cbeb69226"> 1697</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#aee7586842abe70868842ec0cbeb69226">mxf_write_index_table_segment</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;{</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, temporal_reordering = 0;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordtype">int</span> key_index = mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ae1a14a2496213ff44ded5c54c3e71dd3">last_key_index</a>;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordtype">int</span> prev_non_b_picture = 0;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="keywordtype">int</span> audio_frame_size = 0;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;edit units count %d\n&quot;</span>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>);</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a> &amp;&amp; !mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>)</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160; </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a9028ba8ee263357a969acb587481af6b">index_table_segment_key</a>, 16);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160; </div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(pb, 0);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160; </div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="comment">// instance id</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 16, 0x3C0A);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <a class="code" href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a>(pb, <a class="code" href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda4506690612b68dea1dae6e77d3a00a1e">IndexTableSegment</a>, 0);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="comment">// index edit rate</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3F0B);</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160; </div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="comment">// index start position</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3F0C);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a0f7818763fb94714b758f4cf8de59416">last_indexed_edit_unit</a>);</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="comment">// index duration</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8, 0x3F0D);</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>)</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0); <span class="comment">// index table covers whole container</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160; </div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="comment">// edit unit byte count</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3F05);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160; </div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <span class="comment">// index sid</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3F06);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 2);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160; </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">// body sid</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 4, 0x3F07);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 1);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160; </div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="comment">// real slice count - 1</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 1, 0x3F08);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, !mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>); <span class="comment">// only one slice for CBR</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="comment">// delta entry array</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8 + (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams+1)*6, 0x3F09);</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams+1); <span class="comment">// num of entries</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 6);               <span class="comment">// size of one entry</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="comment">// write system item delta entry</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0);</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0); <span class="comment">// slice entry</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0); <span class="comment">// element delta</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="comment">// write each stream delta entry</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a3518d8d631b02ae6de54c4bf2ccf2848">temporal_reordering</a>);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a3518d8d631b02ae6de54c4bf2ccf2848">temporal_reordering</a>)</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            temporal_reordering = 1;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>) {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0); <span class="comment">// slice number</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#acf2f20cf2dee7626272509a69e08306b">slice_offset</a>);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) { <span class="comment">// video track</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;            <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0); <span class="comment">// slice number</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, <a class="code" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a>); <span class="comment">// system item size including klv fill</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// audio or data track</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;            <span class="keywordflow">if</span> (!audio_frame_size) {</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                audio_frame_size = sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a>;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                audio_frame_size += <a class="code" href="mxfenc_8c.html#a13be66c065e3ca9ca346e824829accc1">klv_fill_size</a>(audio_frame_size);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            }</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 1);</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>-1)*audio_frame_size); <span class="comment">// element delta</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        }</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[0]-&gt;priv_data;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <a class="code" href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a>(pb, 8 + mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>*15, 0x3F0A);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>);  <span class="comment">// num of entries</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 15);  <span class="comment">// size of one entry</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160; </div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="keywordtype">int</span> temporal_offset = 0;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; </div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            <span class="keywordflow">if</span> (!(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> &amp; 0x33)) { <span class="comment">// I-frame</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a22e95b662424831c5651c0a8fcbb2d5b">max_gop</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a22e95b662424831c5651c0a8fcbb2d5b">max_gop</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ae1a14a2496213ff44ded5c54c3e71dd3">last_key_index</a>);</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ae1a14a2496213ff44ded5c54c3e71dd3">last_key_index</a> = key_index;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                key_index = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160; </div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            <span class="keywordflow">if</span> (temporal_reordering) {</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                <span class="keywordtype">int</span> pic_num_in_gop = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - key_index;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                <span class="keywordflow">if</span> (pic_num_in_gop != mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">temporal_ref</a>) {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                    <span class="keywordflow">for</span> (j = key_index; j &lt; mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>; j++) {</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                        <span class="keywordflow">if</span> (pic_num_in_gop == mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[j].<a class="code" href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">temporal_ref</a>)</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                    }</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                    <span class="keywordflow">if</span> (j == mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>)</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;missing frames\n&quot;</span>);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                    temporal_offset = j - key_index - pic_num_in_gop;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                }</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;            }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, temporal_offset);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            <span class="keywordflow">if</span> ((mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> &amp; 0x30) == 0x30) { <span class="comment">// back and forward prediction</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#afe1b86e790f761f43df067fff426a088">b_picture_count</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#afe1b86e790f761f43df067fff426a088">b_picture_count</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - prev_non_b_picture);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ae1a14a2496213ff44ded5c54c3e71dd3">last_key_index</a> - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, key_index - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>); <span class="comment">// key frame offset</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                <span class="keywordflow">if</span> ((mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> &amp; 0x20) == 0x20) <span class="comment">// only forward</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ae1a14a2496213ff44ded5c54c3e71dd3">last_key_index</a> = key_index;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                prev_non_b_picture = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;            }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160; </div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            <span class="keywordflow">if</span> (!(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> &amp; 0x33) &amp;&amp; <span class="comment">// I-frame</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> &amp; 0x40 &amp;&amp; !temporal_offset)</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x80; <span class="comment">// random access</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;            <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a>);</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            <span class="comment">// stream offset</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;            <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#a860828beb605fe235f332bace41dfde1">offset</a>);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams &gt; 1)</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_m_x_f_index_entry.html#a494664cd518f46d122c2de3df94242f1">slice_offset</a>);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0);</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        }</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160; </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ae1a14a2496213ff44ded5c54c3e71dd3">last_key_index</a> = key_index - mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a0f7818763fb94714b758f4cf8de59416">last_indexed_edit_unit</a> += mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a> = 0;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <a class="code" href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a>(pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;}</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160; </div>
<div class="line"><a name="l01843"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258"> 1843</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;{</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="keywordtype">unsigned</span> pad = <a class="code" href="mxfenc_8c.html#a13be66c065e3ca9ca346e824829accc1">klv_fill_size</a>(<a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb));</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keywordflow">if</span> (pad) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="mxfenc_8c.html#a46435e97207f6bda848d8c62ac091851">klv_fill_key</a>, 16);</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        pad -= 16 + 4;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, pad);</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        <a class="code" href="avio__internal_8h.html#a4e3d561f0280d04d67cc0e9f33a04e36">ffio_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, 0, pad);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(!(<a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb) &amp; (<a class="code" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a>-1)));</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    }</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;}</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160; </div>
<div class="line"><a name="l01855"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf"> 1855</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> bodysid,</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                                <span class="keywordtype">int</span> indexsid,</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                                <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <span class="keywordtype">int</span> <a class="code" href="libavformat_2flvenc_8c.html#ab3f550c9933a09a1d573be023639ce90">write_metadata</a>)</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;{</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    int64_t header_byte_count_offset;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="keywordtype">unsigned</span> index_byte_count = 0;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    uint64_t partition_offset = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> &amp;&amp; mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>)</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        index_byte_count = 85 + 12+(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams+1)*6 +</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            12+mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>*15;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> &amp;&amp; indexsid)</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        index_byte_count = 80;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160; </div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keywordflow">if</span> (index_byte_count) {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        index_byte_count += 16 + 4; <span class="comment">// add encoded ber4 length</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        index_byte_count += <a class="code" href="mxfenc_8c.html#a13be66c065e3ca9ca346e824829accc1">klv_fill_size</a>(index_byte_count);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    }</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160; </div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> &amp;&amp; !memcmp(<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="mxfenc_8c.html#afa963116f2229e58430c7878f785ad53">body_partition_key</a>, 16)) {</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="group__lavu__mem__funcs.html#gad8fde0c159ac905909339e082a049cde">av_reallocp_array</a>(&amp;mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a> + 1,</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                                     <span class="keyword">sizeof</span>(*mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>))) &lt; 0) {</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a> = 0;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        }</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a>++] = partition_offset;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    }</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160; </div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="comment">// write klv</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, 16);</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#afa963116f2229e58430c7878f785ad53">body_partition_key</a>, 16);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(pb, 88 + 16LL * <a class="code" href="mxfenc_8c.html#ad98b63994ecf2539e238039fdaba355d">DESCRIPTOR_COUNT</a>(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">essence_container_count</a>));</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160; </div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="comment">// write partition value</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 1); <span class="comment">// majorVersion</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 3); <span class="comment">// minorVersion</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, <a class="code" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a>); <span class="comment">// KAGSize</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, partition_offset); <span class="comment">// ThisPartition</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> &amp;&amp; !memcmp(<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="mxfenc_8c.html#afa963116f2229e58430c7878f785ad53">body_partition_key</a>, 16) &amp;&amp; mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a> &gt; 1)</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a>-2]); <span class="comment">// PreviousPartition</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> &amp;&amp; !memcmp(<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="mxfenc_8c.html#a14d27fd607de01b69c61de36be032106">footer_partition_key</a>, 16) &amp;&amp; mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a>)</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a>-1]); <span class="comment">// PreviousPartition</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a00d740dac0f18778dc0c25be1dbde1be">footer_partition_offset</a>); <span class="comment">// footerPartition</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160; </div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="comment">// set offset</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    header_byte_count_offset = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0); <span class="comment">// headerByteCount, update later</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="comment">// indexTable</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, index_byte_count); <span class="comment">// indexByteCount</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, index_byte_count ? indexsid : 0); <span class="comment">// indexSID</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="comment">// BodyOffset</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="keywordflow">if</span> (bodysid &amp;&amp; mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a> &amp;&amp; mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat != &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>)</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a>);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, bodysid); <span class="comment">// bodySID</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160; </div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="comment">// operational pattern</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>)</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a1955ef5f8647033c43ee2a3272b3f31c">opatom_ul</a>, 16);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#ac17cc209ad4b6ba56510421df27287db">op1a_ul</a>, 16);</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160; </div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="comment">// essence container</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <a class="code" href="mxfenc_8c.html#a27a022aaf43fc28d9337cc8729a71d98">mxf_write_essence_container_refs</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160; </div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libavformat_2flvenc_8c.html#ab3f550c9933a09a1d573be023639ce90">write_metadata</a>) {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        <span class="comment">// mark the start of the headermetadata and calculate metadata size</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        int64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>, start;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <span class="keywordtype">unsigned</span> header_byte_count;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160; </div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        start = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <a class="code" href="mxfenc_8c.html#ad9a02684287104c322cef3b03a3d9107">mxf_write_primer_pack</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        <a class="code" href="mxfenc_8c.html#a8c1c5bc9e8426f4fa046f30d838339cd">mxf_write_header_metadata_sets</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        header_byte_count = <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> - start + <a class="code" href="mxfenc_8c.html#a13be66c065e3ca9ca346e824829accc1">klv_fill_size</a>(<a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        <span class="comment">// update header_byte_count</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, header_byte_count_offset, SEEK_SET);</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, header_byte_count);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>, SEEK_SET);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    }</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;        <a class="code" href="avio_8h.html#a03e0cde48d492b5433e136152e47cb4c">avio_write_marker</a>(pb, <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>, <a class="code" href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a870634b3c75cf4bcff8306fac01b04be">AVIO_DATA_MARKER_FLUSH_POINT</a>);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160; </div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;}</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l01961"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a41cdb4a229a3d71837d607124f8a07a4"> 1961</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a41cdb4a229a3d71837d607124f8a07a4">profile</a>;</div>
<div class="line"><a name="l01962"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a4d9b2d9bce8b3075b18a6524f04a232b"> 1962</a></span>&#160;    <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a4d9b2d9bce8b3075b18a6524f04a232b">codec_ul</a>;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;} <a class="code" href="mxfenc_8c.html#a2a9af9de590a1627d66d2fce58646fc4">mxf_prores_codec_uls</a>[] = {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    { <a class="code" href="avcodec_8h.html#a5d15733cd3fd22a082354d9804d86731">FF_PROFILE_PRORES_PROXY</a>,    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x04,0x01,0x02,0x02,0x03,0x06,0x01,0x00 } },</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    { <a class="code" href="avcodec_8h.html#a7ade9fc8112b3a28bf19089d0db036c0">FF_PROFILE_PRORES_LT</a>,       { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x04,0x01,0x02,0x02,0x03,0x06,0x02,0x00 } },</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    { <a class="code" href="avcodec_8h.html#a05d6072b2b21e0e89df1d2b5a10217e7">FF_PROFILE_PRORES_STANDARD</a>, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x04,0x01,0x02,0x02,0x03,0x06,0x03,0x00 } },</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    { <a class="code" href="avcodec_8h.html#af632eb505c61b1b67924cfe290fc629a">FF_PROFILE_PRORES_HQ</a>,       { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x04,0x01,0x02,0x02,0x03,0x06,0x04,0x00 } },</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    { <a class="code" href="avcodec_8h.html#a6f3ddce858390ede422db890eb34b7a6">FF_PROFILE_PRORES_4444</a>,     { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x04,0x01,0x02,0x02,0x03,0x06,0x05,0x00 } },</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    { <a class="code" href="avcodec_8h.html#adac519593024d0941107aa583e06d9a2">FF_PROFILE_PRORES_XQ</a>,       { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x04,0x01,0x02,0x02,0x03,0x06,0x06,0x00 } },</div>
<div class="line"><a name="l01970"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a2a9af9de590a1627d66d2fce58646fc4"> 1970</a></span>&#160;};</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a3b78c1d7f063e08c42cb892fe0ca5d36"> 1972</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a3b78c1d7f063e08c42cb892fe0ca5d36">mxf_parse_prores_frame</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;{</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="mxfenc_8c.html#a41cdb4a229a3d71837d607124f8a07a4">profile</a>;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160; </div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160; </div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <a class="code" href="mxfenc_8c.html#a41cdb4a229a3d71837d607124f8a07a4">profile</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">profile</a>;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxfenc_8c.html#a2a9af9de590a1627d66d2fce58646fc4">mxf_prores_codec_uls</a>); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mxfenc_8c.html#a41cdb4a229a3d71837d607124f8a07a4">profile</a> == <a class="code" href="mxfenc_8c.html#a2a9af9de590a1627d66d2fce58646fc4">mxf_prores_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="mxfenc_8c.html#a41cdb4a229a3d71837d607124f8a07a4">profile</a>) {</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#a2a9af9de590a1627d66d2fce58646fc4">mxf_prores_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].codec_ul;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        }</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    }</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a>)</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160; </div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;}</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160; </div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l01998"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64"> 1998</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a>;</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a4d9b2d9bce8b3075b18a6524f04a232b">codec_ul</a>;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;} <a class="code" href="mxfenc_8c.html#ae9a9122343845cf2ff0e086589541902">mxf_dnxhd_codec_uls</a>[] = {</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    { 1235, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x01,0x00,0x00 } }, <span class="comment">// 1080p 10bit HIGH</span></div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    { 1237, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x03,0x00,0x00 } }, <span class="comment">// 1080p 8bit MED</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    { 1238, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x04,0x00,0x00 } }, <span class="comment">// 1080p 8bit HIGH</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    { 1241, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x07,0x00,0x00 } }, <span class="comment">// 1080i 10bit HIGH</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    { 1242, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x08,0x00,0x00 } }, <span class="comment">// 1080i 8bit MED</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    { 1243, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x09,0x00,0x00 } }, <span class="comment">// 1080i 8bit HIGH</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    { 1244, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x0a,0x00,0x00 } }, <span class="comment">// 1080i 8bit TR</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    { 1250, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x10,0x00,0x00 } }, <span class="comment">// 720p 10bit</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    { 1251, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x11,0x00,0x00 } }, <span class="comment">// 720p 8bit HIGH</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    { 1252, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x12,0x00,0x00 } }, <span class="comment">// 720p 8bit MED</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    { 1253, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x13,0x00,0x00 } }, <span class="comment">// 720p 8bit LOW</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    { 1256, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x16,0x00,0x00 } }, <span class="comment">// 1080p 10bit 444</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    { 1258, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x18,0x00,0x00 } }, <span class="comment">// 720p 8bit TR</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    { 1259, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x19,0x00,0x00 } }, <span class="comment">// 1080p 8bit TR</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    { 1260, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x1a,0x00,0x00 } }, <span class="comment">// 1080i 8bit TR MBAFF</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    { 1270, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x24,0x00,0x00 } }, <span class="comment">// DNXHR 444</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    { 1271, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x25,0x00,0x00 } }, <span class="comment">// DNXHR HQX</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    { 1272, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x26,0x00,0x00 } }, <span class="comment">// DNXHR HQ</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    { 1273, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x27,0x00,0x00 } }, <span class="comment">// DNXHR SQ</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    { 1274, { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x71,0x28,0x00,0x00 } }, <span class="comment">// DNXHR LB</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ae9a9122343845cf2ff0e086589541902"> 2021</a></span>&#160;};</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160; </div>
<div class="line"><a name="l02023"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ad5fb850d5c737d850218a087f6a8f0b7"> 2023</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ad5fb850d5c737d850218a087f6a8f0b7">mxf_parse_dnxhd_frame</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;{</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a>, <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> = 0;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>)</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160; </div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> &lt; 43)</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> + 0x28);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxfenc_8c.html#ae9a9122343845cf2ff0e086589541902">mxf_dnxhd_codec_uls</a>); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a> == <a class="code" href="mxfenc_8c.html#ae9a9122343845cf2ff0e086589541902">mxf_dnxhd_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a>) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#ae9a9122343845cf2ff0e086589541902">mxf_dnxhd_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].codec_ul;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;        }</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a>)</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160; </div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> = 0;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[0x21] &gt;&gt; 5) {</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <span class="keywordflow">case</span> 1: sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> = 8; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="keywordflow">case</span> 2: sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> = 10; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">case</span> 3: sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> = 12; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    }</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a>)</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160; </div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> = <a class="code" href="dnxhddata_8c.html#a03b26c8a39230cc58b711997136607af">avpriv_dnxhd_get_frame_size</a>(<a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a>)) == <a class="code" href="dnxhddata_8h.html#aa05141353d9435ea1c1fd5e76014ce56">DNXHD_VARIABLE</a>) {</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> = <a class="code" href="dnxhddata_8c.html#a03bdb0c155f577b86f48b2178a5af870">avpriv_dnxhd_get_hr_frame_size</a>(<a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>);</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    }</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> &lt; 0)</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160; </div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">if</span> ((sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a> = <a class="code" href="dnxhddata_8c.html#a82b7798c6e57165c268ed6bf847c63fe">avpriv_dnxhd_get_interlaced</a>(<a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a>)) &lt; 0)</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160; </div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a> &gt;= 1270) { <span class="comment">// RI raster</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, &amp;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>,</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                  st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>,</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                  INT_MAX);</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a> = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){ 16, 9 };</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    }</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160; </div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;}</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160; </div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l02078"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aad5bcdf3d890ff3d4c6920183fa5bf87"> 2078</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#aad5bcdf3d890ff3d4c6920183fa5bf87">container_ul</a>;</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a4d9b2d9bce8b3075b18a6524f04a232b">codec_ul</a>;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;} <a class="code" href="mxfenc_8c.html#a5ca1021910fc2e493df2817296d53390">mxf_dv_uls</a>[] = {</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x01,0x01 }, <span class="comment">// IEC DV25 525/60</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x01,0x01,0x00 } },</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x02,0x01 }, <span class="comment">// IEC DV25 626/50</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x01,0x02,0x00 } },</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x40,0x01 }, <span class="comment">// DV25 525/60</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x02,0x01,0x00 }, },</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x41,0x01 }, <span class="comment">// DV25 625/50</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x02,0x02,0x00 }, },</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x50,0x01 }, <span class="comment">// DV50 525/60</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x02,0x03,0x00 }, },</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x51,0x01 }, <span class="comment">// DV50 625/50</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x02,0x04,0x00 }, },</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x60,0x01 }, <span class="comment">// DV100 1080/60</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x02,0x05,0x00 }, },</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x61,0x01 }, <span class="comment">// DV100 1080/50</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x02,0x06,0x00 }, },</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x62,0x01 }, <span class="comment">// DV100 720/60</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x02,0x07,0x00 }, },</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    { { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x0D,0x01,0x03,0x01,0x02,0x02,0x63,0x01 }, <span class="comment">// DV100 720/50</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x01,0x04,0x01,0x02,0x02,0x02,0x02,0x08,0x00 }, },</div>
<div class="line"><a name="l02101"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a5ca1021910fc2e493df2817296d53390"> 2101</a></span>&#160;};</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160; </div>
<div class="line"><a name="l02103"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a281641b9a1926dfdc4b73c4eb37e6220"> 2103</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a281641b9a1926dfdc4b73c4eb37e6220">mxf_parse_dv_frame</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;{</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *vs_pack, *vsc_pack;</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keywordtype">int</span> apt, ul_index, stype, pal;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>)</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="comment">// Check for minimal frame size</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> &lt; 120000)</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160; </div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    apt      = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[4] &amp; 0x7;</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    vs_pack  = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> + 80*5 + 48;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    vsc_pack = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> + 80*5 + 53;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    stype    = vs_pack[3] &amp; 0x1f;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    pal      = (vs_pack[3] &gt;&gt; 5) &amp; 0x1;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160; </div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">if</span> ((vsc_pack[2] &amp; 0x07) == 0x02) {</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a> = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){ 16, 9 };</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a> = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){ 4, 3 };</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    }</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160; </div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a> = (vsc_pack[3] &gt;&gt; 4) &amp; 0x01;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="comment">// TODO: fix dv encoder to set proper FF/FS value in VSC pack</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <span class="comment">// and set field dominance accordingly</span></div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="comment">// av_log(s, AV_LOG_DEBUG, &quot;DV vsc pack ff/ss = %x\n&quot;, vsc_pack[2] &gt;&gt; 6);</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="keywordflow">switch</span> (stype) {</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="keywordflow">case</span> 0x18: <span class="comment">// DV100 720p</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        ul_index = 8+pal;</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>) {</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;source marked as interlaced but codec profile is progressive\n&quot;</span>);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a> = 0;</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        }</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">case</span> 0x14: <span class="comment">// DV100 1080i</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        ul_index = 6+pal;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="keywordflow">case</span> 0x04: <span class="comment">// DV50</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        ul_index = 4+pal;</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <span class="keywordflow">default</span>: <span class="comment">// DV25</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;        <span class="keywordflow">if</span> (!apt) { <span class="comment">// IEC</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;            ul_index = 0+pal;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;            ul_index = 2+pal;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        }</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    }</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160; </div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#a5ca1021910fc2e493df2817296d53390">mxf_dv_uls</a>[ul_index].container_ul;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#a5ca1021910fc2e493df2817296d53390">mxf_dv_uls</a>[ul_index].codec_ul;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160; </div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160; </div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;}</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160; </div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l02165"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a99613136a67953261099533d962f9ac4"> 2165</a></span>&#160;    <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a99613136a67953261099533d962f9ac4">uid</a>;</div>
<div class="line"><a name="l02166"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d"> 2166</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a41cdb4a229a3d71837d607124f8a07a4">profile</a>;</div>
<div class="line"><a name="l02168"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a418fe46b202d0fdab1bdc116a863571a"> 2168</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a418fe46b202d0fdab1bdc116a863571a">interlaced</a>;</div>
<div class="line"><a name="l02169"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ae1a690da45e08ebc4643a23aaf43de82"> 2169</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ae1a690da45e08ebc4643a23aaf43de82">intra_only</a>; <span class="comment">// 1 or 0 when there are separate UIDs for Long GOP and Intra, -1 when Intra/LGOP detection can be ignored</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;} <a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[] = {</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x31,0x11,0x01 },      0,  66, 0, -1 }, <span class="comment">// AVC Baseline</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x31,0x20,0x01 },      0,  77, 0, -1 }, <span class="comment">// AVC Main</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x31,0x30,0x01 },      0,  88, 0, -1 }, <span class="comment">// AVC Extended</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x31,0x40,0x01 },      0, 100, 0, -1 }, <span class="comment">// AVC High</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x31,0x50,0x01 },      0, 110, 0,  0 }, <span class="comment">// AVC High 10</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x31,0x60,0x01 },      0, 122, 0,  0 }, <span class="comment">// AVC High 422</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x31,0x70,0x01 },      0, 244, 0,  0 }, <span class="comment">// AVC High 444</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x20,0x01 },      0, 110, 0,  1 }, <span class="comment">// AVC High 10 Intra</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x21,0x01 }, 232960, 110, 1,  1 }, <span class="comment">// AVC High 10 Intra RP2027 Class 50 1080/59.94i</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x21,0x02 }, 281088, 110, 1,  1 }, <span class="comment">// AVC High 10 Intra RP2027 Class 50 1080/50i</span></div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x21,0x03 }, 232960, 110, 0,  1 }, <span class="comment">// AVC High 10 Intra RP2027 Class 50 1080/29.97p</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x21,0x04 }, 281088, 110, 0,  1 }, <span class="comment">// AVC High 10 Intra RP2027 Class 50 1080/25p</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x21,0x08 }, 116736, 110, 0,  1 }, <span class="comment">// AVC High 10 Intra RP2027 Class 50 720/59.94p</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x21,0x09 }, 140800, 110, 0,  1 }, <span class="comment">// AVC High 10 Intra RP2027 Class 50 720/50p</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x30,0x01 },      0, 122, 0,  1 }, <span class="comment">// AVC High 422 Intra</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x31,0x01 }, 472576, 122, 1,  1 }, <span class="comment">// AVC High 422 Intra RP2027 Class 100 1080/59.94i</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x31,0x02 }, 568832, 122, 1,  1 }, <span class="comment">// AVC High 422 Intra RP2027 Class 100 1080/50i</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x31,0x03 }, 472576, 122, 0,  1 }, <span class="comment">// AVC High 422 Intra RP2027 Class 100 1080/29.97p</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x31,0x04 }, 568832, 122, 0,  1 }, <span class="comment">// AVC High 422 Intra RP2027 Class 100 1080/25p</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x31,0x08 }, 236544, 122, 0,  1 }, <span class="comment">// AVC High 422 Intra RP2027 Class 100 720/59.94p</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0a,0x04,0x01,0x02,0x02,0x01,0x32,0x31,0x09 }, 284672, 122, 0,  1 }, <span class="comment">// AVC High 422 Intra RP2027 Class 100 720/50p</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x04,0x01,0x02,0x02,0x01,0x32,0x40,0x01 },      0, 244, 0,  1 }, <span class="comment">// AVC High 444 Intra</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    {{ 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x0d,0x04,0x01,0x02,0x02,0x01,0x32,0x50,0x01 },      0,  44, 0, -1 }, <span class="comment">// AVC CAVLC 444</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f"> 2194</a></span>&#160;};</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a89e1c07927025dd9b2e83ee0562e3ce5"> 2196</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a89e1c07927025dd9b2e83ee0562e3ce5">mxf_parse_h264_frame</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st,</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                                <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="struct_m_x_f_index_entry.html">MXFIndexEntry</a> *e)</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;{</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <a class="code" href="struct_h264_s_p_s.html">H264SPS</a> seq, *<span class="keyword">const</span> <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a> = &amp;seq;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> gb;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf_end = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> + <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *nal_end;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    uint32_t <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a> = -1;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordtype">int</span> extra_size = 512; <span class="comment">// support AVC Intra files without SPS/PPS header</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>, slice_type, has_sps = 0, <a class="code" href="mxfenc_8c.html#ae1a690da45e08ebc4643a23aaf43de82">intra_only</a> = 0, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        buf = <a class="code" href="libavcodec_2internal_8h.html#a5776e5aa789ddce236a7d8bb3c5565c3">avpriv_find_start_code</a>(buf, buf_end, &amp;<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>);</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        <span class="keywordflow">if</span> (buf &gt;= buf_end)</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160; </div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a> &amp; 0x1f) {</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9b569b7bafbb864fe260d3b84ad78387">H264_NAL_SPS</a>:</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;            e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x40;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160; </div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;            <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>)</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160; </div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            nal_end = <a class="code" href="avc_8c.html#a09bd351622f49e73180502329f7f0e3b">ff_avc_find_startcode</a>(buf, buf_end);</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avc_8c.html#a36c2206fa506a42eed39cbe717959a0d">ff_avc_decode_sps</a>(<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>, buf, nal_end - buf);</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error parsing sps\n&quot;</span>);</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;            }</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            has_sps = 1;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160; </div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a> * <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;sar.num;</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a> * <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;sar.den;</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;            <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, &amp;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>,</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                      sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, 1024*1024);</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;            <a class="code" href="mxfenc_8c.html#ae1a690da45e08ebc4643a23aaf43de82">intra_only</a> = (<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;constraint_set_flags &gt;&gt; 3) &amp; 1;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a> = !<a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;frame_mbs_only_flag;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;bit_depth_luma;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160; </div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            buf = nal_end;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba7e20eaba3c2969ad80d2e9a791cf1be0">H264_NAL_PPS</a>:</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;            <span class="keywordflow">if</span> (e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> &amp; 0x40) { <span class="comment">// sequence header present</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x80; <span class="comment">// random access</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                extra_size = 0;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;            }</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bafecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a>:</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x04; <span class="comment">// IDR Picture</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;            buf = buf_end;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9f5ecee4fcf069f90853d39dda680dfe">H264_NAL_SLICE</a>:</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;            <a class="code" href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a>(&amp;gb, buf, buf_end - buf);</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;            <a class="code" href="golomb_8h.html#af09ebe1db4301aaa62f22ec381c89bd2">get_ue_golomb_long</a>(&amp;gb); <span class="comment">// skip first_mb_in_slice</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;            slice_type = <a class="code" href="golomb_8h.html#a7c893c9caa7bdb3efd220cb524df7df1">get_ue_golomb_31</a>(&amp;gb);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;            <span class="keywordflow">switch</span> (slice_type % 5) {</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;            <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x20; <span class="comment">// P Picture</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x06; <span class="comment">// P Picture</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x30; <span class="comment">// B Picture</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x03; <span class="comment">// non-referenced B Picture</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            }</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;            buf = buf_end;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        }</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    }</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>)</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160; </div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="keywordflow">if</span> (!has_sps)</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;        sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a153946872548cd56132907b93f05f9aa">field_order</a> != <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a> ? 1 : 0;</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> + extra_size;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> == <a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a> == <a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].interlaced) {</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].uid;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> = 10; <span class="comment">// AVC Intra is always 10 Bit</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a> = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){ 16, 9 }; <span class="comment">// 16:9 is mandatory for broadcast HD</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">profile</a> = <a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].profile;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a4c2ac9df6d0abe6c48a46937a694bfa7">avc_intra</a> = 1;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a6113618badc827fe35a268b4c25ad57a">cbr_index</a> = 1;</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>)</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a7135baa21488bfd2b602c415ee5f0a07">field_dominance</a> = 1; <span class="comment">// top field first is mandatory for AVC Intra</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (has_sps &amp;&amp; <a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> == 0 &amp;&amp;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;                   <a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="mxfenc_8c.html#a41cdb4a229a3d71837d607124f8a07a4">profile</a> == <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc &amp;&amp;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                   (<a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].intra_only &lt; 0 ||</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;                    <a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].intra_only == <a class="code" href="mxfenc_8c.html#ae1a690da45e08ebc4643a23aaf43de82">intra_only</a>)) {</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].uid;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">profile</a> = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;profile_idc;</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;            st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">level</a> = <a class="code" href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a>-&gt;level_idc;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            <span class="comment">// continue to check for avc intra</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    }</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160; </div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a>) {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;h264 profile not supported\n&quot;</span>);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    }</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160; </div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;}</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160; </div>
<div class="line"><a name="l02310"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a712c6b46f6689f88bc54d0910393ff20"> 2310</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> <a class="code" href="mxfenc_8c.html#a712c6b46f6689f88bc54d0910393ff20">mxf_mpeg2_codec_uls</a>[] = {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x01,0x10,0x00 }, <span class="comment">// MP-ML I-Frame</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x01,0x11,0x00 }, <span class="comment">// MP-ML Long GOP</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x02,0x02,0x00 }, <span class="comment">// 422P-ML I-Frame</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x02,0x03,0x00 }, <span class="comment">// 422P-ML Long GOP</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x03,0x02,0x00 }, <span class="comment">// MP-HL I-Frame</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x03,0x03,0x00 }, <span class="comment">// MP-HL Long GOP</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x04,0x02,0x00 }, <span class="comment">// 422P-HL I-Frame</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x04,0x03,0x00 }, <span class="comment">// 422P-HL Long GOP</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x05,0x02,0x00 }, <span class="comment">// MP@H-14 I-Frame</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    { 0x06,0x0E,0x2B,0x34,0x04,0x01,0x01,0x03,0x04,0x01,0x02,0x02,0x01,0x05,0x03,0x00 }, <span class="comment">// MP@H-14 Long GOP</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;};</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160; </div>
<div class="line"><a name="l02323"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a57adcb33de4cf966c0985e8de9b9e8e2"> 2323</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a> *<a class="code" href="mxfenc_8c.html#a57adcb33de4cf966c0985e8de9b9e8e2">mxf_get_mpeg2_codec_ul</a>(<a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par)</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;{</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keywordtype">int</span> long_gop = 1;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">profile</a> == 4) { <span class="comment">// Main</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">level</a> == 8) <span class="comment">// Main</span></div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="mxfenc_8c.html#a712c6b46f6689f88bc54d0910393ff20">mxf_mpeg2_codec_uls</a>[0+long_gop];</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">level</a> == 4) <span class="comment">// High</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="mxfenc_8c.html#a712c6b46f6689f88bc54d0910393ff20">mxf_mpeg2_codec_uls</a>[4+long_gop];</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">level</a> == 6) <span class="comment">// High 14</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="mxfenc_8c.html#a712c6b46f6689f88bc54d0910393ff20">mxf_mpeg2_codec_uls</a>[8+long_gop];</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">profile</a> == 0) { <span class="comment">// 422</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">level</a> == 5) <span class="comment">// Main</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="mxfenc_8c.html#a712c6b46f6689f88bc54d0910393ff20">mxf_mpeg2_codec_uls</a>[2+long_gop];</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">level</a> == 2) <span class="comment">// High</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="mxfenc_8c.html#a712c6b46f6689f88bc54d0910393ff20">mxf_mpeg2_codec_uls</a>[6+long_gop];</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;}</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160; </div>
<div class="line"><a name="l02343"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a784ffdd9a829849c70a3757891ce5b3e"> 2343</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a784ffdd9a829849c70a3757891ce5b3e">mxf_parse_mpeg2_frame</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st,</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                                 <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="struct_m_x_f_index_entry.html">MXFIndexEntry</a> *e)</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;{</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    uint32_t <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = -1;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> - 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>&lt;&lt;8) + <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> == 0x1b5) {</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1] &amp; 0xf0) == 0x10) { <span class="comment">// seq ext</span></div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">profile</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1] &amp; 0x07;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">level</a>   = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+2] &gt;&gt; 4;</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a74646711b0aac1657fece64eaafd47a3">low_delay</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+6] &gt;&gt; 7;</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 5 &lt; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> &amp;&amp; (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1] &amp; 0xf0) == 0x80) { <span class="comment">// pict coding ext</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a> = !(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+5] &amp; 0x80); <span class="comment">// progressive frame</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">interlaced</a>)</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a7135baa21488bfd2b602c415ee5f0a07">field_dominance</a> = 1 + !(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+4] &amp; 0x80); <span class="comment">// top field first</span></div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;            }</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> == 0x1b8) { <span class="comment">// gop</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+4]&gt;&gt;6 &amp; 0x01) { <span class="comment">// closed</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab0441da511e6df50ad7c314d35d4f673">seq_closed_gop</a> == -1)</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab0441da511e6df50ad7c314d35d4f673">seq_closed_gop</a> = 1;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a67b29b5d037074620e1b2487a7ef43d7">closed_gop</a> = 1;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                <span class="keywordflow">if</span> (e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> &amp; 0x40) <span class="comment">// sequence header present</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;                    e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x80; <span class="comment">// random access</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab0441da511e6df50ad7c314d35d4f673">seq_closed_gop</a> = 0;</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a67b29b5d037074620e1b2487a7ef43d7">closed_gop</a> = 0;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;            }</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> == 0x1b3) { <span class="comment">// seq</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;            e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x40;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;            <span class="keywordflow">switch</span> ((<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+4]&gt;&gt;4) &amp; 0xf) {</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;            <span class="keywordflow">case</span> 2:  sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a> = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){  4,  3}; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;            <span class="keywordflow">case</span> 3:  sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a> = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){ 16,  9}; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;            <span class="keywordflow">case</span> 4:  sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a> = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){221,100}; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, &amp;sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>,</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                          st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>, 1024*1024);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;            }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> == 0x100) { <span class="comment">// pic</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;            <span class="keywordtype">int</span> pict_type = (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+2]&gt;&gt;3) &amp; 0x07;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;            e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">temporal_ref</a> = (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1]&lt;&lt;2) | (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+2]&gt;&gt;6);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;            <span class="keywordflow">if</span> (pict_type == 2) { <span class="comment">// P-frame</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x22;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a67b29b5d037074620e1b2487a7ef43d7">closed_gop</a> = 0; <span class="comment">// reset closed GOP, don&#39;t matter anymore</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pict_type == 3) { <span class="comment">// B-frame</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a67b29b5d037074620e1b2487a7ef43d7">closed_gop</a>)</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                    e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x13; <span class="comment">// only backward prediction</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                    e-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> |= 0x33;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a3518d8d631b02ae6de54c4bf2ccf2848">temporal_reordering</a> = -1;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pict_type) {</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error parsing mpeg2 frame\n&quot;</span>);</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;            }</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        }</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    }</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat != &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a>)</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = <a class="code" href="mxfenc_8c.html#a57adcb33de4cf966c0985e8de9b9e8e2">mxf_get_mpeg2_codec_ul</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>);</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <span class="keywordflow">return</span> !!sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;}</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160; </div>
<div class="line"><a name="l02407"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a60dd806b1593fc5b7b0ab1dfaac2fbf3"> 2407</a></span>&#160;<span class="keyword">static</span> uint64_t <a class="code" href="mxfenc_8c.html#a60dd806b1593fc5b7b0ab1dfaac2fbf3">mxf_parse_timestamp</a>(int64_t timestamp64)</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;{</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    time_t timestamp = timestamp64 / 1000000;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keyword">struct </span>tm tmbuf;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <span class="keyword">struct </span>tm *time = <a class="code" href="time__internal_8h.html#a89a61b18d74dbd9e50e0b1d23a1fe57e">gmtime_r</a>(&amp;timestamp, &amp;tmbuf);</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keywordflow">if</span> (!time)</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <span class="keywordflow">return</span> (uint64_t)(time-&gt;tm_year+1900) &lt;&lt; 48 |</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;           (uint64_t)(time-&gt;tm_mon+1)     &lt;&lt; 40 |</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;           (uint64_t) time-&gt;tm_mday       &lt;&lt; 32 |</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                      time-&gt;tm_hour       &lt;&lt; 24 |</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                      time-&gt;tm_min        &lt;&lt; 16 |</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                      time-&gt;tm_sec        &lt;&lt; 8  |</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                      (timestamp64 % 1000000) / 4000;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;}</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160; </div>
<div class="line"><a name="l02423"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ad353216f8b0590eb5b059c298886412e"> 2423</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ad353216f8b0590eb5b059c298886412e">mxf_gen_umid</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;{</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    uint32_t <a class="code" href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> = <a class="code" href="group__lavu__crypto.html#ga4fe662789c7e05a6b63e0c675dbbd7ed">av_get_random_seed</a>();</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    uint64_t umid = <a class="code" href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> + 0x5294713400000000LL;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160; </div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    <a class="code" href="intreadwrite_8h.html#afd2d38dbc4338142d73bbd42c59ac186">AV_WB64</a>(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#abf6cc762099d2d3d70e62453774da9aa">umid</a>  , umid);</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <a class="code" href="intreadwrite_8h.html#afd2d38dbc4338142d73bbd42c59ac186">AV_WB64</a>(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#abf6cc762099d2d3d70e62453774da9aa">umid</a>+8, umid&gt;&gt;8);</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160; </div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a7ac8566cf237622bad8a0f63e789082a">instance_number</a> = <a class="code" href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> &amp; 0xFFFFFF;</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;}</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160; </div>
<div class="line"><a name="l02435"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a2873282c8bf99bea3f7a9dd2958b98aa"> 2435</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a2873282c8bf99bea3f7a9dd2958b98aa">mxf_init_timecode</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_rational.html">AVRational</a> tbc)</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;{</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *tcr = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, <span class="stringliteral">&quot;timecode&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160; </div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mxf_8c.html#a6ec525d52869f1e6863b271fe8c24b0e">ff_mxf_get_content_package_rate</a>(tbc)) {</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;strict_std_compliance &gt; <a class="code" href="avcodec_8h.html#a0d1ffb8ad990f47c1f21ec2f5b43c0b1">FF_COMPLIANCE_UNOFFICIAL</a>) {</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported frame rate %d/%d. Set -strict option to &#39;unofficial&#39; or lower in order to allow it!\n&quot;</span>, tbc.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, tbc.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Unofficial frame rate %d/%d.\n&quot;</span>, tbc.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, tbc.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>);</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        }</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    }</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160; </div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ab12f65a4ff35a10cfd22b144667e91fd">timecode_base</a> = (tbc.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> + tbc.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>/2) / tbc.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>;</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (!tcr)</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        tcr = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;timecode&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160; </div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="keywordflow">if</span> (tcr)</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="timecode_8c.html#a02596c9d431329a3acc646c943b1c800">av_timecode_init_from_string</a>(&amp;mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>, <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(tbc), tcr-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="timecode_8c.html#ad279cd982964a2f8cc7adfa01533b412">av_timecode_init</a>(&amp;mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>, <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(tbc), 0, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;}</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160; </div>
<div class="line"><a name="l02459"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a8e867d1c5bca3ba70c1a864141690913"> 2459</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a8e867d1c5bca3ba70c1a864141690913">mxf_write_header</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;{</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> present[<a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="mxfenc_8c.html#ac1a73cc70ad1715be653592108af0ed2">mxf_essence_container_uls</a>)] = {0};</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    int64_t timestamp = 0;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160; </div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams)</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160; </div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams !=1) {</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;there must be exactly one stream for mxf opatom\n&quot;</span>);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    }</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160; </div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;metadata, <span class="stringliteral">&quot;comment_&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__dict.html#ga341bbd1ea599dfb0510f419e5272fecc">AV_DICT_IGNORE_SUFFIX</a>))</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">store_user_comments</a> = 0;</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160; </div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*sc));</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        <span class="keywordflow">if</span> (!sc)</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a> = sc;</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a> = -1;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160; </div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        <span class="keywordflow">if</span> (((<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) ^ (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>)) &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat != &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>) {</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;there must be exactly one video stream and it must be the first one\n&quot;</span>);</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        }</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160; </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;            <span class="keyword">const</span> <a class="code" href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a> *pix_desc = <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abee943e65d98f9763fa6602a356e774f">format</a>);</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;            <span class="comment">// TODO: should be avg_frame_rate</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;            <a class="code" href="struct_a_v_rational.html">AVRational</a> tbc = st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;            <span class="comment">// Default component depth to 8</span></div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a> = 8;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a3da809d545eba5fc3a8e20fa6d280e41">h_chroma_sub_sample</a> = 2;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aa8f0f132a2f2f558abb71dea8f4e7cec">v_chroma_sub_sample</a> = 2;</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">color_siting</a> = 0xFF;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160; </div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>) {</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">aspect_ratio</a> = <a class="code" href="group__lavu__math__rational.html#ga3f9c69432582e2857147bcba3c75dc32">av_mul_q</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>,</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                                            <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>));</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;            }</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;            <span class="keywordflow">if</span> (pix_desc) {</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">component_depth</a>     = pix_desc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#a17569c9349766c3b5201b33f84f19a25">comp</a>[0].<a class="code" href="struct_a_v_component_descriptor.html#ae504ab46ea3719e9930f91491af593dc">depth</a>;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a3da809d545eba5fc3a8e20fa6d280e41">h_chroma_sub_sample</a> = 1 &lt;&lt; pix_desc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#a4abca4534188ff94627e88c0d8362058">log2_chroma_w</a>;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aa8f0f132a2f2f558abb71dea8f4e7cec">v_chroma_sub_sample</a> = 1 &lt;&lt; pix_desc-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#abea8ed308fe00644fc066a00018afa95">log2_chroma_h</a>;</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;            }</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="libavformat_2internal_8h.html#a20eeb69d7bb4044a354c5b46652b53ac">ff_choose_chroma_location</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st)) {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffa4b008b490563459a3f04826049cee43f">AVCHROMA_LOC_TOPLEFT</a>: sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">color_siting</a> = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffab75254964869bf3bf25806ad0cad44b2">AVCHROMA_LOC_LEFT</a>:    sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">color_siting</a> = 6; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffa2da13ea26652f612ecaeb850a3d014e7">AVCHROMA_LOC_TOP</a>:     sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">color_siting</a> = 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffaef6df526ade7e565876d539b34151368">AVCHROMA_LOC_CENTER</a>:  sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">color_siting</a> = 3; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;            }</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160; </div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ab41ba86e76941af3770b8ee825648868">content_package_rate</a> = <a class="code" href="mxf_8c.html#a6ec525d52869f1e6863b271fe8c24b0e">ff_mxf_get_content_package_rate</a>(tbc);</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a> = tbc;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;            <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;            <span class="keywordflow">if</span>((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mxfenc_8c.html#a2873282c8bf99bea3f7a9dd2958b98aa">mxf_init_timecode</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, tbc)) &lt; 0)</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160; </div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>) {</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab0441da511e6df50ad7c314d35d4f673">seq_closed_gop</a> = -1; <span class="comment">// unknown yet</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;            }</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160; </div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">video_bit_rate</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a5268fcf4ae8ed27edef54f836b926d93">bit_rate</a>;</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160; </div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a> ||</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead36347b6ae291fc3cc95f84aecf8035a">AV_CODEC_ID_DNXHD</a> ||</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06">AV_CODEC_ID_DVVIDEO</a>)</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;                mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a6113618badc827fe35a268b4c25ad57a">cbr_index</a> = 1;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160; </div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a>) {</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                <span class="keywordtype">int</span> ntsc = mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> != 25;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                <span class="keywordtype">int</span> ul_index;</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160; </div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>) {</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error MXF D-10 only support MPEG-2 Video\n&quot;</span>);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                }</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                <span class="keywordflow">if</span> ((sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">video_bit_rate</a> == 50000000) &amp;&amp; (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> == 25)) {</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;                    ul_index = 0;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">video_bit_rate</a> == 49999840 || sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">video_bit_rate</a> == 50000000) &amp;&amp; ntsc) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;                    ul_index = 1;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">video_bit_rate</a> == 40000000) {</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                    ul_index = 2+ntsc;</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">video_bit_rate</a> == 30000000) {</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                    ul_index = 4+ntsc;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error MXF D-10 only support 30/40/50 mbit/s\n&quot;</span>);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160; </div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#ab2e7da6dde9a606699facd04fab66c0b">mxf_d10_codec_uls</a>[ul_index];</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#a03d2f960e765f9f5c4eb708f3124d247">mxf_d10_container_uls</a>[ul_index];</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a> = <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488af2f411815209089345e9265984540ff5">INDEX_D10_VIDEO</a>;</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ade341374143ad5db0fd8ea1eb297fbbd">signal_standard</a> = 1;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">color_siting</a> = 0;</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a> = (int64_t)sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">video_bit_rate</a> *</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> / (8*mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;            }</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a27d0579cb5db945a6ce24d48fbe8b836">signal_standard</a> &gt;= 0)</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ade341374143ad5db0fd8ea1eb297fbbd">signal_standard</a> = mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a27d0579cb5db945a6ce24d48fbe8b836">signal_standard</a>;</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) {</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;            <span class="keywordtype">char</span> bsf_arg[32];</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a> != 48000) {</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;only 48khz is implemented\n&quot;</span>);</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            }</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            <a class="code" href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a>(st, 64, 1, st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>);</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a>) {</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a> != 1) {</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;MXF D-10 only support one audio track\n&quot;</span>);</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                }</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a> &amp;&amp;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be">AV_CODEC_ID_PCM_S24LE</a>) {</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;MXF D-10 only support 16 or 24 bits le audio\n&quot;</span>);</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;                }</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a> = <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a98a1552314eaceb8d5cc1265ef8fcb13">INDEX_D10_AUDIO</a>;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a> = ((<a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a>*)<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[0]-&gt;priv_data)-&gt;container_ul;</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a> = 4 + 8 * <a class="code" href="group__lavu__math.html#ga82d40664213508918093822461cc597e">av_rescale_rnd</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, <a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aa1d28e08e2f8b49b256e056f93038c1a">AV_ROUND_UP</a>) * 4;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>) {</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                <a class="code" href="struct_a_v_rational.html">AVRational</a> tbc = <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5f869be1e79f97ffefcd5e94b3fa0dbd">audio_edit_rate</a>);</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160; </div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a> &amp;&amp;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                    st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be">AV_CODEC_ID_PCM_S24LE</a>) {</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Only pcm_s16le and pcm_s24le audio codecs are implemented\n&quot;</span>);</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                }</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> != 1) {</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;MXF OPAtom only supports single channel audio\n&quot;</span>);</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                }</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160; </div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                <span class="keywordflow">if</span>((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mxfenc_8c.html#a2873282c8bf99bea3f7a9dd2958b98aa">mxf_init_timecode</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, tbc)) &lt; 0)</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160; </div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> = (<a class="code" href="group__lavc__misc.html#ga0717e7440fdb123f708082f66cd9b41d">av_get_bits_per_sample</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) * st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>) &gt;&gt; 3;</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a> = <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488abbc6cbcb9b4892cdaffaf4545510a03e">INDEX_WAV</a>;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;                mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ad9bc32ed1f92df9211ebe13435164d76">slice_count</a> = 1;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a> = st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a> *</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;                                 <a class="code" href="group__lavu__math.html#ga82d40664213508918093822461cc597e">av_rescale_rnd</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, <a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aa1d28e08e2f8b49b256e056f93038c1a">AV_ROUND_UP</a>) *</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                                 <a class="code" href="group__lavc__misc.html#ga0717e7440fdb123f708082f66cd9b41d">av_get_bits_per_sample</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) / 8;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            }</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;            <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(bsf_arg, <span class="keyword">sizeof</span>(bsf_arg), <span class="stringliteral">&quot;r=%d/%d&quot;</span>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>.<a class="code" href="struct_a_v_timecode.html#a96510357827972576efb578725affb89">rate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>.<a class="code" href="struct_a_v_timecode.html#a96510357827972576efb578725affb89">rate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#ac72e380330c591f7e0988dc547b1dd56">ff_stream_add_bitstream_filter</a>(st, <span class="stringliteral">&quot;pcm_rechunk&quot;</span>, bsf_arg);</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a>) {</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *e = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;data_type&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;            <span class="keywordflow">if</span> (e &amp;&amp; !strcmp(e-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>, <span class="stringliteral">&quot;vbi_vanc_smpte_436M&quot;</span>)) {</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a> = <a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a8fa79c7c48b51b5b07fb1145266bea9a">INDEX_S436M</a>;</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;track %d: unsupported data type\n&quot;</span>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            }</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a> != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams - 1) {</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;data track must be placed last\n&quot;</span>);</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;            }</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        }</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160; </div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a> == -1) {</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a> = <a class="code" href="mxfenc_8c.html#a5404d4fa88d0006ec9bb3fa9448eab68">mxf_get_essence_container_ul_index</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>);</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;            <span class="keywordflow">if</span> (sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a> == -1) {</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;track %d: could not find essence container ul, &quot;</span></div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                       <span class="stringliteral">&quot;codec not currently supported in container\n&quot;</span>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;            }</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;        }</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160; </div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a>)</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">codec_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#ac1a73cc70ad1715be653592108af0ed2">mxf_essence_container_uls</a>[sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a>].<a class="code" href="struct_m_x_f_container_essence_entry.html#ad8333d5329bc311a8b53c3dfdbcacd94">codec_ul</a>;</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        <span class="keywordflow">if</span> (!sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a>)</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a> = &amp;<a class="code" href="mxfenc_8c.html#ac1a73cc70ad1715be653592108af0ed2">mxf_essence_container_uls</a>[sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a>].<a class="code" href="struct_m_x_f_container_essence_entry.html#a0b85c561dcb133565dc733d926bbb864">container_ul</a>;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160; </div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        memcpy(sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>, <a class="code" href="mxfenc_8c.html#ac1a73cc70ad1715be653592108af0ed2">mxf_essence_container_uls</a>[sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a>].<a class="code" href="struct_m_x_f_container_essence_entry.html#a468cb26b162f96a3f921ab243133a76a">element_ul</a>, 15);</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;        sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>[15] = present[sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a>];</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        <a class="code" href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="stringliteral">&quot;track essence element key&quot;</span>, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>);</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        <span class="keywordflow">if</span> (!present[sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a>])</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">essence_container_count</a>++;</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        present[sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a>]++;</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    }</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160; </div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a> || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>) {</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">essence_container_count</a> = 1;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    }</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160; </div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;flags &amp; <a class="code" href="avformat_8h.html#a2fa1d95841e62af509ba733a11c1b25b">AVFMT_FLAG_BITEXACT</a>))</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        <a class="code" href="mxfenc_8c.html#ad353216f8b0590eb5b059c298886412e">mxf_gen_umid</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160; </div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;priv_data;</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        <span class="comment">// update element count</span></div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;        sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>[13] = present[sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">index</a>];</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;        <span class="keywordflow">if</span> (!memcmp(sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>, <a class="code" href="mxfenc_8c.html#ac1a73cc70ad1715be653592108af0ed2">mxf_essence_container_uls</a>[<a class="code" href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a7a2e0135879a24255399431c9560ca44">INDEX_DV</a>].<a class="code" href="struct_m_x_f_container_essence_entry.html#a468cb26b162f96a3f921ab243133a76a">element_ul</a>, 13)) <span class="comment">// DV</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab515e3849c98255b0496478355800f27">order</a> = (0x15 &lt;&lt; 24) | <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>+13);</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;            sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab515e3849c98255b0496478355800f27">order</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>+12);</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    }</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160; </div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libavformat_2internal_8h.html#ab0ada0e011ce230ec7c6fc9f600bf89c">ff_parse_creation_time_metadata</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;timestamp, 0) &gt; 0)</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#adeaa0889ffac2d991bf10d37f71455d8">timestamp</a> = <a class="code" href="mxfenc_8c.html#a60dd806b1593fc5b7b0ab1dfaac2fbf3">mxf_parse_timestamp</a>(timestamp);</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a1e414bd816f6ee8013d104eff865bb98">duration</a> = -1;</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160; </div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>));</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>)</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a>));</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>)</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a> = -1;</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160; </div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;}</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160; </div>
<div class="line"><a name="l02682"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#abe45d561263cba484d376d98347eec9d"> 2682</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#abe45d561263cba484d376d98347eec9d">system_metadata_pack_key</a>[]        = { 0x06,0x0E,0x2B,0x34,0x02,0x05,0x01,0x01,0x0D,0x01,0x03,0x01,0x04,0x01,0x01,0x00 };</div>
<div class="line"><a name="l02683"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a6aa52e6c8d8de3129b390773df6d80ec"> 2683</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="mxfenc_8c.html#a6aa52e6c8d8de3129b390773df6d80ec">system_metadata_package_set_key</a>[] = { 0x06,0x0E,0x2B,0x34,0x02,0x43,0x01,0x01,0x0D,0x01,0x03,0x01,0x04,0x01,0x02,0x01 };</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160; </div>
<div class="line"><a name="l02685"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a8588e5086fd1cc038fd90efbb10bfe9f"> 2685</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a8588e5086fd1cc038fd90efbb10bfe9f">mxf_write_system_item</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;{</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>;</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    uint32_t time_code;</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, system_item_bitmap = 0x58; <span class="comment">// UL, user date/time stamp, picture present</span></div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160; </div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a0f7818763fb94714b758f4cf8de59416">last_indexed_edit_unit</a> + mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160; </div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="comment">// write system metadata pack</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#abe45d561263cba484d376d98347eec9d">system_metadata_pack_key</a>, 16);</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(pb, 57);</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160; </div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;codecpar-&gt;codec_type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>)</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;            system_item_bitmap |= 0x4;</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;codecpar-&gt;codec_type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a>)</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;            system_item_bitmap |= 0x2;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    }</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, system_item_bitmap);</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#ab41ba86e76941af3770b8ee825648868">content_package_rate</a>); <span class="comment">// content package rate</span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0x00); <span class="comment">// content package type</span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 0x00); <span class="comment">// channel handle</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> &amp; 0xFFFF); <span class="comment">// continuity count, supposed to overflow</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">essence_container_count</a> &gt; 1)</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#aedcb909b3190b1c56c69ad69b2e35296">multiple_desc_ul</a>, 16);</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[0]-&gt;priv_data;</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, *sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">container_ul</a>, 16);</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0);</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0);</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0); <span class="comment">// creation date/time stamp</span></div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160; </div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0x81); <span class="comment">// SMPTE 12M time code</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    time_code = <a class="code" href="timecode_8c.html#ae3045b65cc54f72e9d53d3c97a5f4da5">av_timecode_get_smpte_from_framenum</a>(&amp;mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">tc</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, time_code);</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0); <span class="comment">// binary group data</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0);</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160; </div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <span class="comment">// write system metadata package set</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#a6aa52e6c8d8de3129b390773df6d80ec">system_metadata_package_set_key</a>, 16);</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(pb, 35);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, 0x83); <span class="comment">// UMID</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, 0x20);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <a class="code" href="mxfenc_8c.html#a98780f74c4764e08676c9746438eb3fc">mxf_write_umid</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 1);</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;}</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160; </div>
<div class="line"><a name="l02734"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a84295d6f8072063659949d71f6751c68"> 2734</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a84295d6f8072063659949d71f6751c68">mxf_write_d10_audio_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_stream.html">AVStream</a> *st, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;{</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> / st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a>;</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> + <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160; </div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(pb, 4 + <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>*4*8);</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160; </div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, (<a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> == 1920 ? 0 : (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>-1) % 5 + 1));</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    <a class="code" href="avio_8h.html#a1ba843eb6d34706bbdd177a4256e71e2">avio_wl16</a>(pb, <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>);</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <a class="code" href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a>(pb, (1&lt;&lt;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>)-1);</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160; </div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> &lt; <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>) {</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;            uint32_t <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;            <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be">AV_CODEC_ID_PCM_S24LE</a>) {</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;                <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a41b740ee413e64d31482a50721eaef4f">AV_RL24</a>(<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>)&lt;&lt; 4;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;                <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> += 3;</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;                <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="avr32_2intreadwrite_8h.html#a1a7214fcedcf4bd3e668506d30d7892f">AV_RL16</a>(<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>)&lt;&lt;12;</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;                <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> += 2;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;            }</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;            <a class="code" href="avio_8h.html#a16f2ba75f978a70f16dc55e2393f3439">avio_wl32</a>(pb, <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> | <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;        }</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;        <span class="keywordflow">for</span> (; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;            <a class="code" href="avio_8h.html#a16f2ba75f978a70f16dc55e2393f3439">avio_wl32</a>(pb, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    }</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;}</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160; </div>
<div class="line"><a name="l02766"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a2419a19742b769efdd7aa11629396bf4"> 2766</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a2419a19742b769efdd7aa11629396bf4">mxf_write_opatom_body_partition</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;{</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[0];</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160; </div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160; </div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>)</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = <a class="code" href="mxfenc_8c.html#afa963116f2229e58430c7878f785ad53">body_partition_key</a>;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160; </div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 1, 0, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>, 16);</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <a class="code" href="mxfenc_8c.html#a98c67dc2ec2837757edb67e26990ed25">klv_encode_ber9_length</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a>);</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;}</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160; </div>
<div class="line"><a name="l02787"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#af627568559a443d732d979dd7ec81502"> 2787</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#af627568559a443d732d979dd7ec81502">mxf_write_opatom_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="struct_m_x_f_index_entry.html">MXFIndexEntry</a> *ie)</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;{</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160; </div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160; </div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>) {</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, 0, <a class="code" href="mxfenc_8c.html#a98d7628b1f5baee00eb9ffd8610563c0">header_open_partition_key</a>, 1)) &lt; 0)</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;        <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160; </div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#a2419a19742b769efdd7aa11629396bf4">mxf_write_opatom_body_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0)</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a> = 1;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    }</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160; </div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>) {</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>].<a class="code" href="struct_m_x_f_index_entry.html#a860828beb605fe235f332bace41dfde1">offset</a> = mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a>;</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>].<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> = ie-&gt;<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a>;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>].<a class="code" href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">temporal_ref</a> = ie-&gt;<a class="code" href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">temporal_ref</a>;</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    }</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>++;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a> += <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160; </div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;}</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160; </div>
<div class="line"><a name="l02816"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#af2748064eb22e5fd5f30e4bdf5f5f42d"> 2816</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#af2748064eb22e5fd5f30e4bdf5f5f42d">mxf_compute_edit_unit_byte_count</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;{</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160; </div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>) {</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[0]-&gt;priv_data;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> = sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a>;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    }</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160; </div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> = <a class="code" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a>; <span class="comment">// system element</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;        sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#acf2f20cf2dee7626272509a69e08306b">slice_offset</a> = mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>;</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> += 16 + 4 + sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a>;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> += <a class="code" href="mxfenc_8c.html#a13be66c065e3ca9ca346e824829accc1">klv_fill_size</a>(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>);</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    }</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;}</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160; </div>
<div class="line"><a name="l02837"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a9d423cc4da1c35199bff8f2fd4c10e21"> 2837</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a9d423cc4da1c35199bff8f2fd4c10e21">mxf_write_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;{</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = st-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <a class="code" href="struct_m_x_f_index_entry.html">MXFIndexEntry</a> ie = {0};</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160; </div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a6113618badc827fe35a268b4c25ad57a">cbr_index</a> &amp;&amp; !mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> &amp;&amp; !(mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a> % <a class="code" href="mxfenc_8c.html#a6047808424335311a3e5259a5dda34b0">EDIT_UNITS_PER_BODY</a>)) {</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="group__lavu__mem__funcs.html#gad8fde0c159ac905909339e082a049cde">av_reallocp_array</a>(&amp;mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                                     + <a class="code" href="mxfenc_8c.html#a6047808424335311a3e5259a5dda34b0">EDIT_UNITS_PER_BODY</a>, <span class="keyword">sizeof</span>(*mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>))) &lt; 0) {</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a> = 0;</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;could not allocate index entries\n&quot;</span>);</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        }</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    }</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160; </div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>) {</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mxfenc_8c.html#a784ffdd9a829849c70a3757891ce5b3e">mxf_parse_mpeg2_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, &amp;ie)) {</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;could not get mpeg2 profile and level\n&quot;</span>);</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;        }</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead36347b6ae291fc3cc95f84aecf8035a">AV_CODEC_ID_DNXHD</a>) {</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mxfenc_8c.html#ad5fb850d5c737d850218a087f6a8f0b7">mxf_parse_dnxhd_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) {</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;could not get dnxhd profile\n&quot;</span>);</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;        }</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceab140360bd655d8add22265dbe45b581c">AV_CODEC_ID_PRORES</a>) {</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mxfenc_8c.html#a3b78c1d7f063e08c42cb892fe0ca5d36">mxf_parse_prores_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) {</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;could not get prores profile\n&quot;</span>);</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        }</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06">AV_CODEC_ID_DVVIDEO</a>) {</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mxfenc_8c.html#a281641b9a1926dfdc4b73c4eb37e6220">mxf_parse_dv_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) {</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;could not get dv profile\n&quot;</span>);</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        }</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>) {</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mxfenc_8c.html#a89e1c07927025dd9b2e83ee0562e3ce5">mxf_parse_h264_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, &amp;ie)) {</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;could not get h264 profile\n&quot;</span>);</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        }</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    }</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160; </div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a6113618badc827fe35a268b4c25ad57a">cbr_index</a>) {</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> != sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;track %d: frame size does not match index unit size, %d != %d\n&quot;</span>,</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;                   st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">frame_size</a>);</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;        }</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;        <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>)</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;            <a class="code" href="mxfenc_8c.html#af2748064eb22e5fd5f30e4bdf5f5f42d">mxf_compute_edit_unit_byte_count</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    }</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160; </div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>)</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mxfenc_8c.html#af627568559a443d732d979dd7ec81502">mxf_write_opatom_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, &amp;ie);</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160; </div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a>) {</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>) {</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;            <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 1, 2, <a class="code" href="mxfenc_8c.html#a98d7628b1f5baee00eb9ffd8610563c0">header_open_partition_key</a>, 1)) &lt; 0)</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;            <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;            <a class="code" href="mxfenc_8c.html#aee7586842abe70868842ec0cbeb69226">mxf_write_index_table_segment</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;            <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, 0, <a class="code" href="mxfenc_8c.html#a98d7628b1f5baee00eb9ffd8610563c0">header_open_partition_key</a>, 1)) &lt; 0)</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;        }</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a> = 1;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    }</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160; </div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <span class="keywordflow">if</span> (st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a> == 0) {</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;        <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> &amp;&amp;</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;            (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a> || mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a> &gt; <a class="code" href="mxfenc_8c.html#a6047808424335311a3e5259a5dda34b0">EDIT_UNITS_PER_BODY</a>) &amp;&amp;</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;            !(ie.<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> &amp; 0x33)) { <span class="comment">// I-frame, GOP start</span></div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;            <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;            <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 1, 2, <a class="code" href="mxfenc_8c.html#afa963116f2229e58430c7878f785ad53">body_partition_key</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;            <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;            <a class="code" href="mxfenc_8c.html#aee7586842abe70868842ec0cbeb69226">mxf_write_index_table_segment</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        }</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160; </div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;        <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        <a class="code" href="mxfenc_8c.html#a8588e5086fd1cc038fd90efbb10bfe9f">mxf_write_system_item</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160; </div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a>) {</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>].<a class="code" href="struct_m_x_f_index_entry.html#a860828beb605fe235f332bace41dfde1">offset</a> = mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a>;</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>].<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a> = ie.<a class="code" href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">flags</a>;</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>].<a class="code" href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">temporal_ref</a> = ie.<a class="code" href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">temporal_ref</a>;</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a> += <a class="code" href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a>; <span class="comment">// size of system element</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        }</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>++;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> &amp;&amp; st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a> == 1) {</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>) {</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;No packets in first stream\n&quot;</span>);</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        }</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>-1].<a class="code" href="struct_m_x_f_index_entry.html#a494664cd518f46d122c2de3df94242f1">slice_offset</a> =</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;            mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a> - mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>[mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>-1].<a class="code" href="struct_m_x_f_index_entry.html#a860828beb605fe235f332bace41dfde1">offset</a>;</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    }</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160; </div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">track_essence_element_key</a>, 16); <span class="comment">// write key</span></div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a> &amp;&amp;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;        st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) {</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        <a class="code" href="mxfenc_8c.html#a84295d6f8072063659949d71f6751c68">mxf_write_d10_audio_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, st, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;        <a class="code" href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a>(pb, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>); <span class="comment">// write length</span></div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">body_offset</a> += 16+4+<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> + <a class="code" href="mxfenc_8c.html#a13be66c065e3ca9ca346e824829accc1">klv_fill_size</a>(16+4+<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    }</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160; </div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;}</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160; </div>
<div class="line"><a name="l02952"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#ab9eb3159698c12a77d8f738068184770"> 2952</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#ab9eb3159698c12a77d8f738068184770">mxf_write_random_index_pack</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;{</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    uint64_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160; </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(pb, <a class="code" href="mxfenc_8c.html#ad6de8cb1ec64893b34a208d0322600a6">random_index_pack_key</a>, 16);</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <a class="code" href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a>(pb, 28 + 12LL*mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a>);</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160; </div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat != &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>)</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 1); <span class="comment">// BodySID of header partition</span></div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0);</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, 0); <span class="comment">// offset of header partition</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160; </div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;        <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 1); <span class="comment">// BodySID</span></div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    }</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160; </div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, 0); <span class="comment">// BodySID of footer partition</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a00d740dac0f18778dc0c25be1dbde1be">footer_partition_offset</a>);</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160; </div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <a class="code" href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a>(pb, <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb) - <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> + 4);</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;}</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160; </div>
<div class="line"><a name="l02979"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#aea9403dced27e48ba7e8a6657ca3904e"> 2979</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#aea9403dced27e48ba7e8a6657ca3904e">mxf_write_footer</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;{</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *pb = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, err;</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160; </div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <span class="keywordflow">if</span> (!mxf-&gt;<a class="code" href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">header_written</a> ||</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;        (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a> &amp;&amp; !mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>)) {</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        <span class="comment">/* reason could be invalid options/not supported codec/out of memory */</span></div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a>;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    }</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160; </div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a1e414bd816f6ee8013d104eff865bb98">duration</a> = mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a0f7818763fb94714b758f4cf8de59416">last_indexed_edit_unit</a> + mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">edit_units_count</a>;</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160; </div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a00d740dac0f18778dc0c25be1dbde1be">footer_partition_offset</a> = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(pb);</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat != &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>) { <span class="comment">// no need to repeat index</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, 0, <a class="code" href="mxfenc_8c.html#a14d27fd607de01b69c61de36be032106">footer_partition_key</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, 2, <a class="code" href="mxfenc_8c.html#a14d27fd607de01b69c61de36be032106">footer_partition_key</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        <a class="code" href="mxfenc_8c.html#aee7586842abe70868842ec0cbeb69226">mxf_write_index_table_segment</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    }</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160; </div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <a class="code" href="mxfenc_8c.html#ab9eb3159698c12a77d8f738068184770">mxf_write_random_index_pack</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160; </div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb-&gt;seekable &amp; <a class="code" href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a>) {</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat == &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>) {</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;            <span class="comment">/* rewrite body partition to update lengths */</span></div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;            <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>[0], SEEK_SET);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;            <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#a2419a19742b769efdd7aa11629396bf4">mxf_write_opatom_body_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0)</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;        }</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160; </div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, 0, SEEK_SET);</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">edit_unit_byte_count</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat != &amp;<a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a>) {</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;            <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 1, 2, <a class="code" href="mxfenc_8c.html#a73daf89ccfe6fce7401d82df1b3a5c9a">header_closed_partition_key</a>, 1)) &lt; 0)</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;            <a class="code" href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;            <a class="code" href="mxfenc_8c.html#aee7586842abe70868842ec0cbeb69226">mxf_write_index_table_segment</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;            <span class="keywordflow">if</span> ((err = <a class="code" href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, 0, <a class="code" href="mxfenc_8c.html#a73daf89ccfe6fce7401d82df1b3a5c9a">header_closed_partition_key</a>, 1)) &lt; 0)</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;        }</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;        <span class="comment">// update footer partition offset</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">body_partitions_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;            <a class="code" href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]+44, SEEK_SET);</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;            <a class="code" href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a>(pb, mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a00d740dac0f18778dc0c25be1dbde1be">footer_partition_offset</a>);</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;        }</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    }</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160; </div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;}</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160; </div>
<div class="line"><a name="l03036"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a87ffd93dea9eb95a1ccc9041f94d44d8"> 3036</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mxfenc_8c.html#a87ffd93dea9eb95a1ccc9041f94d44d8">mxf_deinit</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;{</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <a class="code" href="struct_m_x_f_context.html">MXFContext</a> *mxf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;priv_data;</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160; </div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">index_entries</a>);</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">body_partition_offset</a>);</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <span class="keywordflow">if</span> (mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>) {</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>-&gt;<a class="code" href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">priv_data</a>);</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;mxf-&gt;<a class="code" href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">timecode_track</a>);</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    }</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;}</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160; </div>
<div class="line"><a name="l03048"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a72fdd50bad28e14b960e0054a400586f"> 3048</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a72fdd50bad28e14b960e0054a400586f">mxf_interleave_get_packet</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>)</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;{</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, stream_count = 0;</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160; </div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        stream_count += !!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;internal-&gt;last_in_packet_buffer;</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160; </div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (stream_count &amp;&amp; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams == stream_count || <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>)) {</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;        <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *pktl = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer;</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_streams != stream_count) {</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;            <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *last = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;            <span class="comment">// find last packet in edit unit</span></div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;            <span class="keywordflow">while</span> (pktl) {</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;                <span class="keywordflow">if</span> (!stream_count || pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> == 0)</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;                <span class="comment">// update last packet in packet buffer</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;internal-&gt;last_in_packet_buffer != pktl)</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;internal-&gt;last_in_packet_buffer = pktl;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;                last = pktl;</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;                pktl = pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a>;</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;                stream_count--;</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;            }</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;            <span class="comment">// purge packet queue</span></div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;            <span class="keywordflow">while</span> (pktl) {</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;                <a class="code" href="struct_a_v_packet_list.html">AVPacketList</a> *next = pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a>;</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;                <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>);</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pktl);</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;                pktl = next;</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;            }</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;            <span class="keywordflow">if</span> (last)</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;                last-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer_end= <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;            }</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;            pktl = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer;</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;        }</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160; </div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;        *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>;</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a>, <span class="stringliteral">&quot;out st:%d dts:%&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, (*out).stream_index, (*out).dts);</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer = pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">next</a>;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;internal-&gt;last_in_packet_buffer == pktl)</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[pktl-&gt;<a class="code" href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;internal-&gt;last_in_packet_buffer= <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer)</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;internal-&gt;packet_buffer_end= <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pktl);</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>:</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    }</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;}</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160; </div>
<div class="line"><a name="l03102"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a212db8d8634230dab813451e8affb673"> 3102</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a212db8d8634230dab813451e8affb673">mxf_compare_timestamps</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keyword">const</span> <a class="code" href="struct_a_v_packet.html">AVPacket</a> *next,</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;                                                      <span class="keyword">const</span> <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;{</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> -&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;priv_data;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc2 = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[next-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;priv_data;</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160; </div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    <span class="keywordflow">return</span> next-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> &gt; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> ||</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        (next-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> == <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> &amp;&amp; sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab515e3849c98255b0496478355800f27">order</a> &lt; sc2-&gt;<a class="code" href="struct_m_x_f_stream_context.html#ab515e3849c98255b0496478355800f27">order</a>);</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;}</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160; </div>
<div class="line"><a name="l03112"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a98f2ef1f9a4b2fa97e279e328a7801aa"> 3112</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#a98f2ef1f9a4b2fa97e279e328a7801aa">mxf_interleave</a>(<a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>)</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;{</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) {</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <a class="code" href="struct_m_x_f_stream_context.html">MXFStreamContext</a> *sc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]-&gt;priv_data;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = sc-&gt;<a class="code" href="struct_m_x_f_stream_context.html#abfec8138a3d5e16b49d22113e3c41d2a">pkt_cnt</a>++;</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavformat_2internal_8h.html#a647151ae012e11d05dbeb01c5a502704">ff_interleave_add_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="mxfenc_8c.html#a212db8d8634230dab813451e8affb673">mxf_compare_timestamps</a>)) &lt; 0)</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    }</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mxfenc_8c.html#a72fdd50bad28e14b960e0054a400586f">mxf_interleave_get_packet</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>);</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;}</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160; </div>
<div class="line"><a name="l03124"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#af10d1acce473b3476890fe1376d0e1de"> 3124</a></span>&#160;<span class="preprocessor">#define MXF_COMMON_OPTIONS \</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;<span class="preprocessor">    { &quot;signal_standard&quot;, &quot;Force/set Signal Standard&quot;,\</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="preprocessor">      offsetof(MXFContext, signal_standard), AV_OPT_TYPE_INT, {.i64 = -1}, -1, 7, AV_OPT_FLAG_ENCODING_PARAM, &quot;signal_standard&quot;},\</span></div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;<span class="preprocessor">    { &quot;bt601&quot;, &quot;ITU-R BT.601 and BT.656, also SMPTE 125M (525 and 625 line interlaced)&quot;,\</span></div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;<span class="preprocessor">      0, AV_OPT_TYPE_CONST, {.i64 = 1}, -1, 7, AV_OPT_FLAG_ENCODING_PARAM, &quot;signal_standard&quot;},\</span></div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="preprocessor">    { &quot;bt1358&quot;, &quot;ITU-R BT.1358 and ITU-R BT.799-3, also SMPTE 293M (525 and 625 line progressive)&quot;,\</span></div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;<span class="preprocessor">      0, AV_OPT_TYPE_CONST, {.i64 = 2}, -1, 7, AV_OPT_FLAG_ENCODING_PARAM, &quot;signal_standard&quot;},\</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;<span class="preprocessor">    { &quot;smpte347m&quot;, &quot;SMPTE 347M (540 Mbps mappings)&quot;,\</span></div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;<span class="preprocessor">      0, AV_OPT_TYPE_CONST, {.i64 = 3}, -1, 7, AV_OPT_FLAG_ENCODING_PARAM, &quot;signal_standard&quot;},\</span></div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;<span class="preprocessor">    { &quot;smpte274m&quot;, &quot;SMPTE 274M (1125 line)&quot;,\</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;<span class="preprocessor">      0, AV_OPT_TYPE_CONST, {.i64 = 4}, -1, 7, AV_OPT_FLAG_ENCODING_PARAM, &quot;signal_standard&quot;},\</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;<span class="preprocessor">    { &quot;smpte296m&quot;, &quot;SMPTE 296M (750 line progressive)&quot;,\</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;<span class="preprocessor">      0, AV_OPT_TYPE_CONST, {.i64 = 5}, -1, 7, AV_OPT_FLAG_ENCODING_PARAM, &quot;signal_standard&quot;},\</span></div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;<span class="preprocessor">    { &quot;smpte349m&quot;, &quot;SMPTE 349M (1485 Mbps mappings)&quot;,\</span></div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;<span class="preprocessor">      0, AV_OPT_TYPE_CONST, {.i64 = 6}, -1, 7, AV_OPT_FLAG_ENCODING_PARAM, &quot;signal_standard&quot;},\</span></div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;<span class="preprocessor">    { &quot;smpte428&quot;, &quot;SMPTE 428-1 DCDM&quot;,\</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;<span class="preprocessor">      0, AV_OPT_TYPE_CONST, {.i64 = 7}, -1, 7, AV_OPT_FLAG_ENCODING_PARAM, &quot;signal_standard&quot;},</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160; </div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160; </div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160; </div>
<div class="line"><a name="l03144"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a6898b0551f1d48ff66080617b5233dc4"> 3144</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="mxfenc_8c.html#a6898b0551f1d48ff66080617b5233dc4">mxf_options</a>[] = {</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    <a class="code" href="mxfenc_8c.html#af10d1acce473b3476890fe1376d0e1de">MXF_COMMON_OPTIONS</a></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    { <span class="stringliteral">&quot;store_user_comments&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;      offsetof(<a class="code" href="struct_m_x_f_context.html">MXFContext</a>, store_user_comments), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, {.i64 = 1}, 0, 1, <a class="code" href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a>},</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;};</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160; </div>
<div class="line"><a name="l03151"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a890464c83347c64543cfa66325d619d9"> 3151</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <a class="code" href="mxfenc_8c.html#a890464c83347c64543cfa66325d619d9">mxf_muxer_class</a> = {</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a>     = <span class="stringliteral">&quot;MXF muxer&quot;</span>,</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    .item_name      = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;    .option         = <a class="code" href="mxfenc_8c.html#a6898b0551f1d48ff66080617b5233dc4">mxf_options</a>,</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    .version        = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;};</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160; </div>
<div class="line"><a name="l03158"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a8b9eb164516edf0d6a4dd1df6b8efdf2"> 3158</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="mxfenc_8c.html#a8b9eb164516edf0d6a4dd1df6b8efdf2">d10_options</a>[] = {</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    { <span class="stringliteral">&quot;d10_channelcount&quot;</span>, <span class="stringliteral">&quot;Force/set channelcount in generic sound essence descriptor&quot;</span>,</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      offsetof(<a class="code" href="struct_m_x_f_context.html">MXFContext</a>, channel_count), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, {.i64 = -1}, -1, 8, <a class="code" href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a>},</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    <a class="code" href="mxfenc_8c.html#af10d1acce473b3476890fe1376d0e1de">MXF_COMMON_OPTIONS</a></div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    { <span class="stringliteral">&quot;store_user_comments&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;      offsetof(<a class="code" href="struct_m_x_f_context.html">MXFContext</a>, store_user_comments), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, {.i64 = 0}, 0, 1, <a class="code" href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a>},</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;};</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160; </div>
<div class="line"><a name="l03167"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#afdd66475f9ba4677de4befe5872083ed"> 3167</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <a class="code" href="mxfenc_8c.html#afdd66475f9ba4677de4befe5872083ed">mxf_d10_muxer_class</a> = {</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a>     = <span class="stringliteral">&quot;MXF-D10 muxer&quot;</span>,</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    .item_name      = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    .option         = <a class="code" href="mxfenc_8c.html#a8b9eb164516edf0d6a4dd1df6b8efdf2">d10_options</a>,</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    .version        = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;};</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160; </div>
<div class="line"><a name="l03174"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a992dabf4b88254de0bc5158460b63aac"> 3174</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="mxfenc_8c.html#a992dabf4b88254de0bc5158460b63aac">opatom_options</a>[] = {</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    { <span class="stringliteral">&quot;mxf_audio_edit_rate&quot;</span>, <span class="stringliteral">&quot;Audio edit rate for timecode&quot;</span>,</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;        offsetof(<a class="code" href="struct_m_x_f_context.html">MXFContext</a>, audio_edit_rate), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a74ba464440564230a72b95b39593cbfc">AV_OPT_TYPE_RATIONAL</a>, {.dbl=25}, 0, INT_MAX, <a class="code" href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a> },</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <a class="code" href="mxfenc_8c.html#af10d1acce473b3476890fe1376d0e1de">MXF_COMMON_OPTIONS</a></div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;    { <span class="stringliteral">&quot;store_user_comments&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;      offsetof(<a class="code" href="struct_m_x_f_context.html">MXFContext</a>, store_user_comments), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a>, {.i64 = 1}, 0, 1, <a class="code" href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a>},</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;};</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160; </div>
<div class="line"><a name="l03183"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#adf188f187a0e27f371107e2e53f200c7"> 3183</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <a class="code" href="mxfenc_8c.html#adf188f187a0e27f371107e2e53f200c7">mxf_opatom_muxer_class</a> = {</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a>     = <span class="stringliteral">&quot;MXF-OPAtom muxer&quot;</span>,</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    .item_name      = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    .option         = <a class="code" href="mxfenc_8c.html#a992dabf4b88254de0bc5158460b63aac">opatom_options</a>,</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    .version        = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;};</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160; </div>
<div class="line"><a name="l03190"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#af1d5db842a5884664b6c4a386add3b83"> 3190</a></span>&#160;<a class="code" href="struct_a_v_output_format.html">AVOutputFormat</a> <a class="code" href="mxfenc_8c.html#af1d5db842a5884664b6c4a386add3b83">ff_mxf_muxer</a> = {</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    .<a class="code" href="struct_a_v_output_format.html#ac3abc5f47f3465b6b7eec89c9476351c">name</a>              = <span class="stringliteral">&quot;mxf&quot;</span>,</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    .long_name         = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;MXF (Material eXchange Format)&quot;</span>),</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    .mime_type         = <span class="stringliteral">&quot;application/mxf&quot;</span>,</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    .extensions        = <span class="stringliteral">&quot;mxf&quot;</span>,</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    .priv_data_size    = <span class="keyword">sizeof</span>(<a class="code" href="mxfenc_8c.html#aa4a17fb088e6eccfd8b8a5a0c96288b9">MXFContext</a>),</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    .audio_codec       = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a>,</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    .video_codec       = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>,</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    .<a class="code" href="ffv1enc_8c.html#a5ba88be0a987de9abb6091eb8e167e09">write_header</a>      = <a class="code" href="mxfenc_8c.html#a8e867d1c5bca3ba70c1a864141690913">mxf_write_header</a>,</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    .<a class="code" href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">write_packet</a>      = <a class="code" href="mxfenc_8c.html#a9d423cc4da1c35199bff8f2fd4c10e21">mxf_write_packet</a>,</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    .<a class="code" href="v4l2enc_8c.html#a4f80c0767194e6e297d2952ed1e75ccc">write_trailer</a>     = <a class="code" href="mxfenc_8c.html#aea9403dced27e48ba7e8a6657ca3904e">mxf_write_footer</a>,</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    .deinit            = <a class="code" href="mxfenc_8c.html#a87ffd93dea9eb95a1ccc9041f94d44d8">mxf_deinit</a>,</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    .<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>             = <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>,</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;    .<a class="code" href="mux_8c.html#a552b572c3ac81421ed684256de0eb815">interleave_packet</a> = <a class="code" href="mxfenc_8c.html#a98f2ef1f9a4b2fa97e279e328a7801aa">mxf_interleave</a>,</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    .priv_class        = &amp;<a class="code" href="mxfenc_8c.html#a890464c83347c64543cfa66325d619d9">mxf_muxer_class</a>,</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;};</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160; </div>
<div class="line"><a name="l03207"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525"> 3207</a></span>&#160;<a class="code" href="struct_a_v_output_format.html">AVOutputFormat</a> <a class="code" href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a> = {</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    .<a class="code" href="struct_a_v_output_format.html#ac3abc5f47f3465b6b7eec89c9476351c">name</a>              = <span class="stringliteral">&quot;mxf_d10&quot;</span>,</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    .long_name         = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;MXF (Material eXchange Format) D-10 Mapping&quot;</span>),</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    .mime_type         = <span class="stringliteral">&quot;application/mxf&quot;</span>,</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    .priv_data_size    = <span class="keyword">sizeof</span>(<a class="code" href="mxfenc_8c.html#aa4a17fb088e6eccfd8b8a5a0c96288b9">MXFContext</a>),</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;    .audio_codec       = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a>,</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    .video_codec       = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>,</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    .<a class="code" href="ffv1enc_8c.html#a5ba88be0a987de9abb6091eb8e167e09">write_header</a>      = <a class="code" href="mxfenc_8c.html#a8e867d1c5bca3ba70c1a864141690913">mxf_write_header</a>,</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    .<a class="code" href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">write_packet</a>      = <a class="code" href="mxfenc_8c.html#a9d423cc4da1c35199bff8f2fd4c10e21">mxf_write_packet</a>,</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    .<a class="code" href="v4l2enc_8c.html#a4f80c0767194e6e297d2952ed1e75ccc">write_trailer</a>     = <a class="code" href="mxfenc_8c.html#aea9403dced27e48ba7e8a6657ca3904e">mxf_write_footer</a>,</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    .deinit            = <a class="code" href="mxfenc_8c.html#a87ffd93dea9eb95a1ccc9041f94d44d8">mxf_deinit</a>,</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    .<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>             = <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>,</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    .<a class="code" href="mux_8c.html#a552b572c3ac81421ed684256de0eb815">interleave_packet</a> = <a class="code" href="mxfenc_8c.html#a98f2ef1f9a4b2fa97e279e328a7801aa">mxf_interleave</a>,</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    .priv_class        = &amp;<a class="code" href="mxfenc_8c.html#afdd66475f9ba4677de4befe5872083ed">mxf_d10_muxer_class</a>,</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;};</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160; </div>
<div class="line"><a name="l03223"></a><span class="lineno"><a class="line" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de"> 3223</a></span>&#160;<a class="code" href="struct_a_v_output_format.html">AVOutputFormat</a> <a class="code" href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a> = {</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    .<a class="code" href="struct_a_v_output_format.html#ac3abc5f47f3465b6b7eec89c9476351c">name</a>              = <span class="stringliteral">&quot;mxf_opatom&quot;</span>,</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;    .long_name         = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;MXF (Material eXchange Format) Operational Pattern Atom&quot;</span>),</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    .mime_type         = <span class="stringliteral">&quot;application/mxf&quot;</span>,</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    .extensions        = <span class="stringliteral">&quot;mxf&quot;</span>,</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    .priv_data_size    = <span class="keyword">sizeof</span>(<a class="code" href="mxfenc_8c.html#aa4a17fb088e6eccfd8b8a5a0c96288b9">MXFContext</a>),</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    .audio_codec       = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a>,</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    .video_codec       = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead36347b6ae291fc3cc95f84aecf8035a">AV_CODEC_ID_DNXHD</a>,</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    .<a class="code" href="ffv1enc_8c.html#a5ba88be0a987de9abb6091eb8e167e09">write_header</a>      = <a class="code" href="mxfenc_8c.html#a8e867d1c5bca3ba70c1a864141690913">mxf_write_header</a>,</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    .<a class="code" href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">write_packet</a>      = <a class="code" href="mxfenc_8c.html#a9d423cc4da1c35199bff8f2fd4c10e21">mxf_write_packet</a>,</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    .<a class="code" href="v4l2enc_8c.html#a4f80c0767194e6e297d2952ed1e75ccc">write_trailer</a>     = <a class="code" href="mxfenc_8c.html#aea9403dced27e48ba7e8a6657ca3904e">mxf_write_footer</a>,</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    .deinit            = <a class="code" href="mxfenc_8c.html#a87ffd93dea9eb95a1ccc9041f94d44d8">mxf_deinit</a>,</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    .<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>             = <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>,</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    .<a class="code" href="mux_8c.html#a552b572c3ac81421ed684256de0eb815">interleave_packet</a> = <a class="code" href="mxfenc_8c.html#a98f2ef1f9a4b2fa97e279e328a7801aa">mxf_interleave</a>,</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    .priv_class        = &amp;<a class="code" href="mxfenc_8c.html#adf188f187a0e27f371107e2e53f200c7">mxf_opatom_muxer_class</a>,</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea29c8a6ec93ad1a77e50f2b48efa80204">AV_CODEC_ID_PCM_S16LE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S16LE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00308">codec_id.h:308</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_abee943e65d98f9763fa6602a356e774f"><div class="ttname"><a href="struct_a_v_codec_parameters.html#abee943e65d98f9763fa6602a356e774f">AVCodecParameters::format</a></div><div class="ttdeci">int format</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00084">codec_par.h:84</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a760f90cd43e5c03cf9e92eb1d3e27f81"><div class="ttname"><a href="mxfenc_8c.html#a760f90cd43e5c03cf9e92eb1d3e27f81">primer_pack_key</a></div><div class="ttdeci">static const uint8_t primer_pack_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00272">mxfenc.c:272</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_acb45a513c86cf1a3a2e5b1e7be4388e6"><div class="ttname"><a href="struct_m_x_f_context.html#acb45a513c86cf1a3a2e5b1e7be4388e6">MXFContext::header_written</a></div><div class="ttdeci">int header_written</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00236">mxfenc.c:236</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ae1a690da45e08ebc4643a23aaf43de82"><div class="ttname"><a href="mxfenc_8c.html#ae1a690da45e08ebc4643a23aaf43de82">intra_only</a></div><div class="ttdeci">int intra_only</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02169">mxfenc.c:2169</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="acheckasm_8c_html_afca6369e091fee815954cf526fbb3887"><div class="ttname"><a href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a></div><div class="ttdeci">static struct @2 state</div></div>
<div class="ttc" id="awriting__filters_8txt_html_adb27990ed3d4ad300fd1dde281903508"><div class="ttname"><a href="writing__filters_8txt.html#adb27990ed3d4ad300fd1dde281903508">name</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf default minimum maximum flags name is the option name</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00088">writing_filters.txt:88</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a56f486265f6110192b8d07165b50e2e0"><div class="ttname"><a href="struct_m_x_f_context.html#a56f486265f6110192b8d07165b50e2e0">MXFContext::av_class</a></div><div class="ttdeci">AVClass * av_class</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00232">mxfenc.c:232</a></div></div>
<div class="ttc" id="aavcodec_8h_html_adac519593024d0941107aa583e06d9a2"><div class="ttname"><a href="avcodec_8h.html#adac519593024d0941107aa583e06d9a2">FF_PROFILE_PRORES_XQ</a></div><div class="ttdeci">#define FF_PROFILE_PRORES_XQ</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01969">avcodec.h:1969</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a7d6ef91120ffe80040c699e747a1ad68"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">AVCodecParameters::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:136</a></div></div>
<div class="ttc" id="amxf_8c_html_abf91b8102b35b2d56cf91fd986ac5b5e"><div class="ttname"><a href="mxf_8c.html#abf91b8102b35b2d56cf91fd986ac5b5e">ff_mxf_color_primaries_uls</a></div><div class="ttdeci">const MXFCodecUL ff_mxf_color_primaries_uls[]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00100">mxf.c:100</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a8b9eb164516edf0d6a4dd1df6b8efdf2"><div class="ttname"><a href="mxfenc_8c.html#a8b9eb164516edf0d6a4dd1df6b8efdf2">d10_options</a></div><div class="ttdeci">static const AVOption d10_options[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03158">mxfenc.c:3158</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="amxfenc_8c_html_a99613136a67953261099533d962f9ac4"><div class="ttname"><a href="mxfenc_8c.html#a99613136a67953261099533d962f9ac4">uid</a></div><div class="ttdeci">UID uid</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02165">mxfenc.c:2165</a></div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_html"><div class="ttname"><a href="struct_a_v_dictionary.html">AVDictionary</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00030">dict.c:30</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a86d34ba6bc49f7ebf36026db584a5465"><div class="ttname"><a href="mxfenc_8c.html#a86d34ba6bc49f7ebf36026db584a5465">mxf_user_comments_local_tag</a></div><div class="ttdeci">static const MXFLocalTagPair mxf_user_comments_local_tag[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00414">mxfenc.c:414</a></div></div>
<div class="ttc" id="astruct_m_x_f_container_essence_entry_html_a0b85c561dcb133565dc733d926bbb864"><div class="ttname"><a href="struct_m_x_f_container_essence_entry.html#a0b85c561dcb133565dc733d926bbb864">MXFContainerEssenceEntry::container_ul</a></div><div class="ttdeci">UID container_ul</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00104">mxfenc.c:104</a></div></div>
<div class="ttc" id="astruct_a_v_packet_list_html"><div class="ttname"><a href="struct_a_v_packet_list.html">AVPacketList</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00396">packet.h:396</a></div></div>
<div class="ttc" id="astruct_track_html"><div class="ttname"><a href="struct_track.html">Track</a></div><div class="ttdef"><b>Definition:</b> <a href="ismindex_8c_source.html#l00069">ismindex.c:69</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ab9eb3159698c12a77d8f738068184770"><div class="ttname"><a href="mxfenc_8c.html#ab9eb3159698c12a77d8f738068184770">mxf_write_random_index_pack</a></div><div class="ttdeci">static void mxf_write_random_index_pack(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02952">mxfenc.c:2952</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a87b9b608743045c9a90243ccc391d347"><div class="ttname"><a href="mxfenc_8c.html#a87b9b608743045c9a90243ccc391d347">mxf_utf16len</a></div><div class="ttdeci">static uint64_t mxf_utf16len(const char *utf8_str)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00651">mxfenc.c:651</a></div></div>
<div class="ttc" id="astructcolor_html"><div class="ttname"><a href="structcolor.html">color</a></div><div class="ttdef"><b>Definition:</b> <a href="vf__paletteuse_8c_source.html#l00582">vf_paletteuse.c:582</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488a35cbaf366c9ef151b0a0807fb87bd965"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a35cbaf366c9ef151b0a0807fb87bd965">INDEX_H264</a></div><div class="ttdeci">@ INDEX_H264</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00126">mxfenc.c:126</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a546b6621c7c26b34733448db63b07aa8"><div class="ttname"><a href="mxfenc_8c.html#a546b6621c7c26b34733448db63b07aa8">klv_encode_ber_length</a></div><div class="ttdeci">static int klv_encode_ber_length(AVIOContext *pb, uint64_t len)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00450">mxfenc.c:450</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a9f1426c8894b1299ac51e17d7bf12b4e"><div class="ttname"><a href="struct_m_x_f_context.html#a9f1426c8894b1299ac51e17d7bf12b4e">MXFContext::tc</a></div><div class="ttdeci">AVTimecode tc</div><div class="ttdoc">timecode context</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00246">mxfenc.c:246</a></div></div>
<div class="ttc" id="amxfenc_8c_html_acb311745e5c550d0558c93336c94b8c7"><div class="ttname"><a href="mxfenc_8c.html#acb311745e5c550d0558c93336c94b8c7">mxf_essence_mappings</a></div><div class="ttdeci">static const struct @0 mxf_essence_mappings[]</div></div>
<div class="ttc" id="apixdesc_8c_html_afe0c3e8aef5173de28bbdaea4298f5f0"><div class="ttname"><a href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a></div><div class="ttdeci">const AVPixFmtDescriptor * av_pix_fmt_desc_get(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02573">pixdesc.c:2573</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a2419a19742b769efdd7aa11629396bf4"><div class="ttname"><a href="mxfenc_8c.html#a2419a19742b769efdd7aa11629396bf4">mxf_write_opatom_body_partition</a></div><div class="ttdeci">static int mxf_write_opatom_body_partition(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02766">mxfenc.c:2766</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_aa8f0f132a2f2f558abb71dea8f4e7cec"><div class="ttname"><a href="struct_m_x_f_stream_context.html#aa8f0f132a2f2f558abb71dea8f4e7cec">MXFStreamContext::v_chroma_sub_sample</a></div><div class="ttdeci">int v_chroma_sub_sample</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00089">mxfenc.c:89</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255eda53446dc38ef01e0a39658800907bdac3"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda53446dc38ef01e0a39658800907bdac3">TaggedValue</a></div><div class="ttdeci">@ TaggedValue</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00049">mxf.h:49</a></div></div>
<div class="ttc" id="aavformat_8h_html_ae4418d32b17890be22da9c5f95087168"><div class="ttname"><a href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a></div><div class="ttdeci">#define AVFMT_NOTIMESTAMPS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00462">avformat.h:462</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_abfec8138a3d5e16b49d22113e3c41d2a"><div class="ttname"><a href="struct_m_x_f_stream_context.html#abfec8138a3d5e16b49d22113e3c41d2a">MXFStreamContext::pkt_cnt</a></div><div class="ttdeci">int64_t pkt_cnt</div><div class="ttdoc">pkt counter for muxed packets</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00077">mxfenc.c:77</a></div></div>
<div class="ttc" id="amxfenc_8c_html_af10d1acce473b3476890fe1376d0e1de"><div class="ttname"><a href="mxfenc_8c.html#af10d1acce473b3476890fe1376d0e1de">MXF_COMMON_OPTIONS</a></div><div class="ttdeci">#define MXF_COMMON_OPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03124">mxfenc.c:3124</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_ab515e3849c98255b0496478355800f27"><div class="ttname"><a href="struct_m_x_f_stream_context.html#ab515e3849c98255b0496478355800f27">MXFStreamContext::order</a></div><div class="ttdeci">int order</div><div class="ttdoc">interleaving order if dts are equal</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00082">mxfenc.c:82</a></div></div>
<div class="ttc" id="astruct_a_v_i_o_context_html"><div class="ttname"><a href="struct_a_v_i_o_context.html">AVIOContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00161">avio.h:161</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a84295d6f8072063659949d71f6751c68"><div class="ttname"><a href="mxfenc_8c.html#a84295d6f8072063659949d71f6751c68">mxf_write_d10_audio_packet</a></div><div class="ttdeci">static void mxf_write_d10_audio_packet(AVFormatContext *s, AVStream *st, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02734">mxfenc.c:2734</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00092">avrndec.c:92</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ad98b63994ecf2539e238039fdaba355d"><div class="ttname"><a href="mxfenc_8c.html#ad98b63994ecf2539e238039fdaba355d">DESCRIPTOR_COUNT</a></div><div class="ttdeci">#define DESCRIPTOR_COUNT(essence_container_count)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00571">mxfenc.c:571</a></div></div>
<div class="ttc" id="apixdesc_8h_html"><div class="ttname"><a href="pixdesc_8h.html">pixdesc.h</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a9ab63c4735b8342ae42df166b0337add"><div class="ttname"><a href="struct_m_x_f_context.html#a9ab63c4735b8342ae42df166b0337add">MXFContext::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00235">mxfenc.c:235</a></div></div>
<div class="ttc" id="astruct_m_x_f_container_essence_entry_html"><div class="ttname"><a href="struct_m_x_f_container_essence_entry.html">MXFContainerEssenceEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00103">mxfenc.c:103</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a5f869be1e79f97ffefcd5e94b3fa0dbd"><div class="ttname"><a href="struct_m_x_f_context.html#a5f869be1e79f97ffefcd5e94b3fa0dbd">MXFContext::audio_edit_rate</a></div><div class="ttdeci">AVRational audio_edit_rate</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00257">mxfenc.c:257</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a51639f88aef9f4f283f538a0c033fbb8"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">AVCodecParameters::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00126">codec_par.h:126</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html"><div class="ttname"><a href="libavcodec_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a0be5317992ecb9de3b88fccadd559b0c"><div class="ttname"><a href="mxfenc_8c.html#a0be5317992ecb9de3b88fccadd559b0c">header_metadata_key</a></div><div class="ttdeci">static const uint8_t header_metadata_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00283">mxfenc.c:283</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255edae4948874833872e69ee04984a638d450"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edae4948874833872e69ee04984a638d450">ContentStorage</a></div><div class="ttdeci">@ ContentStorage</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00044">mxf.h:44</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255eda44c519a3ea4c29e34ae5d26b37e059f3"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda44c519a3ea4c29e34ae5d26b37e059f3">SourceClip</a></div><div class="ttdeci">@ SourceClip</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00034">mxf.h:34</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_afd2d38dbc4338142d73bbd42c59ac186"><div class="ttname"><a href="intreadwrite_8h.html#afd2d38dbc4338142d73bbd42c59ac186">AV_WB64</a></div><div class="ttdeci">#define AV_WB64(p, val)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00311">intreadwrite.h:311</a></div></div>
<div class="ttc" id="astruct_a_v_timecode_html_a96510357827972576efb578725affb89"><div class="ttname"><a href="struct_a_v_timecode.html#a96510357827972576efb578725affb89">AVTimecode::rate</a></div><div class="ttdeci">AVRational rate</div><div class="ttdoc">frame rate in rational form</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00044">timecode.h:44</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html"><div class="ttname"><a href="struct_m_x_f_stream_context.html">MXFStreamContext</a></div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00076">mxfenc.c:76</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_ab0ada0e011ce230ec7c6fc9f600bf89c"><div class="ttname"><a href="libavformat_2internal_8h.html#ab0ada0e011ce230ec7c6fc9f600bf89c">ff_parse_creation_time_metadata</a></div><div class="ttdeci">int ff_parse_creation_time_metadata(AVFormatContext *s, int64_t *timestamp, int return_seconds)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05630">utils.c:5630</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga341bbd1ea599dfb0510f419e5272fecc"><div class="ttname"><a href="group__lavu__dict.html#ga341bbd1ea599dfb0510f419e5272fecc">AV_DICT_IGNORE_SUFFIX</a></div><div class="ttdeci">#define AV_DICT_IGNORE_SUFFIX</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00071">dict.h:70</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ad5fb850d5c737d850218a087f6a8f0b7"><div class="ttname"><a href="mxfenc_8c.html#ad5fb850d5c737d850218a087f6a8f0b7">mxf_parse_dnxhd_frame</a></div><div class="ttdeci">static int mxf_parse_dnxhd_frame(AVFormatContext *s, AVStream *st, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02023">mxfenc.c:2023</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga9b58b28e2d429b930b69db19877f76a8"><div class="ttname"><a href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a></div><div class="ttdeci">#define AV_LOG_VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00210">log.h:210</a></div></div>
<div class="ttc" id="alibavformat_2version_8h_html_a3224be1c325e29c7ed5c1f69f5a4d343"><div class="ttname"><a href="libavformat_2version_8h.html#a3224be1c325e29c7ed5c1f69f5a4d343">LIBAVFORMAT_VERSION_MICRO</a></div><div class="ttdeci">#define LIBAVFORMAT_VERSION_MICRO</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2version_8h_source.html#l00036">version.h:36</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html"><div class="ttname"><a href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00081">dict.h:81</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a5042c9a62a27b527c303eb0f33718192"><div class="ttname"><a href="struct_m_x_f_context.html#a5042c9a62a27b527c303eb0f33718192">MXFContext::body_partitions_count</a></div><div class="ttdeci">unsigned body_partitions_count</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00243">mxfenc.c:243</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_aad106c41f423759c737af3287ab70ee6"><div class="ttname"><a href="struct_m_x_f_context.html#aad106c41f423759c737af3287ab70ee6">MXFContext::body_offset</a></div><div class="ttdeci">uint64_t body_offset</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00251">mxfenc.c:251</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_a5776e5aa789ddce236a7d8bb3c5565c3"><div class="ttname"><a href="libavcodec_2internal_8h.html#a5776e5aa789ddce236a7d8bb3c5565c3">avpriv_find_start_code</a></div><div class="ttdeci">const uint8_t * avpriv_find_start_code(const uint8_t *p, const uint8_t *end, uint32_t *state)</div></div>
<div class="ttc" id="amxfenc_8c_html_a8d329e4837294223006f474e893a04de"><div class="ttname"><a href="mxfenc_8c.html#a8d329e4837294223006f474e893a04de">ff_mxf_opatom_muxer</a></div><div class="ttdeci">AVOutputFormat ff_mxf_opatom_muxer</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03223">mxfenc.c:3223</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a569743a4b5d32c82e96994cda01ce22e"><div class="ttname"><a href="mxfenc_8c.html#a569743a4b5d32c82e96994cda01ce22e">mxf_write_content_storage</a></div><div class="ttdeci">static void mxf_write_content_storage(AVFormatContext *s, MXFPackage *packages, int package_count)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00768">mxfenc.c:768</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html">AVMasteringDisplayMetadata</a></div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00038">mastering_display_metadata.h:38</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga4ebaa288c7684a26a591c501208910e4"><div class="ttname"><a href="group__lavu__error.html#ga4ebaa288c7684a26a591c501208910e4">AVERROR_UNKNOWN</a></div><div class="ttdeci">#define AVERROR_UNKNOWN</div><div class="ttdoc">Unknown error, typically from an external library.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00071">error.h:71</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_a20eeb69d7bb4044a354c5b46652b53ac"><div class="ttname"><a href="libavformat_2internal_8h.html#a20eeb69d7bb4044a354c5b46652b53ac">ff_choose_chroma_location</a></div><div class="ttdeci">enum AVChromaLocation ff_choose_chroma_location(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00089">mux.c:105</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a74ba464440564230a72b95b39593cbfc"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a74ba464440564230a72b95b39593cbfc">AV_OPT_TYPE_RATIONAL</a></div><div class="ttdeci">@ AV_OPT_TYPE_RATIONAL</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00230">opt.h:230</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a76367d3e9f707949e068b26e16f354df"><div class="ttname"><a href="mxfenc_8c.html#a76367d3e9f707949e068b26e16f354df">rescale_mastering_luma</a></div><div class="ttdeci">static uint32_t rescale_mastering_luma(AVRational q)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01060">mxfenc.c:1060</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a890464c83347c64543cfa66325d619d9"><div class="ttname"><a href="mxfenc_8c.html#a890464c83347c64543cfa66325d619d9">mxf_muxer_class</a></div><div class="ttdeci">static const AVClass mxf_muxer_class</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03151">mxfenc.c:3151</a></div></div>
<div class="ttc" id="amxf_8c_html_a5bd22d0dc3c12b536935e752f8ba5ae4"><div class="ttname"><a href="mxf_8c.html#a5bd22d0dc3c12b536935e752f8ba5ae4">ff_mxf_color_trc_uls</a></div><div class="ttdeci">const MXFCodecUL ff_mxf_color_trc_uls[]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00115">mxf.c:115</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255edabd339cc28c554f191a8c4c9d954bd440"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edabd339cc28c554f191a8c4c9d954bd440">TimecodeComponent</a></div><div class="ttdeci">@ TimecodeComponent</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00035">mxf.h:35</a></div></div>
<div class="ttc" id="astruct_m_x_f_local_tag_pair_html"><div class="ttname"><a href="struct_m_x_f_local_tag_pair.html">MXFLocalTagPair</a></div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00081">mxf.h:81</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_aa60a514773dc2818c4f7c8190a63619d"><div class="ttname"><a href="struct_m_x_f_context.html#aa60a514773dc2818c4f7c8190a63619d">MXFContext::edit_unit_byte_count</a></div><div class="ttdeci">int edit_unit_byte_count</div><div class="ttdoc">fixed edit unit byte count</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00249">mxfenc.c:249</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488aee78a19457cafee057232c55f57d38a7"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488aee78a19457cafee057232c55f57d38a7">INDEX_MPEG2</a></div><div class="ttdeci">@ INDEX_MPEG2</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00118">mxfenc.c:118</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a0d1ffb8ad990f47c1f21ec2f5b43c0b1"><div class="ttname"><a href="avcodec_8h.html#a0d1ffb8ad990f47c1f21ec2f5b43c0b1">FF_COMPLIANCE_UNOFFICIAL</a></div><div class="ttdeci">#define FF_COMPLIANCE_UNOFFICIAL</div><div class="ttdoc">Allow unofficial extensions.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01593">avcodec.h:1593</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a5404d4fa88d0006ec9bb3fa9448eab68"><div class="ttname"><a href="mxfenc_8c.html#a5404d4fa88d0006ec9bb3fa9448eab68">mxf_get_essence_container_ul_index</a></div><div class="ttdeci">static int mxf_get_essence_container_ul_index(enum AVCodecID id)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00485">mxfenc.c:485</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a7d087f41a16a84ed33a1b194207c8836"><div class="ttname"><a href="mxfenc_8c.html#a7d087f41a16a84ed33a1b194207c8836">mxf_avc_subdescriptor_key</a></div><div class="ttdeci">static const UID mxf_avc_subdescriptor_key</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01053">mxfenc.c:1053</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_aff0070aade8080185bc7599e6845ed84"><div class="ttname"><a href="struct_m_x_f_stream_context.html#aff0070aade8080185bc7599e6845ed84">MXFStreamContext::container_ul</a></div><div class="ttdeci">const UID * container_ul</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00081">mxfenc.c:81</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a4c2ac9df6d0abe6c48a46937a694bfa7"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a4c2ac9df6d0abe6c48a46937a694bfa7">MXFStreamContext::avc_intra</a></div><div class="ttdeci">int avc_intra</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00100">mxfenc.c:100</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ab720d869f3089bcc2f801a22fba59192"><div class="ttname"><a href="mxfenc_8c.html#ab720d869f3089bcc2f801a22fba59192">MXFContainerEssenceEntry</a></div><div class="ttdeci">struct MXFContainerEssenceEntry MXFContainerEssenceEntry</div></div>
<div class="ttc" id="agroup__lavu__crypto_html_ga4fe662789c7e05a6b63e0c675dbbd7ed"><div class="ttname"><a href="group__lavu__crypto.html#ga4fe662789c7e05a6b63e0c675dbbd7ed">av_get_random_seed</a></div><div class="ttdeci">uint32_t av_get_random_seed(void)</div><div class="ttdef"><b>Definition:</b> <a href="random__seed_8c_source.html#l00120">random_seed.c:120</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488a294a1ec4eca73758c4526bfc9bc583af"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a294a1ec4eca73758c4526bfc9bc583af">INDEX_DNXHD</a></div><div class="ttdeci">@ INDEX_DNXHD</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00124">mxfenc.c:124</a></div></div>
<div class="ttc" id="aavio_8h_html_a1ba843eb6d34706bbdd177a4256e71e2"><div class="ttname"><a href="avio_8h.html#a1ba843eb6d34706bbdd177a4256e71e2">avio_wl16</a></div><div class="ttdeci">void avio_wl16(AVIOContext *s, unsigned int val)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00459">aviobuf.c:459</a></div></div>
<div class="ttc" id="aavio_8h_html_a03e0cde48d492b5433e136152e47cb4c"><div class="ttname"><a href="avio_8h.html#a03e0cde48d492b5433e136152e47cb4c">avio_write_marker</a></div><div class="ttdeci">void avio_write_marker(AVIOContext *s, int64_t time, enum AVIODataMarkerType type)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00483">aviobuf.c:483</a></div></div>
<div class="ttc" id="agolomb_8h_html"><div class="ttname"><a href="golomb_8h.html">golomb.h</a></div><div class="ttdoc">exp golomb vlc stuff</div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255eda443dda9db12330ccb89369c2e3c227cb"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda443dda9db12330ccb89369c2e3c227cb">TapeDescriptor</a></div><div class="ttdeci">@ TapeDescriptor</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00050">mxf.h:50</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_ad78bf36b47a416d96a322ebf48953da5"><div class="ttname"><a href="struct_m_x_f_context.html#ad78bf36b47a416d96a322ebf48953da5">MXFContext::channel_count</a></div><div class="ttdeci">int channel_count</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00254">mxfenc.c:254</a></div></div>
<div class="ttc" id="amxf_8c_html_a6ec525d52869f1e6863b271fe8c24b0e"><div class="ttname"><a href="mxf_8c.html#a6ec525d52869f1e6863b271fe8c24b0e">ff_mxf_get_content_package_rate</a></div><div class="ttdeci">int ff_mxf_get_content_package_rate(AVRational time_base)</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00222">mxf.c:222</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a18820dc0ceb9aa3d274f0e55a3a9bca5"><div class="ttname"><a href="struct_m_x_f_context.html#a18820dc0ceb9aa3d274f0e55a3a9bca5">MXFContext::store_user_comments</a></div><div class="ttdeci">int store_user_comments</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00258">mxfenc.c:258</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ae9a9122343845cf2ff0e086589541902"><div class="ttname"><a href="mxfenc_8c.html#ae9a9122343845cf2ff0e086589541902">mxf_dnxhd_codec_uls</a></div><div class="ttdeci">static const struct @2 mxf_dnxhd_codec_uls[]</div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488a05efa5f1f97e95615afa1125e3636a3f"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a05efa5f1f97e95615afa1125e3636a3f">INDEX_JPEG2000</a></div><div class="ttdeci">@ INDEX_JPEG2000</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00125">mxfenc.c:125</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a9133ea42845783f9faaac1574487e04d"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a9133ea42845783f9faaac1574487e04d">MXFStreamContext::frame_size</a></div><div class="ttdeci">int frame_size</div><div class="ttdoc">frame size in bytes</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00095">mxfenc.c:95</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_aeb74efc41447bb66e28a2956f280190e"><div class="ttname"><a href="struct_m_x_f_context.html#aeb74efc41447bb66e28a2956f280190e">MXFContext::edit_units_count</a></div><div class="ttdeci">unsigned edit_units_count</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00238">mxfenc.c:238</a></div></div>
<div class="ttc" id="amxf_8h_html"><div class="ttname"><a href="mxf_8h.html">mxf.h</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a98f2ef1f9a4b2fa97e279e328a7801aa"><div class="ttname"><a href="mxfenc_8c.html#a98f2ef1f9a4b2fa97e279e328a7801aa">mxf_interleave</a></div><div class="ttdeci">static int mxf_interleave(AVFormatContext *s, AVPacket *out, AVPacket *pkt, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03112">mxfenc.c:3112</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ae4dbbfcf3337bfa003e5dd8d0f804c40"><div class="ttname"><a href="mxfenc_8c.html#ae4dbbfcf3337bfa003e5dd8d0f804c40">store_version</a></div><div class="ttdeci">static void store_version(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00705">mxfenc.c:705</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a12826d21779289356722971d362c583c"><div class="ttname"><a href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">AVStream::codecpar</a></div><div class="ttdeci">AVCodecParameters * codecpar</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01034">avformat.h:1034</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ab8048d5c1e910c6c5b5f1bbd7e13ef76"><div class="ttname"><a href="mxfenc_8c.html#ab8048d5c1e910c6c5b5f1bbd7e13ef76">KAG_SIZE</a></div><div class="ttdeci">#define KAG_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00067">mxfenc.c:67</a></div></div>
<div class="ttc" id="amxfenc_8c_html_acc13aa8ddaadc412076802e869ecd1fd"><div class="ttname"><a href="mxfenc_8c.html#acc13aa8ddaadc412076802e869ecd1fd">smpte_12m_timecode_track_data_ul</a></div><div class="ttdeci">static const uint8_t smpte_12m_timecode_track_data_ul[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00841">mxfenc.c:841</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ab4d6dc3ceb1354b85d9ef3178d9e3e6e"><div class="ttname"><a href="mxfenc_8c.html#ab4d6dc3ceb1354b85d9ef3178d9e3e6e">mxf_write_generic_sound_desc</a></div><div class="ttdeci">static void mxf_write_generic_sound_desc(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01462">mxfenc.c:1462</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a98d7628b1f5baee00eb9ffd8610563c0"><div class="ttname"><a href="mxfenc_8c.html#a98d7628b1f5baee00eb9ffd8610563c0">header_open_partition_key</a></div><div class="ttdeci">static const uint8_t header_open_partition_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00275">mxfenc.c:275</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aea9403dced27e48ba7e8a6657ca3904e"><div class="ttname"><a href="mxfenc_8c.html#aea9403dced27e48ba7e8a6657ca3904e">mxf_write_footer</a></div><div class="ttdeci">static int mxf_write_footer(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02979">mxfenc.c:2979</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a7ac8566cf237622bad8a0f63e789082a"><div class="ttname"><a href="struct_m_x_f_context.html#a7ac8566cf237622bad8a0f63e789082a">MXFContext::instance_number</a></div><div class="ttdeci">uint32_t instance_number</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00252">mxfenc.c:252</a></div></div>
<div class="ttc" id="atimecode_8h_html"><div class="ttname"><a href="timecode_8h.html">timecode.h</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a69c5f8dd5f11d60cfc0946036205b497"><div class="ttname"><a href="mxfenc_8c.html#a69c5f8dd5f11d60cfc0946036205b497">mxf_local_tag_batch</a></div><div class="ttdeci">static const MXFLocalTagPair mxf_local_tag_batch[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00290">mxfenc.c:290</a></div></div>
<div class="ttc" id="aavc_8c_html_a36c2206fa506a42eed39cbe717959a0d"><div class="ttname"><a href="avc_8c.html#a36c2206fa506a42eed39cbe717959a0d">ff_avc_decode_sps</a></div><div class="ttdeci">int ff_avc_decode_sps(H264SPS *sps, const uint8_t *buf, int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="avc_8c_source.html#l00334">avc.c:334</a></div></div>
<div class="ttc" id="atime__internal_8h_html_a89a61b18d74dbd9e50e0b1d23a1fe57e"><div class="ttname"><a href="time__internal_8h.html#a89a61b18d74dbd9e50e0b1d23a1fe57e">gmtime_r</a></div><div class="ttdeci">#define gmtime_r</div><div class="ttdef"><b>Definition:</b> <a href="time__internal_8h_source.html#l00034">time_internal.h:34</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ae5ea37451022259cf052c449c25ebf91"><div class="ttname"><a href="mxfenc_8c.html#ae5ea37451022259cf052c449c25ebf91">mxf_write_multi_descriptor</a></div><div class="ttdeci">static void mxf_write_multi_descriptor(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00971">mxfenc.c:971</a></div></div>
<div class="ttc" id="aavio_8h_html_a63157a668f29b8f5a89f00bc24838b8e"><div class="ttname"><a href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a></div><div class="ttdeci">static av_always_inline int64_t avio_tell(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00557">avio.h:557</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_ac870eac597c4eca8b11f1b26e718bbaa"><div class="ttname"><a href="struct_m_x_f_stream_context.html#ac870eac597c4eca8b11f1b26e718bbaa">MXFStreamContext::video_bit_rate</a></div><div class="ttdeci">int video_bit_rate</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00093">mxfenc.c:93</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a5268fcf4ae8ed27edef54f836b926d93"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a5268fcf4ae8ed27edef54f836b926d93">AVCodecParameters::bit_rate</a></div><div class="ttdeci">int64_t bit_rate</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00089">codec_par.h:89</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a860450fba1f740387dc082792ad89517"><div class="ttname"><a href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf type</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="adv__profile_8h_html"><div class="ttname"><a href="dv__profile_8h.html">dv_profile.h</a></div></div>
<div class="ttc" id="amux_8c_html_a552b572c3ac81421ed684256de0eb815"><div class="ttname"><a href="mux_8c.html#a552b572c3ac81421ed684256de0eb815">interleave_packet</a></div><div class="ttdeci">static int interleave_packet(AVFormatContext *s, AVPacket *out, AVPacket *in, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01067">mux.c:1067</a></div></div>
<div class="ttc" id="alibavformat_2version_8h_html_a0d89981a751ac1abca0f9a08ec7e043f"><div class="ttname"><a href="libavformat_2version_8h.html#a0d89981a751ac1abca0f9a08ec7e043f">LIBAVFORMAT_VERSION_MAJOR</a></div><div class="ttdeci">#define LIBAVFORMAT_VERSION_MAJOR</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2version_8h_source.html#l00034">version.h:34</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gga921d656eaf2c4d6800a734a13af021d0aa1d28e08e2f8b49b256e056f93038c1a"><div class="ttname"><a href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aa1d28e08e2f8b49b256e056f93038c1a">AV_ROUND_UP</a></div><div class="ttdeci">@ AV_ROUND_UP</div><div class="ttdoc">Round toward +infinity.</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00083">mathematics.h:83</a></div></div>
<div class="ttc" id="astruct_m_x_f_index_entry_html"><div class="ttname"><a href="struct_m_x_f_index_entry.html">MXFIndexEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00069">mxfenc.c:69</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_ab12f65a4ff35a10cfd22b144667e91fd"><div class="ttname"><a href="struct_m_x_f_context.html#ab12f65a4ff35a10cfd22b144667e91fd">MXFContext::timecode_base</a></div><div class="ttdeci">int timecode_base</div><div class="ttdoc">rounded time code base (25 or 30)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00248">mxfenc.c:248</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga4fd9c0b8e663cf3d55e89fbc6ce71602"><div class="ttname"><a href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a></div><div class="ttdeci">int av_reduce(int *dst_num, int *dst_den, int64_t num, int64_t den, int64_t max)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00035">rational.c:35</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_ae1a14a2496213ff44ded5c54c3e71dd3"><div class="ttname"><a href="struct_m_x_f_context.html#ae1a14a2496213ff44ded5c54c3e71dd3">MXFContext::last_key_index</a></div><div class="ttdeci">int last_key_index</div><div class="ttdoc">index of last key frame</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00244">mxfenc.c:244</a></div></div>
<div class="ttc" id="adnxhddata_8c_html_a03bdb0c155f577b86f48b2178a5af870"><div class="ttname"><a href="dnxhddata_8c.html#a03bdb0c155f577b86f48b2178a5af870">avpriv_dnxhd_get_hr_frame_size</a></div><div class="ttdeci">int avpriv_dnxhd_get_hr_frame_size(int cid, int w, int h)</div><div class="ttdef"><b>Definition:</b> <a href="dnxhddata_8c_source.html#l01095">dnxhddata.c:1095</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a7ade9fc8112b3a28bf19089d0db036c0"><div class="ttname"><a href="avcodec_8h.html#a7ade9fc8112b3a28bf19089d0db036c0">FF_PROFILE_PRORES_LT</a></div><div class="ttdeci">#define FF_PROFILE_PRORES_LT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01965">avcodec.h:1965</a></div></div>
<div class="ttc" id="amxfenc_8c_html_afa963116f2229e58430c7878f785ad53"><div class="ttname"><a href="mxfenc_8c.html#afa963116f2229e58430c7878f785ad53">body_partition_key</a></div><div class="ttdeci">static const uint8_t body_partition_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00278">mxfenc.c:278</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a8c1c5bc9e8426f4fa046f30d838339cd"><div class="ttname"><a href="mxfenc_8c.html#a8c1c5bc9e8426f4fa046f30d838339cd">mxf_write_header_metadata_sets</a></div><div class="ttdeci">static int mxf_write_header_metadata_sets(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01639">mxfenc.c:1639</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a6e3310f396e18fcca830326295a81572"><div class="ttname"><a href="mxfenc_8c.html#a6e3310f396e18fcca830326295a81572">mxf_write_local_tag_utf16</a></div><div class="ttdeci">static void mxf_write_local_tag_utf16(AVIOContext *pb, int tag, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00692">mxfenc.c:692</a></div></div>
<div class="ttc" id="adnxhddata_8h_html"><div class="ttname"><a href="dnxhddata_8h.html">dnxhddata.h</a></div></div>
<div class="ttc" id="acommon_8h_html_a1a2fd8cd42afb00c9f69562f52b1ae4b"><div class="ttname"><a href="common_8h.html#a1a2fd8cd42afb00c9f69562f52b1ae4b">GET_UTF8</a></div><div class="ttdeci">#define GET_UTF8(val, GET_BYTE, ERROR)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00426">common.h:426</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a0d1cb9b5a32b00fb6edc81ea3aae2a49"><div class="ttname"><a href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">AVPacket::stream_index</a></div><div class="ttdeci">int stream_index</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00365">packet.h:365</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ae496bd37b6a2ba1810db0e2d14d54fc0"><div class="ttname"><a href="mxfenc_8c.html#ae496bd37b6a2ba1810db0e2d14d54fc0">mxf_write_package</a></div><div class="ttdeci">static void mxf_write_package(AVFormatContext *s, MXFPackage *package)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01517">mxfenc.c:1517</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a6aa52e6c8d8de3129b390773df6d80ec"><div class="ttname"><a href="mxfenc_8c.html#a6aa52e6c8d8de3129b390773df6d80ec">system_metadata_package_set_key</a></div><div class="ttdeci">static const uint8_t system_metadata_package_set_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02683">mxfenc.c:2683</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aa39aa122885b285822e1a28805d5b850"><div class="ttname"><a href="mxfenc_8c.html#aa39aa122885b285822e1a28805d5b850">mxf_write_sequence</a></div><div class="ttdeci">static void mxf_write_sequence(AVFormatContext *s, AVStream *st, MXFPackage *package)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00867">mxfenc.c:867</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga030300ea4843c53b2fe178a434964b39"><div class="ttname"><a href="group__lavu__log__constants.html#ga030300ea4843c53b2fe178a434964b39">AV_LOG_TRACE</a></div><div class="ttdeci">#define AV_LOG_TRACE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00220">log.h:220</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html_abea8ed308fe00644fc066a00018afa95"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html#abea8ed308fe00644fc066a00018afa95">AVPixFmtDescriptor::log2_chroma_h</a></div><div class="ttdeci">uint8_t log2_chroma_h</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00101">pixdesc.h:101</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a9db755451f14e2bf590d4b85d82b32e6"><div class="ttname"><a href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">AVStream::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00898">avformat.h:898</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a00d740dac0f18778dc0c25be1dbde1be"><div class="ttname"><a href="struct_m_x_f_context.html#a00d740dac0f18778dc0c25be1dbde1be">MXFContext::footer_partition_offset</a></div><div class="ttdeci">int64_t footer_partition_offset</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00233">mxfenc.c:233</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a3b78c1d7f063e08c42cb892fe0ca5d36"><div class="ttname"><a href="mxfenc_8c.html#a3b78c1d7f063e08c42cb892fe0ca5d36">mxf_parse_prores_frame</a></div><div class="ttdeci">static int mxf_parse_prores_frame(AVFormatContext *s, AVStream *st, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01972">mxfenc.c:1972</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a9e54e9e2ccf671c1f79867e19ce432e9"><div class="ttname"><a href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a></div><div class="ttdeci">static int init_get_bits8(GetBitContext *s, const uint8_t *buffer, int byte_size)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00677">get_bits.h:677</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a157349427f4ed7189bfbc1267e717e26"><div class="ttname"><a href="struct_m_x_f_context.html#a157349427f4ed7189bfbc1267e717e26">MXFContext::body_partition_offset</a></div><div class="ttdeci">uint64_t * body_partition_offset</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00242">mxfenc.c:242</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html_a17569c9349766c3b5201b33f84f19a25"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html#a17569c9349766c3b5201b33f84f19a25">AVPixFmtDescriptor::comp</a></div><div class="ttdeci">AVComponentDescriptor comp[4]</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00117">pixdesc.h:117</a></div></div>
<div class="ttc" id="amxf_8h_html_a76e4ec87491a725f71b918104b27c12a"><div class="ttname"><a href="mxf_8h.html#a76e4ec87491a725f71b918104b27c12a">PRINT_KEY</a></div><div class="ttdeci">#define PRINT_KEY(pc, s, x)</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00142">mxf.h:142</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a5b79329b74e5ef2672f7564933b24475"><div class="ttname"><a href="struct_m_x_f_context.html#a5b79329b74e5ef2672f7564933b24475">MXFContext::index_entries</a></div><div class="ttdeci">MXFIndexEntry * index_entries</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00237">mxfenc.c:237</a></div></div>
<div class="ttc" id="atimecode_8c_html_ad279cd982964a2f8cc7adfa01533b412"><div class="ttname"><a href="timecode_8c.html#ad279cd982964a2f8cc7adfa01533b412">av_timecode_init</a></div><div class="ttdeci">int av_timecode_init(AVTimecode *tc, AVRational rate, int flags, int frame_start, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8c_source.html#l00222">timecode.c:222</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_gae67f143237b2cb2936c9b147aa6dfde3"><div class="ttname"><a href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a></div><div class="ttdeci">AVDictionaryEntry * av_dict_get(const AVDictionary *m, const char *key, const AVDictionaryEntry *prev, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00040">dict.c:40</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba7e20eaba3c2969ad80d2e9a791cf1be0"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba7e20eaba3c2969ad80d2e9a791cf1be0">H264_NAL_PPS</a></div><div class="ttdeci">@ H264_NAL_PPS</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00042">h264.h:42</a></div></div>
<div class="ttc" id="amxf_8c_html_a015d9e23a0437e8adb8801e0681b9c38"><div class="ttname"><a href="mxf_8c.html#a015d9e23a0437e8adb8801e0681b9c38">ff_mxf_data_definition_uls</a></div><div class="ttdeci">const MXFCodecUL ff_mxf_data_definition_uls[]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00039">mxf.c:39</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a647b2c699f9f1ec6146811d82cae6c08"><div class="ttname"><a href="mxfenc_8c.html#a647b2c699f9f1ec6146811d82cae6c08">mxf_write_user_comments</a></div><div class="ttdeci">static int mxf_write_user_comments(AVFormatContext *s, const AVDictionary *m)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01499">mxfenc.c:1499</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a89e1c07927025dd9b2e83ee0562e3ce5"><div class="ttname"><a href="mxfenc_8c.html#a89e1c07927025dd9b2e83ee0562e3ce5">mxf_parse_h264_frame</a></div><div class="ttdeci">static int mxf_parse_h264_frame(AVFormatContext *s, AVStream *st, AVPacket *pkt, MXFIndexEntry *e)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02196">mxfenc.c:2196</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a1ff9126e75ce0b40c7243e0984762345"><div class="ttname"><a href="mxfenc_8c.html#a1ff9126e75ce0b40c7243e0984762345">mxf_write_cdci_common</a></div><div class="ttdeci">static int64_t mxf_write_cdci_common(AVFormatContext *s, AVStream *st, const UID key)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01065">mxfenc.c:1065</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a7be7ba895855b1f3e3a15a446026031a"><div class="ttname"><a href="mxfenc_8c.html#a7be7ba895855b1f3e3a15a446026031a">mxf_write_common_fields</a></div><div class="ttdeci">static void mxf_write_common_fields(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00843">mxfenc.c:843</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a201f2b9694bd26ceb99c8d5f8bcc9d78"><div class="ttname"><a href="mxfenc_8c.html#a201f2b9694bd26ceb99c8d5f8bcc9d78">mxf_write_identification</a></div><div class="ttdeci">static void mxf_write_identification(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00721">mxfenc.c:721</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a4d418b807283607a231d2d8cdf559f00"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">AVCodecParameters::channels</a></div><div class="ttdeci">int channels</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00166">codec_par.h:166</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255ed"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255ed">MXFMetadataSetType</a></div><div class="ttdeci">MXFMetadataSetType</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00030">mxf.h:30</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffa2da13ea26652f612ecaeb850a3d014e7"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffa2da13ea26652f612ecaeb850a3d014e7">AVCHROMA_LOC_TOP</a></div><div class="ttdeci">@ AVCHROMA_LOC_TOP</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00610">pixfmt.h:610</a></div></div>
<div class="ttc" id="aopt_8h_html_aba0d5e41287b6fbeae5dd59f643695cc"><div class="ttname"><a href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a></div><div class="ttdeci">#define AV_OPT_FLAG_ENCODING_PARAM</div><div class="ttdoc">a generic parameter which can be set by the user for muxing or encoding</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00278">opt.h:278</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255eda210e7c89f1682e9681d460815fb0f5de"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda210e7c89f1682e9681d460815fb0f5de">MultipleDescriptor</a></div><div class="ttdeci">@ MultipleDescriptor</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00038">mxf.h:38</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a98c67dc2ec2837757edb67e26990ed25"><div class="ttname"><a href="mxfenc_8c.html#a98c67dc2ec2837757edb67e26990ed25">klv_encode_ber9_length</a></div><div class="ttdeci">static void klv_encode_ber9_length(AVIOContext *pb, uint64_t len)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00476">mxfenc.c:476</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html_aa38678f2cad36f120d42e56449c5edb4"><div class="ttname"><a href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">AVDictionaryEntry::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00083">dict.h:83</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488a8fa79c7c48b51b5b07fb1145266bea9a"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a8fa79c7c48b51b5b07fb1145266bea9a">INDEX_S436M</a></div><div class="ttdeci">@ INDEX_S436M</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00127">mxfenc.c:127</a></div></div>
<div class="ttc" id="astruct_a_v_component_descriptor_html_ae504ab46ea3719e9930f91491af593dc"><div class="ttname"><a href="struct_a_v_component_descriptor.html#ae504ab46ea3719e9930f91491af593dc">AVComponentDescriptor::depth</a></div><div class="ttdeci">int depth</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00058">pixdesc.h:58</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a5fe6406e07337dcb0125bd03fba7ea2c"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a5fe6406e07337dcb0125bd03fba7ea2c">AV_PKT_DATA_MASTERING_DISPLAY_METADATA</a></div><div class="ttdeci">@ AV_PKT_DATA_MASTERING_DISPLAY_METADATA</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00222">packet.h:222</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ad662aa56c1696f09c0ac6b97abafac6d"><div class="ttname"><a href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a></div><div class="ttdeci">int frame_size</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02166">mxfenc.c:2166</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9f76f2475ef24ff4c9771dd53072d040"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">AVCodecParameters::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:60</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488">ULIndex</a></div><div class="ttdeci">ULIndex</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00117">mxfenc.c:117</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255edaf740a58d57e374e6f88ded837d1cd8a1"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edaf740a58d57e374e6f88ded837d1cd8a1">AVCSubDescriptor</a></div><div class="ttdeci">@ AVCSubDescriptor</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00051">mxf.h:51</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a784ffdd9a829849c70a3757891ce5b3e"><div class="ttname"><a href="mxfenc_8c.html#a784ffdd9a829849c70a3757891ce5b3e">mxf_parse_mpeg2_frame</a></div><div class="ttdeci">static int mxf_parse_mpeg2_frame(AVFormatContext *s, AVStream *st, AVPacket *pkt, MXFIndexEntry *e)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02343">mxfenc.c:2343</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ab07efabf9bb6a794e3e83ecb2a25d35e"><div class="ttname"><a href="mxfenc_8c.html#ab07efabf9bb6a794e3e83ecb2a25d35e">mxf_write_wav_desc</a></div><div class="ttdeci">static void mxf_write_wav_desc(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01450">mxfenc.c:1450</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a5044662a9f8237ed8c7e8f91202ecce9"><div class="ttname"><a href="mxfenc_8c.html#a5044662a9f8237ed8c7e8f91202ecce9">mxf_write_track</a></div><div class="ttdeci">static void mxf_write_track(AVFormatContext *s, AVStream *st, MXFPackage *package)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00795">mxfenc.c:795</a></div></div>
<div class="ttc" id="amxfenc_8c_html_afdd66475f9ba4677de4befe5872083ed"><div class="ttname"><a href="mxfenc_8c.html#afdd66475f9ba4677de4befe5872083ed">mxf_d10_muxer_class</a></div><div class="ttdeci">static const AVClass mxf_d10_muxer_class</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03167">mxfenc.c:3167</a></div></div>
<div class="ttc" id="amxfenc_8c_html_af733d1c4b9d87e1f43bcc30e7121e6e8"><div class="ttname"><a href="mxfenc_8c.html#af733d1c4b9d87e1f43bcc30e7121e6e8">mxf_cdci_descriptor_key</a></div><div class="ttdeci">static const UID mxf_cdci_descriptor_key</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01050">mxfenc.c:1050</a></div></div>
<div class="ttc" id="astruct_m_x_f_package_html_a0225324fd12bfcb855f3c8c289e4ef42"><div class="ttname"><a href="struct_m_x_f_package.html#a0225324fd12bfcb855f3c8c289e4ef42">MXFPackage::ref</a></div><div class="ttdeci">struct MXFPackage * ref</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00114">mxfenc.c:114</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="amxfenc_8c_html_afb55fc08cb5fdb04e9d5e249fca0b258"><div class="ttname"><a href="mxfenc_8c.html#afb55fc08cb5fdb04e9d5e249fca0b258">mxf_write_klv_fill</a></div><div class="ttdeci">static void mxf_write_klv_fill(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01843">mxfenc.c:1843</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488abbc6cbcb9b4892cdaffaf4545510a03e"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488abbc6cbcb9b4892cdaffaf4545510a03e">INDEX_WAV</a></div><div class="ttdeci">@ INDEX_WAV</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00120">mxfenc.c:120</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_a647151ae012e11d05dbeb01c5a502704"><div class="ttname"><a href="libavformat_2internal_8h.html#a647151ae012e11d05dbeb01c5a502704">ff_interleave_add_packet</a></div><div class="ttdeci">int ff_interleave_add_packet(AVFormatContext *s, AVPacket *pkt, int(*compare)(AVFormatContext *, const AVPacket *, const AVPacket *))</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00812">mux.c:812</a></div></div>
<div class="ttc" id="astruct_a_v_i_o_context_html_a3500915a7434270c42dffc80fafffa2d"><div class="ttname"><a href="struct_a_v_i_o_context.html#a3500915a7434270c42dffc80fafffa2d">AVIOContext::buf_ptr</a></div><div class="ttdeci">unsigned char * buf_ptr</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00228">avio.h:228</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a1e414bd816f6ee8013d104eff865bb98"><div class="ttname"><a href="struct_m_x_f_context.html#a1e414bd816f6ee8013d104eff865bb98">MXFContext::duration</a></div><div class="ttdeci">uint64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00245">mxfenc.c:245</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_a1a7214fcedcf4bd3e668506d30d7892f"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a1a7214fcedcf4bd3e668506d30d7892f">AV_RL16</a></div><div class="ttdeci">#define AV_RL16</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00042">intreadwrite.h:42</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488a7a2e0135879a24255399431c9560ca44"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a7a2e0135879a24255399431c9560ca44">INDEX_DV</a></div><div class="ttdeci">@ INDEX_DV</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00123">mxfenc.c:123</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a212db8d8634230dab813451e8affb673"><div class="ttname"><a href="mxfenc_8c.html#a212db8d8634230dab813451e8affb673">mxf_compare_timestamps</a></div><div class="ttdeci">static int mxf_compare_timestamps(AVFormatContext *s, const AVPacket *next, const AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03102">mxfenc.c:3102</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_ad9bc32ed1f92df9211ebe13435164d76"><div class="ttname"><a href="struct_m_x_f_context.html#ad9bc32ed1f92df9211ebe13435164d76">MXFContext::slice_count</a></div><div class="ttdeci">uint8_t slice_count</div><div class="ttdoc">index slice count minus 1 (1 if no audio, 0 otherwise)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00240">mxfenc.c:240</a></div></div>
<div class="ttc" id="amxfenc_8c_html_af627568559a443d732d979dd7ec81502"><div class="ttname"><a href="mxfenc_8c.html#af627568559a443d732d979dd7ec81502">mxf_write_opatom_packet</a></div><div class="ttdeci">static int mxf_write_opatom_packet(AVFormatContext *s, AVPacket *pkt, MXFIndexEntry *ie)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02787">mxfenc.c:2787</a></div></div>
<div class="ttc" id="astruct_m_x_f_index_entry_html_a494664cd518f46d122c2de3df94242f1"><div class="ttname"><a href="struct_m_x_f_index_entry.html#a494664cd518f46d122c2de3df94242f1">MXFIndexEntry::slice_offset</a></div><div class="ttdeci">unsigned slice_offset</div><div class="ttdoc">offset of audio slice</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00071">mxfenc.c:71</a></div></div>
<div class="ttc" id="ahwcontext__opencl_8c_html_acd3d88da3c0e0313c3645ff34f62f542"><div class="ttname"><a href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a></div><div class="ttdeci">const char * key</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__opencl_8c_source.html#l00168">hwcontext_opencl.c:168</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a></div><div class="ttdeci">@ AVMEDIA_TYPE_DATA</div><div class="ttdoc">Opaque data information usually continuous.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00203">avutil.h:203</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a5b61cc5b5bedc6029aaa76152a9d29b7"><div class="ttname"><a href="struct_m_x_f_context.html#a5b61cc5b5bedc6029aaa76152a9d29b7">MXFContext::timecode_track</a></div><div class="ttdeci">AVStream * timecode_track</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00247">mxfenc.c:247</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a968384052f48e91fc57b3c61b9f68224"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a968384052f48e91fc57b3c61b9f68224">AVMasteringDisplayMetadata::white_point</a></div><div class="ttdeci">AVRational white_point[2]</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00047">mastering_display_metadata.h:47</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255edaadb07486538b06c6f8f7df7e71bbf996"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edaadb07486538b06c6f8f7df7e71bbf996">Preface</a></div><div class="ttdeci">@ Preface</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00042">mxf.h:42</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a></div><div class="ttdeci">@ AV_CODEC_ID_H264</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00076">codec_id.h:76</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ac1a73cc70ad1715be653592108af0ed2"><div class="ttname"><a href="mxfenc_8c.html#ac1a73cc70ad1715be653592108af0ed2">mxf_essence_container_uls</a></div><div class="ttdeci">static const MXFContainerEssenceEntry mxf_essence_container_uls[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00154">mxfenc.c:154</a></div></div>
<div class="ttc" id="astruct_a_v_class_html_aa8883e113a3f2965abd008f7667db7eb"><div class="ttname"><a href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">AVClass::class_name</a></div><div class="ttdeci">const char * class_name</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00072">log.h:72</a></div></div>
<div class="ttc" id="amxf_8c_html_a4cbc3df1dc3453dba47917475cb0bee0"><div class="ttname"><a href="mxf_8c.html#a4cbc3df1dc3453dba47917475cb0bee0">ff_mxf_color_space_uls</a></div><div class="ttdeci">const MXFCodecUL ff_mxf_color_space_uls[]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00136">mxf.c:136</a></div></div>
<div class="ttc" id="astruct_m_x_f_index_entry_html_a860828beb605fe235f332bace41dfde1"><div class="ttname"><a href="struct_m_x_f_index_entry.html#a860828beb605fe235f332bace41dfde1">MXFIndexEntry::offset</a></div><div class="ttdeci">uint64_t offset</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00070">mxfenc.c:70</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_afe1b86e790f761f43df067fff426a088"><div class="ttname"><a href="struct_m_x_f_stream_context.html#afe1b86e790f761f43df067fff426a088">MXFStreamContext::b_picture_count</a></div><div class="ttdeci">int b_picture_count</div><div class="ttdoc">maximum number of consecutive b pictures, used in mpeg-2 descriptor</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00098">mxfenc.c:98</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ad6de8cb1ec64893b34a208d0322600a6"><div class="ttname"><a href="mxfenc_8c.html#ad6de8cb1ec64893b34a208d0322600a6">random_index_pack_key</a></div><div class="ttdeci">static const uint8_t random_index_pack_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00274">mxfenc.c:274</a></div></div>
<div class="ttc" id="atime__internal_8h_html"><div class="ttname"><a href="time__internal_8h.html">time_internal.h</a></div></div>
<div class="ttc" id="adnxhddata_8c_html_a03b26c8a39230cc58b711997136607af"><div class="ttname"><a href="dnxhddata_8c.html#a03b26c8a39230cc58b711997136607af">avpriv_dnxhd_get_frame_size</a></div><div class="ttdeci">int avpriv_dnxhd_get_frame_size(int cid)</div><div class="ttdef"><b>Definition:</b> <a href="dnxhddata_8c_source.html#l01087">dnxhddata.c:1087</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_afa6744d9b8766db47a5ff7bddf0f2404"><div class="ttname"><a href="struct_a_v_codec_parameters.html#afa6744d9b8766db47a5ff7bddf0f2404">AVCodecParameters::color_range</a></div><div class="ttdeci">enum AVColorRange color_range</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:146</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a5ee0eed46163b113c4139f34008d4e5f"><div class="ttname"><a href="mxfenc_8c.html#a5ee0eed46163b113c4139f34008d4e5f">mxf_h264_codec_uls</a></div><div class="ttdeci">static const struct @4 mxf_h264_codec_uls[]</div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga6eff035c271caa5a533987a1e00ad43e"><div class="ttname"><a href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a></div><div class="ttdeci">struct AVRational AVRational</div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255edab0d193d188b54c7ebbfb57f19594d2ad"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edab0d193d188b54c7ebbfb57f19594d2ad">SubDescriptor</a></div><div class="ttdeci">@ SubDescriptor</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00045">mxf.h:45</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a88cdfc7f42496308c20b802c7842d459"><div class="ttname"><a href="mxfenc_8c.html#a88cdfc7f42496308c20b802c7842d459">mxf_write_tagged_value</a></div><div class="ttdeci">static int mxf_write_tagged_value(AVFormatContext *s, const char *name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01470">mxfenc.c:1470</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba9b569b7bafbb864fe260d3b84ad78387"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9b569b7bafbb864fe260d3b84ad78387">H264_NAL_SPS</a></div><div class="ttdeci">@ H264_NAL_SPS</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00041">h264.h:41</a></div></div>
<div class="ttc" id="amxf_8h_html_ab2181937b94428311349b5dd301df42a"><div class="ttname"><a href="mxf_8h.html#ab2181937b94428311349b5dd301df42a">FF_MXF_MASTERING_LUMA_DEN</a></div><div class="ttdeci">#define FF_MXF_MASTERING_LUMA_DEN</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00090">mxf.h:90</a></div></div>
<div class="ttc" id="agroup__lavu__ver_html_ga36e17e3fc9bcbe5c55820a8ac8b47e3c"><div class="ttname"><a href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a></div><div class="ttdeci">#define LIBAVUTIL_VERSION_INT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2version_8h_source.html#l00085">version.h:85</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a03d2f960e765f9f5c4eb708f3124d247"><div class="ttname"><a href="mxfenc_8c.html#a03d2f960e765f9f5c4eb708f3124d247">mxf_d10_container_uls</a></div><div class="ttdeci">static const UID mxf_d10_container_uls[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00222">mxfenc.c:222</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a2dcb2922897d7c3d73e886d9a690c669"><div class="ttname"><a href="mxfenc_8c.html#a2dcb2922897d7c3d73e886d9a690c669">mxf_write_aes3_desc</a></div><div class="ttdeci">static void mxf_write_aes3_desc(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01456">mxfenc.c:1456</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ade049c70ccd70c52e9c042d36dcea18c"><div class="ttname"><a href="mxfenc_8c.html#ade049c70ccd70c52e9c042d36dcea18c">MXFPackage</a></div><div class="ttdeci">struct MXFPackage MXFPackage</div></div>
<div class="ttc" id="amxfenc_8c_html_abd988af8d201ce379d51c67c431ca0df"><div class="ttname"><a href="mxfenc_8c.html#abd988af8d201ce379d51c67c431ca0df">mxf_write_local_tags</a></div><div class="ttdeci">static void mxf_write_local_tags(AVIOContext *pb, const MXFLocalTagPair *local_tags, int count)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00494">mxfenc.c:494</a></div></div>
<div class="ttc" id="aaacdec__template_8c_html_affa0ccbe2ef7fd24bb8c61e28d1a6631"><div class="ttname"><a href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a></div><div class="ttdeci">static void flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="aacdec__template_8c_source.html#l00592">aacdec_template.c:592</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255eda3bd9cdf56de2c5fd5694df86e513e353"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda3bd9cdf56de2c5fd5694df86e513e353">MaterialPackage</a></div><div class="ttdeci">@ MaterialPackage</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00032">mxf.h:32</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aa961e0b6e97749e41d111d93ebff25ad"><div class="ttname"><a href="mxfenc_8c.html#aa961e0b6e97749e41d111d93ebff25ad">mxf_write_local_tag</a></div><div class="ttdeci">static void mxf_write_local_tag(AVIOContext *pb, int size, int tag)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00548">mxfenc.c:548</a></div></div>
<div class="ttc" id="av4l2enc_8c_html_a4f80c0767194e6e297d2952ed1e75ccc"><div class="ttname"><a href="v4l2enc_8c.html#a4f80c0767194e6e297d2952ed1e75ccc">write_trailer</a></div><div class="ttdeci">static int write_trailer(AVFormatContext *s1)</div><div class="ttdef"><b>Definition:</b> <a href="v4l2enc_8c_source.html#l00098">v4l2enc.c:98</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffab75254964869bf3bf25806ad0cad44b2"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffab75254964869bf3bf25806ad0cad44b2">AVCHROMA_LOC_LEFT</a></div><div class="ttdeci">@ AVCHROMA_LOC_LEFT</div><div class="ttdoc">MPEG-2/4 4:2:0, H.264 default for 4:2:0.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00607">pixfmt.h:607</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a49d0a7490ac6c609fc7b58f0f0f8d066"><div class="ttname"><a href="mxfenc_8c.html#a49d0a7490ac6c609fc7b58f0f0f8d066">mxf_write_essence_container_data</a></div><div class="ttdeci">static int mxf_write_essence_container_data(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01617">mxfenc.c:1617</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffa4b008b490563459a3f04826049cee43f"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffa4b008b490563459a3f04826049cee43f">AVCHROMA_LOC_TOPLEFT</a></div><div class="ttdeci">@ AVCHROMA_LOC_TOPLEFT</div><div class="ttdoc">ITU-R 601, SMPTE 274M 296M S314M(DV 4:1:1), mpeg2 4:2:2.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00609">pixfmt.h:609</a></div></div>
<div class="ttc" id="amxf_8h_html_a9f4b0967374c0cb6078150bad6202d5d"><div class="ttname"><a href="mxf_8h.html#a9f4b0967374c0cb6078150bad6202d5d">FF_MXF_MASTERING_CHROMA_DEN</a></div><div class="ttdeci">#define FF_MXF_MASTERING_CHROMA_DEN</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00089">mxf.h:89</a></div></div>
<div class="ttc" id="astruct_m_x_f_container_essence_entry_html_a687512680f5821b55220529c98363261"><div class="ttname"><a href="struct_m_x_f_container_essence_entry.html#a687512680f5821b55220529c98363261">MXFContainerEssenceEntry::write_desc</a></div><div class="ttdeci">void(* write_desc)(AVFormatContext *, AVStream *)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00107">mxfenc.c:107</a></div></div>
<div class="ttc" id="astruct_get_bit_context_html"><div class="ttname"><a href="struct_get_bit_context.html">GetBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00061">get_bits.h:61</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a34b8bfc8b43303581a58dd594c19186e"><div class="ttname"><a href="mxfenc_8c.html#a34b8bfc8b43303581a58dd594c19186e">uuid_base</a></div><div class="ttdeci">static const uint8_t uuid_base[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00263">mxfenc.c:263</a></div></div>
<div class="ttc" id="adnxhddata_8h_html_aa05141353d9435ea1c1fd5e76014ce56"><div class="ttname"><a href="dnxhddata_8h.html#aa05141353d9435ea1c1fd5e76014ce56">DNXHD_VARIABLE</a></div><div class="ttdeci">#define DNXHD_VARIABLE</div><div class="ttdef"><b>Definition:</b> <a href="dnxhddata_8h_source.html#l00040">dnxhddata.h:40</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga791fcd0dba1d19fe0c3677509344328e"><div class="ttname"><a href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a></div><div class="ttdeci">const char * av_default_item_name(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00235">log.c:235</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_ac72e380330c591f7e0988dc547b1dd56"><div class="ttname"><a href="libavformat_2internal_8h.html#ac72e380330c591f7e0988dc547b1dd56">ff_stream_add_bitstream_filter</a></div><div class="ttdeci">int ff_stream_add_bitstream_filter(AVStream *st, const char *name, const char *args)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05502">utils.c:5502</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html_a38fc80176f8f839282bb61c03392e194"><div class="ttname"><a href="struct_a_v_dictionary_entry.html#a38fc80176f8f839282bb61c03392e194">AVDictionaryEntry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00082">dict.h:82</a></div></div>
<div class="ttc" id="aavc_8h_html"><div class="ttname"><a href="avc_8h.html">avc.h</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a7d8935701eb5e62bb95109bff0ac6dff"><div class="ttname"><a href="mxfenc_8c.html#a7d8935701eb5e62bb95109bff0ac6dff">mxf_utf16_local_tag_length</a></div><div class="ttdeci">static int mxf_utf16_local_tag_length(const char *utf8_str)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00673">mxfenc.c:673</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba9f5ecee4fcf069f90853d39dda680dfe"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9f5ecee4fcf069f90853d39dda680dfe">H264_NAL_SLICE</a></div><div class="ttdeci">@ H264_NAL_SLICE</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00035">h264.h:35</a></div></div>
<div class="ttc" id="amxfenc_8c_html_af1d5db842a5884664b6c4a386add3b83"><div class="ttname"><a href="mxfenc_8c.html#af1d5db842a5884664b6c4a386add3b83">ff_mxf_muxer</a></div><div class="ttdeci">AVOutputFormat ff_mxf_muxer</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03190">mxfenc.c:3190</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a203618d89dd07a6193dc04f2c9af1dcc"><div class="ttname"><a href="mxfenc_8c.html#a203618d89dd07a6193dc04f2c9af1dcc">mxf_write_structural_component</a></div><div class="ttdeci">static void mxf_write_structural_component(AVFormatContext *s, AVStream *st, MXFPackage *package)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00921">mxfenc.c:921</a></div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a26ae48eeaf8b315eca03b207e11edc7c"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a26ae48eeaf8b315eca03b207e11edc7c">AVCodecParameters::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00121">codec_par.h:121</a></div></div>
<div class="ttc" id="aavio_8h_html_a1dddee2b73f4dd6512ac9821cf5adc18"><div class="ttname"><a href="avio_8h.html#a1dddee2b73f4dd6512ac9821cf5adc18">avio_w8</a></div><div class="ttdeci">void avio_w8(AVIOContext *s, int b)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00203">aviobuf.c:203</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00081">pixdesc.h:81</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a712c6b46f6689f88bc54d0910393ff20"><div class="ttname"><a href="mxfenc_8c.html#a712c6b46f6689f88bc54d0910393ff20">mxf_mpeg2_codec_uls</a></div><div class="ttdeci">static const UID mxf_mpeg2_codec_uls[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02310">mxfenc.c:2310</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_a41b740ee413e64d31482a50721eaef4f"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a41b740ee413e64d31482a50721eaef4f">AV_RL24</a></div><div class="ttdeci">#define AV_RL24</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00078">intreadwrite.h:78</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aee7586842abe70868842ec0cbeb69226"><div class="ttname"><a href="mxfenc_8c.html#aee7586842abe70868842ec0cbeb69226">mxf_write_index_table_segment</a></div><div class="ttdeci">static void mxf_write_index_table_segment(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01697">mxfenc.c:1697</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a2a9af9de590a1627d66d2fce58646fc4"><div class="ttname"><a href="mxfenc_8c.html#a2a9af9de590a1627d66d2fce58646fc4">mxf_prores_codec_uls</a></div><div class="ttdeci">static const struct @1 mxf_prores_codec_uls[]</div></div>
<div class="ttc" id="avideogen_8c_html_ae21f357c223957d36046a0d71cc6aed7"><div class="ttname"><a href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a></div><div class="ttdeci">static unsigned int seed</div><div class="ttdef"><b>Definition:</b> <a href="videogen_8c_source.html#l00078">videogen.c:78</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_adeaa0889ffac2d991bf10d37f71455d8"><div class="ttname"><a href="struct_m_x_f_context.html#adeaa0889ffac2d991bf10d37f71455d8">MXFContext::timestamp</a></div><div class="ttdeci">uint64_t timestamp</div><div class="ttdoc">timestamp, as year(16),month(8),day(8),hour(8),minutes(8),msec/4(8)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00239">mxfenc.c:239</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_a236265133da1ecd6375e5e7c405020a0"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a></div><div class="ttdeci">#define AV_RB32</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00130">intreadwrite.h:130</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aaa374becbc2b5ee0bc1886048d151ea3e"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aaa374becbc2b5ee0bc1886048d151ea3e">AVCOL_RANGE_UNSPECIFIED</a></div><div class="ttdeci">@ AVCOL_RANGE_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00552">pixfmt.h:552</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488a98a1552314eaceb8d5cc1265ef8fcb13"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a98a1552314eaceb8d5cc1265ef8fcb13">INDEX_D10_AUDIO</a></div><div class="ttdeci">@ INDEX_D10_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00122">mxfenc.c:122</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_aa884cae3fd16b30c61201a686664f96b"><div class="ttname"><a href="struct_a_v_codec_parameters.html#aa884cae3fd16b30c61201a686664f96b">AVCodecParameters::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:147</a></div></div>
<div class="ttc" id="ah264__ps_8h_html"><div class="ttname"><a href="h264__ps_8h.html">h264_ps.h</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="astruct_a_v_timecode_html"><div class="ttname"><a href="struct_a_v_timecode.html">AVTimecode</a></div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00041">timecode.h:41</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaadca229ad2c20e060a14fec08a5cc7ce"><div class="ttname"><a href="group__lavc__core.html#gaadca229ad2c20e060a14fec08a5cc7ce">AVCodecID</a></div><div class="ttdeci">AVCodecID</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00046">codec_id.h:46</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a8e867d1c5bca3ba70c1a864141690913"><div class="ttname"><a href="mxfenc_8c.html#a8e867d1c5bca3ba70c1a864141690913">mxf_write_header</a></div><div class="ttdeci">static int mxf_write_header(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02459">mxfenc.c:2459</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="amxfenc_8c_html_af2748064eb22e5fd5f30e4bdf5f5f42d"><div class="ttname"><a href="mxfenc_8c.html#af2748064eb22e5fd5f30e4bdf5f5f42d">mxf_compute_edit_unit_byte_count</a></div><div class="ttdeci">static void mxf_compute_edit_unit_byte_count(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02816">mxfenc.c:2816</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a87ffd93dea9eb95a1ccc9041f94d44d8"><div class="ttname"><a href="mxfenc_8c.html#a87ffd93dea9eb95a1ccc9041f94d44d8">mxf_deinit</a></div><div class="ttdeci">static void mxf_deinit(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03036">mxfenc.c:3036</a></div></div>
<div class="ttc" id="amxfenc_8c_html_acbf71674592877e63ec914508376ba64"><div class="ttname"><a href="mxfenc_8c.html#acbf71674592877e63ec914508376ba64">cid</a></div><div class="ttdeci">int cid</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01998">mxfenc.c:1998</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga82d40664213508918093822461cc597e"><div class="ttname"><a href="group__lavu__math.html#ga82d40664213508918093822461cc597e">av_rescale_rnd</a></div><div class="ttdeci">int64_t av_rescale_rnd(int64_t a, int64_t b, int64_t c, enum AVRounding rnd)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00058">mathematics.c:58</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a5ec62f95987940764f1a90312e29ddbe"><div class="ttname"><a href="mxfenc_8c.html#a5ec62f95987940764f1a90312e29ddbe">mxf_indirect_value_utf16le</a></div><div class="ttdeci">static const uint8_t mxf_indirect_value_utf16le[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01468">mxfenc.c:1468</a></div></div>
<div class="ttc" id="agroup__lavc__misc_html_ga0717e7440fdb123f708082f66cd9b41d"><div class="ttname"><a href="group__lavc__misc.html#ga0717e7440fdb123f708082f66cd9b41d">av_get_bits_per_sample</a></div><div class="ttdeci">int av_get_bits_per_sample(enum AVCodecID codec_id)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01578">utils.c:1578</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a1ec57ee84f19cf65d00eaa4d2a2253ce"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">AVCodecParameters::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00127">codec_par.h:127</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a7112600fd86ea834797c2a80beab6315"><div class="ttname"><a href="mxfenc_8c.html#a7112600fd86ea834797c2a80beab6315">klv_encode_ber4_length</a></div><div class="ttdeci">static void klv_encode_ber4_length(AVIOContext *pb, int len)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00470">mxfenc.c:470</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea55f60c53c2cc765877092c125ee172be">AV_CODEC_ID_PCM_S24LE</a></div><div class="ttdeci">@ AV_CODEC_ID_PCM_S24LE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00320">codec_id.h:320</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_aabcde95186892e46986ef8383acedb16"><div class="ttname"><a href="struct_m_x_f_context.html#aabcde95186892e46986ef8383acedb16">MXFContext::track_instance_count</a></div><div class="ttdeci">int track_instance_count</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00259">mxfenc.c:259</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="astruct_a_v_packet_list_html_a6a1d0f1a75cfafa4643b93752edef643"><div class="ttname"><a href="struct_a_v_packet_list.html#a6a1d0f1a75cfafa4643b93752edef643">AVPacketList::next</a></div><div class="ttdeci">struct AVPacketList * next</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00398">packet.h:398</a></div></div>
<div class="ttc" id="aavcodec_8h_html_af632eb505c61b1b67924cfe290fc629a"><div class="ttname"><a href="avcodec_8h.html#af632eb505c61b1b67924cfe290fc629a">FF_PROFILE_PRORES_HQ</a></div><div class="ttdeci">#define FF_PROFILE_PRORES_HQ</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01967">avcodec.h:1967</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_ga2c3404067d7e9bc7b8443e3f58cf8e65"><div class="ttname"><a href="group__lavf__core.html#ga2c3404067d7e9bc7b8443e3f58cf8e65">av_stream_get_side_data</a></div><div class="ttdeci">uint8_t * av_stream_get_side_data(const AVStream *stream, enum AVPacketSideDataType type, int *size)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05431">utils.c:5431</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a05d6072b2b21e0e89df1d2b5a10217e7"><div class="ttname"><a href="avcodec_8h.html#a05d6072b2b21e0e89df1d2b5a10217e7">FF_PROFILE_PRORES_STANDARD</a></div><div class="ttdeci">#define FF_PROFILE_PRORES_STANDARD</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01966">avcodec.h:1966</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_aeb828e5df0a7031a2f054a6cab50f4a5"><div class="ttname"><a href="struct_m_x_f_context.html#aeb828e5df0a7031a2f054a6cab50f4a5">MXFContext::essence_container_count</a></div><div class="ttdeci">int essence_container_count</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00234">mxfenc.c:234</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="alibavformat_2internal_8h_html_aab5542950d6beb910dc9237aac99989e"><div class="ttname"><a href="libavformat_2internal_8h.html#aab5542950d6beb910dc9237aac99989e">avpriv_set_pts_info</a></div><div class="ttdeci">void avpriv_set_pts_info(AVStream *s, int pts_wrap_bits, unsigned int pts_num, unsigned int pts_den)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04871">utils.c:4871</a></div></div>
<div class="ttc" id="astruct_m_x_f_codec_u_l_html_ad03fbea9a6e5c8865c85e3765d45d608"><div class="ttname"><a href="struct_m_x_f_codec_u_l.html#ad03fbea9a6e5c8865c85e3765d45d608">MXFCodecUL::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00095">mxf.h:95</a></div></div>
<div class="ttc" id="aflacdsp__template_8c_html_a924f03b9b06f2793262e576df93492db"><div class="ttname"><a href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a></div><div class="ttdeci">#define sample</div><div class="ttdef"><b>Definition:</b> <a href="flacdsp__template_8c_source.html#l00044">flacdsp_template.c:44</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a9d423cc4da1c35199bff8f2fd4c10e21"><div class="ttname"><a href="mxfenc_8c.html#a9d423cc4da1c35199bff8f2fd4c10e21">mxf_write_packet</a></div><div class="ttdeci">static int mxf_write_packet(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02837">mxfenc.c:2837</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255edad5ce1d4310219ec91bbfc4a3264afbc8"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255edad5ce1d4310219ec91bbfc4a3264afbc8">Identification</a></div><div class="ttdeci">@ Identification</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00043">mxf.h:43</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488a086443e03e27dce5bc4a241a26414eb3"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488a086443e03e27dce5bc4a241a26414eb3">INDEX_AES3</a></div><div class="ttdeci">@ INDEX_AES3</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00119">mxfenc.c:119</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a7135baa21488bfd2b602c415ee5f0a07"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a7135baa21488bfd2b602c415ee5f0a07">MXFStreamContext::field_dominance</a></div><div class="ttdeci">int field_dominance</div><div class="ttdoc">tff=1, bff=2</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00084">mxfenc.c:84</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga7778b1d209ceb3e4bf34e40150d3b882"><div class="ttname"><a href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a></div><div class="ttdeci">static AVRational av_make_q(int num, int den)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00071">rational.h:71</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_ga2eaefe702f95f619ea6f2d08afa01be1"><div class="ttname"><a href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a></div><div class="ttdeci">#define AV_NOPTS_VALUE</div><div class="ttdoc">Undefined timestamp value.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00248">avutil.h:248</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aaed7608be122b24f3240dc60e403a2e0"><div class="ttname"><a href="mxfenc_8c.html#aaed7608be122b24f3240dc60e403a2e0">mxf_update_klv_size</a></div><div class="ttdeci">static void mxf_update_klv_size(AVIOContext *pb, int64_t pos)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01289">mxfenc.c:1289</a></div></div>
<div class="ttc" id="astruct_m_x_f_codec_u_l_html_a17df098ab7ab50e73f8c29e9c962984a"><div class="ttname"><a href="struct_m_x_f_codec_u_l.html#a17df098ab7ab50e73f8c29e9c962984a">MXFCodecUL::uid</a></div><div class="ttdeci">UID uid</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00093">mxf.h:93</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html_a4abca4534188ff94627e88c0d8362058"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html#a4abca4534188ff94627e88c0d8362058">AVPixFmtDescriptor::log2_chroma_w</a></div><div class="ttdeci">uint8_t log2_chroma_w</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00092">pixdesc.h:92</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a67b29b5d037074620e1b2487a7ef43d7"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a67b29b5d037074620e1b2487a7ef43d7">MXFStreamContext::closed_gop</a></div><div class="ttdeci">int closed_gop</div><div class="ttdoc">gop is closed, used in mpeg-2 frame parsing</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00092">mxfenc.c:92</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a85dbbd306b44b02390cd91c45e6a0f76"><div class="ttname"><a href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">AVPacket::dts</a></div><div class="ttdeci">int64_t dts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00362">packet.h:362</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a020398a4963e932853cefc169d90456d"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a020398a4963e932853cefc169d90456d">AVCodecParameters::color_space</a></div><div class="ttdeci">enum AVColorSpace color_space</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:149</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a4ad2e7f456d7763060c25e92be573341"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a4ad2e7f456d7763060c25e92be573341">AVMasteringDisplayMetadata::min_luminance</a></div><div class="ttdeci">AVRational min_luminance</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00052">mastering_display_metadata.h:52</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a98780f74c4764e08676c9746438eb3fc"><div class="ttname"><a href="mxfenc_8c.html#a98780f74c4764e08676c9746438eb3fc">mxf_write_umid</a></div><div class="ttdeci">static void mxf_write_umid(AVFormatContext *s, int type)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00427">mxfenc.c:427</a></div></div>
<div class="ttc" id="aavio_8h_html_acc3626afc6aa3964b75d02811457164e"><div class="ttname"><a href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a></div><div class="ttdeci">void avio_write(AVIOContext *s, const unsigned char *buf, int size)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00225">aviobuf.c:225</a></div></div>
<div class="ttc" id="aavio_8h_html_a1f2b9ee1bde6c6982072edbe929b47ea"><div class="ttname"><a href="avio_8h.html#a1f2b9ee1bde6c6982072edbe929b47ea">avio_wb32</a></div><div class="ttdeci">void avio_wb32(AVIOContext *s, unsigned int val)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00387">aviobuf.c:387</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gad8fde0c159ac905909339e082a049cde"><div class="ttname"><a href="group__lavu__mem__funcs.html#gad8fde0c159ac905909339e082a049cde">av_reallocp_array</a></div><div class="ttdeci">int av_reallocp_array(void *ptr, size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00206">mem.c:206</a></div></div>
<div class="ttc" id="amxfenc_8c_html_adf188f187a0e27f371107e2e53f200c7"><div class="ttname"><a href="mxfenc_8c.html#adf188f187a0e27f371107e2e53f200c7">mxf_opatom_muxer_class</a></div><div class="ttdeci">static const AVClass mxf_opatom_muxer_class</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03183">mxfenc.c:3183</a></div></div>
<div class="ttc" id="aavio_8h_html_a16f2ba75f978a70f16dc55e2393f3439"><div class="ttname"><a href="avio_8h.html#a16f2ba75f978a70f16dc55e2393f3439">avio_wl32</a></div><div class="ttdeci">void avio_wl32(AVIOContext *s, unsigned int val)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00379">aviobuf.c:379</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255eda4506690612b68dea1dae6e77d3a00a1e"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda4506690612b68dea1dae6e77d3a00a1e">IndexTableSegment</a></div><div class="ttdeci">@ IndexTableSegment</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00046">mxf.h:46</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ad353216f8b0590eb5b059c298886412e"><div class="ttname"><a href="mxfenc_8c.html#ad353216f8b0590eb5b059c298886412e">mxf_gen_umid</a></div><div class="ttdeci">static void mxf_gen_umid(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02423">mxfenc.c:2423</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a8588e5086fd1cc038fd90efbb10bfe9f"><div class="ttname"><a href="mxfenc_8c.html#a8588e5086fd1cc038fd90efbb10bfe9f">mxf_write_system_item</a></div><div class="ttdeci">static void mxf_write_system_item(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02685">mxfenc.c:2685</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_ac25ed8394e1efdbbcf28932ff0020893"><div class="ttname"><a href="struct_a_v_codec_parameters.html#ac25ed8394e1efdbbcf28932ff0020893">AVCodecParameters::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:148</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a72fdd50bad28e14b960e0054a400586f"><div class="ttname"><a href="mxfenc_8c.html#a72fdd50bad28e14b960e0054a400586f">mxf_interleave_get_packet</a></div><div class="ttdeci">static int mxf_interleave_get_packet(AVFormatContext *s, AVPacket *out, AVPacket *pkt, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03048">mxfenc.c:3048</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a633e0a725537b96ec81834da7e843219"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a633e0a725537b96ec81834da7e843219">AVMasteringDisplayMetadata::display_primaries</a></div><div class="ttdeci">AVRational display_primaries[3][2]</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00042">mastering_display_metadata.h:42</a></div></div>
<div class="ttc" id="amxf_8c_html_a127504a310dad716eb3a83a6e846c338"><div class="ttname"><a href="mxf_8c.html#a127504a310dad716eb3a83a6e846c338">ff_mxf_mastering_display_local_tags</a></div><div class="ttdeci">const MXFLocalTagPair ff_mxf_mastering_display_local_tags[4]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00029">mxf.c:29</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_a4c7a521b8f1a0769c09bfa4a1fca7dab"><div class="ttname"><a href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a></div><div class="ttdeci">version</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00317">libkvazaar.c:317</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_abf6cc762099d2d3d70e62453774da9aa"><div class="ttname"><a href="struct_m_x_f_context.html#abf6cc762099d2d3d70e62453774da9aa">MXFContext::umid</a></div><div class="ttdeci">uint8_t umid[16]</div><div class="ttdoc">unique material identifier</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00253">mxfenc.c:253</a></div></div>
<div class="ttc" id="amxfenc_8c_html_af4e06a11b91ff978fecd6b1614758a70"><div class="ttname"><a href="mxfenc_8c.html#af4e06a11b91ff978fecd6b1614758a70">mxf_avc_subdescriptor_local_tags</a></div><div class="ttdeci">static const MXFLocalTagPair mxf_avc_subdescriptor_local_tags[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00407">mxfenc.c:407</a></div></div>
<div class="ttc" id="aintmath_8h_html_a2998e3360a5d1a5763e8c1008b7b2e1d"><div class="ttname"><a href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a></div><div class="ttdeci">#define av_log2</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00083">intmath.h:83</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aedcb909b3190b1c56c69ad69b2e35296"><div class="ttname"><a href="mxfenc_8c.html#aedcb909b3190b1c56c69ad69b2e35296">multiple_desc_ul</a></div><div class="ttdeci">static const uint8_t multiple_desc_ul[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00284">mxfenc.c:284</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a992dabf4b88254de0bc5158460b63aac"><div class="ttname"><a href="mxfenc_8c.html#a992dabf4b88254de0bc5158460b63aac">opatom_options</a></div><div class="ttdeci">static const AVOption opatom_options[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03174">mxfenc.c:3174</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a27d0579cb5db945a6ce24d48fbe8b836"><div class="ttname"><a href="struct_m_x_f_context.html#a27d0579cb5db945a6ce24d48fbe8b836">MXFContext::signal_standard</a></div><div class="ttdeci">int signal_standard</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00255">mxfenc.c:255</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a786f81429bb25853af449fe5737bf2c7"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">AVCodecParameters::block_align</a></div><div class="ttdeci">int block_align</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00177">codec_par.h:177</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a14d27fd607de01b69c61de36be032106"><div class="ttname"><a href="mxfenc_8c.html#a14d27fd607de01b69c61de36be032106">footer_partition_key</a></div><div class="ttdeci">static const uint8_t footer_partition_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00271">mxfenc.c:271</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a8507683cee9accbbda79588659abcea8"><div class="ttname"><a href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">write_packet</a></div><div class="ttdeci">static void write_packet(OutputFile *of, AVPacket *pkt, OutputStream *ost, int unqueue)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00703">ffmpeg.c:703</a></div></div>
<div class="ttc" id="atimecode_8c_html_ae3045b65cc54f72e9d53d3c97a5f4da5"><div class="ttname"><a href="timecode_8c.html#ae3045b65cc54f72e9d53d3c97a5f4da5">av_timecode_get_smpte_from_framenum</a></div><div class="ttdeci">uint32_t av_timecode_get_smpte_from_framenum(const AVTimecode *tc, int framenum)</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8c_source.html#l00055">timecode.c:55</a></div></div>
<div class="ttc" id="astruct_m_x_f_index_entry_html_ad8e2c2cf9bd1528ca2cbb91a2bef24fe"><div class="ttname"><a href="struct_m_x_f_index_entry.html#ad8e2c2cf9bd1528ca2cbb91a2bef24fe">MXFIndexEntry::temporal_ref</a></div><div class="ttdeci">uint16_t temporal_ref</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00072">mxfenc.c:72</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aad5bcdf3d890ff3d4c6920183fa5bf87"><div class="ttname"><a href="mxfenc_8c.html#aad5bcdf3d890ff3d4c6920183fa5bf87">container_ul</a></div><div class="ttdeci">const UID container_ul</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02078">mxfenc.c:2078</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a8f979a54e9cca2c61af2a119d630fd8c"><div class="ttname"><a href="mxfenc_8c.html#a8f979a54e9cca2c61af2a119d630fd8c">mxf_get_codec_ul_by_id</a></div><div class="ttdeci">static const MXFCodecUL * mxf_get_codec_ul_by_id(const MXFCodecUL *uls, int id)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00560">mxfenc.c:560</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a418fe46b202d0fdab1bdc116a863571a"><div class="ttname"><a href="mxfenc_8c.html#a418fe46b202d0fdab1bdc116a863571a">interlaced</a></div><div class="ttdeci">uint8_t interlaced</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02168">mxfenc.c:2168</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aea62f4c15fefa689b3c63bb039fccf50"><div class="ttname"><a href="mxfenc_8c.html#aea62f4c15fefa689b3c63bb039fccf50">mxf_write_avc_subdesc</a></div><div class="ttdeci">static void mxf_write_avc_subdesc(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01298">mxfenc.c:1298</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a></div><div class="ttdeci">@ AV_CODEC_ID_NONE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00047">codec_id.h:47</a></div></div>
<div class="ttc" id="aavio__internal_8h_html"><div class="ttname"><a href="avio__internal_8h.html">avio_internal.h</a></div></div>
<div class="ttc" id="astruct_a_v_timecode_html_af467d05fd293b6206e635e453b1f524a"><div class="ttname"><a href="struct_a_v_timecode.html#af467d05fd293b6206e635e453b1f524a">AVTimecode::start</a></div><div class="ttdeci">int start</div><div class="ttdoc">timecode frame start (first base frame number)</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00042">timecode.h:42</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a13be66c065e3ca9ca346e824829accc1"><div class="ttname"><a href="mxfenc_8c.html#a13be66c065e3ca9ca346e824829accc1">klv_fill_size</a></div><div class="ttdeci">static unsigned klv_fill_size(uint64_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01688">mxfenc.c:1688</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_ab41ba86e76941af3770b8ee825648868"><div class="ttname"><a href="struct_m_x_f_context.html#ab41ba86e76941af3770b8ee825648868">MXFContext::content_package_rate</a></div><div class="ttdeci">int content_package_rate</div><div class="ttdoc">content package rate in system element, see SMPTE 326M</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00250">mxfenc.c:250</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ace13217324bdb3d39dcc81b95a6953d8"><div class="ttname"><a href="mxfenc_8c.html#ace13217324bdb3d39dcc81b95a6953d8">mxf_write_cdci_desc</a></div><div class="ttdeci">static void mxf_write_cdci_desc(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01322">mxfenc.c:1322</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a4d9b2d9bce8b3075b18a6524f04a232b"><div class="ttname"><a href="mxfenc_8c.html#a4d9b2d9bce8b3075b18a6524f04a232b">codec_ul</a></div><div class="ttdeci">UID codec_ul</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01962">mxfenc.c:1962</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a1138ba4e7cfb75795578eb8cba035127"><div class="ttname"><a href="mxfenc_8c.html#a1138ba4e7cfb75795578eb8cba035127">index</a></div><div class="ttdeci">enum ULIndex index</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00114">mxfenc.c:133</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a58d581a92c475354ac3885da0d66aaa1"><div class="ttname"><a href="mxfenc_8c.html#a58d581a92c475354ac3885da0d66aaa1">mxf_write_s436m_anc_desc</a></div><div class="ttdeci">static void mxf_write_s436m_anc_desc(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01344">mxfenc.c:1344</a></div></div>
<div class="ttc" id="aavassert_8h_html_a557ed9c8df70c282bf6b7e0e07d7d5b0"><div class="ttname"><a href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a></div><div class="ttdeci">#define av_assert1(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00053">avassert.h:53</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a281641b9a1926dfdc4b73c4eb37e6220"><div class="ttname"><a href="mxfenc_8c.html#a281641b9a1926dfdc4b73c4eb37e6220">mxf_parse_dv_frame</a></div><div class="ttdeci">static int mxf_parse_dv_frame(AVFormatContext *s, AVStream *st, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02103">mxfenc.c:2103</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a6ca823054632821e085377f7d371a2d1"><div class="ttname"><a href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">AVStream::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00870">avformat.h:870</a></div></div>
<div class="ttc" id="amxfenc_8c_html_af2f17887a3405cd51ec4970ee7dd4008"><div class="ttname"><a href="mxfenc_8c.html#af2f17887a3405cd51ec4970ee7dd4008">umid_ul</a></div><div class="ttdeci">static const uint8_t umid_ul[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00264">mxfenc.c:264</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a09f9d0cee65cb17a34e6e6d313c44b76"><div class="ttname"><a href="writing__filters_8txt.html#a09f9d0cee65cb17a34e6e6d313c44b76">value</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf default value</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ab2e7da6dde9a606699facd04fab66c0b"><div class="ttname"><a href="mxfenc_8c.html#ab2e7da6dde9a606699facd04fab66c0b">mxf_d10_codec_uls</a></div><div class="ttdeci">static const UID mxf_d10_codec_uls[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00213">mxfenc.c:213</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a3ebbb4a4ec6c23227be7bffbbeb36b03"><div class="ttname"><a href="mxfenc_8c.html#a3ebbb4a4ec6c23227be7bffbbeb36b03">mxf_write_timecode_component</a></div><div class="ttdeci">static void mxf_write_timecode_component(AVFormatContext *s, AVStream *st, MXFPackage *package)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00894">mxfenc.c:894</a></div></div>
<div class="ttc" id="amxfenc_8c_html_abe45d561263cba484d376d98347eec9d"><div class="ttname"><a href="mxfenc_8c.html#abe45d561263cba484d376d98347eec9d">system_metadata_pack_key</a></div><div class="ttdeci">static const uint8_t system_metadata_pack_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02682">mxfenc.c:2682</a></div></div>
<div class="ttc" id="agroup__preproc__misc_html_ga700cb39b719fc7069d15c134129b1ca0"><div class="ttname"><a href="group__preproc__misc.html#ga700cb39b719fc7069d15c134129b1ca0">AV_STRINGIFY</a></div><div class="ttdeci">#define AV_STRINGIFY(s)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00036">macros.h:36</a></div></div>
<div class="ttc" id="astruct_h264_s_p_s_html"><div class="ttname"><a href="struct_h264_s_p_s.html">H264SPS</a></div><div class="ttdef"><b>Definition:</b> <a href="avc_8h_source.html#l00039">avc.h:39</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa10d44ae477c03846836534fadd73b06">AV_CODEC_ID_DVVIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_DVVIDEO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00073">codec_id.h:73</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255eda8750083ee9d196596a1eadbe4e7d0ba7"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda8750083ee9d196596a1eadbe4e7d0ba7">EssenceContainerData</a></div><div class="ttdeci">@ EssenceContainerData</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00047">mxf.h:47</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a79617949ea14ba6743e74618c7fe403d"><div class="ttname"><a href="mxfenc_8c.html#a79617949ea14ba6743e74618c7fe403d">mxf_write_uuid</a></div><div class="ttdeci">static void mxf_write_uuid(AVIOContext *pb, enum MXFMetadataSetType type, int value)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00420">mxfenc.c:420</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a0e30962e66d883ddba77fac5af55d3af"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a0e30962e66d883ddba77fac5af55d3af">AVMasteringDisplayMetadata::has_primaries</a></div><div class="ttdeci">int has_primaries</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00062">mastering_display_metadata.h:62</a></div></div>
<div class="ttc" id="astruct_m_x_f_container_essence_entry_html_ad8333d5329bc311a8b53c3dfdbcacd94"><div class="ttname"><a href="struct_m_x_f_container_essence_entry.html#ad8333d5329bc311a8b53c3dfdbcacd94">MXFContainerEssenceEntry::codec_ul</a></div><div class="ttdeci">UID codec_ul</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00106">mxfenc.c:106</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_gab646f0a7cc30af543ba4a91b37f9de6e"><div class="ttname"><a href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a></div><div class="ttdeci">static av_always_inline AVRational av_inv_q(AVRational q)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00159">rational.h:159</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a6113618badc827fe35a268b4c25ad57a"><div class="ttname"><a href="struct_m_x_f_context.html#a6113618badc827fe35a268b4c25ad57a">MXFContext::cbr_index</a></div><div class="ttdeci">int cbr_index</div><div class="ttdoc">use a constant bitrate index</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00260">mxfenc.c:260</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_abfc9b0aa975206f7e77a125e6b78536e"><div class="ttname"><a href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">AVCodecParameters::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00170">codec_par.h:170</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea4ff1478f2b0f3bc728f6cce39d44b9f0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea4ff1478f2b0f3bc728f6cce39d44b9f0">AV_CODEC_ID_JPEG2000</a></div><div class="ttdeci">@ AV_CODEC_ID_JPEG2000</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00137">codec_id.h:137</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html"><div class="ttname"><a href="struct_m_x_f_context.html">MXFContext</a></div><div class="ttdef"><b>Definition:</b> <a href="mxfdec_8c_source.html#l00279">mxfdec.c:279</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga3daf97178dd1b08b5e916be381cd33e4"><div class="ttname"><a href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a></div><div class="ttdeci">int64_t av_rescale(int64_t a, int64_t b, int64_t c)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00129">mathematics.c:129</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_ac299bfdecd086b22ede8225165bd7344"><div class="ttname"><a href="struct_m_x_f_stream_context.html#ac299bfdecd086b22ede8225165bd7344">MXFStreamContext::interlaced</a></div><div class="ttdeci">int interlaced</div><div class="ttdoc">whether picture is interlaced</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00083">mxfenc.c:83</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html"><div class="ttname"><a href="struct_a_v_codec_parameters.html">AVCodecParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00052">codec_par.h:52</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a></div><div class="ttdeci">@ AVCOL_RANGE_MPEG</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00569">pixfmt.h:569</a></div></div>
<div class="ttc" id="astruct_m_x_f_index_entry_html_a96daa18c7f0bd98a27fdb75f4861e583"><div class="ttname"><a href="struct_m_x_f_index_entry.html#a96daa18c7f0bd98a27fdb75f4861e583">MXFIndexEntry::flags</a></div><div class="ttdeci">uint8_t flags</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00073">mxfenc.c:73</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_addf45817ef0970905e650aff3907ce4d"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#addf45817ef0970905e650aff3907ce4d">AVMasteringDisplayMetadata::has_luminance</a></div><div class="ttdeci">int has_luminance</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00067">mastering_display_metadata.h:67</a></div></div>
<div class="ttc" id="astruct_m_x_f_codec_u_l_html"><div class="ttname"><a href="struct_m_x_f_codec_u_l.html">MXFCodecUL</a></div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00092">mxf.h:92</a></div></div>
<div class="ttc" id="atimecode_8h_html_ad0e6464512b7849a2d14593708079219a4cacf5e87e2f19987c5e931be20a5c33"><div class="ttname"><a href="timecode_8h.html#ad0e6464512b7849a2d14593708079219a4cacf5e87e2f19987c5e931be20a5c33">AV_TIMECODE_FLAG_DROPFRAME</a></div><div class="ttdeci">@ AV_TIMECODE_FLAG_DROPFRAME</div><div class="ttdoc">timecode is drop frame</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00036">timecode.h:36</a></div></div>
<div class="ttc" id="astruct_m_x_f_package_html"><div class="ttname"><a href="struct_m_x_f_package.html">MXFPackage</a></div><div class="ttdef"><b>Definition:</b> <a href="mxfdec_8c_source.html#l00238">mxfdec.c:238</a></div></div>
<div class="ttc" id="amovenc_8c_html_a1c50fcd1195659821729f52af8f3bb7d"><div class="ttname"><a href="movenc_8c.html#a1c50fcd1195659821729f52af8f3bb7d">tag</a></div><div class="ttdeci">uint32_t tag</div><div class="ttdef"><b>Definition:</b> <a href="movenc_8c_source.html#l01597">movenc.c:1597</a></div></div>
<div class="ttc" id="alibavformat_2version_8h_html_a82f92d7f1617b4f78bf94942c664dead"><div class="ttname"><a href="libavformat_2version_8h.html#a82f92d7f1617b4f78bf94942c664dead">LIBAVFORMAT_VERSION</a></div><div class="ttdeci">#define LIBAVFORMAT_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2version_8h_source.html#l00041">version.h:41</a></div></div>
<div class="ttc" id="astruct_m_x_f_container_essence_entry_html_a468cb26b162f96a3f921ab243133a76a"><div class="ttname"><a href="struct_m_x_f_container_essence_entry.html#a468cb26b162f96a3f921ab243133a76a">MXFContainerEssenceEntry::element_ul</a></div><div class="ttdeci">UID element_ul</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00105">mxfenc.c:105</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a50d250a128a3da9ce3d135e84213fb82"><div class="ttname"><a href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">AVStream::metadata</a></div><div class="ttdeci">AVDictionary * metadata</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00933">avformat.h:933</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a00bdf4216d0aa423556b05c9735aab94"><div class="ttname"><a href="mxfenc_8c.html#a00bdf4216d0aa423556b05c9735aab94">mxf_write_wav_common</a></div><div class="ttdeci">static int64_t mxf_write_wav_common(AVFormatContext *s, AVStream *st, const UID key)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01435">mxfenc.c:1435</a></div></div>
<div class="ttc" id="aavformat_8h_html_a2fa1d95841e62af509ba733a11c1b25b"><div class="ttname"><a href="avformat_8h.html#a2fa1d95841e62af509ba733a11c1b25b">AVFMT_FLAG_BITEXACT</a></div><div class="ttdeci">#define AVFMT_FLAG_BITEXACT</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01371">avformat.h:1371</a></div></div>
<div class="ttc" id="alibavformat_2version_8h_html_aa45868b1be1d747ba7f836a67eff1df5"><div class="ttname"><a href="libavformat_2version_8h.html#aa45868b1be1d747ba7f836a67eff1df5">LIBAVFORMAT_VERSION_MINOR</a></div><div class="ttdeci">#define LIBAVFORMAT_VERSION_MINOR</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2version_8h_source.html#l00035">version.h:35</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a9980207fba2926d9e201c34288faff16"><div class="ttname"><a href="mxfenc_8c.html#a9980207fba2926d9e201c34288faff16">mxf_wav_descriptor_key</a></div><div class="ttdeci">static const UID mxf_wav_descriptor_key</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01048">mxfenc.c:1048</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ac17cc209ad4b6ba56510421df27287db"><div class="ttname"><a href="mxfenc_8c.html#ac17cc209ad4b6ba56510421df27287db">op1a_ul</a></div><div class="ttdeci">static const uint8_t op1a_ul[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00269">mxfenc.c:269</a></div></div>
<div class="ttc" id="aavio_8h_html_a03e23bf0144030961c34e803c71f614f"><div class="ttname"><a href="avio_8h.html#a03e23bf0144030961c34e803c71f614f">avio_seek</a></div><div class="ttdeci">int64_t avio_seek(AVIOContext *s, int64_t offset, int whence)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00253">aviobuf.c:253</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a6f3ddce858390ede422db890eb34b7a6"><div class="ttname"><a href="avcodec_8h.html#a6f3ddce858390ede422db890eb34b7a6">FF_PROFILE_PRORES_4444</a></div><div class="ttdeci">#define FF_PROFILE_PRORES_4444</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01968">avcodec.h:1968</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a5d15733cd3fd22a082354d9804d86731"><div class="ttname"><a href="avcodec_8h.html#a5d15733cd3fd22a082354d9804d86731">FF_PROFILE_PRORES_PROXY</a></div><div class="ttdeci">#define FF_PROFILE_PRORES_PROXY</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01964">avcodec.h:1964</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="acbs__h264__syntax__template_8c_html_a242a701bcfbec850a5843e7fad901352"><div class="ttname"><a href="cbs__h264__syntax__template_8c.html#a242a701bcfbec850a5843e7fad901352">sps</a></div><div class="ttdeci">static int FUNC() sps(CodedBitstreamContext *ctx, RWContext *rw, H264RawSPS *current)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h264__syntax__template_8c_source.html#l00260">cbs_h264_syntax_template.c:260</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="aspdifenc_8c_html_addcb93d939ffa259ff1d9247bdd590fd"><div class="ttname"><a href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a></div><div class="ttdeci">unsigned int pos</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00410">spdifenc.c:410</a></div></div>
<div class="ttc" id="aavformat_8h_html"><div class="ttname"><a href="avformat_8h.html">avformat.h</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a1f90c0d65d382d7343ea09c51b7caeb8"><div class="ttname"><a href="mxfenc_8c.html#a1f90c0d65d382d7343ea09c51b7caeb8">MXFIndexEntry</a></div><div class="ttdeci">struct MXFIndexEntry MXFIndexEntry</div></div>
<div class="ttc" id="astruct_m_x_f_package_html_ae0412866c3499261e34f4ee0587a09d1"><div class="ttname"><a href="struct_m_x_f_package.html#ae0412866c3499261e34f4ee0587a09d1">MXFPackage::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="mxfdec_8c_source.html#l00247">mxfdec.c:247</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="asinewin__tablegen__template_8c_html_a3508a98d3ee7e2c9a4841fe264cf70f7"><div class="ttname"><a href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a></div><div class="ttdeci">#define FF_ARRAY_ELEMS(a)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen__template_8c_source.html#l00038">sinewin_tablegen_template.c:38</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ad89384197462d55b690b9be58ab997bf"><div class="ttname"><a href="mxfenc_8c.html#ad89384197462d55b690b9be58ab997bf">mxf_write_partition</a></div><div class="ttdeci">static int mxf_write_partition(AVFormatContext *s, int bodysid, int indexsid, const uint8_t *key, int write_metadata)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01855">mxfenc.c:1855</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a1955ef5f8647033c43ee2a3272b3f31c"><div class="ttname"><a href="mxfenc_8c.html#a1955ef5f8647033c43ee2a3272b3f31c">opatom_ul</a></div><div class="ttdeci">static const uint8_t opatom_ul[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00270">mxfenc.c:270</a></div></div>
<div class="ttc" id="aavio_8h_html_acf3a933e43bd56dcf671a6bc0c897bda"><div class="ttname"><a href="avio_8h.html#acf3a933e43bd56dcf671a6bc0c897bda">avio_put_str16be</a></div><div class="ttdeci">int avio_put_str16be(AVIOContext *s, const char *str)</div></div>
<div class="ttc" id="amxfenc_8c_html_a92ba2b3ed65ae251e69195d3ebe639b6"><div class="ttname"><a href="mxfenc_8c.html#a92ba2b3ed65ae251e69195d3ebe639b6">id</a></div><div class="ttdeci">enum AVCodecID id</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00114">mxfenc.c:132</a></div></div>
<div class="ttc" id="astruct_m_x_f_package_html_acca762ad71007ecaf630f2fc94b0c21f"><div class="ttname"><a href="struct_m_x_f_package.html#acca762ad71007ecaf630f2fc94b0c21f">MXFPackage::instance</a></div><div class="ttdeci">int instance</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00113">mxfenc.c:113</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a882e6b5bc070deca2cbd894aefd8e3d6"><div class="ttname"><a href="mxfenc_8c.html#a882e6b5bc070deca2cbd894aefd8e3d6">mxf_write_mpegvideo_desc</a></div><div class="ttdeci">static void mxf_write_mpegvideo_desc(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01350">mxfenc.c:1350</a></div></div>
<div class="ttc" id="arematrix__template_8c_html_a4dfdfbb7b69470f1152e022432ee2d45"><div class="ttname"><a href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a></div><div class="ttdeci">typedef void(RENAME(mix_any_func_type))</div><div class="ttdef"><b>Definition:</b> <a href="rematrix__template_8c_source.html#l00052">rematrix_template.c:52</a></div></div>
<div class="ttc" id="agolomb_8h_html_a7c893c9caa7bdb3efd220cb524df7df1"><div class="ttname"><a href="golomb_8h.html#a7c893c9caa7bdb3efd220cb524df7df1">get_ue_golomb_31</a></div><div class="ttdeci">static int get_ue_golomb_31(GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="golomb_8h_source.html#l00122">golomb.h:122</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ab14e780c24b79370eecbf04b1ce58235"><div class="ttname"><a href="mxfenc_8c.html#ab14e780c24b79370eecbf04b1ce58235">rescale_mastering_chroma</a></div><div class="ttdeci">static uint16_t rescale_mastering_chroma(AVRational q)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01055">mxfenc.c:1055</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a46435e97207f6bda848d8c62ac091851"><div class="ttname"><a href="mxfenc_8c.html#a46435e97207f6bda848d8c62ac091851">klv_fill_key</a></div><div class="ttdeci">static const uint8_t klv_fill_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00277">mxfenc.c:277</a></div></div>
<div class="ttc" id="arandom__seed_8h_html"><div class="ttname"><a href="random__seed_8h.html">random_seed.h</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a2873282c8bf99bea3f7a9dd2958b98aa"><div class="ttname"><a href="mxfenc_8c.html#a2873282c8bf99bea3f7a9dd2958b98aa">mxf_init_timecode</a></div><div class="ttdeci">static int mxf_init_timecode(AVFormatContext *s, AVStream *st, AVRational tbc)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02435">mxfenc.c:2435</a></div></div>
<div class="ttc" id="astruct_a_v_timecode_html_a76c634043ddfaa9b5772af8286e76216"><div class="ttname"><a href="struct_a_v_timecode.html#a76c634043ddfaa9b5772af8286e76216">AVTimecode::flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdoc">flags such as drop frame, +24 hours support, ...</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8h_source.html#l00043">timecode.h:43</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="aavio_8h_html_a03ea0dfa113a05f4843bbfff69e0cd0a"><div class="ttname"><a href="avio_8h.html#a03ea0dfa113a05f4843bbfff69e0cd0a">AVIO_SEEKABLE_NORMAL</a></div><div class="ttdeci">#define AVIO_SEEKABLE_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00040">avio.h:40</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_ab0441da511e6df50ad7c314d35d4f673"><div class="ttname"><a href="struct_m_x_f_stream_context.html#ab0441da511e6df50ad7c314d35d4f673">MXFStreamContext::seq_closed_gop</a></div><div class="ttdeci">int seq_closed_gop</div><div class="ttdoc">all gops in sequence are closed, used in mpeg-2 descriptor</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00096">mxfenc.c:96</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a1f86ed1b6a420faccacf77c98db6c1ffaef6df526ade7e565876d539b34151368"><div class="ttname"><a href="pixfmt_8h.html#a1f86ed1b6a420faccacf77c98db6c1ffaef6df526ade7e565876d539b34151368">AVCHROMA_LOC_CENTER</a></div><div class="ttdeci">@ AVCHROMA_LOC_CENTER</div><div class="ttdoc">MPEG-1 4:2:0, JPEG 4:2:0, H.263 4:2:0.</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00608">pixfmt.h:608</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a71179b8a05ceb32e801cf654575eb514"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a71179b8a05ceb32e801cf654575eb514">MXFStreamContext::codec_ul</a></div><div class="ttdeci">const UID * codec_ul</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00080">mxfenc.c:80</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a07a2266f217761315fd01f42bd8014a5"><div class="ttname"><a href="struct_m_x_f_context.html#a07a2266f217761315fd01f42bd8014a5">MXFContext::tagged_value_count</a></div><div class="ttdeci">uint32_t tagged_value_count</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00256">mxfenc.c:256</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a5b6ec89069b7b694484bd889eb19943f"><div class="ttname"><a href="mxfenc_8c.html#a5b6ec89069b7b694484bd889eb19943f">mxf_mpegvideo_descriptor_key</a></div><div class="ttdeci">static const UID mxf_mpegvideo_descriptor_key</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01047">mxfenc.c:1047</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a></div><div class="ttdeci">@ AV_OPT_TYPE_INT</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00225">opt.h:225</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="amxfenc_8c_html_abd47ffe9269bd364a178738537222cd0"><div class="ttname"><a href="mxfenc_8c.html#abd47ffe9269bd364a178738537222cd0">MXFStreamContext</a></div><div class="ttdeci">struct MXFStreamContext MXFStreamContext</div></div>
<div class="ttc" id="astruct_a_v_format_context_html"><div class="ttname"><a href="struct_a_v_format_context.html">AVFormatContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01223">avformat.h:1223</a></div></div>
<div class="ttc" id="adnxhddata_8c_html_a82b7798c6e57165c268ed6bf847c63fe"><div class="ttname"><a href="dnxhddata_8c.html#a82b7798c6e57165c268ed6bf847c63fe">avpriv_dnxhd_get_interlaced</a></div><div class="ttdeci">int avpriv_dnxhd_get_interlaced(int cid)</div><div class="ttdef"><b>Definition:</b> <a href="dnxhddata_8c_source.html#l01108">dnxhddata.c:1108</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a3518d8d631b02ae6de54c4bf2ccf2848"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a3518d8d631b02ae6de54c4bf2ccf2848">MXFStreamContext::temporal_reordering</a></div><div class="ttdeci">int temporal_reordering</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00090">mxfenc.c:90</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a390cfba6b9967341115325446d5beca6"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a390cfba6b9967341115325446d5beca6">MXFStreamContext::component_depth</a></div><div class="ttdeci">int component_depth</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00085">mxfenc.c:85</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_acf2f20cf2dee7626272509a69e08306b"><div class="ttname"><a href="struct_m_x_f_stream_context.html#acf2f20cf2dee7626272509a69e08306b">MXFStreamContext::slice_offset</a></div><div class="ttdeci">int slice_offset</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00094">mxfenc.c:94</a></div></div>
<div class="ttc" id="amxfenc_8c_html_af4481a295102cb399441cc7c2477d044"><div class="ttname"><a href="mxfenc_8c.html#af4481a295102cb399441cc7c2477d044">klv_ber_length</a></div><div class="ttdeci">static int klv_ber_length(uint64_t len)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00442">mxfenc.c:442</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a57adcb33de4cf966c0985e8de9b9e8e2"><div class="ttname"><a href="mxfenc_8c.html#a57adcb33de4cf966c0985e8de9b9e8e2">mxf_get_mpeg2_codec_ul</a></div><div class="ttdeci">static const UID * mxf_get_mpeg2_codec_ul(AVCodecParameters *par)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02323">mxfenc.c:2323</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ac53f7e33bdbd6ea3ec96ee0f1292ee84"><div class="ttname"><a href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio samples</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00008">filter_design.txt:8</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255eda92104cac10f46af29187f1242563cb70"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda92104cac10f46af29187f1242563cb70">SourcePackage</a></div><div class="ttdeci">@ SourcePackage</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00033">mxf.h:33</a></div></div>
<div class="ttc" id="astruct_a_v_packet_list_html_a2d7ef80c60c0c3a804248ab691b9c5a7"><div class="ttname"><a href="struct_a_v_packet_list.html#a2d7ef80c60c0c3a804248ab691b9c5a7">AVPacketList::pkt</a></div><div class="ttdeci">AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00397">packet.h:397</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga3f9c69432582e2857147bcba3c75dc32"><div class="ttname"><a href="group__lavu__math__rational.html#ga3f9c69432582e2857147bcba3c75dc32">av_mul_q</a></div><div class="ttdeci">AVRational av_mul_q(AVRational b, AVRational c)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00080">rational.c:80</a></div></div>
<div class="ttc" id="aavio_8h_html_a9a88d79a1fc983c04a4e009b85361d54"><div class="ttname"><a href="avio_8h.html#a9a88d79a1fc983c04a4e009b85361d54">avio_wb64</a></div><div class="ttdeci">void avio_wb64(AVIOContext *s, uint64_t val)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00453">aviobuf.c:453</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a5ca1021910fc2e493df2817296d53390"><div class="ttname"><a href="mxfenc_8c.html#a5ca1021910fc2e493df2817296d53390">mxf_dv_uls</a></div><div class="ttdeci">static const struct @3 mxf_dv_uls[]</div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a6b13b8a226ed923085718cd1323bfcb5"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a6b13b8a226ed923085718cd1323bfcb5">AVCodecParameters::profile</a></div><div class="ttdeci">int profile</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00120">codec_par.h:120</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488af2f411815209089345e9265984540ff5"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488af2f411815209089345e9265984540ff5">INDEX_D10_VIDEO</a></div><div class="ttdeci">@ INDEX_D10_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00121">mxfenc.c:121</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a26db80bae59f037980342c37a0975a75"><div class="ttname"><a href="mxfenc_8c.html#a26db80bae59f037980342c37a0975a75">mxf_generic_sound_descriptor_key</a></div><div class="ttdeci">static const UID mxf_generic_sound_descriptor_key</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01051">mxfenc.c:1051</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a60dd806b1593fc5b7b0ab1dfaac2fbf3"><div class="ttname"><a href="mxfenc_8c.html#a60dd806b1593fc5b7b0ab1dfaac2fbf3">mxf_parse_timestamp</a></div><div class="ttdeci">static uint64_t mxf_parse_timestamp(int64_t timestamp64)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02407">mxfenc.c:2407</a></div></div>
<div class="ttc" id="amxfenc_8c_html_add3060c3900aa3923b475c0e5d89075f"><div class="ttname"><a href="mxfenc_8c.html#add3060c3900aa3923b475c0e5d89075f">mxf_write_generic_sound_common</a></div><div class="ttdeci">static int64_t mxf_write_generic_sound_common(AVFormatContext *s, AVStream *st, const UID key)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01388">mxfenc.c:1388</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a3da809d545eba5fc3a8e20fa6d280e41"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a3da809d545eba5fc3a8e20fa6d280e41">MXFStreamContext::h_chroma_sub_sample</a></div><div class="ttdeci">int h_chroma_sub_sample</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00088">mxfenc.c:88</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_ade341374143ad5db0fd8ea1eb297fbbd"><div class="ttname"><a href="struct_m_x_f_stream_context.html#ade341374143ad5db0fd8ea1eb297fbbd">MXFStreamContext::signal_standard</a></div><div class="ttdeci">int signal_standard</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00087">mxfenc.c:87</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a22e95b662424831c5651c0a8fcbb2d5b"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a22e95b662424831c5651c0a8fcbb2d5b">MXFStreamContext::max_gop</a></div><div class="ttdeci">int max_gop</div><div class="ttdoc">maximum gop size, used by mpeg-2 descriptor</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00097">mxfenc.c:97</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a9028ba8ee263357a969acb587481af6b"><div class="ttname"><a href="mxfenc_8c.html#a9028ba8ee263357a969acb587481af6b">index_table_segment_key</a></div><div class="ttdeci">static const uint8_t index_table_segment_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00273">mxfenc.c:273</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a73daf89ccfe6fce7401d82df1b3a5c9a"><div class="ttname"><a href="mxfenc_8c.html#a73daf89ccfe6fce7401d82df1b3a5c9a">header_closed_partition_key</a></div><div class="ttdeci">static const uint8_t header_closed_partition_key[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00276">mxfenc.c:276</a></div></div>
<div class="ttc" id="amxfenc_8c_html_adb887ad69198a655b7ed37086b9b0820"><div class="ttname"><a href="mxfenc_8c.html#adb887ad69198a655b7ed37086b9b0820">mxf_write_preface</a></div><div class="ttdeci">static void mxf_write_preface(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00596">mxfenc.c:596</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a506a289fddcdf1e290ca22a04d19b488ab1aa9d240c886c47c4f2b78ac62b03ad"><div class="ttname"><a href="mxfenc_8c.html#a506a289fddcdf1e290ca22a04d19b488ab1aa9d240c886c47c4f2b78ac62b03ad">INDEX_PRORES</a></div><div class="ttdeci">@ INDEX_PRORES</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00128">mxfenc.c:128</a></div></div>
<div class="ttc" id="amastering__display__metadata_8h_html"><div class="ttname"><a href="mastering__display__metadata_8h.html">mastering_display_metadata.h</a></div></div>
<div class="ttc" id="agolomb_8h_html_af09ebe1db4301aaa62f22ec381c89bd2"><div class="ttname"><a href="golomb_8h.html#af09ebe1db4301aaa62f22ec381c89bd2">get_ue_golomb_long</a></div><div class="ttdeci">static unsigned get_ue_golomb_long(GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="golomb_8h_source.html#l00106">golomb.h:106</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a61b61b0d009be377ebcfdc30ea053d27"><div class="ttname"><a href="struct_a_v_stream.html#a61b61b0d009be377ebcfdc30ea053d27">AVStream::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00884">avformat.h:884</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a></div><div class="ttdeci">@ AV_FIELD_PROGRESSIVE</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00038">codec_par.h:38</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html"><div class="ttname"><a href="struct_a_v_stream.html">AVStream</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00869">avformat.h:869</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html_ac3abc5f47f3465b6b7eec89c9476351c"><div class="ttname"><a href="struct_a_v_output_format.html#ac3abc5f47f3465b6b7eec89c9476351c">AVOutputFormat::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00491">avformat.h:491</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a98e12ae9a557435baf12cc9c671cbd2d"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a98e12ae9a557435baf12cc9c671cbd2d">MXFStreamContext::aspect_ratio</a></div><div class="ttdeci">AVRational aspect_ratio</div><div class="ttdoc">display aspect ratio</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00091">mxfenc.c:91</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55bafecaaa64bb1dfd9df3d21e7253ecb973"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bafecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a></div><div class="ttdeci">@ H264_NAL_IDR_SLICE</div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00039">h264.h:39</a></div></div>
<div class="ttc" id="aavio_8h_html_a81a5cfb941abfe2b83a30be4f86ad06d"><div class="ttname"><a href="avio_8h.html#a81a5cfb941abfe2b83a30be4f86ad06d">avio_wb24</a></div><div class="ttdeci">void avio_wb24(AVIOContext *s, unsigned int val)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00477">aviobuf.c:477</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a6898b0551f1d48ff66080617b5233dc4"><div class="ttname"><a href="mxfenc_8c.html#a6898b0551f1d48ff66080617b5233dc4">mxf_options</a></div><div class="ttdeci">static const AVOption mxf_options[]</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03144">mxfenc.c:3144</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aa4a17fb088e6eccfd8b8a5a0c96288b9"><div class="ttname"><a href="mxfenc_8c.html#aa4a17fb088e6eccfd8b8a5a0c96288b9">MXFContext</a></div><div class="ttdeci">struct MXFContext MXFContext</div></div>
<div class="ttc" id="astruct_m_x_f_package_html_a71d43b969b04bf06dbab699a2c700d95"><div class="ttname"><a href="struct_m_x_f_package.html#a71d43b969b04bf06dbab699a2c700d95">MXFPackage::type</a></div><div class="ttdeci">enum MXFMetadataSetType type</div><div class="ttdef"><b>Definition:</b> <a href="mxfdec_8c_source.html#l00239">mxfdec.c:240</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a58369c3a8a986935b572df5aa6361ce2"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">AVCodecParameters::codec_type</a></div><div class="ttdeci">enum AVMediaType codec_type</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:56</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a48fa068f224b4c0b5cdde518c760e525"><div class="ttname"><a href="mxfenc_8c.html#a48fa068f224b4c0b5cdde518c760e525">ff_mxf_d10_muxer</a></div><div class="ttdeci">AVOutputFormat ff_mxf_d10_muxer</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l03207">mxfenc.c:3207</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a153946872548cd56132907b93f05f9aa"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a153946872548cd56132907b93f05f9aa">AVCodecParameters::field_order</a></div><div class="ttdeci">enum AVFieldOrder field_order</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:141</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444af3898696f46dc79b74b708d8fa4b52a7">AV_OPT_TYPE_BOOL</a></div><div class="ttdeci">@ AV_OPT_TYPE_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00242">opt.h:242</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="alibavformat_2flvenc_8c_html_ab3f550c9933a09a1d573be023639ce90"><div class="ttname"><a href="libavformat_2flvenc_8c.html#ab3f550c9933a09a1d573be023639ce90">write_metadata</a></div><div class="ttdeci">static void write_metadata(AVFormatContext *s, unsigned int ts)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2flvenc_8c_source.html#l00274">flvenc.c:274</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a5ac802c16f1e222b57c1d409564f9aa7"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a5ac802c16f1e222b57c1d409564f9aa7">MXFStreamContext::index</a></div><div class="ttdeci">int index</div><div class="ttdoc">index in mxf_essence_container_uls table</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00079">mxfenc.c:79</a></div></div>
<div class="ttc" id="amxfenc_8c_html_abcbd6bdd2e6117ed9dceaa3063df5476"><div class="ttname"><a href="mxfenc_8c.html#abcbd6bdd2e6117ed9dceaa3063df5476">mxf_write_generic_desc</a></div><div class="ttdeci">static int64_t mxf_write_generic_desc(AVFormatContext *s, AVStream *st, const UID key)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01008">mxfenc.c:1008</a></div></div>
<div class="ttc" id="aavio_8h_html_a4ff718da93c106f7ba48de1cb6b010c6"><div class="ttname"><a href="avio_8h.html#a4ff718da93c106f7ba48de1cb6b010c6">avio_put_str16le</a></div><div class="ttdeci">int avio_put_str16le(AVIOContext *s, const char *str)</div></div>
<div class="ttc" id="abytestream_8h_html"><div class="ttname"><a href="bytestream_8h.html">bytestream.h</a></div></div>
<div class="ttc" id="aavio__internal_8h_html_a4e3d561f0280d04d67cc0e9f33a04e36"><div class="ttname"><a href="avio__internal_8h.html#a4e3d561f0280d04d67cc0e9f33a04e36">ffio_fill</a></div><div class="ttdeci">void ffio_fill(AVIOContext *s, int b, int count)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00211">aviobuf.c:211</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ae17c511e11351a32713eace7567fa90e"><div class="ttname"><a href="mxfenc_8c.html#ae17c511e11351a32713eace7567fa90e">mxf_s436m_anc_descriptor_key</a></div><div class="ttdeci">static const UID mxf_s436m_anc_descriptor_key</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01046">mxfenc.c:1046</a></div></div>
<div class="ttc" id="aavio_8h_html_a21c2d7b7ddd7f31d24d278f8b3281ec3"><div class="ttname"><a href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a></div><div class="ttdeci">void avio_wb16(AVIOContext *s, unsigned int val)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00465">aviobuf.c:465</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a6047808424335311a3e5259a5dda34b0"><div class="ttname"><a href="mxfenc_8c.html#a6047808424335311a3e5259a5dda34b0">EDIT_UNITS_PER_BODY</a></div><div class="ttdeci">#define EDIT_UNITS_PER_BODY</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00066">mxfenc.c:66</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a41cdb4a229a3d71837d607124f8a07a4"><div class="ttname"><a href="mxfenc_8c.html#a41cdb4a229a3d71837d607124f8a07a4">profile</a></div><div class="ttdeci">int profile</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01961">mxfenc.c:1961</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a595fd1389ab86862e2c03c8a4d68bd2c"><div class="ttname"><a href="mxfenc_8c.html#a595fd1389ab86862e2c03c8a4d68bd2c">mxf_write_tape_descriptor</a></div><div class="ttdeci">static void mxf_write_tape_descriptor(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00958">mxfenc.c:958</a></div></div>
<div class="ttc" id="amxfenc_8c_html_aa0663cfca8e5954f89ef979ccd31ef34"><div class="ttname"><a href="mxfenc_8c.html#aa0663cfca8e5954f89ef979ccd31ef34">mxf_write_h264_desc</a></div><div class="ttdeci">static void mxf_write_h264_desc(AVFormatContext *s, AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01332">mxfenc.c:1332</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ab720a7ccd4eb71e55b78438b7cf56d73"><div class="ttname"><a href="mxfenc_8c.html#ab720a7ccd4eb71e55b78438b7cf56d73">mxf_aes3_descriptor_key</a></div><div class="ttdeci">static const UID mxf_aes3_descriptor_key</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l01049">mxfenc.c:1049</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a27a022aaf43fc28d9337cc8729a71d98"><div class="ttname"><a href="mxfenc_8c.html#a27a022aaf43fc28d9337cc8729a71d98">mxf_write_essence_container_refs</a></div><div class="ttdeci">static void mxf_write_essence_container_refs(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00574">mxfenc.c:574</a></div></div>
<div class="ttc" id="astruct_a_v_mastering_display_metadata_html_a45890b654337321044a5b13c5e5961c5"><div class="ttname"><a href="struct_a_v_mastering_display_metadata.html#a45890b654337321044a5b13c5e5961c5">AVMasteringDisplayMetadata::max_luminance</a></div><div class="ttdeci">AVRational max_luminance</div><div class="ttdef"><b>Definition:</b> <a href="mastering__display__metadata_8h_source.html#l00057">mastering_display_metadata.h:57</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a74646711b0aac1657fece64eaafd47a3"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a74646711b0aac1657fece64eaafd47a3">MXFStreamContext::low_delay</a></div><div class="ttdeci">int low_delay</div><div class="ttdoc">low delay, used in mpeg-2 descriptor</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00099">mxfenc.c:99</a></div></div>
<div class="ttc" id="atimecode_8c_html_a02596c9d431329a3acc646c943b1c800"><div class="ttname"><a href="timecode_8c.html#a02596c9d431329a3acc646c943b1c800">av_timecode_init_from_string</a></div><div class="ttdeci">int av_timecode_init_from_string(AVTimecode *tc, AVRational rate, const char *str, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="timecode_8c_source.html#l00232">timecode.c:232</a></div></div>
<div class="ttc" id="amxf_8h_html_ae796233fd8fcc5197b5e870b994255eda16fc0d03fb7ae5b1e8408b4716576cd4"><div class="ttname"><a href="mxf_8h.html#ae796233fd8fcc5197b5e870b994255eda16fc0d03fb7ae5b1e8408b4716576cd4">Sequence</a></div><div class="ttdeci">@ Sequence</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00037">mxf.h:37</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_a6d1b329331a62e44b3f122d533dd9eb7"><div class="ttname"><a href="struct_m_x_f_stream_context.html#a6d1b329331a62e44b3f122d533dd9eb7">MXFStreamContext::track_essence_element_key</a></div><div class="ttdeci">UID track_essence_element_key</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00078">mxfenc.c:78</a></div></div>
<div class="ttc" id="affv1enc_8c_html_a5ba88be0a987de9abb6091eb8e167e09"><div class="ttname"><a href="ffv1enc_8c.html#a5ba88be0a987de9abb6091eb8e167e09">write_header</a></div><div class="ttdeci">static void write_header(FFV1Context *f)</div><div class="ttdef"><b>Definition:</b> <a href="ffv1enc_8c_source.html#l00346">ffv1enc.c:346</a></div></div>
<div class="ttc" id="astruct_m_x_f_context_html_a0f7818763fb94714b758f4cf8de59416"><div class="ttname"><a href="struct_m_x_f_context.html#a0f7818763fb94714b758f4cf8de59416">MXFContext::last_indexed_edit_unit</a></div><div class="ttdeci">int last_indexed_edit_unit</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00241">mxfenc.c:241</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG2VIDEO</div><div class="ttdoc">preferred ID for MPEG-1/2 video decoding</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00051">codec_id.h:51</a></div></div>
<div class="ttc" id="amxfenc_8c_html_a2bd823bd6ddef058c7152520c0f3da17"><div class="ttname"><a href="mxfenc_8c.html#a2bd823bd6ddef058c7152520c0f3da17">mxf_write_refs_count</a></div><div class="ttdeci">static void mxf_write_refs_count(AVIOContext *pb, int ref_count)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00436">mxfenc.c:436</a></div></div>
<div class="ttc" id="asnprintf_8h_html_aa367b75c5aed883fef5befbdf04835a4"><div class="ttname"><a href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a></div><div class="ttdeci">#define snprintf</div><div class="ttdef"><b>Definition:</b> <a href="snprintf_8h_source.html#l00034">snprintf.h:34</a></div></div>
<div class="ttc" id="amxf_8h_html_ad0dd2ea65198a234c8cee4237d2516fe"><div class="ttname"><a href="mxf_8h.html#ad0dd2ea65198a234c8cee4237d2516fe">UID</a></div><div class="ttdeci">uint8_t UID[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8h_source.html#l00028">mxf.h:28</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ad9a02684287104c322cef3b03a3d9107"><div class="ttname"><a href="mxfenc_8c.html#ad9a02684287104c322cef3b03a3d9107">mxf_write_primer_pack</a></div><div class="ttdeci">static void mxf_write_primer_pack(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00503">mxfenc.c:503</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html"><div class="ttname"><a href="struct_a_v_output_format.html">AVOutputFormat</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00490">avformat.h:490</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead36347b6ae291fc3cc95f84aecf8035a"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead36347b6ae291fc3cc95f84aecf8035a">AV_CODEC_ID_DNXHD</a></div><div class="ttdeci">@ AV_CODEC_ID_DNXHD</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00148">codec_id.h:148</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceab140360bd655d8add22265dbe45b581c"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceab140360bd655d8add22265dbe45b581c">AV_CODEC_ID_PRORES</a></div><div class="ttdeci">@ AV_CODEC_ID_PRORES</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00197">codec_id.h:197</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ae28bf66a39f1dea8e3d16d9f0c72d413"><div class="ttname"><a href="mxfenc_8c.html#ae28bf66a39f1dea8e3d16d9f0c72d413">mxf_write_metadata_key</a></div><div class="ttdeci">static void mxf_write_metadata_key(AVIOContext *pb, unsigned int value)</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00554">mxfenc.c:554</a></div></div>
<div class="ttc" id="astruct_m_x_f_stream_context_html_ab5dd5263154ce69f54e4bcc0e7cceff3"><div class="ttname"><a href="struct_m_x_f_stream_context.html#ab5dd5263154ce69f54e4bcc0e7cceff3">MXFStreamContext::color_siting</a></div><div class="ttdeci">int color_siting</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l00086">mxfenc.c:86</a></div></div>
<div class="ttc" id="aavc_8c_html_a09bd351622f49e73180502329f7f0e3b"><div class="ttname"><a href="avc_8c.html#a09bd351622f49e73180502329f7f0e3b">ff_avc_find_startcode</a></div><div class="ttdeci">const uint8_t * ff_avc_find_startcode(const uint8_t *p, const uint8_t *end)</div><div class="ttdef"><b>Definition:</b> <a href="avc_8c_source.html#l00067">avc.c:67</a></div></div>
<div class="ttc" id="aavio_8h_html_a4dbe7c0b3d5c86e46b9991ee805c5e21a870634b3c75cf4bcff8306fac01b04be"><div class="ttname"><a href="avio_8h.html#a4dbe7c0b3d5c86e46b9991ee805c5e21a870634b3c75cf4bcff8306fac01b04be">AVIO_DATA_MARKER_FLUSH_POINT</a></div><div class="ttdeci">@ AVIO_DATA_MARKER_FLUSH_POINT</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00146">avio.h:146</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
